const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DpT8JGlu.js","./BCBHjj3S.js","./DLxnR-bk.js","./2-HmZOU5.js","./BnzLEmnY.js","./DiKQMK06.js","./DwQwBgYJ.js","./auIukadI.js","./DKBq3jgd.js","./Dn9-xDNj.js","./BCqvTmhN.js","./D3sPZ9y0.js","./CgYBhain.js","./5qgvtwS4.js","./CTnUhF1n.js","./DY-ssIu1.js","./ttlWZzhO.js","./CzYuZZRe.js","./Dp1pzeXC.js","./CbHM4lHO.js","./CqkleIqs.js","./6A27k182.js","./Gi6I4Gst.js","./C4B-KCzX.js","./Ckw6tIJu.js","./8T1XTuxp.js","./4udB4NzG.js","./CmKTTxBW.js","./DzuRD2oE.js","./CDKS-0mO.js","./PQEBqEYu.js","./CJ8aE0Ag.js","./B0WhhfC-.js","./DSPNC1Kp.js","./DcW_YQ5n.js","./CyEkXAh8.js","./CIcc5MCa.js","./BRAHB-ya.js","./9gUq_U7h.js","./CNnoJf6S.js","./DYGnug3r.js","./BTKho27n.js","./CYWLVBc8.js","./YRbyPKrz.js","./TQHYOU9I.js","./DBuVaz1-.js","./DC8cJQSY.js","./D0BIT6AZ.js","./DGCYvQDm.js"])))=>i.map(i=>d[i]);
var Yy=Object.defineProperty;var Gy=(e,t,r)=>t in e?Yy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var zt=(e,t,r)=>Gy(e,typeof t!="symbol"?t+"":t,r);import"./Bzak7iHL.js";import{i as Xy}from"./DRBHOSHy.js";import{o as Zy}from"./CX_v8heV.js";import{t as Le,I as qc,a6 as zc,k as Ky,b2 as Qy,ac as Wc,ap as Jy,az as t0,aO as e0,aN as r0,a8 as jc,ah as i0,a7 as a0,ad as Mn,p as n0,a$ as De,b0 as s0,f as At,d as bo,a as Tt,b as o0,g as w,$ as l0,b3 as Hc,s as U,c as W,y as rt,aK as Vc,j as Jt,G as ne,n as $i,r as O,aZ as c0,b4 as re}from"./Do1ZFGG4.js";import{s as Dt}from"./B3vzot4m.js";import{i as Yt}from"./u0nbcFoB.js";import{e as Xr,i as Zr}from"./BpOCHIqK.js";import{h as h0}from"./CsitS2Xv.js";import{s as Kr,r as Ln,a as Fi}from"./CrL_2sbq.js";import{s as Qr}from"./CiOfHTK_.js";import{e as Gt}from"./gKw3nvZ-.js";import{s as tr}from"./PVmdyhjp.js";import{a as An,c as Uc}from"./2jUK4Eaf.js";import{b as u0}from"./DjFPsqgv.js";import{_ as Ot}from"./Dp1pzeXC.js";import{g as p0}from"./CqkleIqs.js";function Yc(e,t,r=!1,i=!1,a=!1){var n=e,o="";Le(()=>{var s=Ky;if(o===(o=t()??"")){qc&&zc();return}if(s.nodes_start!==null&&(Qy(s.nodes_start,s.nodes_end),s.nodes_start=s.nodes_end=null),o!==""){if(qc){Wc.data;for(var l=zc(),c=l;l!==null&&(l.nodeType!==Jy||l.data!=="");)c=l,l=t0(l);if(l===null)throw e0(),r0;jc(Wc,c),n=i0(l);return}var h=o+"";r?h=`<svg>${h}</svg>`:i&&(h=`<math>${h}</math>`);var u=a0(h);if((r||i)&&(u=Mn(u)),jc(Mn(u),u.lastChild),r||i)for(;Mn(u);)n.before(Mn(u));else n.before(u)}})}var zn={exports:{}},d0=zn.exports,Gc;function f0(){return Gc||(Gc=1,function(e,t){(function(r,i){e.exports=i()})(d0,function(){var r=1e3,i=6e4,a=36e5,n="millisecond",o="second",s="minute",l="hour",c="day",h="week",u="month",d="quarter",p="year",g="date",m="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(B){var E=["th","st","nd","rd"],A=B%100;return"["+B+(E[(A-20)%10]||E[A]||E[0])+"]"}},_=function(B,E,A){var R=String(B);return!R||R.length>=E?B:""+Array(E+1-R.length).join(A)+B},T={s:_,z:function(B){var E=-B.utcOffset(),A=Math.abs(E),R=Math.floor(A/60),$=A%60;return(E<=0?"+":"-")+_(R,2,"0")+":"+_($,2,"0")},m:function B(E,A){if(E.date()<A.date())return-B(A,E);var R=12*(A.year()-E.year())+(A.month()-E.month()),$=E.clone().add(R,u),K=A-$<0,et=E.clone().add(R+(K?-1:1),u);return+(-(R+(A-$)/(K?$-et:et-$))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:u,y:p,w:h,d:c,D:g,h:l,m:s,s:o,ms:n,Q:d}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},S="en",v={};v[S]=b;var M="$isDayjsObject",N=function(B){return B instanceof Y||!(!B||!B[M])},V=function B(E,A,R){var $;if(!E)return S;if(typeof E=="string"){var K=E.toLowerCase();v[K]&&($=K),A&&(v[K]=A,$=K);var et=E.split("-");if(!$&&et.length>1)return B(et[0])}else{var at=E.name;v[at]=E,$=at}return!R&&$&&(S=$),$||!R&&S},q=function(B,E){if(N(B))return B.clone();var A=typeof E=="object"?E:{};return A.date=B,A.args=arguments,new Y(A)},F=T;F.l=V,F.i=N,F.w=function(B,E){return q(B,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var Y=function(){function B(A){this.$L=V(A.locale,null,!0),this.parse(A),this.$x=this.$x||A.x||{},this[M]=!0}var E=B.prototype;return E.parse=function(A){this.$d=function(R){var $=R.date,K=R.utc;if($===null)return new Date(NaN);if(F.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var et=$.match(y);if(et){var at=et[2]-1||0,St=(et[7]||"0").substring(0,3);return K?new Date(Date.UTC(et[1],at,et[3]||1,et[4]||0,et[5]||0,et[6]||0,St)):new Date(et[1],at,et[3]||1,et[4]||0,et[5]||0,et[6]||0,St)}}return new Date($)}(A),this.init()},E.init=function(){var A=this.$d;this.$y=A.getFullYear(),this.$M=A.getMonth(),this.$D=A.getDate(),this.$W=A.getDay(),this.$H=A.getHours(),this.$m=A.getMinutes(),this.$s=A.getSeconds(),this.$ms=A.getMilliseconds()},E.$utils=function(){return F},E.isValid=function(){return this.$d.toString()!==m},E.isSame=function(A,R){var $=q(A);return this.startOf(R)<=$&&$<=this.endOf(R)},E.isAfter=function(A,R){return q(A)<this.startOf(R)},E.isBefore=function(A,R){return this.endOf(R)<q(A)},E.$g=function(A,R,$){return F.u(A)?this[R]:this.set($,A)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(A,R){var $=this,K=!!F.u(R)||R,et=F.p(A),at=function(Rt,It){var Zt=F.w($.$u?Date.UTC($.$y,It,Rt):new Date($.$y,It,Rt),$);return K?Zt:Zt.endOf(c)},St=function(Rt,It){return F.w($.toDate()[Rt].apply($.toDate("s"),(K?[0,0,0,0]:[23,59,59,999]).slice(It)),$)},vt=this.$W,Nt=this.$M,_t=this.$D,yt="set"+(this.$u?"UTC":"");switch(et){case p:return K?at(1,0):at(31,11);case u:return K?at(1,Nt):at(0,Nt+1);case h:var wt=this.$locale().weekStart||0,qt=(vt<wt?vt+7:vt)-wt;return at(K?_t-qt:_t+(6-qt),Nt);case c:case g:return St(yt+"Hours",0);case l:return St(yt+"Minutes",1);case s:return St(yt+"Seconds",2);case o:return St(yt+"Milliseconds",3);default:return this.clone()}},E.endOf=function(A){return this.startOf(A,!1)},E.$set=function(A,R){var $,K=F.p(A),et="set"+(this.$u?"UTC":""),at=($={},$[c]=et+"Date",$[g]=et+"Date",$[u]=et+"Month",$[p]=et+"FullYear",$[l]=et+"Hours",$[s]=et+"Minutes",$[o]=et+"Seconds",$[n]=et+"Milliseconds",$)[K],St=K===c?this.$D+(R-this.$W):R;if(K===u||K===p){var vt=this.clone().set(g,1);vt.$d[at](St),vt.init(),this.$d=vt.set(g,Math.min(this.$D,vt.daysInMonth())).$d}else at&&this.$d[at](St);return this.init(),this},E.set=function(A,R){return this.clone().$set(A,R)},E.get=function(A){return this[F.p(A)]()},E.add=function(A,R){var $,K=this;A=Number(A);var et=F.p(R),at=function(Nt){var _t=q(K);return F.w(_t.date(_t.date()+Math.round(Nt*A)),K)};if(et===u)return this.set(u,this.$M+A);if(et===p)return this.set(p,this.$y+A);if(et===c)return at(1);if(et===h)return at(7);var St=($={},$[s]=i,$[l]=a,$[o]=r,$)[et]||1,vt=this.$d.getTime()+A*St;return F.w(vt,this)},E.subtract=function(A,R){return this.add(-1*A,R)},E.format=function(A){var R=this,$=this.$locale();if(!this.isValid())return $.invalidDate||m;var K=A||"YYYY-MM-DDTHH:mm:ssZ",et=F.z(this),at=this.$H,St=this.$m,vt=this.$M,Nt=$.weekdays,_t=$.months,yt=$.meridiem,wt=function(It,Zt,ce,Te){return It&&(It[Zt]||It(R,K))||ce[Zt].slice(0,Te)},qt=function(It){return F.s(at%12||12,It,"0")},Rt=yt||function(It,Zt,ce){var Te=It<12?"AM":"PM";return ce?Te.toLowerCase():Te};return K.replace(x,function(It,Zt){return Zt||function(ce){switch(ce){case"YY":return String(R.$y).slice(-2);case"YYYY":return F.s(R.$y,4,"0");case"M":return vt+1;case"MM":return F.s(vt+1,2,"0");case"MMM":return wt($.monthsShort,vt,_t,3);case"MMMM":return wt(_t,vt);case"D":return R.$D;case"DD":return F.s(R.$D,2,"0");case"d":return String(R.$W);case"dd":return wt($.weekdaysMin,R.$W,Nt,2);case"ddd":return wt($.weekdaysShort,R.$W,Nt,3);case"dddd":return Nt[R.$W];case"H":return String(at);case"HH":return F.s(at,2,"0");case"h":return qt(1);case"hh":return qt(2);case"a":return Rt(at,St,!0);case"A":return Rt(at,St,!1);case"m":return String(St);case"mm":return F.s(St,2,"0");case"s":return String(R.$s);case"ss":return F.s(R.$s,2,"0");case"SSS":return F.s(R.$ms,3,"0");case"Z":return et}return null}(It)||et.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(A,R,$){var K,et=this,at=F.p(R),St=q(A),vt=(St.utcOffset()-this.utcOffset())*i,Nt=this-St,_t=function(){return F.m(et,St)};switch(at){case p:K=_t()/12;break;case u:K=_t();break;case d:K=_t()/3;break;case h:K=(Nt-vt)/6048e5;break;case c:K=(Nt-vt)/864e5;break;case l:K=Nt/a;break;case s:K=Nt/i;break;case o:K=Nt/r;break;default:K=Nt}return $?K:F.a(K)},E.daysInMonth=function(){return this.endOf(u).$D},E.$locale=function(){return v[this.$L]},E.locale=function(A,R){if(!A)return this.$L;var $=this.clone(),K=V(A,R,!0);return K&&($.$L=K),$},E.clone=function(){return F.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},B}(),z=Y.prototype;return q.prototype=z,[["$ms",n],["$s",o],["$m",s],["$H",l],["$W",c],["$M",u],["$y",p],["$D",g]].forEach(function(B){z[B[1]]=function(E){return this.$g(E,B[0],B[1])}}),q.extend=function(B,E){return B.$i||(B(E,Y,q),B.$i=!0),q},q.locale=V,q.isDayjs=N,q.unix=function(B){return q(1e3*B)},q.en=v[S],q.Ls=v,q.p={},q})}(zn)),zn.exports}var g0=f0();const m0=p0(g0),Wn={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e),hsl2rgb:({h:e,s:t,l:r},i)=>{if(!t)return r*2.55;e/=360,t/=100,r/=100;const a=r<.5?r*(1+t):r+t-r*t,n=2*r-a;switch(i){case"r":return Wn.hue2rgb(n,a,e+1/3)*255;case"g":return Wn.hue2rgb(n,a,e)*255;case"b":return Wn.hue2rgb(n,a,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:r},i)=>{e/=255,t/=255,r/=255;const a=Math.max(e,t,r),n=Math.min(e,t,r),o=(a+n)/2;if(i==="l")return o*100;if(a===n)return 0;const s=a-n,l=o>.5?s/(2-a-n):s/(a+n);if(i==="s")return l*100;switch(a){case e:return((t-r)/s+(t<r?6:0))*60;case t:return((r-e)/s+2)*60;case r:return((e-t)/s+4)*60;default:return-1}}},y0={clamp:(e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},x0={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},xt={channel:Wn,lang:y0,unit:x0},Er={};for(let e=0;e<=255;e++)Er[e]=xt.unit.dec2hex(e);const fe={ALL:0,RGB:1,HSL:2};class b0{constructor(){this.type=fe.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=fe.ALL}is(t){return this.type===t}}class v0{constructor(t,r){this.color=r,this.changed=!1,this.data=t,this.type=new b0}set(t,r){return this.color=r,this.changed=!1,this.data=t,this.type.type=fe.ALL,this}_ensureHSL(){const t=this.data,{h:r,s:i,l:a}=t;r===void 0&&(t.h=xt.channel.rgb2hsl(t,"h")),i===void 0&&(t.s=xt.channel.rgb2hsl(t,"s")),a===void 0&&(t.l=xt.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r,g:i,b:a}=t;r===void 0&&(t.r=xt.channel.hsl2rgb(t,"r")),i===void 0&&(t.g=xt.channel.hsl2rgb(t,"g")),a===void 0&&(t.b=xt.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,r=t.r;return!this.type.is(fe.HSL)&&r!==void 0?r:(this._ensureHSL(),xt.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,r=t.g;return!this.type.is(fe.HSL)&&r!==void 0?r:(this._ensureHSL(),xt.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,r=t.b;return!this.type.is(fe.HSL)&&r!==void 0?r:(this._ensureHSL(),xt.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,r=t.h;return!this.type.is(fe.RGB)&&r!==void 0?r:(this._ensureRGB(),xt.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,r=t.s;return!this.type.is(fe.RGB)&&r!==void 0?r:(this._ensureRGB(),xt.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,r=t.l;return!this.type.is(fe.RGB)&&r!==void 0?r:(this._ensureRGB(),xt.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(fe.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(fe.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(fe.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(fe.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(fe.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(fe.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const Is=new v0({r:0,g:0,b:0,a:0},"transparent"),Ni={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(Ni.re);if(!t)return;const r=t[1],i=parseInt(r,16),a=r.length,n=a%4===0,o=a>4,s=o?1:17,l=o?8:4,c=n?0:-1,h=o?255:15;return Is.set({r:(i>>l*(c+3)&h)*s,g:(i>>l*(c+2)&h)*s,b:(i>>l*(c+1)&h)*s,a:n?(i&h)*s/255:1},e)},stringify:e=>{const{r:t,g:r,b:i,a}=e;return a<1?`#${Er[Math.round(t)]}${Er[Math.round(r)]}${Er[Math.round(i)]}${Er[Math.round(a*255)]}`:`#${Er[Math.round(t)]}${Er[Math.round(r)]}${Er[Math.round(i)]}`}},ii={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(ii.hueRe);if(t){const[,r,i]=t;switch(i){case"grad":return xt.channel.clamp.h(parseFloat(r)*.9);case"rad":return xt.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return xt.channel.clamp.h(parseFloat(r)*360)}}return xt.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const r=e.match(ii.re);if(!r)return;const[,i,a,n,o,s]=r;return Is.set({h:ii._hue2deg(i),s:xt.channel.clamp.s(parseFloat(a)),l:xt.channel.clamp.l(parseFloat(n)),a:o?xt.channel.clamp.a(s?parseFloat(o)/100:parseFloat(o)):1},e)},stringify:e=>{const{h:t,s:r,l:i,a}=e;return a<1?`hsla(${xt.lang.round(t)}, ${xt.lang.round(r)}%, ${xt.lang.round(i)}%, ${a})`:`hsl(${xt.lang.round(t)}, ${xt.lang.round(r)}%, ${xt.lang.round(i)}%)`}},Ha={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=Ha.colors[e];if(t)return Ni.parse(t)},stringify:e=>{const t=Ni.stringify(e);for(const r in Ha.colors)if(Ha.colors[r]===t)return r}},Oa={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const r=e.match(Oa.re);if(!r)return;const[,i,a,n,o,s,l,c,h]=r;return Is.set({r:xt.channel.clamp.r(a?parseFloat(i)*2.55:parseFloat(i)),g:xt.channel.clamp.g(o?parseFloat(n)*2.55:parseFloat(n)),b:xt.channel.clamp.b(l?parseFloat(s)*2.55:parseFloat(s)),a:c?xt.channel.clamp.a(h?parseFloat(c)/100:parseFloat(c)):1},e)},stringify:e=>{const{r:t,g:r,b:i,a}=e;return a<1?`rgba(${xt.lang.round(t)}, ${xt.lang.round(r)}, ${xt.lang.round(i)}, ${xt.lang.round(a)})`:`rgb(${xt.lang.round(t)}, ${xt.lang.round(r)}, ${xt.lang.round(i)})`}},or={format:{keyword:Ha,hex:Ni,rgb:Oa,rgba:Oa,hsl:ii,hsla:ii},parse:e=>{if(typeof e!="string")return e;const t=Ni.parse(e)||Oa.parse(e)||ii.parse(e)||Ha.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(fe.HSL)||e.data.r===void 0?ii.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Oa.stringify(e):Ni.stringify(e)},Au=(e,t)=>{const r=or.parse(e);for(const i in t)r[i]=xt.channel.clamp[i](t[i]);return or.stringify(r)},Va=(e,t,r=0,i=1)=>{if(typeof e!="number")return Au(e,{a:t});const a=Is.set({r:xt.channel.clamp.r(e),g:xt.channel.clamp.g(t),b:xt.channel.clamp.b(r),a:xt.channel.clamp.a(i)});return or.stringify(a)},_0=e=>{const{r:t,g:r,b:i}=or.parse(e),a=.2126*xt.channel.toLinear(t)+.7152*xt.channel.toLinear(r)+.0722*xt.channel.toLinear(i);return xt.lang.round(a)},w0=e=>_0(e)>=.5,cn=e=>!w0(e),Bu=(e,t,r)=>{const i=or.parse(e),a=i[t],n=xt.channel.clamp[t](a+r);return a!==n&&(i[t]=n),or.stringify(i)},tt=(e,t)=>Bu(e,"l",t),pt=(e,t)=>Bu(e,"l",-t),L=(e,t)=>{const r=or.parse(e),i={};for(const a in t)t[a]&&(i[a]=r[a]+t[a]);return Au(e,i)},C0=(e,t,r=50)=>{const{r:i,g:a,b:n,a:o}=or.parse(e),{r:s,g:l,b:c,a:h}=or.parse(t),u=r/100,d=u*2-1,p=o-h,m=((d*p===-1?d:(d+p)/(1+d*p))+1)/2,y=1-m,x=i*m+s*y,b=a*m+l*y,_=n*m+c*y,T=o*u+h*(1-u);return Va(x,b,_,T)},X=(e,t=100)=>{const r=or.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,C0(r,e,t)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Eu,setPrototypeOf:Xc,isFrozen:k0,getPrototypeOf:S0,getOwnPropertyDescriptor:T0}=Object;let{freeze:ke,seal:We,create:$u}=Object,{apply:zo,construct:Wo}=typeof Reflect<"u"&&Reflect;ke||(ke=function(t){return t});We||(We=function(t){return t});zo||(zo=function(t,r,i){return t.apply(r,i)});Wo||(Wo=function(t,r){return new t(...r)});const Bn=Se(Array.prototype.forEach),M0=Se(Array.prototype.lastIndexOf),Zc=Se(Array.prototype.pop),ka=Se(Array.prototype.push),L0=Se(Array.prototype.splice),jn=Se(String.prototype.toLowerCase),vo=Se(String.prototype.toString),Kc=Se(String.prototype.match),Sa=Se(String.prototype.replace),A0=Se(String.prototype.indexOf),B0=Se(String.prototype.trim),Ue=Se(Object.prototype.hasOwnProperty),be=Se(RegExp.prototype.test),Ta=E0(TypeError);function Se(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return zo(e,t,i)}}function E0(e){return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Wo(e,r)}}function kt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jn;Xc&&Xc(e,null);let i=t.length;for(;i--;){let a=t[i];if(typeof a=="string"){const n=r(a);n!==a&&(k0(t)||(t[i]=n),a=n)}e[a]=!0}return e}function $0(e){for(let t=0;t<e.length;t++)Ue(e,t)||(e[t]=null);return e}function yr(e){const t=$u(null);for(const[r,i]of Eu(e))Ue(e,r)&&(Array.isArray(i)?t[r]=$0(i):i&&typeof i=="object"&&i.constructor===Object?t[r]=yr(i):t[r]=i);return t}function Ma(e,t){for(;e!==null;){const i=T0(e,t);if(i){if(i.get)return Se(i.get);if(typeof i.value=="function")return Se(i.value)}e=S0(e)}function r(){return null}return r}const Qc=ke(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_o=ke(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),wo=ke(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),F0=ke(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Co=ke(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),P0=ke(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Jc=ke(["#text"]),th=ke(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ko=ke(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),eh=ke(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),En=ke(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),R0=We(/\{\{[\w\W]*|[\w\W]*\}\}/gm),D0=We(/<%[\w\W]*|[\w\W]*%>/gm),O0=We(/\$\{[\w\W]*/gm),I0=We(/^data-[\-\w.\u00B7-\uFFFF]+$/),N0=We(/^aria-[\-\w]+$/),Fu=We(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),q0=We(/^(?:\w+script|data):/i),z0=We(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Pu=We(/^html$/i),W0=We(/^[a-z][.\w]*(-[.\w]+)+$/i);var rh=Object.freeze({__proto__:null,ARIA_ATTR:N0,ATTR_WHITESPACE:z0,CUSTOM_ELEMENT:W0,DATA_ATTR:I0,DOCTYPE_NAME:Pu,ERB_EXPR:D0,IS_ALLOWED_URI:Fu,IS_SCRIPT_OR_DATA:q0,MUSTACHE_EXPR:R0,TMPLIT_EXPR:O0});const La={element:1,text:3,progressingInstruction:7,comment:8,document:9},j0=function(){return typeof window>"u"?null:window},H0=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let i=null;const a="data-tt-policy-suffix";r&&r.hasAttribute(a)&&(i=r.getAttribute(a));const n="dompurify"+(i?"#"+i:"");try{return t.createPolicy(n,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+n+" could not be created."),null}},ih=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ru(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j0();const t=nt=>Ru(nt);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==La.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const i=r,a=i.currentScript,{DocumentFragment:n,HTMLTemplateElement:o,Node:s,Element:l,NodeFilter:c,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:u,DOMParser:d,trustedTypes:p}=e,g=l.prototype,m=Ma(g,"cloneNode"),y=Ma(g,"remove"),x=Ma(g,"nextSibling"),b=Ma(g,"childNodes"),_=Ma(g,"parentNode");if(typeof o=="function"){const nt=r.createElement("template");nt.content&&nt.content.ownerDocument&&(r=nt.content.ownerDocument)}let T,S="";const{implementation:v,createNodeIterator:M,createDocumentFragment:N,getElementsByTagName:V}=r,{importNode:q}=i;let F=ih();t.isSupported=typeof Eu=="function"&&typeof _=="function"&&v&&v.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Y,ERB_EXPR:z,TMPLIT_EXPR:B,DATA_ATTR:E,ARIA_ATTR:A,IS_SCRIPT_OR_DATA:R,ATTR_WHITESPACE:$,CUSTOM_ELEMENT:K}=rh;let{IS_ALLOWED_URI:et}=rh,at=null;const St=kt({},[...Qc,..._o,...wo,...Co,...Jc]);let vt=null;const Nt=kt({},[...th,...ko,...eh,...En]);let _t=Object.seal($u(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),yt=null,wt=null,qt=!0,Rt=!0,It=!1,Zt=!0,ce=!1,Te=!0,ye=!1,zr=!1,pa=!1,Ar=!1,Wr=!1,wi=!1,Ci=!0,da=!1;const vn="user-content-";let fa=!0,jr=!1,Br={},ur=null;const ga=kt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ki=null;const ma=kt({},["audio","video","img","source","image","track"]);let ya=null;const _n=kt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Si="http://www.w3.org/1998/Math/MathML",Hr="http://www.w3.org/2000/svg",He="http://www.w3.org/1999/xhtml";let pr=He,xa=!1,Ti=null;const uo=kt({},[Si,Hr,He],vo);let Vr=kt({},["mi","mo","mn","ms","mtext"]),Mi=kt({},["annotation-xml"]);const po=kt({},["title","style","font","a","script"]);let Ur=null;const fo=["application/xhtml+xml","text/html"],go="text/html";let C=null,P=null;const H=r.createElement("form"),G=function(k){return k instanceof RegExp||k instanceof Function},Z=function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(P&&P===k)){if((!k||typeof k!="object")&&(k={}),k=yr(k),Ur=fo.indexOf(k.PARSER_MEDIA_TYPE)===-1?go:k.PARSER_MEDIA_TYPE,C=Ur==="application/xhtml+xml"?vo:jn,at=Ue(k,"ALLOWED_TAGS")?kt({},k.ALLOWED_TAGS,C):St,vt=Ue(k,"ALLOWED_ATTR")?kt({},k.ALLOWED_ATTR,C):Nt,Ti=Ue(k,"ALLOWED_NAMESPACES")?kt({},k.ALLOWED_NAMESPACES,vo):uo,ya=Ue(k,"ADD_URI_SAFE_ATTR")?kt(yr(_n),k.ADD_URI_SAFE_ATTR,C):_n,ki=Ue(k,"ADD_DATA_URI_TAGS")?kt(yr(ma),k.ADD_DATA_URI_TAGS,C):ma,ur=Ue(k,"FORBID_CONTENTS")?kt({},k.FORBID_CONTENTS,C):ga,yt=Ue(k,"FORBID_TAGS")?kt({},k.FORBID_TAGS,C):yr({}),wt=Ue(k,"FORBID_ATTR")?kt({},k.FORBID_ATTR,C):yr({}),Br=Ue(k,"USE_PROFILES")?k.USE_PROFILES:!1,qt=k.ALLOW_ARIA_ATTR!==!1,Rt=k.ALLOW_DATA_ATTR!==!1,It=k.ALLOW_UNKNOWN_PROTOCOLS||!1,Zt=k.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ce=k.SAFE_FOR_TEMPLATES||!1,Te=k.SAFE_FOR_XML!==!1,ye=k.WHOLE_DOCUMENT||!1,Ar=k.RETURN_DOM||!1,Wr=k.RETURN_DOM_FRAGMENT||!1,wi=k.RETURN_TRUSTED_TYPE||!1,pa=k.FORCE_BODY||!1,Ci=k.SANITIZE_DOM!==!1,da=k.SANITIZE_NAMED_PROPS||!1,fa=k.KEEP_CONTENT!==!1,jr=k.IN_PLACE||!1,et=k.ALLOWED_URI_REGEXP||Fu,pr=k.NAMESPACE||He,Vr=k.MATHML_TEXT_INTEGRATION_POINTS||Vr,Mi=k.HTML_INTEGRATION_POINTS||Mi,_t=k.CUSTOM_ELEMENT_HANDLING||{},k.CUSTOM_ELEMENT_HANDLING&&G(k.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(_t.tagNameCheck=k.CUSTOM_ELEMENT_HANDLING.tagNameCheck),k.CUSTOM_ELEMENT_HANDLING&&G(k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(_t.attributeNameCheck=k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),k.CUSTOM_ELEMENT_HANDLING&&typeof k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(_t.allowCustomizedBuiltInElements=k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ce&&(Rt=!1),Wr&&(Ar=!0),Br&&(at=kt({},Jc),vt=[],Br.html===!0&&(kt(at,Qc),kt(vt,th)),Br.svg===!0&&(kt(at,_o),kt(vt,ko),kt(vt,En)),Br.svgFilters===!0&&(kt(at,wo),kt(vt,ko),kt(vt,En)),Br.mathMl===!0&&(kt(at,Co),kt(vt,eh),kt(vt,En))),k.ADD_TAGS&&(at===St&&(at=yr(at)),kt(at,k.ADD_TAGS,C)),k.ADD_ATTR&&(vt===Nt&&(vt=yr(vt)),kt(vt,k.ADD_ATTR,C)),k.ADD_URI_SAFE_ATTR&&kt(ya,k.ADD_URI_SAFE_ATTR,C),k.FORBID_CONTENTS&&(ur===ga&&(ur=yr(ur)),kt(ur,k.FORBID_CONTENTS,C)),fa&&(at["#text"]=!0),ye&&kt(at,["html","head","body"]),at.table&&(kt(at,["tbody"]),delete yt.tbody),k.TRUSTED_TYPES_POLICY){if(typeof k.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ta('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof k.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ta('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=k.TRUSTED_TYPES_POLICY,S=T.createHTML("")}else T===void 0&&(T=H0(p,a)),T!==null&&typeof S=="string"&&(S=T.createHTML(""));ke&&ke(k),P=k}},dt=kt({},[..._o,...wo,...F0]),ht=kt({},[...Co,...P0]),ft=function(k){let j=_(k);(!j||!j.tagName)&&(j={namespaceURI:pr,tagName:"template"});const Q=jn(k.tagName),$t=jn(j.tagName);return Ti[k.namespaceURI]?k.namespaceURI===Hr?j.namespaceURI===He?Q==="svg":j.namespaceURI===Si?Q==="svg"&&($t==="annotation-xml"||Vr[$t]):!!dt[Q]:k.namespaceURI===Si?j.namespaceURI===He?Q==="math":j.namespaceURI===Hr?Q==="math"&&Mi[$t]:!!ht[Q]:k.namespaceURI===He?j.namespaceURI===Hr&&!Mi[$t]||j.namespaceURI===Si&&!Vr[$t]?!1:!ht[Q]&&(po[Q]||!dt[Q]):!!(Ur==="application/xhtml+xml"&&Ti[k.namespaceURI]):!1},D=function(k){ka(t.removed,{element:k});try{_(k).removeChild(k)}catch{y(k)}},Ct=function(k,j){try{ka(t.removed,{attribute:j.getAttributeNode(k),from:j})}catch{ka(t.removed,{attribute:null,from:j})}if(j.removeAttribute(k),k==="is")if(Ar||Wr)try{D(j)}catch{}else try{j.setAttribute(k,"")}catch{}},Bt=function(k){let j=null,Q=null;if(pa)k="<remove></remove>"+k;else{const Wt=Kc(k,/^[\r\n\t ]+/);Q=Wt&&Wt[0]}Ur==="application/xhtml+xml"&&pr===He&&(k='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+k+"</body></html>");const $t=T?T.createHTML(k):k;if(pr===He)try{j=new d().parseFromString($t,Ur)}catch{}if(!j||!j.documentElement){j=v.createDocument(pr,"template",null);try{j.documentElement.innerHTML=xa?S:$t}catch{}}const Ut=j.body||j.documentElement;return k&&Q&&Ut.insertBefore(r.createTextNode(Q),Ut.childNodes[0]||null),pr===He?V.call(j,ye?"html":"body")[0]:ye?j.documentElement:Ut},Ht=function(k){return M.call(k.ownerDocument||k,k,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Qt=function(k){return k instanceof u&&(typeof k.nodeName!="string"||typeof k.textContent!="string"||typeof k.removeChild!="function"||!(k.attributes instanceof h)||typeof k.removeAttribute!="function"||typeof k.setAttribute!="function"||typeof k.namespaceURI!="string"||typeof k.insertBefore!="function"||typeof k.hasChildNodes!="function")},ee=function(k){return typeof s=="function"&&k instanceof s};function Vt(nt,k,j){Bn(nt,Q=>{Q.call(t,k,j,P)})}const Fe=function(k){let j=null;if(Vt(F.beforeSanitizeElements,k,null),Qt(k))return D(k),!0;const Q=C(k.nodeName);if(Vt(F.uponSanitizeElement,k,{tagName:Q,allowedTags:at}),Te&&k.hasChildNodes()&&!ee(k.firstElementChild)&&be(/<[/\w!]/g,k.innerHTML)&&be(/<[/\w!]/g,k.textContent)||k.nodeType===La.progressingInstruction||Te&&k.nodeType===La.comment&&be(/<[/\w]/g,k.data))return D(k),!0;if(!at[Q]||yt[Q]){if(!yt[Q]&&Ke(Q)&&(_t.tagNameCheck instanceof RegExp&&be(_t.tagNameCheck,Q)||_t.tagNameCheck instanceof Function&&_t.tagNameCheck(Q)))return!1;if(fa&&!ur[Q]){const $t=_(k)||k.parentNode,Ut=b(k)||k.childNodes;if(Ut&&$t){const Wt=Ut.length;for(let ae=Wt-1;ae>=0;--ae){const de=m(Ut[ae],!0);de.__removalCount=(k.__removalCount||0)+1,$t.insertBefore(de,x(k))}}}return D(k),!0}return k instanceof l&&!ft(k)||(Q==="noscript"||Q==="noembed"||Q==="noframes")&&be(/<\/no(script|embed|frames)/i,k.innerHTML)?(D(k),!0):(ce&&k.nodeType===La.text&&(j=k.textContent,Bn([Y,z,B],$t=>{j=Sa(j,$t," ")}),k.textContent!==j&&(ka(t.removed,{element:k.cloneNode()}),k.textContent=j)),Vt(F.afterSanitizeElements,k,null),!1)},Pe=function(k,j,Q){if(Ci&&(j==="id"||j==="name")&&(Q in r||Q in H))return!1;if(!(Rt&&!wt[j]&&be(E,j))){if(!(qt&&be(A,j))){if(!vt[j]||wt[j]){if(!(Ke(k)&&(_t.tagNameCheck instanceof RegExp&&be(_t.tagNameCheck,k)||_t.tagNameCheck instanceof Function&&_t.tagNameCheck(k))&&(_t.attributeNameCheck instanceof RegExp&&be(_t.attributeNameCheck,j)||_t.attributeNameCheck instanceof Function&&_t.attributeNameCheck(j))||j==="is"&&_t.allowCustomizedBuiltInElements&&(_t.tagNameCheck instanceof RegExp&&be(_t.tagNameCheck,Q)||_t.tagNameCheck instanceof Function&&_t.tagNameCheck(Q))))return!1}else if(!ya[j]){if(!be(et,Sa(Q,$,""))){if(!((j==="src"||j==="xlink:href"||j==="href")&&k!=="script"&&A0(Q,"data:")===0&&ki[k])){if(!(It&&!be(R,Sa(Q,$,"")))){if(Q)return!1}}}}}}return!0},Ke=function(k){return k!=="annotation-xml"&&Kc(k,K)},Ve=function(k){Vt(F.beforeSanitizeAttributes,k,null);const{attributes:j}=k;if(!j||Qt(k))return;const Q={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:vt,forceKeepAttr:void 0};let $t=j.length;for(;$t--;){const Ut=j[$t],{name:Wt,namespaceURI:ae,value:de}=Ut,Je=C(Wt),dr=de;let Kt=Wt==="value"?dr:B0(dr);if(Q.attrName=Je,Q.attrValue=Kt,Q.keepAttr=!0,Q.forceKeepAttr=void 0,Vt(F.uponSanitizeAttribute,k,Q),Kt=Q.attrValue,da&&(Je==="id"||Je==="name")&&(Ct(Wt,k),Kt=vn+Kt),Te&&be(/((--!?|])>)|<\/(style|title)/i,Kt)){Ct(Wt,k);continue}if(Q.forceKeepAttr)continue;if(!Q.keepAttr){Ct(Wt,k);continue}if(!Zt&&be(/\/>/i,Kt)){Ct(Wt,k);continue}ce&&Bn([Y,z,B],fr=>{Kt=Sa(Kt,fr," ")});const Li=C(k.nodeName);if(!Pe(Li,Je,Kt)){Ct(Wt,k);continue}if(T&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!ae)switch(p.getAttributeType(Li,Je)){case"TrustedHTML":{Kt=T.createHTML(Kt);break}case"TrustedScriptURL":{Kt=T.createScriptURL(Kt);break}}if(Kt!==dr)try{ae?k.setAttributeNS(ae,Wt,Kt):k.setAttribute(Wt,Kt),Qt(k)?D(k):Zc(t.removed)}catch{Ct(Wt,k)}}Vt(F.afterSanitizeAttributes,k,null)},Qe=function nt(k){let j=null;const Q=Ht(k);for(Vt(F.beforeSanitizeShadowDOM,k,null);j=Q.nextNode();)Vt(F.uponSanitizeShadowNode,j,null),Fe(j),Ve(j),j.content instanceof n&&nt(j.content);Vt(F.afterSanitizeShadowDOM,k,null)};return t.sanitize=function(nt){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=null,Q=null,$t=null,Ut=null;if(xa=!nt,xa&&(nt="<!-->"),typeof nt!="string"&&!ee(nt))if(typeof nt.toString=="function"){if(nt=nt.toString(),typeof nt!="string")throw Ta("dirty is not a string, aborting")}else throw Ta("toString is not a function");if(!t.isSupported)return nt;if(zr||Z(k),t.removed=[],typeof nt=="string"&&(jr=!1),jr){if(nt.nodeName){const de=C(nt.nodeName);if(!at[de]||yt[de])throw Ta("root node is forbidden and cannot be sanitized in-place")}}else if(nt instanceof s)j=Bt("<!---->"),Q=j.ownerDocument.importNode(nt,!0),Q.nodeType===La.element&&Q.nodeName==="BODY"||Q.nodeName==="HTML"?j=Q:j.appendChild(Q);else{if(!Ar&&!ce&&!ye&&nt.indexOf("<")===-1)return T&&wi?T.createHTML(nt):nt;if(j=Bt(nt),!j)return Ar?null:wi?S:""}j&&pa&&D(j.firstChild);const Wt=Ht(jr?nt:j);for(;$t=Wt.nextNode();)Fe($t),Ve($t),$t.content instanceof n&&Qe($t.content);if(jr)return nt;if(Ar){if(Wr)for(Ut=N.call(j.ownerDocument);j.firstChild;)Ut.appendChild(j.firstChild);else Ut=j;return(vt.shadowroot||vt.shadowrootmode)&&(Ut=q.call(i,Ut,!0)),Ut}let ae=ye?j.outerHTML:j.innerHTML;return ye&&at["!doctype"]&&j.ownerDocument&&j.ownerDocument.doctype&&j.ownerDocument.doctype.name&&be(Pu,j.ownerDocument.doctype.name)&&(ae="<!DOCTYPE "+j.ownerDocument.doctype.name+`>
`+ae),ce&&Bn([Y,z,B],de=>{ae=Sa(ae,de," ")}),T&&wi?T.createHTML(ae):ae},t.setConfig=function(){let nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Z(nt),zr=!0},t.clearConfig=function(){P=null,zr=!1},t.isValidAttribute=function(nt,k,j){P||Z({});const Q=C(nt),$t=C(k);return Pe(Q,$t,j)},t.addHook=function(nt,k){typeof k=="function"&&ka(F[nt],k)},t.removeHook=function(nt,k){if(k!==void 0){const j=M0(F[nt],k);return j===-1?void 0:L0(F[nt],j,1)[0]}return Zc(F[nt])},t.removeHooks=function(nt){F[nt]=[]},t.removeAllHooks=function(){F=ih()},t}var Zi=Ru(),Du=Object.defineProperty,f=(e,t)=>Du(e,"name",{value:t,configurable:!0}),V0=(e,t)=>{for(var r in t)Du(e,r,{get:t[r],enumerable:!0})},gr={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},I={trace:f((...e)=>{},"trace"),debug:f((...e)=>{},"debug"),info:f((...e)=>{},"info"),warn:f((...e)=>{},"warn"),error:f((...e)=>{},"error"),fatal:f((...e)=>{},"fatal")},Il=f(function(e="fatal"){let t=gr.fatal;typeof e=="string"?e.toLowerCase()in gr&&(t=gr[e]):typeof e=="number"&&(t=e),I.trace=()=>{},I.debug=()=>{},I.info=()=>{},I.warn=()=>{},I.error=()=>{},I.fatal=()=>{},t<=gr.fatal&&(I.fatal=console.error?console.error.bind(console,qe("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",qe("FATAL"))),t<=gr.error&&(I.error=console.error?console.error.bind(console,qe("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",qe("ERROR"))),t<=gr.warn&&(I.warn=console.warn?console.warn.bind(console,qe("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",qe("WARN"))),t<=gr.info&&(I.info=console.info?console.info.bind(console,qe("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",qe("INFO"))),t<=gr.debug&&(I.debug=console.debug?console.debug.bind(console,qe("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",qe("DEBUG"))),t<=gr.trace&&(I.trace=console.debug?console.debug.bind(console,qe("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",qe("TRACE")))},"setLogLevel"),qe=f(e=>`%c${m0().format("ss.SSS")} : ${e} : `,"format"),Ou=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Ua=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,U0=/\s*%%.*\n/gm,Wi,Iu=(Wi=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},f(Wi,"UnknownDiagramError"),Wi),hi={},Nl=f(function(e,t){e=e.replace(Ou,"").replace(Ua,"").replace(U0,`
`);for(const[r,{detector:i}]of Object.entries(hi))if(i(e,t))return r;throw new Iu(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),jo=f((...e)=>{for(const{id:t,detector:r,loader:i}of e)Nu(t,r,i)},"registerLazyLoadedDiagrams"),Nu=f((e,t,r)=>{hi[e]&&I.warn(`Detector with key ${e} already exists. Overwriting.`),hi[e]={detector:t,loader:r},I.debug(`Detector with key ${e} added${r?" with loader":""}`)},"addDetector"),Y0=f(e=>hi[e].loader,"getDiagramLoader"),Ho=f((e,t,{depth:r=2,clobber:i=!1}={})=>{const a={depth:r,clobber:i};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(n=>Ho(e,n,a)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(n=>{e.includes(n)||e.push(n)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(n=>{typeof t[n]=="object"&&(e[n]===void 0||typeof e[n]=="object")?(e[n]===void 0&&(e[n]=Array.isArray(t[n])?[]:{}),e[n]=Ho(e[n],t[n],{depth:r-1,clobber:i})):(i||typeof e[n]!="object"&&typeof t[n]!="object")&&(e[n]=t[n])}),e)},"assignWithDepth"),pe=Ho,Ns="#ffffff",qs="#f2f2f2",ve=f((e,t)=>t?L(e,{s:-40,l:10}):L(e,{s:-40,l:-10}),"mkBorder"),ji,G0=(ji=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var r,i,a,n,o,s,l,c,h,u,d,p,g,m,y,x,b,_,T,S,v;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||L(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||L(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||ve(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||ve(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||ve(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||ve(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||X(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||X(this.tertiaryColor),this.lineColor=this.lineColor||X(this.background),this.arrowheadColor=this.arrowheadColor||X(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?pt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||pt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||X(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||tt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||pt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||pt(this.mainBkg,10)):(this.rowOdd=this.rowOdd||tt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||tt(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||L(this.primaryColor,{h:30}),this.cScale4=this.cScale4||L(this.primaryColor,{h:60}),this.cScale5=this.cScale5||L(this.primaryColor,{h:90}),this.cScale6=this.cScale6||L(this.primaryColor,{h:120}),this.cScale7=this.cScale7||L(this.primaryColor,{h:150}),this.cScale8=this.cScale8||L(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||L(this.primaryColor,{h:270}),this.cScale10=this.cScale10||L(this.primaryColor,{h:300}),this.cScale11=this.cScale11||L(this.primaryColor,{h:330}),this.darkMode)for(let M=0;M<this.THEME_COLOR_LIMIT;M++)this["cScale"+M]=pt(this["cScale"+M],75);else for(let M=0;M<this.THEME_COLOR_LIMIT;M++)this["cScale"+M]=pt(this["cScale"+M],25);for(let M=0;M<this.THEME_COLOR_LIMIT;M++)this["cScaleInv"+M]=this["cScaleInv"+M]||X(this["cScale"+M]);for(let M=0;M<this.THEME_COLOR_LIMIT;M++)this.darkMode?this["cScalePeer"+M]=this["cScalePeer"+M]||tt(this["cScale"+M],10):this["cScalePeer"+M]=this["cScalePeer"+M]||pt(this["cScale"+M],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let M=0;M<this.THEME_COLOR_LIMIT;M++)this["cScaleLabel"+M]=this["cScaleLabel"+M]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let M=0;M<5;M++)this["surface"+M]=this["surface"+M]||L(this.mainBkg,{h:180,s:-15,l:t*(5+M*3)}),this["surfacePeer"+M]=this["surfacePeer"+M]||L(this.mainBkg,{h:180,s:-15,l:t*(8+M*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||L(this.primaryColor,{h:64}),this.fillType3=this.fillType3||L(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||L(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||L(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||L(this.primaryColor,{h:128}),this.fillType7=this.fillType7||L(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||L(this.primaryColor,{l:-10}),this.pie5=this.pie5||L(this.secondaryColor,{l:-10}),this.pie6=this.pie6||L(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||L(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||L(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||L(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||L(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||L(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||L(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:((r=this.radar)==null?void 0:r.axisColor)||this.lineColor,axisStrokeWidth:((i=this.radar)==null?void 0:i.axisStrokeWidth)||2,axisLabelFontSize:((a=this.radar)==null?void 0:a.axisLabelFontSize)||12,curveOpacity:((n=this.radar)==null?void 0:n.curveOpacity)||.5,curveStrokeWidth:((o=this.radar)==null?void 0:o.curveStrokeWidth)||2,graticuleColor:((s=this.radar)==null?void 0:s.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((l=this.radar)==null?void 0:l.graticuleStrokeWidth)||1,graticuleOpacity:((c=this.radar)==null?void 0:c.graticuleOpacity)||.3,legendBoxSize:((h=this.radar)==null?void 0:h.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||L(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||L(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||L(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||L(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||L(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||L(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||cn(this.quadrant1Fill)?tt(this.quadrant1Fill):pt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((d=this.xyChart)==null?void 0:d.backgroundColor)||this.background,titleColor:((p=this.xyChart)==null?void 0:p.titleColor)||this.primaryTextColor,xAxisTitleColor:((g=this.xyChart)==null?void 0:g.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((m=this.xyChart)==null?void 0:m.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((y=this.xyChart)==null?void 0:y.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((x=this.xyChart)==null?void 0:x.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((_=this.xyChart)==null?void 0:_.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((T=this.xyChart)==null?void 0:T.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((S=this.xyChart)==null?void 0:S.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((v=this.xyChart)==null?void 0:v.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?pt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||L(this.primaryColor,{h:-30}),this.git4=this.git4||L(this.primaryColor,{h:-60}),this.git5=this.git5||L(this.primaryColor,{h:-90}),this.git6=this.git6||L(this.primaryColor,{h:60}),this.git7=this.git7||L(this.primaryColor,{h:120}),this.darkMode?(this.git0=tt(this.git0,25),this.git1=tt(this.git1,25),this.git2=tt(this.git2,25),this.git3=tt(this.git3,25),this.git4=tt(this.git4,25),this.git5=tt(this.git5,25),this.git6=tt(this.git6,25),this.git7=tt(this.git7,25)):(this.git0=pt(this.git0,25),this.git1=pt(this.git1,25),this.git2=pt(this.git2,25),this.git3=pt(this.git3,25),this.git4=pt(this.git4,25),this.git5=pt(this.git5,25),this.git6=pt(this.git6,25),this.git7=pt(this.git7,25)),this.gitInv0=this.gitInv0||X(this.git0),this.gitInv1=this.gitInv1||X(this.git1),this.gitInv2=this.gitInv2||X(this.git2),this.gitInv3=this.gitInv3||X(this.git3),this.gitInv4=this.gitInv4||X(this.git4),this.gitInv5=this.gitInv5||X(this.git5),this.gitInv6=this.gitInv6||X(this.git6),this.gitInv7=this.gitInv7||X(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ns,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||qs}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},f(ji,"Theme"),ji),X0=f(e=>{const t=new G0;return t.calculate(e),t},"getThemeVariables"),Hi,Z0=(Hi=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=tt(this.primaryColor,16),this.tertiaryColor=L(this.primaryColor,{h:-160}),this.primaryBorderColor=X(this.background),this.secondaryBorderColor=ve(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ve(this.tertiaryColor,this.darkMode),this.primaryTextColor=X(this.primaryColor),this.secondaryTextColor=X(this.secondaryColor),this.tertiaryTextColor=X(this.tertiaryColor),this.lineColor=X(this.background),this.textColor=X(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=tt(X("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=Va(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=pt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=pt(this.sectionBkgColor,10),this.taskBorderColor=Va(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Va(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||tt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||pt(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,r,i,a,n,o,s,l,c,h,u,d,p,g,m,y,x,b,_,T,S;this.secondBkg=tt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=tt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=tt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=L(this.primaryColor,{h:64}),this.fillType3=L(this.secondaryColor,{h:64}),this.fillType4=L(this.primaryColor,{h:-64}),this.fillType5=L(this.secondaryColor,{h:-64}),this.fillType6=L(this.primaryColor,{h:128}),this.fillType7=L(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||L(this.primaryColor,{h:30}),this.cScale4=this.cScale4||L(this.primaryColor,{h:60}),this.cScale5=this.cScale5||L(this.primaryColor,{h:90}),this.cScale6=this.cScale6||L(this.primaryColor,{h:120}),this.cScale7=this.cScale7||L(this.primaryColor,{h:150}),this.cScale8=this.cScale8||L(this.primaryColor,{h:210}),this.cScale9=this.cScale9||L(this.primaryColor,{h:270}),this.cScale10=this.cScale10||L(this.primaryColor,{h:300}),this.cScale11=this.cScale11||L(this.primaryColor,{h:330});for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleInv"+v]=this["cScaleInv"+v]||X(this["cScale"+v]);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScalePeer"+v]=this["cScalePeer"+v]||tt(this["cScale"+v],10);for(let v=0;v<5;v++)this["surface"+v]=this["surface"+v]||L(this.mainBkg,{h:30,s:-30,l:-(-10+v*4)}),this["surfacePeer"+v]=this["surfacePeer"+v]||L(this.mainBkg,{h:30,s:-30,l:-(-7+v*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleLabel"+v]=this["cScaleLabel"+v]||this.scaleLabelColor;for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["pie"+v]=this["cScale"+v];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||L(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||L(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||L(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||L(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||L(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||L(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||cn(this.quadrant1Fill)?tt(this.quadrant1Fill):pt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((a=this.xyChart)==null?void 0:a.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((s=this.xyChart)==null?void 0:s.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:((d=this.radar)==null?void 0:d.axisColor)||this.lineColor,axisStrokeWidth:((p=this.radar)==null?void 0:p.axisStrokeWidth)||2,axisLabelFontSize:((g=this.radar)==null?void 0:g.axisLabelFontSize)||12,curveOpacity:((m=this.radar)==null?void 0:m.curveOpacity)||.5,curveStrokeWidth:((y=this.radar)==null?void 0:y.curveStrokeWidth)||2,graticuleColor:((x=this.radar)==null?void 0:x.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((_=this.radar)==null?void 0:_.graticuleOpacity)||.3,legendBoxSize:((T=this.radar)==null?void 0:T.legendBoxSize)||12,legendFontSize:((S=this.radar)==null?void 0:S.legendFontSize)||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?pt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=tt(this.secondaryColor,20),this.git1=tt(this.pie2||this.secondaryColor,20),this.git2=tt(this.pie3||this.tertiaryColor,20),this.git3=tt(this.pie4||L(this.primaryColor,{h:-30}),20),this.git4=tt(this.pie5||L(this.primaryColor,{h:-60}),20),this.git5=tt(this.pie6||L(this.primaryColor,{h:-90}),10),this.git6=tt(this.pie7||L(this.primaryColor,{h:60}),10),this.git7=tt(this.pie8||L(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||X(this.git0),this.gitInv1=this.gitInv1||X(this.git1),this.gitInv2=this.gitInv2||X(this.git2),this.gitInv3=this.gitInv3||X(this.git3),this.gitInv4=this.gitInv4||X(this.git4),this.gitInv5=this.gitInv5||X(this.git5),this.gitInv6=this.gitInv6||X(this.git6),this.gitInv7=this.gitInv7||X(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||X(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||X(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||tt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||tt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},f(Hi,"Theme"),Hi),K0=f(e=>{const t=new Z0;return t.calculate(e),t},"getThemeVariables"),Vi,Q0=(Vi=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=L(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=L(this.primaryColor,{h:-160}),this.primaryBorderColor=ve(this.primaryColor,this.darkMode),this.secondaryBorderColor=ve(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ve(this.tertiaryColor,this.darkMode),this.primaryTextColor=X(this.primaryColor),this.secondaryTextColor=X(this.secondaryColor),this.tertiaryTextColor=X(this.tertiaryColor),this.lineColor=X(this.background),this.textColor=X(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=Va(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,r,i,a,n,o,s,l,c,h,u,d,p,g,m,y,x,b,_,T,S;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||L(this.primaryColor,{h:30}),this.cScale4=this.cScale4||L(this.primaryColor,{h:60}),this.cScale5=this.cScale5||L(this.primaryColor,{h:90}),this.cScale6=this.cScale6||L(this.primaryColor,{h:120}),this.cScale7=this.cScale7||L(this.primaryColor,{h:150}),this.cScale8=this.cScale8||L(this.primaryColor,{h:210}),this.cScale9=this.cScale9||L(this.primaryColor,{h:270}),this.cScale10=this.cScale10||L(this.primaryColor,{h:300}),this.cScale11=this.cScale11||L(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||pt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||pt(this.tertiaryColor,40);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScale"+v]=pt(this["cScale"+v],10),this["cScalePeer"+v]=this["cScalePeer"+v]||pt(this["cScale"+v],25);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleInv"+v]=this["cScaleInv"+v]||L(this["cScale"+v],{h:180});for(let v=0;v<5;v++)this["surface"+v]=this["surface"+v]||L(this.mainBkg,{h:30,l:-(5+v*5)}),this["surfacePeer"+v]=this["surfacePeer"+v]||L(this.mainBkg,{h:30,l:-(7+v*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||X(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||X(this.labelTextColor);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleLabel"+v]=this["cScaleLabel"+v]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=tt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||tt(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||tt(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=L(this.primaryColor,{h:64}),this.fillType3=L(this.secondaryColor,{h:64}),this.fillType4=L(this.primaryColor,{h:-64}),this.fillType5=L(this.secondaryColor,{h:-64}),this.fillType6=L(this.primaryColor,{h:128}),this.fillType7=L(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||L(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||L(this.primaryColor,{l:-10}),this.pie5=this.pie5||L(this.secondaryColor,{l:-30}),this.pie6=this.pie6||L(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||L(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||L(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||L(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||L(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||L(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||L(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||L(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||L(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||L(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||L(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||L(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||L(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||cn(this.quadrant1Fill)?tt(this.quadrant1Fill):pt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((a=this.radar)==null?void 0:a.curveOpacity)||.5,curveStrokeWidth:((n=this.radar)==null?void 0:n.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((s=this.radar)==null?void 0:s.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((u=this.xyChart)==null?void 0:u.backgroundColor)||this.background,titleColor:((d=this.xyChart)==null?void 0:d.titleColor)||this.primaryTextColor,xAxisTitleColor:((p=this.xyChart)==null?void 0:p.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((g=this.xyChart)==null?void 0:g.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((y=this.xyChart)==null?void 0:y.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((x=this.xyChart)==null?void 0:x.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((_=this.xyChart)==null?void 0:_.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((T=this.xyChart)==null?void 0:T.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((S=this.xyChart)==null?void 0:S.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||L(this.primaryColor,{h:-30}),this.git4=this.git4||L(this.primaryColor,{h:-60}),this.git5=this.git5||L(this.primaryColor,{h:-90}),this.git6=this.git6||L(this.primaryColor,{h:60}),this.git7=this.git7||L(this.primaryColor,{h:120}),this.darkMode?(this.git0=tt(this.git0,25),this.git1=tt(this.git1,25),this.git2=tt(this.git2,25),this.git3=tt(this.git3,25),this.git4=tt(this.git4,25),this.git5=tt(this.git5,25),this.git6=tt(this.git6,25),this.git7=tt(this.git7,25)):(this.git0=pt(this.git0,25),this.git1=pt(this.git1,25),this.git2=pt(this.git2,25),this.git3=pt(this.git3,25),this.git4=pt(this.git4,25),this.git5=pt(this.git5,25),this.git6=pt(this.git6,25),this.git7=pt(this.git7,25)),this.gitInv0=this.gitInv0||pt(X(this.git0),25),this.gitInv1=this.gitInv1||X(this.git1),this.gitInv2=this.gitInv2||X(this.git2),this.gitInv3=this.gitInv3||X(this.git3),this.gitInv4=this.gitInv4||X(this.git4),this.gitInv5=this.gitInv5||X(this.git5),this.gitInv6=this.gitInv6||X(this.git6),this.gitInv7=this.gitInv7||X(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||X(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||X(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ns,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||qs}calculate(t){if(Object.keys(this).forEach(i=>{this[i]==="calculated"&&(this[i]=void 0)}),typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},f(Vi,"Theme"),Vi),J0=f(e=>{const t=new Q0;return t.calculate(e),t},"getThemeVariables"),Ui,tx=(Ui=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=tt("#cde498",10),this.primaryBorderColor=ve(this.primaryColor,this.darkMode),this.secondaryBorderColor=ve(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ve(this.tertiaryColor,this.darkMode),this.primaryTextColor=X(this.primaryColor),this.secondaryTextColor=X(this.secondaryColor),this.tertiaryTextColor=X(this.primaryColor),this.lineColor=X(this.background),this.textColor=X(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,i,a,n,o,s,l,c,h,u,d,p,g,m,y,x,b,_,T,S;this.actorBorder=pt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||L(this.primaryColor,{h:30}),this.cScale4=this.cScale4||L(this.primaryColor,{h:60}),this.cScale5=this.cScale5||L(this.primaryColor,{h:90}),this.cScale6=this.cScale6||L(this.primaryColor,{h:120}),this.cScale7=this.cScale7||L(this.primaryColor,{h:150}),this.cScale8=this.cScale8||L(this.primaryColor,{h:210}),this.cScale9=this.cScale9||L(this.primaryColor,{h:270}),this.cScale10=this.cScale10||L(this.primaryColor,{h:300}),this.cScale11=this.cScale11||L(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||pt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||pt(this.tertiaryColor,40);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScale"+v]=pt(this["cScale"+v],10),this["cScalePeer"+v]=this["cScalePeer"+v]||pt(this["cScale"+v],25);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleInv"+v]=this["cScaleInv"+v]||L(this["cScale"+v],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleLabel"+v]=this["cScaleLabel"+v]||this.scaleLabelColor;for(let v=0;v<5;v++)this["surface"+v]=this["surface"+v]||L(this.mainBkg,{h:30,s:-30,l:-(5+v*5)}),this["surfacePeer"+v]=this["surfacePeer"+v]||L(this.mainBkg,{h:30,s:-30,l:-(8+v*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||tt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||tt(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=L(this.primaryColor,{h:64}),this.fillType3=L(this.secondaryColor,{h:64}),this.fillType4=L(this.primaryColor,{h:-64}),this.fillType5=L(this.secondaryColor,{h:-64}),this.fillType6=L(this.primaryColor,{h:128}),this.fillType7=L(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||L(this.primaryColor,{l:-30}),this.pie5=this.pie5||L(this.secondaryColor,{l:-30}),this.pie6=this.pie6||L(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||L(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||L(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||L(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||L(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||L(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||L(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||L(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||L(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||L(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||L(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||L(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||L(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||cn(this.quadrant1Fill)?tt(this.quadrant1Fill):pt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((a=this.radar)==null?void 0:a.curveOpacity)||.5,curveStrokeWidth:((n=this.radar)==null?void 0:n.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((s=this.radar)==null?void 0:s.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((u=this.xyChart)==null?void 0:u.backgroundColor)||this.background,titleColor:((d=this.xyChart)==null?void 0:d.titleColor)||this.primaryTextColor,xAxisTitleColor:((p=this.xyChart)==null?void 0:p.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((g=this.xyChart)==null?void 0:g.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((y=this.xyChart)==null?void 0:y.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((x=this.xyChart)==null?void 0:x.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((_=this.xyChart)==null?void 0:_.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((T=this.xyChart)==null?void 0:T.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((S=this.xyChart)==null?void 0:S.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||L(this.primaryColor,{h:-30}),this.git4=this.git4||L(this.primaryColor,{h:-60}),this.git5=this.git5||L(this.primaryColor,{h:-90}),this.git6=this.git6||L(this.primaryColor,{h:60}),this.git7=this.git7||L(this.primaryColor,{h:120}),this.darkMode?(this.git0=tt(this.git0,25),this.git1=tt(this.git1,25),this.git2=tt(this.git2,25),this.git3=tt(this.git3,25),this.git4=tt(this.git4,25),this.git5=tt(this.git5,25),this.git6=tt(this.git6,25),this.git7=tt(this.git7,25)):(this.git0=pt(this.git0,25),this.git1=pt(this.git1,25),this.git2=pt(this.git2,25),this.git3=pt(this.git3,25),this.git4=pt(this.git4,25),this.git5=pt(this.git5,25),this.git6=pt(this.git6,25),this.git7=pt(this.git7,25)),this.gitInv0=this.gitInv0||X(this.git0),this.gitInv1=this.gitInv1||X(this.git1),this.gitInv2=this.gitInv2||X(this.git2),this.gitInv3=this.gitInv3||X(this.git3),this.gitInv4=this.gitInv4||X(this.git4),this.gitInv5=this.gitInv5||X(this.git5),this.gitInv6=this.gitInv6||X(this.git6),this.gitInv7=this.gitInv7||X(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||X(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||X(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ns,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||qs}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},f(Ui,"Theme"),Ui),ex=f(e=>{const t=new tx;return t.calculate(e),t},"getThemeVariables"),Yi,rx=(Yi=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=tt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=L(this.primaryColor,{h:-160}),this.primaryBorderColor=ve(this.primaryColor,this.darkMode),this.secondaryBorderColor=ve(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ve(this.tertiaryColor,this.darkMode),this.primaryTextColor=X(this.primaryColor),this.secondaryTextColor=X(this.secondaryColor),this.tertiaryTextColor=X(this.tertiaryColor),this.lineColor=X(this.background),this.textColor=X(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||tt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,i,a,n,o,s,l,c,h,u,d,p,g,m,y,x,b,_,T,S;this.secondBkg=tt(this.contrast,55),this.border2=this.contrast,this.actorBorder=tt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleInv"+v]=this["cScaleInv"+v]||X(this["cScale"+v]);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this.darkMode?this["cScalePeer"+v]=this["cScalePeer"+v]||tt(this["cScale"+v],10):this["cScalePeer"+v]=this["cScalePeer"+v]||pt(this["cScale"+v],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleLabel"+v]=this["cScaleLabel"+v]||this.scaleLabelColor;for(let v=0;v<5;v++)this["surface"+v]=this["surface"+v]||L(this.mainBkg,{l:-(5+v*5)}),this["surfacePeer"+v]=this["surfacePeer"+v]||L(this.mainBkg,{l:-(8+v*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=tt(this.contrast,30),this.sectionBkgColor2=tt(this.contrast,30),this.taskBorderColor=pt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=tt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=pt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=L(this.primaryColor,{h:64}),this.fillType3=L(this.secondaryColor,{h:64}),this.fillType4=L(this.primaryColor,{h:-64}),this.fillType5=L(this.secondaryColor,{h:-64}),this.fillType6=L(this.primaryColor,{h:128}),this.fillType7=L(this.secondaryColor,{h:128});for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["pie"+v]=this["cScale"+v];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||L(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||L(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||L(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||L(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||L(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||L(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||cn(this.quadrant1Fill)?tt(this.quadrant1Fill):pt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((a=this.xyChart)==null?void 0:a.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((s=this.xyChart)==null?void 0:s.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:((d=this.radar)==null?void 0:d.axisColor)||this.lineColor,axisStrokeWidth:((p=this.radar)==null?void 0:p.axisStrokeWidth)||2,axisLabelFontSize:((g=this.radar)==null?void 0:g.axisLabelFontSize)||12,curveOpacity:((m=this.radar)==null?void 0:m.curveOpacity)||.5,curveStrokeWidth:((y=this.radar)==null?void 0:y.curveStrokeWidth)||2,graticuleColor:((x=this.radar)==null?void 0:x.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((b=this.radar)==null?void 0:b.graticuleStrokeWidth)||1,graticuleOpacity:((_=this.radar)==null?void 0:_.graticuleOpacity)||.3,legendBoxSize:((T=this.radar)==null?void 0:T.legendBoxSize)||12,legendFontSize:((S=this.radar)==null?void 0:S.legendFontSize)||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=pt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||L(this.primaryColor,{h:-30}),this.git4=this.pie5||L(this.primaryColor,{h:-60}),this.git5=this.pie6||L(this.primaryColor,{h:-90}),this.git6=this.pie7||L(this.primaryColor,{h:60}),this.git7=this.pie8||L(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||X(this.git0),this.gitInv1=this.gitInv1||X(this.git1),this.gitInv2=this.gitInv2||X(this.git2),this.gitInv3=this.gitInv3||X(this.git3),this.gitInv4=this.gitInv4||X(this.git4),this.gitInv5=this.gitInv5||X(this.git5),this.gitInv6=this.gitInv6||X(this.git6),this.gitInv7=this.gitInv7||X(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ns,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||qs}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},f(Yi,"Theme"),Yi),ix=f(e=>{const t=new rx;return t.calculate(e),t},"getThemeVariables"),wr={base:{getThemeVariables:X0},dark:{getThemeVariables:K0},default:{getThemeVariables:J0},forest:{getThemeVariables:ex},neutral:{getThemeVariables:ix}},er={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},qu={...er,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:wr.default.getThemeVariables(),sequence:{...er.sequence,messageFont:f(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:f(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:f(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...er.gantt,tickInterval:void 0,useWidth:void 0},c4:{...er.c4,useWidth:void 0,personFont:f(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...er.flowchart,inheritDir:!1},external_personFont:f(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:f(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:f(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:f(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:f(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:f(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:f(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:f(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:f(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:f(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:f(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:f(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:f(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:f(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:f(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:f(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:f(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:f(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:f(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:f(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:f(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...er.pie,useWidth:984},xyChart:{...er.xyChart,useWidth:void 0},requirement:{...er.requirement,useWidth:void 0},packet:{...er.packet},radar:{...er.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},zu=f((e,t="")=>Object.keys(e).reduce((r,i)=>Array.isArray(e[i])?r:typeof e[i]=="object"&&e[i]!==null?[...r,t+i,...zu(e[i],"")]:[...r,t+i],[]),"keyify"),ax=new Set(zu(qu,"")),Wu=qu,is=f(e=>{if(I.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>is(t));return}for(const t of Object.keys(e)){if(I.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!ax.has(t)||e[t]==null){I.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){I.debug("sanitizing object",t),is(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const i of r)t.includes(i)&&(I.debug("sanitizing css option",t),e[t]=nx(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r!=null&&r.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}I.debug("After sanitization",e)}},"sanitizeDirective"),nx=f(e=>{let t=0,r=0;for(const i of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";i==="{"?t++:i==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),Ki=Object.freeze(Wu),Ae=pe({},Ki),ju,Qi=[],Ya=pe({},Ki),zs=f((e,t)=>{let r=pe({},e),i={};for(const a of t)Uu(a),i=pe(i,a);if(r=pe(r,i),i.theme&&i.theme in wr){const a=pe({},ju),n=pe(a.themeVariables||{},i.themeVariables);r.theme&&r.theme in wr&&(r.themeVariables=wr[r.theme].getThemeVariables(n))}return Ya=r,Yu(Ya),Ya},"updateCurrentConfig"),sx=f(e=>(Ae=pe({},Ki),Ae=pe(Ae,e),e.theme&&wr[e.theme]&&(Ae.themeVariables=wr[e.theme].getThemeVariables(e.themeVariables)),zs(Ae,Qi),Ae),"setSiteConfig"),ox=f(e=>{ju=pe({},e)},"saveConfigFromInitialize"),lx=f(e=>(Ae=pe(Ae,e),zs(Ae,Qi),Ae),"updateSiteConfig"),Hu=f(()=>pe({},Ae),"getSiteConfig"),Vu=f(e=>(Yu(e),pe(Ya,e),$e()),"setConfig"),$e=f(()=>pe({},Ya),"getConfig"),Uu=f(e=>{e&&(["secure",...Ae.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(I.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&Uu(e[t])}))},"sanitize"),cx=f(e=>{var t;is(e),e.fontFamily&&!((t=e.themeVariables)!=null&&t.fontFamily)&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),Qi.push(e),zs(Ae,Qi)},"addDirective"),as=f((e=Ae)=>{Qi=[],zs(e,Qi)},"reset"),hx={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},ah={},ux=f(e=>{ah[e]||(I.warn(hx[e]),ah[e]=!0)},"issueWarning"),Yu=f(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&ux("LAZY_LOAD_DEPRECATED")},"checkConfig"),hn=/<br\s*\/?>/gi,px=f(e=>e?Zu(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),dx=(()=>{let e=!1;return()=>{e||(Gu(),e=!0)}})();function Gu(){const e="data-temp-href-target";Zi.addHook("beforeSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),Zi.addHook("afterSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}f(Gu,"setupDompurifyHooks");var Xu=f(e=>(dx(),Zi.sanitize(e)),"removeScript"),nh=f((e,t)=>{var r;if(((r=t.flowchart)==null?void 0:r.htmlLabels)!==!1){const i=t.securityLevel;i==="antiscript"||i==="strict"?e=Xu(e):i!=="loose"&&(e=Zu(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=yx(e))}return e},"sanitizeMore"),ui=f((e,t)=>e&&(t.dompurifyConfig?e=Zi.sanitize(nh(e,t),t.dompurifyConfig).toString():e=Zi.sanitize(nh(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),fx=f((e,t)=>typeof e=="string"?ui(e,t):e.flat().map(r=>ui(r,t)),"sanitizeTextOrArray"),gx=f(e=>hn.test(e),"hasBreaks"),mx=f(e=>e.split(hn),"splitBreaks"),yx=f(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),Zu=f(e=>e.replace(hn,"#br#"),"breakToPlaceholder"),Ku=f(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=CSS.escape(t)),t},"getUrl"),le=f(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),xx=f(function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},"getMax"),bx=f(function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},"getMin"),sh=f(function(e){const t=e.split(/(,)/),r=[];for(let i=0;i<t.length;i++){let a=t[i];if(a===","&&i>0&&i+1<t.length){const n=t[i-1],o=t[i+1];vx(n,o)&&(a=n+","+o,i++,r.pop())}r.push(_x(a))}return r.join("")},"parseGenericTypes"),Vo=f((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),vx=f((e,t)=>{const r=Vo(e,"~"),i=Vo(t,"~");return r===1&&i===1},"shouldCombineSets"),_x=f(e=>{const t=Vo(e,"~");let r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const i=[...e];let a=i.indexOf("~"),n=i.lastIndexOf("~");for(;a!==-1&&n!==-1&&a!==n;)i[a]="<",i[n]=">",a=i.indexOf("~"),n=i.lastIndexOf("~");return r&&i.unshift("~"),i.join("")},"processSet"),oh=f(()=>window.MathMLElement!==void 0,"isMathMLSupported"),Uo=/\$\$(.*)\$\$/g,Ji=f(e=>{var t;return(((t=e.match(Uo))==null?void 0:t.length)??0)>0},"hasKatex"),QB=f(async(e,t)=>{e=await ql(e,t);const r=document.createElement("div");r.innerHTML=e,r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0";const i=document.querySelector("body");i==null||i.insertAdjacentElement("beforeend",r);const a={width:r.clientWidth,height:r.clientHeight};return r.remove(),a},"calculateMathMLDimensions"),ql=f(async(e,t)=>{if(!Ji(e))return e;if(!(oh()||t.legacyMathML||t.forceLegacyMathML))return e.replace(Uo,"MathML is unsupported in this environment.");{const{default:r}=await Ot(async()=>{const{default:a}=await import("./ChWnQ-fc.js");return{default:a}},[],import.meta.url),i=t.forceLegacyMathML||!oh()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(hn).map(a=>Ji(a)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${a}</div>`:`<div>${a}</div>`).join("").replace(Uo,(a,n)=>r.renderToString(n,{throwOnError:!0,displayMode:!0,output:i}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatex"),sa={getRows:px,sanitizeText:ui,sanitizeTextOrArray:fx,hasBreaks:gx,splitBreaks:mx,lineBreakRegex:hn,removeScript:Xu,getUrl:Ku,evaluate:le,getMax:xx,getMin:bx},wx=f(function(e,t){for(let r of t)e.attr(r[0],r[1])},"d3Attrs"),Cx=f(function(e,t,r){let i=new Map;return r?(i.set("width","100%"),i.set("style",`max-width: ${t}px;`)):(i.set("height",e),i.set("width",t)),i},"calculateSvgSizeAttrs"),Qu=f(function(e,t,r,i){const a=Cx(t,r,i);wx(e,a)},"configureSvgSize"),kx=f(function(e,t,r,i){const a=t.node().getBBox(),n=a.width,o=a.height;I.info(`SVG bounds: ${n}x${o}`,a);let s=0,l=0;I.info(`Graph bounds: ${s}x${l}`,e),s=n+r*2,l=o+r*2,I.info(`Calculated bounds: ${s}x${l}`),Qu(t,l,s,i);const c=`${a.x-r} ${a.y-r} ${a.width+2*r} ${a.height+2*r}`;t.attr("viewBox",c)},"setupGraphViewbox"),Hn={},Sx=f((e,t,r)=>{let i="";return e in Hn&&Hn[e]?i=Hn[e](r):I.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${i}

  ${t}
`},"getStyles"),Tx=f((e,t)=>{t!==void 0&&(Hn[e]=t)},"addStylesForDiagram"),Mx=Sx,Ju={};V0(Ju,{clear:()=>Lx,getAccDescription:()=>$x,getAccTitle:()=>Bx,getDiagramTitle:()=>Px,setAccDescription:()=>Ex,setAccTitle:()=>Ax,setDiagramTitle:()=>Fx});var zl="",Wl="",jl="",Hl=f(e=>ui(e,$e()),"sanitizeText"),Lx=f(()=>{zl="",jl="",Wl=""},"clear"),Ax=f(e=>{zl=Hl(e).replace(/^\s+/g,"")},"setAccTitle"),Bx=f(()=>zl,"getAccTitle"),Ex=f(e=>{jl=Hl(e).replace(/\n\s+/g,`
`)},"setAccDescription"),$x=f(()=>jl,"getAccDescription"),Fx=f(e=>{Wl=Hl(e)},"setDiagramTitle"),Px=f(()=>Wl,"getDiagramTitle"),lh=I,Rx=Il,Et=$e,JB=Vu,tE=Ki,Ws=f(e=>ui(e,Et()),"sanitizeText"),Dx=kx,Ox=f(()=>Ju,"getCommonDb"),ns={},ss=f((e,t,r)=>{var i;ns[e]&&lh.warn(`Diagram with id ${e} already registered. Overwriting.`),ns[e]=t,r&&Nu(e,r),Tx(e,t.styles),(i=t.injectUtils)==null||i.call(t,lh,Rx,Et,Ws,Dx,Ox(),()=>{})},"registerDiagram"),Yo=f(e=>{if(e in ns)return ns[e];throw new Ix(e)},"getDiagram"),Gi,Ix=(Gi=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},f(Gi,"DiagramNotFoundError"),Gi);function Vl(e){return typeof e>"u"||e===null}f(Vl,"isNothing");function tp(e){return typeof e=="object"&&e!==null}f(tp,"isObject");function ep(e){return Array.isArray(e)?e:Vl(e)?[]:[e]}f(ep,"toArray");function rp(e,t){var r,i,a,n;if(t)for(n=Object.keys(t),r=0,i=n.length;r<i;r+=1)a=n[r],e[a]=t[a];return e}f(rp,"extend");function ip(e,t){var r="",i;for(i=0;i<t;i+=1)r+=e;return r}f(ip,"repeat");function ap(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}f(ap,"isNegativeZero");var Nx=Vl,qx=tp,zx=ep,Wx=ip,jx=ap,Hx=rp,oe={isNothing:Nx,isObject:qx,toArray:zx,repeat:Wx,isNegativeZero:jx,extend:Hx};function Ul(e,t){var r="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),i+" "+r):i}f(Ul,"formatError");function ta(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Ul(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}f(ta,"YAMLException$1");ta.prototype=Object.create(Error.prototype);ta.prototype.constructor=ta;ta.prototype.toString=f(function(t){return this.name+": "+Ul(this,t)},"toString");var Be=ta;function Vn(e,t,r,i,a){var n="",o="",s=Math.floor(a/2)-1;return i-t>s&&(n=" ... ",t=i-s+n.length),r-i>s&&(o=" ...",r=i+s-o.length),{str:n+e.slice(t,r).replace(/\t/g,"")+o,pos:i-t+n.length}}f(Vn,"getLine");function Un(e,t){return oe.repeat(" ",t-e.length)+e}f(Un,"padStart");function np(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,i=[0],a=[],n,o=-1;n=r.exec(e.buffer);)a.push(n.index),i.push(n.index+n[0].length),e.position<=n.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var s="",l,c,h=Math.min(e.line+t.linesAfter,a.length).toString().length,u=t.maxLength-(t.indent+h+3);for(l=1;l<=t.linesBefore&&!(o-l<0);l++)c=Vn(e.buffer,i[o-l],a[o-l],e.position-(i[o]-i[o-l]),u),s=oe.repeat(" ",t.indent)+Un((e.line-l+1).toString(),h)+" | "+c.str+`
`+s;for(c=Vn(e.buffer,i[o],a[o],e.position,u),s+=oe.repeat(" ",t.indent)+Un((e.line+1).toString(),h)+" | "+c.str+`
`,s+=oe.repeat("-",t.indent+h+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(o+l>=a.length);l++)c=Vn(e.buffer,i[o+l],a[o+l],e.position-(i[o]-i[o+l]),u),s+=oe.repeat(" ",t.indent)+Un((e.line+l+1).toString(),h)+" | "+c.str+`
`;return s.replace(/\n$/,"")}f(np,"makeSnippet");var Vx=np,Ux=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Yx=["scalar","sequence","mapping"];function sp(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(i){t[String(i)]=r})}),t}f(sp,"compileStyleAliases");function op(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(Ux.indexOf(r)===-1)throw new Be('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=sp(t.styleAliases||null),Yx.indexOf(this.kind)===-1)throw new Be('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}f(op,"Type$1");var ge=op;function Go(e,t){var r=[];return e[t].forEach(function(i){var a=r.length;r.forEach(function(n,o){n.tag===i.tag&&n.kind===i.kind&&n.multi===i.multi&&(a=o)}),r[a]=i}),r}f(Go,"compileList");function lp(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function i(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(f(i,"collectType"),t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(i);return e}f(lp,"compileMap");function os(e){return this.extend(e)}f(os,"Schema$1");os.prototype.extend=f(function(t){var r=[],i=[];if(t instanceof ge)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new Be("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(n){if(!(n instanceof ge))throw new Be("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new Be("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new Be("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(n){if(!(n instanceof ge))throw new Be("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(os.prototype);return a.implicit=(this.implicit||[]).concat(r),a.explicit=(this.explicit||[]).concat(i),a.compiledImplicit=Go(a,"implicit"),a.compiledExplicit=Go(a,"explicit"),a.compiledTypeMap=lp(a.compiledImplicit,a.compiledExplicit),a},"extend");var Gx=os,Xx=new ge("tag:yaml.org,2002:str",{kind:"scalar",construct:f(function(e){return e!==null?e:""},"construct")}),Zx=new ge("tag:yaml.org,2002:seq",{kind:"sequence",construct:f(function(e){return e!==null?e:[]},"construct")}),Kx=new ge("tag:yaml.org,2002:map",{kind:"mapping",construct:f(function(e){return e!==null?e:{}},"construct")}),Qx=new Gx({explicit:[Xx,Zx,Kx]});function cp(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}f(cp,"resolveYamlNull");function hp(){return null}f(hp,"constructYamlNull");function up(e){return e===null}f(up,"isNull");var Jx=new ge("tag:yaml.org,2002:null",{kind:"scalar",resolve:cp,construct:hp,predicate:up,represent:{canonical:f(function(){return"~"},"canonical"),lowercase:f(function(){return"null"},"lowercase"),uppercase:f(function(){return"NULL"},"uppercase"),camelcase:f(function(){return"Null"},"camelcase"),empty:f(function(){return""},"empty")},defaultStyle:"lowercase"});function pp(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}f(pp,"resolveYamlBoolean");function dp(e){return e==="true"||e==="True"||e==="TRUE"}f(dp,"constructYamlBoolean");function fp(e){return Object.prototype.toString.call(e)==="[object Boolean]"}f(fp,"isBoolean");var tb=new ge("tag:yaml.org,2002:bool",{kind:"scalar",resolve:pp,construct:dp,predicate:fp,represent:{lowercase:f(function(e){return e?"true":"false"},"lowercase"),uppercase:f(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:f(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function gp(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}f(gp,"isHexCode");function mp(e){return 48<=e&&e<=55}f(mp,"isOctCode");function yp(e){return 48<=e&&e<=57}f(yp,"isDecCode");function xp(e){if(e===null)return!1;var t=e.length,r=0,i=!1,a;if(!t)return!1;if(a=e[r],(a==="-"||a==="+")&&(a=e[++r]),a==="0"){if(r+1===t)return!0;if(a=e[++r],a==="b"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(a!=="0"&&a!=="1")return!1;i=!0}return i&&a!=="_"}if(a==="x"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!gp(e.charCodeAt(r)))return!1;i=!0}return i&&a!=="_"}if(a==="o"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!mp(e.charCodeAt(r)))return!1;i=!0}return i&&a!=="_"}}if(a==="_")return!1;for(;r<t;r++)if(a=e[r],a!=="_"){if(!yp(e.charCodeAt(r)))return!1;i=!0}return!(!i||a==="_")}f(xp,"resolveYamlInteger");function bp(e){var t=e,r=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(r=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}f(bp,"constructYamlInteger");function vp(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!oe.isNegativeZero(e)}f(vp,"isInteger");var eb=new ge("tag:yaml.org,2002:int",{kind:"scalar",resolve:xp,construct:bp,predicate:vp,represent:{binary:f(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:f(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:f(function(e){return e.toString(10)},"decimal"),hexadecimal:f(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),rb=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function _p(e){return!(e===null||!rb.test(e)||e[e.length-1]==="_")}f(_p,"resolveYamlFloat");function wp(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}f(wp,"constructYamlFloat");var ib=/^[-+]?[0-9]+e/;function Cp(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(oe.isNegativeZero(e))return"-0.0";return r=e.toString(10),ib.test(r)?r.replace("e",".e"):r}f(Cp,"representYamlFloat");function kp(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||oe.isNegativeZero(e))}f(kp,"isFloat");var ab=new ge("tag:yaml.org,2002:float",{kind:"scalar",resolve:_p,construct:wp,predicate:kp,represent:Cp,defaultStyle:"lowercase"}),Sp=Qx.extend({implicit:[Jx,tb,eb,ab]}),nb=Sp,Tp=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Mp=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Lp(e){return e===null?!1:Tp.exec(e)!==null||Mp.exec(e)!==null}f(Lp,"resolveYamlTimestamp");function Ap(e){var t,r,i,a,n,o,s,l=0,c=null,h,u,d;if(t=Tp.exec(e),t===null&&(t=Mp.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],i=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(r,i,a));if(n=+t[4],o=+t[5],s=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(h=+t[10],u=+(t[11]||0),c=(h*60+u)*6e4,t[9]==="-"&&(c=-c)),d=new Date(Date.UTC(r,i,a,n,o,s,l)),c&&d.setTime(d.getTime()-c),d}f(Ap,"constructYamlTimestamp");function Bp(e){return e.toISOString()}f(Bp,"representYamlTimestamp");var sb=new ge("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Lp,construct:Ap,instanceOf:Date,represent:Bp});function Ep(e){return e==="<<"||e===null}f(Ep,"resolveYamlMerge");var ob=new ge("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Ep}),Yl=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function $p(e){if(e===null)return!1;var t,r,i=0,a=e.length,n=Yl;for(r=0;r<a;r++)if(t=n.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}f($p,"resolveYamlBinary");function Fp(e){var t,r,i=e.replace(/[\r\n=]/g,""),a=i.length,n=Yl,o=0,s=[];for(t=0;t<a;t++)t%4===0&&t&&(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)),o=o<<6|n.indexOf(i.charAt(t));return r=a%4*6,r===0?(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)):r===18?(s.push(o>>10&255),s.push(o>>2&255)):r===12&&s.push(o>>4&255),new Uint8Array(s)}f(Fp,"constructYamlBinary");function Pp(e){var t="",r=0,i,a,n=e.length,o=Yl;for(i=0;i<n;i++)i%3===0&&i&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[i];return a=n%3,a===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):a===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):a===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}f(Pp,"representYamlBinary");function Rp(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}f(Rp,"isBinary");var lb=new ge("tag:yaml.org,2002:binary",{kind:"scalar",resolve:$p,construct:Fp,predicate:Rp,represent:Pp}),cb=Object.prototype.hasOwnProperty,hb=Object.prototype.toString;function Dp(e){if(e===null)return!0;var t=[],r,i,a,n,o,s=e;for(r=0,i=s.length;r<i;r+=1){if(a=s[r],o=!1,hb.call(a)!=="[object Object]")return!1;for(n in a)if(cb.call(a,n))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(n)===-1)t.push(n);else return!1}return!0}f(Dp,"resolveYamlOmap");function Op(e){return e!==null?e:[]}f(Op,"constructYamlOmap");var ub=new ge("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Dp,construct:Op}),pb=Object.prototype.toString;function Ip(e){if(e===null)return!0;var t,r,i,a,n,o=e;for(n=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(i=o[t],pb.call(i)!=="[object Object]"||(a=Object.keys(i),a.length!==1))return!1;n[t]=[a[0],i[a[0]]]}return!0}f(Ip,"resolveYamlPairs");function Np(e){if(e===null)return[];var t,r,i,a,n,o=e;for(n=new Array(o.length),t=0,r=o.length;t<r;t+=1)i=o[t],a=Object.keys(i),n[t]=[a[0],i[a[0]]];return n}f(Np,"constructYamlPairs");var db=new ge("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Ip,construct:Np}),fb=Object.prototype.hasOwnProperty;function qp(e){if(e===null)return!0;var t,r=e;for(t in r)if(fb.call(r,t)&&r[t]!==null)return!1;return!0}f(qp,"resolveYamlSet");function zp(e){return e!==null?e:{}}f(zp,"constructYamlSet");var gb=new ge("tag:yaml.org,2002:set",{kind:"mapping",resolve:qp,construct:zp}),Wp=nb.extend({implicit:[sb,ob],explicit:[lb,ub,db,gb]}),Rr=Object.prototype.hasOwnProperty,ls=1,jp=2,Hp=3,cs=4,So=1,mb=2,ch=3,yb=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,xb=/[\x85\u2028\u2029]/,bb=/[,\[\]\{\}]/,Vp=/^(?:!|!!|![a-z\-]+!)$/i,Up=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Xo(e){return Object.prototype.toString.call(e)}f(Xo,"_class");function Ge(e){return e===10||e===13}f(Ge,"is_EOL");function Pr(e){return e===9||e===32}f(Pr,"is_WHITE_SPACE");function _e(e){return e===9||e===32||e===10||e===13}f(_e,"is_WS_OR_EOL");function ai(e){return e===44||e===91||e===93||e===123||e===125}f(ai,"is_FLOW_INDICATOR");function Yp(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}f(Yp,"fromHexCode");function Gp(e){return e===120?2:e===117?4:e===85?8:0}f(Gp,"escapedHexLen");function Xp(e){return 48<=e&&e<=57?e-48:-1}f(Xp,"fromDecimalCode");function Zo(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}f(Zo,"simpleEscapeSequence");function Zp(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}f(Zp,"charFromCodepoint");var Kp=new Array(256),Qp=new Array(256);for(Jr=0;Jr<256;Jr++)Kp[Jr]=Zo(Jr)?1:0,Qp[Jr]=Zo(Jr);var Jr;function Jp(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Wp,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}f(Jp,"State$1");function Gl(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=Vx(r),new Be(t,r)}f(Gl,"generateError");function ut(e,t){throw Gl(e,t)}f(ut,"throwError");function Za(e,t){e.onWarning&&e.onWarning.call(null,Gl(e,t))}f(Za,"throwWarning");var hh={YAML:f(function(t,r,i){var a,n,o;t.version!==null&&ut(t,"duplication of %YAML directive"),i.length!==1&&ut(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),a===null&&ut(t,"ill-formed argument of the YAML directive"),n=parseInt(a[1],10),o=parseInt(a[2],10),n!==1&&ut(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&Za(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:f(function(t,r,i){var a,n;i.length!==2&&ut(t,"TAG directive accepts exactly two arguments"),a=i[0],n=i[1],Vp.test(a)||ut(t,"ill-formed tag handle (first argument) of the TAG directive"),Rr.call(t.tagMap,a)&&ut(t,'there is a previously declared suffix for "'+a+'" tag handle'),Up.test(n)||ut(t,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch{ut(t,"tag prefix is malformed: "+n)}t.tagMap[a]=n},"handleTagDirective")};function Cr(e,t,r,i){var a,n,o,s;if(t<r){if(s=e.input.slice(t,r),i)for(a=0,n=s.length;a<n;a+=1)o=s.charCodeAt(a),o===9||32<=o&&o<=1114111||ut(e,"expected valid JSON character");else yb.test(s)&&ut(e,"the stream contains non-printable characters");e.result+=s}}f(Cr,"captureSegment");function Ko(e,t,r,i){var a,n,o,s;for(oe.isObject(r)||ut(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(r),o=0,s=a.length;o<s;o+=1)n=a[o],Rr.call(t,n)||(t[n]=r[n],i[n]=!0)}f(Ko,"mergeMappings");function ni(e,t,r,i,a,n,o,s,l){var c,h;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),c=0,h=a.length;c<h;c+=1)Array.isArray(a[c])&&ut(e,"nested arrays are not supported inside keys"),typeof a=="object"&&Xo(a[c])==="[object Object]"&&(a[c]="[object Object]");if(typeof a=="object"&&Xo(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(n))for(c=0,h=n.length;c<h;c+=1)Ko(e,t,n[c],r);else Ko(e,t,n,r);else!e.json&&!Rr.call(r,a)&&Rr.call(t,a)&&(e.line=o||e.line,e.lineStart=s||e.lineStart,e.position=l||e.position,ut(e,"duplicated mapping key")),a==="__proto__"?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[a]=n,delete r[a];return t}f(ni,"storeMappingPair");function js(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):ut(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}f(js,"readLineBreak");function te(e,t,r){for(var i=0,a=e.input.charCodeAt(e.position);a!==0;){for(;Pr(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(Ge(a))for(js(e),a=e.input.charCodeAt(e.position),i++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return r!==-1&&i!==0&&e.lineIndent<r&&Za(e,"deficient indentation"),i}f(te,"skipSeparationSpace");function un(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||_e(r)))}f(un,"testDocumentSeparator");function Hs(e,t){t===1?e.result+=" ":t>1&&(e.result+=oe.repeat(`
`,t-1))}f(Hs,"writeFoldedLines");function td(e,t,r){var i,a,n,o,s,l,c,h,u=e.kind,d=e.result,p;if(p=e.input.charCodeAt(e.position),_e(p)||ai(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(a=e.input.charCodeAt(e.position+1),_e(a)||r&&ai(a)))return!1;for(e.kind="scalar",e.result="",n=o=e.position,s=!1;p!==0;){if(p===58){if(a=e.input.charCodeAt(e.position+1),_e(a)||r&&ai(a))break}else if(p===35){if(i=e.input.charCodeAt(e.position-1),_e(i))break}else{if(e.position===e.lineStart&&un(e)||r&&ai(p))break;if(Ge(p))if(l=e.line,c=e.lineStart,h=e.lineIndent,te(e,!1,-1),e.lineIndent>=t){s=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=l,e.lineStart=c,e.lineIndent=h;break}}s&&(Cr(e,n,o,!1),Hs(e,e.line-l),n=o=e.position,s=!1),Pr(p)||(o=e.position+1),p=e.input.charCodeAt(++e.position)}return Cr(e,n,o,!1),e.result?!0:(e.kind=u,e.result=d,!1)}f(td,"readPlainScalar");function ed(e,t){var r,i,a;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=a=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Cr(e,i,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)i=e.position,e.position++,a=e.position;else return!0;else Ge(r)?(Cr(e,i,a,!0),Hs(e,te(e,!1,t)),i=a=e.position):e.position===e.lineStart&&un(e)?ut(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);ut(e,"unexpected end of the stream within a single quoted scalar")}f(ed,"readSingleQuotedScalar");function rd(e,t){var r,i,a,n,o,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return Cr(e,r,e.position,!0),e.position++,!0;if(s===92){if(Cr(e,r,e.position,!0),s=e.input.charCodeAt(++e.position),Ge(s))te(e,!1,t);else if(s<256&&Kp[s])e.result+=Qp[s],e.position++;else if((o=Gp(s))>0){for(a=o,n=0;a>0;a--)s=e.input.charCodeAt(++e.position),(o=Yp(s))>=0?n=(n<<4)+o:ut(e,"expected hexadecimal character");e.result+=Zp(n),e.position++}else ut(e,"unknown escape sequence");r=i=e.position}else Ge(s)?(Cr(e,r,i,!0),Hs(e,te(e,!1,t)),r=i=e.position):e.position===e.lineStart&&un(e)?ut(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}ut(e,"unexpected end of the stream within a double quoted scalar")}f(rd,"readDoubleQuotedScalar");function id(e,t){var r=!0,i,a,n,o=e.tag,s,l=e.anchor,c,h,u,d,p,g=Object.create(null),m,y,x,b;if(b=e.input.charCodeAt(e.position),b===91)h=93,p=!1,s=[];else if(b===123)h=125,p=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),b=e.input.charCodeAt(++e.position);b!==0;){if(te(e,!0,t),b=e.input.charCodeAt(e.position),b===h)return e.position++,e.tag=o,e.anchor=l,e.kind=p?"mapping":"sequence",e.result=s,!0;r?b===44&&ut(e,"expected the node content, but found ','"):ut(e,"missed comma between flow collection entries"),y=m=x=null,u=d=!1,b===63&&(c=e.input.charCodeAt(e.position+1),_e(c)&&(u=d=!0,e.position++,te(e,!0,t))),i=e.line,a=e.lineStart,n=e.position,pi(e,t,ls,!1,!0),y=e.tag,m=e.result,te(e,!0,t),b=e.input.charCodeAt(e.position),(d||e.line===i)&&b===58&&(u=!0,b=e.input.charCodeAt(++e.position),te(e,!0,t),pi(e,t,ls,!1,!0),x=e.result),p?ni(e,s,g,y,m,x,i,a,n):u?s.push(ni(e,null,g,y,m,x,i,a,n)):s.push(m),te(e,!0,t),b=e.input.charCodeAt(e.position),b===44?(r=!0,b=e.input.charCodeAt(++e.position)):r=!1}ut(e,"unexpected end of the stream within a flow collection")}f(id,"readFlowCollection");function ad(e,t){var r,i,a=So,n=!1,o=!1,s=t,l=0,c=!1,h,u;if(u=e.input.charCodeAt(e.position),u===124)i=!1;else if(u===62)i=!0;else return!1;for(e.kind="scalar",e.result="";u!==0;)if(u=e.input.charCodeAt(++e.position),u===43||u===45)So===a?a=u===43?ch:mb:ut(e,"repeat of a chomping mode identifier");else if((h=Xp(u))>=0)h===0?ut(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?ut(e,"repeat of an indentation width identifier"):(s=t+h-1,o=!0);else break;if(Pr(u)){do u=e.input.charCodeAt(++e.position);while(Pr(u));if(u===35)do u=e.input.charCodeAt(++e.position);while(!Ge(u)&&u!==0)}for(;u!==0;){for(js(e),e.lineIndent=0,u=e.input.charCodeAt(e.position);(!o||e.lineIndent<s)&&u===32;)e.lineIndent++,u=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>s&&(s=e.lineIndent),Ge(u)){l++;continue}if(e.lineIndent<s){a===ch?e.result+=oe.repeat(`
`,n?1+l:l):a===So&&n&&(e.result+=`
`);break}for(i?Pr(u)?(c=!0,e.result+=oe.repeat(`
`,n?1+l:l)):c?(c=!1,e.result+=oe.repeat(`
`,l+1)):l===0?n&&(e.result+=" "):e.result+=oe.repeat(`
`,l):e.result+=oe.repeat(`
`,n?1+l:l),n=!0,o=!0,l=0,r=e.position;!Ge(u)&&u!==0;)u=e.input.charCodeAt(++e.position);Cr(e,r,e.position,!1)}return!0}f(ad,"readBlockScalar");function Qo(e,t){var r,i=e.tag,a=e.anchor,n=[],o,s=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=n),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ut(e,"tab characters must not be used in indentation")),!(l!==45||(o=e.input.charCodeAt(e.position+1),!_e(o))));){if(s=!0,e.position++,te(e,!0,-1)&&e.lineIndent<=t){n.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,pi(e,t,Hp,!1,!0),n.push(e.result),te(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)ut(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return s?(e.tag=i,e.anchor=a,e.kind="sequence",e.result=n,!0):!1}f(Qo,"readBlockSequence");function nd(e,t,r){var i,a,n,o,s,l,c=e.tag,h=e.anchor,u={},d=Object.create(null),p=null,g=null,m=null,y=!1,x=!1,b;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),b=e.input.charCodeAt(e.position);b!==0;){if(!y&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ut(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),n=e.line,(b===63||b===58)&&_e(i))b===63?(y&&(ni(e,u,d,p,g,null,o,s,l),p=g=m=null),x=!0,y=!0,a=!0):y?(y=!1,a=!0):ut(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,b=i;else{if(o=e.line,s=e.lineStart,l=e.position,!pi(e,r,jp,!1,!0))break;if(e.line===n){for(b=e.input.charCodeAt(e.position);Pr(b);)b=e.input.charCodeAt(++e.position);if(b===58)b=e.input.charCodeAt(++e.position),_e(b)||ut(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(ni(e,u,d,p,g,null,o,s,l),p=g=m=null),x=!0,y=!1,a=!1,p=e.tag,g=e.result;else if(x)ut(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=h,!0}else if(x)ut(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=h,!0}if((e.line===n||e.lineIndent>t)&&(y&&(o=e.line,s=e.lineStart,l=e.position),pi(e,t,cs,!0,a)&&(y?g=e.result:m=e.result),y||(ni(e,u,d,p,g,m,o,s,l),p=g=m=null),te(e,!0,-1),b=e.input.charCodeAt(e.position)),(e.line===n||e.lineIndent>t)&&b!==0)ut(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&ni(e,u,d,p,g,null,o,s,l),x&&(e.tag=c,e.anchor=h,e.kind="mapping",e.result=u),x}f(nd,"readBlockMapping");function sd(e){var t,r=!1,i=!1,a,n,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&ut(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(i=!0,a="!!",o=e.input.charCodeAt(++e.position)):a="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(n=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):ut(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!_e(o);)o===33&&(i?ut(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),Vp.test(a)||ut(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),bb.test(n)&&ut(e,"tag suffix cannot contain flow indicator characters")}n&&!Up.test(n)&&ut(e,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{ut(e,"tag name is malformed: "+n)}return r?e.tag=n:Rr.call(e.tagMap,a)?e.tag=e.tagMap[a]+n:a==="!"?e.tag="!"+n:a==="!!"?e.tag="tag:yaml.org,2002:"+n:ut(e,'undeclared tag handle "'+a+'"'),!0}f(sd,"readTagProperty");function od(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&ut(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!_e(r)&&!ai(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&ut(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}f(od,"readAnchorProperty");function ld(e){var t,r,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!_e(i)&&!ai(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&ut(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Rr.call(e.anchorMap,r)||ut(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],te(e,!0,-1),!0}f(ld,"readAlias");function pi(e,t,r,i,a){var n,o,s,l=1,c=!1,h=!1,u,d,p,g,m,y;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,n=o=s=cs===r||Hp===r,i&&te(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;sd(e)||od(e);)te(e,!0,-1)?(c=!0,s=n,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):s=!1;if(s&&(s=c||a),(l===1||cs===r)&&(ls===r||jp===r?m=t:m=t+1,y=e.position-e.lineStart,l===1?s&&(Qo(e,y)||nd(e,y,m))||id(e,m)?h=!0:(o&&ad(e,m)||ed(e,m)||rd(e,m)?h=!0:ld(e)?(h=!0,(e.tag!==null||e.anchor!==null)&&ut(e,"alias node should not have any properties")):td(e,m,ls===r)&&(h=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(h=s&&Qo(e,y))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&ut(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,d=e.implicitTypes.length;u<d;u+=1)if(g=e.implicitTypes[u],g.resolve(e.result)){e.result=g.construct(e.result),e.tag=g.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Rr.call(e.typeMap[e.kind||"fallback"],e.tag))g=e.typeMap[e.kind||"fallback"][e.tag];else for(g=null,p=e.typeMap.multi[e.kind||"fallback"],u=0,d=p.length;u<d;u+=1)if(e.tag.slice(0,p[u].tag.length)===p[u].tag){g=p[u];break}g||ut(e,"unknown tag !<"+e.tag+">"),e.result!==null&&g.kind!==e.kind&&ut(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+g.kind+'", not "'+e.kind+'"'),g.resolve(e.result,e.tag)?(e.result=g.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):ut(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||h}f(pi,"composeNode");function cd(e){var t=e.position,r,i,a,n=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(te(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(n=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!_e(o);)o=e.input.charCodeAt(++e.position);for(i=e.input.slice(r,e.position),a=[],i.length<1&&ut(e,"directive name must not be less than one character in length");o!==0;){for(;Pr(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Ge(o));break}if(Ge(o))break;for(r=e.position;o!==0&&!_e(o);)o=e.input.charCodeAt(++e.position);a.push(e.input.slice(r,e.position))}o!==0&&js(e),Rr.call(hh,i)?hh[i](e,i,a):Za(e,'unknown document directive "'+i+'"')}if(te(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,te(e,!0,-1)):n&&ut(e,"directives end mark is expected"),pi(e,e.lineIndent-1,cs,!1,!0),te(e,!0,-1),e.checkLineBreaks&&xb.test(e.input.slice(t,e.position))&&Za(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&un(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,te(e,!0,-1));return}if(e.position<e.length-1)ut(e,"end of the stream or a document separator is expected");else return}f(cd,"readDocument");function Xl(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new Jp(e,t),i=e.indexOf("\0");for(i!==-1&&(r.position=i,ut(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)cd(r);return r.documents}f(Xl,"loadDocuments");function vb(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var i=Xl(e,r);if(typeof t!="function")return i;for(var a=0,n=i.length;a<n;a+=1)t(i[a])}f(vb,"loadAll$1");function hd(e,t){var r=Xl(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Be("expected a single document in the stream, but found more")}}f(hd,"load$1");var _b=hd,wb={load:_b},ud=Object.prototype.toString,pd=Object.prototype.hasOwnProperty,Zl=65279,Cb=9,Ka=10,kb=13,Sb=32,Tb=33,Mb=34,Jo=35,Lb=37,Ab=38,Bb=39,Eb=42,dd=44,$b=45,hs=58,Fb=61,Pb=62,Rb=63,Db=64,fd=91,gd=93,Ob=96,md=123,Ib=124,yd=125,me={};me[0]="\\0";me[7]="\\a";me[8]="\\b";me[9]="\\t";me[10]="\\n";me[11]="\\v";me[12]="\\f";me[13]="\\r";me[27]="\\e";me[34]='\\"';me[92]="\\\\";me[133]="\\N";me[160]="\\_";me[8232]="\\L";me[8233]="\\P";var Nb=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],qb=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function xd(e,t){var r,i,a,n,o,s,l;if(t===null)return{};for(r={},i=Object.keys(t),a=0,n=i.length;a<n;a+=1)o=i[a],s=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=e.compiledTypeMap.fallback[o],l&&pd.call(l.styleAliases,s)&&(s=l.styleAliases[s]),r[o]=s;return r}f(xd,"compileStyleMap");function bd(e){var t,r,i;if(t=e.toString(16).toUpperCase(),e<=255)r="x",i=2;else if(e<=65535)r="u",i=4;else if(e<=4294967295)r="U",i=8;else throw new Be("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+oe.repeat("0",i-t.length)+t}f(bd,"encodeHex");var zb=1,Qa=2;function vd(e){this.schema=e.schema||Wp,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=oe.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=xd(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Qa:zb,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}f(vd,"State");function tl(e,t){for(var r=oe.repeat(" ",t),i=0,a=-1,n="",o,s=e.length;i<s;)a=e.indexOf(`
`,i),a===-1?(o=e.slice(i),i=s):(o=e.slice(i,a+1),i=a+1),o.length&&o!==`
`&&(n+=r),n+=o;return n}f(tl,"indentString");function us(e,t){return`
`+oe.repeat(" ",e.indent*t)}f(us,"generateNextLine");function _d(e,t){var r,i,a;for(r=0,i=e.implicitTypes.length;r<i;r+=1)if(a=e.implicitTypes[r],a.resolve(t))return!0;return!1}f(_d,"testImplicitResolving");function Ja(e){return e===Sb||e===Cb}f(Ja,"isWhitespace");function ea(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Zl||65536<=e&&e<=1114111}f(ea,"isPrintable");function el(e){return ea(e)&&e!==Zl&&e!==kb&&e!==Ka}f(el,"isNsCharOrWhitespace");function rl(e,t,r){var i=el(e),a=i&&!Ja(e);return(r?i:i&&e!==dd&&e!==fd&&e!==gd&&e!==md&&e!==yd)&&e!==Jo&&!(t===hs&&!a)||el(t)&&!Ja(t)&&e===Jo||t===hs&&a}f(rl,"isPlainSafe");function wd(e){return ea(e)&&e!==Zl&&!Ja(e)&&e!==$b&&e!==Rb&&e!==hs&&e!==dd&&e!==fd&&e!==gd&&e!==md&&e!==yd&&e!==Jo&&e!==Ab&&e!==Eb&&e!==Tb&&e!==Ib&&e!==Fb&&e!==Pb&&e!==Bb&&e!==Mb&&e!==Lb&&e!==Db&&e!==Ob}f(wd,"isPlainSafeFirst");function Cd(e){return!Ja(e)&&e!==hs}f(Cd,"isPlainSafeLast");function Ii(e,t){var r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&t+1<e.length&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}f(Ii,"codePointAt");function Kl(e){var t=/^\n* /;return t.test(e)}f(Kl,"needIndentIndicator");var kd=1,il=2,Sd=3,Td=4,Di=5;function Md(e,t,r,i,a,n,o,s){var l,c=0,h=null,u=!1,d=!1,p=i!==-1,g=-1,m=wd(Ii(e,0))&&Cd(Ii(e,e.length-1));if(t||o)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=Ii(e,l),!ea(c))return Di;m=m&&rl(c,h,s),h=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=Ii(e,l),c===Ka)u=!0,p&&(d=d||l-g-1>i&&e[g+1]!==" ",g=l);else if(!ea(c))return Di;m=m&&rl(c,h,s),h=c}d=d||p&&l-g-1>i&&e[g+1]!==" "}return!u&&!d?m&&!o&&!a(e)?kd:n===Qa?Di:il:r>9&&Kl(e)?Di:o?n===Qa?Di:il:d?Td:Sd}f(Md,"chooseScalarStyle");function Ld(e,t,r,i,a){e.dump=function(){if(t.length===0)return e.quotingType===Qa?'""':"''";if(!e.noCompatMode&&(Nb.indexOf(t)!==-1||qb.test(t)))return e.quotingType===Qa?'"'+t+'"':"'"+t+"'";var n=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-n),s=i||e.flowLevel>-1&&r>=e.flowLevel;function l(c){return _d(e,c)}switch(f(l,"testAmbiguity"),Md(t,s,e.indent,o,l,e.quotingType,e.forceQuotes&&!i,a)){case kd:return t;case il:return"'"+t.replace(/'/g,"''")+"'";case Sd:return"|"+al(t,e.indent)+nl(tl(t,n));case Td:return">"+al(t,e.indent)+nl(tl(Ad(t,o),n));case Di:return'"'+Bd(t)+'"';default:throw new Be("impossible error: invalid scalar style")}}()}f(Ld,"writeScalar");function al(e,t){var r=Kl(e)?String(t):"",i=e[e.length-1]===`
`,a=i&&(e[e.length-2]===`
`||e===`
`),n=a?"+":i?"":"-";return r+n+`
`}f(al,"blockHeader");function nl(e){return e[e.length-1]===`
`?e.slice(0,-1):e}f(nl,"dropEndingNewline");function Ad(e,t){for(var r=/(\n+)([^\n]*)/g,i=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,sl(e.slice(0,c),t)}(),a=e[0]===`
`||e[0]===" ",n,o;o=r.exec(e);){var s=o[1],l=o[2];n=l[0]===" ",i+=s+(!a&&!n&&l!==""?`
`:"")+sl(l,t),a=n}return i}f(Ad,"foldString");function sl(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,i,a=0,n,o=0,s=0,l="";i=r.exec(e);)s=i.index,s-a>t&&(n=o>a?o:s,l+=`
`+e.slice(a,n),a=n+1),o=s;return l+=`
`,e.length-a>t&&o>a?l+=e.slice(a,o)+`
`+e.slice(o+1):l+=e.slice(a),l.slice(1)}f(sl,"foldLine");function Bd(e){for(var t="",r=0,i,a=0;a<e.length;r>=65536?a+=2:a++)r=Ii(e,a),i=me[r],!i&&ea(r)?(t+=e[a],r>=65536&&(t+=e[a+1])):t+=i||bd(r);return t}f(Bd,"escapeString");function Ed(e,t,r){var i="",a=e.tag,n,o,s;for(n=0,o=r.length;n<o;n+=1)s=r[n],e.replacer&&(s=e.replacer.call(r,String(n),s)),(lr(e,t,s,!1,!1)||typeof s>"u"&&lr(e,t,null,!1,!1))&&(i!==""&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=a,e.dump="["+i+"]"}f(Ed,"writeFlowSequence");function ol(e,t,r,i){var a="",n=e.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],e.replacer&&(l=e.replacer.call(r,String(o),l)),(lr(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&lr(e,t+1,null,!0,!0,!1,!0))&&((!i||a!=="")&&(a+=us(e,t)),e.dump&&Ka===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=n,e.dump=a||"[]"}f(ol,"writeBlockSequence");function $d(e,t,r){var i="",a=e.tag,n=Object.keys(r),o,s,l,c,h;for(o=0,s=n.length;o<s;o+=1)h="",i!==""&&(h+=", "),e.condenseFlow&&(h+='"'),l=n[o],c=r[l],e.replacer&&(c=e.replacer.call(r,l,c)),lr(e,t,l,!1,!1)&&(e.dump.length>1024&&(h+="? "),h+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),lr(e,t,c,!1,!1)&&(h+=e.dump,i+=h));e.tag=a,e.dump="{"+i+"}"}f($d,"writeFlowMapping");function Fd(e,t,r,i){var a="",n=e.tag,o=Object.keys(r),s,l,c,h,u,d;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new Be("sortKeys must be a boolean or a function");for(s=0,l=o.length;s<l;s+=1)d="",(!i||a!=="")&&(d+=us(e,t)),c=o[s],h=r[c],e.replacer&&(h=e.replacer.call(r,c,h)),lr(e,t+1,c,!0,!0,!0)&&(u=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,u&&(e.dump&&Ka===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,u&&(d+=us(e,t)),lr(e,t+1,h,!0,u)&&(e.dump&&Ka===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,a+=d));e.tag=n,e.dump=a||"{}"}f(Fd,"writeBlockMapping");function ll(e,t,r){var i,a,n,o,s,l;for(a=r?e.explicitTypes:e.implicitTypes,n=0,o=a.length;n<o;n+=1)if(s=a[n],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof t=="object"&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(r?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,ud.call(s.represent)==="[object Function]")i=s.represent(t,l);else if(pd.call(s.represent,l))i=s.represent[l](t,l);else throw new Be("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');e.dump=i}return!0}return!1}f(ll,"detectType");function lr(e,t,r,i,a,n,o){e.tag=null,e.dump=r,ll(e,r,!1)||ll(e,r,!0);var s=ud.call(e.dump),l=i,c;i&&(i=e.flowLevel<0||e.flowLevel>t);var h=s==="[object Object]"||s==="[object Array]",u,d;if(h&&(u=e.duplicates.indexOf(r),d=u!==-1),(e.tag!==null&&e.tag!=="?"||d||e.indent!==2&&t>0)&&(a=!1),d&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(h&&d&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),s==="[object Object]")i&&Object.keys(e.dump).length!==0?(Fd(e,t,e.dump,a),d&&(e.dump="&ref_"+u+e.dump)):($d(e,t,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump));else if(s==="[object Array]")i&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?ol(e,t-1,e.dump,a):ol(e,t,e.dump,a),d&&(e.dump="&ref_"+u+e.dump)):(Ed(e,t,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump));else if(s==="[object String]")e.tag!=="?"&&Ld(e,e.dump,t,n,l);else{if(s==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Be("unacceptable kind of an object to dump "+s)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}f(lr,"writeNode");function Pd(e,t){var r=[],i=[],a,n;for(ps(e,r,i),a=0,n=i.length;a<n;a+=1)t.duplicates.push(r[i[a]]);t.usedDuplicates=new Array(n)}f(Pd,"getDuplicateReferences");function ps(e,t,r){var i,a,n;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)r.indexOf(a)===-1&&r.push(a);else if(t.push(e),Array.isArray(e))for(a=0,n=e.length;a<n;a+=1)ps(e[a],t,r);else for(i=Object.keys(e),a=0,n=i.length;a<n;a+=1)ps(e[i[a]],t,r)}f(ps,"inspectNode");function Wb(e,t){t=t||{};var r=new vd(t);r.noRefs||Pd(e,r);var i=e;return r.replacer&&(i=r.replacer.call({"":i},"",i)),lr(r,0,i,!0,!0)?r.dump+`
`:""}f(Wb,"dump$1");function jb(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}f(jb,"renamed");var Hb=Sp,Vb=wb.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var ze={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function Ia(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=Xt(e),t=Xt(t);const[r,i]=[e.x,e.y],[a,n]=[t.x,t.y],o=a-r,s=n-i;return{angle:Math.atan(s/o),deltaX:o,deltaY:s}}f(Ia,"calculateDeltaAndAngle");var Xt=f(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),Ub=f(e=>({x:f(function(t,r,i){let a=0;const n=Xt(i[0]).x<Xt(i[i.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(ze,e.arrowTypeStart)){const{angle:p,deltaX:g}=Ia(i[0],i[1]);a=ze[e.arrowTypeStart]*Math.cos(p)*(g>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(ze,e.arrowTypeEnd)){const{angle:p,deltaX:g}=Ia(i[i.length-1],i[i.length-2]);a=ze[e.arrowTypeEnd]*Math.cos(p)*(g>=0?1:-1)}const o=Math.abs(Xt(t).x-Xt(i[i.length-1]).x),s=Math.abs(Xt(t).y-Xt(i[i.length-1]).y),l=Math.abs(Xt(t).x-Xt(i[0]).x),c=Math.abs(Xt(t).y-Xt(i[0]).y),h=ze[e.arrowTypeStart],u=ze[e.arrowTypeEnd],d=1;if(o<u&&o>0&&s<u){let p=u+d-o;p*=n==="right"?-1:1,a-=p}if(l<h&&l>0&&c<h){let p=h+d-l;p*=n==="right"?-1:1,a+=p}return Xt(t).x+a},"x"),y:f(function(t,r,i){let a=0;const n=Xt(i[0]).y<Xt(i[i.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(ze,e.arrowTypeStart)){const{angle:p,deltaY:g}=Ia(i[0],i[1]);a=ze[e.arrowTypeStart]*Math.abs(Math.sin(p))*(g>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(ze,e.arrowTypeEnd)){const{angle:p,deltaY:g}=Ia(i[i.length-1],i[i.length-2]);a=ze[e.arrowTypeEnd]*Math.abs(Math.sin(p))*(g>=0?1:-1)}const o=Math.abs(Xt(t).y-Xt(i[i.length-1]).y),s=Math.abs(Xt(t).x-Xt(i[i.length-1]).x),l=Math.abs(Xt(t).y-Xt(i[0]).y),c=Math.abs(Xt(t).x-Xt(i[0]).x),h=ze[e.arrowTypeStart],u=ze[e.arrowTypeEnd],d=1;if(o<u&&o>0&&s<u){let p=u+d-o;p*=n==="up"?-1:1,a-=p}if(l<h&&l>0&&c<h){let p=h+d-l;p*=n==="up"?-1:1,a+=p}return Xt(t).y+a},"y")}),"getLineFunctionsWithOffset"),Ql=f(({flowchart:e})=>{var a,n;const t=((a=e==null?void 0:e.subGraphTitleMargin)==null?void 0:a.top)??0,r=((n=e==null?void 0:e.subGraphTitleMargin)==null?void 0:n.bottom)??0,i=t+r;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:i}},"getSubGraphTitleMargins"),Yb=f(e=>{const{handDrawnSeed:t}=Et();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),oa=f(e=>{const t=Gb([...e.cssCompiledStyles||[],...e.cssStyles||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),Gb=f(e=>{const t=new Map;return e.forEach(r=>{const[i,a]=r.split(":");t.set(i.trim(),a==null?void 0:a.trim())}),t},"styles2Map"),Rd=f(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),ct=f(e=>{const{stylesArray:t}=oa(e),r=[],i=[],a=[],n=[];return t.forEach(o=>{const s=o[0];Rd(s)?r.push(o.join(":")+" !important"):(i.push(o.join(":")+" !important"),s.includes("stroke")&&a.push(o.join(":")+" !important"),s==="fill"&&n.push(o.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:i.join(";"),stylesArray:t,borderStyles:a,backgroundStyles:n}},"styles2String"),ot=f((e,t)=>{var l;const{themeVariables:r,handDrawnSeed:i}=Et(),{nodeBorder:a,mainBkg:n}=r,{stylesMap:o}=oa(e);return Object.assign({roughness:.7,fill:o.get("fill")||n,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||a,seed:i,strokeWidth:((l=o.get("stroke-width"))==null?void 0:l.replace("px",""))||1.3,fillLineDash:[0,0]},t)},"userNodeOverrides"),Aa={},se={},uh;function Xb(){return uh||(uh=1,Object.defineProperty(se,"__esModule",{value:!0}),se.BLANK_URL=se.relativeFirstCharacters=se.whitespaceEscapeCharsRegex=se.urlSchemeRegex=se.ctrlCharactersRegex=se.htmlCtrlEntityRegex=se.htmlEntitiesRegex=se.invalidProtocolRegex=void 0,se.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,se.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,se.htmlCtrlEntityRegex=/&(newline|tab);/gi,se.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,se.urlSchemeRegex=/^.+(:|&colon;)/gim,se.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,se.relativeFirstCharacters=[".","/"],se.BLANK_URL="about:blank"),se}var ph;function Zb(){if(ph)return Aa;ph=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.sanitizeUrl=void 0;var e=Xb();function t(o){return e.relativeFirstCharacters.indexOf(o[0])>-1}function r(o){var s=o.replace(e.ctrlCharactersRegex,"");return s.replace(e.htmlEntitiesRegex,function(l,c){return String.fromCharCode(c)})}function i(o){return URL.canParse(o)}function a(o){try{return decodeURIComponent(o)}catch{return o}}function n(o){if(!o)return e.BLANK_URL;var s,l=a(o.trim());do l=r(l).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim(),l=a(l),s=l.match(e.ctrlCharactersRegex)||l.match(e.htmlEntitiesRegex)||l.match(e.htmlCtrlEntityRegex)||l.match(e.whitespaceEscapeCharsRegex);while(s&&s.length>0);var c=l;if(!c)return e.BLANK_URL;if(t(c))return c;var h=c.trimStart(),u=h.match(e.urlSchemeRegex);if(!u)return c;var d=u[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(d))return e.BLANK_URL;var p=h.replace(/\\/g,"/");if(d==="mailto:"||d.includes("://"))return p;if(d==="http:"||d==="https:"){if(!i(p))return e.BLANK_URL;var g=new URL(p);return g.protocol=g.protocol.toLowerCase(),g.hostname=g.hostname.toLowerCase(),g.toString()}return p}return Aa.sanitizeUrl=n,Aa}var Kb=Zb(),Qb={value:()=>{}};function Dd(){for(var e=0,t=arguments.length,r={},i;e<t;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Yn(r)}function Yn(e){this._=e}function Jb(e,t){return e.trim().split(/^|\s+/).map(function(r){var i="",a=r.indexOf(".");if(a>=0&&(i=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Yn.prototype=Dd.prototype={constructor:Yn,on:function(e,t){var r=this._,i=Jb(e+"",r),a,n=-1,o=i.length;if(arguments.length<2){for(;++n<o;)if((a=(e=i[n]).type)&&(a=tv(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++n<o;)if(a=(e=i[n]).type)r[a]=dh(r[a],e.name,t);else if(t==null)for(a in r)r[a]=dh(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Yn(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),i=0,a,n;i<a;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(n=this._[e],i=0,a=n.length;i<a;++i)n[i].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,n=i.length;a<n;++a)i[a].value.apply(t,r)}};function tv(e,t){for(var r=0,i=e.length,a;r<i;++r)if((a=e[r]).name===t)return a.value}function dh(e,t,r){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=Qb,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:t,value:r}),e}var cl="http://www.w3.org/1999/xhtml";const fh={svg:"http://www.w3.org/2000/svg",xhtml:cl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vs(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),fh.hasOwnProperty(t)?{space:fh[t],local:e}:e}function ev(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===cl&&t.documentElement.namespaceURI===cl?t.createElement(e):t.createElementNS(r,e)}}function rv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Od(e){var t=Vs(e);return(t.local?rv:ev)(t)}function iv(){}function Jl(e){return e==null?iv:function(){return this.querySelector(e)}}function av(e){typeof e!="function"&&(e=Jl(e));for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a)for(var n=t[a],o=n.length,s=i[a]=new Array(o),l,c,h=0;h<o;++h)(l=n[h])&&(c=e.call(l,l.__data__,h,n))&&("__data__"in l&&(c.__data__=l.__data__),s[h]=c);return new Ne(i,this._parents)}function nv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function sv(){return[]}function Id(e){return e==null?sv:function(){return this.querySelectorAll(e)}}function ov(e){return function(){return nv(e.apply(this,arguments))}}function lv(e){typeof e=="function"?e=ov(e):e=Id(e);for(var t=this._groups,r=t.length,i=[],a=[],n=0;n<r;++n)for(var o=t[n],s=o.length,l,c=0;c<s;++c)(l=o[c])&&(i.push(e.call(l,l.__data__,c,o)),a.push(l));return new Ne(i,a)}function Nd(e){return function(){return this.matches(e)}}function qd(e){return function(t){return t.matches(e)}}var cv=Array.prototype.find;function hv(e){return function(){return cv.call(this.children,e)}}function uv(){return this.firstElementChild}function pv(e){return this.select(e==null?uv:hv(typeof e=="function"?e:qd(e)))}var dv=Array.prototype.filter;function fv(){return Array.from(this.children)}function gv(e){return function(){return dv.call(this.children,e)}}function mv(e){return this.selectAll(e==null?fv:gv(typeof e=="function"?e:qd(e)))}function yv(e){typeof e!="function"&&(e=Nd(e));for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a)for(var n=t[a],o=n.length,s=i[a]=[],l,c=0;c<o;++c)(l=n[c])&&e.call(l,l.__data__,c,n)&&s.push(l);return new Ne(i,this._parents)}function zd(e){return new Array(e.length)}function xv(){return new Ne(this._enter||this._groups.map(zd),this._parents)}function ds(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ds.prototype={constructor:ds,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function bv(e){return function(){return e}}function vv(e,t,r,i,a,n){for(var o=0,s,l=t.length,c=n.length;o<c;++o)(s=t[o])?(s.__data__=n[o],i[o]=s):r[o]=new ds(e,n[o]);for(;o<l;++o)(s=t[o])&&(a[o]=s)}function _v(e,t,r,i,a,n,o){var s,l,c=new Map,h=t.length,u=n.length,d=new Array(h),p;for(s=0;s<h;++s)(l=t[s])&&(d[s]=p=o.call(l,l.__data__,s,t)+"",c.has(p)?a[s]=l:c.set(p,l));for(s=0;s<u;++s)p=o.call(e,n[s],s,n)+"",(l=c.get(p))?(i[s]=l,l.__data__=n[s],c.delete(p)):r[s]=new ds(e,n[s]);for(s=0;s<h;++s)(l=t[s])&&c.get(d[s])===l&&(a[s]=l)}function wv(e){return e.__data__}function Cv(e,t){if(!arguments.length)return Array.from(this,wv);var r=t?_v:vv,i=this._parents,a=this._groups;typeof e!="function"&&(e=bv(e));for(var n=a.length,o=new Array(n),s=new Array(n),l=new Array(n),c=0;c<n;++c){var h=i[c],u=a[c],d=u.length,p=kv(e.call(h,h&&h.__data__,c,i)),g=p.length,m=s[c]=new Array(g),y=o[c]=new Array(g),x=l[c]=new Array(d);r(h,u,m,y,x,p,t);for(var b=0,_=0,T,S;b<g;++b)if(T=m[b]){for(b>=_&&(_=b+1);!(S=y[_])&&++_<g;);T._next=S||null}}return o=new Ne(o,i),o._enter=s,o._exit=l,o}function kv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Sv(){return new Ne(this._exit||this._groups.map(zd),this._parents)}function Tv(e,t,r){var i=this.enter(),a=this,n=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?n.remove():r(n),i&&a?i.merge(a).order():a}function Mv(e){for(var t=e.selection?e.selection():e,r=this._groups,i=t._groups,a=r.length,n=i.length,o=Math.min(a,n),s=new Array(a),l=0;l<o;++l)for(var c=r[l],h=i[l],u=c.length,d=s[l]=new Array(u),p,g=0;g<u;++g)(p=c[g]||h[g])&&(d[g]=p);for(;l<a;++l)s[l]=r[l];return new Ne(s,this._parents)}function Lv(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var i=e[t],a=i.length-1,n=i[a],o;--a>=0;)(o=i[a])&&(n&&o.compareDocumentPosition(n)^4&&n.parentNode.insertBefore(o,n),n=o);return this}function Av(e){e||(e=Bv);function t(u,d){return u&&d?e(u.__data__,d.__data__):!u-!d}for(var r=this._groups,i=r.length,a=new Array(i),n=0;n<i;++n){for(var o=r[n],s=o.length,l=a[n]=new Array(s),c,h=0;h<s;++h)(c=o[h])&&(l[h]=c);l.sort(t)}return new Ne(a,this._parents).order()}function Bv(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ev(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $v(){return Array.from(this)}function Fv(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],a=0,n=i.length;a<n;++a){var o=i[a];if(o)return o}return null}function Pv(){let e=0;for(const t of this)++e;return e}function Rv(){return!this.node()}function Dv(e){for(var t=this._groups,r=0,i=t.length;r<i;++r)for(var a=t[r],n=0,o=a.length,s;n<o;++n)(s=a[n])&&e.call(s,s.__data__,n,a);return this}function Ov(e){return function(){this.removeAttribute(e)}}function Iv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Nv(e,t){return function(){this.setAttribute(e,t)}}function qv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function zv(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Wv(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function jv(e,t){var r=Vs(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((t==null?r.local?Iv:Ov:typeof t=="function"?r.local?Wv:zv:r.local?qv:Nv)(r,t))}function Wd(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Hv(e){return function(){this.style.removeProperty(e)}}function Vv(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Uv(e,t,r){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function Yv(e,t,r){return arguments.length>1?this.each((t==null?Hv:typeof t=="function"?Uv:Vv)(e,t,r??"")):ra(this.node(),e)}function ra(e,t){return e.style.getPropertyValue(t)||Wd(e).getComputedStyle(e,null).getPropertyValue(t)}function Gv(e){return function(){delete this[e]}}function Xv(e,t){return function(){this[e]=t}}function Zv(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Kv(e,t){return arguments.length>1?this.each((t==null?Gv:typeof t=="function"?Zv:Xv)(e,t)):this.node()[e]}function jd(e){return e.trim().split(/^|\s+/)}function tc(e){return e.classList||new Hd(e)}function Hd(e){this._node=e,this._names=jd(e.getAttribute("class")||"")}Hd.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Vd(e,t){for(var r=tc(e),i=-1,a=t.length;++i<a;)r.add(t[i])}function Ud(e,t){for(var r=tc(e),i=-1,a=t.length;++i<a;)r.remove(t[i])}function Qv(e){return function(){Vd(this,e)}}function Jv(e){return function(){Ud(this,e)}}function t1(e,t){return function(){(t.apply(this,arguments)?Vd:Ud)(this,e)}}function e1(e,t){var r=jd(e+"");if(arguments.length<2){for(var i=tc(this.node()),a=-1,n=r.length;++a<n;)if(!i.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?t1:t?Qv:Jv)(r,t))}function r1(){this.textContent=""}function i1(e){return function(){this.textContent=e}}function a1(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function n1(e){return arguments.length?this.each(e==null?r1:(typeof e=="function"?a1:i1)(e)):this.node().textContent}function s1(){this.innerHTML=""}function o1(e){return function(){this.innerHTML=e}}function l1(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function c1(e){return arguments.length?this.each(e==null?s1:(typeof e=="function"?l1:o1)(e)):this.node().innerHTML}function h1(){this.nextSibling&&this.parentNode.appendChild(this)}function u1(){return this.each(h1)}function p1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function d1(){return this.each(p1)}function f1(e){var t=typeof e=="function"?e:Od(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function g1(){return null}function m1(e,t){var r=typeof e=="function"?e:Od(e),i=t==null?g1:typeof t=="function"?t:Jl(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function y1(){var e=this.parentNode;e&&e.removeChild(this)}function x1(){return this.each(y1)}function b1(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function v1(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _1(e){return this.select(e?v1:b1)}function w1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function C1(e){return function(t){e.call(this,t,this.__data__)}}function k1(e){return e.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");return i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),{type:t,name:r}})}function S1(e){return function(){var t=this.__on;if(t){for(var r=0,i=-1,a=t.length,n;r<a;++r)n=t[r],(!e.type||n.type===e.type)&&n.name===e.name?this.removeEventListener(n.type,n.listener,n.options):t[++i]=n;++i?t.length=i:delete this.__on}}}function T1(e,t,r){return function(){var i=this.__on,a,n=C1(t);if(i){for(var o=0,s=i.length;o<s;++o)if((a=i[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=n,a.options=r),a.value=t;return}}this.addEventListener(e.type,n,r),a={type:e.type,name:e.name,value:t,listener:n,options:r},i?i.push(a):this.__on=[a]}}function M1(e,t,r){var i=k1(e+""),a,n=i.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,h;l<c;++l)for(a=0,h=s[l];a<n;++a)if((o=i[a]).type===h.type&&o.name===h.name)return h.value}return}for(s=t?T1:S1,a=0;a<n;++a)this.each(s(i[a],t,r));return this}function Yd(e,t,r){var i=Wd(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,r):(a=i.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function L1(e,t){return function(){return Yd(this,e,t)}}function A1(e,t){return function(){return Yd(this,e,t.apply(this,arguments))}}function B1(e,t){return this.each((typeof t=="function"?A1:L1)(e,t))}function*E1(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],a=0,n=i.length,o;a<n;++a)(o=i[a])&&(yield o)}var Gd=[null];function Ne(e,t){this._groups=e,this._parents=t}function pn(){return new Ne([[document.documentElement]],Gd)}function $1(){return this}Ne.prototype=pn.prototype={constructor:Ne,select:av,selectAll:lv,selectChild:pv,selectChildren:mv,filter:yv,data:Cv,enter:xv,exit:Sv,join:Tv,merge:Mv,selection:$1,order:Lv,sort:Av,call:Ev,nodes:$v,node:Fv,size:Pv,empty:Rv,each:Dv,attr:jv,style:Yv,property:Kv,classed:e1,text:n1,html:c1,raise:u1,lower:d1,append:f1,insert:m1,remove:x1,clone:_1,datum:w1,on:M1,dispatch:B1,[Symbol.iterator]:E1};function Mt(e){return typeof e=="string"?new Ne([[document.querySelector(e)]],[document.documentElement]):new Ne([[e]],Gd)}function ec(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Xd(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function dn(){}var tn=.7,fs=1/tn,qi="\\s*([+-]?\\d+)\\s*",en="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",F1=/^#([0-9a-f]{3,8})$/,P1=new RegExp(`^rgb\\(${qi},${qi},${qi}\\)$`),R1=new RegExp(`^rgb\\(${sr},${sr},${sr}\\)$`),D1=new RegExp(`^rgba\\(${qi},${qi},${qi},${en}\\)$`),O1=new RegExp(`^rgba\\(${sr},${sr},${sr},${en}\\)$`),I1=new RegExp(`^hsl\\(${en},${sr},${sr}\\)$`),N1=new RegExp(`^hsla\\(${en},${sr},${sr},${en}\\)$`),gh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ec(dn,rn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:mh,formatHex:mh,formatHex8:q1,formatHsl:z1,formatRgb:yh,toString:yh});function mh(){return this.rgb().formatHex()}function q1(){return this.rgb().formatHex8()}function z1(){return Zd(this).formatHsl()}function yh(){return this.rgb().formatRgb()}function rn(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=F1.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?xh(t):r===3?new Ee(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?$n(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?$n(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=P1.exec(e))?new Ee(t[1],t[2],t[3],1):(t=R1.exec(e))?new Ee(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=D1.exec(e))?$n(t[1],t[2],t[3],t[4]):(t=O1.exec(e))?$n(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=I1.exec(e))?_h(t[1],t[2]/100,t[3]/100,1):(t=N1.exec(e))?_h(t[1],t[2]/100,t[3]/100,t[4]):gh.hasOwnProperty(e)?xh(gh[e]):e==="transparent"?new Ee(NaN,NaN,NaN,0):null}function xh(e){return new Ee(e>>16&255,e>>8&255,e&255,1)}function $n(e,t,r,i){return i<=0&&(e=t=r=NaN),new Ee(e,t,r,i)}function W1(e){return e instanceof dn||(e=rn(e)),e?(e=e.rgb(),new Ee(e.r,e.g,e.b,e.opacity)):new Ee}function hl(e,t,r,i){return arguments.length===1?W1(e):new Ee(e,t,r,i??1)}function Ee(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}ec(Ee,hl,Xd(dn,{brighter(e){return e=e==null?fs:Math.pow(fs,e),new Ee(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tn:Math.pow(tn,e),new Ee(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ee(li(this.r),li(this.g),li(this.b),gs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bh,formatHex:bh,formatHex8:j1,formatRgb:vh,toString:vh}));function bh(){return`#${si(this.r)}${si(this.g)}${si(this.b)}`}function j1(){return`#${si(this.r)}${si(this.g)}${si(this.b)}${si((isNaN(this.opacity)?1:this.opacity)*255)}`}function vh(){const e=gs(this.opacity);return`${e===1?"rgb(":"rgba("}${li(this.r)}, ${li(this.g)}, ${li(this.b)}${e===1?")":`, ${e})`}`}function gs(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function li(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function si(e){return e=li(e),(e<16?"0":"")+e.toString(16)}function _h(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ye(e,t,r,i)}function Zd(e){if(e instanceof Ye)return new Ye(e.h,e.s,e.l,e.opacity);if(e instanceof dn||(e=rn(e)),!e)return new Ye;if(e instanceof Ye)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,a=Math.min(t,r,i),n=Math.max(t,r,i),o=NaN,s=n-a,l=(n+a)/2;return s?(t===n?o=(r-i)/s+(r<i)*6:r===n?o=(i-t)/s+2:o=(t-r)/s+4,s/=l<.5?n+a:2-n-a,o*=60):s=l>0&&l<1?0:o,new Ye(o,s,l,e.opacity)}function H1(e,t,r,i){return arguments.length===1?Zd(e):new Ye(e,t,r,i??1)}function Ye(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}ec(Ye,H1,Xd(dn,{brighter(e){return e=e==null?fs:Math.pow(fs,e),new Ye(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tn:Math.pow(tn,e),new Ye(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,a=2*r-i;return new Ee(To(e>=240?e-240:e+120,a,i),To(e,a,i),To(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new Ye(wh(this.h),Fn(this.s),Fn(this.l),gs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gs(this.opacity);return`${e===1?"hsl(":"hsla("}${wh(this.h)}, ${Fn(this.s)*100}%, ${Fn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wh(e){return e=(e||0)%360,e<0?e+360:e}function Fn(e){return Math.max(0,Math.min(1,e||0))}function To(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const rc=e=>()=>e;function Kd(e,t){return function(r){return e+r*t}}function V1(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function eE(e,t){var r=t-e;return r?Kd(e,r>180||r<-180?r-360*Math.round(r/360):r):rc(isNaN(e)?t:e)}function U1(e){return(e=+e)==1?Qd:function(t,r){return r-t?V1(t,r,e):rc(isNaN(t)?r:t)}}function Qd(e,t){var r=t-e;return r?Kd(e,r):rc(isNaN(e)?t:e)}const Ch=function e(t){var r=U1(t);function i(a,n){var o=r((a=hl(a)).r,(n=hl(n)).r),s=r(a.g,n.g),l=r(a.b,n.b),c=Qd(a.opacity,n.opacity);return function(h){return a.r=o(h),a.g=s(h),a.b=l(h),a.opacity=c(h),a+""}}return i.gamma=e,i}(1);function $r(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var ul=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mo=new RegExp(ul.source,"g");function Y1(e){return function(){return e}}function G1(e){return function(t){return e(t)+""}}function X1(e,t){var r=ul.lastIndex=Mo.lastIndex=0,i,a,n,o=-1,s=[],l=[];for(e=e+"",t=t+"";(i=ul.exec(e))&&(a=Mo.exec(t));)(n=a.index)>r&&(n=t.slice(r,n),s[o]?s[o]+=n:s[++o]=n),(i=i[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:$r(i,a)})),r=Mo.lastIndex;return r<t.length&&(n=t.slice(r),s[o]?s[o]+=n:s[++o]=n),s.length<2?l[0]?G1(l[0].x):Y1(t):(t=l.length,function(c){for(var h=0,u;h<t;++h)s[(u=l[h]).i]=u.x(c);return s.join("")})}var kh=180/Math.PI,pl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Jd(e,t,r,i,a,n){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*r+t*i)&&(r-=e*l,i-=t*l),(s=Math.sqrt(r*r+i*i))&&(r/=s,i/=s,l/=s),e*i<t*r&&(e=-e,t=-t,l=-l,o=-o),{translateX:a,translateY:n,rotate:Math.atan2(t,e)*kh,skewX:Math.atan(l)*kh,scaleX:o,scaleY:s}}var Pn;function Z1(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?pl:Jd(t.a,t.b,t.c,t.d,t.e,t.f)}function K1(e){return e==null||(Pn||(Pn=document.createElementNS("http://www.w3.org/2000/svg","g")),Pn.setAttribute("transform",e),!(e=Pn.transform.baseVal.consolidate()))?pl:(e=e.matrix,Jd(e.a,e.b,e.c,e.d,e.e,e.f))}function tf(e,t,r,i){function a(c){return c.length?c.pop()+" ":""}function n(c,h,u,d,p,g){if(c!==u||h!==d){var m=p.push("translate(",null,t,null,r);g.push({i:m-4,x:$r(c,u)},{i:m-2,x:$r(h,d)})}else(u||d)&&p.push("translate("+u+t+d+r)}function o(c,h,u,d){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),d.push({i:u.push(a(u)+"rotate(",null,i)-2,x:$r(c,h)})):h&&u.push(a(u)+"rotate("+h+i)}function s(c,h,u,d){c!==h?d.push({i:u.push(a(u)+"skewX(",null,i)-2,x:$r(c,h)}):h&&u.push(a(u)+"skewX("+h+i)}function l(c,h,u,d,p,g){if(c!==u||h!==d){var m=p.push(a(p)+"scale(",null,",",null,")");g.push({i:m-4,x:$r(c,u)},{i:m-2,x:$r(h,d)})}else(u!==1||d!==1)&&p.push(a(p)+"scale("+u+","+d+")")}return function(c,h){var u=[],d=[];return c=e(c),h=e(h),n(c.translateX,c.translateY,h.translateX,h.translateY,u,d),o(c.rotate,h.rotate,u,d),s(c.skewX,h.skewX,u,d),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,u,d),c=h=null,function(p){for(var g=-1,m=d.length,y;++g<m;)u[(y=d[g]).i]=y.x(p);return u.join("")}}}var Q1=tf(Z1,"px, ","px)","deg)"),J1=tf(K1,", ",")",")"),ia=0,Na=0,Ba=0,ef=1e3,ms,qa,ys=0,di=0,Us=0,an=typeof performance=="object"&&performance.now?performance:Date,rf=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ic(){return di||(rf(t_),di=an.now()+Us)}function t_(){di=0}function xs(){this._call=this._time=this._next=null}xs.prototype=af.prototype={constructor:xs,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?ic():+r)+(t==null?0:+t),!this._next&&qa!==this&&(qa?qa._next=this:ms=this,qa=this),this._call=e,this._time=r,dl()},stop:function(){this._call&&(this._call=null,this._time=1/0,dl())}};function af(e,t,r){var i=new xs;return i.restart(e,t,r),i}function e_(){ic(),++ia;for(var e=ms,t;e;)(t=di-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ia}function Sh(){di=(ys=an.now())+Us,ia=Na=0;try{e_()}finally{ia=0,i_(),di=0}}function r_(){var e=an.now(),t=e-ys;t>ef&&(Us-=t,ys=e)}function i_(){for(var e,t=ms,r,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:ms=r);qa=e,dl(i)}function dl(e){if(!ia){Na&&(Na=clearTimeout(Na));var t=e-di;t>24?(e<1/0&&(Na=setTimeout(Sh,e-an.now()-Us)),Ba&&(Ba=clearInterval(Ba))):(Ba||(ys=an.now(),Ba=setInterval(r_,ef)),ia=1,rf(Sh))}}function Th(e,t,r){var i=new xs;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,r),i}var a_=Dd("start","end","cancel","interrupt"),n_=[],nf=0,Mh=1,fl=2,Gn=3,Lh=4,gl=5,Xn=6;function Ys(e,t,r,i,a,n){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;s_(e,r,{name:t,index:i,group:a,on:a_,tween:n_,time:n.time,delay:n.delay,duration:n.duration,ease:n.ease,timer:null,state:nf})}function ac(e,t){var r=Ze(e,t);if(r.state>nf)throw new Error("too late; already scheduled");return r}function cr(e,t){var r=Ze(e,t);if(r.state>Gn)throw new Error("too late; already running");return r}function Ze(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function s_(e,t,r){var i=e.__transition,a;i[t]=r,r.timer=af(n,0,r.time);function n(c){r.state=Mh,r.timer.restart(o,r.delay,r.time),r.delay<=c&&o(c-r.delay)}function o(c){var h,u,d,p;if(r.state!==Mh)return l();for(h in i)if(p=i[h],p.name===r.name){if(p.state===Gn)return Th(o);p.state===Lh?(p.state=Xn,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[h]):+h<t&&(p.state=Xn,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[h])}if(Th(function(){r.state===Gn&&(r.state=Lh,r.timer.restart(s,r.delay,r.time),s(c))}),r.state=fl,r.on.call("start",e,e.__data__,r.index,r.group),r.state===fl){for(r.state=Gn,a=new Array(d=r.tween.length),h=0,u=-1;h<d;++h)(p=r.tween[h].value.call(e,e.__data__,r.index,r.group))&&(a[++u]=p);a.length=u+1}}function s(c){for(var h=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(l),r.state=gl,1),u=-1,d=a.length;++u<d;)a[u].call(e,h);r.state===gl&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=Xn,r.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function o_(e,t){var r=e.__transition,i,a,n=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((i=r[o]).name!==t){n=!1;continue}a=i.state>fl&&i.state<gl,i.state=Xn,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[o]}n&&delete e.__transition}}function l_(e){return this.each(function(){o_(this,e)})}function c_(e,t){var r,i;return function(){var a=cr(this,e),n=a.tween;if(n!==r){i=r=n;for(var o=0,s=i.length;o<s;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}a.tween=i}}function h_(e,t,r){var i,a;if(typeof r!="function")throw new Error;return function(){var n=cr(this,e),o=n.tween;if(o!==i){a=(i=o).slice();for(var s={name:t,value:r},l=0,c=a.length;l<c;++l)if(a[l].name===t){a[l]=s;break}l===c&&a.push(s)}n.tween=a}}function u_(e,t){var r=this._id;if(e+="",arguments.length<2){for(var i=Ze(this.node(),r).tween,a=0,n=i.length,o;a<n;++a)if((o=i[a]).name===e)return o.value;return null}return this.each((t==null?c_:h_)(r,e,t))}function nc(e,t,r){var i=e._id;return e.each(function(){var a=cr(this,i);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Ze(a,i).value[t]}}function sf(e,t){var r;return(typeof t=="number"?$r:t instanceof rn?Ch:(r=rn(t))?(t=r,Ch):X1)(e,t)}function p_(e){return function(){this.removeAttribute(e)}}function d_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function f_(e,t,r){var i,a=r+"",n;return function(){var o=this.getAttribute(e);return o===a?null:o===i?n:n=t(i=o,r)}}function g_(e,t,r){var i,a=r+"",n;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===i?n:n=t(i=o,r)}}function m_(e,t,r){var i,a,n;return function(){var o,s=r(this),l;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=s+"",o===l?null:o===i&&l===a?n:(a=l,n=t(i=o,s)))}}function y_(e,t,r){var i,a,n;return function(){var o,s=r(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=s+"",o===l?null:o===i&&l===a?n:(a=l,n=t(i=o,s)))}}function x_(e,t){var r=Vs(e),i=r==="transform"?J1:sf;return this.attrTween(e,typeof t=="function"?(r.local?y_:m_)(r,i,nc(this,"attr."+e,t)):t==null?(r.local?d_:p_)(r):(r.local?g_:f_)(r,i,t))}function b_(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function v_(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function __(e,t){var r,i;function a(){var n=t.apply(this,arguments);return n!==i&&(r=(i=n)&&v_(e,n)),r}return a._value=t,a}function w_(e,t){var r,i;function a(){var n=t.apply(this,arguments);return n!==i&&(r=(i=n)&&b_(e,n)),r}return a._value=t,a}function C_(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var i=Vs(e);return this.tween(r,(i.local?__:w_)(i,t))}function k_(e,t){return function(){ac(this,e).delay=+t.apply(this,arguments)}}function S_(e,t){return t=+t,function(){ac(this,e).delay=t}}function T_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?k_:S_)(t,e)):Ze(this.node(),t).delay}function M_(e,t){return function(){cr(this,e).duration=+t.apply(this,arguments)}}function L_(e,t){return t=+t,function(){cr(this,e).duration=t}}function A_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?M_:L_)(t,e)):Ze(this.node(),t).duration}function B_(e,t){if(typeof t!="function")throw new Error;return function(){cr(this,e).ease=t}}function E_(e){var t=this._id;return arguments.length?this.each(B_(t,e)):Ze(this.node(),t).ease}function $_(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;cr(this,e).ease=r}}function F_(e){if(typeof e!="function")throw new Error;return this.each($_(this._id,e))}function P_(e){typeof e!="function"&&(e=Nd(e));for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a)for(var n=t[a],o=n.length,s=i[a]=[],l,c=0;c<o;++c)(l=n[c])&&e.call(l,l.__data__,c,n)&&s.push(l);return new kr(i,this._parents,this._name,this._id)}function R_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,i=t.length,a=r.length,n=Math.min(i,a),o=new Array(i),s=0;s<n;++s)for(var l=t[s],c=r[s],h=l.length,u=o[s]=new Array(h),d,p=0;p<h;++p)(d=l[p]||c[p])&&(u[p]=d);for(;s<i;++s)o[s]=t[s];return new kr(o,this._parents,this._name,this._id)}function D_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function O_(e,t,r){var i,a,n=D_(t)?ac:cr;return function(){var o=n(this,e),s=o.on;s!==i&&(a=(i=s).copy()).on(t,r),o.on=a}}function I_(e,t){var r=this._id;return arguments.length<2?Ze(this.node(),r).on.on(e):this.each(O_(r,e,t))}function N_(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function q_(){return this.on("end.remove",N_(this._id))}function z_(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Jl(e));for(var i=this._groups,a=i.length,n=new Array(a),o=0;o<a;++o)for(var s=i[o],l=s.length,c=n[o]=new Array(l),h,u,d=0;d<l;++d)(h=s[d])&&(u=e.call(h,h.__data__,d,s))&&("__data__"in h&&(u.__data__=h.__data__),c[d]=u,Ys(c[d],t,r,d,c,Ze(h,r)));return new kr(n,this._parents,t,r)}function W_(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Id(e));for(var i=this._groups,a=i.length,n=[],o=[],s=0;s<a;++s)for(var l=i[s],c=l.length,h,u=0;u<c;++u)if(h=l[u]){for(var d=e.call(h,h.__data__,u,l),p,g=Ze(h,r),m=0,y=d.length;m<y;++m)(p=d[m])&&Ys(p,t,r,m,d,g);n.push(d),o.push(h)}return new kr(n,o,t,r)}var j_=pn.prototype.constructor;function H_(){return new j_(this._groups,this._parents)}function V_(e,t){var r,i,a;return function(){var n=ra(this,e),o=(this.style.removeProperty(e),ra(this,e));return n===o?null:n===r&&o===i?a:a=t(r=n,i=o)}}function of(e){return function(){this.style.removeProperty(e)}}function U_(e,t,r){var i,a=r+"",n;return function(){var o=ra(this,e);return o===a?null:o===i?n:n=t(i=o,r)}}function Y_(e,t,r){var i,a,n;return function(){var o=ra(this,e),s=r(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),ra(this,e))),o===l?null:o===i&&l===a?n:(a=l,n=t(i=o,s))}}function G_(e,t){var r,i,a,n="style."+t,o="end."+n,s;return function(){var l=cr(this,e),c=l.on,h=l.value[n]==null?s||(s=of(t)):void 0;(c!==r||a!==h)&&(i=(r=c).copy()).on(o,a=h),l.on=i}}function X_(e,t,r){var i=(e+="")=="transform"?Q1:sf;return t==null?this.styleTween(e,V_(e,i)).on("end.style."+e,of(e)):typeof t=="function"?this.styleTween(e,Y_(e,i,nc(this,"style."+e,t))).each(G_(this._id,e)):this.styleTween(e,U_(e,i,t),r).on("end.style."+e,null)}function Z_(e,t,r){return function(i){this.style.setProperty(e,t.call(this,i),r)}}function K_(e,t,r){var i,a;function n(){var o=t.apply(this,arguments);return o!==a&&(i=(a=o)&&Z_(e,o,r)),i}return n._value=t,n}function Q_(e,t,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,K_(e,t,r??""))}function J_(e){return function(){this.textContent=e}}function t2(e){return function(){var t=e(this);this.textContent=t??""}}function e2(e){return this.tween("text",typeof e=="function"?t2(nc(this,"text",e)):J_(e==null?"":e+""))}function r2(e){return function(t){this.textContent=e.call(this,t)}}function i2(e){var t,r;function i(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&r2(a)),t}return i._value=e,i}function a2(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,i2(e))}function n2(){for(var e=this._name,t=this._id,r=lf(),i=this._groups,a=i.length,n=0;n<a;++n)for(var o=i[n],s=o.length,l,c=0;c<s;++c)if(l=o[c]){var h=Ze(l,t);Ys(l,e,r,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new kr(i,this._parents,e,r)}function s2(){var e,t,r=this,i=r._id,a=r.size();return new Promise(function(n,o){var s={value:o},l={value:function(){--a===0&&n()}};r.each(function(){var c=cr(this,i),h=c.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),a===0&&n()})}var o2=0;function kr(e,t,r,i){this._groups=e,this._parents=t,this._name=r,this._id=i}function lf(){return++o2}var mr=pn.prototype;kr.prototype={constructor:kr,select:z_,selectAll:W_,selectChild:mr.selectChild,selectChildren:mr.selectChildren,filter:P_,merge:R_,selection:H_,transition:n2,call:mr.call,nodes:mr.nodes,node:mr.node,size:mr.size,empty:mr.empty,each:mr.each,on:I_,attr:x_,attrTween:C_,style:X_,styleTween:Q_,text:e2,textTween:a2,remove:q_,tween:u_,delay:T_,duration:A_,ease:E_,easeVarying:F_,end:s2,[Symbol.iterator]:mr[Symbol.iterator]};function l2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var c2={time:null,delay:0,duration:250,ease:l2};function h2(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function u2(e){var t,r;e instanceof kr?(t=e._id,e=e._name):(t=lf(),(r=c2).time=ic(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,n=0;n<a;++n)for(var o=i[n],s=o.length,l,c=0;c<s;++c)(l=o[c])&&Ys(l,e,t,c,o,r||h2(l,t));return new kr(i,this._parents,e,t)}pn.prototype.interrupt=l_;pn.prototype.transition=u2;const ml=Math.PI,yl=2*ml,ti=1e-6,p2=yl-ti;function cf(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function d2(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return cf;const r=10**t;return function(i){this._+=i[0];for(let a=1,n=i.length;a<n;++a)this._+=Math.round(arguments[a]*r)/r+i[a]}}class f2{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?cf:d2(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,i,a){this._append`Q${+t},${+r},${this._x1=+i},${this._y1=+a}`}bezierCurveTo(t,r,i,a,n,o){this._append`C${+t},${+r},${+i},${+a},${this._x1=+n},${this._y1=+o}`}arcTo(t,r,i,a,n){if(t=+t,r=+r,i=+i,a=+a,n=+n,n<0)throw new Error(`negative radius: ${n}`);let o=this._x1,s=this._y1,l=i-t,c=a-r,h=o-t,u=s-r,d=h*h+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(d>ti)if(!(Math.abs(u*l-c*h)>ti)||!n)this._append`L${this._x1=t},${this._y1=r}`;else{let p=i-o,g=a-s,m=l*l+c*c,y=p*p+g*g,x=Math.sqrt(m),b=Math.sqrt(d),_=n*Math.tan((ml-Math.acos((m+d-y)/(2*x*b)))/2),T=_/b,S=_/x;Math.abs(T-1)>ti&&this._append`L${t+T*h},${r+T*u}`,this._append`A${n},${n},0,0,${+(u*p>h*g)},${this._x1=t+S*l},${this._y1=r+S*c}`}}arc(t,r,i,a,n,o){if(t=+t,r=+r,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let s=i*Math.cos(a),l=i*Math.sin(a),c=t+s,h=r+l,u=1^o,d=o?a-n:n-a;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>ti||Math.abs(this._y1-h)>ti)&&this._append`L${c},${h}`,i&&(d<0&&(d=d%yl+yl),d>p2?this._append`A${i},${i},0,1,${u},${t-s},${r-l}A${i},${i},0,1,${u},${this._x1=c},${this._y1=h}`:d>ti&&this._append`A${i},${i},0,${+(d>=ml)},${u},${this._x1=t+i*Math.cos(n)},${this._y1=r+i*Math.sin(n)}`)}rect(t,r,i,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${i=+i}v${+a}h${-i}Z`}toString(){return this._}}function Pi(e){return function(){return e}}const rE=Math.abs,iE=Math.atan2,aE=Math.cos,nE=Math.max,sE=Math.min,oE=Math.sin,lE=Math.sqrt,Ah=1e-12,sc=Math.PI,Bh=sc/2,cE=2*sc;function hE(e){return e>1?0:e<-1?sc:Math.acos(e)}function uE(e){return e>=1?Bh:e<=-1?-Bh:Math.asin(e)}function g2(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const i=Math.floor(r);if(!(i>=0))throw new RangeError(`invalid digits: ${r}`);t=i}return e},()=>new f2(t)}function m2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hf(e){this._context=e}hf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function bs(e){return new hf(e)}function y2(e){return e[0]}function x2(e){return e[1]}function b2(e,t){var r=Pi(!0),i=null,a=bs,n=null,o=g2(s);e=typeof e=="function"?e:e===void 0?y2:Pi(e),t=typeof t=="function"?t:t===void 0?x2:Pi(t);function s(l){var c,h=(l=m2(l)).length,u,d=!1,p;for(i==null&&(n=a(p=o())),c=0;c<=h;++c)!(c<h&&r(u=l[c],c,l))===d&&((d=!d)?n.lineStart():n.lineEnd()),d&&n.point(+e(u,c,l),+t(u,c,l));if(p)return n=null,p+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Pi(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Pi(+l),s):t},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Pi(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,i!=null&&(n=a(i)),s):a},s.context=function(l){return arguments.length?(l==null?i=n=null:n=a(i=l),s):i},s}class uf{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function pf(e){return new uf(e,!0)}function df(e){return new uf(e,!1)}function Dr(){}function vs(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Gs(e){this._context=e}Gs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vs(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vs(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zn(e){return new Gs(e)}function ff(e){this._context=e}ff.prototype={areaStart:Dr,areaEnd:Dr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:vs(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v2(e){return new ff(e)}function gf(e){this._context=e}gf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:vs(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _2(e){return new gf(e)}function mf(e,t){this._basis=new Gs(e),this._beta=t}mf.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var i=e[0],a=t[0],n=e[r]-i,o=t[r]-a,s=-1,l;++s<=r;)l=s/r,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+l*n),this._beta*t[s]+(1-this._beta)*(a+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const w2=function e(t){function r(i){return t===1?new Gs(i):new mf(i,t)}return r.beta=function(i){return e(+i)},r}(.85);function _s(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function oc(e,t){this._context=e,this._k=(1-t)/6}oc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_s(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:_s(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const yf=function e(t){function r(i){return new oc(i,t)}return r.tension=function(i){return e(+i)},r}(0);function lc(e,t){this._context=e,this._k=(1-t)/6}lc.prototype={areaStart:Dr,areaEnd:Dr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:_s(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const C2=function e(t){function r(i){return new lc(i,t)}return r.tension=function(i){return e(+i)},r}(0);function cc(e,t){this._context=e,this._k=(1-t)/6}cc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_s(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const k2=function e(t){function r(i){return new cc(i,t)}return r.tension=function(i){return e(+i)},r}(0);function hc(e,t,r){var i=e._x1,a=e._y1,n=e._x2,o=e._y2;if(e._l01_a>Ah){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,a=(a*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Ah){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);n=(n*c+e._x1*e._l23_2a-t*e._l12_2a)/h,o=(o*c+e._y1*e._l23_2a-r*e._l12_2a)/h}e._context.bezierCurveTo(i,a,n,o,e._x2,e._y2)}function xf(e,t){this._context=e,this._alpha=t}xf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:hc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const bf=function e(t){function r(i){return t?new xf(i,t):new oc(i,0)}return r.alpha=function(i){return e(+i)},r}(.5);function vf(e,t){this._context=e,this._alpha=t}vf.prototype={areaStart:Dr,areaEnd:Dr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:hc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const S2=function e(t){function r(i){return t?new vf(i,t):new lc(i,0)}return r.alpha=function(i){return e(+i)},r}(.5);function _f(e,t){this._context=e,this._alpha=t}_f.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const T2=function e(t){function r(i){return t?new _f(i,t):new cc(i,0)}return r.alpha=function(i){return e(+i)},r}(.5);function wf(e){this._context=e}wf.prototype={areaStart:Dr,areaEnd:Dr,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function M2(e){return new wf(e)}function Eh(e){return e<0?-1:1}function $h(e,t,r){var i=e._x1-e._x0,a=t-e._x1,n=(e._y1-e._y0)/(i||a<0&&-0),o=(r-e._y1)/(a||i<0&&-0),s=(n*a+o*i)/(i+a);return(Eh(n)+Eh(o))*Math.min(Math.abs(n),Math.abs(o),.5*Math.abs(s))||0}function Fh(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Lo(e,t,r){var i=e._x0,a=e._y0,n=e._x1,o=e._y1,s=(n-i)/3;e._context.bezierCurveTo(i+s,a+s*t,n-s,o-s*r,n,o)}function ws(e){this._context=e}ws.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lo(this,this._t0,Fh(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Lo(this,Fh(this,r=$h(this,e,t)),r);break;default:Lo(this,this._t0,r=$h(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Cf(e){this._context=new kf(e)}(Cf.prototype=Object.create(ws.prototype)).point=function(e,t){ws.prototype.point.call(this,t,e)};function kf(e){this._context=e}kf.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,i,a,n){this._context.bezierCurveTo(t,e,i,r,n,a)}};function Sf(e){return new ws(e)}function Tf(e){return new Cf(e)}function Mf(e){this._context=e}Mf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var i=Ph(e),a=Ph(t),n=0,o=1;o<r;++n,++o)this._context.bezierCurveTo(i[0][n],a[0][n],i[1][n],a[1][n],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ph(e){var t,r=e.length-1,i,a=new Array(r),n=new Array(r),o=new Array(r);for(a[0]=0,n[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,n[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,n[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)i=a[t]/n[t-1],n[t]-=i,o[t]-=i*o[t-1];for(a[r-1]=o[r-1]/n[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/n[t];for(n[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)n[t]=2*e[t+1]-a[t+1];return[a,n]}function Lf(e){return new Mf(e)}function Xs(e,t){this._context=e,this._t=t}Xs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Af(e){return new Xs(e,.5)}function Bf(e){return new Xs(e,0)}function Ef(e){return new Xs(e,1)}function za(e,t,r){this.k=e,this.x=t,this.y=r}za.prototype={constructor:za,scale:function(e){return e===1?this:new za(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new za(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};za.prototype;var $f=typeof global=="object"&&global&&global.Object===Object&&global,L2=typeof self=="object"&&self&&self.Object===Object&&self,hr=$f||L2||Function("return this")(),Cs=hr.Symbol,Ff=Object.prototype,A2=Ff.hasOwnProperty,B2=Ff.toString,Ea=Cs?Cs.toStringTag:void 0;function E2(e){var t=A2.call(e,Ea),r=e[Ea];try{e[Ea]=void 0;var i=!0}catch{}var a=B2.call(e);return i&&(t?e[Ea]=r:delete e[Ea]),a}var $2=Object.prototype,F2=$2.toString;function P2(e){return F2.call(e)}var R2="[object Null]",D2="[object Undefined]",Rh=Cs?Cs.toStringTag:void 0;function la(e){return e==null?e===void 0?D2:R2:Rh&&Rh in Object(e)?E2(e):P2(e)}function yi(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var O2="[object AsyncFunction]",I2="[object Function]",N2="[object GeneratorFunction]",q2="[object Proxy]";function uc(e){if(!yi(e))return!1;var t=la(e);return t==I2||t==N2||t==O2||t==q2}var Ao=hr["__core-js_shared__"],Dh=function(){var e=/[^.]+$/.exec(Ao&&Ao.keys&&Ao.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function z2(e){return!!Dh&&Dh in e}var W2=Function.prototype,j2=W2.toString;function xi(e){if(e!=null){try{return j2.call(e)}catch{}try{return e+""}catch{}}return""}var H2=/[\\^$.*+?()[\]{}|]/g,V2=/^\[object .+?Constructor\]$/,U2=Function.prototype,Y2=Object.prototype,G2=U2.toString,X2=Y2.hasOwnProperty,Z2=RegExp("^"+G2.call(X2).replace(H2,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function K2(e){if(!yi(e)||z2(e))return!1;var t=uc(e)?Z2:V2;return t.test(xi(e))}function Q2(e,t){return e==null?void 0:e[t]}function bi(e,t){var r=Q2(e,t);return K2(r)?r:void 0}var nn=bi(Object,"create");function J2(){this.__data__=nn?nn(null):{},this.size=0}function tw(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ew="__lodash_hash_undefined__",rw=Object.prototype,iw=rw.hasOwnProperty;function aw(e){var t=this.__data__;if(nn){var r=t[e];return r===ew?void 0:r}return iw.call(t,e)?t[e]:void 0}var nw=Object.prototype,sw=nw.hasOwnProperty;function ow(e){var t=this.__data__;return nn?t[e]!==void 0:sw.call(t,e)}var lw="__lodash_hash_undefined__";function cw(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nn&&t===void 0?lw:t,this}function fi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}fi.prototype.clear=J2;fi.prototype.delete=tw;fi.prototype.get=aw;fi.prototype.has=ow;fi.prototype.set=cw;function hw(){this.__data__=[],this.size=0}function Zs(e,t){return e===t||e!==e&&t!==t}function Ks(e,t){for(var r=e.length;r--;)if(Zs(e[r][0],t))return r;return-1}var uw=Array.prototype,pw=uw.splice;function dw(e){var t=this.__data__,r=Ks(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():pw.call(t,r,1),--this.size,!0}function fw(e){var t=this.__data__,r=Ks(t,e);return r<0?void 0:t[r][1]}function gw(e){return Ks(this.__data__,e)>-1}function mw(e,t){var r=this.__data__,i=Ks(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}function Tr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Tr.prototype.clear=hw;Tr.prototype.delete=dw;Tr.prototype.get=fw;Tr.prototype.has=gw;Tr.prototype.set=mw;var sn=bi(hr,"Map");function yw(){this.size=0,this.__data__={hash:new fi,map:new(sn||Tr),string:new fi}}function xw(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Qs(e,t){var r=e.__data__;return xw(t)?r[typeof t=="string"?"string":"hash"]:r.map}function bw(e){var t=Qs(this,e).delete(e);return this.size-=t?1:0,t}function vw(e){return Qs(this,e).get(e)}function _w(e){return Qs(this,e).has(e)}function ww(e,t){var r=Qs(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}function Nr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Nr.prototype.clear=yw;Nr.prototype.delete=bw;Nr.prototype.get=vw;Nr.prototype.has=_w;Nr.prototype.set=ww;var Cw="Expected a function";function fn(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Cw);var r=function(){var i=arguments,a=t?t.apply(this,i):i[0],n=r.cache;if(n.has(a))return n.get(a);var o=e.apply(this,i);return r.cache=n.set(a,o)||n,o};return r.cache=new(fn.Cache||Nr),r}fn.Cache=Nr;function kw(){this.__data__=new Tr,this.size=0}function Sw(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Tw(e){return this.__data__.get(e)}function Mw(e){return this.__data__.has(e)}var Lw=200;function Aw(e,t){var r=this.__data__;if(r instanceof Tr){var i=r.__data__;if(!sn||i.length<Lw-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Nr(i)}return r.set(e,t),this.size=r.size,this}function ca(e){var t=this.__data__=new Tr(e);this.size=t.size}ca.prototype.clear=kw;ca.prototype.delete=Sw;ca.prototype.get=Tw;ca.prototype.has=Mw;ca.prototype.set=Aw;var ks=function(){try{var e=bi(Object,"defineProperty");return e({},"",{}),e}catch{}}();function pc(e,t,r){t=="__proto__"&&ks?ks(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function xl(e,t,r){(r!==void 0&&!Zs(e[t],r)||r===void 0&&!(t in e))&&pc(e,t,r)}function Bw(e){return function(t,r,i){for(var a=-1,n=Object(t),o=i(t),s=o.length;s--;){var l=o[++a];if(r(n[l],l,n)===!1)break}return t}}var Ew=Bw(),Pf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Oh=Pf&&typeof module=="object"&&module&&!module.nodeType&&module,$w=Oh&&Oh.exports===Pf,Ih=$w?hr.Buffer:void 0,Nh=Ih?Ih.allocUnsafe:void 0;function Fw(e,t){if(t)return e.slice();var r=e.length,i=Nh?Nh(r):new e.constructor(r);return e.copy(i),i}var qh=hr.Uint8Array;function Pw(e){var t=new e.constructor(e.byteLength);return new qh(t).set(new qh(e)),t}function Rw(e,t){var r=t?Pw(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Dw(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var zh=Object.create,Ow=function(){function e(){}return function(t){if(!yi(t))return{};if(zh)return zh(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Rf(e,t){return function(r){return e(t(r))}}var Df=Rf(Object.getPrototypeOf,Object),Iw=Object.prototype;function Js(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Iw;return e===r}function Nw(e){return typeof e.constructor=="function"&&!Js(e)?Ow(Df(e)):{}}function gn(e){return e!=null&&typeof e=="object"}var qw="[object Arguments]";function Wh(e){return gn(e)&&la(e)==qw}var Of=Object.prototype,zw=Of.hasOwnProperty,Ww=Of.propertyIsEnumerable,Ss=Wh(function(){return arguments}())?Wh:function(e){return gn(e)&&zw.call(e,"callee")&&!Ww.call(e,"callee")},Ts=Array.isArray,jw=9007199254740991;function If(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=jw}function to(e){return e!=null&&If(e.length)&&!uc(e)}function Hw(e){return gn(e)&&to(e)}function Vw(){return!1}var Nf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jh=Nf&&typeof module=="object"&&module&&!module.nodeType&&module,Uw=jh&&jh.exports===Nf,Hh=Uw?hr.Buffer:void 0,Yw=Hh?Hh.isBuffer:void 0,dc=Yw||Vw,Gw="[object Object]",Xw=Function.prototype,Zw=Object.prototype,qf=Xw.toString,Kw=Zw.hasOwnProperty,Qw=qf.call(Object);function Jw(e){if(!gn(e)||la(e)!=Gw)return!1;var t=Df(e);if(t===null)return!0;var r=Kw.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&qf.call(r)==Qw}var tC="[object Arguments]",eC="[object Array]",rC="[object Boolean]",iC="[object Date]",aC="[object Error]",nC="[object Function]",sC="[object Map]",oC="[object Number]",lC="[object Object]",cC="[object RegExp]",hC="[object Set]",uC="[object String]",pC="[object WeakMap]",dC="[object ArrayBuffer]",fC="[object DataView]",gC="[object Float32Array]",mC="[object Float64Array]",yC="[object Int8Array]",xC="[object Int16Array]",bC="[object Int32Array]",vC="[object Uint8Array]",_C="[object Uint8ClampedArray]",wC="[object Uint16Array]",CC="[object Uint32Array]",jt={};jt[gC]=jt[mC]=jt[yC]=jt[xC]=jt[bC]=jt[vC]=jt[_C]=jt[wC]=jt[CC]=!0;jt[tC]=jt[eC]=jt[dC]=jt[rC]=jt[fC]=jt[iC]=jt[aC]=jt[nC]=jt[sC]=jt[oC]=jt[lC]=jt[cC]=jt[hC]=jt[uC]=jt[pC]=!1;function kC(e){return gn(e)&&If(e.length)&&!!jt[la(e)]}function SC(e){return function(t){return e(t)}}var zf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ga=zf&&typeof module=="object"&&module&&!module.nodeType&&module,TC=Ga&&Ga.exports===zf,Bo=TC&&$f.process,Vh=function(){try{var e=Ga&&Ga.require&&Ga.require("util").types;return e||Bo&&Bo.binding&&Bo.binding("util")}catch{}}(),Uh=Vh&&Vh.isTypedArray,fc=Uh?SC(Uh):kC;function bl(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var MC=Object.prototype,LC=MC.hasOwnProperty;function AC(e,t,r){var i=e[t];(!(LC.call(e,t)&&Zs(i,r))||r===void 0&&!(t in e))&&pc(e,t,r)}function BC(e,t,r,i){var a=!r;r||(r={});for(var n=-1,o=t.length;++n<o;){var s=t[n],l=void 0;l===void 0&&(l=e[s]),a?pc(r,s,l):AC(r,s,l)}return r}function EC(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var $C=9007199254740991,FC=/^(?:0|[1-9]\d*)$/;function Wf(e,t){var r=typeof e;return t=t??$C,!!t&&(r=="number"||r!="symbol"&&FC.test(e))&&e>-1&&e%1==0&&e<t}var PC=Object.prototype,RC=PC.hasOwnProperty;function DC(e,t){var r=Ts(e),i=!r&&Ss(e),a=!r&&!i&&dc(e),n=!r&&!i&&!a&&fc(e),o=r||i||a||n,s=o?EC(e.length,String):[],l=s.length;for(var c in e)(t||RC.call(e,c))&&!(o&&(c=="length"||a&&(c=="offset"||c=="parent")||n&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Wf(c,l)))&&s.push(c);return s}function OC(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var IC=Object.prototype,NC=IC.hasOwnProperty;function qC(e){if(!yi(e))return OC(e);var t=Js(e),r=[];for(var i in e)i=="constructor"&&(t||!NC.call(e,i))||r.push(i);return r}function jf(e){return to(e)?DC(e,!0):qC(e)}function zC(e){return BC(e,jf(e))}function WC(e,t,r,i,a,n,o){var s=bl(e,r),l=bl(t,r),c=o.get(l);if(c){xl(e,r,c);return}var h=n?n(s,l,r+"",e,t,o):void 0,u=h===void 0;if(u){var d=Ts(l),p=!d&&dc(l),g=!d&&!p&&fc(l);h=l,d||p||g?Ts(s)?h=s:Hw(s)?h=Dw(s):p?(u=!1,h=Fw(l,!0)):g?(u=!1,h=Rw(l,!0)):h=[]:Jw(l)||Ss(l)?(h=s,Ss(s)?h=zC(s):(!yi(s)||uc(s))&&(h=Nw(l))):u=!1}u&&(o.set(l,h),a(h,l,i,n,o),o.delete(l)),xl(e,r,h)}function Hf(e,t,r,i,a){e!==t&&Ew(t,function(n,o){if(a||(a=new ca),yi(n))WC(e,t,o,r,Hf,i,a);else{var s=i?i(bl(e,o),n,o+"",e,t,a):void 0;s===void 0&&(s=n),xl(e,o,s)}},jf)}function Vf(e){return e}function jC(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Yh=Math.max;function HC(e,t,r){return t=Yh(t===void 0?e.length-1:t,0),function(){for(var i=arguments,a=-1,n=Yh(i.length-t,0),o=Array(n);++a<n;)o[a]=i[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=i[a];return s[t]=r(o),jC(e,this,s)}}function VC(e){return function(){return e}}var UC=ks?function(e,t){return ks(e,"toString",{configurable:!0,enumerable:!1,value:VC(t),writable:!0})}:Vf,YC=800,GC=16,XC=Date.now;function ZC(e){var t=0,r=0;return function(){var i=XC(),a=GC-(i-r);if(r=i,a>0){if(++t>=YC)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var KC=ZC(UC);function QC(e,t){return KC(HC(e,t,Vf),e+"")}function JC(e,t,r){if(!yi(r))return!1;var i=typeof t;return(i=="number"?to(r)&&Wf(t,r.length):i=="string"&&t in r)?Zs(r[t],e):!1}function tk(e){return QC(function(t,r){var i=-1,a=r.length,n=a>1?r[a-1]:void 0,o=a>2?r[2]:void 0;for(n=e.length>3&&typeof n=="function"?(a--,n):void 0,o&&JC(r[0],r[1],o)&&(n=a<3?void 0:n,a=1),t=Object(t);++i<a;){var s=r[i];s&&e(t,s,i,n)}return t})}var ek=tk(function(e,t,r){Hf(e,t,r)}),rk="",ik={curveBasis:Zn,curveBasisClosed:v2,curveBasisOpen:_2,curveBumpX:pf,curveBumpY:df,curveBundle:w2,curveCardinalClosed:C2,curveCardinalOpen:k2,curveCardinal:yf,curveCatmullRomClosed:S2,curveCatmullRomOpen:T2,curveCatmullRom:bf,curveLinear:bs,curveLinearClosed:M2,curveMonotoneX:Sf,curveMonotoneY:Tf,curveNatural:Lf,curveStep:Af,curveStepAfter:Ef,curveStepBefore:Bf},ak=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,nk=f(function(e,t){const r=Uf(e,/(?:init\b)|(?:initialize\b)/);let i={};if(Array.isArray(r)){const o=r.map(s=>s.args);is(o),i=pe(i,[...o])}else i=r.args;if(!i)return;let a=Nl(e,t);const n="config";return i[n]!==void 0&&(a==="flowchart-v2"&&(a="flowchart"),i[a]=i[n],delete i[n]),i},"detectInit"),Uf=f(function(e,t=null){var r,i;try{const a=new RegExp(`[%]{2}(?![{]${ak.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(a,"").replace(/'/gm,'"'),I.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let n;const o=[];for(;(n=Ua.exec(e))!==null;)if(n.index===Ua.lastIndex&&Ua.lastIndex++,n&&!t||t&&((r=n[1])!=null&&r.match(t))||t&&((i=n[2])!=null&&i.match(t))){const s=n[1]?n[1]:n[2],l=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;o.push({type:s,args:l})}return o.length===0?{type:e,args:null}:o.length===1?o[0]:o}catch(a){return I.error(`ERROR: ${a.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),sk=f(function(e){return e.replace(Ua,"")},"removeDirectives"),ok=f(function(e,t){for(const[r,i]of t.entries())if(i.match(e))return r;return-1},"isSubstringInArray");function gc(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return ik[r]??t}f(gc,"interpolateToCurve");function Yf(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?Kb.sanitizeUrl(r):r}f(Yf,"formatUrl");var lk=f((e,...t)=>{const r=e.split("."),i=r.length-1,a=r[i];let n=window;for(let o=0;o<i;o++)if(n=n[r[o]],!n){I.error(`Function name: ${e} not found in window`);return}n[a](...t)},"runFunc");function mc(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}f(mc,"distance");function Gf(e){let t,r=0;e.forEach(a=>{r+=mc(a,t),t=a});const i=r/2;return yc(e,i)}f(Gf,"traverseEdge");function Xf(e){return e.length===1?e[0]:Gf(e)}f(Xf,"calcLabelPosition");var Gh=f((e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},"roundNumber"),yc=f((e,t)=>{let r,i=t;for(const a of e){if(r){const n=mc(a,r);if(n===0)return r;if(n<i)i-=n;else{const o=i/n;if(o<=0)return r;if(o>=1)return{x:a.x,y:a.y};if(o>0&&o<1)return{x:Gh((1-o)*r.x+o*a.x,5),y:Gh((1-o)*r.y+o*a.y,5)}}}r=a}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),ck=f((e,t,r)=>{I.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const a=yc(t,25),n=e?10:5,o=Math.atan2(t[0].y-a.y,t[0].x-a.x),s={x:0,y:0};return s.x=Math.sin(o)*n+(t[0].x+a.x)/2,s.y=-Math.cos(o)*n+(t[0].y+a.y)/2,s},"calcCardinalityPosition");function Zf(e,t,r){const i=structuredClone(r);I.info("our points",i),t!=="start_left"&&t!=="start_right"&&i.reverse();const a=25+e,n=yc(i,a),o=10+e*.5,s=Math.atan2(i[0].y-n.y,i[0].x-n.x),l={x:0,y:0};return t==="start_left"?(l.x=Math.sin(s+Math.PI)*o+(i[0].x+n.x)/2,l.y=-Math.cos(s+Math.PI)*o+(i[0].y+n.y)/2):t==="end_right"?(l.x=Math.sin(s-Math.PI)*o+(i[0].x+n.x)/2-5,l.y=-Math.cos(s-Math.PI)*o+(i[0].y+n.y)/2-5):t==="end_left"?(l.x=Math.sin(s)*o+(i[0].x+n.x)/2-5,l.y=-Math.cos(s)*o+(i[0].y+n.y)/2-5):(l.x=Math.sin(s)*o+(i[0].x+n.x)/2,l.y=-Math.cos(s)*o+(i[0].y+n.y)/2),l}f(Zf,"calcTerminalLabelPosition");function Kf(e){let t="",r="";for(const i of e)i!==void 0&&(i.startsWith("color:")||i.startsWith("text-align:")?r=r+i+";":t=t+i+";");return{style:t,labelStyle:r}}f(Kf,"getStylesFromArray");var Xh=0,hk=f(()=>(Xh++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Xh),"generateId");function Qf(e){let t="";const r="0123456789abcdef",i=r.length;for(let a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*i));return t}f(Qf,"makeRandomHex");var uk=f(e=>Qf(e.length),"random"),pk=f(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),dk=f(function(e,t){const r=t.text.replace(sa.lineBreakRegex," "),[,i]=eo(t.fontSize),a=e.append("text");a.attr("x",t.x),a.attr("y",t.y),a.style("text-anchor",t.anchor),a.style("font-family",t.fontFamily),a.style("font-size",i),a.style("font-weight",t.fontWeight),a.attr("fill",t.fill),t.class!==void 0&&a.attr("class",t.class);const n=a.append("tspan");return n.attr("x",t.x+t.textMargin*2),n.attr("fill",t.fill),n.text(r),a},"drawSimpleText"),fk=fn((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),sa.lineBreakRegex.test(e)))return e;const i=e.split(" ").filter(Boolean),a=[];let n="";return i.forEach((o,s)=>{const l=Sr(`${o} `,r),c=Sr(n,r);if(l>t){const{hyphenatedStrings:d,remainingWord:p}=gk(o,t,"-",r);a.push(n,...d),n=p}else c+l>=t?(a.push(n),n=o):n=[n,o].filter(Boolean).join(" ");s+1===i.length&&a.push(n)}),a.filter(o=>o!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),gk=fn((e,t,r="-",i)=>{i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},i);const a=[...e],n=[];let o="";return a.forEach((s,l)=>{const c=`${o}${s}`;if(Sr(c,i)>=t){const u=l+1,d=a.length===u,p=`${c}${r}`;n.push(d?c:p),o=""}else o=c}),{hyphenatedStrings:n,remainingWord:o}},(e,t,r="-",i)=>`${e}${t}${r}${i.fontSize}${i.fontWeight}${i.fontFamily}`);function Jf(e,t){return xc(e,t).height}f(Jf,"calculateTextHeight");function Sr(e,t){return xc(e,t).width}f(Sr,"calculateTextWidth");var xc=fn((e,t)=>{const{fontSize:r=12,fontFamily:i="Arial",fontWeight:a=400}=t;if(!e)return{width:0,height:0};const[,n]=eo(r),o=["sans-serif",i],s=e.split(sa.lineBreakRegex),l=[],c=Mt("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const h=c.append("svg");for(const d of o){let p=0;const g={width:0,height:0,lineHeight:0};for(const m of s){const y=pk();y.text=m||rk;const x=dk(h,y).style("font-size",n).style("font-weight",a).style("font-family",d),b=(x._groups||x)[0][0].getBBox();if(b.width===0&&b.height===0)throw new Error("svg element not in render tree");g.width=Math.round(Math.max(g.width,b.width)),p=Math.round(b.height),g.height+=p,g.lineHeight=Math.round(Math.max(g.lineHeight,p))}l.push(g)}h.remove();const u=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[u]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),Xi,mk=(Xi=class{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}},f(Xi,"InitIDGenerator"),Xi),Rn,yk=f(function(e){return Rn=Rn||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Rn.innerHTML=e,unescape(Rn.textContent)},"entityDecode");function bc(e){return"str"in e}f(bc,"isDetailedError");var xk=f((e,t,r,i)=>{var n;if(!i)return;const a=(n=e.node())==null?void 0:n.getBBox();a&&e.append("text").text(i).attr("text-anchor","middle").attr("x",a.x+a.width/2).attr("y",-r).attr("class",t)},"insertTitle"),eo=f(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function vc(e,t){return ek({},e,t)}f(vc,"cleanAndMerge");var nr={assignWithDepth:pe,wrapLabel:fk,calculateTextHeight:Jf,calculateTextWidth:Sr,calculateTextDimensions:xc,cleanAndMerge:vc,detectInit:nk,detectDirective:Uf,isSubstringInArray:ok,interpolateToCurve:gc,calcLabelPosition:Xf,calcCardinalityPosition:ck,calcTerminalLabelPosition:Zf,formatUrl:Yf,getStylesFromArray:Kf,generateId:hk,random:uk,runFunc:lk,entityDecode:yk,insertTitle:xk,parseFontSize:eo,InitIDGenerator:mk},bk=f(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const i=r.substring(1,r.length-1);return/^\+?\d+$/.test(i)?""+i+"":""+i+""}),t},"encodeEntities"),vi=f(function(e){return e.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),pE=f((e,t,{counter:r=0,prefix:i,suffix:a},n)=>n||`${i?`${i}_`:""}${e}_${t}_${r}${a?`_${a}`:""}`,"getEdgeId");function Ce(e){return e??null}f(Ce,"handleUndefinedAttr");const vk=Object.freeze({left:0,top:0,width:16,height:16}),Ms=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),tg=Object.freeze({...vk,...Ms}),_k=Object.freeze({...tg,body:"",hidden:!1}),wk=Object.freeze({width:null,height:null}),Ck=Object.freeze({...wk,...Ms}),kk=(e,t,r,i="")=>{const a=e.split(":");if(e.slice(0,1)==="@"){if(a.length<2||a.length>3)return null;i=a.shift().slice(1)}if(a.length>3||!a.length)return null;if(a.length>1){const s=a.pop(),l=a.pop(),c={provider:a.length>0?a[0]:i,prefix:l,name:s};return Eo(c)?c:null}const n=a[0],o=n.split("-");if(o.length>1){const s={provider:i,prefix:o.shift(),name:o.join("-")};return Eo(s)?s:null}if(r&&i===""){const s={provider:i,prefix:"",name:n};return Eo(s,r)?s:null}return null},Eo=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;function Sk(e,t){const r={};!e.hFlip!=!t.hFlip&&(r.hFlip=!0),!e.vFlip!=!t.vFlip&&(r.vFlip=!0);const i=((e.rotate||0)+(t.rotate||0))%4;return i&&(r.rotate=i),r}function Zh(e,t){const r=Sk(e,t);for(const i in _k)i in Ms?i in e&&!(i in r)&&(r[i]=Ms[i]):i in t?r[i]=t[i]:i in e&&(r[i]=e[i]);return r}function Tk(e,t){const r=e.icons,i=e.aliases||Object.create(null),a=Object.create(null);function n(o){if(r[o])return a[o]=[];if(!(o in a)){a[o]=null;const s=i[o]&&i[o].parent,l=s&&n(s);l&&(a[o]=[s].concat(l))}return a[o]}return(t||Object.keys(r).concat(Object.keys(i))).forEach(n),a}function Kh(e,t,r){const i=e.icons,a=e.aliases||Object.create(null);let n={};function o(s){n=Zh(i[s]||a[s],n)}return o(t),r.forEach(o),Zh(e,n)}function Mk(e,t){if(e.icons[t])return Kh(e,t,[]);const r=Tk(e,[t])[t];return r?Kh(e,t,r):null}const Lk=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Ak=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Qh(e,t,r){if(t===1)return e;if(r=r||100,typeof e=="number")return Math.ceil(e*t*r)/r;if(typeof e!="string")return e;const i=e.split(Lk);if(i===null||!i.length)return e;const a=[];let n=i.shift(),o=Ak.test(n);for(;;){if(o){const s=parseFloat(n);isNaN(s)?a.push(n):a.push(Math.ceil(s*t*r)/r)}else a.push(n);if(n=i.shift(),n===void 0)return a.join("");o=!o}}function Bk(e,t="defs"){let r="";const i=e.indexOf("<"+t);for(;i>=0;){const a=e.indexOf(">",i),n=e.indexOf("</"+t);if(a===-1||n===-1)break;const o=e.indexOf(">",n);if(o===-1)break;r+=e.slice(a+1,n).trim(),e=e.slice(0,i).trim()+e.slice(o+1)}return{defs:r,content:e}}function Ek(e,t){return e?"<defs>"+e+"</defs>"+t:t}function $k(e,t,r){const i=Bk(e);return Ek(i.defs,t+i.content+r)}const Fk=e=>e==="unset"||e==="undefined"||e==="none";function Pk(e,t){const r={...tg,...e},i={...Ck,...t},a={left:r.left,top:r.top,width:r.width,height:r.height};let n=r.body;[r,i].forEach(m=>{const y=[],x=m.hFlip,b=m.vFlip;let _=m.rotate;x?b?_+=2:(y.push("translate("+(a.width+a.left).toString()+" "+(0-a.top).toString()+")"),y.push("scale(-1 1)"),a.top=a.left=0):b&&(y.push("translate("+(0-a.left).toString()+" "+(a.height+a.top).toString()+")"),y.push("scale(1 -1)"),a.top=a.left=0);let T;switch(_<0&&(_-=Math.floor(_/4)*4),_=_%4,_){case 1:T=a.height/2+a.top,y.unshift("rotate(90 "+T.toString()+" "+T.toString()+")");break;case 2:y.unshift("rotate(180 "+(a.width/2+a.left).toString()+" "+(a.height/2+a.top).toString()+")");break;case 3:T=a.width/2+a.left,y.unshift("rotate(-90 "+T.toString()+" "+T.toString()+")");break}_%2===1&&(a.left!==a.top&&(T=a.left,a.left=a.top,a.top=T),a.width!==a.height&&(T=a.width,a.width=a.height,a.height=T)),y.length&&(n=$k(n,'<g transform="'+y.join(" ")+'">',"</g>"))});const o=i.width,s=i.height,l=a.width,c=a.height;let h,u;o===null?(u=s===null?"1em":s==="auto"?c:s,h=Qh(u,l/c)):(h=o==="auto"?l:o,u=s===null?Qh(h,c/l):s==="auto"?c:s);const d={},p=(m,y)=>{Fk(y)||(d[m]=y.toString())};p("width",h),p("height",u);const g=[a.left,a.top,l,c];return d.viewBox=g.join(" "),{attributes:d,viewBox:g,body:n}}const Rk=/\sid="(\S+)"/g,Dk="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Ok=0;function Ik(e,t=Dk){const r=[];let i;for(;i=Rk.exec(e);)r.push(i[1]);if(!r.length)return e;const a="suffix"+(Math.random()*16777216|Date.now()).toString(16);return r.forEach(n=>{const o=typeof t=="function"?t(n):t+(Ok++).toString(),s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+s+')([")]|\\.[a-z])',"g"),"$1"+o+a+"$3")}),e=e.replace(new RegExp(a,"g"),""),e}function Nk(e,t){let r=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in t)r+=" "+i+'="'+t[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+e+"</svg>"}function _c(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var _i=_c();function eg(e){_i=e}var Xa={exec:()=>null};function Pt(e,t=""){let r=typeof e=="string"?e:e.source,i={replace:(a,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(we.caret,"$1"),r=r.replace(a,o),i},getRegex:()=>new RegExp(r,t)};return i}var we={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},qk=/^(?:[ \t]*(?:\n|$))+/,zk=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Wk=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,mn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,jk=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,wc=/(?:[*+-]|\d{1,9}[.)])/,rg=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,ig=Pt(rg).replace(/bull/g,wc).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Hk=Pt(rg).replace(/bull/g,wc).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Cc=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Vk=/^[^\n]+/,kc=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Uk=Pt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",kc).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Yk=Pt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,wc).getRegex(),ro="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Sc=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Gk=Pt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Sc).replace("tag",ro).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ag=Pt(Cc).replace("hr",mn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ro).getRegex(),Xk=Pt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ag).getRegex(),Tc={blockquote:Xk,code:zk,def:Uk,fences:Wk,heading:jk,hr:mn,html:Gk,lheading:ig,list:Yk,newline:qk,paragraph:ag,table:Xa,text:Vk},Jh=Pt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",mn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ro).getRegex(),Zk={...Tc,lheading:Hk,table:Jh,paragraph:Pt(Cc).replace("hr",mn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Jh).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ro).getRegex()},Kk={...Tc,html:Pt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Sc).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Xa,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Pt(Cc).replace("hr",mn).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ig).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Qk=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Jk=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ng=/^( {2,}|\\)\n(?!\s*$)/,tS=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,io=/[\p{P}\p{S}]/u,Mc=/[\s\p{P}\p{S}]/u,sg=/[^\s\p{P}\p{S}]/u,eS=Pt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Mc).getRegex(),og=/(?!~)[\p{P}\p{S}]/u,rS=/(?!~)[\s\p{P}\p{S}]/u,iS=/(?:[^\s\p{P}\p{S}]|~)/u,aS=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,lg=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,nS=Pt(lg,"u").replace(/punct/g,io).getRegex(),sS=Pt(lg,"u").replace(/punct/g,og).getRegex(),cg="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",oS=Pt(cg,"gu").replace(/notPunctSpace/g,sg).replace(/punctSpace/g,Mc).replace(/punct/g,io).getRegex(),lS=Pt(cg,"gu").replace(/notPunctSpace/g,iS).replace(/punctSpace/g,rS).replace(/punct/g,og).getRegex(),cS=Pt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,sg).replace(/punctSpace/g,Mc).replace(/punct/g,io).getRegex(),hS=Pt(/\\(punct)/,"gu").replace(/punct/g,io).getRegex(),uS=Pt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),pS=Pt(Sc).replace("(?:-->|$)","-->").getRegex(),dS=Pt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",pS).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ls=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,fS=Pt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Ls).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),hg=Pt(/^!?\[(label)\]\[(ref)\]/).replace("label",Ls).replace("ref",kc).getRegex(),ug=Pt(/^!?\[(ref)\](?:\[\])?/).replace("ref",kc).getRegex(),gS=Pt("reflink|nolink(?!\\()","g").replace("reflink",hg).replace("nolink",ug).getRegex(),Lc={_backpedal:Xa,anyPunctuation:hS,autolink:uS,blockSkip:aS,br:ng,code:Jk,del:Xa,emStrongLDelim:nS,emStrongRDelimAst:oS,emStrongRDelimUnd:cS,escape:Qk,link:fS,nolink:ug,punctuation:eS,reflink:hg,reflinkSearch:gS,tag:dS,text:tS,url:Xa},mS={...Lc,link:Pt(/^!?\[(label)\]\((.*?)\)/).replace("label",Ls).getRegex(),reflink:Pt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ls).getRegex()},vl={...Lc,emStrongRDelimAst:lS,emStrongLDelim:sS,url:Pt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},yS={...vl,br:Pt(ng).replace("{2,}","*").getRegex(),text:Pt(vl.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Dn={normal:Tc,gfm:Zk,pedantic:Kk},$a={normal:Lc,gfm:vl,breaks:yS,pedantic:mS},xS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tu=e=>xS[e];function rr(e,t){if(t){if(we.escapeTest.test(e))return e.replace(we.escapeReplace,tu)}else if(we.escapeTestNoEncode.test(e))return e.replace(we.escapeReplaceNoEncode,tu);return e}function eu(e){try{e=encodeURI(e).replace(we.percentDecode,"%")}catch{return null}return e}function ru(e,t){var n;let r=e.replace(we.findPipe,(o,s,l)=>{let c=!1,h=s;for(;--h>=0&&l[h]==="\\";)c=!c;return c?"|":" |"}),i=r.split(we.splitPipe),a=0;if(i[0].trim()||i.shift(),i.length>0&&!((n=i.at(-1))!=null&&n.trim())&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;a<i.length;a++)i[a]=i[a].trim().replace(we.slashPipe,"|");return i}function Fa(e,t,r){let i=e.length;if(i===0)return"";let a=0;for(;a<i&&e.charAt(i-a-1)===t;)a++;return e.slice(0,i-a)}function bS(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return r>0?-2:-1}function iu(e,t,r,i,a){let n=t.href,o=t.title||null,s=e[1].replace(a.other.outputLinkReplace,"$1");i.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:n,title:o,text:s,tokens:i.inlineTokens(s)};return i.state.inLink=!1,l}function vS(e,t,r){let i=e.match(r.other.indentCodeCompensation);if(i===null)return t;let a=i[1];return t.split(`
`).map(n=>{let o=n.match(r.other.beginningSpace);if(o===null)return n;let[s]=o;return s.length>=a.length?n.slice(a.length):n}).join(`
`)}var As=class{constructor(t){zt(this,"options");zt(this,"rules");zt(this,"lexer");this.options=t||_i}space(t){let r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(t){let r=this.rules.block.code.exec(t);if(r){let i=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Fa(i,`
`)}}}fences(t){let r=this.rules.block.fences.exec(t);if(r){let i=r[0],a=vS(i,r[3]||"",this.rules);return{type:"code",raw:i,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:a}}}heading(t){let r=this.rules.block.heading.exec(t);if(r){let i=r[2].trim();if(this.rules.other.endingHash.test(i)){let a=Fa(i,"#");(this.options.pedantic||!a||this.rules.other.endingSpaceChar.test(a))&&(i=a.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){let r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:Fa(r[0],`
`)}}blockquote(t){let r=this.rules.block.blockquote.exec(t);if(r){let i=Fa(r[0],`
`).split(`
`),a="",n="",o=[];for(;i.length>0;){let s=!1,l=[],c;for(c=0;c<i.length;c++)if(this.rules.other.blockquoteStart.test(i[c]))l.push(i[c]),s=!0;else if(!s)l.push(i[c]);else break;i=i.slice(c);let h=l.join(`
`),u=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");a=a?`${a}
${h}`:h,n=n?`${n}
${u}`:u;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,o,!0),this.lexer.state.top=d,i.length===0)break;let p=o.at(-1);if((p==null?void 0:p.type)==="code")break;if((p==null?void 0:p.type)==="blockquote"){let g=p,m=g.raw+`
`+i.join(`
`),y=this.blockquote(m);o[o.length-1]=y,a=a.substring(0,a.length-g.raw.length)+y.raw,n=n.substring(0,n.length-g.text.length)+y.text;break}else if((p==null?void 0:p.type)==="list"){let g=p,m=g.raw+`
`+i.join(`
`),y=this.list(m);o[o.length-1]=y,a=a.substring(0,a.length-p.raw.length)+y.raw,n=n.substring(0,n.length-g.raw.length)+y.raw,i=m.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:a,tokens:o,text:n}}}list(t){let r=this.rules.block.list.exec(t);if(r){let i=r[1].trim(),a=i.length>1,n={type:"list",raw:"",ordered:a,start:a?+i.slice(0,-1):"",loose:!1,items:[]};i=a?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=a?i:"[*+-]");let o=this.rules.other.listItemRegex(i),s=!1;for(;t;){let c=!1,h="",u="";if(!(r=o.exec(t))||this.rules.block.hr.test(t))break;h=r[0],t=t.substring(h.length);let d=r[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),p=t.split(`
`,1)[0],g=!d.trim(),m=0;if(this.options.pedantic?(m=2,u=d.trimStart()):g?m=r[1].length+1:(m=r[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,u=d.slice(m),m+=r[1].length),g&&this.rules.other.blankLine.test(p)&&(h+=p+`
`,t=t.substring(p.length+1),c=!0),!c){let b=this.rules.other.nextBulletRegex(m),_=this.rules.other.hrRegex(m),T=this.rules.other.fencesBeginRegex(m),S=this.rules.other.headingBeginRegex(m),v=this.rules.other.htmlBeginRegex(m);for(;t;){let M=t.split(`
`,1)[0],N;if(p=M,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),N=p):N=p.replace(this.rules.other.tabCharGlobal,"    "),T.test(p)||S.test(p)||v.test(p)||b.test(p)||_.test(p))break;if(N.search(this.rules.other.nonSpaceChar)>=m||!p.trim())u+=`
`+N.slice(m);else{if(g||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||T.test(d)||S.test(d)||_.test(d))break;u+=`
`+p}!g&&!p.trim()&&(g=!0),h+=M+`
`,t=t.substring(M.length+1),d=N.slice(m)}}n.loose||(s?n.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(s=!0));let y=null,x;this.options.gfm&&(y=this.rules.other.listIsTask.exec(u),y&&(x=y[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:h,task:!!y,checked:x,loose:!1,text:u,tokens:[]}),n.raw+=h}let l=n.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let c=0;c<n.items.length;c++)if(this.lexer.state.top=!1,n.items[c].tokens=this.lexer.blockTokens(n.items[c].text,[]),!n.loose){let h=n.items[c].tokens.filter(d=>d.type==="space"),u=h.length>0&&h.some(d=>this.rules.other.anyLine.test(d.raw));n.loose=u}if(n.loose)for(let c=0;c<n.items.length;c++)n.items[c].loose=!0;return n}}html(t){let r=this.rules.block.html.exec(t);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(t){let r=this.rules.block.def.exec(t);if(r){let i=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),a=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:i,raw:r[0],href:a,title:n}}}table(t){var s;let r=this.rules.block.table.exec(t);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;let i=ru(r[1]),a=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=(s=r[3])!=null&&s.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:r[0],header:[],align:[],rows:[]};if(i.length===a.length){for(let l of a)this.rules.other.tableAlignRight.test(l)?o.align.push("right"):this.rules.other.tableAlignCenter.test(l)?o.align.push("center"):this.rules.other.tableAlignLeft.test(l)?o.align.push("left"):o.align.push(null);for(let l=0;l<i.length;l++)o.header.push({text:i[l],tokens:this.lexer.inline(i[l]),header:!0,align:o.align[l]});for(let l of n)o.rows.push(ru(l,o.header.length).map((c,h)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:o.align[h]})));return o}}lheading(t){let r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(t){let r=this.rules.block.paragraph.exec(t);if(r){let i=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:i,tokens:this.lexer.inline(i)}}}text(t){let r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(t){let r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:r[1]}}tag(t){let r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(t){let r=this.rules.inline.link.exec(t);if(r){let i=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(i)){if(!this.rules.other.endAngleBracket.test(i))return;let o=Fa(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{let o=bS(r[2],"()");if(o===-2)return;if(o>-1){let s=(r[0].indexOf("!")===0?5:4)+r[1].length+o;r[2]=r[2].substring(0,o),r[0]=r[0].substring(0,s).trim(),r[3]=""}}let a=r[2],n="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(a);o&&(a=o[1],n=o[3])}else n=r[3]?r[3].slice(1,-1):"";return a=a.trim(),this.rules.other.startAngleBracket.test(a)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(i)?a=a.slice(1):a=a.slice(1,-1)),iu(r,{href:a&&a.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}reflink(t,r){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){let a=(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=r[a.toLowerCase()];if(!n){let o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return iu(i,n,i[0],this.lexer,this.rules)}}emStrong(t,r,i=""){let a=this.rules.inline.emStrongLDelim.exec(t);if(!(!a||a[3]&&i.match(this.rules.other.unicodeAlphaNumeric))&&(!(a[1]||a[2])||!i||this.rules.inline.punctuation.exec(i))){let n=[...a[0]].length-1,o,s,l=n,c=0,h=a[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,r=r.slice(-1*t.length+n);(a=h.exec(r))!=null;){if(o=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!o)continue;if(s=[...o].length,a[3]||a[4]){l+=s;continue}else if((a[5]||a[6])&&n%3&&!((n+s)%3)){c+=s;continue}if(l-=s,l>0)continue;s=Math.min(s,s+l+c);let u=[...a[0]][0].length,d=t.slice(0,n+a.index+u+s);if(Math.min(n,s)%2){let g=d.slice(1,-1);return{type:"em",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}let p=d.slice(2,-2);return{type:"strong",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(t){let r=this.rules.inline.code.exec(t);if(r){let i=r[2].replace(this.rules.other.newLineCharGlobal," "),a=this.rules.other.nonSpaceChar.test(i),n=this.rules.other.startingSpaceChar.test(i)&&this.rules.other.endingSpaceChar.test(i);return a&&n&&(i=i.substring(1,i.length-1)),{type:"codespan",raw:r[0],text:i}}}br(t){let r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}}del(t){let r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(t){let r=this.rules.inline.autolink.exec(t);if(r){let i,a;return r[2]==="@"?(i=r[1],a="mailto:"+i):(i=r[1],a=i),{type:"link",raw:r[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}url(t){var i;let r;if(r=this.rules.inline.url.exec(t)){let a,n;if(r[2]==="@")a=r[0],n="mailto:"+a;else{let o;do o=r[0],r[0]=((i=this.rules.inline._backpedal.exec(r[0]))==null?void 0:i[0])??"";while(o!==r[0]);a=r[0],r[1]==="www."?n="http://"+r[0]:n=r[0]}return{type:"link",raw:r[0],text:a,href:n,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(t){let r=this.rules.inline.text.exec(t);if(r){let i=this.lexer.state.inRawBlock;return{type:"text",raw:r[0],text:r[0],escaped:i}}}},vr=class _l{constructor(t){zt(this,"tokens");zt(this,"options");zt(this,"state");zt(this,"tokenizer");zt(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||_i,this.options.tokenizer=this.options.tokenizer||new As,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:we,block:Dn.normal,inline:$a.normal};this.options.pedantic?(r.block=Dn.pedantic,r.inline=$a.pedantic):this.options.gfm&&(r.block=Dn.gfm,this.options.breaks?r.inline=$a.breaks:r.inline=$a.gfm),this.tokenizer.rules=r}static get rules(){return{block:Dn,inline:$a}}static lex(t,r){return new _l(r).lex(t)}static lexInline(t,r){return new _l(r).inlineTokens(t)}lex(t){t=t.replace(we.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],i=!1){var a,n,o;for(this.options.pedantic&&(t=t.replace(we.tabCharGlobal,"    ").replace(we.spaceLine,""));t;){let s;if((n=(a=this.options.extensions)==null?void 0:a.block)!=null&&n.some(c=>(s=c.call({lexer:this},t,r))?(t=t.substring(s.raw.length),r.push(s),!0):!1))continue;if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length);let c=r.at(-1);s.raw.length===1&&c!==void 0?c.raw+=`
`:r.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.text,this.inlineQueue.at(-1).src=c.text):r.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),r.push(s);continue}let l=t;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0,h=t.slice(1),u;this.options.extensions.startBlock.forEach(d=>{u=d.call({lexer:this},h),typeof u=="number"&&u>=0&&(c=Math.min(c,u))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(s=this.tokenizer.paragraph(l))){let c=r.at(-1);i&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):r.push(s),i=l.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):r.push(s);continue}if(t){let c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){var s,l,c;let i=t,a=null;if(this.tokens.links){let h=Object.keys(this.tokens.links);if(h.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)h.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,a.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let n=!1,o="";for(;t;){n||(o=""),n=!1;let h;if((l=(s=this.options.extensions)==null?void 0:s.inline)!=null&&l.some(d=>(h=d.call({lexer:this},t,r))?(t=t.substring(h.raw.length),r.push(h),!0):!1))continue;if(h=this.tokenizer.escape(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.tag(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.link(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(h.raw.length);let d=r.at(-1);h.type==="text"&&(d==null?void 0:d.type)==="text"?(d.raw+=h.raw,d.text+=h.text):r.push(h);continue}if(h=this.tokenizer.emStrong(t,i,o)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.codespan(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.br(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.del(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.autolink(t)){t=t.substring(h.raw.length),r.push(h);continue}if(!this.state.inLink&&(h=this.tokenizer.url(t))){t=t.substring(h.raw.length),r.push(h);continue}let u=t;if((c=this.options.extensions)!=null&&c.startInline){let d=1/0,p=t.slice(1),g;this.options.extensions.startInline.forEach(m=>{g=m.call({lexer:this},p),typeof g=="number"&&g>=0&&(d=Math.min(d,g))}),d<1/0&&d>=0&&(u=t.substring(0,d+1))}if(h=this.tokenizer.inlineText(u)){t=t.substring(h.raw.length),h.raw.slice(-1)!=="_"&&(o=h.raw.slice(-1)),n=!0;let d=r.at(-1);(d==null?void 0:d.type)==="text"?(d.raw+=h.raw,d.text+=h.text):r.push(h);continue}if(t){let d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return r}},Bs=class{constructor(t){zt(this,"options");zt(this,"parser");this.options=t||_i}space(t){return""}code({text:t,lang:r,escaped:i}){var o;let a=(o=(r||"").match(we.notSpaceStart))==null?void 0:o[0],n=t.replace(we.endingNewline,"")+`
`;return a?'<pre><code class="language-'+rr(a)+'">'+(i?n:rr(n,!0))+`</code></pre>
`:"<pre><code>"+(i?n:rr(n,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:r}){return`<h${r}>${this.parser.parseInline(t)}</h${r}>
`}hr(t){return`<hr>
`}list(t){let r=t.ordered,i=t.start,a="";for(let s=0;s<t.items.length;s++){let l=t.items[s];a+=this.listitem(l)}let n=r?"ol":"ul",o=r&&i!==1?' start="'+i+'"':"";return"<"+n+o+`>
`+a+"</"+n+`>
`}listitem(t){var i;let r="";if(t.task){let a=this.checkbox({checked:!!t.checked});t.loose?((i=t.tokens[0])==null?void 0:i.type)==="paragraph"?(t.tokens[0].text=a+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=a+" "+rr(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:a+" ",text:a+" ",escaped:!0}):r+=a+" "}return r+=this.parser.parse(t.tokens,!!t.loose),`<li>${r}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let r="",i="";for(let n=0;n<t.header.length;n++)i+=this.tablecell(t.header[n]);r+=this.tablerow({text:i});let a="";for(let n=0;n<t.rows.length;n++){let o=t.rows[n];i="";for(let s=0;s<o.length;s++)i+=this.tablecell(o[s]);a+=this.tablerow({text:i})}return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+a+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let r=this.parser.parseInline(t.tokens),i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+r+`</${i}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${rr(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:r,tokens:i}){let a=this.parser.parseInline(i),n=eu(t);if(n===null)return a;t=n;let o='<a href="'+t+'"';return r&&(o+=' title="'+rr(r)+'"'),o+=">"+a+"</a>",o}image({href:t,title:r,text:i,tokens:a}){a&&(i=this.parser.parseInline(a,this.parser.textRenderer));let n=eu(t);if(n===null)return rr(i);t=n;let o=`<img src="${t}" alt="${i}"`;return r&&(o+=` title="${rr(r)}"`),o+=">",o}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:rr(t.text)}},Ac=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},_r=class wl{constructor(t){zt(this,"options");zt(this,"renderer");zt(this,"textRenderer");this.options=t||_i,this.options.renderer=this.options.renderer||new Bs,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ac}static parse(t,r){return new wl(r).parse(t)}static parseInline(t,r){return new wl(r).parseInline(t)}parse(t,r=!0){var a,n;let i="";for(let o=0;o<t.length;o++){let s=t[o];if((n=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&n[s.type]){let c=s,h=this.options.extensions.renderers[c.type].call({parser:this},c);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){i+=h||"";continue}}let l=s;switch(l.type){case"space":{i+=this.renderer.space(l);continue}case"hr":{i+=this.renderer.hr(l);continue}case"heading":{i+=this.renderer.heading(l);continue}case"code":{i+=this.renderer.code(l);continue}case"table":{i+=this.renderer.table(l);continue}case"blockquote":{i+=this.renderer.blockquote(l);continue}case"list":{i+=this.renderer.list(l);continue}case"html":{i+=this.renderer.html(l);continue}case"paragraph":{i+=this.renderer.paragraph(l);continue}case"text":{let c=l,h=this.renderer.text(c);for(;o+1<t.length&&t[o+1].type==="text";)c=t[++o],h+=`
`+this.renderer.text(c);r?i+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):i+=h;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return i}parseInline(t,r=this.renderer){var a,n;let i="";for(let o=0;o<t.length;o++){let s=t[o];if((n=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&n[s.type]){let c=this.options.extensions.renderers[s.type].call({parser:this},s);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=c||"";continue}}let l=s;switch(l.type){case"escape":{i+=r.text(l);break}case"html":{i+=r.html(l);break}case"link":{i+=r.link(l);break}case"image":{i+=r.image(l);break}case"strong":{i+=r.strong(l);break}case"em":{i+=r.em(l);break}case"codespan":{i+=r.codespan(l);break}case"br":{i+=r.br(l);break}case"del":{i+=r.del(l);break}case"text":{i+=r.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return i}},qo,Kn=(qo=class{constructor(t){zt(this,"options");zt(this,"block");this.options=t||_i}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?vr.lex:vr.lexInline}provideParser(){return this.block?_r.parse:_r.parseInline}},zt(qo,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),qo),_S=class{constructor(...t){zt(this,"defaults",_c());zt(this,"options",this.setOptions);zt(this,"parse",this.parseMarkdown(!0));zt(this,"parseInline",this.parseMarkdown(!1));zt(this,"Parser",_r);zt(this,"Renderer",Bs);zt(this,"TextRenderer",Ac);zt(this,"Lexer",vr);zt(this,"Tokenizer",As);zt(this,"Hooks",Kn);this.use(...t)}walkTokens(t,r){var a,n;let i=[];for(let o of t)switch(i=i.concat(r.call(this,o)),o.type){case"table":{let s=o;for(let l of s.header)i=i.concat(this.walkTokens(l.tokens,r));for(let l of s.rows)for(let c of l)i=i.concat(this.walkTokens(c.tokens,r));break}case"list":{let s=o;i=i.concat(this.walkTokens(s.items,r));break}default:{let s=o;(n=(a=this.defaults.extensions)==null?void 0:a.childTokens)!=null&&n[s.type]?this.defaults.extensions.childTokens[s.type].forEach(l=>{let c=s[l].flat(1/0);i=i.concat(this.walkTokens(c,r))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,r)))}}return i}use(...t){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(i=>{let a={...i};if(a.async=this.defaults.async||a.async||!1,i.extensions&&(i.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let o=r.renderers[n.name];o?r.renderers[n.name]=function(...s){let l=n.renderer.apply(this,s);return l===!1&&(l=o.apply(this,s)),l}:r.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=r[n.level];o?o.unshift(n.tokenizer):r[n.level]=[n.tokenizer],n.start&&(n.level==="block"?r.startBlock?r.startBlock.push(n.start):r.startBlock=[n.start]:n.level==="inline"&&(r.startInline?r.startInline.push(n.start):r.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(r.childTokens[n.name]=n.childTokens)}),a.extensions=r),i.renderer){let n=this.defaults.renderer||new Bs(this.defaults);for(let o in i.renderer){if(!(o in n))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let s=o,l=i.renderer[s],c=n[s];n[s]=(...h)=>{let u=l.apply(n,h);return u===!1&&(u=c.apply(n,h)),u||""}}a.renderer=n}if(i.tokenizer){let n=this.defaults.tokenizer||new As(this.defaults);for(let o in i.tokenizer){if(!(o in n))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let s=o,l=i.tokenizer[s],c=n[s];n[s]=(...h)=>{let u=l.apply(n,h);return u===!1&&(u=c.apply(n,h)),u}}a.tokenizer=n}if(i.hooks){let n=this.defaults.hooks||new Kn;for(let o in i.hooks){if(!(o in n))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let s=o,l=i.hooks[s],c=n[s];Kn.passThroughHooks.has(o)?n[s]=h=>{if(this.defaults.async)return Promise.resolve(l.call(n,h)).then(d=>c.call(n,d));let u=l.call(n,h);return c.call(n,u)}:n[s]=(...h)=>{let u=l.apply(n,h);return u===!1&&(u=c.apply(n,h)),u}}a.hooks=n}if(i.walkTokens){let n=this.defaults.walkTokens,o=i.walkTokens;a.walkTokens=function(s){let l=[];return l.push(o.call(this,s)),n&&(l=l.concat(n.call(this,s))),l}}this.defaults={...this.defaults,...a}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,r){return vr.lex(t,r??this.defaults)}parser(t,r){return _r.parse(t,r??this.defaults)}parseMarkdown(t){return(r,i)=>{let a={...i},n={...this.defaults,...a},o=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&a.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));n.hooks&&(n.hooks.options=n,n.hooks.block=t);let s=n.hooks?n.hooks.provideLexer():t?vr.lex:vr.lexInline,l=n.hooks?n.hooks.provideParser():t?_r.parse:_r.parseInline;if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(r):r).then(c=>s(c,n)).then(c=>n.hooks?n.hooks.processAllTokens(c):c).then(c=>n.walkTokens?Promise.all(this.walkTokens(c,n.walkTokens)).then(()=>c):c).then(c=>l(c,n)).then(c=>n.hooks?n.hooks.postprocess(c):c).catch(o);try{n.hooks&&(r=n.hooks.preprocess(r));let c=s(r,n);n.hooks&&(c=n.hooks.processAllTokens(c)),n.walkTokens&&this.walkTokens(c,n.walkTokens);let h=l(c,n);return n.hooks&&(h=n.hooks.postprocess(h)),h}catch(c){return o(c)}}}onError(t,r){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let a="<p>An error occurred:</p><pre>"+rr(i.message+"",!0)+"</pre>";return r?Promise.resolve(a):a}if(r)return Promise.reject(i);throw i}}},gi=new _S;function Ft(e,t){return gi.parse(e,t)}Ft.options=Ft.setOptions=function(e){return gi.setOptions(e),Ft.defaults=gi.defaults,eg(Ft.defaults),Ft};Ft.getDefaults=_c;Ft.defaults=_i;Ft.use=function(...e){return gi.use(...e),Ft.defaults=gi.defaults,eg(Ft.defaults),Ft};Ft.walkTokens=function(e,t){return gi.walkTokens(e,t)};Ft.parseInline=gi.parseInline;Ft.Parser=_r;Ft.parser=_r.parse;Ft.Renderer=Bs;Ft.TextRenderer=Ac;Ft.Lexer=vr;Ft.lexer=vr.lex;Ft.Tokenizer=As;Ft.Hooks=Kn;Ft.parse=Ft;Ft.options;Ft.setOptions;Ft.use;Ft.walkTokens;Ft.parseInline;_r.parse;vr.lex;function pg(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=Array.from(typeof e=="string"?[e]:e);i[i.length-1]=i[i.length-1].replace(/\r?\n([\t ]*)$/,"");var a=i.reduce(function(s,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?s.concat(c.map(function(h){var u,d;return(d=(u=h.match(/[\t ]/g))===null||u===void 0?void 0:u.length)!==null&&d!==void 0?d:0})):s},[]);if(a.length){var n=new RegExp(`
[	 ]{`+Math.min.apply(Math,a)+"}","g");i=i.map(function(s){return s.replace(n,`
`)})}i[0]=i[0].replace(/^\r?\n/,"");var o=i[0];return t.forEach(function(s,l){var c=o.match(/(?:^|\n)( *)$/),h=c?c[1]:"",u=s;typeof s=="string"&&s.includes(`
`)&&(u=String(s).split(`
`).map(function(d,p){return p===0?d:""+h+d}).join(`
`)),o+=u+i[l+1]}),o}var wS={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},Cl=new Map,dg=new Map,CS=f(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(I.debug("Registering icon pack:",t.name),"loader"in t)dg.set(t.name,t.loader);else if("icons"in t)Cl.set(t.name,t.icons);else throw I.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),fg=f(async(e,t)=>{const r=kk(e,!0,t!==void 0);if(!r)throw new Error(`Invalid icon name: ${e}`);const i=r.prefix||t;if(!i)throw new Error(`Icon name must contain a prefix: ${e}`);let a=Cl.get(i);if(!a){const o=dg.get(i);if(!o)throw new Error(`Icon set not found: ${r.prefix}`);try{a={...await o(),prefix:i},Cl.set(i,a)}catch(s){throw I.error(s),new Error(`Failed to load icon set: ${r.prefix}`)}}const n=Mk(a,r.name);if(!n)throw new Error(`Icon not found: ${e}`);return n},"getRegisteredIconData"),kS=f(async e=>{try{return await fg(e),!0}catch{return!1}},"isIconAvailable"),yn=f(async(e,t,r)=>{let i;try{i=await fg(e,t==null?void 0:t.fallbackPrefix)}catch(o){I.error(o),i=wS}const a=Pk(i,t);return Nk(Ik(a.body),{...a.attributes,...r})},"getIconSVG");function gg(e,{markdownAutoWrap:t}){const i=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),a=pg(i);return t===!1?a.replace(/ /g,"&nbsp;"):a}f(gg,"preprocessMarkdown");function mg(e,t={}){const r=gg(e,t),i=Ft.lexer(r),a=[[]];let n=0;function o(s,l="normal"){s.type==="text"?s.text.split(`
`).forEach((h,u)=>{u!==0&&(n++,a.push([])),h.split(" ").forEach(d=>{d=d.replace(/&#39;/g,"'"),d&&a[n].push({content:d,type:l})})}):s.type==="strong"||s.type==="em"?s.tokens.forEach(c=>{o(c,s.type)}):s.type==="html"&&a[n].push({content:s.text,type:"normal"})}return f(o,"processNode"),i.forEach(s=>{var l;s.type==="paragraph"?(l=s.tokens)==null||l.forEach(c=>{o(c)}):s.type==="html"&&a[n].push({content:s.text,type:"normal"})}),a}f(mg,"markdownToLines");function yg(e,{markdownAutoWrap:t}={}){const r=Ft.lexer(e);function i(a){var n,o,s;return a.type==="text"?t===!1?a.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):a.text.replace(/\n */g,"<br/>"):a.type==="strong"?`<strong>${(n=a.tokens)==null?void 0:n.map(i).join("")}</strong>`:a.type==="em"?`<em>${(o=a.tokens)==null?void 0:o.map(i).join("")}</em>`:a.type==="paragraph"?`<p>${(s=a.tokens)==null?void 0:s.map(i).join("")}</p>`:a.type==="space"?"":a.type==="html"?`${a.text}`:a.type==="escape"?a.text:`Unsupported markdown: ${a.type}`}return f(i,"output"),r.map(i).join("")}f(yg,"markdownToHTML");function xg(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}f(xg,"splitTextToChars");function bg(e,t){const r=xg(t.content);return Bc(e,[],r,t.type)}f(bg,"splitWordToFitWidth");function Bc(e,t,r,i){if(r.length===0)return[{content:t.join(""),type:i},{content:"",type:i}];const[a,...n]=r,o=[...t,a];return e([{content:o.join(""),type:i}])?Bc(e,o,n,i):(t.length===0&&a&&(t.push(a),r.shift()),[{content:t.join(""),type:i},{content:r.join(""),type:i}])}f(Bc,"splitWordToFitWidthRecursion");function vg(e,t){if(e.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Es(e,t)}f(vg,"splitLineToFitWidth");function Es(e,t,r=[],i=[]){if(e.length===0)return i.length>0&&r.push(i),r.length>0?r:[];let a="";e[0].content===" "&&(a=" ",e.shift());const n=e.shift()??{content:" ",type:"normal"},o=[...i];if(a!==""&&o.push({content:a,type:"normal"}),o.push(n),t(o))return Es(e,t,r,o);if(i.length>0)r.push(i),e.unshift(n);else if(n.content){const[s,l]=bg(t,n);r.push([s]),l.content&&e.unshift(l)}return Es(e,t,r)}f(Es,"splitLineToFitWidthRecursion");function kl(e,t){t&&e.attr("style",t)}f(kl,"applyStyle");async function _g(e,t,r,i,a=!1){const n=e.append("foreignObject");n.attr("width",`${10*r}px`),n.attr("height",`${10*r}px`);const o=n.append("xhtml:div");let s=t.label;t.label&&Ji(t.label)&&(s=await ql(t.label.replace(sa.lineBreakRegex,`
`),Et()));const l=t.isNode?"nodeLabel":"edgeLabel",c=o.append("span");c.html(s),kl(c,t.labelStyle),c.attr("class",`${l} ${i}`),kl(o,t.labelStyle),o.style("display","table-cell"),o.style("white-space","nowrap"),o.style("line-height","1.5"),o.style("max-width",r+"px"),o.style("text-align","center"),o.attr("xmlns","http://www.w3.org/1999/xhtml"),a&&o.attr("class","labelBkg");let h=o.node().getBoundingClientRect();return h.width===r&&(o.style("display","table"),o.style("white-space","break-spaces"),o.style("width",r+"px"),h=o.node().getBoundingClientRect()),n.node()}f(_g,"addHtmlSpan");function ao(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}f(ao,"createTspan");function wg(e,t,r){const i=e.append("text"),a=ao(i,1,t);no(a,r);const n=a.node().getComputedTextLength();return i.remove(),n}f(wg,"computeWidthOfText");function SS(e,t,r){var o;const i=e.append("text"),a=ao(i,1,t);no(a,[{content:r,type:"normal"}]);const n=(o=a.node())==null?void 0:o.getBoundingClientRect();return n&&i.remove(),n}f(SS,"computeDimensionOfText");function Cg(e,t,r,i=!1){const n=t.append("g"),o=n.insert("rect").attr("class","background").attr("style","stroke: none"),s=n.append("text").attr("y","-10.1");let l=0;for(const c of r){const h=f(d=>wg(n,1.1,d)<=e,"checkWidth"),u=h(c)?[c]:vg(c,h);for(const d of u){const p=ao(s,l,1.1);no(p,d),l++}}if(i){const c=s.node().getBBox(),h=2;return o.attr("x",c.x-h).attr("y",c.y-h).attr("width",c.width+2*h).attr("height",c.height+2*h),n.node()}else return s.node()}f(Cg,"createFormattedText");function no(e,t){e.text(""),t.forEach((r,i)=>{const a=e.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");i===0?a.text(r.content):a.text(" "+r.content)})}f(no,"updateTextContentAndStyles");async function kg(e){const t=[];e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(i,a,n)=>(t.push((async()=>{const o=`${a}:${n}`;return await kS(o)?await yn(o,void 0,{class:"label-icon"}):`<i class='${Ws(i).replace(":"," ")}'></i>`})()),i));const r=await Promise.all(t);return e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>r.shift()??"")}f(kg,"replaceIconSubstring");var qr=f(async(e,t="",{style:r="",isTitle:i=!1,classes:a="",useHtmlLabels:n=!0,isNode:o=!0,width:s=200,addSvgBackground:l=!1}={},c)=>{if(I.debug("XYZ createText",t,r,i,a,n,o,"addSvgBackground: ",l),n){const h=yg(t,c),u=await kg(vi(h)),d=t.replace(/\\\\/g,"\\"),p={isNode:o,label:Ji(t)?d:u,labelStyle:r.replace("fill:","color:")};return await _g(e,p,s,a,l)}else{const h=t.replace(/<br\s*\/?>/g,"<br/>"),u=mg(h.replace("<br>","<br/>"),c),d=Cg(s,e,u,t?l:!1);if(o){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const p=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Mt(d).attr("style",p)}else{const p=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Mt(d).select("rect").attr("style",p.replace(/background:/g,"fill:"));const g=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Mt(d).select("text").attr("style",g)}return d}},"createText");function $o(e,t,r){if(e&&e.length){const[i,a]=t,n=Math.PI/180*r,o=Math.cos(n),s=Math.sin(n);for(const l of e){const[c,h]=l;l[0]=(c-i)*o-(h-a)*s+i,l[1]=(c-i)*s+(h-a)*o+a}}}function TS(e,t){return e[0]===t[0]&&e[1]===t[1]}function MS(e,t,r,i=1){const a=r,n=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,s=[0,0];if(a)for(const c of o)$o(c,s,a);const l=function(c,h,u){const d=[];for(const b of c){const _=[...b];TS(_[0],_[_.length-1])||_.push([_[0][0],_[0][1]]),_.length>2&&d.push(_)}const p=[];h=Math.max(h,.1);const g=[];for(const b of d)for(let _=0;_<b.length-1;_++){const T=b[_],S=b[_+1];if(T[1]!==S[1]){const v=Math.min(T[1],S[1]);g.push({ymin:v,ymax:Math.max(T[1],S[1]),x:v===T[1]?T[0]:S[0],islope:(S[0]-T[0])/(S[1]-T[1])})}}if(g.sort((b,_)=>b.ymin<_.ymin?-1:b.ymin>_.ymin?1:b.x<_.x?-1:b.x>_.x?1:b.ymax===_.ymax?0:(b.ymax-_.ymax)/Math.abs(b.ymax-_.ymax)),!g.length)return p;let m=[],y=g[0].ymin,x=0;for(;m.length||g.length;){if(g.length){let b=-1;for(let _=0;_<g.length&&!(g[_].ymin>y);_++)b=_;g.splice(0,b+1).forEach(_=>{m.push({s:y,edge:_})})}if(m=m.filter(b=>!(b.edge.ymax<=y)),m.sort((b,_)=>b.edge.x===_.edge.x?0:(b.edge.x-_.edge.x)/Math.abs(b.edge.x-_.edge.x)),(u!==1||x%h==0)&&m.length>1)for(let b=0;b<m.length;b+=2){const _=b+1;if(_>=m.length)break;const T=m[b].edge,S=m[_].edge;p.push([[Math.round(T.x),y],[Math.round(S.x),y]])}y+=u,m.forEach(b=>{b.edge.x=b.edge.x+u*b.edge.islope}),x++}return p}(o,n,i);if(a){for(const c of o)$o(c,s,-a);(function(c,h,u){const d=[];c.forEach(p=>d.push(...p)),$o(d,h,u)})(l,s,-a)}return l}function xn(e,t){var r;const i=t.hachureAngle+90;let a=t.hachureGap;a<0&&(a=4*t.strokeWidth),a=Math.round(Math.max(a,.1));let n=1;return t.roughness>=1&&(((r=t.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(n=a),MS(e,a,i,n||1)}class Ec{constructor(t){this.helper=t}fillPolygons(t,r){return this._fillPolygons(t,r)}_fillPolygons(t,r){const i=xn(t,r);return{type:"fillSketch",ops:this.renderLines(i,r)}}renderLines(t,r){const i=[];for(const a of t)i.push(...this.helper.doubleLineOps(a[0][0],a[0][1],a[1][0],a[1][1],r));return i}}function so(e){const t=e[0],r=e[1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}class LS extends Ec{fillPolygons(t,r){let i=r.hachureGap;i<0&&(i=4*r.strokeWidth),i=Math.max(i,.1);const a=xn(t,Object.assign({},r,{hachureGap:i})),n=Math.PI/180*r.hachureAngle,o=[],s=.5*i*Math.cos(n),l=.5*i*Math.sin(n);for(const[c,h]of a)so([c,h])&&o.push([[c[0]-s,c[1]+l],[...h]],[[c[0]+s,c[1]-l],[...h]]);return{type:"fillSketch",ops:this.renderLines(o,r)}}}class AS extends Ec{fillPolygons(t,r){const i=this._fillPolygons(t,r),a=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),n=this._fillPolygons(t,a);return i.ops=i.ops.concat(n.ops),i}}class BS{constructor(t){this.helper=t}fillPolygons(t,r){const i=xn(t,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(i,r)}dotsOnLines(t,r){const i=[];let a=r.hachureGap;a<0&&(a=4*r.strokeWidth),a=Math.max(a,.1);let n=r.fillWeight;n<0&&(n=r.strokeWidth/2);const o=a/4;for(const s of t){const l=so(s),c=l/a,h=Math.ceil(c)-1,u=l-h*a,d=(s[0][0]+s[1][0])/2-a/4,p=Math.min(s[0][1],s[1][1]);for(let g=0;g<h;g++){const m=p+u+g*a,y=d-o+2*Math.random()*o,x=m-o+2*Math.random()*o,b=this.helper.ellipse(y,x,n,n,r);i.push(...b.ops)}}return{type:"fillSketch",ops:i}}}class ES{constructor(t){this.helper=t}fillPolygons(t,r){const i=xn(t,r);return{type:"fillSketch",ops:this.dashedLine(i,r)}}dashedLine(t,r){const i=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,a=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,n=[];return t.forEach(o=>{const s=so(o),l=Math.floor(s/(i+a)),c=(s+a-l*(i+a))/2;let h=o[0],u=o[1];h[0]>u[0]&&(h=o[1],u=o[0]);const d=Math.atan((u[1]-h[1])/(u[0]-h[0]));for(let p=0;p<l;p++){const g=p*(i+a),m=g+i,y=[h[0]+g*Math.cos(d)+c*Math.cos(d),h[1]+g*Math.sin(d)+c*Math.sin(d)],x=[h[0]+m*Math.cos(d)+c*Math.cos(d),h[1]+m*Math.sin(d)+c*Math.sin(d)];n.push(...this.helper.doubleLineOps(y[0],y[1],x[0],x[1],r))}}),n}}class $S{constructor(t){this.helper=t}fillPolygons(t,r){const i=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,a=r.zigzagOffset<0?i:r.zigzagOffset,n=xn(t,r=Object.assign({},r,{hachureGap:i+a}));return{type:"fillSketch",ops:this.zigzagLines(n,a,r)}}zigzagLines(t,r,i){const a=[];return t.forEach(n=>{const o=so(n),s=Math.round(o/(2*r));let l=n[0],c=n[1];l[0]>c[0]&&(l=n[1],c=n[0]);const h=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let u=0;u<s;u++){const d=2*u*r,p=2*(u+1)*r,g=Math.sqrt(2*Math.pow(r,2)),m=[l[0]+d*Math.cos(h),l[1]+d*Math.sin(h)],y=[l[0]+p*Math.cos(h),l[1]+p*Math.sin(h)],x=[m[0]+g*Math.cos(h+Math.PI/4),m[1]+g*Math.sin(h+Math.PI/4)];a.push(...this.helper.doubleLineOps(m[0],m[1],x[0],x[1],i),...this.helper.doubleLineOps(x[0],x[1],y[0],y[1],i))}}),a}}const Me={};class FS{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const PS=0,Fo=1,au=2,On={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Po(e,t){return e.type===t}function $c(e){const t=[],r=function(o){const s=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))s[s.length]={type:PS,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];s[s.length]={type:Fo,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return s[s.length]={type:au,text:""},s}(e);let i="BOD",a=0,n=r[a];for(;!Po(n,au);){let o=0;const s=[];if(i==="BOD"){if(n.text!=="M"&&n.text!=="m")return $c("M0,0"+e);a++,o=On[n.text],i=n.text}else Po(n,Fo)?o=On[i]:(a++,o=On[n.text],i=n.text);if(!(a+o<r.length))throw new Error("Path data ended short");for(let l=a;l<a+o;l++){const c=r[l];if(!Po(c,Fo))throw new Error("Param not a number: "+i+","+c.text);s[s.length]=+c.text}if(typeof On[i]!="number")throw new Error("Bad segment: "+i);{const l={key:i,data:s};t.push(l),a+=o,n=r[a],i==="M"&&(i="L"),i==="m"&&(i="l")}}return t}function Sg(e){let t=0,r=0,i=0,a=0;const n=[];for(const{key:o,data:s}of e)switch(o){case"M":n.push({key:"M",data:[...s]}),[t,r]=s,[i,a]=s;break;case"m":t+=s[0],r+=s[1],n.push({key:"M",data:[t,r]}),i=t,a=r;break;case"L":n.push({key:"L",data:[...s]}),[t,r]=s;break;case"l":t+=s[0],r+=s[1],n.push({key:"L",data:[t,r]});break;case"C":n.push({key:"C",data:[...s]}),t=s[4],r=s[5];break;case"c":{const l=s.map((c,h)=>h%2?c+r:c+t);n.push({key:"C",data:l}),t=l[4],r=l[5];break}case"Q":n.push({key:"Q",data:[...s]}),t=s[2],r=s[3];break;case"q":{const l=s.map((c,h)=>h%2?c+r:c+t);n.push({key:"Q",data:l}),t=l[2],r=l[3];break}case"A":n.push({key:"A",data:[...s]}),t=s[5],r=s[6];break;case"a":t+=s[5],r+=s[6],n.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],t,r]});break;case"H":n.push({key:"H",data:[...s]}),t=s[0];break;case"h":t+=s[0],n.push({key:"H",data:[t]});break;case"V":n.push({key:"V",data:[...s]}),r=s[0];break;case"v":r+=s[0],n.push({key:"V",data:[r]});break;case"S":n.push({key:"S",data:[...s]}),t=s[2],r=s[3];break;case"s":{const l=s.map((c,h)=>h%2?c+r:c+t);n.push({key:"S",data:l}),t=l[2],r=l[3];break}case"T":n.push({key:"T",data:[...s]}),t=s[0],r=s[1];break;case"t":t+=s[0],r+=s[1],n.push({key:"T",data:[t,r]});break;case"Z":case"z":n.push({key:"Z",data:[]}),t=i,r=a}return n}function Tg(e){const t=[];let r="",i=0,a=0,n=0,o=0,s=0,l=0;for(const{key:c,data:h}of e){switch(c){case"M":t.push({key:"M",data:[...h]}),[i,a]=h,[n,o]=h;break;case"C":t.push({key:"C",data:[...h]}),i=h[4],a=h[5],s=h[2],l=h[3];break;case"L":t.push({key:"L",data:[...h]}),[i,a]=h;break;case"H":i=h[0],t.push({key:"L",data:[i,a]});break;case"V":a=h[0],t.push({key:"L",data:[i,a]});break;case"S":{let u=0,d=0;r==="C"||r==="S"?(u=i+(i-s),d=a+(a-l)):(u=i,d=a),t.push({key:"C",data:[u,d,...h]}),s=h[0],l=h[1],i=h[2],a=h[3];break}case"T":{const[u,d]=h;let p=0,g=0;r==="Q"||r==="T"?(p=i+(i-s),g=a+(a-l)):(p=i,g=a);const m=i+2*(p-i)/3,y=a+2*(g-a)/3,x=u+2*(p-u)/3,b=d+2*(g-d)/3;t.push({key:"C",data:[m,y,x,b,u,d]}),s=p,l=g,i=u,a=d;break}case"Q":{const[u,d,p,g]=h,m=i+2*(u-i)/3,y=a+2*(d-a)/3,x=p+2*(u-p)/3,b=g+2*(d-g)/3;t.push({key:"C",data:[m,y,x,b,p,g]}),s=u,l=d,i=p,a=g;break}case"A":{const u=Math.abs(h[0]),d=Math.abs(h[1]),p=h[2],g=h[3],m=h[4],y=h[5],x=h[6];u===0||d===0?(t.push({key:"C",data:[i,a,y,x,y,x]}),i=y,a=x):(i!==y||a!==x)&&(Mg(i,a,y,x,u,d,p,g,m).forEach(function(b){t.push({key:"C",data:b})}),i=y,a=x);break}case"Z":t.push({key:"Z",data:[]}),i=n,a=o}r=c}return t}function Pa(e,t,r){return[e*Math.cos(r)-t*Math.sin(r),e*Math.sin(r)+t*Math.cos(r)]}function Mg(e,t,r,i,a,n,o,s,l,c){const h=(u=o,Math.PI*u/180);var u;let d=[],p=0,g=0,m=0,y=0;if(c)[p,g,m,y]=c;else{[e,t]=Pa(e,t,-h),[r,i]=Pa(r,i,-h);const z=(e-r)/2,B=(t-i)/2;let E=z*z/(a*a)+B*B/(n*n);E>1&&(E=Math.sqrt(E),a*=E,n*=E);const A=a*a,R=n*n,$=A*R-A*B*B-R*z*z,K=A*B*B+R*z*z,et=(s===l?-1:1)*Math.sqrt(Math.abs($/K));m=et*a*B/n+(e+r)/2,y=et*-n*z/a+(t+i)/2,p=Math.asin(parseFloat(((t-y)/n).toFixed(9))),g=Math.asin(parseFloat(((i-y)/n).toFixed(9))),e<m&&(p=Math.PI-p),r<m&&(g=Math.PI-g),p<0&&(p=2*Math.PI+p),g<0&&(g=2*Math.PI+g),l&&p>g&&(p-=2*Math.PI),!l&&g>p&&(g-=2*Math.PI)}let x=g-p;if(Math.abs(x)>120*Math.PI/180){const z=g,B=r,E=i;g=l&&g>p?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,d=Mg(r=m+a*Math.cos(g),i=y+n*Math.sin(g),B,E,a,n,o,0,l,[g,z,m,y])}x=g-p;const b=Math.cos(p),_=Math.sin(p),T=Math.cos(g),S=Math.sin(g),v=Math.tan(x/4),M=4/3*a*v,N=4/3*n*v,V=[e,t],q=[e+M*_,t-N*b],F=[r+M*S,i-N*T],Y=[r,i];if(q[0]=2*V[0]-q[0],q[1]=2*V[1]-q[1],c)return[q,F,Y].concat(d);{d=[q,F,Y].concat(d);const z=[];for(let B=0;B<d.length;B+=3){const E=Pa(d[B][0],d[B][1],h),A=Pa(d[B+1][0],d[B+1][1],h),R=Pa(d[B+2][0],d[B+2][1],h);z.push([E[0],E[1],A[0],A[1],R[0],R[1]])}return z}}const RS={randOffset:function(e,t){return gt(e,t)},randOffsetWithRange:function(e,t,r){return $s(e,t,r)},ellipse:function(e,t,r,i,a){const n=Ag(r,i,a);return Sl(e,t,a,n).opset},doubleLineOps:function(e,t,r,i,a){return Or(e,t,r,i,a,!0)}};function Lg(e,t,r,i,a){return{type:"path",ops:Or(e,t,r,i,a)}}function Qn(e,t,r){const i=(e||[]).length;if(i>2){const a=[];for(let n=0;n<i-1;n++)a.push(...Or(e[n][0],e[n][1],e[n+1][0],e[n+1][1],r));return t&&a.push(...Or(e[i-1][0],e[i-1][1],e[0][0],e[0][1],r)),{type:"path",ops:a}}return i===2?Lg(e[0][0],e[0][1],e[1][0],e[1][1],r):{type:"path",ops:[]}}function DS(e,t,r,i,a){return function(n,o){return Qn(n,!0,o)}([[e,t],[e+r,t],[e+r,t+i],[e,t+i]],a)}function nu(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,i=In(r[0],1*(1+.2*t.roughness),t),a=t.disableMultiStroke?[]:In(r[0],1.5*(1+.22*t.roughness),lu(t));for(let n=1;n<r.length;n++){const o=r[n];if(o.length){const s=In(o,1*(1+.2*t.roughness),t),l=t.disableMultiStroke?[]:In(o,1.5*(1+.22*t.roughness),lu(t));for(const c of s)c.op!=="move"&&i.push(c);for(const c of l)c.op!=="move"&&a.push(c)}}return{type:"path",ops:i.concat(a)}}return{type:"path",ops:[]}}function Ag(e,t,r){const i=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),a=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*i)),n=2*Math.PI/a;let o=Math.abs(e/2),s=Math.abs(t/2);const l=1-r.curveFitting;return o+=gt(o*l,r),s+=gt(s*l,r),{increment:n,rx:o,ry:s}}function Sl(e,t,r,i){const[a,n]=cu(i.increment,e,t,i.rx,i.ry,1,i.increment*$s(.1,$s(.4,1,r),r),r);let o=Fs(a,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[s]=cu(i.increment,e,t,i.rx,i.ry,1.5,0,r),l=Fs(s,null,r);o=o.concat(l)}return{estimatedPoints:n,opset:{type:"path",ops:o}}}function su(e,t,r,i,a,n,o,s,l){const c=e,h=t;let u=Math.abs(r/2),d=Math.abs(i/2);u+=gt(.01*u,l),d+=gt(.01*d,l);let p=a,g=n;for(;p<0;)p+=2*Math.PI,g+=2*Math.PI;g-p>2*Math.PI&&(p=0,g=2*Math.PI);const m=2*Math.PI/l.curveStepCount,y=Math.min(m/2,(g-p)/2),x=hu(y,c,h,u,d,p,g,1,l);if(!l.disableMultiStroke){const b=hu(y,c,h,u,d,p,g,1.5,l);x.push(...b)}return o&&(s?x.push(...Or(c,h,c+u*Math.cos(p),h+d*Math.sin(p),l),...Or(c,h,c+u*Math.cos(g),h+d*Math.sin(g),l)):x.push({op:"lineTo",data:[c,h]},{op:"lineTo",data:[c+u*Math.cos(p),h+d*Math.sin(p)]})),{type:"path",ops:x}}function ou(e,t){const r=Tg(Sg($c(e))),i=[];let a=[0,0],n=[0,0];for(const{key:o,data:s}of r)switch(o){case"M":n=[s[0],s[1]],a=[s[0],s[1]];break;case"L":i.push(...Or(n[0],n[1],s[0],s[1],t)),n=[s[0],s[1]];break;case"C":{const[l,c,h,u,d,p]=s;i.push(...OS(l,c,h,u,d,p,n,t)),n=[d,p];break}case"Z":i.push(...Or(n[0],n[1],a[0],a[1],t)),n=[a[0],a[1]]}return{type:"path",ops:i}}function Ro(e,t){const r=[];for(const i of e)if(i.length){const a=t.maxRandomnessOffset||0,n=i.length;if(n>2){r.push({op:"move",data:[i[0][0]+gt(a,t),i[0][1]+gt(a,t)]});for(let o=1;o<n;o++)r.push({op:"lineTo",data:[i[o][0]+gt(a,t),i[o][1]+gt(a,t)]})}}return{type:"fillPath",ops:r}}function Ri(e,t){return function(r,i){let a=r.fillStyle||"hachure";if(!Me[a])switch(a){case"zigzag":Me[a]||(Me[a]=new LS(i));break;case"cross-hatch":Me[a]||(Me[a]=new AS(i));break;case"dots":Me[a]||(Me[a]=new BS(i));break;case"dashed":Me[a]||(Me[a]=new ES(i));break;case"zigzag-line":Me[a]||(Me[a]=new $S(i));break;default:a="hachure",Me[a]||(Me[a]=new Ec(i))}return Me[a]}(t,RS).fillPolygons(e,t)}function lu(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function Bg(e){return e.randomizer||(e.randomizer=new FS(e.seed||0)),e.randomizer.next()}function $s(e,t,r,i=1){return r.roughness*i*(Bg(r)*(t-e)+e)}function gt(e,t,r=1){return $s(-e,e,t,r)}function Or(e,t,r,i,a,n=!1){const o=n?a.disableMultiStrokeFill:a.disableMultiStroke,s=Tl(e,t,r,i,a,!0,!1);if(o)return s;const l=Tl(e,t,r,i,a,!0,!0);return s.concat(l)}function Tl(e,t,r,i,a,n,o){const s=Math.pow(e-r,2)+Math.pow(t-i,2),l=Math.sqrt(s);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let h=a.maxRandomnessOffset||0;h*h*100>s&&(h=l/10);const u=h/2,d=.2+.2*Bg(a);let p=a.bowing*a.maxRandomnessOffset*(i-t)/200,g=a.bowing*a.maxRandomnessOffset*(e-r)/200;p=gt(p,a,c),g=gt(g,a,c);const m=[],y=()=>gt(u,a,c),x=()=>gt(h,a,c),b=a.preserveVertices;return o?m.push({op:"move",data:[e+(b?0:y()),t+(b?0:y())]}):m.push({op:"move",data:[e+(b?0:gt(h,a,c)),t+(b?0:gt(h,a,c))]}),o?m.push({op:"bcurveTo",data:[p+e+(r-e)*d+y(),g+t+(i-t)*d+y(),p+e+2*(r-e)*d+y(),g+t+2*(i-t)*d+y(),r+(b?0:y()),i+(b?0:y())]}):m.push({op:"bcurveTo",data:[p+e+(r-e)*d+x(),g+t+(i-t)*d+x(),p+e+2*(r-e)*d+x(),g+t+2*(i-t)*d+x(),r+(b?0:x()),i+(b?0:x())]}),m}function In(e,t,r){if(!e.length)return[];const i=[];i.push([e[0][0]+gt(t,r),e[0][1]+gt(t,r)]),i.push([e[0][0]+gt(t,r),e[0][1]+gt(t,r)]);for(let a=1;a<e.length;a++)i.push([e[a][0]+gt(t,r),e[a][1]+gt(t,r)]),a===e.length-1&&i.push([e[a][0]+gt(t,r),e[a][1]+gt(t,r)]);return Fs(i,null,r)}function Fs(e,t,r){const i=e.length,a=[];if(i>3){const n=[],o=1-r.curveTightness;a.push({op:"move",data:[e[1][0],e[1][1]]});for(let s=1;s+2<i;s++){const l=e[s];n[0]=[l[0],l[1]],n[1]=[l[0]+(o*e[s+1][0]-o*e[s-1][0])/6,l[1]+(o*e[s+1][1]-o*e[s-1][1])/6],n[2]=[e[s+1][0]+(o*e[s][0]-o*e[s+2][0])/6,e[s+1][1]+(o*e[s][1]-o*e[s+2][1])/6],n[3]=[e[s+1][0],e[s+1][1]],a.push({op:"bcurveTo",data:[n[1][0],n[1][1],n[2][0],n[2][1],n[3][0],n[3][1]]})}}else i===3?(a.push({op:"move",data:[e[1][0],e[1][1]]}),a.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):i===2&&a.push(...Tl(e[0][0],e[0][1],e[1][0],e[1][1],r,!0,!0));return a}function cu(e,t,r,i,a,n,o,s){const l=[],c=[];if(s.roughness===0){e/=4,c.push([t+i*Math.cos(-e),r+a*Math.sin(-e)]);for(let h=0;h<=2*Math.PI;h+=e){const u=[t+i*Math.cos(h),r+a*Math.sin(h)];l.push(u),c.push(u)}c.push([t+i*Math.cos(0),r+a*Math.sin(0)]),c.push([t+i*Math.cos(e),r+a*Math.sin(e)])}else{const h=gt(.5,s)-Math.PI/2;c.push([gt(n,s)+t+.9*i*Math.cos(h-e),gt(n,s)+r+.9*a*Math.sin(h-e)]);const u=2*Math.PI+h-.01;for(let d=h;d<u;d+=e){const p=[gt(n,s)+t+i*Math.cos(d),gt(n,s)+r+a*Math.sin(d)];l.push(p),c.push(p)}c.push([gt(n,s)+t+i*Math.cos(h+2*Math.PI+.5*o),gt(n,s)+r+a*Math.sin(h+2*Math.PI+.5*o)]),c.push([gt(n,s)+t+.98*i*Math.cos(h+o),gt(n,s)+r+.98*a*Math.sin(h+o)]),c.push([gt(n,s)+t+.9*i*Math.cos(h+.5*o),gt(n,s)+r+.9*a*Math.sin(h+.5*o)])}return[c,l]}function hu(e,t,r,i,a,n,o,s,l){const c=n+gt(.1,l),h=[];h.push([gt(s,l)+t+.9*i*Math.cos(c-e),gt(s,l)+r+.9*a*Math.sin(c-e)]);for(let u=c;u<=o;u+=e)h.push([gt(s,l)+t+i*Math.cos(u),gt(s,l)+r+a*Math.sin(u)]);return h.push([t+i*Math.cos(o),r+a*Math.sin(o)]),h.push([t+i*Math.cos(o),r+a*Math.sin(o)]),Fs(h,null,l)}function OS(e,t,r,i,a,n,o,s){const l=[],c=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3];let h=[0,0];const u=s.disableMultiStroke?1:2,d=s.preserveVertices;for(let p=0;p<u;p++)p===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(d?0:gt(c[0],s)),o[1]+(d?0:gt(c[0],s))]}),h=d?[a,n]:[a+gt(c[p],s),n+gt(c[p],s)],l.push({op:"bcurveTo",data:[e+gt(c[p],s),t+gt(c[p],s),r+gt(c[p],s),i+gt(c[p],s),h[0],h[1]]});return l}function Ra(e){return[...e]}function uu(e,t=0){const r=e.length;if(r<3)throw new Error("A curve must have at least three points.");const i=[];if(r===3)i.push(Ra(e[0]),Ra(e[1]),Ra(e[2]),Ra(e[2]));else{const a=[];a.push(e[0],e[0]);for(let s=1;s<e.length;s++)a.push(e[s]),s===e.length-1&&a.push(e[s]);const n=[],o=1-t;i.push(Ra(a[0]));for(let s=1;s+2<a.length;s++){const l=a[s];n[0]=[l[0],l[1]],n[1]=[l[0]+(o*a[s+1][0]-o*a[s-1][0])/6,l[1]+(o*a[s+1][1]-o*a[s-1][1])/6],n[2]=[a[s+1][0]+(o*a[s][0]-o*a[s+2][0])/6,a[s+1][1]+(o*a[s][1]-o*a[s+2][1])/6],n[3]=[a[s+1][0],a[s+1][1]],i.push(n[1],n[2],n[3])}}return i}function Jn(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function IS(e,t,r){const i=Jn(t,r);if(i===0)return Jn(e,t);let a=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/i;return a=Math.max(0,Math.min(1,a)),Jn(e,ei(t,r,a))}function ei(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]}function Ml(e,t,r,i){const a=i||[];if(function(s,l){const c=s[l+0],h=s[l+1],u=s[l+2],d=s[l+3];let p=3*h[0]-2*c[0]-d[0];p*=p;let g=3*h[1]-2*c[1]-d[1];g*=g;let m=3*u[0]-2*d[0]-c[0];m*=m;let y=3*u[1]-2*d[1]-c[1];return y*=y,p<m&&(p=m),g<y&&(g=y),p+g}(e,t)<r){const s=e[t+0];a.length?(n=a[a.length-1],o=s,Math.sqrt(Jn(n,o))>1&&a.push(s)):a.push(s),a.push(e[t+3])}else{const l=e[t+0],c=e[t+1],h=e[t+2],u=e[t+3],d=ei(l,c,.5),p=ei(c,h,.5),g=ei(h,u,.5),m=ei(d,p,.5),y=ei(p,g,.5),x=ei(m,y,.5);Ml([l,d,m,x],0,r,a),Ml([x,y,g,u],0,r,a)}var n,o;return a}function NS(e,t){return Ps(e,0,e.length,t)}function Ps(e,t,r,i,a){const n=a||[],o=e[t],s=e[r-1];let l=0,c=1;for(let h=t+1;h<r-1;++h){const u=IS(e[h],o,s);u>l&&(l=u,c=h)}return Math.sqrt(l)>i?(Ps(e,t,c+1,i,n),Ps(e,c,r,i,n)):(n.length||n.push(o),n.push(s)),n}function Do(e,t=.15,r){const i=[],a=(e.length-1)/3;for(let n=0;n<a;n++)Ml(e,3*n,t,i);return r&&r>0?Ps(i,0,i.length,r):i}const Oe="none";class Rs{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,r,i){return{shape:t,sets:r||[],options:i||this.defaultOptions}}line(t,r,i,a,n){const o=this._o(n);return this._d("line",[Lg(t,r,i,a,o)],o)}rectangle(t,r,i,a,n){const o=this._o(n),s=[],l=DS(t,r,i,a,o);if(o.fill){const c=[[t,r],[t+i,r],[t+i,r+a],[t,r+a]];o.fillStyle==="solid"?s.push(Ro([c],o)):s.push(Ri([c],o))}return o.stroke!==Oe&&s.push(l),this._d("rectangle",s,o)}ellipse(t,r,i,a,n){const o=this._o(n),s=[],l=Ag(i,a,o),c=Sl(t,r,o,l);if(o.fill)if(o.fillStyle==="solid"){const h=Sl(t,r,o,l).opset;h.type="fillPath",s.push(h)}else s.push(Ri([c.estimatedPoints],o));return o.stroke!==Oe&&s.push(c.opset),this._d("ellipse",s,o)}circle(t,r,i,a){const n=this.ellipse(t,r,i,i,a);return n.shape="circle",n}linearPath(t,r){const i=this._o(r);return this._d("linearPath",[Qn(t,!1,i)],i)}arc(t,r,i,a,n,o,s=!1,l){const c=this._o(l),h=[],u=su(t,r,i,a,n,o,s,!0,c);if(s&&c.fill)if(c.fillStyle==="solid"){const d=Object.assign({},c);d.disableMultiStroke=!0;const p=su(t,r,i,a,n,o,!0,!1,d);p.type="fillPath",h.push(p)}else h.push(function(d,p,g,m,y,x,b){const _=d,T=p;let S=Math.abs(g/2),v=Math.abs(m/2);S+=gt(.01*S,b),v+=gt(.01*v,b);let M=y,N=x;for(;M<0;)M+=2*Math.PI,N+=2*Math.PI;N-M>2*Math.PI&&(M=0,N=2*Math.PI);const V=(N-M)/b.curveStepCount,q=[];for(let F=M;F<=N;F+=V)q.push([_+S*Math.cos(F),T+v*Math.sin(F)]);return q.push([_+S*Math.cos(N),T+v*Math.sin(N)]),q.push([_,T]),Ri([q],b)}(t,r,i,a,n,o,c));return c.stroke!==Oe&&h.push(u),this._d("arc",h,c)}curve(t,r){const i=this._o(r),a=[],n=nu(t,i);if(i.fill&&i.fill!==Oe)if(i.fillStyle==="solid"){const o=nu(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],s=t;if(s.length){const l=typeof s[0][0]=="number"?[s]:s;for(const c of l)c.length<3?o.push(...c):c.length===3?o.push(...Do(uu([c[0],c[0],c[1],c[2]]),10,(1+i.roughness)/2)):o.push(...Do(uu(c),10,(1+i.roughness)/2))}o.length&&a.push(Ri([o],i))}return i.stroke!==Oe&&a.push(n),this._d("curve",a,i)}polygon(t,r){const i=this._o(r),a=[],n=Qn(t,!0,i);return i.fill&&(i.fillStyle==="solid"?a.push(Ro([t],i)):a.push(Ri([t],i))),i.stroke!==Oe&&a.push(n),this._d("polygon",a,i)}path(t,r){const i=this._o(r),a=[];if(!t)return this._d("path",a,i);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const n=i.fill&&i.fill!=="transparent"&&i.fill!==Oe,o=i.stroke!==Oe,s=!!(i.simplification&&i.simplification<1),l=function(h,u,d){const p=Tg(Sg($c(h))),g=[];let m=[],y=[0,0],x=[];const b=()=>{x.length>=4&&m.push(...Do(x,u)),x=[]},_=()=>{b(),m.length&&(g.push(m),m=[])};for(const{key:S,data:v}of p)switch(S){case"M":_(),y=[v[0],v[1]],m.push(y);break;case"L":b(),m.push([v[0],v[1]]);break;case"C":if(!x.length){const M=m.length?m[m.length-1]:y;x.push([M[0],M[1]])}x.push([v[0],v[1]]),x.push([v[2],v[3]]),x.push([v[4],v[5]]);break;case"Z":b(),m.push([y[0],y[1]])}if(_(),!d)return g;const T=[];for(const S of g){const v=NS(S,d);v.length&&T.push(v)}return T}(t,1,s?4-4*(i.simplification||1):(1+i.roughness)/2),c=ou(t,i);if(n)if(i.fillStyle==="solid")if(l.length===1){const h=ou(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(h.ops)})}else a.push(Ro(l,i));else a.push(Ri(l,i));return o&&(s?l.forEach(h=>{a.push(Qn(h,!1,i))}):a.push(c)),this._d("path",a,i)}opsToPath(t,r){let i="";for(const a of t.ops){const n=typeof r=="number"&&r>=0?a.data.map(o=>+o.toFixed(r)):a.data;switch(a.op){case"move":i+=`M${n[0]} ${n[1]} `;break;case"bcurveTo":i+=`C${n[0]} ${n[1]}, ${n[2]} ${n[3]}, ${n[4]} ${n[5]} `;break;case"lineTo":i+=`L${n[0]} ${n[1]} `}}return i.trim()}toPaths(t){const r=t.sets||[],i=t.options||this.defaultOptions,a=[];for(const n of r){let o=null;switch(n.type){case"path":o={d:this.opsToPath(n),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:Oe};break;case"fillPath":o={d:this.opsToPath(n),stroke:Oe,strokeWidth:0,fill:i.fill||Oe};break;case"fillSketch":o=this.fillSketch(n,i)}o&&a.push(o)}return a}fillSketch(t,r){let i=r.fillWeight;return i<0&&(i=r.strokeWidth/2),{d:this.opsToPath(t),stroke:r.fill||Oe,strokeWidth:i,fill:Oe}}_mergedShape(t){return t.filter((r,i)=>i===0||r.op!=="move")}}class qS{constructor(t,r){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Rs(r)}draw(t){const r=t.sets||[],i=t.options||this.getDefaultOptions(),a=this.ctx,n=t.options.fixedDecimalPlaceDigits;for(const o of r)switch(o.type){case"path":a.save(),a.strokeStyle=i.stroke==="none"?"transparent":i.stroke,a.lineWidth=i.strokeWidth,i.strokeLineDash&&a.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(a.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(a,o,n),a.restore();break;case"fillPath":{a.save(),a.fillStyle=i.fill||"";const s=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(a,o,n,s),a.restore();break}case"fillSketch":this.fillSketch(a,o,i)}}fillSketch(t,r,i){let a=i.fillWeight;a<0&&(a=i.strokeWidth/2),t.save(),i.fillLineDash&&t.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(t.lineDashOffset=i.fillLineDashOffset),t.strokeStyle=i.fill||"",t.lineWidth=a,this._drawToContext(t,r,i.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,r,i,a="nonzero"){t.beginPath();for(const n of r.ops){const o=typeof i=="number"&&i>=0?n.data.map(s=>+s.toFixed(i)):n.data;switch(n.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1])}}r.type==="fillPath"?t.fill(a):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,r,i,a,n){const o=this.gen.line(t,r,i,a,n);return this.draw(o),o}rectangle(t,r,i,a,n){const o=this.gen.rectangle(t,r,i,a,n);return this.draw(o),o}ellipse(t,r,i,a,n){const o=this.gen.ellipse(t,r,i,a,n);return this.draw(o),o}circle(t,r,i,a){const n=this.gen.circle(t,r,i,a);return this.draw(n),n}linearPath(t,r){const i=this.gen.linearPath(t,r);return this.draw(i),i}polygon(t,r){const i=this.gen.polygon(t,r);return this.draw(i),i}arc(t,r,i,a,n,o,s=!1,l){const c=this.gen.arc(t,r,i,a,n,o,s,l);return this.draw(c),c}curve(t,r){const i=this.gen.curve(t,r);return this.draw(i),i}path(t,r){const i=this.gen.path(t,r);return this.draw(i),i}}const Nn="http://www.w3.org/2000/svg";class zS{constructor(t,r){this.svg=t,this.gen=new Rs(r)}draw(t){const r=t.sets||[],i=t.options||this.getDefaultOptions(),a=this.svg.ownerDocument||window.document,n=a.createElementNS(Nn,"g"),o=t.options.fixedDecimalPlaceDigits;for(const s of r){let l=null;switch(s.type){case"path":l=a.createElementNS(Nn,"path"),l.setAttribute("d",this.opsToPath(s,o)),l.setAttribute("stroke",i.stroke),l.setAttribute("stroke-width",i.strokeWidth+""),l.setAttribute("fill","none"),i.strokeLineDash&&l.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break;case"fillPath":l=a.createElementNS(Nn,"path"),l.setAttribute("d",this.opsToPath(s,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",i.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(a,s,i)}l&&n.appendChild(l)}return n}fillSketch(t,r,i){let a=i.fillWeight;a<0&&(a=i.strokeWidth/2);const n=t.createElementNS(Nn,"path");return n.setAttribute("d",this.opsToPath(r,i.fixedDecimalPlaceDigits)),n.setAttribute("stroke",i.fill||""),n.setAttribute("stroke-width",a+""),n.setAttribute("fill","none"),i.fillLineDash&&n.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&n.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),n}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,r){return this.gen.opsToPath(t,r)}line(t,r,i,a,n){const o=this.gen.line(t,r,i,a,n);return this.draw(o)}rectangle(t,r,i,a,n){const o=this.gen.rectangle(t,r,i,a,n);return this.draw(o)}ellipse(t,r,i,a,n){const o=this.gen.ellipse(t,r,i,a,n);return this.draw(o)}circle(t,r,i,a){const n=this.gen.circle(t,r,i,a);return this.draw(n)}linearPath(t,r){const i=this.gen.linearPath(t,r);return this.draw(i)}polygon(t,r){const i=this.gen.polygon(t,r);return this.draw(i)}arc(t,r,i,a,n,o,s=!1,l){const c=this.gen.arc(t,r,i,a,n,o,s,l);return this.draw(c)}curve(t,r){const i=this.gen.curve(t,r);return this.draw(i)}path(t,r){const i=this.gen.path(t,r);return this.draw(i)}}var st={canvas:(e,t)=>new qS(e,t),svg:(e,t)=>new zS(e,t),generator:e=>new Rs(e),newSeed:()=>Rs.newSeed()},bt=f(async(e,t,r)=>{var u,d;let i;const a=t.useHtmlLabels||le((u=Et())==null?void 0:u.htmlLabels);r?i=r:i="node default";const n=e.insert("g").attr("class",i).attr("id",t.domId||t.id),o=n.insert("g").attr("class","label").attr("style",Ce(t.labelStyle));let s;t.label===void 0?s="":s=typeof t.label=="string"?t.label:t.label[0];const l=await qr(o,ui(vi(s),Et()),{useHtmlLabels:a,width:t.width||((d=Et().flowchart)==null?void 0:d.wrappingWidth),cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let c=l.getBBox();const h=((t==null?void 0:t.padding)??0)/2;if(a){const p=l.children[0],g=Mt(l),m=p.getElementsByTagName("img");if(m){const y=s.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...m].map(x=>new Promise(b=>{function _(){if(x.style.display="flex",x.style.flexDirection="column",y){const T=Et().fontSize?Et().fontSize:window.getComputedStyle(document.body).fontSize,S=5,[v=Wu.fontSize]=eo(T),M=v*S+"px";x.style.minWidth=M,x.style.maxWidth=M}else x.style.width="100%";b(x)}f(_,"setupImage"),setTimeout(()=>{x.complete&&_()}),x.addEventListener("error",_),x.addEventListener("load",_)})))}c=p.getBoundingClientRect(),g.attr("width",c.width),g.attr("height",c.height)}return a?o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):o.attr("transform","translate(0, "+-c.height/2+")"),t.centerLabel&&o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:n,bbox:c,halfPadding:h,label:o}},"labelHelper"),Oo=f(async(e,t,r)=>{var l,c,h,u,d,p;const i=r.useHtmlLabels||le((c=(l=Et())==null?void 0:l.flowchart)==null?void 0:c.htmlLabels),a=e.insert("g").attr("class","label").attr("style",r.labelStyle||""),n=await qr(a,ui(vi(t),Et()),{useHtmlLabels:i,width:r.width||((u=(h=Et())==null?void 0:h.flowchart)==null?void 0:u.wrappingWidth),style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let o=n.getBBox();const s=r.padding/2;if(le((p=(d=Et())==null?void 0:d.flowchart)==null?void 0:p.htmlLabels)){const g=n.children[0],m=Mt(n);o=g.getBoundingClientRect(),m.attr("width",o.width),m.attr("height",o.height)}return i?a.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):a.attr("transform","translate(0, "+-o.height/2+")"),r.centerLabel&&a.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),a.insert("rect",":first-child"),{shapeSvg:e,bbox:o,halfPadding:s,label:a}},"insertLabel"),lt=f((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),mt=f((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function Lt(e){const t=e.map((r,i)=>`${i===0?"M":"L"}${r.x},${r.y}`);return t.push("Z"),t.join(" ")}f(Lt,"createPathFromPoints");function Ir(e,t,r,i,a,n){const o=[],l=r-e,c=i-t,h=l/n,u=2*Math.PI/h,d=t+c/2;for(let p=0;p<=50;p++){const g=p/50,m=e+g*l,y=d+a*Math.sin(u*(m-e));o.push({x:m,y})}return o}f(Ir,"generateFullSineWavePoints");function Fc(e,t,r,i,a,n){const o=[],s=a*Math.PI/180,h=(n*Math.PI/180-s)/(i-1);for(let u=0;u<i;u++){const d=s+u*h,p=e+r*Math.cos(d),g=t+r*Math.sin(d);o.push({x:-p,y:-g})}return o}f(Fc,"generateCirclePoints");var WS=f((e,t)=>{var r=e.x,i=e.y,a=t.x-r,n=t.y-i,o=e.width/2,s=e.height/2,l,c;return Math.abs(n)*o>Math.abs(a)*s?(n<0&&(s=-s),l=n===0?0:s*a/n,c=s):(a<0&&(o=-o),l=o,c=a===0?0:o*n/a),{x:r+l,y:i+c}},"intersectRect"),ha=WS;function Eg(e,t){t&&e.attr("style",t)}f(Eg,"applyStyle");async function $g(e){const t=Mt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div");let i=e.label;e.label&&Ji(e.label)&&(i=await ql(e.label.replace(sa.lineBreakRegex,`
`),Et()));const a=e.isNode?"nodeLabel":"edgeLabel";return r.html('<span class="'+a+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+i+"</span>"),Eg(r,e.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}f($g,"addHtmlLabel");var jS=f(async(e,t,r,i)=>{let a=e||"";if(typeof a=="object"&&(a=a[0]),le(Et().flowchart.htmlLabels)){a=a.replace(/\\n|\n/g,"<br />"),I.info("vertexText"+a);const n={isNode:i,label:vi(a).replace(/fa[blrs]?:fa-[\w-]+/g,s=>`<i class='${s.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await $g(n)}else{const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("style",t.replace("color:","fill:"));let o=[];typeof a=="string"?o=a.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(a)?o=a:o=[];for(const s of o){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),r?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=s.trim(),n.appendChild(l)}return n}},"createLabel"),oi=jS,Mr=f((e,t,r,i,a)=>["M",e+a,t,"H",e+r-a,"A",a,a,0,0,1,e+r,t+a,"V",t+i-a,"A",a,a,0,0,1,e+r-a,t+i,"H",e+a,"A",a,a,0,0,1,e,t+i-a,"V",t+a,"A",a,a,0,0,1,e+a,t,"Z"].join(" "),"createRoundedRectPathD"),Fg=f(async(e,t)=>{I.info("Creating subgraph rect for ",t.id,t);const r=Et(),{themeVariables:i,handDrawnSeed:a}=r,{clusterBkg:n,clusterBorder:o}=i,{labelStyles:s,nodeStyles:l,borderStyles:c,backgroundStyles:h}=ct(t),u=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),d=le(r.flowchart.htmlLabels),p=u.insert("g").attr("class","cluster-label "),g=await qr(p,t.label,{style:t.labelStyle,useHtmlLabels:d,isNode:!0});let m=g.getBBox();if(le(r.flowchart.htmlLabels)){const M=g.children[0],N=Mt(g);m=M.getBoundingClientRect(),N.attr("width",m.width),N.attr("height",m.height)}const y=t.width<=m.width+t.padding?m.width+t.padding:t.width;t.width<=m.width+t.padding?t.diff=(y-t.width)/2-t.padding:t.diff=-t.padding;const x=t.height,b=t.x-y/2,_=t.y-x/2;I.trace("Data ",t,JSON.stringify(t));let T;if(t.look==="handDrawn"){const M=st.svg(u),N=ot(t,{roughness:.7,fill:n,stroke:o,fillWeight:3,seed:a}),V=M.path(Mr(b,_,y,x,0),N);T=u.insert(()=>(I.debug("Rough node insert CXC",V),V),":first-child"),T.select("path:nth-child(2)").attr("style",c.join(";")),T.select("path").attr("style",h.join(";").replace("fill","stroke"))}else T=u.insert("rect",":first-child"),T.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",b).attr("y",_).attr("width",y).attr("height",x);const{subGraphTitleTopMargin:S}=Ql(r);if(p.attr("transform",`translate(${t.x-m.width/2}, ${t.y-t.height/2+S})`),s){const M=p.select("span");M&&M.attr("style",s)}const v=T.node().getBBox();return t.offsetX=0,t.width=v.width,t.height=v.height,t.offsetY=m.height-t.padding/2,t.intersect=function(M){return ha(t,M)},{cluster:u,labelBBox:m}},"rect"),HS=f((e,t)=>{const r=e.insert("g").attr("class","note-cluster").attr("id",t.id),i=r.insert("rect",":first-child"),a=0*t.padding,n=a/2;i.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-n).attr("y",t.y-t.height/2-n).attr("width",t.width+a).attr("height",t.height+a).attr("fill","none");const o=i.node().getBBox();return t.width=o.width,t.height=o.height,t.intersect=function(s){return ha(t,s)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),VS=f(async(e,t)=>{const r=Et(),{themeVariables:i,handDrawnSeed:a}=r,{altBackground:n,compositeBackground:o,compositeTitleBackground:s,nodeBorder:l}=i,c=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),h=c.insert("g",":first-child"),u=c.insert("g").attr("class","cluster-label");let d=c.append("rect");const p=u.node().appendChild(await oi(t.label,t.labelStyle,void 0,!0));let g=p.getBBox();if(le(r.flowchart.htmlLabels)){const V=p.children[0],q=Mt(p);g=V.getBoundingClientRect(),q.attr("width",g.width),q.attr("height",g.height)}const m=0*t.padding,y=m/2,x=(t.width<=g.width+t.padding?g.width+t.padding:t.width)+m;t.width<=g.width+t.padding?t.diff=(x-t.width)/2-t.padding:t.diff=-t.padding;const b=t.height+m,_=t.height+m-g.height-6,T=t.x-x/2,S=t.y-b/2;t.width=x;const v=t.y-t.height/2-y+g.height+2;let M;if(t.look==="handDrawn"){const V=t.cssClasses.includes("statediagram-cluster-alt"),q=st.svg(c),F=t.rx||t.ry?q.path(Mr(T,S,x,b,10),{roughness:.7,fill:s,fillStyle:"solid",stroke:l,seed:a}):q.rectangle(T,S,x,b,{seed:a});M=c.insert(()=>F,":first-child");const Y=q.rectangle(T,v,x,_,{fill:V?n:o,fillStyle:V?"hachure":"solid",stroke:l,seed:a});M=c.insert(()=>F,":first-child"),d=c.insert(()=>Y)}else M=h.insert("rect",":first-child"),M.attr("class","outer").attr("x",T).attr("y",S).attr("width",x).attr("height",b).attr("data-look",t.look),d.attr("class","inner").attr("x",T).attr("y",v).attr("width",x).attr("height",_);u.attr("transform",`translate(${t.x-g.width/2}, ${S+1-(le(r.flowchart.htmlLabels)?0:3)})`);const N=M.node().getBBox();return t.height=N.height,t.offsetX=0,t.offsetY=g.height-t.padding/2,t.labelBBox=g,t.intersect=function(V){return ha(t,V)},{cluster:c,labelBBox:g}},"roundedWithTitle"),US=f(async(e,t)=>{I.info("Creating subgraph rect for ",t.id,t);const r=Et(),{themeVariables:i,handDrawnSeed:a}=r,{clusterBkg:n,clusterBorder:o}=i,{labelStyles:s,nodeStyles:l,borderStyles:c,backgroundStyles:h}=ct(t),u=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),d=le(r.flowchart.htmlLabels),p=u.insert("g").attr("class","cluster-label "),g=await qr(p,t.label,{style:t.labelStyle,useHtmlLabels:d,isNode:!0,width:t.width});let m=g.getBBox();if(le(r.flowchart.htmlLabels)){const M=g.children[0],N=Mt(g);m=M.getBoundingClientRect(),N.attr("width",m.width),N.attr("height",m.height)}const y=t.width<=m.width+t.padding?m.width+t.padding:t.width;t.width<=m.width+t.padding?t.diff=(y-t.width)/2-t.padding:t.diff=-t.padding;const x=t.height,b=t.x-y/2,_=t.y-x/2;I.trace("Data ",t,JSON.stringify(t));let T;if(t.look==="handDrawn"){const M=st.svg(u),N=ot(t,{roughness:.7,fill:n,stroke:o,fillWeight:4,seed:a}),V=M.path(Mr(b,_,y,x,t.rx),N);T=u.insert(()=>(I.debug("Rough node insert CXC",V),V),":first-child"),T.select("path:nth-child(2)").attr("style",c.join(";")),T.select("path").attr("style",h.join(";").replace("fill","stroke"))}else T=u.insert("rect",":first-child"),T.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",b).attr("y",_).attr("width",y).attr("height",x);const{subGraphTitleTopMargin:S}=Ql(r);if(p.attr("transform",`translate(${t.x-m.width/2}, ${t.y-t.height/2+S})`),s){const M=p.select("span");M&&M.attr("style",s)}const v=T.node().getBBox();return t.offsetX=0,t.width=v.width,t.height=v.height,t.offsetY=m.height-t.padding/2,t.intersect=function(M){return ha(t,M)},{cluster:u,labelBBox:m}},"kanbanSection"),YS=f((e,t)=>{const r=Et(),{themeVariables:i,handDrawnSeed:a}=r,{nodeBorder:n}=i,o=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),s=o.insert("g",":first-child"),l=0*t.padding,c=t.width+l;t.diff=-t.padding;const h=t.height+l,u=t.x-c/2,d=t.y-h/2;t.width=c;let p;if(t.look==="handDrawn"){const y=st.svg(o).rectangle(u,d,c,h,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:n,seed:a});p=o.insert(()=>y,":first-child")}else p=s.insert("rect",":first-child"),p.attr("class","divider").attr("x",u).attr("y",d).attr("width",c).attr("height",h).attr("data-look",t.look);const g=p.node().getBBox();return t.height=g.height,t.offsetX=0,t.offsetY=0,t.intersect=function(m){return ha(t,m)},{cluster:o,labelBBox:{}}},"divider"),GS=Fg,XS={rect:Fg,squareRect:GS,roundedWithTitle:VS,noteGroup:HS,divider:YS,kanbanSection:US},Pg=new Map,ZS=f(async(e,t)=>{const r=t.shape||"rect",i=await XS[r](e,t);return Pg.set(t.id,i),i},"insertCluster"),xE=f(()=>{Pg=new Map},"clear");function Rg(e,t){return e.intersect(t)}f(Rg,"intersectNode");var KS=Rg;function Dg(e,t,r,i){var a=e.x,n=e.y,o=a-i.x,s=n-i.y,l=Math.sqrt(t*t*s*s+r*r*o*o),c=Math.abs(t*r*o/l);i.x<a&&(c=-c);var h=Math.abs(t*r*s/l);return i.y<n&&(h=-h),{x:a+c,y:n+h}}f(Dg,"intersectEllipse");var Og=Dg;function Ig(e,t,r){return Og(e,t,t,r)}f(Ig,"intersectCircle");var QS=Ig;function Ng(e,t,r,i){var a,n,o,s,l,c,h,u,d,p,g,m,y,x,b;if(a=t.y-e.y,o=e.x-t.x,l=t.x*e.y-e.x*t.y,d=a*r.x+o*r.y+l,p=a*i.x+o*i.y+l,!(d!==0&&p!==0&&Ll(d,p))&&(n=i.y-r.y,s=r.x-i.x,c=i.x*r.y-r.x*i.y,h=n*e.x+s*e.y+c,u=n*t.x+s*t.y+c,!(h!==0&&u!==0&&Ll(h,u))&&(g=a*s-n*o,g!==0)))return m=Math.abs(g/2),y=o*c-s*l,x=y<0?(y-m)/g:(y+m)/g,y=n*l-a*c,b=y<0?(y-m)/g:(y+m)/g,{x,y:b}}f(Ng,"intersectLine");function Ll(e,t){return e*t>0}f(Ll,"sameSign");var JS=Ng;function qg(e,t,r){let i=e.x,a=e.y,n=[],o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(h){o=Math.min(o,h.x),s=Math.min(s,h.y)}):(o=Math.min(o,t.x),s=Math.min(s,t.y));let l=i-e.width/2-o,c=a-e.height/2-s;for(let h=0;h<t.length;h++){let u=t[h],d=t[h<t.length-1?h+1:0],p=JS(e,r,{x:l+u.x,y:c+u.y},{x:l+d.x,y:c+d.y});p&&n.push(p)}return n.length?(n.length>1&&n.sort(function(h,u){let d=h.x-r.x,p=h.y-r.y,g=Math.sqrt(d*d+p*p),m=u.x-r.x,y=u.y-r.y,x=Math.sqrt(m*m+y*y);return g<x?-1:g===x?0:1}),n[0]):e}f(qg,"intersectPolygon");var tT=qg,it={node:KS,circle:QS,ellipse:Og,polygon:tT,rect:ha};function zg(e,t){const{labelStyles:r}=ct(t);t.labelStyle=r;const i=mt(t);let a=i;i||(a="anchor");const n=e.insert("g").attr("class",a).attr("id",t.domId||t.id),o=1,{cssStyles:s}=t,l=st.svg(n),c=ot(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(c.roughness=0);const h=l.circle(0,0,o*2,c),u=n.insert(()=>h,":first-child");return u.attr("class","anchor").attr("style",Ce(s)),lt(t,u),t.intersect=function(d){return I.info("Circle intersect",t,o,d),it.circle(t,o,d)},n}f(zg,"anchor");function Al(e,t,r,i,a,n,o){const l=(e+r)/2,c=(t+i)/2,h=Math.atan2(i-t,r-e),u=(r-e)/2,d=(i-t)/2,p=u/a,g=d/n,m=Math.sqrt(p**2+g**2);if(m>1)throw new Error("The given radii are too small to create an arc between the points.");const y=Math.sqrt(1-m**2),x=l+y*n*Math.sin(h)*(o?-1:1),b=c-y*a*Math.cos(h)*(o?-1:1),_=Math.atan2((t-b)/n,(e-x)/a);let S=Math.atan2((i-b)/n,(r-x)/a)-_;o&&S<0&&(S+=2*Math.PI),!o&&S>0&&(S-=2*Math.PI);const v=[];for(let M=0;M<20;M++){const N=M/19,V=_+N*S,q=x+a*Math.cos(V),F=b+n*Math.sin(V);v.push({x:q,y:F})}return v}f(Al,"generateArcPoints");async function Wg(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=n.width+t.padding+20,s=n.height+t.padding,l=s/2,c=l/(2.5+s/50),{cssStyles:h}=t,u=[{x:o/2,y:-s/2},{x:-o/2,y:-s/2},...Al(-o/2,-s/2,-o/2,s/2,c,l,!1),{x:o/2,y:s/2},...Al(o/2,s/2,o/2,-s/2,c,l,!0)],d=st.svg(a),p=ot(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=Lt(u),m=d.path(g,p),y=a.insert(()=>m,":first-child");return y.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",i),y.attr("transform",`translate(${c/2}, 0)`),lt(t,y),t.intersect=function(x){return it.polygon(t,u,x)},a}f(Wg,"bowTieRect");function Lr(e,t,r,i){return e.insert("polygon",":first-child").attr("points",i.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}f(Lr,"insertPolygonShape");async function jg(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=n.height+t.padding,s=12,l=n.width+t.padding+s,c=0,h=l,u=-o,d=0,p=[{x:c+s,y:u},{x:h,y:u},{x:h,y:d},{x:c,y:d},{x:c,y:u+s},{x:c+s,y:u}];let g;const{cssStyles:m}=t;if(t.look==="handDrawn"){const y=st.svg(a),x=ot(t,{}),b=Lt(p),_=y.path(b,x);g=a.insert(()=>_,":first-child").attr("transform",`translate(${-l/2}, ${o/2})`),m&&g.attr("style",m)}else g=Lr(a,l,o,p);return i&&g.attr("style",i),lt(t,g),t.intersect=function(y){return it.polygon(t,p,y)},a}f(jg,"card");function Hg(e,t){const{nodeStyles:r}=ct(t);t.label="";const i=e.insert("g").attr("class",mt(t)).attr("id",t.domId??t.id),{cssStyles:a}=t,n=Math.max(28,t.width??0),o=[{x:0,y:n/2},{x:n/2,y:0},{x:0,y:-n/2},{x:-n/2,y:0}],s=st.svg(i),l=ot(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=Lt(o),h=s.path(c,l),u=i.insert(()=>h,":first-child");return a&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",a),r&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",r),t.width=28,t.height=28,t.intersect=function(d){return it.polygon(t,o,d)},i}f(Hg,"choice");async function Vg(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,halfPadding:o}=await bt(e,t,mt(t)),s=n.width/2+o;let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const h=st.svg(a),u=ot(t,{}),d=h.circle(0,0,s*2,u);l=a.insert(()=>d,":first-child"),l.attr("class","basic label-container").attr("style",Ce(c))}else l=a.insert("circle",":first-child").attr("class","basic label-container").attr("style",i).attr("r",s).attr("cx",0).attr("cy",0);return lt(t,l),t.intersect=function(h){return I.info("Circle intersect",t,s,h),it.circle(t,s,h)},a}f(Vg,"circle");function Ug(e){const t=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),i=e*2,a={x:i/2*t,y:i/2*r},n={x:-(i/2)*t,y:i/2*r},o={x:-(i/2)*t,y:-(i/2)*r},s={x:i/2*t,y:-(i/2)*r};return`M ${n.x},${n.y} L ${s.x},${s.y}
                   M ${a.x},${a.y} L ${o.x},${o.y}`}f(Ug,"createLine");function Yg(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r,t.label="";const a=e.insert("g").attr("class",mt(t)).attr("id",t.domId??t.id),n=Math.max(30,(t==null?void 0:t.width)??0),{cssStyles:o}=t,s=st.svg(a),l=ot(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=s.circle(0,0,n*2,l),h=Ug(n),u=s.path(h,l),d=a.insert(()=>c,":first-child");return d.insert(()=>u),o&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",o),i&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",i),lt(t,d),t.intersect=function(p){return I.info("crossedCircle intersect",t,{radius:n,point:p}),it.circle(t,n,p)},a}f(Yg,"crossedCircle");function xr(e,t,r,i=100,a=0,n=180){const o=[],s=a*Math.PI/180,h=(n*Math.PI/180-s)/(i-1);for(let u=0;u<i;u++){const d=s+u*h,p=e+r*Math.cos(d),g=t+r*Math.sin(d);o.push({x:-p,y:-g})}return o}f(xr,"generateCirclePoints");async function Gg(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=n.width+(t.padding??0),l=n.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=t,u=[...xr(s/2,-l/2,c,30,-90,0),{x:-s/2-c,y:c},...xr(s/2+c*2,-c,c,20,-180,-270),...xr(s/2+c*2,c,c,20,-90,-180),{x:-s/2-c,y:-l/2},...xr(s/2,l/2,c,20,0,90)],d=[{x:s/2,y:-l/2-c},{x:-s/2,y:-l/2-c},...xr(s/2,-l/2,c,20,-90,0),{x:-s/2-c,y:-c},...xr(s/2+s*.1,-c,c,20,-180,-270),...xr(s/2+s*.1,c,c,20,-90,-180),{x:-s/2-c,y:l/2},...xr(s/2,l/2,c,20,0,90),{x:-s/2,y:l/2+c},{x:s/2,y:l/2+c}],p=st.svg(a),g=ot(t,{fill:"none"});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=Lt(u).replace("Z",""),x=p.path(y,g),b=Lt(d),_=p.path(b,{...g}),T=a.insert("g",":first-child");return T.insert(()=>_,":first-child").attr("stroke-opacity",0),T.insert(()=>x,":first-child"),T.attr("class","text"),h&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",i),T.attr("transform",`translate(${c}, 0)`),o.attr("transform",`translate(${-s/2+c-(n.x-(n.left??0))},${-l/2+(t.padding??0)/2-(n.y-(n.top??0))})`),lt(t,T),t.intersect=function(S){return it.polygon(t,d,S)},a}f(Gg,"curlyBraceLeft");function br(e,t,r,i=100,a=0,n=180){const o=[],s=a*Math.PI/180,h=(n*Math.PI/180-s)/(i-1);for(let u=0;u<i;u++){const d=s+u*h,p=e+r*Math.cos(d),g=t+r*Math.sin(d);o.push({x:p,y:g})}return o}f(br,"generateCirclePoints");async function Xg(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=n.width+(t.padding??0),l=n.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=t,u=[...br(s/2,-l/2,c,20,-90,0),{x:s/2+c,y:-c},...br(s/2+c*2,-c,c,20,-180,-270),...br(s/2+c*2,c,c,20,-90,-180),{x:s/2+c,y:l/2},...br(s/2,l/2,c,20,0,90)],d=[{x:-s/2,y:-l/2-c},{x:s/2,y:-l/2-c},...br(s/2,-l/2,c,20,-90,0),{x:s/2+c,y:-c},...br(s/2+c*2,-c,c,20,-180,-270),...br(s/2+c*2,c,c,20,-90,-180),{x:s/2+c,y:l/2},...br(s/2,l/2,c,20,0,90),{x:s/2,y:l/2+c},{x:-s/2,y:l/2+c}],p=st.svg(a),g=ot(t,{fill:"none"});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=Lt(u).replace("Z",""),x=p.path(y,g),b=Lt(d),_=p.path(b,{...g}),T=a.insert("g",":first-child");return T.insert(()=>_,":first-child").attr("stroke-opacity",0),T.insert(()=>x,":first-child"),T.attr("class","text"),h&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",i),T.attr("transform",`translate(${-c}, 0)`),o.attr("transform",`translate(${-s/2+(t.padding??0)/2-(n.x-(n.left??0))},${-l/2+(t.padding??0)/2-(n.y-(n.top??0))})`),lt(t,T),t.intersect=function(S){return it.polygon(t,d,S)},a}f(Xg,"curlyBraceRight");function he(e,t,r,i=100,a=0,n=180){const o=[],s=a*Math.PI/180,h=(n*Math.PI/180-s)/(i-1);for(let u=0;u<i;u++){const d=s+u*h,p=e+r*Math.cos(d),g=t+r*Math.sin(d);o.push({x:-p,y:-g})}return o}f(he,"generateCirclePoints");async function Zg(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=n.width+(t.padding??0),l=n.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=t,u=[...he(s/2,-l/2,c,30,-90,0),{x:-s/2-c,y:c},...he(s/2+c*2,-c,c,20,-180,-270),...he(s/2+c*2,c,c,20,-90,-180),{x:-s/2-c,y:-l/2},...he(s/2,l/2,c,20,0,90)],d=[...he(-s/2+c+c/2,-l/2,c,20,-90,-180),{x:s/2-c/2,y:c},...he(-s/2-c/2,-c,c,20,0,90),...he(-s/2-c/2,c,c,20,-90,0),{x:s/2-c/2,y:-c},...he(-s/2+c+c/2,l/2,c,30,-180,-270)],p=[{x:s/2,y:-l/2-c},{x:-s/2,y:-l/2-c},...he(s/2,-l/2,c,20,-90,0),{x:-s/2-c,y:-c},...he(s/2+c*2,-c,c,20,-180,-270),...he(s/2+c*2,c,c,20,-90,-180),{x:-s/2-c,y:l/2},...he(s/2,l/2,c,20,0,90),{x:-s/2,y:l/2+c},{x:s/2-c-c/2,y:l/2+c},...he(-s/2+c+c/2,-l/2,c,20,-90,-180),{x:s/2-c/2,y:c},...he(-s/2-c/2,-c,c,20,0,90),...he(-s/2-c/2,c,c,20,-90,0),{x:s/2-c/2,y:-c},...he(-s/2+c+c/2,l/2,c,30,-180,-270)],g=st.svg(a),m=ot(t,{fill:"none"});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const x=Lt(u).replace("Z",""),b=g.path(x,m),T=Lt(d).replace("Z",""),S=g.path(T,m),v=Lt(p),M=g.path(v,{...m}),N=a.insert("g",":first-child");return N.insert(()=>M,":first-child").attr("stroke-opacity",0),N.insert(()=>b,":first-child"),N.insert(()=>S,":first-child"),N.attr("class","text"),h&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",i),N.attr("transform",`translate(${c-c/4}, 0)`),o.attr("transform",`translate(${-s/2+(t.padding??0)/2-(n.x-(n.left??0))},${-l/2+(t.padding??0)/2-(n.y-(n.top??0))})`),lt(t,N),t.intersect=function(V){return it.polygon(t,p,V)},a}f(Zg,"curlyBraces");async function Kg(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=80,s=20,l=Math.max(o,(n.width+(t.padding??0)*2)*1.25,(t==null?void 0:t.width)??0),c=Math.max(s,n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=c/2,{cssStyles:u}=t,d=st.svg(a),p=ot(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=l,m=c,y=g-h,x=m/4,b=[{x:y,y:0},{x,y:0},{x:0,y:m/2},{x,y:m},{x:y,y:m},...Fc(-y,-m/2,h,50,270,90)],_=Lt(b),T=d.path(_,p),S=a.insert(()=>T,":first-child");return S.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",i),S.attr("transform",`translate(${-l/2}, ${-c/2})`),lt(t,S),t.intersect=function(v){return it.polygon(t,b,v)},a}f(Kg,"curvedTrapezoid");var eT=f((e,t,r,i,a,n)=>[`M${e},${t+n}`,`a${a},${n} 0,0,0 ${r},0`,`a${a},${n} 0,0,0 ${-r},0`,`l0,${i}`,`a${a},${n} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createCylinderPathD"),rT=f((e,t,r,i,a,n)=>[`M${e},${t+n}`,`M${e+r},${t+n}`,`a${a},${n} 0,0,0 ${-r},0`,`l0,${i}`,`a${a},${n} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createOuterCylinderPathD"),iT=f((e,t,r,i,a,n)=>[`M${e-r/2},${-i/2}`,`a${a},${n} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function Qg(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=Math.max(n.width+t.padding,t.width??0),l=s/2,c=l/(2.5+s/50),h=Math.max(n.height+c+t.padding,t.height??0);let u;const{cssStyles:d}=t;if(t.look==="handDrawn"){const p=st.svg(a),g=rT(0,0,s,h,l,c),m=iT(0,c,s,h,l,c),y=p.path(g,ot(t,{})),x=p.path(m,ot(t,{fill:"none"}));u=a.insert(()=>x,":first-child"),u=a.insert(()=>y,":first-child"),u.attr("class","basic label-container"),d&&u.attr("style",d)}else{const p=eT(0,0,s,h,l,c);u=a.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",Ce(d)).attr("style",i)}return u.attr("label-offset-y",c),u.attr("transform",`translate(${-s/2}, ${-(h/2+c)})`),lt(t,u),o.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)+(t.padding??0)/1.5-(n.y-(n.top??0))})`),t.intersect=function(p){const g=it.rect(t,p),m=g.x-(t.x??0);if(l!=0&&(Math.abs(m)<(t.width??0)/2||Math.abs(m)==(t.width??0)/2&&Math.abs(g.y-(t.y??0))>(t.height??0)/2-c)){let y=c*c*(1-m*m/(l*l));y>0&&(y=Math.sqrt(y)),y=c-y,p.y-(t.y??0)>0&&(y=-y),g.y+=y}return g},a}f(Qg,"cylinder");async function Jg(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=n.width+t.padding,l=n.height+t.padding,c=l*.2,h=-s/2,u=-l/2-c/2,{cssStyles:d}=t,p=st.svg(a),g=ot(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=[{x:h,y:u+c},{x:-h,y:u+c},{x:-h,y:-u},{x:h,y:-u},{x:h,y:u},{x:-h,y:u},{x:-h,y:u+c}],y=p.polygon(m.map(b=>[b.x,b.y]),g),x=a.insert(()=>y,":first-child");return x.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",d),i&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",i),o.attr("transform",`translate(${h+(t.padding??0)/2-(n.x-(n.left??0))}, ${u+c+(t.padding??0)/2-(n.y-(n.top??0))})`),lt(t,x),t.intersect=function(b){return it.rect(t,b)},a}f(Jg,"dividedRectangle");async function tm(e,t){var d,p;const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,halfPadding:o}=await bt(e,t,mt(t)),l=n.width/2+o+5,c=n.width/2+o;let h;const{cssStyles:u}=t;if(t.look==="handDrawn"){const g=st.svg(a),m=ot(t,{roughness:.2,strokeWidth:2.5}),y=ot(t,{roughness:.2,strokeWidth:1.5}),x=g.circle(0,0,l*2,m),b=g.circle(0,0,c*2,y);h=a.insert("g",":first-child"),h.attr("class",Ce(t.cssClasses)).attr("style",Ce(u)),(d=h.node())==null||d.appendChild(x),(p=h.node())==null||p.appendChild(b)}else{h=a.insert("g",":first-child");const g=h.insert("circle",":first-child"),m=h.insert("circle");h.attr("class","basic label-container").attr("style",i),g.attr("class","outer-circle").attr("style",i).attr("r",l).attr("cx",0).attr("cy",0),m.attr("class","inner-circle").attr("style",i).attr("r",c).attr("cx",0).attr("cy",0)}return lt(t,h),t.intersect=function(g){return I.info("DoubleCircle intersect",t,l,g),it.circle(t,l,g)},a}f(tm,"doublecircle");function em(e,t,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:a}=ct(t);t.label="",t.labelStyle=i;const n=e.insert("g").attr("class",mt(t)).attr("id",t.domId??t.id),o=7,{cssStyles:s}=t,l=st.svg(n),{nodeBorder:c}=r,h=ot(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(h.roughness=0);const u=l.circle(0,0,o*2,h),d=n.insert(()=>u,":first-child");return d.selectAll("path").attr("style",`fill: ${c} !important;`),s&&s.length>0&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",s),a&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",a),lt(t,d),t.intersect=function(p){return I.info("filledCircle intersect",t,{radius:o,point:p}),it.circle(t,o,p)},n}f(em,"filledCircle");async function rm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=n.width+(t.padding??0),l=s+n.height,c=s+n.height,h=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:u}=t,d=st.svg(a),p=ot(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=Lt(h),m=d.path(g,p),y=a.insert(()=>m,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return u&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",i),t.width=s,t.height=l,lt(t,y),o.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))}, ${-l/2+(t.padding??0)/2+(n.y-(n.top??0))})`),t.intersect=function(x){return I.info("Triangle intersect",t,h,x),it.polygon(t,h,x)},a}f(rm,"flippedTriangle");function im(e,t,{dir:r,config:{state:i,themeVariables:a}}){const{nodeStyles:n}=ct(t);t.label="";const o=e.insert("g").attr("class",mt(t)).attr("id",t.domId??t.id),{cssStyles:s}=t;let l=Math.max(70,(t==null?void 0:t.width)??0),c=Math.max(10,(t==null?void 0:t.height)??0);r==="LR"&&(l=Math.max(10,(t==null?void 0:t.width)??0),c=Math.max(70,(t==null?void 0:t.height)??0));const h=-1*l/2,u=-1*c/2,d=st.svg(o),p=ot(t,{stroke:a.lineColor,fill:a.lineColor});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=d.rectangle(h,u,l,c,p),m=o.insert(()=>g,":first-child");s&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",s),n&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",n),lt(t,m);const y=(i==null?void 0:i.padding)??0;return t.width&&t.height&&(t.width+=y/2||0,t.height+=y/2||0),t.intersect=function(x){return it.rect(t,x)},o}f(im,"forkJoin");async function am(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const a=80,n=50,{shapeSvg:o,bbox:s}=await bt(e,t,mt(t)),l=Math.max(a,s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(n,s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=c/2,{cssStyles:u}=t,d=st.svg(o),p=ot(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:-l/2,y:-c/2},{x:l/2-h,y:-c/2},...Fc(-l/2+h,0,h,50,90,270),{x:l/2-h,y:c/2},{x:-l/2,y:c/2}],m=Lt(g),y=d.path(m,p),x=o.insert(()=>y,":first-child");return x.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",i),lt(t,x),t.intersect=function(b){return I.info("Pill intersect",t,{radius:h,point:b}),it.polygon(t,g,b)},o}f(am,"halfRoundedRectangle");var aT=f((e,t,r,i,a)=>[`M${e+a},${t}`,`L${e+r-a},${t}`,`L${e+r},${t-i/2}`,`L${e+r-a},${t-i}`,`L${e+a},${t-i}`,`L${e},${t-i/2}`,"Z"].join(" "),"createHexagonPathD");async function nm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=4,s=n.height+t.padding,l=s/o,c=n.width+2*l+t.padding,h=[{x:l,y:0},{x:c-l,y:0},{x:c,y:-s/2},{x:c-l,y:-s},{x:l,y:-s},{x:0,y:-s/2}];let u;const{cssStyles:d}=t;if(t.look==="handDrawn"){const p=st.svg(a),g=ot(t,{}),m=aT(0,0,c,s,l),y=p.path(m,g);u=a.insert(()=>y,":first-child").attr("transform",`translate(${-c/2}, ${s/2})`),d&&u.attr("style",d)}else u=Lr(a,c,s,h);return i&&u.attr("style",i),t.width=c,t.height=s,lt(t,u),t.intersect=function(p){return it.polygon(t,h,p)},a}f(nm,"hexagon");async function sm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.label="",t.labelStyle=r;const{shapeSvg:a}=await bt(e,t,mt(t)),n=Math.max(30,(t==null?void 0:t.width)??0),o=Math.max(30,(t==null?void 0:t.height)??0),{cssStyles:s}=t,l=st.svg(a),c=ot(t,{});t.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const h=[{x:0,y:0},{x:n,y:0},{x:0,y:o},{x:n,y:o}],u=Lt(h),d=l.path(u,c),p=a.insert(()=>d,":first-child");return p.attr("class","basic label-container"),s&&t.look!=="handDrawn"&&p.selectChildren("path").attr("style",s),i&&t.look!=="handDrawn"&&p.selectChildren("path").attr("style",i),p.attr("transform",`translate(${-n/2}, ${-o/2})`),lt(t,p),t.intersect=function(g){return I.info("Pill intersect",t,{points:h}),it.polygon(t,h,g)},a}f(sm,"hourglass");async function om(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:a}=ct(t);t.labelStyle=a;const n=t.assetHeight??48,o=t.assetWidth??48,s=Math.max(n,o),l=i==null?void 0:i.wrappingWidth;t.width=Math.max(s,l??0);const{shapeSvg:c,bbox:h,label:u}=await bt(e,t,"icon-shape default"),d=t.pos==="t",p=s,g=s,{nodeBorder:m}=r,{stylesMap:y}=oa(t),x=-g/2,b=-p/2,_=t.label?8:0,T=st.svg(c),S=ot(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const v=T.rectangle(x,b,g,p,S),M=Math.max(g,h.width),N=p+h.height+_,V=T.rectangle(-M/2,-N/2,M,N,{...S,fill:"transparent",stroke:"none"}),q=c.insert(()=>v,":first-child"),F=c.insert(()=>V);if(t.icon){const Y=c.append("g");Y.html(`<g>${await yn(t.icon,{height:s,width:s,fallbackPrefix:""})}</g>`);const z=Y.node().getBBox(),B=z.width,E=z.height,A=z.x,R=z.y;Y.attr("transform",`translate(${-B/2-A},${d?h.height/2+_/2-E/2-R:-h.height/2-_/2-E/2-R})`),Y.attr("style",`color: ${y.get("stroke")??m};`)}return u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-N/2:N/2-h.height})`),q.attr("transform",`translate(0,${d?h.height/2+_/2:-h.height/2-_/2})`),lt(t,F),t.intersect=function(Y){if(I.info("iconSquare intersect",t,Y),!t.label)return it.rect(t,Y);const z=t.x??0,B=t.y??0,E=t.height??0;let A=[];return d?A=[{x:z-h.width/2,y:B-E/2},{x:z+h.width/2,y:B-E/2},{x:z+h.width/2,y:B-E/2+h.height+_},{x:z+g/2,y:B-E/2+h.height+_},{x:z+g/2,y:B+E/2},{x:z-g/2,y:B+E/2},{x:z-g/2,y:B-E/2+h.height+_},{x:z-h.width/2,y:B-E/2+h.height+_}]:A=[{x:z-g/2,y:B-E/2},{x:z+g/2,y:B-E/2},{x:z+g/2,y:B-E/2+p},{x:z+h.width/2,y:B-E/2+p},{x:z+h.width/2/2,y:B+E/2},{x:z-h.width/2,y:B+E/2},{x:z-h.width/2,y:B-E/2+p},{x:z-g/2,y:B-E/2+p}],it.polygon(t,A,Y)},c}f(om,"icon");async function lm(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:a}=ct(t);t.labelStyle=a;const n=t.assetHeight??48,o=t.assetWidth??48,s=Math.max(n,o),l=i==null?void 0:i.wrappingWidth;t.width=Math.max(s,l??0);const{shapeSvg:c,bbox:h,label:u}=await bt(e,t,"icon-shape default"),d=20,p=t.label?8:0,g=t.pos==="t",{nodeBorder:m,mainBkg:y}=r,{stylesMap:x}=oa(t),b=st.svg(c),_=ot(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const T=x.get("fill");_.stroke=T??y;const S=c.append("g");t.icon&&S.html(`<g>${await yn(t.icon,{height:s,width:s,fallbackPrefix:""})}</g>`);const v=S.node().getBBox(),M=v.width,N=v.height,V=v.x,q=v.y,F=Math.max(M,N)*Math.SQRT2+d*2,Y=b.circle(0,0,F,_),z=Math.max(F,h.width),B=F+h.height+p,E=b.rectangle(-z/2,-B/2,z,B,{..._,fill:"transparent",stroke:"none"}),A=c.insert(()=>Y,":first-child"),R=c.insert(()=>E);return S.attr("transform",`translate(${-M/2-V},${g?h.height/2+p/2-N/2-q:-h.height/2-p/2-N/2-q})`),S.attr("style",`color: ${x.get("stroke")??m};`),u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${g?-B/2:B/2-h.height})`),A.attr("transform",`translate(0,${g?h.height/2+p/2:-h.height/2-p/2})`),lt(t,R),t.intersect=function($){return I.info("iconSquare intersect",t,$),it.rect(t,$)},c}f(lm,"iconCircle");async function cm(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:a}=ct(t);t.labelStyle=a;const n=t.assetHeight??48,o=t.assetWidth??48,s=Math.max(n,o),l=i==null?void 0:i.wrappingWidth;t.width=Math.max(s,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:d}=await bt(e,t,"icon-shape default"),p=t.pos==="t",g=s+u*2,m=s+u*2,{nodeBorder:y,mainBkg:x}=r,{stylesMap:b}=oa(t),_=-m/2,T=-g/2,S=t.label?8:0,v=st.svg(c),M=ot(t,{});t.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");const N=b.get("fill");M.stroke=N??x;const V=v.path(Mr(_,T,m,g,5),M),q=Math.max(m,h.width),F=g+h.height+S,Y=v.rectangle(-q/2,-F/2,q,F,{...M,fill:"transparent",stroke:"none"}),z=c.insert(()=>V,":first-child").attr("class","icon-shape2"),B=c.insert(()=>Y);if(t.icon){const E=c.append("g");E.html(`<g>${await yn(t.icon,{height:s,width:s,fallbackPrefix:""})}</g>`);const A=E.node().getBBox(),R=A.width,$=A.height,K=A.x,et=A.y;E.attr("transform",`translate(${-R/2-K},${p?h.height/2+S/2-$/2-et:-h.height/2-S/2-$/2-et})`),E.attr("style",`color: ${b.get("stroke")??y};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-F/2:F/2-h.height})`),z.attr("transform",`translate(0,${p?h.height/2+S/2:-h.height/2-S/2})`),lt(t,B),t.intersect=function(E){if(I.info("iconSquare intersect",t,E),!t.label)return it.rect(t,E);const A=t.x??0,R=t.y??0,$=t.height??0;let K=[];return p?K=[{x:A-h.width/2,y:R-$/2},{x:A+h.width/2,y:R-$/2},{x:A+h.width/2,y:R-$/2+h.height+S},{x:A+m/2,y:R-$/2+h.height+S},{x:A+m/2,y:R+$/2},{x:A-m/2,y:R+$/2},{x:A-m/2,y:R-$/2+h.height+S},{x:A-h.width/2,y:R-$/2+h.height+S}]:K=[{x:A-m/2,y:R-$/2},{x:A+m/2,y:R-$/2},{x:A+m/2,y:R-$/2+g},{x:A+h.width/2,y:R-$/2+g},{x:A+h.width/2/2,y:R+$/2},{x:A-h.width/2,y:R+$/2},{x:A-h.width/2,y:R-$/2+g},{x:A-m/2,y:R-$/2+g}],it.polygon(t,K,E)},c}f(cm,"iconRounded");async function hm(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:a}=ct(t);t.labelStyle=a;const n=t.assetHeight??48,o=t.assetWidth??48,s=Math.max(n,o),l=i==null?void 0:i.wrappingWidth;t.width=Math.max(s,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:d}=await bt(e,t,"icon-shape default"),p=t.pos==="t",g=s+u*2,m=s+u*2,{nodeBorder:y,mainBkg:x}=r,{stylesMap:b}=oa(t),_=-m/2,T=-g/2,S=t.label?8:0,v=st.svg(c),M=ot(t,{});t.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");const N=b.get("fill");M.stroke=N??x;const V=v.path(Mr(_,T,m,g,.1),M),q=Math.max(m,h.width),F=g+h.height+S,Y=v.rectangle(-q/2,-F/2,q,F,{...M,fill:"transparent",stroke:"none"}),z=c.insert(()=>V,":first-child"),B=c.insert(()=>Y);if(t.icon){const E=c.append("g");E.html(`<g>${await yn(t.icon,{height:s,width:s,fallbackPrefix:""})}</g>`);const A=E.node().getBBox(),R=A.width,$=A.height,K=A.x,et=A.y;E.attr("transform",`translate(${-R/2-K},${p?h.height/2+S/2-$/2-et:-h.height/2-S/2-$/2-et})`),E.attr("style",`color: ${b.get("stroke")??y};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-F/2:F/2-h.height})`),z.attr("transform",`translate(0,${p?h.height/2+S/2:-h.height/2-S/2})`),lt(t,B),t.intersect=function(E){if(I.info("iconSquare intersect",t,E),!t.label)return it.rect(t,E);const A=t.x??0,R=t.y??0,$=t.height??0;let K=[];return p?K=[{x:A-h.width/2,y:R-$/2},{x:A+h.width/2,y:R-$/2},{x:A+h.width/2,y:R-$/2+h.height+S},{x:A+m/2,y:R-$/2+h.height+S},{x:A+m/2,y:R+$/2},{x:A-m/2,y:R+$/2},{x:A-m/2,y:R-$/2+h.height+S},{x:A-h.width/2,y:R-$/2+h.height+S}]:K=[{x:A-m/2,y:R-$/2},{x:A+m/2,y:R-$/2},{x:A+m/2,y:R-$/2+g},{x:A+h.width/2,y:R-$/2+g},{x:A+h.width/2/2,y:R+$/2},{x:A-h.width/2,y:R+$/2},{x:A-h.width/2,y:R-$/2+g},{x:A-m/2,y:R-$/2+g}],it.polygon(t,K,E)},c}f(hm,"iconSquare");async function um(e,t,{config:{flowchart:r}}){const i=new Image;i.src=(t==null?void 0:t.img)??"",await i.decode();const a=Number(i.naturalWidth.toString().replace("px","")),n=Number(i.naturalHeight.toString().replace("px",""));t.imageAspectRatio=a/n;const{labelStyles:o}=ct(t);t.labelStyle=o;const s=r==null?void 0:r.wrappingWidth;t.defaultWidth=r==null?void 0:r.wrappingWidth;const l=Math.max(t.label?s??0:0,(t==null?void 0:t.assetWidth)??a),c=t.constraint==="on"&&t!=null&&t.assetHeight?t.assetHeight*t.imageAspectRatio:l,h=t.constraint==="on"?c/t.imageAspectRatio:(t==null?void 0:t.assetHeight)??n;t.width=Math.max(c,s??0);const{shapeSvg:u,bbox:d,label:p}=await bt(e,t,"image-shape default"),g=t.pos==="t",m=-c/2,y=-h/2,x=t.label?8:0,b=st.svg(u),_=ot(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const T=b.rectangle(m,y,c,h,_),S=Math.max(c,d.width),v=h+d.height+x,M=b.rectangle(-S/2,-v/2,S,v,{..._,fill:"none",stroke:"none"}),N=u.insert(()=>T,":first-child"),V=u.insert(()=>M);if(t.img){const q=u.append("image");q.attr("href",t.img),q.attr("width",c),q.attr("height",h),q.attr("preserveAspectRatio","none"),q.attr("transform",`translate(${-c/2},${g?v/2-h:-v/2})`)}return p.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${g?-h/2-d.height/2-x/2:h/2-d.height/2+x/2})`),N.attr("transform",`translate(0,${g?d.height/2+x/2:-d.height/2-x/2})`),lt(t,V),t.intersect=function(q){if(I.info("iconSquare intersect",t,q),!t.label)return it.rect(t,q);const F=t.x??0,Y=t.y??0,z=t.height??0;let B=[];return g?B=[{x:F-d.width/2,y:Y-z/2},{x:F+d.width/2,y:Y-z/2},{x:F+d.width/2,y:Y-z/2+d.height+x},{x:F+c/2,y:Y-z/2+d.height+x},{x:F+c/2,y:Y+z/2},{x:F-c/2,y:Y+z/2},{x:F-c/2,y:Y-z/2+d.height+x},{x:F-d.width/2,y:Y-z/2+d.height+x}]:B=[{x:F-c/2,y:Y-z/2},{x:F+c/2,y:Y-z/2},{x:F+c/2,y:Y-z/2+h},{x:F+d.width/2,y:Y-z/2+h},{x:F+d.width/2/2,y:Y+z/2},{x:F-d.width/2,y:Y+z/2},{x:F-d.width/2,y:Y-z/2+h},{x:F-c/2,y:Y-z/2+h}],it.polygon(t,B,q)},u}f(um,"imageSquare");async function pm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),s=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:o,y:0},{x:o+3*s/6,y:-s},{x:-3*s/6,y:-s}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=st.svg(a),d=ot(t,{}),p=Lt(l),g=u.path(p,d);c=a.insert(()=>g,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),h&&c.attr("style",h)}else c=Lr(a,o,s,l);return i&&c.attr("style",i),t.width=o,t.height=s,lt(t,c),t.intersect=function(u){return it.polygon(t,l,u)},a}f(pm,"inv_trapezoid");async function bn(e,t,r){const{labelStyles:i,nodeStyles:a}=ct(t);t.labelStyle=i;const{shapeSvg:n,bbox:o}=await bt(e,t,mt(t)),s=Math.max(o.width+r.labelPaddingX*2,(t==null?void 0:t.width)||0),l=Math.max(o.height+r.labelPaddingY*2,(t==null?void 0:t.height)||0),c=-s/2,h=-l/2;let u,{rx:d,ry:p}=t;const{cssStyles:g}=t;if(r!=null&&r.rx&&r.ry&&(d=r.rx,p=r.ry),t.look==="handDrawn"){const m=st.svg(n),y=ot(t,{}),x=d||p?m.path(Mr(c,h,s,l,d||0),y):m.rectangle(c,h,s,l,y);u=n.insert(()=>x,":first-child"),u.attr("class","basic label-container").attr("style",Ce(g))}else u=n.insert("rect",":first-child"),u.attr("class","basic label-container").attr("style",a).attr("rx",Ce(d)).attr("ry",Ce(p)).attr("x",c).attr("y",h).attr("width",s).attr("height",l);return lt(t,u),t.intersect=function(m){return it.rect(t,m)},n}f(bn,"drawRect");async function dm(e,t){const{shapeSvg:r,bbox:i,label:a}=await bt(e,t,"label"),n=r.insert("rect",":first-child");return n.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),a.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),lt(t,n),t.intersect=function(l){return it.rect(t,l)},r}f(dm,"labelRect");async function fm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=Math.max(n.width+(t.padding??0),(t==null?void 0:t.width)??0),s=Math.max(n.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:o+3*s/6,y:0},{x:o,y:-s},{x:-(3*s)/6,y:-s}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=st.svg(a),d=ot(t,{}),p=Lt(l),g=u.path(p,d);c=a.insert(()=>g,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),h&&c.attr("style",h)}else c=Lr(a,o,s,l);return i&&c.attr("style",i),t.width=o,t.height=s,lt(t,c),t.intersect=function(u){return it.polygon(t,l,u)},a}f(fm,"lean_left");async function gm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=Math.max(n.width+(t.padding??0),(t==null?void 0:t.width)??0),s=Math.max(n.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:-3*s/6,y:0},{x:o,y:0},{x:o+3*s/6,y:-s},{x:0,y:-s}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=st.svg(a),d=ot(t,{}),p=Lt(l),g=u.path(p,d);c=a.insert(()=>g,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),h&&c.attr("style",h)}else c=Lr(a,o,s,l);return i&&c.attr("style",i),t.width=o,t.height=s,lt(t,c),t.intersect=function(u){return it.polygon(t,l,u)},a}f(gm,"lean_right");function mm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.label="",t.labelStyle=r;const a=e.insert("g").attr("class",mt(t)).attr("id",t.domId??t.id),{cssStyles:n}=t,o=Math.max(35,(t==null?void 0:t.width)??0),s=Math.max(35,(t==null?void 0:t.height)??0),l=7,c=[{x:o,y:0},{x:0,y:s+l/2},{x:o-2*l,y:s+l/2},{x:0,y:2*s},{x:o,y:s-l/2},{x:2*l,y:s-l/2}],h=st.svg(a),u=ot(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=Lt(c),p=h.path(d,u),g=a.insert(()=>p,":first-child");return n&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",n),i&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",i),g.attr("transform",`translate(-${o/2},${-s})`),lt(t,g),t.intersect=function(m){return I.info("lightningBolt intersect",t,m),it.polygon(t,c,m)},a}f(mm,"lightningBolt");var nT=f((e,t,r,i,a,n,o)=>[`M${e},${t+n}`,`a${a},${n} 0,0,0 ${r},0`,`a${a},${n} 0,0,0 ${-r},0`,`l0,${i}`,`a${a},${n} 0,0,0 ${r},0`,`l0,${-i}`,`M${e},${t+n+o}`,`a${a},${n} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),sT=f((e,t,r,i,a,n,o)=>[`M${e},${t+n}`,`M${e+r},${t+n}`,`a${a},${n} 0,0,0 ${-r},0`,`l0,${i}`,`a${a},${n} 0,0,0 ${r},0`,`l0,${-i}`,`M${e},${t+n+o}`,`a${a},${n} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),oT=f((e,t,r,i,a,n)=>[`M${e-r/2},${-i/2}`,`a${a},${n} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function ym(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=Math.max(n.width+(t.padding??0),t.width??0),l=s/2,c=l/(2.5+s/50),h=Math.max(n.height+c+(t.padding??0),t.height??0),u=h*.1;let d;const{cssStyles:p}=t;if(t.look==="handDrawn"){const g=st.svg(a),m=sT(0,0,s,h,l,c,u),y=oT(0,c,s,h,l,c),x=ot(t,{}),b=g.path(m,x),_=g.path(y,x);a.insert(()=>_,":first-child").attr("class","line"),d=a.insert(()=>b,":first-child"),d.attr("class","basic label-container"),p&&d.attr("style",p)}else{const g=nT(0,0,s,h,l,c,u);d=a.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",Ce(p)).attr("style",i)}return d.attr("label-offset-y",c),d.attr("transform",`translate(${-s/2}, ${-(h/2+c)})`),lt(t,d),o.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)+c-(n.y-(n.top??0))})`),t.intersect=function(g){const m=it.rect(t,g),y=m.x-(t.x??0);if(l!=0&&(Math.abs(y)<(t.width??0)/2||Math.abs(y)==(t.width??0)/2&&Math.abs(m.y-(t.y??0))>(t.height??0)/2-c)){let x=c*c*(1-y*y/(l*l));x>0&&(x=Math.sqrt(x)),x=c-x,g.y-(t.y??0)>0&&(x=-x),m.y+=x}return m},a}f(ym,"linedCylinder");async function xm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,h=l+c,{cssStyles:u}=t,d=st.svg(a),p=ot(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:-s/2-s/2*.1,y:-h/2},{x:-s/2-s/2*.1,y:h/2},...Ir(-s/2-s/2*.1,h/2,s/2+s/2*.1,h/2,c,.8),{x:s/2+s/2*.1,y:-h/2},{x:-s/2-s/2*.1,y:-h/2},{x:-s/2,y:-h/2},{x:-s/2,y:h/2*1.1},{x:-s/2,y:-h/2}],m=d.polygon(g.map(x=>[x.x,x.y]),p),y=a.insert(()=>m,":first-child");return y.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",u),i&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",i),y.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-s/2+(t.padding??0)+s/2*.1/2-(n.x-(n.left??0))},${-l/2+(t.padding??0)-c/2-(n.y-(n.top??0))})`),lt(t,y),t.intersect=function(x){return it.polygon(t,g,x)},a}f(xm,"linedWaveEdgedRect");async function bm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=5,h=-s/2,u=-l/2,{cssStyles:d}=t,p=st.svg(a),g=ot(t,{}),m=[{x:h-c,y:u+c},{x:h-c,y:u+l+c},{x:h+s-c,y:u+l+c},{x:h+s-c,y:u+l},{x:h+s,y:u+l},{x:h+s,y:u+l-c},{x:h+s+c,y:u+l-c},{x:h+s+c,y:u-c},{x:h+c,y:u-c},{x:h+c,y:u},{x:h,y:u},{x:h,y:u+c}],y=[{x:h,y:u+c},{x:h+s-c,y:u+c},{x:h+s-c,y:u+l},{x:h+s,y:u+l},{x:h+s,y:u},{x:h,y:u}];t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const x=Lt(m),b=p.path(x,g),_=Lt(y),T=p.path(_,{...g,fill:"none"}),S=a.insert(()=>T,":first-child");return S.insert(()=>b,":first-child"),S.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",d),i&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",i),o.attr("transform",`translate(${-(n.width/2)-c-(n.x-(n.left??0))}, ${-(n.height/2)+c-(n.y-(n.top??0))})`),lt(t,S),t.intersect=function(v){return it.polygon(t,m,v)},a}f(bm,"multiRect");async function vm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,h=l+c,u=-s/2,d=-h/2,p=5,{cssStyles:g}=t,m=Ir(u-p,d+h+p,u+s-p,d+h+p,c,.8),y=m==null?void 0:m[m.length-1],x=[{x:u-p,y:d+p},{x:u-p,y:d+h+p},...m,{x:u+s-p,y:y.y-p},{x:u+s,y:y.y-p},{x:u+s,y:y.y-2*p},{x:u+s+p,y:y.y-2*p},{x:u+s+p,y:d-p},{x:u+p,y:d-p},{x:u+p,y:d},{x:u,y:d},{x:u,y:d+p}],b=[{x:u,y:d+p},{x:u+s-p,y:d+p},{x:u+s-p,y:y.y-p},{x:u+s,y:y.y-p},{x:u+s,y:d},{x:u,y:d}],_=st.svg(a),T=ot(t,{});t.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const S=Lt(x),v=_.path(S,T),M=Lt(b),N=_.path(M,T),V=a.insert(()=>v,":first-child");return V.insert(()=>N),V.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&V.selectAll("path").attr("style",g),i&&t.look!=="handDrawn"&&V.selectAll("path").attr("style",i),V.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-(n.width/2)-p-(n.x-(n.left??0))}, ${-(n.height/2)+p-c/2-(n.y-(n.top??0))})`),lt(t,V),t.intersect=function(q){return it.polygon(t,x,q)},a}f(vm,"multiWaveEdgedRectangle");async function _m(e,t,{config:{themeVariables:r}}){var b;const{labelStyles:i,nodeStyles:a}=ct(t);t.labelStyle=i,t.useHtmlLabels||((b=$e().flowchart)==null?void 0:b.htmlLabels)!==!1||(t.centerLabel=!0);const{shapeSvg:o,bbox:s,label:l}=await bt(e,t,mt(t)),c=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),h=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=-c/2,d=-h/2,{cssStyles:p}=t,g=st.svg(o),m=ot(t,{fill:r.noteBkgColor,stroke:r.noteBorderColor});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=g.rectangle(u,d,c,h,m),x=o.insert(()=>y,":first-child");return x.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",p),a&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",a),l.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),lt(t,x),t.intersect=function(_){return it.rect(t,_)},o}f(_m,"note");var lT=f((e,t,r)=>[`M${e+r/2},${t}`,`L${e+r},${t-r/2}`,`L${e+r/2},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function wm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=n.width+t.padding,s=n.height+t.padding,l=o+s,c=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let h;const{cssStyles:u}=t;if(t.look==="handDrawn"){const d=st.svg(a),p=ot(t,{}),g=lT(0,0,l),m=d.path(g,p);h=a.insert(()=>m,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`),u&&h.attr("style",u)}else h=Lr(a,l,l,c);return i&&h.attr("style",i),lt(t,h),t.intersect=function(d){return I.debug(`APA12 Intersect called SPLIT
point:`,d,`
node:
`,t,`
res:`,it.polygon(t,c,d)),it.polygon(t,c,d)},a}f(wm,"question");async function Cm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=Math.max(n.width+(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0),(t==null?void 0:t.height)??0),c=-s/2,h=-l/2,u=h/2,d=[{x:c+u,y:h},{x:c,y:0},{x:c+u,y:-h},{x:-c,y:-h},{x:-c,y:h}],{cssStyles:p}=t,g=st.svg(a),m=ot(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=Lt(d),x=g.path(y,m),b=a.insert(()=>x,":first-child");return b.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",i),b.attr("transform",`translate(${-u/2},0)`),o.attr("transform",`translate(${-u/2-n.width/2-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),lt(t,b),t.intersect=function(_){return it.polygon(t,d,_)},a}f(Cm,"rect_left_inv_arrow");async function km(e,t){var N,V;const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;let a;t.cssClasses?a="node "+t.cssClasses:a="node default";const n=e.insert("g").attr("class",a).attr("id",t.domId||t.id),o=n.insert("g"),s=n.insert("g").attr("class","label").attr("style",i),l=t.description,c=t.label,h=s.node().appendChild(await oi(c,t.labelStyle,!0,!0));let u={width:0,height:0};if(le((V=(N=Et())==null?void 0:N.flowchart)==null?void 0:V.htmlLabels)){const q=h.children[0],F=Mt(h);u=q.getBoundingClientRect(),F.attr("width",u.width),F.attr("height",u.height)}I.info("Text 2",l);const d=l||[],p=h.getBBox(),g=s.node().appendChild(await oi(d.join?d.join("<br/>"):d,t.labelStyle,!0,!0)),m=g.children[0],y=Mt(g);u=m.getBoundingClientRect(),y.attr("width",u.width),y.attr("height",u.height);const x=(t.padding||0)/2;Mt(g).attr("transform","translate( "+(u.width>p.width?0:(p.width-u.width)/2)+", "+(p.height+x+5)+")"),Mt(h).attr("transform","translate( "+(u.width<p.width?0:-(p.width-u.width)/2)+", 0)"),u=s.node().getBBox(),s.attr("transform","translate("+-u.width/2+", "+(-u.height/2-x+3)+")");const b=u.width+(t.padding||0),_=u.height+(t.padding||0),T=-u.width/2-x,S=-u.height/2-x;let v,M;if(t.look==="handDrawn"){const q=st.svg(n),F=ot(t,{}),Y=q.path(Mr(T,S,b,_,t.rx||0),F),z=q.line(-u.width/2-x,-u.height/2-x+p.height+x,u.width/2+x,-u.height/2-x+p.height+x,F);M=n.insert(()=>(I.debug("Rough node insert CXC",Y),z),":first-child"),v=n.insert(()=>(I.debug("Rough node insert CXC",Y),Y),":first-child")}else v=o.insert("rect",":first-child"),M=o.insert("line"),v.attr("class","outer title-state").attr("style",i).attr("x",-u.width/2-x).attr("y",-u.height/2-x).attr("width",u.width+(t.padding||0)).attr("height",u.height+(t.padding||0)),M.attr("class","divider").attr("x1",-u.width/2-x).attr("x2",u.width/2+x).attr("y1",-u.height/2-x+p.height+x).attr("y2",-u.height/2-x+p.height+x);return lt(t,v),t.intersect=function(q){return it.rect(t,q)},n}f(km,"rectWithTitle");async function Sm(e,t){const r={rx:5,ry:5,labelPaddingX:((t==null?void 0:t.padding)||0)*1,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return bn(e,t,r)}f(Sm,"roundedRect");async function Tm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=(t==null?void 0:t.padding)??0,l=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=-n.width/2-s,u=-n.height/2-s,{cssStyles:d}=t,p=st.svg(a),g=ot(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=[{x:h,y:u},{x:h+l+8,y:u},{x:h+l+8,y:u+c},{x:h-8,y:u+c},{x:h-8,y:u},{x:h,y:u},{x:h,y:u+c}],y=p.polygon(m.map(b=>[b.x,b.y]),g),x=a.insert(()=>y,":first-child");return x.attr("class","basic label-container").attr("style",Ce(d)),i&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",i),d&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",i),o.attr("transform",`translate(${-l/2+4+(t.padding??0)-(n.x-(n.left??0))},${-c/2+(t.padding??0)-(n.y-(n.top??0))})`),lt(t,x),t.intersect=function(b){return it.rect(t,b)},a}f(Tm,"shadedProcess");async function Mm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=-s/2,h=-l/2,{cssStyles:u}=t,d=st.svg(a),p=ot(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:c,y:h},{x:c,y:h+l},{x:c+s,y:h+l},{x:c+s,y:h-l/2}],m=Lt(g),y=d.path(m,p),x=a.insert(()=>y,":first-child");return x.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",i),x.attr("transform",`translate(0, ${l/4})`),o.attr("transform",`translate(${-s/2+(t.padding??0)-(n.x-(n.left??0))}, ${-l/4+(t.padding??0)-(n.y-(n.top??0))})`),lt(t,x),t.intersect=function(b){return it.polygon(t,g,b)},a}f(Mm,"slopedRect");async function Lm(e,t){const r={rx:0,ry:0,labelPaddingX:((t==null?void 0:t.padding)||0)*2,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return bn(e,t,r)}f(Lm,"squareRect");async function Am(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=n.height+t.padding,s=n.width+o/4+t.padding;let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const h=st.svg(a),u=ot(t,{}),d=Mr(-s/2,-o/2,s,o,o/2),p=h.path(d,u);l=a.insert(()=>p,":first-child"),l.attr("class","basic label-container").attr("style",Ce(c))}else l=a.insert("rect",":first-child"),l.attr("class","basic label-container").attr("style",i).attr("rx",o/2).attr("ry",o/2).attr("x",-s/2).attr("y",-o/2).attr("width",s).attr("height",o);return lt(t,l),t.intersect=function(h){return it.rect(t,h)},a}f(Am,"stadium");async function Bm(e,t){return bn(e,t,{rx:5,ry:5})}f(Bm,"state");function Em(e,t,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:a}=ct(t);t.labelStyle=i;const{cssStyles:n}=t,{lineColor:o,stateBorder:s,nodeBorder:l}=r,c=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),h=st.svg(c),u=ot(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=h.circle(0,0,14,{...u,stroke:o,strokeWidth:2}),p=s??l,g=h.circle(0,0,5,{...u,fill:p,stroke:p,strokeWidth:2,fillStyle:"solid"}),m=c.insert(()=>d,":first-child");return m.insert(()=>g),n&&m.selectAll("path").attr("style",n),a&&m.selectAll("path").attr("style",a),lt(t,m),t.intersect=function(y){return it.circle(t,7,y)},c}f(Em,"stateEnd");function $m(e,t,{config:{themeVariables:r}}){const{lineColor:i}=r,a=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let n;if(t.look==="handDrawn"){const s=st.svg(a).circle(0,0,14,Yb(i));n=a.insert(()=>s),n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else n=a.insert("circle",":first-child"),n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return lt(t,n),t.intersect=function(o){return it.circle(t,7,o)},a}f($m,"stateStart");async function Fm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=((t==null?void 0:t.padding)||0)/2,s=n.width+t.padding,l=n.height+t.padding,c=-n.width/2-o,h=-n.height/2-o,u=[{x:0,y:0},{x:s,y:0},{x:s,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(t.look==="handDrawn"){const d=st.svg(a),p=ot(t,{}),g=d.rectangle(c-8,h,s+16,l,p),m=d.line(c,h,c,h+l,p),y=d.line(c+s,h,c+s,h+l,p);a.insert(()=>m,":first-child"),a.insert(()=>y,":first-child");const x=a.insert(()=>g,":first-child"),{cssStyles:b}=t;x.attr("class","basic label-container").attr("style",Ce(b)),lt(t,x)}else{const d=Lr(a,s,l,u);i&&d.attr("style",i),lt(t,d)}return t.intersect=function(d){return it.polygon(t,u,d)},a}f(Fm,"subroutine");async function Pm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),s=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=-o/2,c=-s/2,h=.2*s,u=.2*s,{cssStyles:d}=t,p=st.svg(a),g=ot(t,{}),m=[{x:l-h/2,y:c},{x:l+o+h/2,y:c},{x:l+o+h/2,y:c+s},{x:l-h/2,y:c+s}],y=[{x:l+o-h/2,y:c+s},{x:l+o+h/2,y:c+s},{x:l+o+h/2,y:c+s-u}];t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const x=Lt(m),b=p.path(x,g),_=Lt(y),T=p.path(_,{...g,fillStyle:"solid"}),S=a.insert(()=>T,":first-child");return S.insert(()=>b,":first-child"),S.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",d),i&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",i),lt(t,S),t.intersect=function(v){return it.polygon(t,m,v)},a}f(Pm,"taggedRect");async function Rm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,h=.2*s,u=.2*l,d=l+c,{cssStyles:p}=t,g=st.svg(a),m=ot(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:-s/2-s/2*.1,y:d/2},...Ir(-s/2-s/2*.1,d/2,s/2+s/2*.1,d/2,c,.8),{x:s/2+s/2*.1,y:-d/2},{x:-s/2-s/2*.1,y:-d/2}],x=-s/2+s/2*.1,b=-d/2-u*.4,_=[{x:x+s-h,y:(b+l)*1.4},{x:x+s,y:b+l-u},{x:x+s,y:(b+l)*.9},...Ir(x+s,(b+l)*1.3,x+s-h,(b+l)*1.5,-l*.03,.5)],T=Lt(y),S=g.path(T,m),v=Lt(_),M=g.path(v,{...m,fillStyle:"solid"}),N=a.insert(()=>M,":first-child");return N.insert(()=>S,":first-child"),N.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",i),N.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-s/2+(t.padding??0)-(n.x-(n.left??0))},${-l/2+(t.padding??0)-c/2-(n.y-(n.top??0))})`),lt(t,N),t.intersect=function(V){return it.polygon(t,y,V)},a}f(Rm,"taggedWaveEdgedRectangle");async function Dm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=Math.max(n.width+t.padding,(t==null?void 0:t.width)||0),s=Math.max(n.height+t.padding,(t==null?void 0:t.height)||0),l=-o/2,c=-s/2,h=a.insert("rect",":first-child");return h.attr("class","text").attr("style",i).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",o).attr("height",s),lt(t,h),t.intersect=function(u){return it.rect(t,u)},a}f(Dm,"text");var cT=f((e,t,r,i,a,n)=>`M${e},${t}
    a${a},${n} 0,0,1 0,${-i}
    l${r},0
    a${a},${n} 0,0,1 0,${i}
    M${r},${-i}
    a${a},${n} 0,0,0 0,${i}
    l${-r},0`,"createCylinderPathD"),hT=f((e,t,r,i,a,n)=>[`M${e},${t}`,`M${e+r},${t}`,`a${a},${n} 0,0,0 0,${-i}`,`l${-r},0`,`a${a},${n} 0,0,0 0,${i}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),uT=f((e,t,r,i,a,n)=>[`M${e+r/2},${-i/2}`,`a${a},${n} 0,0,0 0,${i}`].join(" "),"createInnerCylinderPathD");async function Om(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o,halfPadding:s}=await bt(e,t,mt(t)),l=t.look==="neo"?s*2:s,c=n.height+l,h=c/2,u=h/(2.5+c/50),d=n.width+u+l,{cssStyles:p}=t;let g;if(t.look==="handDrawn"){const m=st.svg(a),y=hT(0,0,d,c,u,h),x=uT(0,0,d,c,u,h),b=m.path(y,ot(t,{})),_=m.path(x,ot(t,{fill:"none"}));g=a.insert(()=>_,":first-child"),g=a.insert(()=>b,":first-child"),g.attr("class","basic label-container"),p&&g.attr("style",p)}else{const m=cT(0,0,d,c,u,h);g=a.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",Ce(p)).attr("style",i),g.attr("class","basic label-container"),p&&g.selectAll("path").attr("style",p),i&&g.selectAll("path").attr("style",i)}return g.attr("label-offset-x",u),g.attr("transform",`translate(${-d/2}, ${c/2} )`),o.attr("transform",`translate(${-(n.width/2)-u-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),lt(t,g),t.intersect=function(m){const y=it.rect(t,m),x=y.y-(t.y??0);if(h!=0&&(Math.abs(x)<(t.height??0)/2||Math.abs(x)==(t.height??0)/2&&Math.abs(y.x-(t.x??0))>(t.width??0)/2-u)){let b=u*u*(1-x*x/(h*h));b!=0&&(b=Math.sqrt(Math.abs(b))),b=u-b,m.x-(t.x??0)>0&&(b=-b),y.x+=b}return y},a}f(Om,"tiltedCylinder");async function Im(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=n.width+t.padding,s=n.height+t.padding,l=[{x:-3*s/6,y:0},{x:o+3*s/6,y:0},{x:o,y:-s},{x:0,y:-s}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=st.svg(a),d=ot(t,{}),p=Lt(l),g=u.path(p,d);c=a.insert(()=>g,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),h&&c.attr("style",h)}else c=Lr(a,o,s,l);return i&&c.attr("style",i),t.width=o,t.height=s,lt(t,c),t.intersect=function(u){return it.polygon(t,l,u)},a}f(Im,"trapezoid");async function Nm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=60,s=20,l=Math.max(o,n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s,n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),{cssStyles:h}=t,u=st.svg(a),d=ot(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],g=Lt(p),m=u.path(g,d),y=a.insert(()=>m,":first-child");return y.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",h),i&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",i),lt(t,y),t.intersect=function(x){return it.polygon(t,p,x)},a}f(Nm,"trapezoidalPentagon");async function qm(e,t){var b;const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=le((b=Et().flowchart)==null?void 0:b.htmlLabels),l=n.width+(t.padding??0),c=l+n.height,h=l+n.height,u=[{x:0,y:0},{x:h,y:0},{x:h/2,y:-c}],{cssStyles:d}=t,p=st.svg(a),g=ot(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=Lt(u),y=p.path(m,g),x=a.insert(()=>y,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return d&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",d),i&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",i),t.width=l,t.height=c,lt(t,x),o.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))}, ${c/2-(n.height+(t.padding??0)/(s?2:1)-(n.y-(n.top??0)))})`),t.intersect=function(_){return I.info("Triangle intersect",t,u,_),it.polygon(t,u,_)},a}f(qm,"triangle");async function zm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/8,h=l+c,{cssStyles:u}=t,p=70-s,g=p>0?p/2:0,m=st.svg(a),y=ot(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=[{x:-s/2-g,y:h/2},...Ir(-s/2-g,h/2,s/2+g,h/2,c,.8),{x:s/2+g,y:-h/2},{x:-s/2-g,y:-h/2}],b=Lt(x),_=m.path(b,y),T=a.insert(()=>_,":first-child");return T.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",u),i&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",i),T.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-s/2+(t.padding??0)-(n.x-(n.left??0))},${-l/2+(t.padding??0)-c-(n.y-(n.top??0))})`),lt(t,T),t.intersect=function(S){return it.polygon(t,x,S)},a}f(zm,"waveEdgedRectangle");async function Wm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await bt(e,t,mt(t)),o=100,s=50,l=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=l/c;let u=l,d=c;u>d*h?d=u/h:u=d*h,u=Math.max(u,o),d=Math.max(d,s);const p=Math.min(d*.2,d/4),g=d+p*2,{cssStyles:m}=t,y=st.svg(a),x=ot(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const b=[{x:-u/2,y:g/2},...Ir(-u/2,g/2,u/2,g/2,p,1),{x:u/2,y:-g/2},...Ir(u/2,-g/2,-u/2,-g/2,p,-1)],_=Lt(b),T=y.path(_,x),S=a.insert(()=>T,":first-child");return S.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",m),i&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",i),lt(t,S),t.intersect=function(v){return it.polygon(t,b,v)},a}f(Wm,"waveRectangle");async function jm(e,t){const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await bt(e,t,mt(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=5,h=-s/2,u=-l/2,{cssStyles:d}=t,p=st.svg(a),g=ot(t,{}),m=[{x:h-c,y:u-c},{x:h-c,y:u+l},{x:h+s,y:u+l},{x:h+s,y:u-c}],y=`M${h-c},${u-c} L${h+s},${u-c} L${h+s},${u+l} L${h-c},${u+l} L${h-c},${u-c}
                M${h-c},${u} L${h+s},${u}
                M${h},${u-c} L${h},${u+l}`;t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const x=p.path(y,g),b=a.insert(()=>x,":first-child");return b.attr("transform",`translate(${c/2}, ${c/2})`),b.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",d),i&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",i),o.attr("transform",`translate(${-(n.width/2)+c/2-(n.x-(n.left??0))}, ${-(n.height/2)+c/2-(n.y-(n.top??0))})`),lt(t,b),t.intersect=function(_){return it.polygon(t,m,_)},a}f(jm,"windowPane");async function Pc(e,t){var St,vt,Nt,_t;const r=t;if(r.alias&&(t.label=r.alias),t.look==="handDrawn"){const{themeVariables:yt}=$e(),{background:wt}=yt,qt={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${wt}`]};await Pc(e,qt)}const i=$e();t.useHtmlLabels=i.htmlLabels;let a=((St=i.er)==null?void 0:St.diagramPadding)??10,n=((vt=i.er)==null?void 0:vt.entityPadding)??6;const{cssStyles:o}=t,{labelStyles:s,nodeStyles:l}=ct(t);if(r.attributes.length===0&&t.label){const yt={rx:0,ry:0,labelPaddingX:a,labelPaddingY:a*1.5};Sr(t.label,i)+yt.labelPaddingX*2<i.er.minEntityWidth&&(t.width=i.er.minEntityWidth);const wt=await bn(e,t,yt);if(!le(i.htmlLabels)){const qt=wt.select("text"),Rt=(Nt=qt.node())==null?void 0:Nt.getBBox();qt.attr("transform",`translate(${-Rt.width/2}, 0)`)}return wt}i.htmlLabels||(a*=1.25,n*=1.25);let c=mt(t);c||(c="node default");const h=e.insert("g").attr("class",c).attr("id",t.domId||t.id),u=await Oi(h,t.label??"",i,0,0,["name"],s);u.height+=n;let d=0;const p=[],g=[];let m=0,y=0,x=0,b=0,_=!0,T=!0;for(const yt of r.attributes){const wt=await Oi(h,yt.type,i,0,d,["attribute-type"],s);m=Math.max(m,wt.width+a);const qt=await Oi(h,yt.name,i,0,d,["attribute-name"],s);y=Math.max(y,qt.width+a);const Rt=await Oi(h,yt.keys.join(),i,0,d,["attribute-keys"],s);x=Math.max(x,Rt.width+a);const It=await Oi(h,yt.comment,i,0,d,["attribute-comment"],s);b=Math.max(b,It.width+a);const Zt=Math.max(wt.height,qt.height,Rt.height,It.height)+n;g.push({yOffset:d,rowHeight:Zt}),d+=Zt}let S=4;x<=a&&(_=!1,x=0,S--),b<=a&&(T=!1,b=0,S--);const v=h.node().getBBox();if(u.width+a*2-(m+y+x+b)>0){const yt=u.width+a*2-(m+y+x+b);m+=yt/S,y+=yt/S,x>0&&(x+=yt/S),b>0&&(b+=yt/S)}const M=m+y+x+b,N=st.svg(h),V=ot(t,{});t.look!=="handDrawn"&&(V.roughness=0,V.fillStyle="solid");let q=0;g.length>0&&(q=g.reduce((yt,wt)=>yt+((wt==null?void 0:wt.rowHeight)??0),0));const F=Math.max(v.width+a*2,(t==null?void 0:t.width)||0,M),Y=Math.max((q??0)+u.height,(t==null?void 0:t.height)||0),z=-F/2,B=-Y/2;h.selectAll("g:not(:first-child)").each((yt,wt,qt)=>{const Rt=Mt(qt[wt]),It=Rt.attr("transform");let Zt=0,ce=0;if(It){const ye=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(It);ye&&(Zt=parseFloat(ye[1]),ce=parseFloat(ye[2]),Rt.attr("class").includes("attribute-name")?Zt+=m:Rt.attr("class").includes("attribute-keys")?Zt+=m+y:Rt.attr("class").includes("attribute-comment")&&(Zt+=m+y+x))}Rt.attr("transform",`translate(${z+a/2+Zt}, ${ce+B+u.height+n/2})`)}),h.select(".name").attr("transform","translate("+-u.width/2+", "+(B+n/2)+")");const E=N.rectangle(z,B,F,Y,V),A=h.insert(()=>E,":first-child").attr("style",o.join("")),{themeVariables:R}=$e(),{rowEven:$,rowOdd:K,nodeBorder:et}=R;p.push(0);for(const[yt,wt]of g.entries()){const Rt=(yt+1)%2===0&&wt.yOffset!==0,It=N.rectangle(z,u.height+B+(wt==null?void 0:wt.yOffset),F,wt==null?void 0:wt.rowHeight,{...V,fill:Rt?$:K,stroke:et});h.insert(()=>It,"g.label").attr("style",o.join("")).attr("class",`row-rect-${Rt?"even":"odd"}`)}let at=N.line(z,u.height+B,F+z,u.height+B,V);h.insert(()=>at).attr("class","divider"),at=N.line(m+z,u.height+B,m+z,Y+B,V),h.insert(()=>at).attr("class","divider"),_&&(at=N.line(m+y+z,u.height+B,m+y+z,Y+B,V),h.insert(()=>at).attr("class","divider")),T&&(at=N.line(m+y+x+z,u.height+B,m+y+x+z,Y+B,V),h.insert(()=>at).attr("class","divider"));for(const yt of p)at=N.line(z,u.height+B+yt,F+z,u.height+B+yt,V),h.insert(()=>at).attr("class","divider");if(lt(t,A),l&&t.look!=="handDrawn"){const yt=l.split(";"),wt=(_t=yt==null?void 0:yt.filter(qt=>qt.includes("stroke")))==null?void 0:_t.map(qt=>`${qt}`).join("; ");h.selectAll("path").attr("style",wt??""),h.selectAll(".row-rect-even path").attr("style",l)}return t.intersect=function(yt){return it.rect(t,yt)},h}f(Pc,"erBox");async function Oi(e,t,r,i=0,a=0,n=[],o=""){const s=e.insert("g").attr("class",`label ${n.join(" ")}`).attr("transform",`translate(${i}, ${a})`).attr("style",o);t!==sh(t)&&(t=sh(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=s.node().appendChild(await qr(s,t,{width:Sr(t,r)+100,style:o,useHtmlLabels:r.htmlLabels},r));if(t.includes("&lt;")||t.includes("&gt;")){let h=l.children[0];for(h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");h.childNodes[0];)h=h.childNodes[0],h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(le(r.htmlLabels)){const h=l.children[0];h.style.textAlign="start";const u=Mt(l);c=h.getBoundingClientRect(),u.attr("width",c.width),u.attr("height",c.height)}return c}f(Oi,"addText");async function Hm(e,t,r,i,a=r.class.padding??12){const n=i?0:3,o=e.insert("g").attr("class",mt(t)).attr("id",t.domId||t.id);let s=null,l=null,c=null,h=null,u=0,d=0,p=0;if(s=o.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const b=t.annotations[0];await Wa(s,{text:`${b}`},0),u=s.node().getBBox().height}l=o.insert("g").attr("class","label-group text"),await Wa(l,t,0,["font-weight: bolder"]);const g=l.node().getBBox();d=g.height,c=o.insert("g").attr("class","members-group text");let m=0;for(const b of t.members){const _=await Wa(c,b,m,[b.parseClassifier()]);m+=_+n}p=c.node().getBBox().height,p<=0&&(p=a/2),h=o.insert("g").attr("class","methods-group text");let y=0;for(const b of t.methods){const _=await Wa(h,b,y,[b.parseClassifier()]);y+=_+n}let x=o.node().getBBox();if(s!==null){const b=s.node().getBBox();s.attr("transform",`translate(${-b.width/2})`)}return l.attr("transform",`translate(${-g.width/2}, ${u})`),x=o.node().getBBox(),c.attr("transform",`translate(0, ${u+d+a*2})`),x=o.node().getBBox(),h.attr("transform",`translate(0, ${u+d+(p?p+a*4:a*2)})`),x=o.node().getBBox(),{shapeSvg:o,bbox:x}}f(Hm,"textHelper");async function Wa(e,t,r,i=[]){const a=e.insert("g").attr("class","label").attr("style",i.join("; ")),n=$e();let o="useHtmlLabels"in t?t.useHtmlLabels:le(n.htmlLabels)??!0,s="";"text"in t?s=t.text:s=t.label,!o&&s.startsWith("\\")&&(s=s.substring(1)),Ji(s)&&(o=!0);const l=await qr(a,Ws(vi(s)),{width:Sr(s,n)+50,classes:"markdown-node-label",useHtmlLabels:o},n);let c,h=1;if(o){const u=l.children[0],d=Mt(l);h=u.innerHTML.split("<br>").length,u.innerHTML.includes("</math>")&&(h+=u.innerHTML.split("<mrow>").length-1);const p=u.getElementsByTagName("img");if(p){const g=s.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...p].map(m=>new Promise(y=>{function x(){var b;if(m.style.display="flex",m.style.flexDirection="column",g){const _=((b=n.fontSize)==null?void 0:b.toString())??window.getComputedStyle(document.body).fontSize,S=parseInt(_,10)*5+"px";m.style.minWidth=S,m.style.maxWidth=S}else m.style.width="100%";y(m)}f(x,"setupImage"),setTimeout(()=>{m.complete&&x()}),m.addEventListener("error",x),m.addEventListener("load",x)})))}c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}else{i.includes("font-weight: bolder")&&Mt(l).selectAll("tspan").attr("font-weight",""),h=l.children.length;const u=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(u.textContent=s[0]+s.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),s[1]===" "&&(u.textContent=u.textContent[0]+" "+u.textContent.substring(1))),u.textContent==="undefined"&&(u.textContent=""),c=l.getBBox()}return a.attr("transform","translate(0,"+(-c.height/(2*h)+r)+")"),c.height}f(Wa,"addText");async function Vm(e,t){var V,q;const r=Et(),i=r.class.padding??12,a=i,n=t.useHtmlLabels??le(r.htmlLabels)??!0,o=t;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:s,bbox:l}=await Hm(e,t,r,n,a),{labelStyles:c,nodeStyles:h}=ct(t);t.labelStyle=c,t.cssStyles=o.styles||"";const u=((V=o.styles)==null?void 0:V.join(";"))||h||"";t.cssStyles||(t.cssStyles=u.replaceAll("!important","").split(";"));const d=o.members.length===0&&o.methods.length===0&&!((q=r.class)!=null&&q.hideEmptyMembersBox),p=st.svg(s),g=ot(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=l.width;let y=l.height;o.members.length===0&&o.methods.length===0?y+=a:o.members.length>0&&o.methods.length===0&&(y+=a*2);const x=-m/2,b=-y/2,_=p.rectangle(x-i,b-i-(d?i:o.members.length===0&&o.methods.length===0?-i/2:0),m+2*i,y+2*i+(d?i*2:o.members.length===0&&o.methods.length===0?-i:0),g),T=s.insert(()=>_,":first-child");T.attr("class","basic label-container");const S=T.node().getBBox();s.selectAll(".text").each((F,Y,z)=>{var K;const B=Mt(z[Y]),E=B.attr("transform");let A=0;if(E){const at=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(E);at&&(A=parseFloat(at[2]))}let R=A+b+i-(d?i:o.members.length===0&&o.methods.length===0?-i/2:0);n||(R-=4);let $=x;(B.attr("class").includes("label-group")||B.attr("class").includes("annotation-group"))&&($=-((K=B.node())==null?void 0:K.getBBox().width)/2||0,s.selectAll("text").each(function(et,at,St){window.getComputedStyle(St[at]).textAnchor==="middle"&&($=0)})),B.attr("transform",`translate(${$}, ${R})`)});const v=s.select(".annotation-group").node().getBBox().height-(d?i/2:0)||0,M=s.select(".label-group").node().getBBox().height-(d?i/2:0)||0,N=s.select(".members-group").node().getBBox().height-(d?i/2:0)||0;if(o.members.length>0||o.methods.length>0||d){const F=p.line(S.x,v+M+b+i,S.x+S.width,v+M+b+i,g);s.insert(()=>F).attr("class","divider").attr("style",u)}if(d||o.members.length>0||o.methods.length>0){const F=p.line(S.x,v+M+N+b+a*2+i,S.x+S.width,v+M+N+b+i+a*2,g);s.insert(()=>F).attr("class","divider").attr("style",u)}if(o.look!=="handDrawn"&&s.selectAll("path").attr("style",u),T.select(":nth-child(2)").attr("style",u),s.selectAll(".divider").select("path").attr("style",u),t.labelStyle?s.selectAll("span").attr("style",t.labelStyle):s.selectAll("span").attr("style",u),!n){const F=RegExp(/color\s*:\s*([^;]*)/),Y=F.exec(u);if(Y){const z=Y[0].replace("color","fill");s.selectAll("tspan").attr("style",z)}else if(c){const z=F.exec(c);if(z){const B=z[0].replace("color","fill");s.selectAll("tspan").attr("style",B)}}}return lt(t,T),t.intersect=function(F){return it.rect(t,F)},s}f(Vm,"classBox");async function Um(e,t){var v,M;const{labelStyles:r,nodeStyles:i}=ct(t);t.labelStyle=r;const a=t,n=t,o=20,s=20,l="verifyMethod"in t,c=mt(t),h=e.insert("g").attr("class",c).attr("id",t.domId??t.id);let u;l?u=await ir(h,`&lt;&lt;${a.type}&gt;&gt;`,0,t.labelStyle):u=await ir(h,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let d=u;const p=await ir(h,a.name,d,t.labelStyle+"; font-weight: bold;");if(d+=p+s,l){const N=await ir(h,`${a.requirementId?`id: ${a.requirementId}`:""}`,d,t.labelStyle);d+=N;const V=await ir(h,`${a.text?`Text: ${a.text}`:""}`,d,t.labelStyle);d+=V;const q=await ir(h,`${a.risk?`Risk: ${a.risk}`:""}`,d,t.labelStyle);d+=q,await ir(h,`${a.verifyMethod?`Verification: ${a.verifyMethod}`:""}`,d,t.labelStyle)}else{const N=await ir(h,`${n.type?`Type: ${n.type}`:""}`,d,t.labelStyle);d+=N,await ir(h,`${n.docRef?`Doc Ref: ${n.docRef}`:""}`,d,t.labelStyle)}const g=(((v=h.node())==null?void 0:v.getBBox().width)??200)+o,m=(((M=h.node())==null?void 0:M.getBBox().height)??200)+o,y=-g/2,x=-m/2,b=st.svg(h),_=ot(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const T=b.rectangle(y,x,g,m,_),S=h.insert(()=>T,":first-child");if(S.attr("class","basic label-container").attr("style",i),h.selectAll(".label").each((N,V,q)=>{const F=Mt(q[V]),Y=F.attr("transform");let z=0,B=0;if(Y){const $=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Y);$&&(z=parseFloat($[1]),B=parseFloat($[2]))}const E=B-m/2;let A=y+o/2;(V===0||V===1)&&(A=z),F.attr("transform",`translate(${A}, ${E+o})`)}),d>u+p+s){const N=b.line(y,x+u+p+s,y+g,x+u+p+s,_);h.insert(()=>N).attr("style",i)}return lt(t,S),t.intersect=function(N){return it.rect(t,N)},h}f(Um,"requirementBox");async function ir(e,t,r,i=""){if(t==="")return 0;const a=e.insert("g").attr("class","label").attr("style",i),n=Et(),o=n.htmlLabels??!0,s=await qr(a,Ws(vi(t)),{width:Sr(t,n)+50,classes:"markdown-node-label",useHtmlLabels:o,style:i},n);let l;if(o){const c=s.children[0],h=Mt(s);l=c.getBoundingClientRect(),h.attr("width",l.width),h.attr("height",l.height)}else{const c=s.children[0];for(const h of c.children)h.textContent=h.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),i&&h.setAttribute("style",i);l=s.getBBox(),l.height+=6}return a.attr("transform",`translate(${-l.width/2},${-l.height/2+r})`),l.height}f(ir,"addText");var pT=f(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function Ym(e,t,{config:r}){var Y,z;const{labelStyles:i,nodeStyles:a}=ct(t);t.labelStyle=i||"";const n=10,o=t.width;t.width=(t.width??200)-10;const{shapeSvg:s,bbox:l,label:c}=await bt(e,t,mt(t)),h=t.padding||10;let u="",d;"ticket"in t&&t.ticket&&((Y=r==null?void 0:r.kanban)!=null&&Y.ticketBaseUrl)&&(u=(z=r==null?void 0:r.kanban)==null?void 0:z.ticketBaseUrl.replace("#TICKET#",t.ticket),d=s.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",u).attr("target","_blank"));const p={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let g,m;d?{label:g,bbox:m}=await Oo(d,"ticket"in t&&t.ticket||"",p):{label:g,bbox:m}=await Oo(s,"ticket"in t&&t.ticket||"",p);const{label:y,bbox:x}=await Oo(s,"assigned"in t&&t.assigned||"",p);t.width=o;const b=10,_=(t==null?void 0:t.width)||0,T=Math.max(m.height,x.height)/2,S=Math.max(l.height+b*2,(t==null?void 0:t.height)||0)+T,v=-_/2,M=-S/2;c.attr("transform","translate("+(h-_/2)+", "+(-T-l.height/2)+")"),g.attr("transform","translate("+(h-_/2)+", "+(-T+l.height/2)+")"),y.attr("transform","translate("+(h+_/2-x.width-2*n)+", "+(-T+l.height/2)+")");let N;const{rx:V,ry:q}=t,{cssStyles:F}=t;if(t.look==="handDrawn"){const B=st.svg(s),E=ot(t,{}),A=V||q?B.path(Mr(v,M,_,S,V||0),E):B.rectangle(v,M,_,S,E);N=s.insert(()=>A,":first-child"),N.attr("class","basic label-container").attr("style",F||null)}else{N=s.insert("rect",":first-child"),N.attr("class","basic label-container __APA__").attr("style",a).attr("rx",V??5).attr("ry",q??5).attr("x",v).attr("y",M).attr("width",_).attr("height",S);const B="priority"in t&&t.priority;if(B){const E=s.append("line"),A=v+2,R=M+Math.floor((V??0)/2),$=M+S-Math.floor((V??0)/2);E.attr("x1",A).attr("y1",R).attr("x2",A).attr("y2",$).attr("stroke-width","4").attr("stroke",pT(B))}}return lt(t,N),t.height=S,t.intersect=function(B){return it.rect(t,B)},s}f(Ym,"kanbanItem");var dT=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:Lm},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:Sm},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:Am},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:Fm},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:Qg},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:Vg},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:wm},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:nm},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:gm},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:fm},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:Im},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:pm},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:tm},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:Dm},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:jg},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Tm},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:$m},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Em},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:im},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:sm},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:Gg},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:Xg},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:Zg},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:mm},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:zm},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:am},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:Om},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:ym},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:Kg},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:Jg},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:qm},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:jm},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:em},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:Nm},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:rm},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:Mm},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:vm},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:bm},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:Wg},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:Yg},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:Rm},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:Pm},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:Wm},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Cm},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:xm}],fT=f(()=>{const t=[...Object.entries({state:Bm,choice:Hg,note:_m,rectWithTitle:km,labelRect:dm,iconSquare:hm,iconCircle:lm,icon:om,iconRounded:cm,imageSquare:um,anchor:zg,kanbanItem:Ym,classBox:Vm,erBox:Pc,requirementBox:Um}),...dT.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(a=>[a,r.handler]))];return Object.fromEntries(t)},"generateShapeMap"),Gm=fT();function gT(e){return e in Gm}f(gT,"isValidShape");var oo=new Map;async function Xm(e,t,r){let i,a;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const n=t.shape?Gm[t.shape]:void 0;if(!n)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let o;r.config.securityLevel==="sandbox"?o="_top":t.linkTarget&&(o=t.linkTarget||"_blank"),i=e.insert("svg:a").attr("xlink:href",t.link).attr("target",o??null),a=await n(i,t,r)}else a=await n(e,t,r),i=a;return t.tooltip&&a.attr("title",t.tooltip),oo.set(t.id,i),t.haveCallback&&i.attr("class",i.attr("class")+" clickable"),i}f(Xm,"insertNode");var bE=f((e,t)=>{oo.set(t.id,e)},"setNodeElem"),vE=f(()=>{oo.clear()},"clear"),_E=f(e=>{const t=oo.get(e.id);I.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,i=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+i-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),i},"positionNode"),mT=f((e,t,r,i,a,n)=>{t.arrowTypeStart&&pu(e,"start",t.arrowTypeStart,r,i,a,n),t.arrowTypeEnd&&pu(e,"end",t.arrowTypeEnd,r,i,a,n)},"addEdgeMarkers"),yT={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},pu=f((e,t,r,i,a,n,o)=>{var u;const s=yT[r];if(!s){I.warn(`Unknown arrow type: ${r}`);return}const l=s.type,h=`${a}_${n}-${l}${t==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const d=o.replace(/[^\dA-Za-z]/g,"_"),p=`${h}_${d}`;if(!document.getElementById(p)){const g=document.getElementById(h);if(g){const m=g.cloneNode(!0);m.id=p,m.querySelectorAll("path, circle, line").forEach(x=>{x.setAttribute("stroke",o),s.fill&&x.setAttribute("fill",o)}),(u=g.parentNode)==null||u.appendChild(m)}}e.attr(`marker-${t}`,`url(${i}#${p})`)}else e.attr(`marker-${t}`,`url(${i}#${h})`)},"addEdgeMarker"),Ds=new Map,ue=new Map,wE=f(()=>{Ds.clear(),ue.clear()},"clear"),Da=f(e=>e?e.reduce((r,i)=>r+";"+i,""):"","getLabelStyles"),xT=f(async(e,t)=>{let r=le(Et().flowchart.htmlLabels);const i=await qr(e,t.label,{style:Da(t.labelStyle),useHtmlLabels:r,addSvgBackground:!0,isNode:!1});I.info("abc82",t,t.labelType);const a=e.insert("g").attr("class","edgeLabel"),n=a.insert("g").attr("class","label");n.node().appendChild(i);let o=i.getBBox();if(r){const l=i.children[0],c=Mt(i);o=l.getBoundingClientRect(),c.attr("width",o.width),c.attr("height",o.height)}n.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),Ds.set(t.id,a),t.width=o.width,t.height=o.height;let s;if(t.startLabelLeft){const l=await oi(t.startLabelLeft,Da(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");s=h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),ue.get(t.id)||ue.set(t.id,{}),ue.get(t.id).startLeft=c,ja(s,t.startLabelLeft)}if(t.startLabelRight){const l=await oi(t.startLabelRight,Da(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");s=c.node().appendChild(l),h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),ue.get(t.id)||ue.set(t.id,{}),ue.get(t.id).startRight=c,ja(s,t.startLabelRight)}if(t.endLabelLeft){const l=await oi(t.endLabelLeft,Da(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");s=h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),c.node().appendChild(l),ue.get(t.id)||ue.set(t.id,{}),ue.get(t.id).endLeft=c,ja(s,t.endLabelLeft)}if(t.endLabelRight){const l=await oi(t.endLabelRight,Da(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");s=h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),c.node().appendChild(l),ue.get(t.id)||ue.set(t.id,{}),ue.get(t.id).endRight=c,ja(s,t.endLabelRight)}return i},"insertEdgeLabel");function ja(e,t){Et().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}f(ja,"setTerminalWidth");var bT=f((e,t)=>{I.debug("Moving label abc88 ",e.id,e.label,Ds.get(e.id),t);let r=t.updatedPath?t.updatedPath:t.originalPath;const i=Et(),{subGraphTitleTotalMargin:a}=Ql(i);if(e.label){const n=Ds.get(e.id);let o=e.x,s=e.y;if(r){const l=nr.calcLabelPosition(r);I.debug("Moving label "+e.label+" from (",o,",",s,") to (",l.x,",",l.y,") abc88"),t.updatedPath&&(o=l.x,s=l.y)}n.attr("transform",`translate(${o}, ${s+a/2})`)}if(e.startLabelLeft){const n=ue.get(e.id).startLeft;let o=e.x,s=e.y;if(r){const l=nr.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);o=l.x,s=l.y}n.attr("transform",`translate(${o}, ${s})`)}if(e.startLabelRight){const n=ue.get(e.id).startRight;let o=e.x,s=e.y;if(r){const l=nr.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);o=l.x,s=l.y}n.attr("transform",`translate(${o}, ${s})`)}if(e.endLabelLeft){const n=ue.get(e.id).endLeft;let o=e.x,s=e.y;if(r){const l=nr.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);o=l.x,s=l.y}n.attr("transform",`translate(${o}, ${s})`)}if(e.endLabelRight){const n=ue.get(e.id).endRight;let o=e.x,s=e.y;if(r){const l=nr.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);o=l.x,s=l.y}n.attr("transform",`translate(${o}, ${s})`)}},"positionEdgeLabel"),vT=f((e,t)=>{const r=e.x,i=e.y,a=Math.abs(t.x-r),n=Math.abs(t.y-i),o=e.width/2,s=e.height/2;return a>=o||n>=s},"outsideNode"),_T=f((e,t,r)=>{I.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const i=e.x,a=e.y,n=Math.abs(i-r.x),o=e.width/2;let s=r.x<t.x?o-n:o+n;const l=e.height/2,c=Math.abs(t.y-r.y),h=Math.abs(t.x-r.x);if(Math.abs(a-t.y)*o>Math.abs(i-t.x)*l){let u=r.y<t.y?t.y-l-a:a-l-t.y;s=h*u/c;const d={x:r.x<t.x?r.x+s:r.x-h+s,y:r.y<t.y?r.y+c-u:r.y-c+u};return s===0&&(d.x=t.x,d.y=t.y),h===0&&(d.x=t.x),c===0&&(d.y=t.y),I.debug(`abc89 top/bottom calc, Q ${c}, q ${u}, R ${h}, r ${s}`,d),d}else{r.x<t.x?s=t.x-o-i:s=i-o-t.x;let u=c*s/h,d=r.x<t.x?r.x+h-s:r.x-h+s,p=r.y<t.y?r.y+u:r.y-u;return I.debug(`sides calc abc89, Q ${c}, q ${u}, R ${h}, r ${s}`,{_x:d,_y:p}),s===0&&(d=t.x,p=t.y),h===0&&(d=t.x),c===0&&(p=t.y),{x:d,y:p}}},"intersection"),du=f((e,t)=>{I.warn("abc88 cutPathAtIntersect",e,t);let r=[],i=e[0],a=!1;return e.forEach(n=>{if(I.info("abc88 checking point",n,t),!vT(t,n)&&!a){const o=_T(t,i,n);I.debug("abc88 inside",n,i,o),I.debug("abc88 intersection",o,t);let s=!1;r.forEach(l=>{s=s||l.x===o.x&&l.y===o.y}),r.some(l=>l.x===o.x&&l.y===o.y)?I.warn("abc88 no intersect",o,r):r.push(o),a=!0}else I.warn("abc88 outside",n,i),i=n,a||r.push(n)}),I.debug("returning points",r),r},"cutPathAtIntersect");function Zm(e){const t=[],r=[];for(let i=1;i<e.length-1;i++){const a=e[i-1],n=e[i],o=e[i+1];(a.x===n.x&&n.y===o.y&&Math.abs(n.x-o.x)>5&&Math.abs(n.y-a.y)>5||a.y===n.y&&n.x===o.x&&Math.abs(n.x-a.x)>5&&Math.abs(n.y-o.y)>5)&&(t.push(n),r.push(i))}return{cornerPoints:t,cornerPointPositions:r}}f(Zm,"extractCornerPoints");var fu=f(function(e,t,r){const i=t.x-e.x,a=t.y-e.y,n=Math.sqrt(i*i+a*a),o=r/n;return{x:t.x-o*i,y:t.y-o*a}},"findAdjacentPoint"),wT=f(function(e){const{cornerPointPositions:t}=Zm(e),r=[];for(let i=0;i<e.length;i++)if(t.includes(i)){const a=e[i-1],n=e[i+1],o=e[i],s=fu(a,o,5),l=fu(n,o,5),c=l.x-s.x,h=l.y-s.y;r.push(s);const u=Math.sqrt(2)*2;let d={x:o.x,y:o.y};if(Math.abs(n.x-a.x)>10&&Math.abs(n.y-a.y)>=10){I.debug("Corner point fixing",Math.abs(n.x-a.x),Math.abs(n.y-a.y));const p=5;o.x===s.x?d={x:c<0?s.x-p+u:s.x+p-u,y:h<0?s.y-u:s.y+u}:d={x:c<0?s.x-u:s.x+u,y:h<0?s.y-p+u:s.y+p-u}}else I.debug("Corner point skipping fixing",Math.abs(n.x-a.x),Math.abs(n.y-a.y));r.push(d,l)}else r.push(e[i]);return r},"fixCorners"),CT=f(function(e,t,r,i,a,n,o){var V;const{handDrawnSeed:s}=Et();let l=t.points,c=!1;const h=a;var u=n;const d=[];for(const q in t.cssCompiledStyles)Rd(q)||d.push(t.cssCompiledStyles[q]);u.intersect&&h.intersect&&(l=l.slice(1,t.points.length-1),l.unshift(h.intersect(l[0])),I.debug("Last point APA12",t.start,"-->",t.end,l[l.length-1],u,u.intersect(l[l.length-1])),l.push(u.intersect(l[l.length-1]))),t.toCluster&&(I.info("to cluster abc88",r.get(t.toCluster)),l=du(t.points,r.get(t.toCluster).node),c=!0),t.fromCluster&&(I.debug("from cluster abc88",r.get(t.fromCluster),JSON.stringify(l,null,2)),l=du(l.reverse(),r.get(t.fromCluster).node).reverse(),c=!0);let p=l.filter(q=>!Number.isNaN(q.y));p=wT(p);let g=Zn;switch(g=bs,t.curve){case"linear":g=bs;break;case"basis":g=Zn;break;case"cardinal":g=yf;break;case"bumpX":g=pf;break;case"bumpY":g=df;break;case"catmullRom":g=bf;break;case"monotoneX":g=Sf;break;case"monotoneY":g=Tf;break;case"natural":g=Lf;break;case"step":g=Af;break;case"stepAfter":g=Ef;break;case"stepBefore":g=Bf;break;default:g=Zn}const{x:m,y}=Ub(t),x=b2().x(m).y(y).curve(g);let b;switch(t.thickness){case"normal":b="edge-thickness-normal";break;case"thick":b="edge-thickness-thick";break;case"invisible":b="edge-thickness-invisible";break;default:b="edge-thickness-normal"}switch(t.pattern){case"solid":b+=" edge-pattern-solid";break;case"dotted":b+=" edge-pattern-dotted";break;case"dashed":b+=" edge-pattern-dashed";break;default:b+=" edge-pattern-solid"}let _,T=x(p);const S=Array.isArray(t.style)?t.style:t.style?[t.style]:[];let v=S.find(q=>q==null?void 0:q.startsWith("stroke:"));if(t.look==="handDrawn"){const q=st.svg(e);Object.assign([],p);const F=q.path(T,{roughness:.3,seed:s});b+=" transition",_=Mt(F).select("path").attr("id",t.id).attr("class"," "+b+(t.classes?" "+t.classes:"")).attr("style",S?S.reduce((z,B)=>z+";"+B,""):"");let Y=_.attr("d");_.attr("d",Y),e.node().appendChild(_.node())}else{const q=d.join(";"),F=S?S.reduce((B,E)=>B+E+";",""):"";let Y="";t.animate&&(Y=" edge-animation-fast"),t.animation&&(Y=" edge-animation-"+t.animation);const z=q?q+";"+F+";":F;_=e.append("path").attr("d",T).attr("id",t.id).attr("class"," "+b+(t.classes?" "+t.classes:"")+(Y??"")).attr("style",z),v=(V=z.match(/stroke:([^;]+)/))==null?void 0:V[1]}let M="";(Et().flowchart.arrowMarkerAbsolute||Et().state.arrowMarkerAbsolute)&&(M=Ku(!0)),I.info("arrowTypeStart",t.arrowTypeStart),I.info("arrowTypeEnd",t.arrowTypeEnd),mT(_,t,M,o,i,v);let N={};return c&&(N.updatedPath=l),N.originalPath=t.points,N},"insertEdge"),kT=f((e,t,r,i)=>{t.forEach(a=>{qT[a](e,r,i)})},"insertMarkers"),ST=f((e,t,r)=>{I.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),TT=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),MT=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),LT=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),AT=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),BT=f((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),ET=f((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),$T=f((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),FT=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),PT=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),RT=f((e,t,r)=>{const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("d","M9,0 L9,18");const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),a.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),DT=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),OT=f((e,t,r)=>{const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),a.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),IT=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),NT=f((e,t,r)=>{const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");i.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),i.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),i.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),qT={extension:ST,composition:TT,aggregation:MT,dependency:LT,lollipop:AT,point:BT,circle:ET,cross:$T,barb:FT,only_one:PT,zero_or_one:RT,one_or_more:DT,zero_or_more:OT,requirement_arrow:IT,requirement_contains:NT},zT=kT,WT={common:sa,getConfig:$e,insertCluster:ZS,insertEdge:CT,insertEdgeLabel:xT,insertMarkers:zT,insertNode:Xm,interpolateToCurve:gc,labelHelper:bt,log:I,positionEdgeLabel:bT},on={},Km=f(e=>{for(const t of e)on[t.name]=t},"registerLayoutLoaders"),jT=f(()=>{Km([{name:"dagre",loader:f(async()=>await Ot(()=>import("./DpT8JGlu.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),"loader")}])},"registerDefaultLayoutLoaders");jT();var CE=f(async(e,t)=>{if(!(e.layoutAlgorithm in on))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const r=on[e.layoutAlgorithm];return(await r.loader()).render(e,t,WT,{algorithm:r.algorithm})},"render"),kE=f((e="",{fallback:t="dagre"}={})=>{if(e in on)return e;if(t in on)return I.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),gu={name:"mermaid",version:"11.9.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.0.4","@iconify/utils":"^2.1.33","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.13",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.0.0",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.2","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.0",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.0.2",jison:"^0.4.18","js-base64":"^3.7.7",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.2",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.10","type-fest":"^4.35.0",typedoc:"^0.27.8","typedoc-plugin-markdown":"^4.4.2",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.0.2","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},HT=f(e=>{var a;const{securityLevel:t}=Et();let r=Mt("body");if(t==="sandbox"){const o=((a=Mt(`#i${e}`).node())==null?void 0:a.contentDocument)??document;r=Mt(o.body)}return r.select(`#${e}`)},"selectSvgElement"),Qm="comm",Jm="rule",ty="decl",VT="@import",UT="@namespace",YT="@keyframes",GT="@layer",ey=Math.abs,Rc=String.fromCharCode;function ry(e){return e.trim()}function ts(e,t,r){return e.replace(t,r)}function XT(e,t,r){return e.indexOf(t,r)}function zi(e,t){return e.charCodeAt(t)|0}function aa(e,t,r){return e.slice(t,r)}function ar(e){return e.length}function ZT(e){return e.length}function qn(e,t){return t.push(e),e}var lo=1,na=1,iy=0,je=0,ie=0,ua="";function Dc(e,t,r,i,a,n,o,s){return{value:e,root:t,parent:r,type:i,props:a,children:n,line:lo,column:na,length:o,return:"",siblings:s}}function KT(){return ie}function QT(){return ie=je>0?zi(ua,--je):0,na--,ie===10&&(na=1,lo--),ie}function Xe(){return ie=je<iy?zi(ua,je++):0,na++,ie===10&&(na=1,lo++),ie}function Fr(){return zi(ua,je)}function es(){return je}function co(e,t){return aa(ua,e,t)}function ln(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function JT(e){return lo=na=1,iy=ar(ua=e),je=0,[]}function tM(e){return ua="",e}function Io(e){return ry(co(je-1,Bl(e===91?e+2:e===40?e+1:e)))}function eM(e){for(;(ie=Fr())&&ie<33;)Xe();return ln(e)>2||ln(ie)>3?"":" "}function rM(e,t){for(;--t&&Xe()&&!(ie<48||ie>102||ie>57&&ie<65||ie>70&&ie<97););return co(e,es()+(t<6&&Fr()==32&&Xe()==32))}function Bl(e){for(;Xe();)switch(ie){case e:return je;case 34:case 39:e!==34&&e!==39&&Bl(ie);break;case 40:e===41&&Bl(e);break;case 92:Xe();break}return je}function iM(e,t){for(;Xe()&&e+ie!==57;)if(e+ie===84&&Fr()===47)break;return"/*"+co(t,je-1)+"*"+Rc(e===47?e:Xe())}function aM(e){for(;!ln(Fr());)Xe();return co(e,je)}function nM(e){return tM(rs("",null,null,null,[""],e=JT(e),0,[0],e))}function rs(e,t,r,i,a,n,o,s,l){for(var c=0,h=0,u=o,d=0,p=0,g=0,m=1,y=1,x=1,b=0,_="",T=a,S=n,v=i,M=_;y;)switch(g=b,b=Xe()){case 40:if(g!=108&&zi(M,u-1)==58){XT(M+=ts(Io(b),"&","&\f"),"&\f",ey(c?s[c-1]:0))!=-1&&(x=-1);break}case 34:case 39:case 91:M+=Io(b);break;case 9:case 10:case 13:case 32:M+=eM(g);break;case 92:M+=rM(es()-1,7);continue;case 47:switch(Fr()){case 42:case 47:qn(sM(iM(Xe(),es()),t,r,l),l),(ln(g||1)==5||ln(Fr()||1)==5)&&ar(M)&&aa(M,-1,void 0)!==" "&&(M+=" ");break;default:M+="/"}break;case 123*m:s[c++]=ar(M)*x;case 125*m:case 59:case 0:switch(b){case 0:case 125:y=0;case 59+h:x==-1&&(M=ts(M,/\f/g,"")),p>0&&(ar(M)-u||m===0&&g===47)&&qn(p>32?yu(M+";",i,r,u-1,l):yu(ts(M," ","")+";",i,r,u-2,l),l);break;case 59:M+=";";default:if(qn(v=mu(M,t,r,c,h,a,s,_,T=[],S=[],u,n),n),b===123)if(h===0)rs(M,t,v,v,T,n,u,s,S);else{switch(d){case 99:if(zi(M,3)===110)break;case 108:if(zi(M,2)===97)break;default:h=0;case 100:case 109:case 115:}h?rs(e,v,v,i&&qn(mu(e,v,v,0,0,a,s,_,a,T=[],u,S),S),a,S,u,s,i?T:S):rs(M,v,v,v,[""],S,0,s,S)}}c=h=p=0,m=x=1,_=M="",u=o;break;case 58:u=1+ar(M),p=g;default:if(m<1){if(b==123)--m;else if(b==125&&m++==0&&QT()==125)continue}switch(M+=Rc(b),b*m){case 38:x=h>0?1:(M+="\f",-1);break;case 44:s[c++]=(ar(M)-1)*x,x=1;break;case 64:Fr()===45&&(M+=Io(Xe())),d=Fr(),h=u=ar(_=M+=aM(es())),b++;break;case 45:g===45&&ar(M)==2&&(m=0)}}return n}function mu(e,t,r,i,a,n,o,s,l,c,h,u){for(var d=a-1,p=a===0?n:[""],g=ZT(p),m=0,y=0,x=0;m<i;++m)for(var b=0,_=aa(e,d+1,d=ey(y=o[m])),T=e;b<g;++b)(T=ry(y>0?p[b]+" "+_:ts(_,/&\f/g,p[b])))&&(l[x++]=T);return Dc(e,t,r,a===0?Jm:s,l,c,h,u)}function sM(e,t,r,i){return Dc(e,t,r,Qm,Rc(KT()),aa(e,2,-2),0,i)}function yu(e,t,r,i,a){return Dc(e,t,r,ty,aa(e,0,i),aa(e,i+1,-1),i,a)}function El(e,t){for(var r="",i=0;i<e.length;i++)r+=t(e[i],i,e,t)||"";return r}function oM(e,t,r,i){switch(e.type){case GT:if(e.children.length)break;case VT:case UT:case ty:return e.return=e.return||e.value;case Qm:return"";case YT:return e.return=e.value+"{"+El(e.children,i)+"}";case Jm:if(!ar(e.value=e.props.join(",")))return""}return ar(r=El(e.children,i))?e.return=e.value+"{"+r+"}":""}var lM=Rf(Object.keys,Object),cM=Object.prototype,hM=cM.hasOwnProperty;function uM(e){if(!Js(e))return lM(e);var t=[];for(var r in Object(e))hM.call(e,r)&&r!="constructor"&&t.push(r);return t}var $l=bi(hr,"DataView"),Fl=bi(hr,"Promise"),Pl=bi(hr,"Set"),Rl=bi(hr,"WeakMap"),xu="[object Map]",pM="[object Object]",bu="[object Promise]",vu="[object Set]",_u="[object WeakMap]",wu="[object DataView]",dM=xi($l),fM=xi(sn),gM=xi(Fl),mM=xi(Pl),yM=xi(Rl),ri=la;($l&&ri(new $l(new ArrayBuffer(1)))!=wu||sn&&ri(new sn)!=xu||Fl&&ri(Fl.resolve())!=bu||Pl&&ri(new Pl)!=vu||Rl&&ri(new Rl)!=_u)&&(ri=function(e){var t=la(e),r=t==pM?e.constructor:void 0,i=r?xi(r):"";if(i)switch(i){case dM:return wu;case fM:return xu;case gM:return bu;case mM:return vu;case yM:return _u}return t});var xM="[object Map]",bM="[object Set]",vM=Object.prototype,_M=vM.hasOwnProperty;function Cu(e){if(e==null)return!0;if(to(e)&&(Ts(e)||typeof e=="string"||typeof e.splice=="function"||dc(e)||fc(e)||Ss(e)))return!e.length;var t=ri(e);if(t==xM||t==bM)return!e.size;if(Js(e))return!uM(e).length;for(var r in e)if(_M.call(e,r))return!1;return!0}var ay="c4",wM=f(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),CM=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./DwQwBgYJ.js");return{diagram:t}},__vite__mapDeps([6,7]),import.meta.url);return{id:ay,diagram:e}},"loader"),kM={id:ay,detector:wM,loader:CM},SM=kM,ny="flowchart",TM=f((e,t)=>{var r,i;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-wrapper"||((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)},"detector"),MM=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./DKBq3jgd.js");return{diagram:t}},__vite__mapDeps([8,9,10,11,12]),import.meta.url);return{id:ny,diagram:e}},"loader"),LM={id:ny,detector:TM,loader:MM},AM=LM,sy="flowchart-v2",BM=f((e,t)=>{var r,i,a;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-d3"?!1:(((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&((a=t==null?void 0:t.flowchart)==null?void 0:a.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(e))},"detector"),EM=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./DKBq3jgd.js");return{diagram:t}},__vite__mapDeps([8,9,10,11,12]),import.meta.url);return{id:sy,diagram:e}},"loader"),$M={id:sy,detector:BM,loader:EM},FM=$M,oy="er",PM=f(e=>/^\s*erDiagram/.test(e),"detector"),RM=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./5qgvtwS4.js");return{diagram:t}},__vite__mapDeps([13,10,11,12]),import.meta.url);return{id:oy,diagram:e}},"loader"),DM={id:oy,detector:PM,loader:RM},OM=DM,ly="gitGraph",IM=f(e=>/^\s*gitGraph/.test(e),"detector"),NM=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./CTnUhF1n.js");return{diagram:t}},__vite__mapDeps([14,15,16,17,18,2,4,5]),import.meta.url);return{id:ly,diagram:e}},"loader"),qM={id:ly,detector:IM,loader:NM},zM=qM,cy="gantt",WM=f(e=>/^\s*gantt/.test(e),"detector"),jM=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./CbHM4lHO.js");return{diagram:t}},__vite__mapDeps([19,20,21,22,23]),import.meta.url);return{id:cy,diagram:e}},"loader"),HM={id:cy,detector:WM,loader:jM},VM=HM,hy="info",UM=f(e=>/^\s*info/.test(e),"detector"),YM=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./Ckw6tIJu.js");return{diagram:t}},__vite__mapDeps([24,17,18,2,4,5]),import.meta.url);return{id:hy,diagram:e}},"loader"),GM={id:hy,detector:UM,loader:YM},uy="pie",XM=f(e=>/^\s*pie/.test(e),"detector"),ZM=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./8T1XTuxp.js");return{diagram:t}},__vite__mapDeps([25,15,17,18,2,4,5,26,27,22]),import.meta.url);return{id:uy,diagram:e}},"loader"),KM={id:uy,detector:XM,loader:ZM},py="quadrantChart",QM=f(e=>/^\s*quadrantChart/.test(e),"detector"),JM=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./DzuRD2oE.js");return{diagram:t}},__vite__mapDeps([28,21,22,23]),import.meta.url);return{id:py,diagram:e}},"loader"),tL={id:py,detector:QM,loader:JM},eL=tL,dy="xychart",rL=f(e=>/^\s*xychart-beta/.test(e),"detector"),iL=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./CDKS-0mO.js");return{diagram:t}},__vite__mapDeps([29,22,27,21,23]),import.meta.url);return{id:dy,diagram:e}},"loader"),aL={id:dy,detector:rL,loader:iL},nL=aL,fy="requirement",sL=f(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),oL=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./PQEBqEYu.js");return{diagram:t}},__vite__mapDeps([30,10,11]),import.meta.url);return{id:fy,diagram:e}},"loader"),lL={id:fy,detector:sL,loader:oL},cL=lL,gy="sequence",hL=f(e=>/^\s*sequenceDiagram/.test(e),"detector"),uL=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./CJ8aE0Ag.js");return{diagram:t}},__vite__mapDeps([31,7,16]),import.meta.url);return{id:gy,diagram:e}},"loader"),pL={id:gy,detector:hL,loader:uL},dL=pL,my="class",fL=f((e,t)=>{var r;return((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e)},"detector"),gL=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./B0WhhfC-.js");return{diagram:t}},__vite__mapDeps([32,33,9,10,11]),import.meta.url);return{id:my,diagram:e}},"loader"),mL={id:my,detector:fL,loader:gL},yL=mL,yy="classDiagram",xL=f((e,t)=>{var r;return/^\s*classDiagram/.test(e)&&((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e)},"detector"),bL=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./DcW_YQ5n.js");return{diagram:t}},__vite__mapDeps([34,33,9,10,11]),import.meta.url);return{id:yy,diagram:e}},"loader"),vL={id:yy,detector:xL,loader:bL},_L=vL,xy="state",wL=f((e,t)=>{var r;return((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e)},"detector"),CL=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./CyEkXAh8.js");return{diagram:t}},__vite__mapDeps([35,36,10,11,1,2,3,4]),import.meta.url);return{id:xy,diagram:e}},"loader"),kL={id:xy,detector:wL,loader:CL},SL=kL,by="stateDiagram",TL=f((e,t)=>{var r;return!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper")},"detector"),ML=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./BRAHB-ya.js");return{diagram:t}},__vite__mapDeps([37,36,10,11]),import.meta.url);return{id:by,diagram:e}},"loader"),LL={id:by,detector:TL,loader:ML},AL=LL,vy="journey",BL=f(e=>/^\s*journey/.test(e),"detector"),EL=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./9gUq_U7h.js");return{diagram:t}},__vite__mapDeps([38,7,9,26]),import.meta.url);return{id:vy,diagram:e}},"loader"),$L={id:vy,detector:BL,loader:EL},FL=$L,PL=f((e,t,r)=>{I.debug(`rendering svg for syntax error
`);const i=HT(t),a=i.append("g");i.attr("viewBox","0 0 2412 512"),Qu(i,100,512,!0),a.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),a.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),a.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),a.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),a.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),a.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),a.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),a.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),_y={draw:PL},RL=_y,DL={db:{},renderer:_y,parser:{parse:f(()=>{},"parse")}},OL=DL,wy="flowchart-elk",IL=f((e,t={})=>{var r;return/^\s*flowchart-elk/.test(e)||/^\s*flowchart|graph/.test(e)&&((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk"?(t.layout="elk",!0):!1},"detector"),NL=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./DKBq3jgd.js");return{diagram:t}},__vite__mapDeps([8,9,10,11,12]),import.meta.url);return{id:wy,diagram:e}},"loader"),qL={id:wy,detector:IL,loader:NL},zL=qL,Cy="timeline",WL=f(e=>/^\s*timeline/.test(e),"detector"),jL=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./CNnoJf6S.js");return{diagram:t}},__vite__mapDeps([39,26]),import.meta.url);return{id:Cy,diagram:e}},"loader"),HL={id:Cy,detector:WL,loader:jL},VL=HL,ky="mindmap",UL=f(e=>/^\s*mindmap/.test(e),"detector"),YL=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./DYGnug3r.js");return{diagram:t}},__vite__mapDeps([40,41,20]),import.meta.url);return{id:ky,diagram:e}},"loader"),GL={id:ky,detector:UL,loader:YL},XL=GL,Sy="kanban",ZL=f(e=>/^\s*kanban/.test(e),"detector"),KL=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./CYWLVBc8.js");return{diagram:t}},__vite__mapDeps([42,9]),import.meta.url);return{id:Sy,diagram:e}},"loader"),QL={id:Sy,detector:ZL,loader:KL},JL=QL,Ty="sankey",tA=f(e=>/^\s*sankey-beta/.test(e),"detector"),eA=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./YRbyPKrz.js");return{diagram:t}},__vite__mapDeps([43,27,22]),import.meta.url);return{id:Ty,diagram:e}},"loader"),rA={id:Ty,detector:tA,loader:eA},iA=rA,My="packet",aA=f(e=>/^\s*packet(-beta)?/.test(e),"detector"),nA=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./TQHYOU9I.js");return{diagram:t}},__vite__mapDeps([44,15,17,18,2,4,5]),import.meta.url);return{id:My,diagram:e}},"loader"),sA={id:My,detector:aA,loader:nA},Ly="radar",oA=f(e=>/^\s*radar-beta/.test(e),"detector"),lA=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./DBuVaz1-.js");return{diagram:t}},__vite__mapDeps([45,15,17,18,2,4,5]),import.meta.url);return{id:Ly,diagram:e}},"loader"),cA={id:Ly,detector:oA,loader:lA},Ay="block",hA=f(e=>/^\s*block-beta/.test(e),"detector"),uA=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./DC8cJQSY.js");return{diagram:t}},__vite__mapDeps([46,9,5,2,1,12]),import.meta.url);return{id:Ay,diagram:e}},"loader"),pA={id:Ay,detector:hA,loader:uA},dA=pA,By="architecture",fA=f(e=>/^\s*architecture/.test(e),"detector"),gA=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./D0BIT6AZ.js");return{diagram:t}},__vite__mapDeps([47,15,16,17,18,2,4,5,41,20]),import.meta.url);return{id:By,diagram:e}},"loader"),mA={id:By,detector:fA,loader:gA},yA=mA,Ey="treemap",xA=f(e=>/^\s*treemap/.test(e),"detector"),bA=f(async()=>{const{diagram:e}=await Ot(async()=>{const{diagram:t}=await import("./DGCYvQDm.js");return{diagram:t}},__vite__mapDeps([48,11,15,17,18,2,4,5,23,27,22]),import.meta.url);return{id:Ey,diagram:e}},"loader"),vA={id:Ey,detector:xA,loader:bA},ku=!1,ho=f(()=>{ku||(ku=!0,ss("error",OL,e=>e.toLowerCase().trim()==="error"),ss("---",{db:{clear:f(()=>{},"clear")},styles:{},renderer:{draw:f(()=>{},"draw")},parser:{parse:f(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:f(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),jo(zL,XL,yA),jo(SM,JL,_L,yL,OM,VM,GM,KM,cL,dL,FM,AM,VL,zM,AL,SL,FL,eL,iA,sA,nL,dA,cA,vA))},"addDiagrams"),_A=f(async()=>{I.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(hi).map(async([r,{detector:i,loader:a}])=>{if(a)try{Yo(r)}catch{try{const{diagram:n,id:o}=await a();ss(o,n,i)}catch(n){throw I.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete hi[r],n}}}))).filter(r=>r.status==="rejected");if(t.length>0){I.error(`Failed to load ${t.length} external diagrams`);for(const r of t)I.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),wA="graphics-document document";function $y(e,t){e.attr("role",wA),t!==""&&e.attr("aria-roledescription",t)}f($y,"setA11yDiagramInfo");function Fy(e,t,r,i){if(e.insert!==void 0){if(r){const a=`chart-desc-${i}`;e.attr("aria-describedby",a),e.insert("desc",":first-child").attr("id",a).text(r)}if(t){const a=`chart-title-${i}`;e.attr("aria-labelledby",a),e.insert("title",":first-child").attr("id",a).text(t)}}}f(Fy,"addSVGa11yTitleDescription");var ci,Dl=(ci=class{constructor(t,r,i,a,n){this.type=t,this.text=r,this.db=i,this.parser=a,this.renderer=n}static async fromText(t,r={}){var c,h;const i=$e(),a=Nl(t,i);t=bk(t)+`
`;try{Yo(a)}catch{const u=Y0(a);if(!u)throw new Iu(`Diagram ${a} not found.`);const{id:d,diagram:p}=await u();ss(d,p)}const{db:n,parser:o,renderer:s,init:l}=Yo(a);return o.parser&&(o.parser.yy=n),(c=n.clear)==null||c.call(n),l==null||l(i),r.title&&((h=n.setDiagramTitle)==null||h.call(n,r.title)),await o.parse(t),new ci(a,t,n,o,s)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},f(ci,"Diagram"),ci),Su=[],CA=f(()=>{Su.forEach(e=>{e()}),Su=[]},"attachFunctions"),kA=f(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function Py(e){const t=e.match(Ou);if(!t)return{text:e,metadata:{}};let r=Vb(t[1],{schema:Hb})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const i={};return r.displayMode&&(i.displayMode=r.displayMode.toString()),r.title&&(i.title=r.title.toString()),r.config&&(i.config=r.config),{text:e.slice(t[0].length),metadata:i}}f(Py,"extractFrontMatter");var SA=f(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,i)=>"<"+r+i.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),TA=f(e=>{const{text:t,metadata:r}=Py(e),{displayMode:i,title:a,config:n={}}=r;return i&&(n.gantt||(n.gantt={}),n.gantt.displayMode=i),{title:a,config:n,text:t}},"processFrontmatter"),MA=f(e=>{const t=nr.detectInit(e)??{},r=nr.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:i})=>i==="wrap"):(r==null?void 0:r.type)==="wrap"&&(t.wrap=!0),{text:sk(e),directive:t}},"processDirectives");function Oc(e){const t=SA(e),r=TA(t),i=MA(r.text),a=vc(r.config,i.directive);return e=kA(i.text),{code:e,title:r.title,config:a}}f(Oc,"preprocessDiagram");function Ry(e){const t=new TextEncoder().encode(e),r=Array.from(t,i=>String.fromCodePoint(i)).join("");return btoa(r)}f(Ry,"toBase64");var LA=5e4,AA="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",BA="sandbox",EA="loose",$A="http://www.w3.org/2000/svg",FA="http://www.w3.org/1999/xlink",PA="http://www.w3.org/1999/xhtml",RA="100%",DA="100%",OA="border:0;margin:0;",IA="margin:0",NA="allow-top-navigation-by-user-activation allow-popups",qA='The "iframe" tag is not supported by your browser.',zA=["foreignobject"],WA=["dominant-baseline"];function Ic(e){const t=Oc(e);return as(),cx(t.config??{}),t}f(Ic,"processAndSetConfigs");async function Dy(e,t){ho();try{const{code:r,config:i}=Ic(e);return{diagramType:(await Iy(r)).type,config:i}}catch(r){if(t!=null&&t.suppressErrors)return!1;throw r}}f(Dy,"parse");var Tu=f((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),jA=f((e,t=new Map)=>{var i;let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const s=e.htmlLabels??((i=e.flowchart)==null?void 0:i.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(l=>{Cu(l.styles)||s.forEach(c=>{r+=Tu(l.id,c,l.styles)}),Cu(l.textStyles)||(r+=Tu(l.id,"tspan",((l==null?void 0:l.textStyles)||[]).map(c=>c.replace("color","fill"))))})}return r},"createCssStyles"),HA=f((e,t,r,i)=>{const a=jA(e,r),n=Mx(t,a,e.themeVariables);return El(nM(`${i}{${n}}`),oM)},"createUserStyles"),VA=f((e="",t,r)=>{let i=e;return!r&&!t&&(i=i.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),i=vi(i),i=i.replace(/<br>/g,"<br/>"),i},"cleanUpSvgCode"),UA=f((e="",t)=>{var a,n;const r=(n=(a=t==null?void 0:t.viewBox)==null?void 0:a.baseVal)!=null&&n.height?t.viewBox.baseVal.height+"px":DA,i=Ry(`<body style="${IA}">${e}</body>`);return`<iframe style="width:${RA};height:${r};${OA}" src="data:text/html;charset=UTF-8;base64,${i}" sandbox="${NA}">
  ${qA}
</iframe>`},"putIntoIFrame"),Mu=f((e,t,r,i,a)=>{const n=e.append("div");n.attr("id",r),i&&n.attr("style",i);const o=n.append("svg").attr("id",t).attr("width","100%").attr("xmlns",$A);return a&&o.attr("xmlns:xlink",a),o.append("g"),e},"appendDivSvgG");function Ol(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}f(Ol,"sandboxedIframe");var YA=f((e,t,r,i)=>{var a,n,o;(a=e.getElementById(t))==null||a.remove(),(n=e.getElementById(r))==null||n.remove(),(o=e.getElementById(i))==null||o.remove()},"removeExistingElements"),GA=f(async function(e,t,r){var Y,z,B,E,A,R;ho();const i=Ic(t);t=i.code;const a=$e();I.debug(a),t.length>((a==null?void 0:a.maxTextSize)??LA)&&(t=AA);const n="#"+e,o="i"+e,s="#"+o,l="d"+e,c="#"+l,h=f(()=>{const K=Mt(d?s:c).node();K&&"remove"in K&&K.remove()},"removeTempElements");let u=Mt("body");const d=a.securityLevel===BA,p=a.securityLevel===EA,g=a.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),d){const $=Ol(Mt(r),o);u=Mt($.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=Mt(r);Mu(u,e,l,`font-family: ${g}`,FA)}else{if(YA(document,e,l,o),d){const $=Ol(Mt("body"),o);u=Mt($.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=Mt("body");Mu(u,e,l)}let m,y;try{m=await Dl.fromText(t,{title:i.title})}catch($){if(a.suppressErrorRendering)throw h(),$;m=await Dl.fromText("error"),y=$}const x=u.select(c).node(),b=m.type,_=x.firstChild,T=_.firstChild,S=(z=(Y=m.renderer).getClasses)==null?void 0:z.call(Y,t,m),v=HA(a,b,S,n),M=document.createElement("style");M.innerHTML=v,_.insertBefore(M,T);try{await m.renderer.draw(t,e,gu.version,m)}catch($){throw a.suppressErrorRendering?h():RL.draw(t,e,gu.version),$}const N=u.select(`${c} svg`),V=(E=(B=m.db).getAccTitle)==null?void 0:E.call(B),q=(R=(A=m.db).getAccDescription)==null?void 0:R.call(A);Ny(b,N,V,q),u.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",PA);let F=u.select(c).node().innerHTML;if(I.debug("config.arrowMarkerAbsolute",a.arrowMarkerAbsolute),F=VA(F,d,le(a.arrowMarkerAbsolute)),d){const $=u.select(c+" svg").node();F=UA(F,$)}else p||(F=Zi.sanitize(F,{ADD_TAGS:zA,ADD_ATTR:WA,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(CA(),y)throw y;return h(),{diagramType:b,svg:F,bindFunctions:m.db.bindFunctions}},"render");function Oy(e={}){var i;const t=pe({},e);t!=null&&t.fontFamily&&!((i=t.themeVariables)!=null&&i.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),ox(t),t!=null&&t.theme&&t.theme in wr?t.themeVariables=wr[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=wr.default.getThemeVariables(t.themeVariables));const r=typeof t=="object"?sx(t):Hu();Il(r.logLevel),ho()}f(Oy,"initialize");var Iy=f((e,t={})=>{const{code:r}=Oc(e);return Dl.fromText(r,t)},"getDiagramFromText");function Ny(e,t,r,i){$y(t,e),Fy(t,r,i,t.attr("id"))}f(Ny,"addA11yInfo");var mi=Object.freeze({render:GA,parse:Dy,getDiagramFromText:Iy,initialize:Oy,getConfig:$e,setConfig:Vu,getSiteConfig:Hu,updateSiteConfig:lx,reset:f(()=>{as()},"reset"),globalReset:f(()=>{as(Ki)},"globalReset"),defaultConfig:Ki});Il($e().logLevel);as($e());var XA=f((e,t,r)=>{I.warn(e),bc(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),qy=f(async function(e={querySelector:".mermaid"}){try{await ZA(e)}catch(t){if(bc(t)&&I.error(t.str),Ie.parseError&&Ie.parseError(t),!e.suppressErrors)throw I.error("Use the suppressErrors option to suppress these errors"),t}},"run"),ZA=f(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const i=mi.getConfig();I.debug(`${e?"":"No "}Callback function found`);let a;if(r)a=r;else if(t)a=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");I.debug(`Found ${a.length} diagrams`),(i==null?void 0:i.startOnLoad)!==void 0&&(I.debug("Start On Load: "+(i==null?void 0:i.startOnLoad)),mi.updateSiteConfig({startOnLoad:i==null?void 0:i.startOnLoad}));const n=new nr.InitIDGenerator(i.deterministicIds,i.deterministicIDSeed);let o;const s=[];for(const l of Array.from(a)){if(I.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${n.next()}`;o=l.innerHTML,o=pg(nr.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=nr.detectInit(o);h&&I.debug("Detected early reinit: ",h);try{const{svg:u,bindFunctions:d}=await Hy(c,o,l);l.innerHTML=u,e&&await e(c),d&&d(l)}catch(u){XA(u,s,Ie.parseError)}}if(s.length>0)throw s[0]},"runThrowsErrors"),zy=f(function(e){mi.initialize(e)},"initialize"),KA=f(async function(e,t,r){I.warn("mermaid.init is deprecated. Please use run instead."),e&&zy(e);const i={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?i.querySelector=t:t&&(t instanceof HTMLElement?i.nodes=[t]:i.nodes=t),await qy(i)},"init"),QA=f(async(e,{lazyLoad:t=!0}={})=>{ho(),jo(...e),t===!1&&await _A()},"registerExternalDiagrams"),Wy=f(function(){if(Ie.startOnLoad){const{startOnLoad:e}=mi.getConfig();e&&Ie.run().catch(t=>I.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",Wy,!1);var JA=f(function(e){Ie.parseError=e},"setParseErrorHandler"),Os=[],No=!1,jy=f(async()=>{if(!No){for(No=!0;Os.length>0;){const e=Os.shift();if(e)try{await e()}catch(t){I.error("Error executing queue",t)}}No=!1}},"executeQueue"),tB=f(async(e,t)=>new Promise((r,i)=>{const a=f(()=>new Promise((n,o)=>{mi.parse(e,t).then(s=>{n(s),r(s)},s=>{var l;I.error("Error parsing",s),(l=Ie.parseError)==null||l.call(Ie,s),o(s),i(s)})}),"performCall");Os.push(a),jy().catch(i)}),"parse"),Hy=f((e,t,r)=>new Promise((i,a)=>{const n=f(()=>new Promise((o,s)=>{mi.render(e,t,r).then(l=>{o(l),i(l)},l=>{var c;I.error("Error parsing",l),(c=Ie.parseError)==null||c.call(Ie,l),s(l),a(l)})}),"performCall");Os.push(n),jy().catch(a)}),"render"),eB=f(()=>Object.keys(hi).map(e=>({id:e})),"getRegisteredDiagramsMetadata"),Ie={startOnLoad:!0,mermaidAPI:mi,parse:tB,render:Hy,init:KA,run:qy,registerExternalDiagrams:QA,registerLayoutLoaders:Km,initialize:zy,parseError:void 0,contentLoaded:Wy,setParseErrorHandler:JA,detectType:Nl,registerIconPacks:CS,getRegisteredDiagramsMetadata:eB},Lu=Ie;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */var rB=At('<meta name="description" content="Interactive tool to design and analyze custom voting methods. Mix and match ballot types, tabulation methods, and multi-winner options to create your ideal voting system."/>'),iB=At('<button><div class="option-name svelte-1jxrepv"> </div> <div class="option-description svelte-1jxrepv"> </div></button>'),aB=At('<div class="sub-options svelte-1jxrepv"><label class="svelte-1jxrepv">Score Range: <input type="number" min="-10" max="0" style="width: 60px;" class="svelte-1jxrepv"/> to <input type="number" min="1" max="10" style="width: 60px;" class="svelte-1jxrepv"/></label> <label class="svelte-1jxrepv"><input type="checkbox"/> Allow negative scores</label></div>'),nB=At('<button><div class="option-name svelte-1jxrepv"> </div> <div class="option-description svelte-1jxrepv"> </div></button>'),sB=At('<div class="sub-options svelte-1jxrepv"><label class="svelte-1jxrepv">Custom maximum: <input type="number" min="1" max="20" style="width: 80px;" class="svelte-1jxrepv"/> </label></div>'),oB=At('<section class="config-section svelte-1jxrepv"><h2 class="svelte-1jxrepv"> Choice Limitations</h2> <p class="section-description svelte-1jxrepv">How many candidates can voters select?</p> <div class="option-grid svelte-1jxrepv"></div> <!></section>'),lB=At('<button><div class="option-name svelte-1jxrepv"> </div> <div class="option-description svelte-1jxrepv"> </div></button>'),cB=At('<button><div class="option-name svelte-1jxrepv"> </div> <div class="option-description svelte-1jxrepv"> </div></button>'),hB=At('<section class="config-section svelte-1jxrepv"><h2 class="svelte-1jxrepv"> Tabulation Method</h2> <p class="section-description svelte-1jxrepv">How are votes counted to determine winners?</p> <div class="option-grid svelte-1jxrepv"></div></section>'),uB=At('<button><div class="option-name svelte-1jxrepv"> </div> <div class="option-description svelte-1jxrepv"> </div></button>'),pB=At('<div class="slider-section svelte-1jxrepv"><label class="svelte-1jxrepv">Single-winner seats: <strong> </strong> <input type="range" min="0" max="100" step="5" class="proportion-slider svelte-1jxrepv"/> <div class="slider-labels svelte-1jxrepv"><span>All List (0%)</span> <span>Mixed (50%)</span> <span>All Districts (100%)</span></div></label></div>'),dB=At('<div class="sub-options svelte-1jxrepv"><div class="toggle-section svelte-1jxrepv"><label class="toggle-label svelte-1jxrepv"><input type="checkbox" class="svelte-1jxrepv"/> <span class="toggle-text svelte-1jxrepv">Enable mixed member system</span></label></div> <!></div>'),fB=At('<section class="config-section svelte-1jxrepv"><h2 class="svelte-1jxrepv"> Party-Based Method Options</h2> <div class="sub-options svelte-1jxrepv"><p><strong>List Type:</strong></p> <div class="option-grid svelte-1jxrepv"></div></div> <!></section>'),gB=At('<span class="proportional-badge svelte-1jxrepv" title="This is a proportional representation method that ensures fair party/group representation"></span>'),mB=At('<span class="proportional-badge svelte-1jxrepv" title="This is a semi-proportional method that provides some fairness but not full proportional representation"></span>'),yB=At(`<div class="info-panel svelte-1jxrepv">How well the election results reflect the proportion of support for different
                    groups or parties - higher scores mean seats are allocated more fairly based on
                    vote share</div>`),xB=At(`<div class="info-panel svelte-1jxrepv">How easy it is for voters to understand and use the voting method - considers
                    ballot complexity, cognitive load, and learning curve</div>`),bB=At(`<div class="info-panel svelte-1jxrepv">How well the method resists dishonest strategies where you support a
                    less-preferred candidate more than a preferred one - higher scores mean less
                    incentive for tactical voting</div>`),vB=At(`<div class="info-panel svelte-1jxrepv">How well the elected candidates actually represent the preferences and will of
                    the electorate - considers broad support, minority representation, and whether
                    outcomes reflect voter intent</div>`),_B=At(`<div class="info-panel svelte-1jxrepv">How easy it is to vote your true preferences without needing to consider
                    strategy or candidate viability - higher scores mean less mental burden on
                    voters</div>`),wB=At('<div class="method-scores svelte-1jxrepv"><h3 class="svelte-1jxrepv">System Analysis</h3> <div class="score-grid svelte-1jxrepv"><div class="score-item svelte-1jxrepv"><div class="score-bar-container svelte-1jxrepv"><div class="score-label-container svelte-1jxrepv"><span class="score-label clickable svelte-1jxrepv" role="button" tabindex="0">Proportionality</span></div> <div class="score-bar svelte-1jxrepv"><div class="score-fill svelte-1jxrepv"></div> <span class="score-value svelte-1jxrepv"> </span></div></div> <!></div> <div class="score-item svelte-1jxrepv"><div class="score-bar-container svelte-1jxrepv"><div class="score-label-container svelte-1jxrepv"><span class="score-label clickable svelte-1jxrepv" role="button" tabindex="0">Voter Simplicity</span></div> <div class="score-bar svelte-1jxrepv"><div class="score-fill svelte-1jxrepv"></div> <span class="score-value svelte-1jxrepv"> </span></div></div> <!></div> <div class="score-item svelte-1jxrepv"><div class="score-bar-container svelte-1jxrepv"><div class="score-label-container svelte-1jxrepv"><span class="score-label clickable svelte-1jxrepv" role="button" tabindex="0">Honest Strategy Resistance</span></div> <div class="score-bar svelte-1jxrepv"><div class="score-fill svelte-1jxrepv"></div> <span class="score-value svelte-1jxrepv"> </span></div></div> <!></div> <div class="score-item svelte-1jxrepv"><div class="score-bar-container svelte-1jxrepv"><div class="score-label-container svelte-1jxrepv"><span class="score-label clickable svelte-1jxrepv" role="button" tabindex="0">Representation Quality</span></div> <div class="score-bar svelte-1jxrepv"><div class="score-fill svelte-1jxrepv"></div> <span class="score-value svelte-1jxrepv"> </span></div></div> <!></div> <div class="score-item svelte-1jxrepv"><div class="score-bar-container svelte-1jxrepv"><div class="score-label-container svelte-1jxrepv"><span class="score-label clickable svelte-1jxrepv" role="button" tabindex="0">Strategic Straightforwardness</span></div> <div class="score-bar svelte-1jxrepv"><div class="score-fill svelte-1jxrepv"></div> <span class="score-value svelte-1jxrepv"> </span></div></div> <!></div></div></div>'),CB=At('<div class="method-summary svelte-1jxrepv"><!></div>'),kB=At('<div class="method-critique svelte-1jxrepv"><h3 class="svelte-1jxrepv">Detailed Analysis</h3> <!></div>'),SB=At('<div class="method-flowchart svelte-1jxrepv"><h3 class="svelte-1jxrepv">Tabulation Process</h3> <div class="flowchart-container svelte-1jxrepv"></div></div>'),TB=At('<div class="comparison-suggestion svelte-1jxrepv"><button class="compare-button svelte-1jxrepv"> </button> <p class="suggestion-description svelte-1jxrepv"> </p></div>'),MB=At('<div class="comparison-suggestions svelte-1jxrepv"><h3 class="svelte-1jxrepv"> Confused about similar methods?</h3> <!></div>'),LB=At('<!> <div class="method-actions svelte-1jxrepv"><a class="action-link svelte-1jxrepv">Learn about voting systems</a> <a href="https://github.com/fsargent/approval-vote/issues" target="_blank" rel="noopener noreferrer" class="action-link github-link svelte-1jxrepv">Found something wrong? File an issue on GitHub</a></div>',1),AB=At('<span class="current-badge svelte-1jxrepv">Current</span>'),BB=At('<div class="compatibility-compact svelte-1jxrepv"><span class="compatibility-label svelte-1jxrepv">Voting Machines:</span> <span> </span></div>'),EB=At('<button class="switch-method-button svelte-1jxrepv">Switch to this method</button>'),$B=At('<div><div class="card-header svelte-1jxrepv"><h3 class="svelte-1jxrepv"> </h3> <!></div> <div class="method-summary-compact svelte-1jxrepv"><p class="svelte-1jxrepv"><strong>What it does:</strong> </p></div> <div class="score-comparison svelte-1jxrepv"><div class="score-row svelte-1jxrepv"><span class="score-name svelte-1jxrepv">Proportionality</span> <div class="score-bar-small svelte-1jxrepv"><div class="score-fill-small svelte-1jxrepv"></div></div> <span class="score-num svelte-1jxrepv"> </span></div> <div class="score-row svelte-1jxrepv"><span class="score-name svelte-1jxrepv">Simplicity</span> <div class="score-bar-small svelte-1jxrepv"><div class="score-fill-small svelte-1jxrepv"></div></div> <span class="score-num svelte-1jxrepv"> </span></div> <div class="score-row svelte-1jxrepv"><span class="score-name svelte-1jxrepv">Honest Strategy</span> <div class="score-bar-small svelte-1jxrepv"><div class="score-fill-small svelte-1jxrepv"></div></div> <span class="score-num svelte-1jxrepv"> </span></div> <div class="score-row svelte-1jxrepv"><span class="score-name svelte-1jxrepv">Straightforward</span> <div class="score-bar-small svelte-1jxrepv"><div class="score-fill-small svelte-1jxrepv"></div></div> <span class="score-num svelte-1jxrepv"> </span></div> <div class="score-row svelte-1jxrepv"><span class="score-name svelte-1jxrepv">Representation</span> <div class="score-bar-small svelte-1jxrepv"><div class="score-fill-small svelte-1jxrepv"></div></div> <span class="score-num svelte-1jxrepv"> </span></div></div> <div class="method-details svelte-1jxrepv"><p class="svelte-1jxrepv"><strong>Key Trade-offs:</strong> </p></div> <!> <!></div>'),FB=At('<div class="comparison-overlay svelte-1jxrepv" role="button" tabindex="0"><div class="comparison-modal svelte-1jxrepv" role="dialog" tabindex="-1" aria-labelledby="comparison-title"><div class="comparison-header svelte-1jxrepv"><h2 id="comparison-title" class="svelte-1jxrepv">Method Comparison</h2> <button class="close-button svelte-1jxrepv"></button></div> <div class="comparison-content svelte-1jxrepv"><div class="comparison-grid svelte-1jxrepv"></div></div></div></div>'),PB=At('<div class="container wide-builder"><div class="description"><h1 style="color: black;"><a>approval.vote</a> // <strong>Voting Method Builder</strong></h1> <p class="subtitle svelte-1jxrepv">Mix and match components to design your ideal voting system</p></div> <div class="builder-layout svelte-1jxrepv"><div class="config-panel"><section class="config-section svelte-1jxrepv"><h2 class="svelte-1jxrepv"> Ballot Type</h2> <p class="section-description svelte-1jxrepv">How do voters express their preferences?</p> <div class="option-grid svelte-1jxrepv"></div> <!></section> <!> <section class="config-section svelte-1jxrepv"><h2 class="svelte-1jxrepv"> Election Type</h2> <p class="section-description svelte-1jxrepv">Are you electing one person or multiple people?</p> <div class="option-grid svelte-1jxrepv"></div></section> <!> <!></div> <div class="results-panel svelte-1jxrepv"><div class="result-card svelte-1jxrepv"><h2 class="method-name svelte-1jxrepv"> <!></h2> <!> <!> <!> <!> <!></div></div></div></div> <!>',1);function SE(e,t){n0(t,!1);const r=ne(),i=ne(),a=ne(),n=ne(),o=ne(),s=ne(),l=ne(),c=ne(),h=ne(),u=ne(),d=ne();let p=ne({ballotType:"choose-x",limitedChoices:"1",customLimit:3,tabulationMethod:"fptp",numberOfSeats:1,hasParties:!0,canVoteForParties:!0,canVoteForCandidates:!0,hasPrimaries:!1,listType:"closed",mixedMember:!1,singleWinnerProportion:50,allowNegativeVotes:!1,scoreMin:0,scoreMax:5});const g=[{id:"all",name:"Show All",description:"Show both single winner and multi winner elections"},{id:"single",name:"Single Winner",description:"Choose one person for a role (President, Mayor, etc.)"},{id:"multi",name:"Multi Winner",description:"Choose multiple people for a body (Council, Parliament, etc.) or for Top X Primaries"}];let m=ne("all");function y(C){return C===1?"single":"multi"}const x=[{id:"choose-x",name:"Choose X",description:"Pick candidates"},{id:"ranking",name:"Ranked",description:"Rank candidates in order of preference"},{id:"score",name:"Score",description:"Give each candidate a numerical score"}],b=[{id:"1",name:"Pick 1",description:"Must select exactly 1 (FPTP)"},{id:"custom",name:"Custom limit",description:"Set your own maximum"},{id:"unlimited",name:"As many as you like",description:"No limit on selections (approval voting)"}],_={fptp:{name:"First Past The Post",shortDescription:"Most votes wins",detailedCritique:'First Past The Post (FPTP) is the most widely used voting system globally, where voters select one candidate and the candidate with the most votes wins. While its simplicity makes it easy to understand and implement, FPTP suffers from severe limitations that can undermine democratic representation. The system is highly susceptible to vote splitting, where similar candidates divide their shared voter base, potentially allowing a less popular candidate to win. This creates the spoiler effect, forcing voters to strategically vote for a "lesser evil" rather than their true preference. FPTP tends to produce two-party dominance over time, as voters abandon third parties to avoid wasting their votes. In multi-candidate races, winners can have surprisingly low vote shares - sometimes under 30% - meaning the majority of voters preferred someone else. The system also leads to gerrymandering concerns and can produce highly disproportionate results when used for legislative elections.',ballotType:"choose-x",choiceLimitation:"1",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:5,honestStrategyResistance:0,strategicStraightforwardness:0,representation:1},isProportional:!1,isSemiProportional:!1,category:"plurality",ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences."},tabulationCritique:"**FPTP:** Simple but suffers from vote splitting and spoiler effects with multiple candidates.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["simple","plurality","majoritarian","single-mark"]},approval:{name:"Approval Voting",shortDescription:"Approve any number of candidates",detailedCritique:"Approval Voting represents a minimal yet powerful reform to plurality voting, allowing voters to select as many candidates as they approve of, with the candidate receiving the most approvals winning. This elegantly simple change eliminates the spoiler effect entirely - voters can support both their favorite candidate and a more viable alternative without harming either. The system encourages honest voting since supporting additional candidates never hurts those you've already selected. Studies and real-world implementations show Approval Voting tends to elect broadly acceptable consensus candidates rather than polarizing figures. It requires no new voting equipment, as it uses the same ballots as plurality voting. The main limitation is the lack of preference expression - you cannot indicate that you prefer one approved candidate over another. However, this simplicity is also a strength, making the system transparent and easy to understand. Approval Voting has been successfully used by the UN, various professional societies, and the cities of Fargo and St. Louis.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:5,honestStrategyResistance:5,strategicStraightforwardness:1,representation:4},isProportional:!1,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**Most Approvals:** Simple and intuitive, encourages honest voting without strategic downsides.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["simple","consensus","binary-choice","spoiler-free"]},"limited-voting-single":{name:"Limited Voting (Single Winner)",shortDescription:"Pick up to X candidates, most votes wins",detailedCritique:"Voters can select up to a specified number of candidates (less than total candidates). The candidate with the most votes wins. Reduces vote splitting compared to FPTP.",ballotType:"choose-x",choiceLimitation:"custom",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:4,honestStrategyResistance:2,strategicStraightforwardness:2,representation:3},isProportional:!1,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-custom":"**Strengths:** Reduces vote splitting compared to FPTP, allows some preference expression. **Weaknesses:** Arbitrary limit may not reflect true preferences, still susceptible to strategic voting."},tabulationCritique:"**Limited Voting (Single Winner):** Allows voters to select multiple candidates but only elects one winner. Can reduce vote splitting when limit is greater than 1.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},irv:{name:"IRV (Instant Runoff)",shortDescription:"Eliminate lowest, transfer votes",detailedCritique:`Instant Runoff Voting (IRV), also called Ranked Choice Voting in single-winner contexts, allows voters to rank candidates in order of preference. If no candidate receives a majority of first-choice votes, the candidate with the fewest votes is eliminated and their voters' ballots are transferred to their next choice. This process continues until someone has a majority. While IRV does eliminate the most basic spoiler effects between similar candidates, it suffers from several paradoxes that can produce counterintuitive results. The system can eliminate centrist candidates who would beat any other candidate head-to-head (the "center squeeze" problem), and in some cases, getting more first-choice votes can actually cause a candidate to lose (non-monotonicity). IRV is also vulnerable to strategic voting - "bullet voting" (only ranking one candidate) can sometimes help your favorite candidate. The sequential elimination process makes results difficult to predict and can take days to tabulate in close races. Despite these flaws, IRV does ensure majority support (among remaining candidates) and allows voters to express preferences.`,ballotType:"ranking",choiceLimitation:"any",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!1,description:"Requires new voting machines and ballot software"},scores:{proportionality:0,simplicity:1,honestStrategyResistance:3,strategicStraightforwardness:4,representation:4},isProportional:!1,isSemiProportional:!1,category:"ranked",ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**IRV:** Good at eliminating spoiler effects but can eliminate Condorcet winners and has center-squeeze problems.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",flowchart:`flowchart TD
    A["Start: Count first-choice votes"] --> B{"Any candidate has<br/>majority (>50%)?"}
    B -->|Yes| C["Winner: Candidate with majority"]
    B -->|No| D["Identify candidate with<br/>fewest first-choice votes"]
    D --> E["Eliminate candidate<br/>with fewest votes"]
    E --> F["Transfer votes to voters'<br/>next ranked choice"]
    F --> G["Recount all remaining votes"]
    G --> H{"Any candidate has<br/>majority (>50%)?"}
    H -->|Yes| I["Winner: Candidate with majority"]
    H -->|No| J{"Only 2 candidates<br/>remain?"}
    J -->|Yes| K["Winner: Candidate with<br/>more votes"]
    J -->|No| D

    style A fill:#e1f5fe
    style C fill:#c8e6c9
    style I fill:#c8e6c9
    style K fill:#c8e6c9`,tags:["ranked","runoff","instant-runoff","elimination","transfers"]},borda:{name:"Borda Count",shortDescription:"Points based on ranking position",detailedCritique:"Rewards broadly acceptable candidates but highly vulnerable to strategic manipulation and compromise.",ballotType:"ranking",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:1,honestStrategyResistance:0,strategicStraightforwardness:0,representation:3},isProportional:!1,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires new voting machines and ballot software"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**Borda:** Rewards broadly acceptable candidates but highly vulnerable to strategic nomination.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["ranked","positional","compromise","strategic-vulnerable","summable"]},condorcet:{name:"Condorcet",shortDescription:"Head-to-head winner if exists",detailedCritique:"Theoretically optimal but can have no winner (Condorcet paradox) requiring complex tie-breaking.",ballotType:"ranking",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:1,honestStrategyResistance:5,strategicStraightforwardness:5,representation:4},isProportional:!1,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires new voting machines and ballot software"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**Condorcet:** Elects the candidate who beats all others head-to-head, but may have no winner in some cases.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["ranked","condorcet-compliant","pairwise","head-to-head","complex"]},"highest-total":{name:"Highest Total Score",shortDescription:"Sum all scores, highest wins",detailedCritique:"Adds up all scores for each candidate - the candidate with the highest sum wins. Simple. Works best with many candidates and relatively few voters where expressivity helps prevent ties.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!1,description:"Requires new voting machines and ballot software"},scores:{proportionality:0,simplicity:4,honestStrategyResistance:2,strategicStraightforwardness:2,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Normalization issues between voters. When Min/Maxed then becomes approval voting","choose-x-custom":"**Strengths:** Reduces vote splitting compared to FPTP, allows some preference expression. **Weaknesses:** Arbitrary limit may not reflect true preferences."},tabulationCritique:"**Highest Total:** Adds up all scores for each candidate - the candidate with the highest sum wins. Simple. Works best with many candidates and relatively few voters where expressivity helps prevent ties.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["score","cardinal","expressive","simple","summable"]},star:{name:"STAR Voting",shortDescription:"Score then automatic runoff",detailedCritique:"Combines benefits of score voting with runoff security, eliminating strategic concerns. The scoring phase works best with many candidates and relatively few voters, while the runoff provides decisive results.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!1,description:"Requires new voting machines and ballot software"},scores:{proportionality:0,simplicity:4,honestStrategyResistance:3,strategicStraightforwardness:4,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**STAR:** Combines benefits of score voting with runoff security, eliminating strategic concerns. The scoring phase works best with many candidates and relatively few voters, while the runoff provides decisive results.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["score","cardinal","hybrid","runoff","two-phase","consensus","spoiler-resistant"]},"block-voting":{name:"Block Voting",shortDescription:"Choose one, top candidates win multiple seats",detailedCritique:'Also called "Plurality-at-large". Voters choose one candidate, and the candidates with the most votes win seats. Simple but tends to give all seats to the most popular party or faction.',ballotType:"choose-x",choiceLimitation:"1",minSeats:2,maxSeats:"unlimited",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:5,honestStrategyResistance:0,strategicStraightforwardness:0,representation:1},isProportional:!1,isSemiProportional:!1,category:"plurality",ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences."},tabulationCritique:"**Block Voting:** Simple plurality system for multiple seats. Tends to give all seats to the most popular party - very poor minority representation.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["simple","majoritarian","plurality","single-mark","bloc-voting","sweep-prone"]},"block-approval":{name:"Block Approval Voting",shortDescription:"Approve any number, top candidates win multiple seats",detailedCritique:"Simple extension of approval to multiple winners but provides no proportional representation.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:2,maxSeats:"unlimited",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:5,honestStrategyResistance:5,strategicStraightforwardness:1,representation:2},isProportional:!1,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**Block Approval:** Simple extension of approval voting to multiple seats. Better minority representation than Block Voting.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},"limited-voting":{name:"Limited Voting",shortDescription:"Voters pick fewer candidates than seats available",detailedCritique:'Also called "Block Voting with limitations." Voters can select up to a specific number of candidates (less than the total seats). Candidates with the most votes win. Provides some minority representation but not fully proportional.',ballotType:"choose-x",choiceLimitation:"custom",minSeats:2,maxSeats:"unlimited",scores:{proportionality:0,simplicity:4,honestStrategyResistance:1,strategicStraightforwardness:2,representation:3},isProportional:!1,isSemiProportional:!0,category:"approval",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},ballotTypeCritique:{"choose-x-custom":"**Strengths:** Reduces vote splitting compared to FPTP, allows some preference expression. **Weaknesses:** Arbitrary limit may not reflect true preferences, still susceptible to strategic voting."},tabulationCritique:"**Limited Voting:** Provides some minority representation but not fully proportional. Strategic nomination is important.",proportionalityDetails:"**Semi-Proportional:** Provides some minority representation but not full proportional representation."},"cumulative-voting":{name:"Cumulative Voting",shortDescription:"Voters get points equal to seats and distribute them freely",detailedCritique:"Voters receive a number of points equal to the number of seats and can distribute them among candidates however they choose, including giving multiple points to the same candidate. Semi-proportional system that allows minority representation.",ballotType:"choose-x",choiceLimitation:"custom",minSeats:2,maxSeats:"unlimited",scores:{proportionality:0,simplicity:3,honestStrategyResistance:1,strategicStraightforwardness:2,representation:3},isProportional:!1,isSemiProportional:!0,category:"approval",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},ballotTypeCritique:{"choose-x-custom":"**Strengths:** Reduces vote splitting compared to FPTP, allows some preference expression. **Weaknesses:** Arbitrary limit may not reflect true preferences, still susceptible to strategic voting."},tabulationCritique:"**Cumulative Voting:** Allows voters to distribute points strategically. Semi-proportional system that can provide minority representation with proper strategy.",proportionalityDetails:"**Semi-Proportional:** Provides some minority representation but not full proportional representation."},sntv:{name:"SNTV (Single Non-Transferable Vote)",shortDescription:"Semi-proportional for choose-one ballots",detailedCritique:"Semi-proportional method for choose-one ballots. Requires strategic nomination by parties to achieve proportionality - too many candidates splits the vote, too few wastes votes.",ballotType:"choose-x",choiceLimitation:"1",minSeats:2,maxSeats:"unlimited",scores:{proportionality:3,simplicity:5,honestStrategyResistance:2,strategicStraightforwardness:2,representation:3},isProportional:!1,isSemiProportional:!0,category:"approval",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences."},tabulationCritique:"**SNTV:** Semi-proportional method for choose-one ballots. Requires strategic nomination by parties to achieve proportionality - too many candidates splits the vote, too few wastes votes.",proportionalityDetails:"**Semi-Proportional:** Provides some minority representation but not full proportional representation."},"satisfaction-approval":{name:"Satisfaction Approval",shortDescription:"Semi-proportional splits votes equally",detailedCritique:"Semi-proportional system that splits each vote equally between all approved candidates. More proportional than block voting but requires strategic coordination - voters must know how many seats their party deserves and vote for exactly that many candidates. Vulnerable to 'wipeout' if strategy fails.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:2,maxSeats:"unlimited",scores:{proportionality:3,simplicity:5,honestStrategyResistance:3,strategicStraightforwardness:3,representation:4},isProportional:!1,isSemiProportional:!0,category:"approval",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**Satisfaction Approval:** Semi-proportional system that splits each vote equally between all approved candidates. More proportional than block voting but requires strategic coordination - voters must know how many seats their party deserves and vote for exactly that many candidates. Vulnerable to 'wipeout' if strategy fails.",proportionalityDetails:"**Semi-Proportional:** Provides some minority representation but not full proportional representation."},spav:{name:"SPAV (Sequential Proportional Approval)",shortDescription:"Proportional approval using sequential selection",detailedCritique:"Sequential Proportional Approval Voting that encourages diverse representation. Much more practical to implement than the theoretical PAV optimization.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:4,honestStrategyResistance:3,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**SPAV:** Sequential Proportional Approval Voting that encourages diverse representation. Much more practical to implement than the theoretical PAV optimization.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},stv:{name:"STV (Single Transferable Vote)",shortDescription:"Proportional ranked choice voting",detailedCritique:"Provides proportional representation with ranked ballots, maintaining local representation while ensuring diversity.",ballotType:"ranking",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:1,honestStrategyResistance:3,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"ranked",ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**STV:** Provides proportional representation with ranked ballots, maintaining local representation while ensuring diversity.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability.",tags:["proportional","ranked","transfers","quota-based","complex","candidate-based","surplus-transfer"]},"cpo-stv":{name:"CPO-STV",shortDescription:"Condorcet-refined proportional ranked choice",detailedCritique:"Comparison of Pairs of Outcomes STV combines proportional representation with Condorcet-style optimality. More theoretically sound than traditional STV but significantly more complex to compute and explain.",ballotType:"ranking",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:1,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires specialized software for complex calculations"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**CPO-STV:** Uses Condorcet-style comparisons to find the optimal proportional outcome. More theoretically sound than standard STV but requires exponentially complex calculations.",proportionalityDetails:"**Proportional Representation:** Ensures optimal proportional outcomes by comparing all possible seat allocations, though at the cost of computational complexity."},"schulze-stv":{name:"Schulze STV",shortDescription:"Schulze method extended to proportional representation",detailedCritique:"Applies the Schulze method principles to multi-winner elections for proportional representation. Eliminates many strategic voting problems but is extremely complex to calculate and verify.",ballotType:"ranking",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:1,honestStrategyResistance:5,strategicStraightforwardness:4,representation:5},isProportional:!0,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires specialized software for very complex calculations"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**Schulze STV:** Extends the Schulze method to achieve proportional representation. Excellent theoretical properties but extremely complex implementation.",proportionalityDetails:"**Proportional Representation:** Provides optimal proportional representation using Schulze method principles, ensuring strong Condorcet-style criteria are met."},"meek-stv":{name:"Meek STV",shortDescription:"STV with iterative reweighting",detailedCritique:"Uses iterative reweighting instead of fractional vote transfers. More mathematically elegant than traditional STV and avoids some anomalies, but harder to verify by hand.",ballotType:"ranking",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:2,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires new software for iterative calculations"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**Meek STV:** Uses iterative reweighting instead of fractional transfers. More mathematically sound than traditional STV but requires computer calculation.",proportionalityDetails:"**Proportional Representation:** Achieves excellent proportional representation through continuous reweighting, avoiding some traditional STV anomalies."},"pr-borda":{name:"PR-Borda",shortDescription:"Proportional representation using Borda count",detailedCritique:"Allocates seats proportionally based on Borda count scores. Rewards consensus candidates and provides proportional representation, but highly vulnerable to strategic nomination and cloning.",ballotType:"ranking",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:4,simplicity:1,honestStrategyResistance:0,strategicStraightforwardness:0,representation:4},isProportional:!0,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires new software for Borda calculations and proportional allocation"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**PR-Borda:** Calculates Borda scores and allocates seats proportionally. Simple concept but extremely vulnerable to strategic nomination and candidate cloning.",proportionalityDetails:"**Proportional Representation:** Provides proportional representation based on Borda scores, rewarding broadly acceptable candidates across party lines."},"wright-stv":{name:"Wright STV",shortDescription:"STV variant with refined transfer rules",detailedCritique:"A variant of STV that uses different vote transfer mechanisms to reduce some strategic voting opportunities. More complex than traditional STV but with better theoretical properties.",ballotType:"ranking",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:1,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires specialized software for refined transfer calculations"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**Wright STV:** Uses refined transfer rules to improve upon traditional STV. Better theoretical properties but more complex implementation and verification.",proportionalityDetails:"**Proportional Representation:** Achieves proportional representation with improved transfer mechanisms that reduce some strategic voting opportunities."},"party-list-pr":{name:"Party List PR",shortDescription:"Proportional seats by party vote share",detailedCritique:"Pure proportional representation where voters choose parties, and seats are allocated based on each party's share of the vote. Ensures fair representation but can reduce individual candidate accountability. Used in many European countries like Netherlands, Israel, and Finland.",ballotType:"choose-x",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:4,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"mixed",hasVariants:!0,variants:{listType:!0},ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences.","choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**Party List PR:** Direct proportional representation where parties receive seats based on their vote share. Achieves excellent proportionality but may weaken the link between voters and individual representatives. Works best with diverse multi-party systems.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability.",listTypeCritique:{closed:"**Closed Lists:** Give parties full control over candidate selection and ordering, which can strengthen party discipline but reduce voter choice.",open:"**Open Lists:** Allow voters to choose specific candidates within parties, increasing voter choice but potentially fragmenting party unity.",flexible:"**Flexible Lists:** Balance party control with voter choice, allowing both party and candidate votes to influence outcomes."},primaryCritique:{withPrimaries:"**Primary Elections:** Increase voter choice and party democracy but can favor extreme candidates, reduce general election competitiveness, and increase campaign costs. May lead to more polarized candidates who appeal to party bases rather than general electorate.",withoutPrimaries:"**No Primaries:** Parties select candidates internally (conventions, appointments, etc.). This gives party leadership more control but may reduce grassroots democracy and voter input in candidate selection."}},mmp:{name:"MMP (Mixed Member Proportional)",shortDescription:"Combines districts with party lists",detailedCritique:'Hybrid system combining local districts with party lists. Voters cast two ballots: one for a local representative and one for a party. Additional "top-up" seats ensure overall proportionality while preserving local representation. Successfully used in Germany, New Zealand, and Scotland.',ballotType:"choose-x",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:3,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"mixed",hasVariants:!0,variants:{listType:!0,mixedMember:!0},ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences.","choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**MMP:** Combines the best of both worlds - local accountability through districts and fair representation through proportional top-up seats. More complex to implement but provides excellent balance between local representation and proportionality. May create two classes of representatives.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability.",listTypeCritique:{closed:"**Closed Lists:** Give parties full control over candidate selection and ordering, which can strengthen party discipline but reduce voter choice.",open:"**Open Lists:** Allow voters to choose specific candidates within parties, increasing voter choice but potentially fragmenting party unity.",flexible:"**Flexible Lists:** Balance party control with voter choice, allowing both party and candidate votes to influence outcomes."},primaryCritique:{withPrimaries:"**Primary Elections:** Increase voter choice and party democracy but can favor extreme candidates, reduce general election competitiveness, and increase campaign costs. May lead to more polarized candidates who appeal to party bases rather than general electorate.",withoutPrimaries:"**No Primaries:** Parties select candidates internally (conventions, appointments, etc.). This gives party leadership more control but may reduce grassroots democracy and voter input in candidate selection."}},"block-score":{name:"Block Score Voting",shortDescription:"Highest total scores win multiple seats",detailedCritique:"Multi-winner extension of score voting where candidates with the highest total scores win seats. Simple but provides no proportional representation.",ballotType:"score",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:0,simplicity:5,honestStrategyResistance:2,strategicStraightforwardness:2,representation:2},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Block Score Voting:** Simple extension of score voting to multiple winners. Candidates with highest total scores win seats, but provides no proportional representation.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},"equal-shares":{name:"Method of Equal Shares",shortDescription:"Equal budget per voter",detailedCritique:"Ensures each voter gets an equal 'budget' of representation. Excellent proportionality and fairness, but complex for voters to understand. The detailed scoring works best with many candidates and relatively few voters.",ballotType:"score",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:3,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Method of Equal Shares:** Ensures each voter gets an equal 'budget' of representation. Excellent proportionality and fairness, but complex for voters to understand. The detailed scoring works best with many candidates and relatively few voters.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},pav:{name:"PAV (Proportional Approval Voting)",shortDescription:"Optimal approval-based proportional representation",detailedCritique:"The theoretical optimum for proportional representation using approval ballots. Maximizes voter satisfaction but requires complex optimization algorithms that are computationally intensive for large elections.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:2,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**PAV:** The theoretical optimum for proportional representation using approval ballots. Maximizes voter satisfaction but requires complex optimization algorithms that are computationally intensive for large elections.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability.",tags:["proportional","approval","optimization","theoretically-optimal","computationally-complex","np-hard"]},"star-pr":{name:"STAR-PR",shortDescription:"Proportional STAR voting",detailedCritique:"Extends STAR voting to multi-winner elections by using proportional allocation. Combines the benefits of score voting expressiveness with proportional representation, but adds complexity to the tabulation process.",ballotType:"score",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:3,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**STAR-PR:** Extends STAR voting to multi-winner elections by using proportional allocation. Combines the benefits of score voting expressiveness with proportional representation, but adds complexity to the tabulation process.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},"allocated-score":{name:"Allocated Score",shortDescription:"Practical proportional score voting",detailedCritique:"A practical implementation of proportional score voting that allocates candidates based on weighted scores. Simpler than Method of Equal Shares while still achieving good proportionality.",ballotType:"score",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:4,simplicity:4,honestStrategyResistance:3,strategicStraightforwardness:3,representation:4},isProportional:!0,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Allocated Score:** A practical approach to proportional score voting that's easier to implement than Method of Equal Shares while maintaining good proportional outcomes.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},"range-voting":{name:"Range Voting",shortDescription:"Pure score voting without runoff",detailedCritique:"Simple score voting where the candidate with the highest total score wins. More expressive than approval voting but vulnerable to strategic exaggeration and normalization issues between voters.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:4,honestStrategyResistance:2,strategicStraightforwardness:2,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Range Voting:** Simple score voting where the candidate with the highest total score wins. More expressive than approval voting but vulnerable to strategic exaggeration and normalization issues between voters.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},"3-2-1-voting":{name:"3-2-1 Voting",shortDescription:"Score 3-2-1, advance top 2, pick winner",detailedCritique:"Voters score candidates as Good (3), OK (2), or Bad (1). The two highest-scoring candidates advance to a runoff based on who is rated higher by more voters. Simple to understand and resistant to tactical voting.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:4,honestStrategyResistance:4,strategicStraightforwardness:3,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**3-2-1 Voting:** Simple to understand and resistant to tactical voting. Uses a constrained score range that's easy for voters to grasp.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},"majority-judgment":{name:"Majority Judgment",shortDescription:"Winner has highest median score",detailedCritique:"Uses the median (middle) score for each candidate rather than totals or averages. Highly resistant to strategic manipulation since extreme scores don't affect the median. Can lead to ties requiring complex tie-breaking rules.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:3,honestStrategyResistance:2,strategicStraightforwardness:1,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Majority Judgment:** Uses the median (middle) score for each candidate rather than totals or averages. This makes it highly resistant to strategic manipulation since extreme scores (very high or very low) don't affect the median. However, it can lead to ties when candidates have the same median, requiring complex tie-breaking rules. The detailed scoring is most valuable when there are many candidates to differentiate.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},"top-two-runoff":{name:"Top-Two Runoff",shortDescription:"Top 2 candidates advance to runoff election",detailedCritique:"Two-round system where if no candidate gets a majority, the top two candidates compete in a second election. Simple and familiar but can eliminate popular candidates in the first round.",ballotType:"choose-x",choiceLimitation:"1",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:4,honestStrategyResistance:1,strategicStraightforwardness:2,representation:2},isProportional:!1,isSemiProportional:!1,category:"plurality",ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences."},tabulationCritique:"**Top-Two Runoff:** Ensures the winner has majority support in the final round, but can eliminate popular candidates who don't make the top two. Technically not a different tabulation method, but just block voting then FPTP",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"}}},T=[{id:"closed",name:"Closed List",description:"Voters vote for parties, party decides candidate order"},{id:"open",name:"Open List",description:"Voters vote for individual candidates within parties"},{id:"flexible",name:"Flexible List",description:"Voters can vote for party or individual candidates"}];let S=ne([]);function v(C){const P=([dt,ht])=>ht.ballotType===C.ballotType,H=([dt,ht])=>ht.choiceLimitation==="any"||ht.choiceLimitation===C.limitedChoices,G=([dt,ht])=>w(m)==="all"?!0:(y(C.numberOfSeats),w(m)==="single"?ht.minSeats<=1:ht.maxSeats!==1),Z=([dt,ht])=>w(m)==="all"?!0:C.numberOfSeats>=ht.minSeats&&(ht.maxSeats==="unlimited"||C.numberOfSeats<=ht.maxSeats);return Object.entries(_).filter(P).filter(H).filter(G).filter(Z).map(([dt])=>dt)}function M(C){if(!C.ballotType)return"Select a ballot type to begin";if(!C.tabulationMethod){if(C.ballotType==="choose-x"){if(C.limitedChoices==="1")return"First Past The Post";if(C.limitedChoices==="unlimited")return"Approval Voting";if(C.limitedChoices==="custom")return`Limited Voting (${C.customLimit})`}return"Select a tabulation method"}const P=_[C.tabulationMethod||""];if(!P)return"Unknown Method";let H=P.name;if(C.listType&&["party-list-pr","mmp"].includes(C.tabulationMethod)){const G=T.find(Z=>Z.id===C.listType);G&&(H=`${G.name} ${H}`)}if(C.tabulationMethod==="mmp"&&C.mixedMember){const G=C.singleWinnerProportion,Z=100-G;H+=` (${G}% districts, ${Z}% list)`}return C.limitedChoices==="custom"&&C.customLimit!==3&&(H.includes(`(${C.customLimit})`)||(H+=` (${C.customLimit})`)),H}function N(C){if(!C.ballotType)return"";let P="";const H=x.find(G=>G.id===C.ballotType);if(H&&(P+=`**Ballot Type:** ${H.description}`,C.ballotType==="score"&&(P+=` (${C.scoreMin} to ${C.scoreMax}`,C.allowNegativeVotes&&(P+=", negative scores allowed. Negative values "),P+="). Score voting works best with many candidates and relatively few voters, where the expressivity helps prevent ties"),P+=`

`),C.limitedChoices&&C.limitedChoices!=="unlimited")if(C.limitedChoices==="custom")P+=`**Choice Limit:** Maximum of ${C.customLimit} candidate${C.customLimit===1?"":"s"}

`;else{const G=b.find(Z=>Z.id===C.limitedChoices);G&&(P+=`**Choice Limit:** ${G.description}

`)}if(C.tabulationMethod){const G=w(S).find(dt=>dt.id===C.tabulationMethod);G&&(P+=`**Tabulation:** ${G.description}

`);const Z=_[C.tabulationMethod||""];if(Z&&Z.votingMachineCompatibility){const dt=Z.votingMachineCompatibility.existingMachines?"":"";P+=`**Voting Machines:** ${dt} ${Z.votingMachineCompatibility.description}

`}}if(C.numberOfSeats===1)P+=`**Single-Winner Election:** Electing 1 seat

`;else{P+=`**Multi-Winner Election:** Electing ${C.numberOfSeats} seats

`;let G="**Party Structure:** Election has political parties. ";if(C.canVoteForParties&&C.canVoteForCandidates?G+="Voters can choose both parties and individual candidates.":C.canVoteForParties?G+="Voters choose parties only.":C.canVoteForCandidates&&(G+="Voters choose individual candidates within parties."),C.hasPrimaries?G+=" Parties select candidates through primary elections.":G+=" Parties select candidates through internal processes (conventions, appointments, etc.).",P+=G+`

`,["party-list-pr","mmp"].includes(C.tabulationMethod||"")){if(C.listType){const Z=T.find(dt=>dt.id===C.listType);Z&&(P+=`**List Type:** ${Z.description}

`)}if(C.tabulationMethod==="mmp"&&C.mixedMember){const Z=C.singleWinnerProportion,dt=100-Z;P+=`**Mixed System:** ${Z}% of seats elected in single-winner districts, ${dt}% from party lists to ensure proportionality

`}}}return P.trim()}function V(C){if(!C.ballotType||!C.tabulationMethod)return"";const P=_[C.tabulationMethod||""];if(!P)return"";let H="";if(P.ballotTypeCritique){let G=C.ballotType;C.ballotType==="choose-x"&&(G=`choose-x-${C.limitedChoices||"unlimited"}`);const Z=P.ballotTypeCritique[G]||P.ballotTypeCritique[C.ballotType]||P.ballotTypeCritique["choose-x-unlimited"];Z&&(H+="**Ballot Type Analysis:** "+Z+`

`)}if(P.tabulationCritique&&(H+=P.tabulationCritique+`

`),C.numberOfSeats>1&&P.proportionalityDetails){if(H+=P.proportionalityDetails,C.hasParties&&["party-list-pr","mmp"].includes(C.tabulationMethod||"")){if(H+=`

**List Method Types:**

`,H+=`**Open List:** Voters can choose specific candidates within a party. This maximizes voter choice and allows popular candidates to rise regardless of party ranking. However, it can lead to intra-party competition, potentially fragmenting party unity and making campaigns more expensive as candidates compete against their own party members.

`,H+=`**Closed List:** The party determines the order of candidates, and voters can only vote for the party as a whole. This strengthens party discipline and cohesion, ensures balanced representation (parties can guarantee diversity), and simplifies voting. However, it reduces voter choice and can lead to party elites having too much control over who gets elected.

`,H+=`**Hybrid/Flexible List:** Combines elements of both systems. Voters can either vote for the party (accepting its ranking) or for specific candidates. If enough voters choose a candidate, they can move up the list. This balances party cohesion with voter choice, though it adds complexity to both voting and vote counting.

`,C.listType&&P.listTypeCritique){const G=P.listTypeCritique[C.listType];G&&(H+="**Your Selected "+(C.listType==="flexible"?"Flexible":C.listType.charAt(0).toUpperCase()+C.listType.slice(1))+" List System:** "+G.replace(/^\*\*[^:]+:\*\*\s*/,""))}}else if(C.listType&&P.listTypeCritique){const G=P.listTypeCritique[C.listType];G&&(H+=`

`+G)}if(C.tabulationMethod==="mmp"&&C.mixedMember){H+=`

`;const G=C.singleWinnerProportion;G>70?H+="**High District Proportion:** Maintains strong local representation but may reduce proportionality effectiveness.":G<30?H+="**High List Proportion:** Maximizes proportionality but may weaken local representation and accountability.":H+="**Balanced Mixed System:** Good compromise between local representation and proportionality."}if(C.hasParties&&P.primaryCritique){H+=`

`;const G=C.hasPrimaries?"withPrimaries":"withoutPrimaries",Z=P.primaryCritique[G];Z&&(H+=Z)}}return H.trim()}function q(C){const P={proportionality:0,simplicity:0,honestStrategyResistance:0,strategicStraightforwardness:0,representation:0};if(!C.ballotType||!C.tabulationMethod)return P;const H=_[C.tabulationMethod||""];if(!H)return P;const G={...H.scores};return C.numberOfSeats>1&&C.tabulationMethod==="block-approval"&&(G.representation=2),C.limitedChoices==="1"&&C.ballotType==="choose-x"&&(G.honestStrategyResistance=0,G.strategicStraightforwardness=0,G.representation=1),C.numberOfSeats===1&&(G.proportionality=0),G}function F(C){if(C.numberOfSeats<=1)return!1;const P=_[C.tabulationMethod||""];return(P==null?void 0:P.isProportional)||!1}function Y(C){if(C.numberOfSeats<=1)return!1;const P=_[C.tabulationMethod||""];return(P==null?void 0:P.isSemiProportional)||!1}function z(C){Jt(m,C),C==="single"?B("numberOfSeats",1):C==="multi"&&B("numberOfSeats",10)}function B(C,P){if(re(p,w(p)[C]=P),C==="ballotType"&&(re(p,w(p).tabulationMethod=null),P==="choose-x"&&re(p,w(p).limitedChoices="1")),C==="limitedChoices"&&P==="1"&&w(p).ballotType==="choose-x"&&re(p,w(p).tabulationMethod=w(p).numberOfSeats>1?"sntv":"fptp"),C==="tabulationMethod"&&["party-list-pr","mmp"].includes(P)&&(w(p).listType||re(p,w(p).listType="closed")),C==="ballotType"&&(P==="choose-x"?re(p,w(p).tabulationMethod=w(p).numberOfSeats>1?"sntv":"fptp"):P==="score"?re(p,w(p).tabulationMethod="highest-total"):P==="ranking"&&re(p,w(p).tabulationMethod=w(p).numberOfSeats>1?"stv":"irv")),C==="numberOfSeats"){const H=P>1;w(p).ballotType==="choose-x"?re(p,w(p).tabulationMethod=H?"spav":"approval"):w(p).ballotType==="ranking"?re(p,w(p).tabulationMethod=H?"stv":"irv"):w(p).ballotType==="score"&&re(p,w(p).tabulationMethod=H?"equal-shares":"highest-total"),H||(re(p,w(p).listType=null),re(p,w(p).mixedMember=!1),re(p,w(p).singleWinnerProportion=50))}}let E=ne(null);function A(C){Jt(E,w(E)===C?null:C)}function R(){Jt(E,null)}function $(C){C.key==="Escape"&&R()}let K=ne(!1),et=ne([]);function at(C){Jt(et,C.filter(P=>P in _)),Jt(K,!0)}function St(){Jt(K,!1),Jt(et,[])}function vt(C){if(!_[C.tabulationMethod||""]||!C.tabulationMethod)return[];const H=v(C),G=C.tabulationMethod,Z=D=>H.filter(Ct=>D(_[Ct])),dt=D=>H.filter(Ct=>{var Bt;return((Bt=_[Ct].tags)==null?void 0:Bt.includes(D))||!1}),ht=D=>H.filter(Ct=>D.some(Bt=>{var Ht;return((Ht=_[Ct].tags)==null?void 0:Ht.includes(Bt))||!1}));return[{methods:Z(D=>D.ballotType==="score"&&D.isProportional),title:"Proportional Score Methods",description:"All provide proportional representation with score/approval ballots but use different algorithms"},{methods:Z(D=>D.ballotType==="score"&&D.maxSeats!==1),title:"Multi-Winner Score Methods",description:"Different approaches to multi-winner elections with score ballots - from simple block voting to complex proportional systems"},{methods:Z(D=>D.ballotType==="score"&&D.maxSeats===1),title:"Single-Winner Score Methods",description:"Different ways to count score ballots - from simple totals to complex runoffs"},{methods:Z(D=>D.ballotType==="choose-x"&&D.maxSeats===1),title:"Single-Winner Choose-X Methods",description:"Different approaches to single-winner elections with choose-X ballots"},{methods:Z(D=>D.ballotType==="choose-x"&&D.isProportional),title:"Approval-Based Proportional Methods",description:"Ways to achieve proportional representation using approval ballots"},{methods:Z(D=>D.ballotType==="choose-x"),title:"Choose-X Methods",description:"Different ways to count choose-X ballots - from simple plurality to complex proportional systems"},{methods:Z(D=>D.ballotType==="choose-x"&&D.maxSeats!==1),title:"Multi-Winner Choose-X Methods",description:"Different approaches to multi-winner elections with choose-X ballots - from simple block voting to proportional systems"},{methods:Z(D=>D.ballotType==="ranking"),title:"Ranked Choice Methods",description:"Different algorithms for counting ranked ballots"},{methods:Z(D=>D.isProportional),title:"Proportional Methods",description:"All methods that achieve proportional representation"},{methods:Z(D=>D.isSemiProportional),title:"Semi-Proportional Methods",description:"Methods that provide some minority representation but not full proportionality"},{methods:dt("simple"),title:"Simple Methods",description:"Easy to understand and implement voting methods"},{methods:dt("runoff"),title:"Runoff-Based Methods",description:"Methods that use some form of runoff or elimination process"},{methods:dt("consensus"),title:"Consensus-Building Methods",description:"Methods that tend to elect broadly acceptable candidates"},{methods:dt("proportional"),title:"Proportional Methods (Tagged)",description:"All methods tagged as proportional"},{methods:ht(["computationally-complex","optimization"]),title:"Computationally Complex Methods",description:"Methods that require significant computation or optimization"}].filter(D=>D.methods.includes(G)&&D.methods.length>1)}let Nt=ne(!1);Zy(()=>{Lu.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose"}),Jt(Nt,!0)});async function _t(C,P){if(w(Nt))try{const{svg:H}=await Lu.render(`flowchart-${Date.now()}`,P);C.innerHTML=H}catch(H){console.error("Error rendering flowchart:",H),C.innerHTML="<p>Error rendering flowchart</p>"}}let yt=ne();De(()=>w(p),()=>{Jt(r,y(w(p).numberOfSeats))}),De(()=>w(p),()=>{Jt(i,w(p).ballotType==="ranking")}),De(()=>w(p),()=>{Jt(a,w(p).ballotType==="choose-x")}),De(()=>w(p),()=>{Jt(n,w(p).ballotType==="score")}),De(()=>w(p),()=>{Jt(o,w(p).numberOfSeats>1)}),De(()=>(w(p),w(m)),()=>{const C=v(w(p));w(m),Jt(S,C.map(P=>({id:P,name:_[P].name,description:_[P].shortDescription})))}),De(()=>w(p),()=>{Jt(s,M(w(p)))}),De(()=>w(p),()=>{Jt(l,N(w(p)))}),De(()=>w(p),()=>{Jt(c,V(w(p)))}),De(()=>w(p),()=>{Jt(h,q(w(p)))}),De(()=>w(p),()=>{Jt(u,_[w(p).tabulationMethod||""])}),De(()=>w(u),()=>{var C;Jt(d,(C=w(u))==null?void 0:C.flowchart)}),De(()=>(w(yt),w(d),w(Nt)),()=>{w(yt)&&w(d)&&w(Nt)&&_t(w(yt),w(d))}),s0(),Xy();var wt=PB();h0(C=>{var P=rB();l0.title="Voting Method Builder - Create Your Custom Voting System - approval.vote",Tt(C,P)}),Gt("keydown",Hc,$),Gt("click",Hc,R);var qt=bo(wt),Rt=W(qt),It=W(Rt),Zt=W(It);$i(2),O(It),$i(2),O(Rt);var ce=U(Rt,2),Te=W(ce),ye=W(Te),zr=U(W(ye),4);Xr(zr,5,()=>x,Zr,(C,P)=>{var H=iB();let G;var Z=W(H),dt=W(Z,!0);O(Z);var ht=U(Z,2),ft=W(ht,!0);O(ht),O(H),Le(D=>{G=Qr(H,1,"option-button svelte-1jxrepv",null,G,D),Dt(dt,(w(P),rt(()=>w(P).name))),Dt(ft,(w(P),rt(()=>w(P).description)))},[()=>({selected:w(p).ballotType===w(P).id})]),Gt("click",H,()=>B("ballotType",w(P).id)),Tt(C,H)}),O(zr);var pa=U(zr,2);{var Ar=C=>{var P=aB(),H=W(P),G=U(W(H));Fi(G);var Z=U(G,2);Fi(Z),O(H);var dt=U(H,2),ht=W(dt);Fi(ht),$i(),O(dt),O(P),An(G,()=>w(p).scoreMin,ft=>re(p,w(p).scoreMin=ft)),An(Z,()=>w(p).scoreMax,ft=>re(p,w(p).scoreMax=ft)),Uc(ht,()=>w(p).allowNegativeVotes,ft=>re(p,w(p).allowNegativeVotes=ft)),Tt(C,P)};Yt(pa,C=>{w(p),rt(()=>w(p).ballotType==="score")&&C(Ar)})}O(ye);var Wr=U(ye,2);{var wi=C=>{var P=oB(),H=U(W(P),4);Xr(H,5,()=>b,Zr,(dt,ht)=>{var ft=nB();let D;var Ct=W(ft),Bt=W(Ct,!0);O(Ct);var Ht=U(Ct,2),Qt=W(Ht,!0);O(Ht),O(ft),Le(ee=>{D=Qr(ft,1,"option-button small svelte-1jxrepv",null,D,ee),Dt(Bt,(w(ht),rt(()=>w(ht).name))),Dt(Qt,(w(ht),rt(()=>w(ht).description)))},[()=>({selected:w(p).limitedChoices===w(ht).id})]),Gt("click",ft,()=>B("limitedChoices",w(ht).id)),Tt(dt,ft)}),O(H);var G=U(H,2);{var Z=dt=>{var ht=sB(),ft=W(ht),D=U(W(ft));Fi(D);var Ct=U(D);O(ft),O(ht),Le(()=>Dt(Ct,` candidate${w(p),rt(()=>w(p).customLimit===1?"":"s")??""}`)),An(D,()=>w(p).customLimit,Bt=>re(p,w(p).customLimit=Bt)),Tt(dt,ht)};Yt(G,dt=>{w(p),rt(()=>w(p).limitedChoices==="custom")&&dt(Z)})}O(P),Tt(C,P)};Yt(Wr,C=>{w(p),rt(()=>w(p).ballotType==="choose-x")&&C(wi)})}var Ci=U(Wr,2),da=U(W(Ci),4);Xr(da,5,()=>g,Zr,(C,P)=>{var H=lB();let G;var Z=W(H),dt=W(Z,!0);O(Z);var ht=U(Z,2),ft=W(ht,!0);O(ht),O(H),Le(D=>{G=Qr(H,1,"option-button small svelte-1jxrepv",null,G,D),Dt(dt,(w(P),rt(()=>w(P).name))),Dt(ft,(w(P),rt(()=>w(P).description)))},[()=>({selected:w(m)===w(P).id})]),Gt("click",H,()=>z(w(P).id)),Tt(C,H)}),O(da),O(Ci);var vn=U(Ci,2);{var fa=C=>{var P=hB(),H=U(W(P),4);Xr(H,5,()=>w(S),Zr,(G,Z)=>{var dt=cB();let ht;var ft=W(dt),D=W(ft,!0);O(ft);var Ct=U(ft,2),Bt=W(Ct,!0);O(Ct),O(dt),Le(Ht=>{ht=Qr(dt,1,"option-button svelte-1jxrepv",null,ht,Ht),Dt(D,(w(Z),rt(()=>w(Z).name))),Dt(Bt,(w(Z),rt(()=>w(Z).description)))},[()=>({selected:w(p).tabulationMethod===w(Z).id})]),Gt("click",dt,()=>B("tabulationMethod",w(Z).id)),Tt(G,dt)}),O(H),O(P),Tt(C,P)};Yt(vn,C=>{w(p),rt(()=>w(p).ballotType)&&C(fa)})}var jr=U(vn,2);{var Br=C=>{var P=fB(),H=U(W(P),2),G=U(W(H),2);Xr(G,5,()=>T,Zr,(ht,ft)=>{var D=uB();let Ct;var Bt=W(D),Ht=W(Bt,!0);O(Bt);var Qt=U(Bt,2),ee=W(Qt,!0);O(Qt),O(D),Le(Vt=>{Ct=Qr(D,1,"option-button small svelte-1jxrepv",null,Ct,Vt),Dt(Ht,(w(ft),rt(()=>w(ft).name))),Dt(ee,(w(ft),rt(()=>w(ft).description)))},[()=>({selected:w(p).listType===w(ft).id})]),Gt("click",D,()=>B("listType",w(ft).id)),Tt(ht,D)}),O(G),O(H);var Z=U(H,2);{var dt=ht=>{var ft=dB(),D=W(ft),Ct=W(D),Bt=W(Ct);Fi(Bt),$i(2),O(Ct),O(D);var Ht=U(D,2);{var Qt=ee=>{var Vt=pB(),Fe=W(Vt),Pe=U(W(Fe)),Ke=W(Pe);O(Pe);var Ve=U(Pe,2);Fi(Ve),$i(2),O(Fe),O(Vt),Le(()=>Dt(Ke,`${w(p),rt(()=>w(p).singleWinnerProportion)??""}%`)),An(Ve,()=>w(p).singleWinnerProportion,Qe=>re(p,w(p).singleWinnerProportion=Qe)),Tt(ee,Vt)};Yt(Ht,ee=>{w(p),rt(()=>w(p).mixedMember)&&ee(Qt)})}O(ft),Uc(Bt,()=>w(p).mixedMember,ee=>re(p,w(p).mixedMember=ee)),Tt(ht,ft)};Yt(Z,ht=>{w(p),rt(()=>w(p).tabulationMethod==="mmp")&&ht(dt)})}O(P),Tt(C,P)};Yt(jr,C=>{w(p),rt(()=>w(p).tabulationMethod&&["party-list-pr","mmp"].includes(w(p).tabulationMethod))&&C(Br)})}O(Te);var ur=U(Te,2),ga=W(ur),ki=W(ga),ma=W(ki),ya=U(ma);{var _n=C=>{var P=gB();Tt(C,P)},Si=C=>{var P=c0(),H=bo(P);{var G=Z=>{var dt=mB();Tt(Z,dt)};Yt(H,Z=>{w(p),rt(()=>Y(w(p)))&&Z(G)},!0)}Tt(C,P)};Yt(ya,C=>{w(p),rt(()=>F(w(p)))?C(_n):C(Si,!1)})}O(ki);var Hr=U(ki,2);{var He=C=>{var P=wB(),H=U(W(P),2),G=W(H),Z=W(G),dt=W(Z),ht=W(dt);O(dt);var ft=U(dt,2),D=W(ft),Ct=U(D,2),Bt=W(Ct);O(Ct),O(ft),O(Z);var Ht=U(Z,2);{var Qt=J=>{var Re=yB();Tt(J,Re)};Yt(Ht,J=>{w(E)==="proportionality"&&J(Qt)})}O(G);var ee=U(G,2),Vt=W(ee),Fe=W(Vt),Pe=W(Fe);O(Fe);var Ke=U(Fe,2),Ve=W(Ke),Qe=U(Ve,2),nt=W(Qe);O(Qe),O(Ke),O(Vt);var k=U(Vt,2);{var j=J=>{var Re=xB();Tt(J,Re)};Yt(k,J=>{w(E)==="simplicity"&&J(j)})}O(ee);var Q=U(ee,2),$t=W(Q),Ut=W($t),Wt=W(Ut);O(Ut);var ae=U(Ut,2),de=W(ae),Je=U(de,2),dr=W(Je);O(Je),O(ae),O($t);var Kt=U($t,2);{var Li=J=>{var Re=bB();Tt(J,Re)};Yt(Kt,J=>{w(E)==="honest-resistance"&&J(Li)})}O(Q);var fr=U(Q,2),ba=W(fr),Yr=W(ba),Ai=W(Yr);O(Yr);var wn=U(Yr,2),Bi=W(wn),Cn=U(Bi,2),kn=W(Cn);O(Cn),O(wn),O(ba);var va=U(ba,2);{var mo=J=>{var Re=vB();Tt(J,Re)};Yt(va,J=>{w(E)==="quality"&&J(mo)})}O(fr);var _a=U(fr,2),wa=W(_a),Gr=W(wa),Ca=W(Gr);O(Gr);var Sn=U(Gr,2),Ei=W(Sn),Tn=U(Ei,2),yo=W(Tn);O(Tn),O(Sn),O(wa);var xo=U(wa,2);{var xe=J=>{var Re=_B();Tt(J,Re)};Yt(xo,J=>{w(E)==="straightforwardness"&&J(xe)})}O(_a),O(H),O(P),Le(()=>{Kr(D,"data-score",(w(h),rt(()=>w(h).proportionality))),tr(D,`width: ${w(h),rt(()=>w(h).proportionality/5*100)??""}%`),Dt(Bt,`${w(h),rt(()=>w(h).proportionality)??""}/5`),Kr(Ve,"data-score",(w(h),rt(()=>w(h).simplicity))),tr(Ve,`width: ${w(h),rt(()=>w(h).simplicity/5*100)??""}%`),Dt(nt,`${w(h),rt(()=>w(h).simplicity)??""}/5`),Kr(de,"data-score",(w(h),rt(()=>w(h).honestStrategyResistance))),tr(de,`width: ${w(h),rt(()=>w(h).honestStrategyResistance/5*100)??""}%`),Dt(dr,`${w(h),rt(()=>w(h).honestStrategyResistance)??""}/5`),Kr(Bi,"data-score",(w(h),rt(()=>w(h).representation))),tr(Bi,`width: ${w(h),rt(()=>w(h).representation/5*100)??""}%`),Dt(kn,`${w(h),rt(()=>w(h).representation)??""}/5`),Kr(Ei,"data-score",(w(h),rt(()=>w(h).strategicStraightforwardness))),tr(Ei,`width: ${w(h),rt(()=>w(h).strategicStraightforwardness/5*100)??""}%`),Dt(yo,`${w(h),rt(()=>w(h).strategicStraightforwardness)??""}/5`)}),Gt("click",ht,J=>{J.stopPropagation(),A("proportionality")}),Gt("keydown",ht,J=>{(J.key==="Enter"||J.key===" ")&&(J.preventDefault(),J.stopPropagation(),A("proportionality"))}),Gt("click",Pe,J=>{J.stopPropagation(),A("simplicity")}),Gt("keydown",Pe,J=>{(J.key==="Enter"||J.key===" ")&&(J.preventDefault(),J.stopPropagation(),A("simplicity"))}),Gt("click",Wt,J=>{J.stopPropagation(),A("honest-resistance")}),Gt("keydown",Wt,J=>{(J.key==="Enter"||J.key===" ")&&(J.preventDefault(),J.stopPropagation(),A("honest-resistance"))}),Gt("click",Ai,J=>{J.stopPropagation(),A("quality")}),Gt("keydown",Ai,J=>{(J.key==="Enter"||J.key===" ")&&(J.preventDefault(),J.stopPropagation(),A("quality"))}),Gt("click",Ca,J=>{J.stopPropagation(),A("straightforwardness")}),Gt("keydown",Ca,J=>{(J.key==="Enter"||J.key===" ")&&(J.preventDefault(),J.stopPropagation(),A("straightforwardness"))}),Tt(C,P)};Yt(Hr,C=>{w(p),rt(()=>w(p).ballotType&&w(p).tabulationMethod)&&C(He)})}var pr=U(Hr,2);{var xa=C=>{var P=CB(),H=W(P);Yc(H,()=>(w(l),rt(()=>w(l).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n\n/g,"<br><br>")))),O(P),Tt(C,P)};Yt(pr,C=>{w(l)&&C(xa)})}var Ti=U(pr,2);{var uo=C=>{var P=kB(),H=U(W(P),2);Yc(H,()=>(w(c),rt(()=>w(c).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n\n/g,"<br><br>")))),O(P),Tt(C,P)};Yt(Ti,C=>{w(c)&&C(uo)})}var Vr=U(Ti,2);{var Mi=C=>{var P=SB(),H=U(W(P),2);u0(H,G=>Jt(yt,G),()=>w(yt)),O(P),Tt(C,P)};Yt(Vr,C=>{w(d)&&C(Mi)})}var po=U(Vr,2);{var Ur=C=>{var P=LB(),H=bo(P);{var G=ht=>{var ft=MB(),D=U(W(ft),2);Xr(D,1,()=>(w(p),rt(()=>vt(w(p)))),Zr,(Ct,Bt)=>{var Ht=TB(),Qt=W(Ht),ee=W(Qt);O(Qt);var Vt=U(Qt,2),Fe=W(Vt,!0);O(Vt),O(Ht),Le(()=>{Dt(ee,`Compare ${w(Bt),rt(()=>w(Bt).title)??""}`),Dt(Fe,(w(Bt),rt(()=>w(Bt).description)))}),Gt("click",Qt,()=>at(w(Bt).methods)),Tt(Ct,Ht)}),O(ft),Tt(ht,ft)};Yt(H,ht=>{w(p),rt(()=>w(p).tabulationMethod&&vt(w(p)).length>0)&&ht(G)})}var Z=U(H,2),dt=W(Z);$i(2),O(Z),Le(ht=>Kr(dt,"href",ht),[()=>(Vc(Ln),rt(()=>Ln("/about-approval-voting")))]),Tt(C,P)};Yt(po,C=>{w(p),rt(()=>w(p).ballotType)&&C(Ur)})}O(ga),O(ur),O(ce),O(qt);var fo=U(qt,2);{var go=C=>{var P=FB(),H=W(P),G=W(H),Z=U(W(G),2);O(G);var dt=U(G,2),ht=W(dt);Xr(ht,5,()=>w(et),Zr,(ft,D)=>{var Ct=$B();let Bt;var Ht=W(Ct),Qt=W(Ht),ee=W(Qt,!0);O(Qt);var Vt=U(Qt,2);{var Fe=xe=>{var J=AB();Tt(xe,J)};Yt(Vt,xe=>{w(D),w(p),rt(()=>w(D)===w(p).tabulationMethod)&&xe(Fe)})}O(Ht);var Pe=U(Ht,2),Ke=W(Pe),Ve=U(W(Ke));O(Ke),O(Pe);var Qe=U(Pe,2),nt=W(Qe),k=U(W(nt),2),j=W(k);O(k);var Q=U(k,2),$t=W(Q);O(Q),O(nt);var Ut=U(nt,2),Wt=U(W(Ut),2),ae=W(Wt);O(Wt);var de=U(Wt,2),Je=W(de);O(de),O(Ut);var dr=U(Ut,2),Kt=U(W(dr),2),Li=W(Kt);O(Kt);var fr=U(Kt,2),ba=W(fr);O(fr),O(dr);var Yr=U(dr,2),Ai=U(W(Yr),2),wn=W(Ai);O(Ai);var Bi=U(Ai,2),Cn=W(Bi);O(Bi),O(Yr);var kn=U(Yr,2),va=U(W(kn),2),mo=W(va);O(va);var _a=U(va,2),wa=W(_a);O(_a),O(kn),O(Qe);var Gr=U(Qe,2),Ca=W(Gr),Sn=U(W(Ca));O(Ca),O(Gr);var Ei=U(Gr,2);{var Tn=xe=>{var J=BB(),Re=U(W(J),2);let Nc;var Vy=W(Re,!0);O(Re),O(J),Le(Uy=>{Nc=Qr(Re,1,"compatibility-value svelte-1jxrepv",null,Nc,Uy),Dt(Vy,(w(D),rt(()=>_[w(D)].votingMachineCompatibility.existingMachines?"Compatible":"Requires New Machines")))},[()=>({compatible:_[w(D)].votingMachineCompatibility.existingMachines,incompatible:!_[w(D)].votingMachineCompatibility.existingMachines})]),Tt(xe,J)};Yt(Ei,xe=>{w(D),rt(()=>_[w(D)].votingMachineCompatibility)&&xe(Tn)})}var yo=U(Ei,2);{var xo=xe=>{var J=EB();Gt("click",J,()=>{B("tabulationMethod",w(D)),St()}),Tt(xe,J)};Yt(yo,xe=>{w(D),w(p),rt(()=>w(D)!==w(p).tabulationMethod)&&xe(xo)})}O(Ct),Le((xe,J)=>{Bt=Qr(Ct,1,"comparison-card svelte-1jxrepv",null,Bt,xe),Dt(ee,(w(D),rt(()=>_[w(D)].name))),Dt(Ve,` ${w(D),rt(()=>_[w(D)].shortDescription)??""}`),tr(j,`width: ${w(D),rt(()=>_[w(D)].scores.proportionality/5*100)??""}%`),Dt($t,`${w(D),rt(()=>_[w(D)].scores.proportionality)??""}/5`),tr(ae,`width: ${w(D),rt(()=>_[w(D)].scores.simplicity/5*100)??""}%`),Dt(Je,`${w(D),rt(()=>_[w(D)].scores.simplicity)??""}/5`),tr(Li,`width: ${w(D),rt(()=>_[w(D)].scores.honestStrategyResistance/5*100)??""}%`),Dt(ba,`${w(D),rt(()=>_[w(D)].scores.honestStrategyResistance)??""}/5`),tr(wn,`width: ${w(D),rt(()=>_[w(D)].scores.strategicStraightforwardness/5*100)??""}%`),Dt(Cn,`${w(D),rt(()=>_[w(D)].scores.strategicStraightforwardness)??""}/5`),tr(mo,`width: ${w(D),rt(()=>_[w(D)].scores.representation/5*100)??""}%`),Dt(wa,`${w(D),rt(()=>_[w(D)].scores.representation)??""}/5`),Dt(Sn,` ${J??""}.`)},[()=>({current:w(D)===w(p).tabulationMethod}),()=>(w(D),rt(()=>_[w(D)].detailedCritique.split(".")[0]))]),Tt(ft,Ct)}),O(ht),O(dt),O(H),O(P),Gt("click",Z,St),Gt("click",H,ft=>ft.stopPropagation()),Gt("keydown",H,ft=>ft.stopPropagation()),Gt("click",P,St),Gt("keydown",P,ft=>ft.key==="Escape"&&St()),Tt(C,P)};Yt(fo,C=>{w(K)&&C(go)})}Le(C=>{Kr(Zt,"href",C),Dt(ma,`${w(s)??""} `)},[()=>(Vc(Ln),rt(()=>Ln("/")))]),Tt(e,wt),o0()}export{Ju as $,Va as A,V0 as B,Dx as C,vc as D,$e as E,Wu as F,uk as G,HT as H,gu as I,Hb as J,J0 as K,Ji as L,QB as M,eo as N,Ku as O,ql as P,sh as Q,b2 as R,Zn as S,hk as T,hn as U,kx as V,cn as W,tt as X,pt as Y,rk as Z,f as _,Bx as a,W1 as a$,g2 as a0,Bh as a1,Ah as a2,cE as a3,aE as a4,oE as a5,sE as a6,rE as a7,Pi as a8,sc as a9,lt as aA,bE as aB,CT as aC,bT as aD,xT as aE,SS as aF,m2 as aG,yn as aH,CS as aI,wS as aJ,rc as aK,$r as aL,Ch as aM,X1 as aN,rn as aO,yi as aP,JC as aQ,jf as aR,Zs as aS,to as aT,Ts as aU,Vf as aV,Wf as aW,AC as aX,ct as aY,Rd as aZ,Ee as a_,lE as aa,iE as ab,uE as ac,hE as ad,nE as ae,ZS as af,Xm as ag,_E as ah,xt as ai,or as aj,Ub as ak,le as al,qr as am,Ql as an,kg as ao,vi as ap,Kf as aq,QC as ar,Hw as as,VC as at,uc as au,Cu as av,zT as aw,vE as ax,wE as ay,xE as az,Ax as b,ec as b0,Xd as b1,dn as b2,Qd as b3,eE as b4,m0 as b5,KC as b6,HC as b7,Ew as b8,pc as b9,Js as bA,SE as bB,SC as ba,ek as bb,gn as bc,la as bd,Cs as be,DC as bf,uM as bg,fn as bh,Ss as bi,BC as bj,Df as bk,Pw as bl,Rw as bm,ri as bn,Vh as bo,Dw as bp,dc as bq,Fw as br,Nw as bs,ca as bt,Nr as bu,qh as bv,fc as bw,If as bx,Pl as by,tk as bz,Et as c,Mt as d,Qu as e,pe as f,$x as g,Sr as h,ui as i,Kb as j,sa as k,I as l,Jf as m,JB as n,kE as o,Fx as p,Px as q,CE as r,Ex as s,Vb as t,nr as u,gT as v,fk as w,pE as x,Lx as y,tE as z};
