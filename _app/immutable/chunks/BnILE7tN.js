const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./3oJoh2Vv.js","./B8-mSUpd.js","./DrT2kZzj.js","./C4Ngc8nZ.js","./DQzg832o.js","./BPaFNAAb.js","./AUYcg6Wq.js","./BlIPAoDK.js","./BuX-gmxX.js","./Dtml_t0C.js","./-3QCrfbE.js","./QKs-tsey.js","./D6u3KH-d.js","./DpxYA0nJ.js","./CDyARCXa.js","./BSPd6jVg.js","./brLbq9zl.js","./fhZ7rF6Q.js","./Dp1pzeXC.js","./BCwU4Wqj.js","./CqkleIqs.js","./OLGhvbTN.js","./Gi6I4Gst.js","./C4B-KCzX.js","./D3bk8jiW.js","./IQl1QDjV.js","./C4RnGZZJ.js","./CmKTTxBW.js","./CHvfuDG_.js","./Q5CLQ42W.js","./sO_z5wE-.js","./Cgt_BHMd.js","./CPvZ1rNz.js","./eJamHN9L.js","./BQFKAnsf.js","./BZZKErRp.js","./Cu4_JTMd.js","./CnMaNL8Y.js","./mTN-6KNO.js","./B-253Mrk.js","./BNraQwKC.js","./BTKho27n.js","./DCKqHaGt.js","./D_3AKv80.js","./DPjLcZFk.js","./CfquIHMI.js","./D2fpmNgQ.js","./Bf422eml.js","./BneqE7Fp.js"])))=>i.map(i=>d[i]);
var p0=Object.defineProperty;var d0=(e,t,r)=>t in e?p0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Rt=(e,t,r)=>d0(e,typeof t!="symbol"?t+"":t,r);import"./Bzak7iHL.js";import{i as f0}from"./5JzoiChq.js";import{o as g0}from"./DY-sSnfN.js";import{t as De,a1 as nh,a2 as sh,k as m0,b0 as y0,a8 as oh,am as b0,aw as x0,aL as v0,aK as _0,a4 as lh,ad as w0,a3 as C0,a9 as Un,p as k0,aZ as le,a_ as S0,f as Bt,d as ch,a as At,b as T0,g as C,$ as M0,b1 as hh,s as U,c as W,y as tt,aH as uh,j as $t,G as It,n as Cr,r as z,b2 as Bi}from"./kLaBbFDS.js";import{s as Wt}from"./D0T48-Ch.js";import{i as Vt}from"./TGBpuiGC.js";import{e as Ei,i as $i}from"./Dw0itoQs.js";import{h as L0}from"./Djzyr4U_.js";import{s as kr,c as Fi,a as Pi,r as Yn}from"./gHGqWCvP.js";import{s as Io}from"./Ct694vNH.js";import{e as Dt}from"./Cz8qTxow.js";import{s as Ue}from"./DglsN8Jg.js";import{b as A0}from"./ppk5wC2B.js";import{_ as Et}from"./Dp1pzeXC.js";import{g as B0}from"./CqkleIqs.js";function ph(e,t,r=!1,i=!1,a=!1){var n=e,o="";De(()=>{var s=m0;if(o===(o=t()??"")){nh&&sh();return}if(s.nodes_start!==null&&(y0(s.nodes_start,s.nodes_end),s.nodes_start=s.nodes_end=null),o!==""){if(nh){oh.data;for(var l=sh(),c=l;l!==null&&(l.nodeType!==b0||l.data!=="");)c=l,l=x0(l);if(l===null)throw v0(),_0;lh(oh,c),n=w0(l);return}var h=o+"";r?h=`<svg>${h}</svg>`:i&&(h=`<math>${h}</math>`);var u=C0(h);if((r||i)&&(u=Un(u)),lh(Un(u),u.lastChild),r||i)for(;Un(u);)n.before(Un(u));else n.before(u)}})}var ns={exports:{}},E0=ns.exports,dh;function $0(){return dh||(dh=1,function(e,t){(function(r,i){e.exports=i()})(E0,function(){var r=1e3,i=6e4,a=36e5,n="millisecond",o="second",s="minute",l="hour",c="day",h="week",u="month",p="quarter",d="year",f="date",m="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var E=["th","st","nd","rd"],B=$%100;return"["+$+(E[(B-20)%10]||E[B]||E[0])+"]"}},k=function($,E,B){var D=String($);return!D||D.length>=E?$:""+Array(E+1-D.length).join(B)+$},M={s:k,z:function($){var E=-$.utcOffset(),B=Math.abs(E),D=Math.floor(B/60),F=B%60;return(E<=0?"+":"-")+k(D,2,"0")+":"+k(F,2,"0")},m:function $(E,B){if(E.date()<B.date())return-$(B,E);var D=12*(B.year()-E.year())+(B.month()-E.month()),F=E.clone().add(D,u),X=B-F<0,et=E.clone().add(D+(X?-1:1),u);return+(-(D+(B-F)/(X?F-et:et-F))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:u,y:d,w:h,d:c,D:f,h:l,m:s,s:o,ms:n,Q:p}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},T="en",_={};_[T]=v;var S="$isDayjsObject",I=function($){return $ instanceof Y||!(!$||!$[S])},V=function $(E,B,D){var F;if(!E)return T;if(typeof E=="string"){var X=E.toLowerCase();_[X]&&(F=X),B&&(_[X]=B,F=X);var et=E.split("-");if(!F&&et.length>1)return $(et[0])}else{var J=E.name;_[J]=E,F=J}return!D&&F&&(T=F),F||!D&&T},N=function($,E){if(I($))return $.clone();var B=typeof E=="object"?E:{};return B.date=$,B.args=arguments,new Y(B)},P=M;P.l=V,P.i=I,P.w=function($,E){return N($,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var Y=function(){function $(B){this.$L=V(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[S]=!0}var E=$.prototype;return E.parse=function(B){this.$d=function(D){var F=D.date,X=D.utc;if(F===null)return new Date(NaN);if(P.u(F))return new Date;if(F instanceof Date)return new Date(F);if(typeof F=="string"&&!/Z$/i.test(F)){var et=F.match(y);if(et){var J=et[2]-1||0,Ct=(et[7]||"0").substring(0,3);return X?new Date(Date.UTC(et[1],J,et[3]||1,et[4]||0,et[5]||0,et[6]||0,Ct)):new Date(et[1],J,et[3]||1,et[4]||0,et[5]||0,et[6]||0,Ct)}}return new Date(F)}(B),this.init()},E.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},E.$utils=function(){return P},E.isValid=function(){return this.$d.toString()!==m},E.isSame=function(B,D){var F=N(B);return this.startOf(D)<=F&&F<=this.endOf(D)},E.isAfter=function(B,D){return N(B)<this.startOf(D)},E.isBefore=function(B,D){return this.endOf(D)<N(B)},E.$g=function(B,D,F){return P.u(B)?this[D]:this.set(F,B)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(B,D){var F=this,X=!!P.u(D)||D,et=P.p(B),J=function(Pt,Tt){var zt=P.w(F.$u?Date.UTC(F.$y,Tt,Pt):new Date(F.$y,Tt,Pt),F);return X?zt:zt.endOf(c)},Ct=function(Pt,Tt){return P.w(F.toDate()[Pt].apply(F.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(Tt)),F)},pt=this.$W,wt=this.$M,mt=this.$D,gt="set"+(this.$u?"UTC":"");switch(et){case d:return X?J(1,0):J(31,11);case u:return X?J(1,wt):J(0,wt+1);case h:var yt=this.$locale().weekStart||0,Ft=(pt<yt?pt+7:pt)-yt;return J(X?mt-Ft:mt+(6-Ft),wt);case c:case f:return Ct(gt+"Hours",0);case l:return Ct(gt+"Minutes",1);case s:return Ct(gt+"Seconds",2);case o:return Ct(gt+"Milliseconds",3);default:return this.clone()}},E.endOf=function(B){return this.startOf(B,!1)},E.$set=function(B,D){var F,X=P.p(B),et="set"+(this.$u?"UTC":""),J=(F={},F[c]=et+"Date",F[f]=et+"Date",F[u]=et+"Month",F[d]=et+"FullYear",F[l]=et+"Hours",F[s]=et+"Minutes",F[o]=et+"Seconds",F[n]=et+"Milliseconds",F)[X],Ct=X===c?this.$D+(D-this.$W):D;if(X===u||X===d){var pt=this.clone().set(f,1);pt.$d[J](Ct),pt.init(),this.$d=pt.set(f,Math.min(this.$D,pt.daysInMonth())).$d}else J&&this.$d[J](Ct);return this.init(),this},E.set=function(B,D){return this.clone().$set(B,D)},E.get=function(B){return this[P.p(B)]()},E.add=function(B,D){var F,X=this;B=Number(B);var et=P.p(D),J=function(wt){var mt=N(X);return P.w(mt.date(mt.date()+Math.round(wt*B)),X)};if(et===u)return this.set(u,this.$M+B);if(et===d)return this.set(d,this.$y+B);if(et===c)return J(1);if(et===h)return J(7);var Ct=(F={},F[s]=i,F[l]=a,F[o]=r,F)[et]||1,pt=this.$d.getTime()+B*Ct;return P.w(pt,this)},E.subtract=function(B,D){return this.add(-1*B,D)},E.format=function(B){var D=this,F=this.$locale();if(!this.isValid())return F.invalidDate||m;var X=B||"YYYY-MM-DDTHH:mm:ssZ",et=P.z(this),J=this.$H,Ct=this.$m,pt=this.$M,wt=F.weekdays,mt=F.months,gt=F.meridiem,yt=function(Tt,zt,Yt,Te){return Tt&&(Tt[zt]||Tt(D,X))||Yt[zt].slice(0,Te)},Ft=function(Tt){return P.s(J%12||12,Tt,"0")},Pt=gt||function(Tt,zt,Yt){var Te=Tt<12?"AM":"PM";return Yt?Te.toLowerCase():Te};return X.replace(b,function(Tt,zt){return zt||function(Yt){switch(Yt){case"YY":return String(D.$y).slice(-2);case"YYYY":return P.s(D.$y,4,"0");case"M":return pt+1;case"MM":return P.s(pt+1,2,"0");case"MMM":return yt(F.monthsShort,pt,mt,3);case"MMMM":return yt(mt,pt);case"D":return D.$D;case"DD":return P.s(D.$D,2,"0");case"d":return String(D.$W);case"dd":return yt(F.weekdaysMin,D.$W,wt,2);case"ddd":return yt(F.weekdaysShort,D.$W,wt,3);case"dddd":return wt[D.$W];case"H":return String(J);case"HH":return P.s(J,2,"0");case"h":return Ft(1);case"hh":return Ft(2);case"a":return Pt(J,Ct,!0);case"A":return Pt(J,Ct,!1);case"m":return String(Ct);case"mm":return P.s(Ct,2,"0");case"s":return String(D.$s);case"ss":return P.s(D.$s,2,"0");case"SSS":return P.s(D.$ms,3,"0");case"Z":return et}return null}(Tt)||et.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(B,D,F){var X,et=this,J=P.p(D),Ct=N(B),pt=(Ct.utcOffset()-this.utcOffset())*i,wt=this-Ct,mt=function(){return P.m(et,Ct)};switch(J){case d:X=mt()/12;break;case u:X=mt();break;case p:X=mt()/3;break;case h:X=(wt-pt)/6048e5;break;case c:X=(wt-pt)/864e5;break;case l:X=wt/a;break;case s:X=wt/i;break;case o:X=wt/r;break;default:X=wt}return F?X:P.a(X)},E.daysInMonth=function(){return this.endOf(u).$D},E.$locale=function(){return _[this.$L]},E.locale=function(B,D){if(!B)return this.$L;var F=this.clone(),X=V(B,D,!0);return X&&(F.$L=X),F},E.clone=function(){return P.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},$}(),q=Y.prototype;return N.prototype=q,[["$ms",n],["$s",o],["$m",s],["$H",l],["$W",c],["$M",u],["$y",d],["$D",f]].forEach(function($){q[$[1]]=function(E){return this.$g(E,$[0],$[1])}}),N.extend=function($,E){return $.$i||($(E,Y,N),$.$i=!0),N},N.locale=V,N.isDayjs=I,N.unix=function($){return N(1e3*$)},N.en=_[T],N.Ls=_,N.p={},N})}(ns)),ns.exports}var F0=$0();const P0=B0(F0),ss={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e),hsl2rgb:({h:e,s:t,l:r},i)=>{if(!t)return r*2.55;e/=360,t/=100,r/=100;const a=r<.5?r*(1+t):r+t-r*t,n=2*r-a;switch(i){case"r":return ss.hue2rgb(n,a,e+1/3)*255;case"g":return ss.hue2rgb(n,a,e)*255;case"b":return ss.hue2rgb(n,a,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:r},i)=>{e/=255,t/=255,r/=255;const a=Math.max(e,t,r),n=Math.min(e,t,r),o=(a+n)/2;if(i==="l")return o*100;if(a===n)return 0;const s=a-n,l=o>.5?s/(2-a-n):s/(a+n);if(i==="s")return l*100;switch(a){case e:return((t-r)/s+(t<r?6:0))*60;case t:return((r-e)/s+2)*60;case r:return((e-t)/s+4)*60;default:return-1}}},R0={clamp:(e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},D0={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},dt={channel:ss,lang:R0,unit:D0},Sr={};for(let e=0;e<=255;e++)Sr[e]=dt.unit.dec2hex(e);const ie={ALL:0,RGB:1,HSL:2};class O0{constructor(){this.type=ie.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=ie.ALL}is(t){return this.type===t}}class I0{constructor(t,r){this.color=r,this.changed=!1,this.data=t,this.type=new O0}set(t,r){return this.color=r,this.changed=!1,this.data=t,this.type.type=ie.ALL,this}_ensureHSL(){const t=this.data,{h:r,s:i,l:a}=t;r===void 0&&(t.h=dt.channel.rgb2hsl(t,"h")),i===void 0&&(t.s=dt.channel.rgb2hsl(t,"s")),a===void 0&&(t.l=dt.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r,g:i,b:a}=t;r===void 0&&(t.r=dt.channel.hsl2rgb(t,"r")),i===void 0&&(t.g=dt.channel.hsl2rgb(t,"g")),a===void 0&&(t.b=dt.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,r=t.r;return!this.type.is(ie.HSL)&&r!==void 0?r:(this._ensureHSL(),dt.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,r=t.g;return!this.type.is(ie.HSL)&&r!==void 0?r:(this._ensureHSL(),dt.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,r=t.b;return!this.type.is(ie.HSL)&&r!==void 0?r:(this._ensureHSL(),dt.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,r=t.h;return!this.type.is(ie.RGB)&&r!==void 0?r:(this._ensureRGB(),dt.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,r=t.s;return!this.type.is(ie.RGB)&&r!==void 0?r:(this._ensureRGB(),dt.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,r=t.l;return!this.type.is(ie.RGB)&&r!==void 0?r:(this._ensureRGB(),dt.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(ie.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(ie.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(ie.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(ie.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(ie.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(ie.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const ro=new I0({r:0,g:0,b:0,a:0},"transparent"),qi={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(qi.re);if(!t)return;const r=t[1],i=parseInt(r,16),a=r.length,n=a%4===0,o=a>4,s=o?1:17,l=o?8:4,c=n?0:-1,h=o?255:15;return ro.set({r:(i>>l*(c+3)&h)*s,g:(i>>l*(c+2)&h)*s,b:(i>>l*(c+1)&h)*s,a:n?(i&h)*s/255:1},e)},stringify:e=>{const{r:t,g:r,b:i,a}=e;return a<1?`#${Sr[Math.round(t)]}${Sr[Math.round(r)]}${Sr[Math.round(i)]}${Sr[Math.round(a*255)]}`:`#${Sr[Math.round(t)]}${Sr[Math.round(r)]}${Sr[Math.round(i)]}`}},Gr={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(Gr.hueRe);if(t){const[,r,i]=t;switch(i){case"grad":return dt.channel.clamp.h(parseFloat(r)*.9);case"rad":return dt.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return dt.channel.clamp.h(parseFloat(r)*360)}}return dt.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const r=e.match(Gr.re);if(!r)return;const[,i,a,n,o,s]=r;return ro.set({h:Gr._hue2deg(i),s:dt.channel.clamp.s(parseFloat(a)),l:dt.channel.clamp.l(parseFloat(n)),a:o?dt.channel.clamp.a(s?parseFloat(o)/100:parseFloat(o)):1},e)},stringify:e=>{const{h:t,s:r,l:i,a}=e;return a<1?`hsla(${dt.lang.round(t)}, ${dt.lang.round(r)}%, ${dt.lang.round(i)}%, ${a})`:`hsl(${dt.lang.round(t)}, ${dt.lang.round(r)}%, ${dt.lang.round(i)}%)`}},tn={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=tn.colors[e];if(t)return qi.parse(t)},stringify:e=>{const t=qi.stringify(e);for(const r in tn.colors)if(tn.colors[r]===t)return r}},Ya={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const r=e.match(Ya.re);if(!r)return;const[,i,a,n,o,s,l,c,h]=r;return ro.set({r:dt.channel.clamp.r(a?parseFloat(i)*2.55:parseFloat(i)),g:dt.channel.clamp.g(o?parseFloat(n)*2.55:parseFloat(n)),b:dt.channel.clamp.b(l?parseFloat(s)*2.55:parseFloat(s)),a:c?dt.channel.clamp.a(h?parseFloat(c)/100:parseFloat(c)):1},e)},stringify:e=>{const{r:t,g:r,b:i,a}=e;return a<1?`rgba(${dt.lang.round(t)}, ${dt.lang.round(r)}, ${dt.lang.round(i)}, ${dt.lang.round(a)})`:`rgb(${dt.lang.round(t)}, ${dt.lang.round(r)}, ${dt.lang.round(i)})`}},Je={format:{keyword:tn,hex:qi,rgb:Ya,rgba:Ya,hsl:Gr,hsla:Gr},parse:e=>{if(typeof e!="string")return e;const t=qi.parse(e)||Ya.parse(e)||Gr.parse(e)||tn.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(ie.HSL)||e.data.r===void 0?Gr.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Ya.stringify(e):qi.stringify(e)},Gu=(e,t)=>{const r=Je.parse(e);for(const i in t)r[i]=dt.channel.clamp[i](t[i]);return Je.stringify(r)},en=(e,t,r=0,i=1)=>{if(typeof e!="number")return Gu(e,{a:t});const a=ro.set({r:dt.channel.clamp.r(e),g:dt.channel.clamp.g(t),b:dt.channel.clamp.b(r),a:dt.channel.clamp.a(i)});return Je.stringify(a)},N0=e=>{const{r:t,g:r,b:i}=Je.parse(e),a=.2126*dt.channel.toLinear(t)+.7152*dt.channel.toLinear(r)+.0722*dt.channel.toLinear(i);return dt.lang.round(a)},q0=e=>N0(e)>=.5,xn=e=>!q0(e),Xu=(e,t,r)=>{const i=Je.parse(e),a=i[t],n=dt.channel.clamp[t](a+r);return a!==n&&(i[t]=n),Je.stringify(i)},K=(e,t)=>Xu(e,"l",t),ct=(e,t)=>Xu(e,"l",-t),L=(e,t)=>{const r=Je.parse(e),i={};for(const a in t)t[a]&&(i[a]=r[a]+t[a]);return Gu(e,i)},z0=(e,t,r=50)=>{const{r:i,g:a,b:n,a:o}=Je.parse(e),{r:s,g:l,b:c,a:h}=Je.parse(t),u=r/100,p=u*2-1,d=o-h,m=((p*d===-1?p:(p+d)/(1+p*d))+1)/2,y=1-m,b=i*m+s*y,v=a*m+l*y,k=n*m+c*y,M=o*u+h*(1-u);return en(b,v,k,M)},G=(e,t=100)=>{const r=Je.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,z0(r,e,t)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Zu,setPrototypeOf:fh,isFrozen:W0,getPrototypeOf:H0,getOwnPropertyDescriptor:j0}=Object;let{freeze:fe,seal:$e,create:Ku}=Object,{apply:sl,construct:ol}=typeof Reflect<"u"&&Reflect;fe||(fe=function(t){return t});$e||($e=function(t){return t});sl||(sl=function(t,r,i){return t.apply(r,i)});ol||(ol=function(t,r){return new t(...r)});const Gn=ge(Array.prototype.forEach),V0=ge(Array.prototype.lastIndexOf),gh=ge(Array.prototype.pop),Pa=ge(Array.prototype.push),U0=ge(Array.prototype.splice),os=ge(String.prototype.toLowerCase),No=ge(String.prototype.toString),mh=ge(String.prototype.match),Ra=ge(String.prototype.replace),Y0=ge(String.prototype.indexOf),G0=ge(String.prototype.trim),Oe=ge(Object.prototype.hasOwnProperty),ce=ge(RegExp.prototype.test),Da=X0(TypeError);function ge(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return sl(e,t,i)}}function X0(e){return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return ol(e,r)}}function bt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:os;fh&&fh(e,null);let i=t.length;for(;i--;){let a=t[i];if(typeof a=="string"){const n=r(a);n!==a&&(W0(t)||(t[i]=n),a=n)}e[a]=!0}return e}function Z0(e){for(let t=0;t<e.length;t++)Oe(e,t)||(e[t]=null);return e}function or(e){const t=Ku(null);for(const[r,i]of Zu(e))Oe(e,r)&&(Array.isArray(i)?t[r]=Z0(i):i&&typeof i=="object"&&i.constructor===Object?t[r]=or(i):t[r]=i);return t}function Oa(e,t){for(;e!==null;){const i=j0(e,t);if(i){if(i.get)return ge(i.get);if(typeof i.value=="function")return ge(i.value)}e=H0(e)}function r(){return null}return r}const yh=fe(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qo=fe(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),zo=fe(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),K0=fe(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Wo=fe(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Q0=fe(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),bh=fe(["#text"]),xh=fe(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ho=fe(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),vh=fe(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Xn=fe(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),J0=$e(/\{\{[\w\W]*|[\w\W]*\}\}/gm),tb=$e(/<%[\w\W]*|[\w\W]*%>/gm),eb=$e(/\$\{[\w\W]*/gm),rb=$e(/^data-[\-\w.\u00B7-\uFFFF]+$/),ib=$e(/^aria-[\-\w]+$/),Qu=$e(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ab=$e(/^(?:\w+script|data):/i),nb=$e(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ju=$e(/^html$/i),sb=$e(/^[a-z][.\w]*(-[.\w]+)+$/i);var _h=Object.freeze({__proto__:null,ARIA_ATTR:ib,ATTR_WHITESPACE:nb,CUSTOM_ELEMENT:sb,DATA_ATTR:rb,DOCTYPE_NAME:Ju,ERB_EXPR:tb,IS_ALLOWED_URI:Qu,IS_SCRIPT_OR_DATA:ab,MUSTACHE_EXPR:J0,TMPLIT_EXPR:eb});const Ia={element:1,text:3,progressingInstruction:7,comment:8,document:9},ob=function(){return typeof window>"u"?null:window},lb=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let i=null;const a="data-tt-policy-suffix";r&&r.hasAttribute(a)&&(i=r.getAttribute(a));const n="dompurify"+(i?"#"+i:"");try{return t.createPolicy(n,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+n+" could not be created."),null}},wh=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function tp(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ob();const t=w=>tp(w);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==Ia.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const i=r,a=i.currentScript,{DocumentFragment:n,HTMLTemplateElement:o,Node:s,Element:l,NodeFilter:c,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:u,DOMParser:p,trustedTypes:d}=e,f=l.prototype,m=Oa(f,"cloneNode"),y=Oa(f,"remove"),b=Oa(f,"nextSibling"),v=Oa(f,"childNodes"),k=Oa(f,"parentNode");if(typeof o=="function"){const w=r.createElement("template");w.content&&w.content.ownerDocument&&(r=w.content.ownerDocument)}let M,T="";const{implementation:_,createNodeIterator:S,createDocumentFragment:I,getElementsByTagName:V}=r,{importNode:N}=i;let P=wh();t.isSupported=typeof Zu=="function"&&typeof k=="function"&&_&&_.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Y,ERB_EXPR:q,TMPLIT_EXPR:$,DATA_ATTR:E,ARIA_ATTR:B,IS_SCRIPT_OR_DATA:D,ATTR_WHITESPACE:F,CUSTOM_ELEMENT:X}=_h;let{IS_ALLOWED_URI:et}=_h,J=null;const Ct=bt({},[...yh,...qo,...zo,...Wo,...bh]);let pt=null;const wt=bt({},[...xh,...Ho,...vh,...Xn]);let mt=Object.seal(Ku(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),gt=null,yt=null,Ft=!0,Pt=!0,Tt=!1,zt=!0,Yt=!1,Te=!0,Jt=!1,di=!1,Rr=!1,We=!1,Dr=!1,fi=!1,da=!0,gi=!1;const Bn="user-content-";let Or=!0,xr=!1,He={},je=null;const fa=bt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let mi=null;const yi=bt({},["audio","video","img","source","image","track"]);let bi=null;const ga=bt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xi="http://www.w3.org/1998/Math/MathML",Ir="http://www.w3.org/2000/svg",Me="http://www.w3.org/1999/xhtml";let Ve=Me,Nr=!1,vi=null;const ma=bt({},[xi,Ir,Me],No);let vr=bt({},["mi","mo","mn","ms","mtext"]),qr=bt({},["annotation-xml"]);const ya=bt({},["title","style","font","a","script"]);let _r=null;const Bo=["application/xhtml+xml","text/html"],En="text/html";let jt=null,ir=null;const ba=r.createElement("form"),xa=function(x){return x instanceof RegExp||x instanceof Function},va=function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ir&&ir===x)){if((!x||typeof x!="object")&&(x={}),x=or(x),_r=Bo.indexOf(x.PARSER_MEDIA_TYPE)===-1?En:x.PARSER_MEDIA_TYPE,jt=_r==="application/xhtml+xml"?No:os,J=Oe(x,"ALLOWED_TAGS")?bt({},x.ALLOWED_TAGS,jt):Ct,pt=Oe(x,"ALLOWED_ATTR")?bt({},x.ALLOWED_ATTR,jt):wt,vi=Oe(x,"ALLOWED_NAMESPACES")?bt({},x.ALLOWED_NAMESPACES,No):ma,bi=Oe(x,"ADD_URI_SAFE_ATTR")?bt(or(ga),x.ADD_URI_SAFE_ATTR,jt):ga,mi=Oe(x,"ADD_DATA_URI_TAGS")?bt(or(yi),x.ADD_DATA_URI_TAGS,jt):yi,je=Oe(x,"FORBID_CONTENTS")?bt({},x.FORBID_CONTENTS,jt):fa,gt=Oe(x,"FORBID_TAGS")?bt({},x.FORBID_TAGS,jt):or({}),yt=Oe(x,"FORBID_ATTR")?bt({},x.FORBID_ATTR,jt):or({}),He=Oe(x,"USE_PROFILES")?x.USE_PROFILES:!1,Ft=x.ALLOW_ARIA_ATTR!==!1,Pt=x.ALLOW_DATA_ATTR!==!1,Tt=x.ALLOW_UNKNOWN_PROTOCOLS||!1,zt=x.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Yt=x.SAFE_FOR_TEMPLATES||!1,Te=x.SAFE_FOR_XML!==!1,Jt=x.WHOLE_DOCUMENT||!1,We=x.RETURN_DOM||!1,Dr=x.RETURN_DOM_FRAGMENT||!1,fi=x.RETURN_TRUSTED_TYPE||!1,Rr=x.FORCE_BODY||!1,da=x.SANITIZE_DOM!==!1,gi=x.SANITIZE_NAMED_PROPS||!1,Or=x.KEEP_CONTENT!==!1,xr=x.IN_PLACE||!1,et=x.ALLOWED_URI_REGEXP||Qu,Ve=x.NAMESPACE||Me,vr=x.MATHML_TEXT_INTEGRATION_POINTS||vr,qr=x.HTML_INTEGRATION_POINTS||qr,mt=x.CUSTOM_ELEMENT_HANDLING||{},x.CUSTOM_ELEMENT_HANDLING&&xa(x.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(mt.tagNameCheck=x.CUSTOM_ELEMENT_HANDLING.tagNameCheck),x.CUSTOM_ELEMENT_HANDLING&&xa(x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(mt.attributeNameCheck=x.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),x.CUSTOM_ELEMENT_HANDLING&&typeof x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(mt.allowCustomizedBuiltInElements=x.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Yt&&(Pt=!1),Dr&&(We=!0),He&&(J=bt({},bh),pt=[],He.html===!0&&(bt(J,yh),bt(pt,xh)),He.svg===!0&&(bt(J,qo),bt(pt,Ho),bt(pt,Xn)),He.svgFilters===!0&&(bt(J,zo),bt(pt,Ho),bt(pt,Xn)),He.mathMl===!0&&(bt(J,Wo),bt(pt,vh),bt(pt,Xn))),x.ADD_TAGS&&(J===Ct&&(J=or(J)),bt(J,x.ADD_TAGS,jt)),x.ADD_ATTR&&(pt===wt&&(pt=or(pt)),bt(pt,x.ADD_ATTR,jt)),x.ADD_URI_SAFE_ATTR&&bt(bi,x.ADD_URI_SAFE_ATTR,jt),x.FORBID_CONTENTS&&(je===fa&&(je=or(je)),bt(je,x.FORBID_CONTENTS,jt)),Or&&(J["#text"]=!0),Jt&&bt(J,["html","head","body"]),J.table&&(bt(J,["tbody"]),delete gt.tbody),x.TRUSTED_TYPES_POLICY){if(typeof x.TRUSTED_TYPES_POLICY.createHTML!="function")throw Da('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof x.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Da('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');M=x.TRUSTED_TYPES_POLICY,T=M.createHTML("")}else M===void 0&&(M=lb(d,a)),M!==null&&typeof T=="string"&&(T=M.createHTML(""));fe&&fe(x),ir=x}},$n=bt({},[...qo,...zo,...K0]),_a=bt({},[...Wo,...Q0]),Eo=function(x){let A=k(x);(!A||!A.tagName)&&(A={namespaceURI:Ve,tagName:"template"});const R=os(x.tagName),j=os(A.tagName);return vi[x.namespaceURI]?x.namespaceURI===Ir?A.namespaceURI===Me?R==="svg":A.namespaceURI===xi?R==="svg"&&(j==="annotation-xml"||vr[j]):!!$n[R]:x.namespaceURI===xi?A.namespaceURI===Me?R==="math":A.namespaceURI===Ir?R==="math"&&qr[j]:!!_a[R]:x.namespaceURI===Me?A.namespaceURI===Ir&&!qr[j]||A.namespaceURI===xi&&!vr[j]?!1:!_a[R]&&(ya[R]||!$n[R]):!!(_r==="application/xhtml+xml"&&vi[x.namespaceURI]):!1},_e=function(x){Pa(t.removed,{element:x});try{k(x).removeChild(x)}catch{y(x)}},wr=function(x,A){try{Pa(t.removed,{attribute:A.getAttributeNode(x),from:A})}catch{Pa(t.removed,{attribute:null,from:A})}if(A.removeAttribute(x),x==="is")if(We||Dr)try{_e(A)}catch{}else try{A.setAttribute(x,"")}catch{}},wa=function(x){let A=null,R=null;if(Rr)x="<remove></remove>"+x;else{const lt=mh(x,/^[\r\n\t ]+/);R=lt&&lt[0]}_r==="application/xhtml+xml"&&Ve===Me&&(x='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+x+"</body></html>");const j=M?M.createHTML(x):x;if(Ve===Me)try{A=new p().parseFromString(j,_r)}catch{}if(!A||!A.documentElement){A=_.createDocument(Ve,"template",null);try{A.documentElement.innerHTML=Nr?T:j}catch{}}const at=A.body||A.documentElement;return x&&R&&at.insertBefore(r.createTextNode(R),at.childNodes[0]||null),Ve===Me?V.call(A,Jt?"html":"body")[0]:Jt?A.documentElement:at},Fn=function(x){return S.call(x.ownerDocument||x,x,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},_i=function(x){return x instanceof u&&(typeof x.nodeName!="string"||typeof x.textContent!="string"||typeof x.removeChild!="function"||!(x.attributes instanceof h)||typeof x.removeAttribute!="function"||typeof x.setAttribute!="function"||typeof x.namespaceURI!="string"||typeof x.insertBefore!="function"||typeof x.hasChildNodes!="function")},Pn=function(x){return typeof s=="function"&&x instanceof s};function Le(w,x,A){Gn(w,R=>{R.call(t,x,A,ir)})}const Rn=function(x){let A=null;if(Le(P.beforeSanitizeElements,x,null),_i(x))return _e(x),!0;const R=jt(x.nodeName);if(Le(P.uponSanitizeElement,x,{tagName:R,allowedTags:J}),Te&&x.hasChildNodes()&&!Pn(x.firstElementChild)&&ce(/<[/\w!]/g,x.innerHTML)&&ce(/<[/\w!]/g,x.textContent)||x.nodeType===Ia.progressingInstruction||Te&&x.nodeType===Ia.comment&&ce(/<[/\w]/g,x.data))return _e(x),!0;if(!J[R]||gt[R]){if(!gt[R]&&On(R)&&(mt.tagNameCheck instanceof RegExp&&ce(mt.tagNameCheck,R)||mt.tagNameCheck instanceof Function&&mt.tagNameCheck(R)))return!1;if(Or&&!je[R]){const j=k(x)||x.parentNode,at=v(x)||x.childNodes;if(at&&j){const lt=at.length;for(let xt=lt-1;xt>=0;--xt){const H=m(at[xt],!0);H.__removalCount=(x.__removalCount||0)+1,j.insertBefore(H,b(x))}}}return _e(x),!0}return x instanceof l&&!Eo(x)||(R==="noscript"||R==="noembed"||R==="noframes")&&ce(/<\/no(script|embed|frames)/i,x.innerHTML)?(_e(x),!0):(Yt&&x.nodeType===Ia.text&&(A=x.textContent,Gn([Y,q,$],j=>{A=Ra(A,j," ")}),x.textContent!==A&&(Pa(t.removed,{element:x.cloneNode()}),x.textContent=A)),Le(P.afterSanitizeElements,x,null),!1)},Dn=function(x,A,R){if(da&&(A==="id"||A==="name")&&(R in r||R in ba))return!1;if(!(Pt&&!yt[A]&&ce(E,A))){if(!(Ft&&ce(B,A))){if(!pt[A]||yt[A]){if(!(On(x)&&(mt.tagNameCheck instanceof RegExp&&ce(mt.tagNameCheck,x)||mt.tagNameCheck instanceof Function&&mt.tagNameCheck(x))&&(mt.attributeNameCheck instanceof RegExp&&ce(mt.attributeNameCheck,A)||mt.attributeNameCheck instanceof Function&&mt.attributeNameCheck(A))||A==="is"&&mt.allowCustomizedBuiltInElements&&(mt.tagNameCheck instanceof RegExp&&ce(mt.tagNameCheck,R)||mt.tagNameCheck instanceof Function&&mt.tagNameCheck(R))))return!1}else if(!bi[A]){if(!ce(et,Ra(R,F,""))){if(!((A==="src"||A==="xlink:href"||A==="href")&&x!=="script"&&Y0(R,"data:")===0&&mi[x])){if(!(Tt&&!ce(D,Ra(R,F,"")))){if(R)return!1}}}}}}return!0},On=function(x){return x!=="annotation-xml"&&mh(x,X)},In=function(x){Le(P.beforeSanitizeAttributes,x,null);const{attributes:A}=x;if(!A||_i(x))return;const R={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:pt,forceKeepAttr:void 0};let j=A.length;for(;j--;){const at=A[j],{name:lt,namespaceURI:xt,value:H}=at,Ot=jt(lt),Ht=H;let kt=lt==="value"?Ht:G0(Ht);if(R.attrName=Ot,R.attrValue=kt,R.keepAttr=!0,R.forceKeepAttr=void 0,Le(P.uponSanitizeAttribute,x,R),kt=R.attrValue,gi&&(Ot==="id"||Ot==="name")&&(wr(lt,x),kt=Bn+kt),Te&&ce(/((--!?|])>)|<\/(style|title)/i,kt)){wr(lt,x);continue}if(R.forceKeepAttr)continue;if(!R.keepAttr){wr(lt,x);continue}if(!zt&&ce(/\/>/i,kt)){wr(lt,x);continue}Yt&&Gn([Y,q,$],Ae=>{kt=Ra(kt,Ae," ")});const se=jt(x.nodeName);if(!Dn(se,Ot,kt)){wr(lt,x);continue}if(M&&typeof d=="object"&&typeof d.getAttributeType=="function"&&!xt)switch(d.getAttributeType(se,Ot)){case"TrustedHTML":{kt=M.createHTML(kt);break}case"TrustedScriptURL":{kt=M.createScriptURL(kt);break}}if(kt!==Ht)try{xt?x.setAttributeNS(xt,lt,kt):x.setAttribute(lt,kt),_i(x)?_e(x):gh(t.removed)}catch{wr(lt,x)}}Le(P.afterSanitizeAttributes,x,null)},$o=function w(x){let A=null;const R=Fn(x);for(Le(P.beforeSanitizeShadowDOM,x,null);A=R.nextNode();)Le(P.uponSanitizeShadowNode,A,null),Rn(A),In(A),A.content instanceof n&&w(A.content);Le(P.afterSanitizeShadowDOM,x,null)};return t.sanitize=function(w){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=null,R=null,j=null,at=null;if(Nr=!w,Nr&&(w="<!-->"),typeof w!="string"&&!Pn(w))if(typeof w.toString=="function"){if(w=w.toString(),typeof w!="string")throw Da("dirty is not a string, aborting")}else throw Da("toString is not a function");if(!t.isSupported)return w;if(di||va(x),t.removed=[],typeof w=="string"&&(xr=!1),xr){if(w.nodeName){const H=jt(w.nodeName);if(!J[H]||gt[H])throw Da("root node is forbidden and cannot be sanitized in-place")}}else if(w instanceof s)A=wa("<!---->"),R=A.ownerDocument.importNode(w,!0),R.nodeType===Ia.element&&R.nodeName==="BODY"||R.nodeName==="HTML"?A=R:A.appendChild(R);else{if(!We&&!Yt&&!Jt&&w.indexOf("<")===-1)return M&&fi?M.createHTML(w):w;if(A=wa(w),!A)return We?null:fi?T:""}A&&Rr&&_e(A.firstChild);const lt=Fn(xr?w:A);for(;j=lt.nextNode();)Rn(j),In(j),j.content instanceof n&&$o(j.content);if(xr)return w;if(We){if(Dr)for(at=I.call(A.ownerDocument);A.firstChild;)at.appendChild(A.firstChild);else at=A;return(pt.shadowroot||pt.shadowrootmode)&&(at=N.call(i,at,!0)),at}let xt=Jt?A.outerHTML:A.innerHTML;return Jt&&J["!doctype"]&&A.ownerDocument&&A.ownerDocument.doctype&&A.ownerDocument.doctype.name&&ce(Ju,A.ownerDocument.doctype.name)&&(xt="<!DOCTYPE "+A.ownerDocument.doctype.name+`>
`+xt),Yt&&Gn([Y,q,$],H=>{xt=Ra(xt,H," ")}),M&&fi?M.createHTML(xt):xt},t.setConfig=function(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};va(w),di=!0},t.clearConfig=function(){ir=null,di=!1},t.isValidAttribute=function(w,x,A){ir||va({});const R=jt(w),j=jt(x);return Dn(R,j,A)},t.addHook=function(w,x){typeof x=="function"&&Pa(P[w],x)},t.removeHook=function(w,x){if(x!==void 0){const A=V0(P[w],x);return A===-1?void 0:U0(P[w],A,1)[0]}return gh(P[w])},t.removeHooks=function(w){P[w]=[]},t.removeAllHooks=function(){P=wh()},t}var Ki=tp(),ep=Object.defineProperty,g=(e,t)=>ep(e,"name",{value:t,configurable:!0}),cb=(e,t)=>{for(var r in t)ep(e,r,{get:t[r],enumerable:!0})},nr={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},O={trace:g((...e)=>{},"trace"),debug:g((...e)=>{},"debug"),info:g((...e)=>{},"info"),warn:g((...e)=>{},"warn"),error:g((...e)=>{},"error"),fatal:g((...e)=>{},"fatal")},ic=g(function(e="fatal"){let t=nr.fatal;typeof e=="string"?e.toLowerCase()in nr&&(t=nr[e]):typeof e=="number"&&(t=e),O.trace=()=>{},O.debug=()=>{},O.info=()=>{},O.warn=()=>{},O.error=()=>{},O.fatal=()=>{},t<=nr.fatal&&(O.fatal=console.error?console.error.bind(console,Be("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Be("FATAL"))),t<=nr.error&&(O.error=console.error?console.error.bind(console,Be("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Be("ERROR"))),t<=nr.warn&&(O.warn=console.warn?console.warn.bind(console,Be("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Be("WARN"))),t<=nr.info&&(O.info=console.info?console.info.bind(console,Be("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Be("INFO"))),t<=nr.debug&&(O.debug=console.debug?console.debug.bind(console,Be("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Be("DEBUG"))),t<=nr.trace&&(O.trace=console.debug?console.debug.bind(console,Be("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Be("TRACE")))},"setLogLevel"),Be=g(e=>`%c${P0().format("ss.SSS")} : ${e} : `,"format"),rp=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,rn=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,hb=/\s*%%.*\n/gm,Hi,ip=(Hi=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},g(Hi,"UnknownDiagramError"),Hi),ei={},ac=g(function(e,t){e=e.replace(rp,"").replace(rn,"").replace(hb,`
`);for(const[r,{detector:i}]of Object.entries(ei))if(i(e,t))return r;throw new ip(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),ll=g((...e)=>{for(const{id:t,detector:r,loader:i}of e)ap(t,r,i)},"registerLazyLoadedDiagrams"),ap=g((e,t,r)=>{ei[e]&&O.warn(`Detector with key ${e} already exists. Overwriting.`),ei[e]={detector:t,loader:r},O.debug(`Detector with key ${e} added${r?" with loader":""}`)},"addDetector"),ub=g(e=>ei[e].loader,"getDiagramLoader"),cl=g((e,t,{depth:r=2,clobber:i=!1}={})=>{const a={depth:r,clobber:i};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(n=>cl(e,n,a)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(n=>{e.includes(n)||e.push(n)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(n=>{typeof t[n]=="object"&&(e[n]===void 0||typeof e[n]=="object")?(e[n]===void 0&&(e[n]=Array.isArray(t[n])?[]:{}),e[n]=cl(e[n],t[n],{depth:r-1,clobber:i})):(i||typeof e[n]!="object"&&typeof t[n]!="object")&&(e[n]=t[n])}),e)},"assignWithDepth"),re=cl,io="#ffffff",ao="#f2f2f2",he=g((e,t)=>t?L(e,{s:-40,l:10}):L(e,{s:-40,l:-10}),"mkBorder"),ji,pb=(ji=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var r,i,a,n,o,s,l,c,h,u,p,d,f,m,y,b,v,k,M,T,_;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||L(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||L(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||he(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||he(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||he(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||he(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||G(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||G(this.tertiaryColor),this.lineColor=this.lineColor||G(this.background),this.arrowheadColor=this.arrowheadColor||G(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?ct(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||ct(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||G(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||K(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||ct(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||ct(this.mainBkg,10)):(this.rowOdd=this.rowOdd||K(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||K(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||L(this.primaryColor,{h:30}),this.cScale4=this.cScale4||L(this.primaryColor,{h:60}),this.cScale5=this.cScale5||L(this.primaryColor,{h:90}),this.cScale6=this.cScale6||L(this.primaryColor,{h:120}),this.cScale7=this.cScale7||L(this.primaryColor,{h:150}),this.cScale8=this.cScale8||L(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||L(this.primaryColor,{h:270}),this.cScale10=this.cScale10||L(this.primaryColor,{h:300}),this.cScale11=this.cScale11||L(this.primaryColor,{h:330}),this.darkMode)for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScale"+S]=ct(this["cScale"+S],75);else for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScale"+S]=ct(this["cScale"+S],25);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleInv"+S]=this["cScaleInv"+S]||G(this["cScale"+S]);for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this.darkMode?this["cScalePeer"+S]=this["cScalePeer"+S]||K(this["cScale"+S],10):this["cScalePeer"+S]=this["cScalePeer"+S]||ct(this["cScale"+S],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let S=0;S<this.THEME_COLOR_LIMIT;S++)this["cScaleLabel"+S]=this["cScaleLabel"+S]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let S=0;S<5;S++)this["surface"+S]=this["surface"+S]||L(this.mainBkg,{h:180,s:-15,l:t*(5+S*3)}),this["surfacePeer"+S]=this["surfacePeer"+S]||L(this.mainBkg,{h:180,s:-15,l:t*(8+S*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||L(this.primaryColor,{h:64}),this.fillType3=this.fillType3||L(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||L(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||L(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||L(this.primaryColor,{h:128}),this.fillType7=this.fillType7||L(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||L(this.primaryColor,{l:-10}),this.pie5=this.pie5||L(this.secondaryColor,{l:-10}),this.pie6=this.pie6||L(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||L(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||L(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||L(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||L(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||L(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||L(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:((r=this.radar)==null?void 0:r.axisColor)||this.lineColor,axisStrokeWidth:((i=this.radar)==null?void 0:i.axisStrokeWidth)||2,axisLabelFontSize:((a=this.radar)==null?void 0:a.axisLabelFontSize)||12,curveOpacity:((n=this.radar)==null?void 0:n.curveOpacity)||.5,curveStrokeWidth:((o=this.radar)==null?void 0:o.curveStrokeWidth)||2,graticuleColor:((s=this.radar)==null?void 0:s.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((l=this.radar)==null?void 0:l.graticuleStrokeWidth)||1,graticuleOpacity:((c=this.radar)==null?void 0:c.graticuleOpacity)||.3,legendBoxSize:((h=this.radar)==null?void 0:h.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||L(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||L(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||L(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||L(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||L(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||L(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||xn(this.quadrant1Fill)?K(this.quadrant1Fill):ct(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((p=this.xyChart)==null?void 0:p.backgroundColor)||this.background,titleColor:((d=this.xyChart)==null?void 0:d.titleColor)||this.primaryTextColor,xAxisTitleColor:((f=this.xyChart)==null?void 0:f.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((m=this.xyChart)==null?void 0:m.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((y=this.xyChart)==null?void 0:y.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((b=this.xyChart)==null?void 0:b.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((v=this.xyChart)==null?void 0:v.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((k=this.xyChart)==null?void 0:k.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((M=this.xyChart)==null?void 0:M.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((T=this.xyChart)==null?void 0:T.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((_=this.xyChart)==null?void 0:_.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ct(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||L(this.primaryColor,{h:-30}),this.git4=this.git4||L(this.primaryColor,{h:-60}),this.git5=this.git5||L(this.primaryColor,{h:-90}),this.git6=this.git6||L(this.primaryColor,{h:60}),this.git7=this.git7||L(this.primaryColor,{h:120}),this.darkMode?(this.git0=K(this.git0,25),this.git1=K(this.git1,25),this.git2=K(this.git2,25),this.git3=K(this.git3,25),this.git4=K(this.git4,25),this.git5=K(this.git5,25),this.git6=K(this.git6,25),this.git7=K(this.git7,25)):(this.git0=ct(this.git0,25),this.git1=ct(this.git1,25),this.git2=ct(this.git2,25),this.git3=ct(this.git3,25),this.git4=ct(this.git4,25),this.git5=ct(this.git5,25),this.git6=ct(this.git6,25),this.git7=ct(this.git7,25)),this.gitInv0=this.gitInv0||G(this.git0),this.gitInv1=this.gitInv1||G(this.git1),this.gitInv2=this.gitInv2||G(this.git2),this.gitInv3=this.gitInv3||G(this.git3),this.gitInv4=this.gitInv4||G(this.git4),this.gitInv5=this.gitInv5||G(this.git5),this.gitInv6=this.gitInv6||G(this.git6),this.gitInv7=this.gitInv7||G(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||io,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ao}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},g(ji,"Theme"),ji),db=g(e=>{const t=new pb;return t.calculate(e),t},"getThemeVariables"),Vi,fb=(Vi=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=K(this.primaryColor,16),this.tertiaryColor=L(this.primaryColor,{h:-160}),this.primaryBorderColor=G(this.background),this.secondaryBorderColor=he(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=he(this.tertiaryColor,this.darkMode),this.primaryTextColor=G(this.primaryColor),this.secondaryTextColor=G(this.secondaryColor),this.tertiaryTextColor=G(this.tertiaryColor),this.lineColor=G(this.background),this.textColor=G(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=K(G("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=en(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=ct("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=ct(this.sectionBkgColor,10),this.taskBorderColor=en(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=en(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||K(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||ct(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,r,i,a,n,o,s,l,c,h,u,p,d,f,m,y,b,v,k,M,T;this.secondBkg=K(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=K(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=K(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=L(this.primaryColor,{h:64}),this.fillType3=L(this.secondaryColor,{h:64}),this.fillType4=L(this.primaryColor,{h:-64}),this.fillType5=L(this.secondaryColor,{h:-64}),this.fillType6=L(this.primaryColor,{h:128}),this.fillType7=L(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||L(this.primaryColor,{h:30}),this.cScale4=this.cScale4||L(this.primaryColor,{h:60}),this.cScale5=this.cScale5||L(this.primaryColor,{h:90}),this.cScale6=this.cScale6||L(this.primaryColor,{h:120}),this.cScale7=this.cScale7||L(this.primaryColor,{h:150}),this.cScale8=this.cScale8||L(this.primaryColor,{h:210}),this.cScale9=this.cScale9||L(this.primaryColor,{h:270}),this.cScale10=this.cScale10||L(this.primaryColor,{h:300}),this.cScale11=this.cScale11||L(this.primaryColor,{h:330});for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleInv"+_]=this["cScaleInv"+_]||G(this["cScale"+_]);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScalePeer"+_]=this["cScalePeer"+_]||K(this["cScale"+_],10);for(let _=0;_<5;_++)this["surface"+_]=this["surface"+_]||L(this.mainBkg,{h:30,s:-30,l:-(-10+_*4)}),this["surfacePeer"+_]=this["surfacePeer"+_]||L(this.mainBkg,{h:30,s:-30,l:-(-7+_*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleLabel"+_]=this["cScaleLabel"+_]||this.scaleLabelColor;for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["pie"+_]=this["cScale"+_];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||L(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||L(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||L(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||L(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||L(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||L(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||xn(this.quadrant1Fill)?K(this.quadrant1Fill):ct(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((a=this.xyChart)==null?void 0:a.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((s=this.xyChart)==null?void 0:s.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:((p=this.radar)==null?void 0:p.axisColor)||this.lineColor,axisStrokeWidth:((d=this.radar)==null?void 0:d.axisStrokeWidth)||2,axisLabelFontSize:((f=this.radar)==null?void 0:f.axisLabelFontSize)||12,curveOpacity:((m=this.radar)==null?void 0:m.curveOpacity)||.5,curveStrokeWidth:((y=this.radar)==null?void 0:y.curveStrokeWidth)||2,graticuleColor:((b=this.radar)==null?void 0:b.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((v=this.radar)==null?void 0:v.graticuleStrokeWidth)||1,graticuleOpacity:((k=this.radar)==null?void 0:k.graticuleOpacity)||.3,legendBoxSize:((M=this.radar)==null?void 0:M.legendBoxSize)||12,legendFontSize:((T=this.radar)==null?void 0:T.legendFontSize)||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ct(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=K(this.secondaryColor,20),this.git1=K(this.pie2||this.secondaryColor,20),this.git2=K(this.pie3||this.tertiaryColor,20),this.git3=K(this.pie4||L(this.primaryColor,{h:-30}),20),this.git4=K(this.pie5||L(this.primaryColor,{h:-60}),20),this.git5=K(this.pie6||L(this.primaryColor,{h:-90}),10),this.git6=K(this.pie7||L(this.primaryColor,{h:60}),10),this.git7=K(this.pie8||L(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||G(this.git0),this.gitInv1=this.gitInv1||G(this.git1),this.gitInv2=this.gitInv2||G(this.git2),this.gitInv3=this.gitInv3||G(this.git3),this.gitInv4=this.gitInv4||G(this.git4),this.gitInv5=this.gitInv5||G(this.git5),this.gitInv6=this.gitInv6||G(this.git6),this.gitInv7=this.gitInv7||G(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||G(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||G(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||K(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||K(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},g(Vi,"Theme"),Vi),gb=g(e=>{const t=new fb;return t.calculate(e),t},"getThemeVariables"),Ui,mb=(Ui=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=L(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=L(this.primaryColor,{h:-160}),this.primaryBorderColor=he(this.primaryColor,this.darkMode),this.secondaryBorderColor=he(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=he(this.tertiaryColor,this.darkMode),this.primaryTextColor=G(this.primaryColor),this.secondaryTextColor=G(this.secondaryColor),this.tertiaryTextColor=G(this.tertiaryColor),this.lineColor=G(this.background),this.textColor=G(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=en(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,r,i,a,n,o,s,l,c,h,u,p,d,f,m,y,b,v,k,M,T;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||L(this.primaryColor,{h:30}),this.cScale4=this.cScale4||L(this.primaryColor,{h:60}),this.cScale5=this.cScale5||L(this.primaryColor,{h:90}),this.cScale6=this.cScale6||L(this.primaryColor,{h:120}),this.cScale7=this.cScale7||L(this.primaryColor,{h:150}),this.cScale8=this.cScale8||L(this.primaryColor,{h:210}),this.cScale9=this.cScale9||L(this.primaryColor,{h:270}),this.cScale10=this.cScale10||L(this.primaryColor,{h:300}),this.cScale11=this.cScale11||L(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ct(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ct(this.tertiaryColor,40);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScale"+_]=ct(this["cScale"+_],10),this["cScalePeer"+_]=this["cScalePeer"+_]||ct(this["cScale"+_],25);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleInv"+_]=this["cScaleInv"+_]||L(this["cScale"+_],{h:180});for(let _=0;_<5;_++)this["surface"+_]=this["surface"+_]||L(this.mainBkg,{h:30,l:-(5+_*5)}),this["surfacePeer"+_]=this["surfacePeer"+_]||L(this.mainBkg,{h:30,l:-(7+_*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||G(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||G(this.labelTextColor);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleLabel"+_]=this["cScaleLabel"+_]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=K(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||K(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||K(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=L(this.primaryColor,{h:64}),this.fillType3=L(this.secondaryColor,{h:64}),this.fillType4=L(this.primaryColor,{h:-64}),this.fillType5=L(this.secondaryColor,{h:-64}),this.fillType6=L(this.primaryColor,{h:128}),this.fillType7=L(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||L(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||L(this.primaryColor,{l:-10}),this.pie5=this.pie5||L(this.secondaryColor,{l:-30}),this.pie6=this.pie6||L(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||L(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||L(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||L(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||L(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||L(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||L(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||L(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||L(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||L(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||L(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||L(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||L(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||xn(this.quadrant1Fill)?K(this.quadrant1Fill):ct(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((a=this.radar)==null?void 0:a.curveOpacity)||.5,curveStrokeWidth:((n=this.radar)==null?void 0:n.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((s=this.radar)==null?void 0:s.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((u=this.xyChart)==null?void 0:u.backgroundColor)||this.background,titleColor:((p=this.xyChart)==null?void 0:p.titleColor)||this.primaryTextColor,xAxisTitleColor:((d=this.xyChart)==null?void 0:d.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((f=this.xyChart)==null?void 0:f.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((y=this.xyChart)==null?void 0:y.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((v=this.xyChart)==null?void 0:v.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((k=this.xyChart)==null?void 0:k.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((M=this.xyChart)==null?void 0:M.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((T=this.xyChart)==null?void 0:T.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||L(this.primaryColor,{h:-30}),this.git4=this.git4||L(this.primaryColor,{h:-60}),this.git5=this.git5||L(this.primaryColor,{h:-90}),this.git6=this.git6||L(this.primaryColor,{h:60}),this.git7=this.git7||L(this.primaryColor,{h:120}),this.darkMode?(this.git0=K(this.git0,25),this.git1=K(this.git1,25),this.git2=K(this.git2,25),this.git3=K(this.git3,25),this.git4=K(this.git4,25),this.git5=K(this.git5,25),this.git6=K(this.git6,25),this.git7=K(this.git7,25)):(this.git0=ct(this.git0,25),this.git1=ct(this.git1,25),this.git2=ct(this.git2,25),this.git3=ct(this.git3,25),this.git4=ct(this.git4,25),this.git5=ct(this.git5,25),this.git6=ct(this.git6,25),this.git7=ct(this.git7,25)),this.gitInv0=this.gitInv0||ct(G(this.git0),25),this.gitInv1=this.gitInv1||G(this.git1),this.gitInv2=this.gitInv2||G(this.git2),this.gitInv3=this.gitInv3||G(this.git3),this.gitInv4=this.gitInv4||G(this.git4),this.gitInv5=this.gitInv5||G(this.git5),this.gitInv6=this.gitInv6||G(this.git6),this.gitInv7=this.gitInv7||G(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||G(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||G(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||io,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ao}calculate(t){if(Object.keys(this).forEach(i=>{this[i]==="calculated"&&(this[i]=void 0)}),typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},g(Ui,"Theme"),Ui),yb=g(e=>{const t=new mb;return t.calculate(e),t},"getThemeVariables"),Yi,bb=(Yi=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=K("#cde498",10),this.primaryBorderColor=he(this.primaryColor,this.darkMode),this.secondaryBorderColor=he(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=he(this.tertiaryColor,this.darkMode),this.primaryTextColor=G(this.primaryColor),this.secondaryTextColor=G(this.secondaryColor),this.tertiaryTextColor=G(this.primaryColor),this.lineColor=G(this.background),this.textColor=G(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,i,a,n,o,s,l,c,h,u,p,d,f,m,y,b,v,k,M,T;this.actorBorder=ct(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||L(this.primaryColor,{h:30}),this.cScale4=this.cScale4||L(this.primaryColor,{h:60}),this.cScale5=this.cScale5||L(this.primaryColor,{h:90}),this.cScale6=this.cScale6||L(this.primaryColor,{h:120}),this.cScale7=this.cScale7||L(this.primaryColor,{h:150}),this.cScale8=this.cScale8||L(this.primaryColor,{h:210}),this.cScale9=this.cScale9||L(this.primaryColor,{h:270}),this.cScale10=this.cScale10||L(this.primaryColor,{h:300}),this.cScale11=this.cScale11||L(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ct(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ct(this.tertiaryColor,40);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScale"+_]=ct(this["cScale"+_],10),this["cScalePeer"+_]=this["cScalePeer"+_]||ct(this["cScale"+_],25);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleInv"+_]=this["cScaleInv"+_]||L(this["cScale"+_],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleLabel"+_]=this["cScaleLabel"+_]||this.scaleLabelColor;for(let _=0;_<5;_++)this["surface"+_]=this["surface"+_]||L(this.mainBkg,{h:30,s:-30,l:-(5+_*5)}),this["surfacePeer"+_]=this["surfacePeer"+_]||L(this.mainBkg,{h:30,s:-30,l:-(8+_*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||K(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||K(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=L(this.primaryColor,{h:64}),this.fillType3=L(this.secondaryColor,{h:64}),this.fillType4=L(this.primaryColor,{h:-64}),this.fillType5=L(this.secondaryColor,{h:-64}),this.fillType6=L(this.primaryColor,{h:128}),this.fillType7=L(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||L(this.primaryColor,{l:-30}),this.pie5=this.pie5||L(this.secondaryColor,{l:-30}),this.pie6=this.pie6||L(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||L(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||L(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||L(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||L(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||L(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||L(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||L(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||L(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||L(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||L(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||L(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||L(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||xn(this.quadrant1Fill)?K(this.quadrant1Fill):ct(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((a=this.radar)==null?void 0:a.curveOpacity)||.5,curveStrokeWidth:((n=this.radar)==null?void 0:n.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((s=this.radar)==null?void 0:s.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((u=this.xyChart)==null?void 0:u.backgroundColor)||this.background,titleColor:((p=this.xyChart)==null?void 0:p.titleColor)||this.primaryTextColor,xAxisTitleColor:((d=this.xyChart)==null?void 0:d.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((f=this.xyChart)==null?void 0:f.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((y=this.xyChart)==null?void 0:y.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((v=this.xyChart)==null?void 0:v.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((k=this.xyChart)==null?void 0:k.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((M=this.xyChart)==null?void 0:M.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((T=this.xyChart)==null?void 0:T.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||L(this.primaryColor,{h:-30}),this.git4=this.git4||L(this.primaryColor,{h:-60}),this.git5=this.git5||L(this.primaryColor,{h:-90}),this.git6=this.git6||L(this.primaryColor,{h:60}),this.git7=this.git7||L(this.primaryColor,{h:120}),this.darkMode?(this.git0=K(this.git0,25),this.git1=K(this.git1,25),this.git2=K(this.git2,25),this.git3=K(this.git3,25),this.git4=K(this.git4,25),this.git5=K(this.git5,25),this.git6=K(this.git6,25),this.git7=K(this.git7,25)):(this.git0=ct(this.git0,25),this.git1=ct(this.git1,25),this.git2=ct(this.git2,25),this.git3=ct(this.git3,25),this.git4=ct(this.git4,25),this.git5=ct(this.git5,25),this.git6=ct(this.git6,25),this.git7=ct(this.git7,25)),this.gitInv0=this.gitInv0||G(this.git0),this.gitInv1=this.gitInv1||G(this.git1),this.gitInv2=this.gitInv2||G(this.git2),this.gitInv3=this.gitInv3||G(this.git3),this.gitInv4=this.gitInv4||G(this.git4),this.gitInv5=this.gitInv5||G(this.git5),this.gitInv6=this.gitInv6||G(this.git6),this.gitInv7=this.gitInv7||G(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||G(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||G(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||io,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ao}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},g(Yi,"Theme"),Yi),xb=g(e=>{const t=new bb;return t.calculate(e),t},"getThemeVariables"),Gi,vb=(Gi=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=K(this.contrast,55),this.background="#ffffff",this.tertiaryColor=L(this.primaryColor,{h:-160}),this.primaryBorderColor=he(this.primaryColor,this.darkMode),this.secondaryBorderColor=he(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=he(this.tertiaryColor,this.darkMode),this.primaryTextColor=G(this.primaryColor),this.secondaryTextColor=G(this.secondaryColor),this.tertiaryTextColor=G(this.tertiaryColor),this.lineColor=G(this.background),this.textColor=G(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||K(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,i,a,n,o,s,l,c,h,u,p,d,f,m,y,b,v,k,M,T;this.secondBkg=K(this.contrast,55),this.border2=this.contrast,this.actorBorder=K(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleInv"+_]=this["cScaleInv"+_]||G(this["cScale"+_]);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this.darkMode?this["cScalePeer"+_]=this["cScalePeer"+_]||K(this["cScale"+_],10):this["cScalePeer"+_]=this["cScalePeer"+_]||ct(this["cScale"+_],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleLabel"+_]=this["cScaleLabel"+_]||this.scaleLabelColor;for(let _=0;_<5;_++)this["surface"+_]=this["surface"+_]||L(this.mainBkg,{l:-(5+_*5)}),this["surfacePeer"+_]=this["surfacePeer"+_]||L(this.mainBkg,{l:-(8+_*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=K(this.contrast,30),this.sectionBkgColor2=K(this.contrast,30),this.taskBorderColor=ct(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=K(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=ct(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=L(this.primaryColor,{h:64}),this.fillType3=L(this.secondaryColor,{h:64}),this.fillType4=L(this.primaryColor,{h:-64}),this.fillType5=L(this.secondaryColor,{h:-64}),this.fillType6=L(this.primaryColor,{h:128}),this.fillType7=L(this.secondaryColor,{h:128});for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["pie"+_]=this["cScale"+_];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||L(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||L(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||L(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||L(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||L(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||L(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||xn(this.quadrant1Fill)?K(this.quadrant1Fill):ct(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((a=this.xyChart)==null?void 0:a.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((s=this.xyChart)==null?void 0:s.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:((p=this.radar)==null?void 0:p.axisColor)||this.lineColor,axisStrokeWidth:((d=this.radar)==null?void 0:d.axisStrokeWidth)||2,axisLabelFontSize:((f=this.radar)==null?void 0:f.axisLabelFontSize)||12,curveOpacity:((m=this.radar)==null?void 0:m.curveOpacity)||.5,curveStrokeWidth:((y=this.radar)==null?void 0:y.curveStrokeWidth)||2,graticuleColor:((b=this.radar)==null?void 0:b.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((v=this.radar)==null?void 0:v.graticuleStrokeWidth)||1,graticuleOpacity:((k=this.radar)==null?void 0:k.graticuleOpacity)||.3,legendBoxSize:((M=this.radar)==null?void 0:M.legendBoxSize)||12,legendFontSize:((T=this.radar)==null?void 0:T.legendFontSize)||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ct(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||L(this.primaryColor,{h:-30}),this.git4=this.pie5||L(this.primaryColor,{h:-60}),this.git5=this.pie6||L(this.primaryColor,{h:-90}),this.git6=this.pie7||L(this.primaryColor,{h:60}),this.git7=this.pie8||L(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||G(this.git0),this.gitInv1=this.gitInv1||G(this.git1),this.gitInv2=this.gitInv2||G(this.git2),this.gitInv3=this.gitInv3||G(this.git3),this.gitInv4=this.gitInv4||G(this.git4),this.gitInv5=this.gitInv5||G(this.git5),this.gitInv6=this.gitInv6||G(this.git6),this.gitInv7=this.gitInv7||G(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||io,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ao}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},g(Gi,"Theme"),Gi),_b=g(e=>{const t=new vb;return t.calculate(e),t},"getThemeVariables"),pr={base:{getThemeVariables:db},dark:{getThemeVariables:gb},default:{getThemeVariables:yb},forest:{getThemeVariables:xb},neutral:{getThemeVariables:_b}},Ye={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},np={...Ye,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:pr.default.getThemeVariables(),sequence:{...Ye.sequence,messageFont:g(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:g(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:g(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Ye.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Ye.c4,useWidth:void 0,personFont:g(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...Ye.flowchart,inheritDir:!1},external_personFont:g(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:g(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:g(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:g(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:g(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:g(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:g(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:g(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:g(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:g(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:g(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:g(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:g(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:g(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:g(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:g(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:g(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:g(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:g(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:g(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:g(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Ye.pie,useWidth:984},xyChart:{...Ye.xyChart,useWidth:void 0},requirement:{...Ye.requirement,useWidth:void 0},packet:{...Ye.packet},radar:{...Ye.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},sp=g((e,t="")=>Object.keys(e).reduce((r,i)=>Array.isArray(e[i])?r:typeof e[i]=="object"&&e[i]!==null?[...r,t+i,...sp(e[i],"")]:[...r,t+i],[]),"keyify"),wb=new Set(sp(np,"")),op=np,_s=g(e=>{if(O.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>_s(t));return}for(const t of Object.keys(e)){if(O.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!wb.has(t)||e[t]==null){O.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){O.debug("sanitizing object",t),_s(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const i of r)t.includes(i)&&(O.debug("sanitizing css option",t),e[t]=Cb(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r!=null&&r.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}O.debug("After sanitization",e)}},"sanitizeDirective"),Cb=g(e=>{let t=0,r=0;for(const i of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";i==="{"?t++:i==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),Qi=Object.freeze(op),ye=re({},Qi),lp,Ji=[],an=re({},Qi),no=g((e,t)=>{let r=re({},e),i={};for(const a of t)up(a),i=re(i,a);if(r=re(r,i),i.theme&&i.theme in pr){const a=re({},lp),n=re(a.themeVariables||{},i.themeVariables);r.theme&&r.theme in pr&&(r.themeVariables=pr[r.theme].getThemeVariables(n))}return an=r,pp(an),an},"updateCurrentConfig"),kb=g(e=>(ye=re({},Qi),ye=re(ye,e),e.theme&&pr[e.theme]&&(ye.themeVariables=pr[e.theme].getThemeVariables(e.themeVariables)),no(ye,Ji),ye),"setSiteConfig"),Sb=g(e=>{lp=re({},e)},"saveConfigFromInitialize"),Tb=g(e=>(ye=re(ye,e),no(ye,Ji),ye),"updateSiteConfig"),cp=g(()=>re({},ye),"getSiteConfig"),hp=g(e=>(pp(e),re(an,e),ve()),"setConfig"),ve=g(()=>re({},an),"getConfig"),up=g(e=>{e&&(["secure",...ye.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(O.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&up(e[t])}))},"sanitize"),Mb=g(e=>{var t;_s(e),e.fontFamily&&!((t=e.themeVariables)!=null&&t.fontFamily)&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),Ji.push(e),no(ye,Ji)},"addDirective"),ws=g((e=ye)=>{Ji=[],no(e,Ji)},"reset"),Lb={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},Ch={},Ab=g(e=>{Ch[e]||(O.warn(Lb[e]),Ch[e]=!0)},"issueWarning"),pp=g(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&Ab("LAZY_LOAD_DEPRECATED")},"checkConfig"),vn=/<br\s*\/?>/gi,Bb=g(e=>e?gp(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),Eb=(()=>{let e=!1;return()=>{e||(dp(),e=!0)}})();function dp(){const e="data-temp-href-target";Ki.addHook("beforeSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),Ki.addHook("afterSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}g(dp,"setupDompurifyHooks");var fp=g(e=>(Eb(),Ki.sanitize(e)),"removeScript"),kh=g((e,t)=>{var r;if(((r=t.flowchart)==null?void 0:r.htmlLabels)!==!1){const i=t.securityLevel;i==="antiscript"||i==="strict"?e=fp(e):i!=="loose"&&(e=gp(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=Rb(e))}return e},"sanitizeMore"),ri=g((e,t)=>e&&(t.dompurifyConfig?e=Ki.sanitize(kh(e,t),t.dompurifyConfig).toString():e=Ki.sanitize(kh(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),$b=g((e,t)=>typeof e=="string"?ri(e,t):e.flat().map(r=>ri(r,t)),"sanitizeTextOrArray"),Fb=g(e=>vn.test(e),"hasBreaks"),Pb=g(e=>e.split(vn),"splitBreaks"),Rb=g(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),gp=g(e=>e.replace(vn,"#br#"),"breakToPlaceholder"),mp=g(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=CSS.escape(t)),t},"getUrl"),Qt=g(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),Db=g(function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},"getMax"),Ob=g(function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},"getMin"),Sh=g(function(e){const t=e.split(/(,)/),r=[];for(let i=0;i<t.length;i++){let a=t[i];if(a===","&&i>0&&i+1<t.length){const n=t[i-1],o=t[i+1];Ib(n,o)&&(a=n+","+o,i++,r.pop())}r.push(Nb(a))}return r.join("")},"parseGenericTypes"),hl=g((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),Ib=g((e,t)=>{const r=hl(e,"~"),i=hl(t,"~");return r===1&&i===1},"shouldCombineSets"),Nb=g(e=>{const t=hl(e,"~");let r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const i=[...e];let a=i.indexOf("~"),n=i.lastIndexOf("~");for(;a!==-1&&n!==-1&&a!==n;)i[a]="<",i[n]=">",a=i.indexOf("~"),n=i.lastIndexOf("~");return r&&i.unshift("~"),i.join("")},"processSet"),Th=g(()=>window.MathMLElement!==void 0,"isMathMLSupported"),ul=/\$\$(.*)\$\$/g,ta=g(e=>{var t;return(((t=e.match(ul))==null?void 0:t.length)??0)>0},"hasKatex"),uE=g(async(e,t)=>{e=await nc(e,t);const r=document.createElement("div");r.innerHTML=e,r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0";const i=document.querySelector("body");i==null||i.insertAdjacentElement("beforeend",r);const a={width:r.clientWidth,height:r.clientHeight};return r.remove(),a},"calculateMathMLDimensions"),nc=g(async(e,t)=>{if(!ta(e))return e;if(!(Th()||t.legacyMathML||t.forceLegacyMathML))return e.replace(ul,"MathML is unsupported in this environment.");{const{default:r}=await Et(async()=>{const{default:a}=await import("./ChWnQ-fc.js");return{default:a}},[],import.meta.url),i=t.forceLegacyMathML||!Th()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(vn).map(a=>ta(a)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${a}</div>`:`<div>${a}</div>`).join("").replace(ul,(a,n)=>r.renderToString(n,{throwOnError:!0,displayMode:!0,output:i}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatex"),oa={getRows:Bb,sanitizeText:ri,sanitizeTextOrArray:$b,hasBreaks:Fb,splitBreaks:Pb,lineBreakRegex:vn,removeScript:fp,getUrl:mp,evaluate:Qt,getMax:Db,getMin:Ob},qb=g(function(e,t){for(let r of t)e.attr(r[0],r[1])},"d3Attrs"),zb=g(function(e,t,r){let i=new Map;return r?(i.set("width","100%"),i.set("style",`max-width: ${t}px;`)):(i.set("height",e),i.set("width",t)),i},"calculateSvgSizeAttrs"),yp=g(function(e,t,r,i){const a=zb(t,r,i);qb(e,a)},"configureSvgSize"),Wb=g(function(e,t,r,i){const a=t.node().getBBox(),n=a.width,o=a.height;O.info(`SVG bounds: ${n}x${o}`,a);let s=0,l=0;O.info(`Graph bounds: ${s}x${l}`,e),s=n+r*2,l=o+r*2,O.info(`Calculated bounds: ${s}x${l}`),yp(t,l,s,i);const c=`${a.x-r} ${a.y-r} ${a.width+2*r} ${a.height+2*r}`;t.attr("viewBox",c)},"setupGraphViewbox"),ls={},Hb=g((e,t,r)=>{let i="";return e in ls&&ls[e]?i=ls[e](r):O.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${i}

  ${t}
`},"getStyles"),jb=g((e,t)=>{t!==void 0&&(ls[e]=t)},"addStylesForDiagram"),Vb=Hb,bp={};cb(bp,{clear:()=>Ub,getAccDescription:()=>Zb,getAccTitle:()=>Gb,getDiagramTitle:()=>Qb,setAccDescription:()=>Xb,setAccTitle:()=>Yb,setDiagramTitle:()=>Kb});var sc="",oc="",lc="",cc=g(e=>ri(e,ve()),"sanitizeText"),Ub=g(()=>{sc="",lc="",oc=""},"clear"),Yb=g(e=>{sc=cc(e).replace(/^\s+/g,"")},"setAccTitle"),Gb=g(()=>sc,"getAccTitle"),Xb=g(e=>{lc=cc(e).replace(/\n\s+/g,`
`)},"setAccDescription"),Zb=g(()=>lc,"getAccDescription"),Kb=g(e=>{oc=cc(e)},"setDiagramTitle"),Qb=g(()=>oc,"getDiagramTitle"),Mh=O,Jb=ic,St=ve,pE=hp,dE=Qi,so=g(e=>ri(e,St()),"sanitizeText"),tx=Wb,ex=g(()=>bp,"getCommonDb"),Cs={},ks=g((e,t,r)=>{var i;Cs[e]&&Mh.warn(`Diagram with id ${e} already registered. Overwriting.`),Cs[e]=t,r&&ap(e,r),jb(e,t.styles),(i=t.injectUtils)==null||i.call(t,Mh,Jb,St,so,tx,ex(),()=>{})},"registerDiagram"),pl=g(e=>{if(e in Cs)return Cs[e];throw new rx(e)},"getDiagram"),Xi,rx=(Xi=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},g(Xi,"DiagramNotFoundError"),Xi);function hc(e){return typeof e>"u"||e===null}g(hc,"isNothing");function xp(e){return typeof e=="object"&&e!==null}g(xp,"isObject");function vp(e){return Array.isArray(e)?e:hc(e)?[]:[e]}g(vp,"toArray");function _p(e,t){var r,i,a,n;if(t)for(n=Object.keys(t),r=0,i=n.length;r<i;r+=1)a=n[r],e[a]=t[a];return e}g(_p,"extend");function wp(e,t){var r="",i;for(i=0;i<t;i+=1)r+=e;return r}g(wp,"repeat");function Cp(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}g(Cp,"isNegativeZero");var ix=hc,ax=xp,nx=vp,sx=wp,ox=Cp,lx=_p,Kt={isNothing:ix,isObject:ax,toArray:nx,repeat:sx,isNegativeZero:ox,extend:lx};function uc(e,t){var r="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),i+" "+r):i}g(uc,"formatError");function ea(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=uc(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}g(ea,"YAMLException$1");ea.prototype=Object.create(Error.prototype);ea.prototype.constructor=ea;ea.prototype.toString=g(function(t){return this.name+": "+uc(this,t)},"toString");var be=ea;function cs(e,t,r,i,a){var n="",o="",s=Math.floor(a/2)-1;return i-t>s&&(n=" ... ",t=i-s+n.length),r-i>s&&(o=" ...",r=i+s-o.length),{str:n+e.slice(t,r).replace(/\t/g,"")+o,pos:i-t+n.length}}g(cs,"getLine");function hs(e,t){return Kt.repeat(" ",t-e.length)+e}g(hs,"padStart");function kp(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,i=[0],a=[],n,o=-1;n=r.exec(e.buffer);)a.push(n.index),i.push(n.index+n[0].length),e.position<=n.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var s="",l,c,h=Math.min(e.line+t.linesAfter,a.length).toString().length,u=t.maxLength-(t.indent+h+3);for(l=1;l<=t.linesBefore&&!(o-l<0);l++)c=cs(e.buffer,i[o-l],a[o-l],e.position-(i[o]-i[o-l]),u),s=Kt.repeat(" ",t.indent)+hs((e.line-l+1).toString(),h)+" | "+c.str+`
`+s;for(c=cs(e.buffer,i[o],a[o],e.position,u),s+=Kt.repeat(" ",t.indent)+hs((e.line+1).toString(),h)+" | "+c.str+`
`,s+=Kt.repeat("-",t.indent+h+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(o+l>=a.length);l++)c=cs(e.buffer,i[o+l],a[o+l],e.position-(i[o]-i[o+l]),u),s+=Kt.repeat(" ",t.indent)+hs((e.line+l+1).toString(),h)+" | "+c.str+`
`;return s.replace(/\n$/,"")}g(kp,"makeSnippet");var cx=kp,hx=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ux=["scalar","sequence","mapping"];function Sp(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(i){t[String(i)]=r})}),t}g(Sp,"compileStyleAliases");function Tp(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(hx.indexOf(r)===-1)throw new be('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Sp(t.styleAliases||null),ux.indexOf(this.kind)===-1)throw new be('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}g(Tp,"Type$1");var ae=Tp;function dl(e,t){var r=[];return e[t].forEach(function(i){var a=r.length;r.forEach(function(n,o){n.tag===i.tag&&n.kind===i.kind&&n.multi===i.multi&&(a=o)}),r[a]=i}),r}g(dl,"compileList");function Mp(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function i(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(g(i,"collectType"),t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(i);return e}g(Mp,"compileMap");function Ss(e){return this.extend(e)}g(Ss,"Schema$1");Ss.prototype.extend=g(function(t){var r=[],i=[];if(t instanceof ae)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new be("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(n){if(!(n instanceof ae))throw new be("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new be("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new be("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(n){if(!(n instanceof ae))throw new be("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(Ss.prototype);return a.implicit=(this.implicit||[]).concat(r),a.explicit=(this.explicit||[]).concat(i),a.compiledImplicit=dl(a,"implicit"),a.compiledExplicit=dl(a,"explicit"),a.compiledTypeMap=Mp(a.compiledImplicit,a.compiledExplicit),a},"extend");var px=Ss,dx=new ae("tag:yaml.org,2002:str",{kind:"scalar",construct:g(function(e){return e!==null?e:""},"construct")}),fx=new ae("tag:yaml.org,2002:seq",{kind:"sequence",construct:g(function(e){return e!==null?e:[]},"construct")}),gx=new ae("tag:yaml.org,2002:map",{kind:"mapping",construct:g(function(e){return e!==null?e:{}},"construct")}),mx=new px({explicit:[dx,fx,gx]});function Lp(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}g(Lp,"resolveYamlNull");function Ap(){return null}g(Ap,"constructYamlNull");function Bp(e){return e===null}g(Bp,"isNull");var yx=new ae("tag:yaml.org,2002:null",{kind:"scalar",resolve:Lp,construct:Ap,predicate:Bp,represent:{canonical:g(function(){return"~"},"canonical"),lowercase:g(function(){return"null"},"lowercase"),uppercase:g(function(){return"NULL"},"uppercase"),camelcase:g(function(){return"Null"},"camelcase"),empty:g(function(){return""},"empty")},defaultStyle:"lowercase"});function Ep(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}g(Ep,"resolveYamlBoolean");function $p(e){return e==="true"||e==="True"||e==="TRUE"}g($p,"constructYamlBoolean");function Fp(e){return Object.prototype.toString.call(e)==="[object Boolean]"}g(Fp,"isBoolean");var bx=new ae("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Ep,construct:$p,predicate:Fp,represent:{lowercase:g(function(e){return e?"true":"false"},"lowercase"),uppercase:g(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:g(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function Pp(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}g(Pp,"isHexCode");function Rp(e){return 48<=e&&e<=55}g(Rp,"isOctCode");function Dp(e){return 48<=e&&e<=57}g(Dp,"isDecCode");function Op(e){if(e===null)return!1;var t=e.length,r=0,i=!1,a;if(!t)return!1;if(a=e[r],(a==="-"||a==="+")&&(a=e[++r]),a==="0"){if(r+1===t)return!0;if(a=e[++r],a==="b"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(a!=="0"&&a!=="1")return!1;i=!0}return i&&a!=="_"}if(a==="x"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!Pp(e.charCodeAt(r)))return!1;i=!0}return i&&a!=="_"}if(a==="o"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!Rp(e.charCodeAt(r)))return!1;i=!0}return i&&a!=="_"}}if(a==="_")return!1;for(;r<t;r++)if(a=e[r],a!=="_"){if(!Dp(e.charCodeAt(r)))return!1;i=!0}return!(!i||a==="_")}g(Op,"resolveYamlInteger");function Ip(e){var t=e,r=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(r=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}g(Ip,"constructYamlInteger");function Np(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Kt.isNegativeZero(e)}g(Np,"isInteger");var xx=new ae("tag:yaml.org,2002:int",{kind:"scalar",resolve:Op,construct:Ip,predicate:Np,represent:{binary:g(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:g(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:g(function(e){return e.toString(10)},"decimal"),hexadecimal:g(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),vx=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function qp(e){return!(e===null||!vx.test(e)||e[e.length-1]==="_")}g(qp,"resolveYamlFloat");function zp(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}g(zp,"constructYamlFloat");var _x=/^[-+]?[0-9]+e/;function Wp(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Kt.isNegativeZero(e))return"-0.0";return r=e.toString(10),_x.test(r)?r.replace("e",".e"):r}g(Wp,"representYamlFloat");function Hp(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Kt.isNegativeZero(e))}g(Hp,"isFloat");var wx=new ae("tag:yaml.org,2002:float",{kind:"scalar",resolve:qp,construct:zp,predicate:Hp,represent:Wp,defaultStyle:"lowercase"}),jp=mx.extend({implicit:[yx,bx,xx,wx]}),Cx=jp,Vp=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Up=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Yp(e){return e===null?!1:Vp.exec(e)!==null||Up.exec(e)!==null}g(Yp,"resolveYamlTimestamp");function Gp(e){var t,r,i,a,n,o,s,l=0,c=null,h,u,p;if(t=Vp.exec(e),t===null&&(t=Up.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],i=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(r,i,a));if(n=+t[4],o=+t[5],s=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(h=+t[10],u=+(t[11]||0),c=(h*60+u)*6e4,t[9]==="-"&&(c=-c)),p=new Date(Date.UTC(r,i,a,n,o,s,l)),c&&p.setTime(p.getTime()-c),p}g(Gp,"constructYamlTimestamp");function Xp(e){return e.toISOString()}g(Xp,"representYamlTimestamp");var kx=new ae("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Yp,construct:Gp,instanceOf:Date,represent:Xp});function Zp(e){return e==="<<"||e===null}g(Zp,"resolveYamlMerge");var Sx=new ae("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Zp}),pc=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Kp(e){if(e===null)return!1;var t,r,i=0,a=e.length,n=pc;for(r=0;r<a;r++)if(t=n.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}g(Kp,"resolveYamlBinary");function Qp(e){var t,r,i=e.replace(/[\r\n=]/g,""),a=i.length,n=pc,o=0,s=[];for(t=0;t<a;t++)t%4===0&&t&&(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)),o=o<<6|n.indexOf(i.charAt(t));return r=a%4*6,r===0?(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)):r===18?(s.push(o>>10&255),s.push(o>>2&255)):r===12&&s.push(o>>4&255),new Uint8Array(s)}g(Qp,"constructYamlBinary");function Jp(e){var t="",r=0,i,a,n=e.length,o=pc;for(i=0;i<n;i++)i%3===0&&i&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[i];return a=n%3,a===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):a===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):a===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}g(Jp,"representYamlBinary");function td(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}g(td,"isBinary");var Tx=new ae("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Kp,construct:Qp,predicate:td,represent:Jp}),Mx=Object.prototype.hasOwnProperty,Lx=Object.prototype.toString;function ed(e){if(e===null)return!0;var t=[],r,i,a,n,o,s=e;for(r=0,i=s.length;r<i;r+=1){if(a=s[r],o=!1,Lx.call(a)!=="[object Object]")return!1;for(n in a)if(Mx.call(a,n))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(n)===-1)t.push(n);else return!1}return!0}g(ed,"resolveYamlOmap");function rd(e){return e!==null?e:[]}g(rd,"constructYamlOmap");var Ax=new ae("tag:yaml.org,2002:omap",{kind:"sequence",resolve:ed,construct:rd}),Bx=Object.prototype.toString;function id(e){if(e===null)return!0;var t,r,i,a,n,o=e;for(n=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(i=o[t],Bx.call(i)!=="[object Object]"||(a=Object.keys(i),a.length!==1))return!1;n[t]=[a[0],i[a[0]]]}return!0}g(id,"resolveYamlPairs");function ad(e){if(e===null)return[];var t,r,i,a,n,o=e;for(n=new Array(o.length),t=0,r=o.length;t<r;t+=1)i=o[t],a=Object.keys(i),n[t]=[a[0],i[a[0]]];return n}g(ad,"constructYamlPairs");var Ex=new ae("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:id,construct:ad}),$x=Object.prototype.hasOwnProperty;function nd(e){if(e===null)return!0;var t,r=e;for(t in r)if($x.call(r,t)&&r[t]!==null)return!1;return!0}g(nd,"resolveYamlSet");function sd(e){return e!==null?e:{}}g(sd,"constructYamlSet");var Fx=new ae("tag:yaml.org,2002:set",{kind:"mapping",resolve:nd,construct:sd}),od=Cx.extend({implicit:[kx,Sx],explicit:[Tx,Ax,Ex,Fx]}),Ar=Object.prototype.hasOwnProperty,Ts=1,ld=2,cd=3,Ms=4,jo=1,Px=2,Lh=3,Rx=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Dx=/[\x85\u2028\u2029]/,Ox=/[,\[\]\{\}]/,hd=/^(?:!|!!|![a-z\-]+!)$/i,ud=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function fl(e){return Object.prototype.toString.call(e)}g(fl,"_class");function Ne(e){return e===10||e===13}g(Ne,"is_EOL");function Lr(e){return e===9||e===32}g(Lr,"is_WHITE_SPACE");function ue(e){return e===9||e===32||e===10||e===13}g(ue,"is_WS_OR_EOL");function Xr(e){return e===44||e===91||e===93||e===123||e===125}g(Xr,"is_FLOW_INDICATOR");function pd(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}g(pd,"fromHexCode");function dd(e){return e===120?2:e===117?4:e===85?8:0}g(dd,"escapedHexLen");function fd(e){return 48<=e&&e<=57?e-48:-1}g(fd,"fromDecimalCode");function gl(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}g(gl,"simpleEscapeSequence");function gd(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}g(gd,"charFromCodepoint");var md=new Array(256),yd=new Array(256);for(jr=0;jr<256;jr++)md[jr]=gl(jr)?1:0,yd[jr]=gl(jr);var jr;function bd(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||od,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}g(bd,"State$1");function dc(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=cx(r),new be(t,r)}g(dc,"generateError");function ot(e,t){throw dc(e,t)}g(ot,"throwError");function on(e,t){e.onWarning&&e.onWarning.call(null,dc(e,t))}g(on,"throwWarning");var Ah={YAML:g(function(t,r,i){var a,n,o;t.version!==null&&ot(t,"duplication of %YAML directive"),i.length!==1&&ot(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),a===null&&ot(t,"ill-formed argument of the YAML directive"),n=parseInt(a[1],10),o=parseInt(a[2],10),n!==1&&ot(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&on(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:g(function(t,r,i){var a,n;i.length!==2&&ot(t,"TAG directive accepts exactly two arguments"),a=i[0],n=i[1],hd.test(a)||ot(t,"ill-formed tag handle (first argument) of the TAG directive"),Ar.call(t.tagMap,a)&&ot(t,'there is a previously declared suffix for "'+a+'" tag handle'),ud.test(n)||ot(t,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch{ot(t,"tag prefix is malformed: "+n)}t.tagMap[a]=n},"handleTagDirective")};function dr(e,t,r,i){var a,n,o,s;if(t<r){if(s=e.input.slice(t,r),i)for(a=0,n=s.length;a<n;a+=1)o=s.charCodeAt(a),o===9||32<=o&&o<=1114111||ot(e,"expected valid JSON character");else Rx.test(s)&&ot(e,"the stream contains non-printable characters");e.result+=s}}g(dr,"captureSegment");function ml(e,t,r,i){var a,n,o,s;for(Kt.isObject(r)||ot(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(r),o=0,s=a.length;o<s;o+=1)n=a[o],Ar.call(t,n)||(t[n]=r[n],i[n]=!0)}g(ml,"mergeMappings");function Zr(e,t,r,i,a,n,o,s,l){var c,h;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),c=0,h=a.length;c<h;c+=1)Array.isArray(a[c])&&ot(e,"nested arrays are not supported inside keys"),typeof a=="object"&&fl(a[c])==="[object Object]"&&(a[c]="[object Object]");if(typeof a=="object"&&fl(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(n))for(c=0,h=n.length;c<h;c+=1)ml(e,t,n[c],r);else ml(e,t,n,r);else!e.json&&!Ar.call(r,a)&&Ar.call(t,a)&&(e.line=o||e.line,e.lineStart=s||e.lineStart,e.position=l||e.position,ot(e,"duplicated mapping key")),a==="__proto__"?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[a]=n,delete r[a];return t}g(Zr,"storeMappingPair");function oo(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):ot(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}g(oo,"readLineBreak");function Ut(e,t,r){for(var i=0,a=e.input.charCodeAt(e.position);a!==0;){for(;Lr(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(Ne(a))for(oo(e),a=e.input.charCodeAt(e.position),i++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return r!==-1&&i!==0&&e.lineIndent<r&&on(e,"deficient indentation"),i}g(Ut,"skipSeparationSpace");function _n(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||ue(r)))}g(_n,"testDocumentSeparator");function lo(e,t){t===1?e.result+=" ":t>1&&(e.result+=Kt.repeat(`
`,t-1))}g(lo,"writeFoldedLines");function xd(e,t,r){var i,a,n,o,s,l,c,h,u=e.kind,p=e.result,d;if(d=e.input.charCodeAt(e.position),ue(d)||Xr(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(a=e.input.charCodeAt(e.position+1),ue(a)||r&&Xr(a)))return!1;for(e.kind="scalar",e.result="",n=o=e.position,s=!1;d!==0;){if(d===58){if(a=e.input.charCodeAt(e.position+1),ue(a)||r&&Xr(a))break}else if(d===35){if(i=e.input.charCodeAt(e.position-1),ue(i))break}else{if(e.position===e.lineStart&&_n(e)||r&&Xr(d))break;if(Ne(d))if(l=e.line,c=e.lineStart,h=e.lineIndent,Ut(e,!1,-1),e.lineIndent>=t){s=!0,d=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=l,e.lineStart=c,e.lineIndent=h;break}}s&&(dr(e,n,o,!1),lo(e,e.line-l),n=o=e.position,s=!1),Lr(d)||(o=e.position+1),d=e.input.charCodeAt(++e.position)}return dr(e,n,o,!1),e.result?!0:(e.kind=u,e.result=p,!1)}g(xd,"readPlainScalar");function vd(e,t){var r,i,a;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=a=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(dr(e,i,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)i=e.position,e.position++,a=e.position;else return!0;else Ne(r)?(dr(e,i,a,!0),lo(e,Ut(e,!1,t)),i=a=e.position):e.position===e.lineStart&&_n(e)?ot(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);ot(e,"unexpected end of the stream within a single quoted scalar")}g(vd,"readSingleQuotedScalar");function _d(e,t){var r,i,a,n,o,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return dr(e,r,e.position,!0),e.position++,!0;if(s===92){if(dr(e,r,e.position,!0),s=e.input.charCodeAt(++e.position),Ne(s))Ut(e,!1,t);else if(s<256&&md[s])e.result+=yd[s],e.position++;else if((o=dd(s))>0){for(a=o,n=0;a>0;a--)s=e.input.charCodeAt(++e.position),(o=pd(s))>=0?n=(n<<4)+o:ot(e,"expected hexadecimal character");e.result+=gd(n),e.position++}else ot(e,"unknown escape sequence");r=i=e.position}else Ne(s)?(dr(e,r,i,!0),lo(e,Ut(e,!1,t)),r=i=e.position):e.position===e.lineStart&&_n(e)?ot(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}ot(e,"unexpected end of the stream within a double quoted scalar")}g(_d,"readDoubleQuotedScalar");function wd(e,t){var r=!0,i,a,n,o=e.tag,s,l=e.anchor,c,h,u,p,d,f=Object.create(null),m,y,b,v;if(v=e.input.charCodeAt(e.position),v===91)h=93,d=!1,s=[];else if(v===123)h=125,d=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),v=e.input.charCodeAt(++e.position);v!==0;){if(Ut(e,!0,t),v=e.input.charCodeAt(e.position),v===h)return e.position++,e.tag=o,e.anchor=l,e.kind=d?"mapping":"sequence",e.result=s,!0;r?v===44&&ot(e,"expected the node content, but found ','"):ot(e,"missed comma between flow collection entries"),y=m=b=null,u=p=!1,v===63&&(c=e.input.charCodeAt(e.position+1),ue(c)&&(u=p=!0,e.position++,Ut(e,!0,t))),i=e.line,a=e.lineStart,n=e.position,ii(e,t,Ts,!1,!0),y=e.tag,m=e.result,Ut(e,!0,t),v=e.input.charCodeAt(e.position),(p||e.line===i)&&v===58&&(u=!0,v=e.input.charCodeAt(++e.position),Ut(e,!0,t),ii(e,t,Ts,!1,!0),b=e.result),d?Zr(e,s,f,y,m,b,i,a,n):u?s.push(Zr(e,null,f,y,m,b,i,a,n)):s.push(m),Ut(e,!0,t),v=e.input.charCodeAt(e.position),v===44?(r=!0,v=e.input.charCodeAt(++e.position)):r=!1}ot(e,"unexpected end of the stream within a flow collection")}g(wd,"readFlowCollection");function Cd(e,t){var r,i,a=jo,n=!1,o=!1,s=t,l=0,c=!1,h,u;if(u=e.input.charCodeAt(e.position),u===124)i=!1;else if(u===62)i=!0;else return!1;for(e.kind="scalar",e.result="";u!==0;)if(u=e.input.charCodeAt(++e.position),u===43||u===45)jo===a?a=u===43?Lh:Px:ot(e,"repeat of a chomping mode identifier");else if((h=fd(u))>=0)h===0?ot(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?ot(e,"repeat of an indentation width identifier"):(s=t+h-1,o=!0);else break;if(Lr(u)){do u=e.input.charCodeAt(++e.position);while(Lr(u));if(u===35)do u=e.input.charCodeAt(++e.position);while(!Ne(u)&&u!==0)}for(;u!==0;){for(oo(e),e.lineIndent=0,u=e.input.charCodeAt(e.position);(!o||e.lineIndent<s)&&u===32;)e.lineIndent++,u=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>s&&(s=e.lineIndent),Ne(u)){l++;continue}if(e.lineIndent<s){a===Lh?e.result+=Kt.repeat(`
`,n?1+l:l):a===jo&&n&&(e.result+=`
`);break}for(i?Lr(u)?(c=!0,e.result+=Kt.repeat(`
`,n?1+l:l)):c?(c=!1,e.result+=Kt.repeat(`
`,l+1)):l===0?n&&(e.result+=" "):e.result+=Kt.repeat(`
`,l):e.result+=Kt.repeat(`
`,n?1+l:l),n=!0,o=!0,l=0,r=e.position;!Ne(u)&&u!==0;)u=e.input.charCodeAt(++e.position);dr(e,r,e.position,!1)}return!0}g(Cd,"readBlockScalar");function yl(e,t){var r,i=e.tag,a=e.anchor,n=[],o,s=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=n),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ot(e,"tab characters must not be used in indentation")),!(l!==45||(o=e.input.charCodeAt(e.position+1),!ue(o))));){if(s=!0,e.position++,Ut(e,!0,-1)&&e.lineIndent<=t){n.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,ii(e,t,cd,!1,!0),n.push(e.result),Ut(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)ot(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return s?(e.tag=i,e.anchor=a,e.kind="sequence",e.result=n,!0):!1}g(yl,"readBlockSequence");function kd(e,t,r){var i,a,n,o,s,l,c=e.tag,h=e.anchor,u={},p=Object.create(null),d=null,f=null,m=null,y=!1,b=!1,v;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),v=e.input.charCodeAt(e.position);v!==0;){if(!y&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ot(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),n=e.line,(v===63||v===58)&&ue(i))v===63?(y&&(Zr(e,u,p,d,f,null,o,s,l),d=f=m=null),b=!0,y=!0,a=!0):y?(y=!1,a=!0):ot(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,v=i;else{if(o=e.line,s=e.lineStart,l=e.position,!ii(e,r,ld,!1,!0))break;if(e.line===n){for(v=e.input.charCodeAt(e.position);Lr(v);)v=e.input.charCodeAt(++e.position);if(v===58)v=e.input.charCodeAt(++e.position),ue(v)||ot(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(Zr(e,u,p,d,f,null,o,s,l),d=f=m=null),b=!0,y=!1,a=!1,d=e.tag,f=e.result;else if(b)ot(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=h,!0}else if(b)ot(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=h,!0}if((e.line===n||e.lineIndent>t)&&(y&&(o=e.line,s=e.lineStart,l=e.position),ii(e,t,Ms,!0,a)&&(y?f=e.result:m=e.result),y||(Zr(e,u,p,d,f,m,o,s,l),d=f=m=null),Ut(e,!0,-1),v=e.input.charCodeAt(e.position)),(e.line===n||e.lineIndent>t)&&v!==0)ot(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&Zr(e,u,p,d,f,null,o,s,l),b&&(e.tag=c,e.anchor=h,e.kind="mapping",e.result=u),b}g(kd,"readBlockMapping");function Sd(e){var t,r=!1,i=!1,a,n,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&ot(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(i=!0,a="!!",o=e.input.charCodeAt(++e.position)):a="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(n=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):ot(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!ue(o);)o===33&&(i?ot(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),hd.test(a)||ot(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),Ox.test(n)&&ot(e,"tag suffix cannot contain flow indicator characters")}n&&!ud.test(n)&&ot(e,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{ot(e,"tag name is malformed: "+n)}return r?e.tag=n:Ar.call(e.tagMap,a)?e.tag=e.tagMap[a]+n:a==="!"?e.tag="!"+n:a==="!!"?e.tag="tag:yaml.org,2002:"+n:ot(e,'undeclared tag handle "'+a+'"'),!0}g(Sd,"readTagProperty");function Td(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&ot(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!ue(r)&&!Xr(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&ot(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}g(Td,"readAnchorProperty");function Md(e){var t,r,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!ue(i)&&!Xr(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&ot(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Ar.call(e.anchorMap,r)||ot(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Ut(e,!0,-1),!0}g(Md,"readAlias");function ii(e,t,r,i,a){var n,o,s,l=1,c=!1,h=!1,u,p,d,f,m,y;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,n=o=s=Ms===r||cd===r,i&&Ut(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;Sd(e)||Td(e);)Ut(e,!0,-1)?(c=!0,s=n,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):s=!1;if(s&&(s=c||a),(l===1||Ms===r)&&(Ts===r||ld===r?m=t:m=t+1,y=e.position-e.lineStart,l===1?s&&(yl(e,y)||kd(e,y,m))||wd(e,m)?h=!0:(o&&Cd(e,m)||vd(e,m)||_d(e,m)?h=!0:Md(e)?(h=!0,(e.tag!==null||e.anchor!==null)&&ot(e,"alias node should not have any properties")):xd(e,m,Ts===r)&&(h=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(h=s&&yl(e,y))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&ot(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,p=e.implicitTypes.length;u<p;u+=1)if(f=e.implicitTypes[u],f.resolve(e.result)){e.result=f.construct(e.result),e.tag=f.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Ar.call(e.typeMap[e.kind||"fallback"],e.tag))f=e.typeMap[e.kind||"fallback"][e.tag];else for(f=null,d=e.typeMap.multi[e.kind||"fallback"],u=0,p=d.length;u<p;u+=1)if(e.tag.slice(0,d[u].tag.length)===d[u].tag){f=d[u];break}f||ot(e,"unknown tag !<"+e.tag+">"),e.result!==null&&f.kind!==e.kind&&ot(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+f.kind+'", not "'+e.kind+'"'),f.resolve(e.result,e.tag)?(e.result=f.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):ot(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||h}g(ii,"composeNode");function Ld(e){var t=e.position,r,i,a,n=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(Ut(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(n=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!ue(o);)o=e.input.charCodeAt(++e.position);for(i=e.input.slice(r,e.position),a=[],i.length<1&&ot(e,"directive name must not be less than one character in length");o!==0;){for(;Lr(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Ne(o));break}if(Ne(o))break;for(r=e.position;o!==0&&!ue(o);)o=e.input.charCodeAt(++e.position);a.push(e.input.slice(r,e.position))}o!==0&&oo(e),Ar.call(Ah,i)?Ah[i](e,i,a):on(e,'unknown document directive "'+i+'"')}if(Ut(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Ut(e,!0,-1)):n&&ot(e,"directives end mark is expected"),ii(e,e.lineIndent-1,Ms,!1,!0),Ut(e,!0,-1),e.checkLineBreaks&&Dx.test(e.input.slice(t,e.position))&&on(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&_n(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Ut(e,!0,-1));return}if(e.position<e.length-1)ot(e,"end of the stream or a document separator is expected");else return}g(Ld,"readDocument");function fc(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new bd(e,t),i=e.indexOf("\0");for(i!==-1&&(r.position=i,ot(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Ld(r);return r.documents}g(fc,"loadDocuments");function Ix(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var i=fc(e,r);if(typeof t!="function")return i;for(var a=0,n=i.length;a<n;a+=1)t(i[a])}g(Ix,"loadAll$1");function Ad(e,t){var r=fc(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new be("expected a single document in the stream, but found more")}}g(Ad,"load$1");var Nx=Ad,qx={load:Nx},Bd=Object.prototype.toString,Ed=Object.prototype.hasOwnProperty,gc=65279,zx=9,ln=10,Wx=13,Hx=32,jx=33,Vx=34,bl=35,Ux=37,Yx=38,Gx=39,Xx=42,$d=44,Zx=45,Ls=58,Kx=61,Qx=62,Jx=63,tv=64,Fd=91,Pd=93,ev=96,Rd=123,rv=124,Dd=125,ne={};ne[0]="\\0";ne[7]="\\a";ne[8]="\\b";ne[9]="\\t";ne[10]="\\n";ne[11]="\\v";ne[12]="\\f";ne[13]="\\r";ne[27]="\\e";ne[34]='\\"';ne[92]="\\\\";ne[133]="\\N";ne[160]="\\_";ne[8232]="\\L";ne[8233]="\\P";var iv=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],av=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Od(e,t){var r,i,a,n,o,s,l;if(t===null)return{};for(r={},i=Object.keys(t),a=0,n=i.length;a<n;a+=1)o=i[a],s=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=e.compiledTypeMap.fallback[o],l&&Ed.call(l.styleAliases,s)&&(s=l.styleAliases[s]),r[o]=s;return r}g(Od,"compileStyleMap");function Id(e){var t,r,i;if(t=e.toString(16).toUpperCase(),e<=255)r="x",i=2;else if(e<=65535)r="u",i=4;else if(e<=4294967295)r="U",i=8;else throw new be("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Kt.repeat("0",i-t.length)+t}g(Id,"encodeHex");var nv=1,cn=2;function Nd(e){this.schema=e.schema||od,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Kt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Od(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?cn:nv,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}g(Nd,"State");function xl(e,t){for(var r=Kt.repeat(" ",t),i=0,a=-1,n="",o,s=e.length;i<s;)a=e.indexOf(`
`,i),a===-1?(o=e.slice(i),i=s):(o=e.slice(i,a+1),i=a+1),o.length&&o!==`
`&&(n+=r),n+=o;return n}g(xl,"indentString");function As(e,t){return`
`+Kt.repeat(" ",e.indent*t)}g(As,"generateNextLine");function qd(e,t){var r,i,a;for(r=0,i=e.implicitTypes.length;r<i;r+=1)if(a=e.implicitTypes[r],a.resolve(t))return!0;return!1}g(qd,"testImplicitResolving");function hn(e){return e===Hx||e===zx}g(hn,"isWhitespace");function ra(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==gc||65536<=e&&e<=1114111}g(ra,"isPrintable");function vl(e){return ra(e)&&e!==gc&&e!==Wx&&e!==ln}g(vl,"isNsCharOrWhitespace");function _l(e,t,r){var i=vl(e),a=i&&!hn(e);return(r?i:i&&e!==$d&&e!==Fd&&e!==Pd&&e!==Rd&&e!==Dd)&&e!==bl&&!(t===Ls&&!a)||vl(t)&&!hn(t)&&e===bl||t===Ls&&a}g(_l,"isPlainSafe");function zd(e){return ra(e)&&e!==gc&&!hn(e)&&e!==Zx&&e!==Jx&&e!==Ls&&e!==$d&&e!==Fd&&e!==Pd&&e!==Rd&&e!==Dd&&e!==bl&&e!==Yx&&e!==Xx&&e!==jx&&e!==rv&&e!==Kx&&e!==Qx&&e!==Gx&&e!==Vx&&e!==Ux&&e!==tv&&e!==ev}g(zd,"isPlainSafeFirst");function Wd(e){return!hn(e)&&e!==Ls}g(Wd,"isPlainSafeLast");function Ni(e,t){var r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&t+1<e.length&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}g(Ni,"codePointAt");function mc(e){var t=/^\n* /;return t.test(e)}g(mc,"needIndentIndicator");var Hd=1,wl=2,jd=3,Vd=4,Oi=5;function Ud(e,t,r,i,a,n,o,s){var l,c=0,h=null,u=!1,p=!1,d=i!==-1,f=-1,m=zd(Ni(e,0))&&Wd(Ni(e,e.length-1));if(t||o)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=Ni(e,l),!ra(c))return Oi;m=m&&_l(c,h,s),h=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=Ni(e,l),c===ln)u=!0,d&&(p=p||l-f-1>i&&e[f+1]!==" ",f=l);else if(!ra(c))return Oi;m=m&&_l(c,h,s),h=c}p=p||d&&l-f-1>i&&e[f+1]!==" "}return!u&&!p?m&&!o&&!a(e)?Hd:n===cn?Oi:wl:r>9&&mc(e)?Oi:o?n===cn?Oi:wl:p?Vd:jd}g(Ud,"chooseScalarStyle");function Yd(e,t,r,i,a){e.dump=function(){if(t.length===0)return e.quotingType===cn?'""':"''";if(!e.noCompatMode&&(iv.indexOf(t)!==-1||av.test(t)))return e.quotingType===cn?'"'+t+'"':"'"+t+"'";var n=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-n),s=i||e.flowLevel>-1&&r>=e.flowLevel;function l(c){return qd(e,c)}switch(g(l,"testAmbiguity"),Ud(t,s,e.indent,o,l,e.quotingType,e.forceQuotes&&!i,a)){case Hd:return t;case wl:return"'"+t.replace(/'/g,"''")+"'";case jd:return"|"+Cl(t,e.indent)+kl(xl(t,n));case Vd:return">"+Cl(t,e.indent)+kl(xl(Gd(t,o),n));case Oi:return'"'+Xd(t)+'"';default:throw new be("impossible error: invalid scalar style")}}()}g(Yd,"writeScalar");function Cl(e,t){var r=mc(e)?String(t):"",i=e[e.length-1]===`
`,a=i&&(e[e.length-2]===`
`||e===`
`),n=a?"+":i?"":"-";return r+n+`
`}g(Cl,"blockHeader");function kl(e){return e[e.length-1]===`
`?e.slice(0,-1):e}g(kl,"dropEndingNewline");function Gd(e,t){for(var r=/(\n+)([^\n]*)/g,i=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,Sl(e.slice(0,c),t)}(),a=e[0]===`
`||e[0]===" ",n,o;o=r.exec(e);){var s=o[1],l=o[2];n=l[0]===" ",i+=s+(!a&&!n&&l!==""?`
`:"")+Sl(l,t),a=n}return i}g(Gd,"foldString");function Sl(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,i,a=0,n,o=0,s=0,l="";i=r.exec(e);)s=i.index,s-a>t&&(n=o>a?o:s,l+=`
`+e.slice(a,n),a=n+1),o=s;return l+=`
`,e.length-a>t&&o>a?l+=e.slice(a,o)+`
`+e.slice(o+1):l+=e.slice(a),l.slice(1)}g(Sl,"foldLine");function Xd(e){for(var t="",r=0,i,a=0;a<e.length;r>=65536?a+=2:a++)r=Ni(e,a),i=ne[r],!i&&ra(r)?(t+=e[a],r>=65536&&(t+=e[a+1])):t+=i||Id(r);return t}g(Xd,"escapeString");function Zd(e,t,r){var i="",a=e.tag,n,o,s;for(n=0,o=r.length;n<o;n+=1)s=r[n],e.replacer&&(s=e.replacer.call(r,String(n),s)),(tr(e,t,s,!1,!1)||typeof s>"u"&&tr(e,t,null,!1,!1))&&(i!==""&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=a,e.dump="["+i+"]"}g(Zd,"writeFlowSequence");function Tl(e,t,r,i){var a="",n=e.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],e.replacer&&(l=e.replacer.call(r,String(o),l)),(tr(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&tr(e,t+1,null,!0,!0,!1,!0))&&((!i||a!=="")&&(a+=As(e,t)),e.dump&&ln===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=n,e.dump=a||"[]"}g(Tl,"writeBlockSequence");function Kd(e,t,r){var i="",a=e.tag,n=Object.keys(r),o,s,l,c,h;for(o=0,s=n.length;o<s;o+=1)h="",i!==""&&(h+=", "),e.condenseFlow&&(h+='"'),l=n[o],c=r[l],e.replacer&&(c=e.replacer.call(r,l,c)),tr(e,t,l,!1,!1)&&(e.dump.length>1024&&(h+="? "),h+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),tr(e,t,c,!1,!1)&&(h+=e.dump,i+=h));e.tag=a,e.dump="{"+i+"}"}g(Kd,"writeFlowMapping");function Qd(e,t,r,i){var a="",n=e.tag,o=Object.keys(r),s,l,c,h,u,p;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new be("sortKeys must be a boolean or a function");for(s=0,l=o.length;s<l;s+=1)p="",(!i||a!=="")&&(p+=As(e,t)),c=o[s],h=r[c],e.replacer&&(h=e.replacer.call(r,c,h)),tr(e,t+1,c,!0,!0,!0)&&(u=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,u&&(e.dump&&ln===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,u&&(p+=As(e,t)),tr(e,t+1,h,!0,u)&&(e.dump&&ln===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,a+=p));e.tag=n,e.dump=a||"{}"}g(Qd,"writeBlockMapping");function Ml(e,t,r){var i,a,n,o,s,l;for(a=r?e.explicitTypes:e.implicitTypes,n=0,o=a.length;n<o;n+=1)if(s=a[n],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof t=="object"&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(r?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,Bd.call(s.represent)==="[object Function]")i=s.represent(t,l);else if(Ed.call(s.represent,l))i=s.represent[l](t,l);else throw new be("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');e.dump=i}return!0}return!1}g(Ml,"detectType");function tr(e,t,r,i,a,n,o){e.tag=null,e.dump=r,Ml(e,r,!1)||Ml(e,r,!0);var s=Bd.call(e.dump),l=i,c;i&&(i=e.flowLevel<0||e.flowLevel>t);var h=s==="[object Object]"||s==="[object Array]",u,p;if(h&&(u=e.duplicates.indexOf(r),p=u!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&t>0)&&(a=!1),p&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(h&&p&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),s==="[object Object]")i&&Object.keys(e.dump).length!==0?(Qd(e,t,e.dump,a),p&&(e.dump="&ref_"+u+e.dump)):(Kd(e,t,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump));else if(s==="[object Array]")i&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?Tl(e,t-1,e.dump,a):Tl(e,t,e.dump,a),p&&(e.dump="&ref_"+u+e.dump)):(Zd(e,t,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump));else if(s==="[object String]")e.tag!=="?"&&Yd(e,e.dump,t,n,l);else{if(s==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new be("unacceptable kind of an object to dump "+s)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}g(tr,"writeNode");function Jd(e,t){var r=[],i=[],a,n;for(Bs(e,r,i),a=0,n=i.length;a<n;a+=1)t.duplicates.push(r[i[a]]);t.usedDuplicates=new Array(n)}g(Jd,"getDuplicateReferences");function Bs(e,t,r){var i,a,n;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)r.indexOf(a)===-1&&r.push(a);else if(t.push(e),Array.isArray(e))for(a=0,n=e.length;a<n;a+=1)Bs(e[a],t,r);else for(i=Object.keys(e),a=0,n=i.length;a<n;a+=1)Bs(e[i[a]],t,r)}g(Bs,"inspectNode");function sv(e,t){t=t||{};var r=new Nd(t);r.noRefs||Jd(e,r);var i=e;return r.replacer&&(i=r.replacer.call({"":i},"",i)),tr(r,0,i,!0,!0)?r.dump+`
`:""}g(sv,"dump$1");function ov(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}g(ov,"renamed");var lv=jp,cv=qx.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var Ee={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function Ga(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=qt(e),t=qt(t);const[r,i]=[e.x,e.y],[a,n]=[t.x,t.y],o=a-r,s=n-i;return{angle:Math.atan(s/o),deltaX:o,deltaY:s}}g(Ga,"calculateDeltaAndAngle");var qt=g(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),hv=g(e=>({x:g(function(t,r,i){let a=0;const n=qt(i[0]).x<qt(i[i.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(Ee,e.arrowTypeStart)){const{angle:d,deltaX:f}=Ga(i[0],i[1]);a=Ee[e.arrowTypeStart]*Math.cos(d)*(f>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(Ee,e.arrowTypeEnd)){const{angle:d,deltaX:f}=Ga(i[i.length-1],i[i.length-2]);a=Ee[e.arrowTypeEnd]*Math.cos(d)*(f>=0?1:-1)}const o=Math.abs(qt(t).x-qt(i[i.length-1]).x),s=Math.abs(qt(t).y-qt(i[i.length-1]).y),l=Math.abs(qt(t).x-qt(i[0]).x),c=Math.abs(qt(t).y-qt(i[0]).y),h=Ee[e.arrowTypeStart],u=Ee[e.arrowTypeEnd],p=1;if(o<u&&o>0&&s<u){let d=u+p-o;d*=n==="right"?-1:1,a-=d}if(l<h&&l>0&&c<h){let d=h+p-l;d*=n==="right"?-1:1,a+=d}return qt(t).x+a},"x"),y:g(function(t,r,i){let a=0;const n=qt(i[0]).y<qt(i[i.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(Ee,e.arrowTypeStart)){const{angle:d,deltaY:f}=Ga(i[0],i[1]);a=Ee[e.arrowTypeStart]*Math.abs(Math.sin(d))*(f>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(Ee,e.arrowTypeEnd)){const{angle:d,deltaY:f}=Ga(i[i.length-1],i[i.length-2]);a=Ee[e.arrowTypeEnd]*Math.abs(Math.sin(d))*(f>=0?1:-1)}const o=Math.abs(qt(t).y-qt(i[i.length-1]).y),s=Math.abs(qt(t).x-qt(i[i.length-1]).x),l=Math.abs(qt(t).y-qt(i[0]).y),c=Math.abs(qt(t).x-qt(i[0]).x),h=Ee[e.arrowTypeStart],u=Ee[e.arrowTypeEnd],p=1;if(o<u&&o>0&&s<u){let d=u+p-o;d*=n==="up"?-1:1,a-=d}if(l<h&&l>0&&c<h){let d=h+p-l;d*=n==="up"?-1:1,a+=d}return qt(t).y+a},"y")}),"getLineFunctionsWithOffset"),yc=g(({flowchart:e})=>{var a,n;const t=((a=e==null?void 0:e.subGraphTitleMargin)==null?void 0:a.top)??0,r=((n=e==null?void 0:e.subGraphTitleMargin)==null?void 0:n.bottom)??0,i=t+r;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:i}},"getSubGraphTitleMargins"),uv=g(e=>{const{handDrawnSeed:t}=St();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),la=g(e=>{const t=pv([...e.cssCompiledStyles||[],...e.cssStyles||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),pv=g(e=>{const t=new Map;return e.forEach(r=>{const[i,a]=r.split(":");t.set(i.trim(),a==null?void 0:a.trim())}),t},"styles2Map"),tf=g(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),st=g(e=>{const{stylesArray:t}=la(e),r=[],i=[],a=[],n=[];return t.forEach(o=>{const s=o[0];tf(s)?r.push(o.join(":")+" !important"):(i.push(o.join(":")+" !important"),s.includes("stroke")&&a.push(o.join(":")+" !important"),s==="fill"&&n.push(o.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:i.join(";"),stylesArray:t,borderStyles:a,backgroundStyles:n}},"styles2String"),it=g((e,t)=>{var l;const{themeVariables:r,handDrawnSeed:i}=St(),{nodeBorder:a,mainBkg:n}=r,{stylesMap:o}=la(e);return Object.assign({roughness:.7,fill:o.get("fill")||n,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||a,seed:i,strokeWidth:((l=o.get("stroke-width"))==null?void 0:l.replace("px",""))||1.3,fillLineDash:[0,0]},t)},"userNodeOverrides"),Na={},Zt={},Bh;function dv(){return Bh||(Bh=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.BLANK_URL=Zt.relativeFirstCharacters=Zt.whitespaceEscapeCharsRegex=Zt.urlSchemeRegex=Zt.ctrlCharactersRegex=Zt.htmlCtrlEntityRegex=Zt.htmlEntitiesRegex=Zt.invalidProtocolRegex=void 0,Zt.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Zt.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Zt.htmlCtrlEntityRegex=/&(newline|tab);/gi,Zt.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Zt.urlSchemeRegex=/^.+(:|&colon;)/gim,Zt.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Zt.relativeFirstCharacters=[".","/"],Zt.BLANK_URL="about:blank"),Zt}var Eh;function fv(){if(Eh)return Na;Eh=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.sanitizeUrl=void 0;var e=dv();function t(o){return e.relativeFirstCharacters.indexOf(o[0])>-1}function r(o){var s=o.replace(e.ctrlCharactersRegex,"");return s.replace(e.htmlEntitiesRegex,function(l,c){return String.fromCharCode(c)})}function i(o){return URL.canParse(o)}function a(o){try{return decodeURIComponent(o)}catch{return o}}function n(o){if(!o)return e.BLANK_URL;var s,l=a(o.trim());do l=r(l).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim(),l=a(l),s=l.match(e.ctrlCharactersRegex)||l.match(e.htmlEntitiesRegex)||l.match(e.htmlCtrlEntityRegex)||l.match(e.whitespaceEscapeCharsRegex);while(s&&s.length>0);var c=l;if(!c)return e.BLANK_URL;if(t(c))return c;var h=c.trimStart(),u=h.match(e.urlSchemeRegex);if(!u)return c;var p=u[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(p))return e.BLANK_URL;var d=h.replace(/\\/g,"/");if(p==="mailto:"||p.includes("://"))return d;if(p==="http:"||p==="https:"){if(!i(d))return e.BLANK_URL;var f=new URL(d);return f.protocol=f.protocol.toLowerCase(),f.hostname=f.hostname.toLowerCase(),f.toString()}return d}return Na.sanitizeUrl=n,Na}var gv=fv(),mv={value:()=>{}};function ef(){for(var e=0,t=arguments.length,r={},i;e<t;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new us(r)}function us(e){this._=e}function yv(e,t){return e.trim().split(/^|\s+/).map(function(r){var i="",a=r.indexOf(".");if(a>=0&&(i=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}us.prototype=ef.prototype={constructor:us,on:function(e,t){var r=this._,i=yv(e+"",r),a,n=-1,o=i.length;if(arguments.length<2){for(;++n<o;)if((a=(e=i[n]).type)&&(a=bv(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++n<o;)if(a=(e=i[n]).type)r[a]=$h(r[a],e.name,t);else if(t==null)for(a in r)r[a]=$h(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new us(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),i=0,a,n;i<a;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(n=this._[e],i=0,a=n.length;i<a;++i)n[i].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,n=i.length;a<n;++a)i[a].value.apply(t,r)}};function bv(e,t){for(var r=0,i=e.length,a;r<i;++r)if((a=e[r]).name===t)return a.value}function $h(e,t,r){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=mv,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:t,value:r}),e}var Ll="http://www.w3.org/1999/xhtml";const Fh={svg:"http://www.w3.org/2000/svg",xhtml:Ll,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function co(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Fh.hasOwnProperty(t)?{space:Fh[t],local:e}:e}function xv(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===Ll&&t.documentElement.namespaceURI===Ll?t.createElement(e):t.createElementNS(r,e)}}function vv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rf(e){var t=co(e);return(t.local?vv:xv)(t)}function _v(){}function bc(e){return e==null?_v:function(){return this.querySelector(e)}}function wv(e){typeof e!="function"&&(e=bc(e));for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a)for(var n=t[a],o=n.length,s=i[a]=new Array(o),l,c,h=0;h<o;++h)(l=n[h])&&(c=e.call(l,l.__data__,h,n))&&("__data__"in l&&(c.__data__=l.__data__),s[h]=c);return new Se(i,this._parents)}function Cv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function kv(){return[]}function af(e){return e==null?kv:function(){return this.querySelectorAll(e)}}function Sv(e){return function(){return Cv(e.apply(this,arguments))}}function Tv(e){typeof e=="function"?e=Sv(e):e=af(e);for(var t=this._groups,r=t.length,i=[],a=[],n=0;n<r;++n)for(var o=t[n],s=o.length,l,c=0;c<s;++c)(l=o[c])&&(i.push(e.call(l,l.__data__,c,o)),a.push(l));return new Se(i,a)}function nf(e){return function(){return this.matches(e)}}function sf(e){return function(t){return t.matches(e)}}var Mv=Array.prototype.find;function Lv(e){return function(){return Mv.call(this.children,e)}}function Av(){return this.firstElementChild}function Bv(e){return this.select(e==null?Av:Lv(typeof e=="function"?e:sf(e)))}var Ev=Array.prototype.filter;function $v(){return Array.from(this.children)}function Fv(e){return function(){return Ev.call(this.children,e)}}function Pv(e){return this.selectAll(e==null?$v:Fv(typeof e=="function"?e:sf(e)))}function Rv(e){typeof e!="function"&&(e=nf(e));for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a)for(var n=t[a],o=n.length,s=i[a]=[],l,c=0;c<o;++c)(l=n[c])&&e.call(l,l.__data__,c,n)&&s.push(l);return new Se(i,this._parents)}function of(e){return new Array(e.length)}function Dv(){return new Se(this._enter||this._groups.map(of),this._parents)}function Es(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Es.prototype={constructor:Es,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ov(e){return function(){return e}}function Iv(e,t,r,i,a,n){for(var o=0,s,l=t.length,c=n.length;o<c;++o)(s=t[o])?(s.__data__=n[o],i[o]=s):r[o]=new Es(e,n[o]);for(;o<l;++o)(s=t[o])&&(a[o]=s)}function Nv(e,t,r,i,a,n,o){var s,l,c=new Map,h=t.length,u=n.length,p=new Array(h),d;for(s=0;s<h;++s)(l=t[s])&&(p[s]=d=o.call(l,l.__data__,s,t)+"",c.has(d)?a[s]=l:c.set(d,l));for(s=0;s<u;++s)d=o.call(e,n[s],s,n)+"",(l=c.get(d))?(i[s]=l,l.__data__=n[s],c.delete(d)):r[s]=new Es(e,n[s]);for(s=0;s<h;++s)(l=t[s])&&c.get(p[s])===l&&(a[s]=l)}function qv(e){return e.__data__}function zv(e,t){if(!arguments.length)return Array.from(this,qv);var r=t?Nv:Iv,i=this._parents,a=this._groups;typeof e!="function"&&(e=Ov(e));for(var n=a.length,o=new Array(n),s=new Array(n),l=new Array(n),c=0;c<n;++c){var h=i[c],u=a[c],p=u.length,d=Wv(e.call(h,h&&h.__data__,c,i)),f=d.length,m=s[c]=new Array(f),y=o[c]=new Array(f),b=l[c]=new Array(p);r(h,u,m,y,b,d,t);for(var v=0,k=0,M,T;v<f;++v)if(M=m[v]){for(v>=k&&(k=v+1);!(T=y[k])&&++k<f;);M._next=T||null}}return o=new Se(o,i),o._enter=s,o._exit=l,o}function Wv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hv(){return new Se(this._exit||this._groups.map(of),this._parents)}function jv(e,t,r){var i=this.enter(),a=this,n=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?n.remove():r(n),i&&a?i.merge(a).order():a}function Vv(e){for(var t=e.selection?e.selection():e,r=this._groups,i=t._groups,a=r.length,n=i.length,o=Math.min(a,n),s=new Array(a),l=0;l<o;++l)for(var c=r[l],h=i[l],u=c.length,p=s[l]=new Array(u),d,f=0;f<u;++f)(d=c[f]||h[f])&&(p[f]=d);for(;l<a;++l)s[l]=r[l];return new Se(s,this._parents)}function Uv(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var i=e[t],a=i.length-1,n=i[a],o;--a>=0;)(o=i[a])&&(n&&o.compareDocumentPosition(n)^4&&n.parentNode.insertBefore(o,n),n=o);return this}function Yv(e){e||(e=Gv);function t(u,p){return u&&p?e(u.__data__,p.__data__):!u-!p}for(var r=this._groups,i=r.length,a=new Array(i),n=0;n<i;++n){for(var o=r[n],s=o.length,l=a[n]=new Array(s),c,h=0;h<s;++h)(c=o[h])&&(l[h]=c);l.sort(t)}return new Se(a,this._parents).order()}function Gv(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Xv(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Zv(){return Array.from(this)}function Kv(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],a=0,n=i.length;a<n;++a){var o=i[a];if(o)return o}return null}function Qv(){let e=0;for(const t of this)++e;return e}function Jv(){return!this.node()}function t1(e){for(var t=this._groups,r=0,i=t.length;r<i;++r)for(var a=t[r],n=0,o=a.length,s;n<o;++n)(s=a[n])&&e.call(s,s.__data__,n,a);return this}function e1(e){return function(){this.removeAttribute(e)}}function r1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function i1(e,t){return function(){this.setAttribute(e,t)}}function a1(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function n1(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function s1(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function o1(e,t){var r=co(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((t==null?r.local?r1:e1:typeof t=="function"?r.local?s1:n1:r.local?a1:i1)(r,t))}function lf(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function l1(e){return function(){this.style.removeProperty(e)}}function c1(e,t,r){return function(){this.style.setProperty(e,t,r)}}function h1(e,t,r){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function u1(e,t,r){return arguments.length>1?this.each((t==null?l1:typeof t=="function"?h1:c1)(e,t,r??"")):ia(this.node(),e)}function ia(e,t){return e.style.getPropertyValue(t)||lf(e).getComputedStyle(e,null).getPropertyValue(t)}function p1(e){return function(){delete this[e]}}function d1(e,t){return function(){this[e]=t}}function f1(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function g1(e,t){return arguments.length>1?this.each((t==null?p1:typeof t=="function"?f1:d1)(e,t)):this.node()[e]}function cf(e){return e.trim().split(/^|\s+/)}function xc(e){return e.classList||new hf(e)}function hf(e){this._node=e,this._names=cf(e.getAttribute("class")||"")}hf.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function uf(e,t){for(var r=xc(e),i=-1,a=t.length;++i<a;)r.add(t[i])}function pf(e,t){for(var r=xc(e),i=-1,a=t.length;++i<a;)r.remove(t[i])}function m1(e){return function(){uf(this,e)}}function y1(e){return function(){pf(this,e)}}function b1(e,t){return function(){(t.apply(this,arguments)?uf:pf)(this,e)}}function x1(e,t){var r=cf(e+"");if(arguments.length<2){for(var i=xc(this.node()),a=-1,n=r.length;++a<n;)if(!i.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?b1:t?m1:y1)(r,t))}function v1(){this.textContent=""}function _1(e){return function(){this.textContent=e}}function w1(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function C1(e){return arguments.length?this.each(e==null?v1:(typeof e=="function"?w1:_1)(e)):this.node().textContent}function k1(){this.innerHTML=""}function S1(e){return function(){this.innerHTML=e}}function T1(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function M1(e){return arguments.length?this.each(e==null?k1:(typeof e=="function"?T1:S1)(e)):this.node().innerHTML}function L1(){this.nextSibling&&this.parentNode.appendChild(this)}function A1(){return this.each(L1)}function B1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function E1(){return this.each(B1)}function $1(e){var t=typeof e=="function"?e:rf(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function F1(){return null}function P1(e,t){var r=typeof e=="function"?e:rf(e),i=t==null?F1:typeof t=="function"?t:bc(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function R1(){var e=this.parentNode;e&&e.removeChild(this)}function D1(){return this.each(R1)}function O1(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function I1(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function N1(e){return this.select(e?I1:O1)}function q1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function z1(e){return function(t){e.call(this,t,this.__data__)}}function W1(e){return e.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");return i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),{type:t,name:r}})}function H1(e){return function(){var t=this.__on;if(t){for(var r=0,i=-1,a=t.length,n;r<a;++r)n=t[r],(!e.type||n.type===e.type)&&n.name===e.name?this.removeEventListener(n.type,n.listener,n.options):t[++i]=n;++i?t.length=i:delete this.__on}}}function j1(e,t,r){return function(){var i=this.__on,a,n=z1(t);if(i){for(var o=0,s=i.length;o<s;++o)if((a=i[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=n,a.options=r),a.value=t;return}}this.addEventListener(e.type,n,r),a={type:e.type,name:e.name,value:t,listener:n,options:r},i?i.push(a):this.__on=[a]}}function V1(e,t,r){var i=W1(e+""),a,n=i.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,h;l<c;++l)for(a=0,h=s[l];a<n;++a)if((o=i[a]).type===h.type&&o.name===h.name)return h.value}return}for(s=t?j1:H1,a=0;a<n;++a)this.each(s(i[a],t,r));return this}function df(e,t,r){var i=lf(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,r):(a=i.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function U1(e,t){return function(){return df(this,e,t)}}function Y1(e,t){return function(){return df(this,e,t.apply(this,arguments))}}function G1(e,t){return this.each((typeof t=="function"?Y1:U1)(e,t))}function*X1(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],a=0,n=i.length,o;a<n;++a)(o=i[a])&&(yield o)}var ff=[null];function Se(e,t){this._groups=e,this._parents=t}function wn(){return new Se([[document.documentElement]],ff)}function Z1(){return this}Se.prototype=wn.prototype={constructor:Se,select:wv,selectAll:Tv,selectChild:Bv,selectChildren:Pv,filter:Rv,data:zv,enter:Dv,exit:Hv,join:jv,merge:Vv,selection:Z1,order:Uv,sort:Yv,call:Xv,nodes:Zv,node:Kv,size:Qv,empty:Jv,each:t1,attr:o1,style:u1,property:g1,classed:x1,text:C1,html:M1,raise:A1,lower:E1,append:$1,insert:P1,remove:D1,clone:N1,datum:q1,on:V1,dispatch:G1,[Symbol.iterator]:X1};function vt(e){return typeof e=="string"?new Se([[document.querySelector(e)]],[document.documentElement]):new Se([[e]],ff)}function vc(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function gf(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function Cn(){}var un=.7,$s=1/un,zi="\\s*([+-]?\\d+)\\s*",pn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",K1=/^#([0-9a-f]{3,8})$/,Q1=new RegExp(`^rgb\\(${zi},${zi},${zi}\\)$`),J1=new RegExp(`^rgb\\(${Qe},${Qe},${Qe}\\)$`),t_=new RegExp(`^rgba\\(${zi},${zi},${zi},${pn}\\)$`),e_=new RegExp(`^rgba\\(${Qe},${Qe},${Qe},${pn}\\)$`),r_=new RegExp(`^hsl\\(${pn},${Qe},${Qe}\\)$`),i_=new RegExp(`^hsla\\(${pn},${Qe},${Qe},${pn}\\)$`),Ph={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vc(Cn,dn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Rh,formatHex:Rh,formatHex8:a_,formatHsl:n_,formatRgb:Dh,toString:Dh});function Rh(){return this.rgb().formatHex()}function a_(){return this.rgb().formatHex8()}function n_(){return mf(this).formatHsl()}function Dh(){return this.rgb().formatRgb()}function dn(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=K1.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Oh(t):r===3?new xe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Zn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Zn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Q1.exec(e))?new xe(t[1],t[2],t[3],1):(t=J1.exec(e))?new xe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=t_.exec(e))?Zn(t[1],t[2],t[3],t[4]):(t=e_.exec(e))?Zn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=r_.exec(e))?qh(t[1],t[2]/100,t[3]/100,1):(t=i_.exec(e))?qh(t[1],t[2]/100,t[3]/100,t[4]):Ph.hasOwnProperty(e)?Oh(Ph[e]):e==="transparent"?new xe(NaN,NaN,NaN,0):null}function Oh(e){return new xe(e>>16&255,e>>8&255,e&255,1)}function Zn(e,t,r,i){return i<=0&&(e=t=r=NaN),new xe(e,t,r,i)}function s_(e){return e instanceof Cn||(e=dn(e)),e?(e=e.rgb(),new xe(e.r,e.g,e.b,e.opacity)):new xe}function Al(e,t,r,i){return arguments.length===1?s_(e):new xe(e,t,r,i??1)}function xe(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}vc(xe,Al,gf(Cn,{brighter(e){return e=e==null?$s:Math.pow($s,e),new xe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?un:Math.pow(un,e),new xe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xe(Jr(this.r),Jr(this.g),Jr(this.b),Fs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ih,formatHex:Ih,formatHex8:o_,formatRgb:Nh,toString:Nh}));function Ih(){return`#${Kr(this.r)}${Kr(this.g)}${Kr(this.b)}`}function o_(){return`#${Kr(this.r)}${Kr(this.g)}${Kr(this.b)}${Kr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Nh(){const e=Fs(this.opacity);return`${e===1?"rgb(":"rgba("}${Jr(this.r)}, ${Jr(this.g)}, ${Jr(this.b)}${e===1?")":`, ${e})`}`}function Fs(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Kr(e){return e=Jr(e),(e<16?"0":"")+e.toString(16)}function qh(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ie(e,t,r,i)}function mf(e){if(e instanceof Ie)return new Ie(e.h,e.s,e.l,e.opacity);if(e instanceof Cn||(e=dn(e)),!e)return new Ie;if(e instanceof Ie)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,a=Math.min(t,r,i),n=Math.max(t,r,i),o=NaN,s=n-a,l=(n+a)/2;return s?(t===n?o=(r-i)/s+(r<i)*6:r===n?o=(i-t)/s+2:o=(t-r)/s+4,s/=l<.5?n+a:2-n-a,o*=60):s=l>0&&l<1?0:o,new Ie(o,s,l,e.opacity)}function l_(e,t,r,i){return arguments.length===1?mf(e):new Ie(e,t,r,i??1)}function Ie(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}vc(Ie,l_,gf(Cn,{brighter(e){return e=e==null?$s:Math.pow($s,e),new Ie(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?un:Math.pow(un,e),new Ie(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,a=2*r-i;return new xe(Vo(e>=240?e-240:e+120,a,i),Vo(e,a,i),Vo(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new Ie(zh(this.h),Kn(this.s),Kn(this.l),Fs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Fs(this.opacity);return`${e===1?"hsl(":"hsla("}${zh(this.h)}, ${Kn(this.s)*100}%, ${Kn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function zh(e){return e=(e||0)%360,e<0?e+360:e}function Kn(e){return Math.max(0,Math.min(1,e||0))}function Vo(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const _c=e=>()=>e;function yf(e,t){return function(r){return e+r*t}}function c_(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function fE(e,t){var r=t-e;return r?yf(e,r>180||r<-180?r-360*Math.round(r/360):r):_c(isNaN(e)?t:e)}function h_(e){return(e=+e)==1?bf:function(t,r){return r-t?c_(t,r,e):_c(isNaN(t)?r:t)}}function bf(e,t){var r=t-e;return r?yf(e,r):_c(isNaN(e)?t:e)}const Wh=function e(t){var r=h_(t);function i(a,n){var o=r((a=Al(a)).r,(n=Al(n)).r),s=r(a.g,n.g),l=r(a.b,n.b),c=bf(a.opacity,n.opacity);return function(h){return a.r=o(h),a.g=s(h),a.b=l(h),a.opacity=c(h),a+""}}return i.gamma=e,i}(1);function Tr(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var Bl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Uo=new RegExp(Bl.source,"g");function u_(e){return function(){return e}}function p_(e){return function(t){return e(t)+""}}function d_(e,t){var r=Bl.lastIndex=Uo.lastIndex=0,i,a,n,o=-1,s=[],l=[];for(e=e+"",t=t+"";(i=Bl.exec(e))&&(a=Uo.exec(t));)(n=a.index)>r&&(n=t.slice(r,n),s[o]?s[o]+=n:s[++o]=n),(i=i[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:Tr(i,a)})),r=Uo.lastIndex;return r<t.length&&(n=t.slice(r),s[o]?s[o]+=n:s[++o]=n),s.length<2?l[0]?p_(l[0].x):u_(t):(t=l.length,function(c){for(var h=0,u;h<t;++h)s[(u=l[h]).i]=u.x(c);return s.join("")})}var Hh=180/Math.PI,El={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xf(e,t,r,i,a,n){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*r+t*i)&&(r-=e*l,i-=t*l),(s=Math.sqrt(r*r+i*i))&&(r/=s,i/=s,l/=s),e*i<t*r&&(e=-e,t=-t,l=-l,o=-o),{translateX:a,translateY:n,rotate:Math.atan2(t,e)*Hh,skewX:Math.atan(l)*Hh,scaleX:o,scaleY:s}}var Qn;function f_(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?El:xf(t.a,t.b,t.c,t.d,t.e,t.f)}function g_(e){return e==null||(Qn||(Qn=document.createElementNS("http://www.w3.org/2000/svg","g")),Qn.setAttribute("transform",e),!(e=Qn.transform.baseVal.consolidate()))?El:(e=e.matrix,xf(e.a,e.b,e.c,e.d,e.e,e.f))}function vf(e,t,r,i){function a(c){return c.length?c.pop()+" ":""}function n(c,h,u,p,d,f){if(c!==u||h!==p){var m=d.push("translate(",null,t,null,r);f.push({i:m-4,x:Tr(c,u)},{i:m-2,x:Tr(h,p)})}else(u||p)&&d.push("translate("+u+t+p+r)}function o(c,h,u,p){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),p.push({i:u.push(a(u)+"rotate(",null,i)-2,x:Tr(c,h)})):h&&u.push(a(u)+"rotate("+h+i)}function s(c,h,u,p){c!==h?p.push({i:u.push(a(u)+"skewX(",null,i)-2,x:Tr(c,h)}):h&&u.push(a(u)+"skewX("+h+i)}function l(c,h,u,p,d,f){if(c!==u||h!==p){var m=d.push(a(d)+"scale(",null,",",null,")");f.push({i:m-4,x:Tr(c,u)},{i:m-2,x:Tr(h,p)})}else(u!==1||p!==1)&&d.push(a(d)+"scale("+u+","+p+")")}return function(c,h){var u=[],p=[];return c=e(c),h=e(h),n(c.translateX,c.translateY,h.translateX,h.translateY,u,p),o(c.rotate,h.rotate,u,p),s(c.skewX,h.skewX,u,p),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,u,p),c=h=null,function(d){for(var f=-1,m=p.length,y;++f<m;)u[(y=p[f]).i]=y.x(d);return u.join("")}}}var m_=vf(f_,"px, ","px)","deg)"),y_=vf(g_,", ",")",")"),aa=0,Xa=0,qa=0,_f=1e3,Ps,Za,Rs=0,ai=0,ho=0,fn=typeof performance=="object"&&performance.now?performance:Date,wf=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function wc(){return ai||(wf(b_),ai=fn.now()+ho)}function b_(){ai=0}function Ds(){this._call=this._time=this._next=null}Ds.prototype=Cf.prototype={constructor:Ds,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?wc():+r)+(t==null?0:+t),!this._next&&Za!==this&&(Za?Za._next=this:Ps=this,Za=this),this._call=e,this._time=r,$l()},stop:function(){this._call&&(this._call=null,this._time=1/0,$l())}};function Cf(e,t,r){var i=new Ds;return i.restart(e,t,r),i}function x_(){wc(),++aa;for(var e=Ps,t;e;)(t=ai-e._time)>=0&&e._call.call(void 0,t),e=e._next;--aa}function jh(){ai=(Rs=fn.now())+ho,aa=Xa=0;try{x_()}finally{aa=0,__(),ai=0}}function v_(){var e=fn.now(),t=e-Rs;t>_f&&(ho-=t,Rs=e)}function __(){for(var e,t=Ps,r,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Ps=r);Za=e,$l(i)}function $l(e){if(!aa){Xa&&(Xa=clearTimeout(Xa));var t=e-ai;t>24?(e<1/0&&(Xa=setTimeout(jh,e-fn.now()-ho)),qa&&(qa=clearInterval(qa))):(qa||(Rs=fn.now(),qa=setInterval(v_,_f)),aa=1,wf(jh))}}function Vh(e,t,r){var i=new Ds;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,r),i}var w_=ef("start","end","cancel","interrupt"),C_=[],kf=0,Uh=1,Fl=2,ps=3,Yh=4,Pl=5,ds=6;function uo(e,t,r,i,a,n){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;k_(e,r,{name:t,index:i,group:a,on:w_,tween:C_,time:n.time,delay:n.delay,duration:n.duration,ease:n.ease,timer:null,state:kf})}function Cc(e,t){var r=ze(e,t);if(r.state>kf)throw new Error("too late; already scheduled");return r}function er(e,t){var r=ze(e,t);if(r.state>ps)throw new Error("too late; already running");return r}function ze(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function k_(e,t,r){var i=e.__transition,a;i[t]=r,r.timer=Cf(n,0,r.time);function n(c){r.state=Uh,r.timer.restart(o,r.delay,r.time),r.delay<=c&&o(c-r.delay)}function o(c){var h,u,p,d;if(r.state!==Uh)return l();for(h in i)if(d=i[h],d.name===r.name){if(d.state===ps)return Vh(o);d.state===Yh?(d.state=ds,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[h]):+h<t&&(d.state=ds,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[h])}if(Vh(function(){r.state===ps&&(r.state=Yh,r.timer.restart(s,r.delay,r.time),s(c))}),r.state=Fl,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Fl){for(r.state=ps,a=new Array(p=r.tween.length),h=0,u=-1;h<p;++h)(d=r.tween[h].value.call(e,e.__data__,r.index,r.group))&&(a[++u]=d);a.length=u+1}}function s(c){for(var h=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(l),r.state=Pl,1),u=-1,p=a.length;++u<p;)a[u].call(e,h);r.state===Pl&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=ds,r.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function S_(e,t){var r=e.__transition,i,a,n=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((i=r[o]).name!==t){n=!1;continue}a=i.state>Fl&&i.state<Pl,i.state=ds,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[o]}n&&delete e.__transition}}function T_(e){return this.each(function(){S_(this,e)})}function M_(e,t){var r,i;return function(){var a=er(this,e),n=a.tween;if(n!==r){i=r=n;for(var o=0,s=i.length;o<s;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}a.tween=i}}function L_(e,t,r){var i,a;if(typeof r!="function")throw new Error;return function(){var n=er(this,e),o=n.tween;if(o!==i){a=(i=o).slice();for(var s={name:t,value:r},l=0,c=a.length;l<c;++l)if(a[l].name===t){a[l]=s;break}l===c&&a.push(s)}n.tween=a}}function A_(e,t){var r=this._id;if(e+="",arguments.length<2){for(var i=ze(this.node(),r).tween,a=0,n=i.length,o;a<n;++a)if((o=i[a]).name===e)return o.value;return null}return this.each((t==null?M_:L_)(r,e,t))}function kc(e,t,r){var i=e._id;return e.each(function(){var a=er(this,i);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return ze(a,i).value[t]}}function Sf(e,t){var r;return(typeof t=="number"?Tr:t instanceof dn?Wh:(r=dn(t))?(t=r,Wh):d_)(e,t)}function B_(e){return function(){this.removeAttribute(e)}}function E_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $_(e,t,r){var i,a=r+"",n;return function(){var o=this.getAttribute(e);return o===a?null:o===i?n:n=t(i=o,r)}}function F_(e,t,r){var i,a=r+"",n;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===i?n:n=t(i=o,r)}}function P_(e,t,r){var i,a,n;return function(){var o,s=r(this),l;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=s+"",o===l?null:o===i&&l===a?n:(a=l,n=t(i=o,s)))}}function R_(e,t,r){var i,a,n;return function(){var o,s=r(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=s+"",o===l?null:o===i&&l===a?n:(a=l,n=t(i=o,s)))}}function D_(e,t){var r=co(e),i=r==="transform"?y_:Sf;return this.attrTween(e,typeof t=="function"?(r.local?R_:P_)(r,i,kc(this,"attr."+e,t)):t==null?(r.local?E_:B_)(r):(r.local?F_:$_)(r,i,t))}function O_(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function I_(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function N_(e,t){var r,i;function a(){var n=t.apply(this,arguments);return n!==i&&(r=(i=n)&&I_(e,n)),r}return a._value=t,a}function q_(e,t){var r,i;function a(){var n=t.apply(this,arguments);return n!==i&&(r=(i=n)&&O_(e,n)),r}return a._value=t,a}function z_(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var i=co(e);return this.tween(r,(i.local?N_:q_)(i,t))}function W_(e,t){return function(){Cc(this,e).delay=+t.apply(this,arguments)}}function H_(e,t){return t=+t,function(){Cc(this,e).delay=t}}function j_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?W_:H_)(t,e)):ze(this.node(),t).delay}function V_(e,t){return function(){er(this,e).duration=+t.apply(this,arguments)}}function U_(e,t){return t=+t,function(){er(this,e).duration=t}}function Y_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?V_:U_)(t,e)):ze(this.node(),t).duration}function G_(e,t){if(typeof t!="function")throw new Error;return function(){er(this,e).ease=t}}function X_(e){var t=this._id;return arguments.length?this.each(G_(t,e)):ze(this.node(),t).ease}function Z_(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;er(this,e).ease=r}}function K_(e){if(typeof e!="function")throw new Error;return this.each(Z_(this._id,e))}function Q_(e){typeof e!="function"&&(e=nf(e));for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a)for(var n=t[a],o=n.length,s=i[a]=[],l,c=0;c<o;++c)(l=n[c])&&e.call(l,l.__data__,c,n)&&s.push(l);return new fr(i,this._parents,this._name,this._id)}function J_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,i=t.length,a=r.length,n=Math.min(i,a),o=new Array(i),s=0;s<n;++s)for(var l=t[s],c=r[s],h=l.length,u=o[s]=new Array(h),p,d=0;d<h;++d)(p=l[d]||c[d])&&(u[d]=p);for(;s<i;++s)o[s]=t[s];return new fr(o,this._parents,this._name,this._id)}function t2(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function e2(e,t,r){var i,a,n=t2(t)?Cc:er;return function(){var o=n(this,e),s=o.on;s!==i&&(a=(i=s).copy()).on(t,r),o.on=a}}function r2(e,t){var r=this._id;return arguments.length<2?ze(this.node(),r).on.on(e):this.each(e2(r,e,t))}function i2(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function a2(){return this.on("end.remove",i2(this._id))}function n2(e){var t=this._name,r=this._id;typeof e!="function"&&(e=bc(e));for(var i=this._groups,a=i.length,n=new Array(a),o=0;o<a;++o)for(var s=i[o],l=s.length,c=n[o]=new Array(l),h,u,p=0;p<l;++p)(h=s[p])&&(u=e.call(h,h.__data__,p,s))&&("__data__"in h&&(u.__data__=h.__data__),c[p]=u,uo(c[p],t,r,p,c,ze(h,r)));return new fr(n,this._parents,t,r)}function s2(e){var t=this._name,r=this._id;typeof e!="function"&&(e=af(e));for(var i=this._groups,a=i.length,n=[],o=[],s=0;s<a;++s)for(var l=i[s],c=l.length,h,u=0;u<c;++u)if(h=l[u]){for(var p=e.call(h,h.__data__,u,l),d,f=ze(h,r),m=0,y=p.length;m<y;++m)(d=p[m])&&uo(d,t,r,m,p,f);n.push(p),o.push(h)}return new fr(n,o,t,r)}var o2=wn.prototype.constructor;function l2(){return new o2(this._groups,this._parents)}function c2(e,t){var r,i,a;return function(){var n=ia(this,e),o=(this.style.removeProperty(e),ia(this,e));return n===o?null:n===r&&o===i?a:a=t(r=n,i=o)}}function Tf(e){return function(){this.style.removeProperty(e)}}function h2(e,t,r){var i,a=r+"",n;return function(){var o=ia(this,e);return o===a?null:o===i?n:n=t(i=o,r)}}function u2(e,t,r){var i,a,n;return function(){var o=ia(this,e),s=r(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),ia(this,e))),o===l?null:o===i&&l===a?n:(a=l,n=t(i=o,s))}}function p2(e,t){var r,i,a,n="style."+t,o="end."+n,s;return function(){var l=er(this,e),c=l.on,h=l.value[n]==null?s||(s=Tf(t)):void 0;(c!==r||a!==h)&&(i=(r=c).copy()).on(o,a=h),l.on=i}}function d2(e,t,r){var i=(e+="")=="transform"?m_:Sf;return t==null?this.styleTween(e,c2(e,i)).on("end.style."+e,Tf(e)):typeof t=="function"?this.styleTween(e,u2(e,i,kc(this,"style."+e,t))).each(p2(this._id,e)):this.styleTween(e,h2(e,i,t),r).on("end.style."+e,null)}function f2(e,t,r){return function(i){this.style.setProperty(e,t.call(this,i),r)}}function g2(e,t,r){var i,a;function n(){var o=t.apply(this,arguments);return o!==a&&(i=(a=o)&&f2(e,o,r)),i}return n._value=t,n}function m2(e,t,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,g2(e,t,r??""))}function y2(e){return function(){this.textContent=e}}function b2(e){return function(){var t=e(this);this.textContent=t??""}}function x2(e){return this.tween("text",typeof e=="function"?b2(kc(this,"text",e)):y2(e==null?"":e+""))}function v2(e){return function(t){this.textContent=e.call(this,t)}}function _2(e){var t,r;function i(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&v2(a)),t}return i._value=e,i}function w2(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,_2(e))}function C2(){for(var e=this._name,t=this._id,r=Mf(),i=this._groups,a=i.length,n=0;n<a;++n)for(var o=i[n],s=o.length,l,c=0;c<s;++c)if(l=o[c]){var h=ze(l,t);uo(l,e,r,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new fr(i,this._parents,e,r)}function k2(){var e,t,r=this,i=r._id,a=r.size();return new Promise(function(n,o){var s={value:o},l={value:function(){--a===0&&n()}};r.each(function(){var c=er(this,i),h=c.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),a===0&&n()})}var S2=0;function fr(e,t,r,i){this._groups=e,this._parents=t,this._name=r,this._id=i}function Mf(){return++S2}var sr=wn.prototype;fr.prototype={constructor:fr,select:n2,selectAll:s2,selectChild:sr.selectChild,selectChildren:sr.selectChildren,filter:Q_,merge:J_,selection:l2,transition:C2,call:sr.call,nodes:sr.nodes,node:sr.node,size:sr.size,empty:sr.empty,each:sr.each,on:r2,attr:D_,attrTween:z_,style:d2,styleTween:m2,text:x2,textTween:w2,remove:a2,tween:A_,delay:j_,duration:Y_,ease:X_,easeVarying:K_,end:k2,[Symbol.iterator]:sr[Symbol.iterator]};function T2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var M2={time:null,delay:0,duration:250,ease:T2};function L2(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function A2(e){var t,r;e instanceof fr?(t=e._id,e=e._name):(t=Mf(),(r=M2).time=wc(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,n=0;n<a;++n)for(var o=i[n],s=o.length,l,c=0;c<s;++c)(l=o[c])&&uo(l,e,t,c,o,r||L2(l,t));return new fr(i,this._parents,e,t)}wn.prototype.interrupt=T_;wn.prototype.transition=A2;const Rl=Math.PI,Dl=2*Rl,Vr=1e-6,B2=Dl-Vr;function Lf(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function E2(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Lf;const r=10**t;return function(i){this._+=i[0];for(let a=1,n=i.length;a<n;++a)this._+=Math.round(arguments[a]*r)/r+i[a]}}class $2{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Lf:E2(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,i,a){this._append`Q${+t},${+r},${this._x1=+i},${this._y1=+a}`}bezierCurveTo(t,r,i,a,n,o){this._append`C${+t},${+r},${+i},${+a},${this._x1=+n},${this._y1=+o}`}arcTo(t,r,i,a,n){if(t=+t,r=+r,i=+i,a=+a,n=+n,n<0)throw new Error(`negative radius: ${n}`);let o=this._x1,s=this._y1,l=i-t,c=a-r,h=o-t,u=s-r,p=h*h+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Vr)if(!(Math.abs(u*l-c*h)>Vr)||!n)this._append`L${this._x1=t},${this._y1=r}`;else{let d=i-o,f=a-s,m=l*l+c*c,y=d*d+f*f,b=Math.sqrt(m),v=Math.sqrt(p),k=n*Math.tan((Rl-Math.acos((m+p-y)/(2*b*v)))/2),M=k/v,T=k/b;Math.abs(M-1)>Vr&&this._append`L${t+M*h},${r+M*u}`,this._append`A${n},${n},0,0,${+(u*d>h*f)},${this._x1=t+T*l},${this._y1=r+T*c}`}}arc(t,r,i,a,n,o){if(t=+t,r=+r,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let s=i*Math.cos(a),l=i*Math.sin(a),c=t+s,h=r+l,u=1^o,p=o?a-n:n-a;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>Vr||Math.abs(this._y1-h)>Vr)&&this._append`L${c},${h}`,i&&(p<0&&(p=p%Dl+Dl),p>B2?this._append`A${i},${i},0,1,${u},${t-s},${r-l}A${i},${i},0,1,${u},${this._x1=c},${this._y1=h}`:p>Vr&&this._append`A${i},${i},0,${+(p>=Rl)},${u},${this._x1=t+i*Math.cos(n)},${this._y1=r+i*Math.sin(n)}`)}rect(t,r,i,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${i=+i}v${+a}h${-i}Z`}toString(){return this._}}function Ri(e){return function(){return e}}const gE=Math.abs,mE=Math.atan2,yE=Math.cos,bE=Math.max,xE=Math.min,vE=Math.sin,_E=Math.sqrt,Gh=1e-12,Sc=Math.PI,Xh=Sc/2,wE=2*Sc;function CE(e){return e>1?0:e<-1?Sc:Math.acos(e)}function kE(e){return e>=1?Xh:e<=-1?-Xh:Math.asin(e)}function F2(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const i=Math.floor(r);if(!(i>=0))throw new RangeError(`invalid digits: ${r}`);t=i}return e},()=>new $2(t)}function P2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Af(e){this._context=e}Af.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Os(e){return new Af(e)}function R2(e){return e[0]}function D2(e){return e[1]}function O2(e,t){var r=Ri(!0),i=null,a=Os,n=null,o=F2(s);e=typeof e=="function"?e:e===void 0?R2:Ri(e),t=typeof t=="function"?t:t===void 0?D2:Ri(t);function s(l){var c,h=(l=P2(l)).length,u,p=!1,d;for(i==null&&(n=a(d=o())),c=0;c<=h;++c)!(c<h&&r(u=l[c],c,l))===p&&((p=!p)?n.lineStart():n.lineEnd()),p&&n.point(+e(u,c,l),+t(u,c,l));if(d)return n=null,d+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Ri(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Ri(+l),s):t},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Ri(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,i!=null&&(n=a(i)),s):a},s.context=function(l){return arguments.length?(l==null?i=n=null:n=a(i=l),s):i},s}class Bf{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Ef(e){return new Bf(e,!0)}function $f(e){return new Bf(e,!1)}function Br(){}function Is(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function po(e){this._context=e}po.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Is(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Is(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fs(e){return new po(e)}function Ff(e){this._context=e}Ff.prototype={areaStart:Br,areaEnd:Br,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Is(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function I2(e){return new Ff(e)}function Pf(e){this._context=e}Pf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:Is(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function N2(e){return new Pf(e)}function Rf(e,t){this._basis=new po(e),this._beta=t}Rf.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var i=e[0],a=t[0],n=e[r]-i,o=t[r]-a,s=-1,l;++s<=r;)l=s/r,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+l*n),this._beta*t[s]+(1-this._beta)*(a+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const q2=function e(t){function r(i){return t===1?new po(i):new Rf(i,t)}return r.beta=function(i){return e(+i)},r}(.85);function Ns(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function Tc(e,t){this._context=e,this._k=(1-t)/6}Tc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ns(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Ns(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Df=function e(t){function r(i){return new Tc(i,t)}return r.tension=function(i){return e(+i)},r}(0);function Mc(e,t){this._context=e,this._k=(1-t)/6}Mc.prototype={areaStart:Br,areaEnd:Br,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ns(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const z2=function e(t){function r(i){return new Mc(i,t)}return r.tension=function(i){return e(+i)},r}(0);function Lc(e,t){this._context=e,this._k=(1-t)/6}Lc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ns(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const W2=function e(t){function r(i){return new Lc(i,t)}return r.tension=function(i){return e(+i)},r}(0);function Ac(e,t,r){var i=e._x1,a=e._y1,n=e._x2,o=e._y2;if(e._l01_a>Gh){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,a=(a*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Gh){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);n=(n*c+e._x1*e._l23_2a-t*e._l12_2a)/h,o=(o*c+e._y1*e._l23_2a-r*e._l12_2a)/h}e._context.bezierCurveTo(i,a,n,o,e._x2,e._y2)}function Of(e,t){this._context=e,this._alpha=t}Of.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Ac(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const If=function e(t){function r(i){return t?new Of(i,t):new Tc(i,0)}return r.alpha=function(i){return e(+i)},r}(.5);function Nf(e,t){this._context=e,this._alpha=t}Nf.prototype={areaStart:Br,areaEnd:Br,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ac(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const H2=function e(t){function r(i){return t?new Nf(i,t):new Mc(i,0)}return r.alpha=function(i){return e(+i)},r}(.5);function qf(e,t){this._context=e,this._alpha=t}qf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ac(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const j2=function e(t){function r(i){return t?new qf(i,t):new Lc(i,0)}return r.alpha=function(i){return e(+i)},r}(.5);function zf(e){this._context=e}zf.prototype={areaStart:Br,areaEnd:Br,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function V2(e){return new zf(e)}function Zh(e){return e<0?-1:1}function Kh(e,t,r){var i=e._x1-e._x0,a=t-e._x1,n=(e._y1-e._y0)/(i||a<0&&-0),o=(r-e._y1)/(a||i<0&&-0),s=(n*a+o*i)/(i+a);return(Zh(n)+Zh(o))*Math.min(Math.abs(n),Math.abs(o),.5*Math.abs(s))||0}function Qh(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Yo(e,t,r){var i=e._x0,a=e._y0,n=e._x1,o=e._y1,s=(n-i)/3;e._context.bezierCurveTo(i+s,a+s*t,n-s,o-s*r,n,o)}function qs(e){this._context=e}qs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Yo(this,this._t0,Qh(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Yo(this,Qh(this,r=Kh(this,e,t)),r);break;default:Yo(this,this._t0,r=Kh(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Wf(e){this._context=new Hf(e)}(Wf.prototype=Object.create(qs.prototype)).point=function(e,t){qs.prototype.point.call(this,t,e)};function Hf(e){this._context=e}Hf.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,i,a,n){this._context.bezierCurveTo(t,e,i,r,n,a)}};function jf(e){return new qs(e)}function Vf(e){return new Wf(e)}function Uf(e){this._context=e}Uf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var i=Jh(e),a=Jh(t),n=0,o=1;o<r;++n,++o)this._context.bezierCurveTo(i[0][n],a[0][n],i[1][n],a[1][n],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Jh(e){var t,r=e.length-1,i,a=new Array(r),n=new Array(r),o=new Array(r);for(a[0]=0,n[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,n[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,n[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)i=a[t]/n[t-1],n[t]-=i,o[t]-=i*o[t-1];for(a[r-1]=o[r-1]/n[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/n[t];for(n[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)n[t]=2*e[t+1]-a[t+1];return[a,n]}function Yf(e){return new Uf(e)}function fo(e,t){this._context=e,this._t=t}fo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Gf(e){return new fo(e,.5)}function Xf(e){return new fo(e,0)}function Zf(e){return new fo(e,1)}function Ka(e,t,r){this.k=e,this.x=t,this.y=r}Ka.prototype={constructor:Ka,scale:function(e){return e===1?this:new Ka(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ka(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ka.prototype;var Kf=typeof global=="object"&&global&&global.Object===Object&&global,U2=typeof self=="object"&&self&&self.Object===Object&&self,rr=Kf||U2||Function("return this")(),zs=rr.Symbol,Qf=Object.prototype,Y2=Qf.hasOwnProperty,G2=Qf.toString,za=zs?zs.toStringTag:void 0;function X2(e){var t=Y2.call(e,za),r=e[za];try{e[za]=void 0;var i=!0}catch{}var a=G2.call(e);return i&&(t?e[za]=r:delete e[za]),a}var Z2=Object.prototype,K2=Z2.toString;function Q2(e){return K2.call(e)}var J2="[object Null]",tw="[object Undefined]",tu=zs?zs.toStringTag:void 0;function ca(e){return e==null?e===void 0?tw:J2:tu&&tu in Object(e)?X2(e):Q2(e)}function li(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ew="[object AsyncFunction]",rw="[object Function]",iw="[object GeneratorFunction]",aw="[object Proxy]";function Bc(e){if(!li(e))return!1;var t=ca(e);return t==rw||t==iw||t==ew||t==aw}var Go=rr["__core-js_shared__"],eu=function(){var e=/[^.]+$/.exec(Go&&Go.keys&&Go.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function nw(e){return!!eu&&eu in e}var sw=Function.prototype,ow=sw.toString;function ci(e){if(e!=null){try{return ow.call(e)}catch{}try{return e+""}catch{}}return""}var lw=/[\\^$.*+?()[\]{}|]/g,cw=/^\[object .+?Constructor\]$/,hw=Function.prototype,uw=Object.prototype,pw=hw.toString,dw=uw.hasOwnProperty,fw=RegExp("^"+pw.call(dw).replace(lw,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gw(e){if(!li(e)||nw(e))return!1;var t=Bc(e)?fw:cw;return t.test(ci(e))}function mw(e,t){return e==null?void 0:e[t]}function hi(e,t){var r=mw(e,t);return gw(r)?r:void 0}var gn=hi(Object,"create");function yw(){this.__data__=gn?gn(null):{},this.size=0}function bw(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var xw="__lodash_hash_undefined__",vw=Object.prototype,_w=vw.hasOwnProperty;function ww(e){var t=this.__data__;if(gn){var r=t[e];return r===xw?void 0:r}return _w.call(t,e)?t[e]:void 0}var Cw=Object.prototype,kw=Cw.hasOwnProperty;function Sw(e){var t=this.__data__;return gn?t[e]!==void 0:kw.call(t,e)}var Tw="__lodash_hash_undefined__";function Mw(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=gn&&t===void 0?Tw:t,this}function ni(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}ni.prototype.clear=yw;ni.prototype.delete=bw;ni.prototype.get=ww;ni.prototype.has=Sw;ni.prototype.set=Mw;function Lw(){this.__data__=[],this.size=0}function go(e,t){return e===t||e!==e&&t!==t}function mo(e,t){for(var r=e.length;r--;)if(go(e[r][0],t))return r;return-1}var Aw=Array.prototype,Bw=Aw.splice;function Ew(e){var t=this.__data__,r=mo(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():Bw.call(t,r,1),--this.size,!0}function $w(e){var t=this.__data__,r=mo(t,e);return r<0?void 0:t[r][1]}function Fw(e){return mo(this.__data__,e)>-1}function Pw(e,t){var r=this.__data__,i=mo(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}function mr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}mr.prototype.clear=Lw;mr.prototype.delete=Ew;mr.prototype.get=$w;mr.prototype.has=Fw;mr.prototype.set=Pw;var mn=hi(rr,"Map");function Rw(){this.size=0,this.__data__={hash:new ni,map:new(mn||mr),string:new ni}}function Dw(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function yo(e,t){var r=e.__data__;return Dw(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Ow(e){var t=yo(this,e).delete(e);return this.size-=t?1:0,t}function Iw(e){return yo(this,e).get(e)}function Nw(e){return yo(this,e).has(e)}function qw(e,t){var r=yo(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}function Fr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Fr.prototype.clear=Rw;Fr.prototype.delete=Ow;Fr.prototype.get=Iw;Fr.prototype.has=Nw;Fr.prototype.set=qw;var zw="Expected a function";function kn(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(zw);var r=function(){var i=arguments,a=t?t.apply(this,i):i[0],n=r.cache;if(n.has(a))return n.get(a);var o=e.apply(this,i);return r.cache=n.set(a,o)||n,o};return r.cache=new(kn.Cache||Fr),r}kn.Cache=Fr;function Ww(){this.__data__=new mr,this.size=0}function Hw(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function jw(e){return this.__data__.get(e)}function Vw(e){return this.__data__.has(e)}var Uw=200;function Yw(e,t){var r=this.__data__;if(r instanceof mr){var i=r.__data__;if(!mn||i.length<Uw-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Fr(i)}return r.set(e,t),this.size=r.size,this}function ha(e){var t=this.__data__=new mr(e);this.size=t.size}ha.prototype.clear=Ww;ha.prototype.delete=Hw;ha.prototype.get=jw;ha.prototype.has=Vw;ha.prototype.set=Yw;var Ws=function(){try{var e=hi(Object,"defineProperty");return e({},"",{}),e}catch{}}();function Ec(e,t,r){t=="__proto__"&&Ws?Ws(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Ol(e,t,r){(r!==void 0&&!go(e[t],r)||r===void 0&&!(t in e))&&Ec(e,t,r)}function Gw(e){return function(t,r,i){for(var a=-1,n=Object(t),o=i(t),s=o.length;s--;){var l=o[++a];if(r(n[l],l,n)===!1)break}return t}}var Xw=Gw(),Jf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ru=Jf&&typeof module=="object"&&module&&!module.nodeType&&module,Zw=ru&&ru.exports===Jf,iu=Zw?rr.Buffer:void 0,au=iu?iu.allocUnsafe:void 0;function Kw(e,t){if(t)return e.slice();var r=e.length,i=au?au(r):new e.constructor(r);return e.copy(i),i}var nu=rr.Uint8Array;function Qw(e){var t=new e.constructor(e.byteLength);return new nu(t).set(new nu(e)),t}function Jw(e,t){var r=t?Qw(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function tC(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var su=Object.create,eC=function(){function e(){}return function(t){if(!li(t))return{};if(su)return su(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function tg(e,t){return function(r){return e(t(r))}}var eg=tg(Object.getPrototypeOf,Object),rC=Object.prototype;function bo(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||rC;return e===r}function iC(e){return typeof e.constructor=="function"&&!bo(e)?eC(eg(e)):{}}function Sn(e){return e!=null&&typeof e=="object"}var aC="[object Arguments]";function ou(e){return Sn(e)&&ca(e)==aC}var rg=Object.prototype,nC=rg.hasOwnProperty,sC=rg.propertyIsEnumerable,Hs=ou(function(){return arguments}())?ou:function(e){return Sn(e)&&nC.call(e,"callee")&&!sC.call(e,"callee")},js=Array.isArray,oC=9007199254740991;function ig(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=oC}function xo(e){return e!=null&&ig(e.length)&&!Bc(e)}function lC(e){return Sn(e)&&xo(e)}function cC(){return!1}var ag=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lu=ag&&typeof module=="object"&&module&&!module.nodeType&&module,hC=lu&&lu.exports===ag,cu=hC?rr.Buffer:void 0,uC=cu?cu.isBuffer:void 0,$c=uC||cC,pC="[object Object]",dC=Function.prototype,fC=Object.prototype,ng=dC.toString,gC=fC.hasOwnProperty,mC=ng.call(Object);function yC(e){if(!Sn(e)||ca(e)!=pC)return!1;var t=eg(e);if(t===null)return!0;var r=gC.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ng.call(r)==mC}var bC="[object Arguments]",xC="[object Array]",vC="[object Boolean]",_C="[object Date]",wC="[object Error]",CC="[object Function]",kC="[object Map]",SC="[object Number]",TC="[object Object]",MC="[object RegExp]",LC="[object Set]",AC="[object String]",BC="[object WeakMap]",EC="[object ArrayBuffer]",$C="[object DataView]",FC="[object Float32Array]",PC="[object Float64Array]",RC="[object Int8Array]",DC="[object Int16Array]",OC="[object Int32Array]",IC="[object Uint8Array]",NC="[object Uint8ClampedArray]",qC="[object Uint16Array]",zC="[object Uint32Array]",Nt={};Nt[FC]=Nt[PC]=Nt[RC]=Nt[DC]=Nt[OC]=Nt[IC]=Nt[NC]=Nt[qC]=Nt[zC]=!0;Nt[bC]=Nt[xC]=Nt[EC]=Nt[vC]=Nt[$C]=Nt[_C]=Nt[wC]=Nt[CC]=Nt[kC]=Nt[SC]=Nt[TC]=Nt[MC]=Nt[LC]=Nt[AC]=Nt[BC]=!1;function WC(e){return Sn(e)&&ig(e.length)&&!!Nt[ca(e)]}function HC(e){return function(t){return e(t)}}var sg=typeof exports=="object"&&exports&&!exports.nodeType&&exports,nn=sg&&typeof module=="object"&&module&&!module.nodeType&&module,jC=nn&&nn.exports===sg,Xo=jC&&Kf.process,hu=function(){try{var e=nn&&nn.require&&nn.require("util").types;return e||Xo&&Xo.binding&&Xo.binding("util")}catch{}}(),uu=hu&&hu.isTypedArray,Fc=uu?HC(uu):WC;function Il(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var VC=Object.prototype,UC=VC.hasOwnProperty;function YC(e,t,r){var i=e[t];(!(UC.call(e,t)&&go(i,r))||r===void 0&&!(t in e))&&Ec(e,t,r)}function GC(e,t,r,i){var a=!r;r||(r={});for(var n=-1,o=t.length;++n<o;){var s=t[n],l=void 0;l===void 0&&(l=e[s]),a?Ec(r,s,l):YC(r,s,l)}return r}function XC(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var ZC=9007199254740991,KC=/^(?:0|[1-9]\d*)$/;function og(e,t){var r=typeof e;return t=t??ZC,!!t&&(r=="number"||r!="symbol"&&KC.test(e))&&e>-1&&e%1==0&&e<t}var QC=Object.prototype,JC=QC.hasOwnProperty;function tk(e,t){var r=js(e),i=!r&&Hs(e),a=!r&&!i&&$c(e),n=!r&&!i&&!a&&Fc(e),o=r||i||a||n,s=o?XC(e.length,String):[],l=s.length;for(var c in e)(t||JC.call(e,c))&&!(o&&(c=="length"||a&&(c=="offset"||c=="parent")||n&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||og(c,l)))&&s.push(c);return s}function ek(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var rk=Object.prototype,ik=rk.hasOwnProperty;function ak(e){if(!li(e))return ek(e);var t=bo(e),r=[];for(var i in e)i=="constructor"&&(t||!ik.call(e,i))||r.push(i);return r}function lg(e){return xo(e)?tk(e,!0):ak(e)}function nk(e){return GC(e,lg(e))}function sk(e,t,r,i,a,n,o){var s=Il(e,r),l=Il(t,r),c=o.get(l);if(c){Ol(e,r,c);return}var h=n?n(s,l,r+"",e,t,o):void 0,u=h===void 0;if(u){var p=js(l),d=!p&&$c(l),f=!p&&!d&&Fc(l);h=l,p||d||f?js(s)?h=s:lC(s)?h=tC(s):d?(u=!1,h=Kw(l,!0)):f?(u=!1,h=Jw(l,!0)):h=[]:yC(l)||Hs(l)?(h=s,Hs(s)?h=nk(s):(!li(s)||Bc(s))&&(h=iC(l))):u=!1}u&&(o.set(l,h),a(h,l,i,n,o),o.delete(l)),Ol(e,r,h)}function cg(e,t,r,i,a){e!==t&&Xw(t,function(n,o){if(a||(a=new ha),li(n))sk(e,t,o,r,cg,i,a);else{var s=i?i(Il(e,o),n,o+"",e,t,a):void 0;s===void 0&&(s=n),Ol(e,o,s)}},lg)}function hg(e){return e}function ok(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var pu=Math.max;function lk(e,t,r){return t=pu(t===void 0?e.length-1:t,0),function(){for(var i=arguments,a=-1,n=pu(i.length-t,0),o=Array(n);++a<n;)o[a]=i[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=i[a];return s[t]=r(o),ok(e,this,s)}}function ck(e){return function(){return e}}var hk=Ws?function(e,t){return Ws(e,"toString",{configurable:!0,enumerable:!1,value:ck(t),writable:!0})}:hg,uk=800,pk=16,dk=Date.now;function fk(e){var t=0,r=0;return function(){var i=dk(),a=pk-(i-r);if(r=i,a>0){if(++t>=uk)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var gk=fk(hk);function mk(e,t){return gk(lk(e,t,hg),e+"")}function yk(e,t,r){if(!li(r))return!1;var i=typeof t;return(i=="number"?xo(r)&&og(t,r.length):i=="string"&&t in r)?go(r[t],e):!1}function bk(e){return mk(function(t,r){var i=-1,a=r.length,n=a>1?r[a-1]:void 0,o=a>2?r[2]:void 0;for(n=e.length>3&&typeof n=="function"?(a--,n):void 0,o&&yk(r[0],r[1],o)&&(n=a<3?void 0:n,a=1),t=Object(t);++i<a;){var s=r[i];s&&e(t,s,i,n)}return t})}var xk=bk(function(e,t,r){cg(e,t,r)}),vk="",_k={curveBasis:fs,curveBasisClosed:I2,curveBasisOpen:N2,curveBumpX:Ef,curveBumpY:$f,curveBundle:q2,curveCardinalClosed:z2,curveCardinalOpen:W2,curveCardinal:Df,curveCatmullRomClosed:H2,curveCatmullRomOpen:j2,curveCatmullRom:If,curveLinear:Os,curveLinearClosed:V2,curveMonotoneX:jf,curveMonotoneY:Vf,curveNatural:Yf,curveStep:Gf,curveStepAfter:Zf,curveStepBefore:Xf},wk=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Ck=g(function(e,t){const r=ug(e,/(?:init\b)|(?:initialize\b)/);let i={};if(Array.isArray(r)){const o=r.map(s=>s.args);_s(o),i=re(i,[...o])}else i=r.args;if(!i)return;let a=ac(e,t);const n="config";return i[n]!==void 0&&(a==="flowchart-v2"&&(a="flowchart"),i[a]=i[n],delete i[n]),i},"detectInit"),ug=g(function(e,t=null){var r,i;try{const a=new RegExp(`[%]{2}(?![{]${wk.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(a,"").replace(/'/gm,'"'),O.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let n;const o=[];for(;(n=rn.exec(e))!==null;)if(n.index===rn.lastIndex&&rn.lastIndex++,n&&!t||t&&((r=n[1])!=null&&r.match(t))||t&&((i=n[2])!=null&&i.match(t))){const s=n[1]?n[1]:n[2],l=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;o.push({type:s,args:l})}return o.length===0?{type:e,args:null}:o.length===1?o[0]:o}catch(a){return O.error(`ERROR: ${a.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),kk=g(function(e){return e.replace(rn,"")},"removeDirectives"),Sk=g(function(e,t){for(const[r,i]of t.entries())if(i.match(e))return r;return-1},"isSubstringInArray");function Pc(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return _k[r]??t}g(Pc,"interpolateToCurve");function pg(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?gv.sanitizeUrl(r):r}g(pg,"formatUrl");var Tk=g((e,...t)=>{const r=e.split("."),i=r.length-1,a=r[i];let n=window;for(let o=0;o<i;o++)if(n=n[r[o]],!n){O.error(`Function name: ${e} not found in window`);return}n[a](...t)},"runFunc");function Rc(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}g(Rc,"distance");function dg(e){let t,r=0;e.forEach(a=>{r+=Rc(a,t),t=a});const i=r/2;return Dc(e,i)}g(dg,"traverseEdge");function fg(e){return e.length===1?e[0]:dg(e)}g(fg,"calcLabelPosition");var du=g((e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},"roundNumber"),Dc=g((e,t)=>{let r,i=t;for(const a of e){if(r){const n=Rc(a,r);if(n===0)return r;if(n<i)i-=n;else{const o=i/n;if(o<=0)return r;if(o>=1)return{x:a.x,y:a.y};if(o>0&&o<1)return{x:du((1-o)*r.x+o*a.x,5),y:du((1-o)*r.y+o*a.y,5)}}}r=a}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),Mk=g((e,t,r)=>{O.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const a=Dc(t,25),n=e?10:5,o=Math.atan2(t[0].y-a.y,t[0].x-a.x),s={x:0,y:0};return s.x=Math.sin(o)*n+(t[0].x+a.x)/2,s.y=-Math.cos(o)*n+(t[0].y+a.y)/2,s},"calcCardinalityPosition");function gg(e,t,r){const i=structuredClone(r);O.info("our points",i),t!=="start_left"&&t!=="start_right"&&i.reverse();const a=25+e,n=Dc(i,a),o=10+e*.5,s=Math.atan2(i[0].y-n.y,i[0].x-n.x),l={x:0,y:0};return t==="start_left"?(l.x=Math.sin(s+Math.PI)*o+(i[0].x+n.x)/2,l.y=-Math.cos(s+Math.PI)*o+(i[0].y+n.y)/2):t==="end_right"?(l.x=Math.sin(s-Math.PI)*o+(i[0].x+n.x)/2-5,l.y=-Math.cos(s-Math.PI)*o+(i[0].y+n.y)/2-5):t==="end_left"?(l.x=Math.sin(s)*o+(i[0].x+n.x)/2-5,l.y=-Math.cos(s)*o+(i[0].y+n.y)/2-5):(l.x=Math.sin(s)*o+(i[0].x+n.x)/2,l.y=-Math.cos(s)*o+(i[0].y+n.y)/2),l}g(gg,"calcTerminalLabelPosition");function mg(e){let t="",r="";for(const i of e)i!==void 0&&(i.startsWith("color:")||i.startsWith("text-align:")?r=r+i+";":t=t+i+";");return{style:t,labelStyle:r}}g(mg,"getStylesFromArray");var fu=0,Lk=g(()=>(fu++,"id-"+Math.random().toString(36).substr(2,12)+"-"+fu),"generateId");function yg(e){let t="";const r="0123456789abcdef",i=r.length;for(let a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*i));return t}g(yg,"makeRandomHex");var Ak=g(e=>yg(e.length),"random"),Bk=g(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),Ek=g(function(e,t){const r=t.text.replace(oa.lineBreakRegex," "),[,i]=vo(t.fontSize),a=e.append("text");a.attr("x",t.x),a.attr("y",t.y),a.style("text-anchor",t.anchor),a.style("font-family",t.fontFamily),a.style("font-size",i),a.style("font-weight",t.fontWeight),a.attr("fill",t.fill),t.class!==void 0&&a.attr("class",t.class);const n=a.append("tspan");return n.attr("x",t.x+t.textMargin*2),n.attr("fill",t.fill),n.text(r),a},"drawSimpleText"),$k=kn((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),oa.lineBreakRegex.test(e)))return e;const i=e.split(" ").filter(Boolean),a=[];let n="";return i.forEach((o,s)=>{const l=gr(`${o} `,r),c=gr(n,r);if(l>t){const{hyphenatedStrings:p,remainingWord:d}=Fk(o,t,"-",r);a.push(n,...p),n=d}else c+l>=t?(a.push(n),n=o):n=[n,o].filter(Boolean).join(" ");s+1===i.length&&a.push(n)}),a.filter(o=>o!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),Fk=kn((e,t,r="-",i)=>{i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},i);const a=[...e],n=[];let o="";return a.forEach((s,l)=>{const c=`${o}${s}`;if(gr(c,i)>=t){const u=l+1,p=a.length===u,d=`${c}${r}`;n.push(p?c:d),o=""}else o=c}),{hyphenatedStrings:n,remainingWord:o}},(e,t,r="-",i)=>`${e}${t}${r}${i.fontSize}${i.fontWeight}${i.fontFamily}`);function bg(e,t){return Oc(e,t).height}g(bg,"calculateTextHeight");function gr(e,t){return Oc(e,t).width}g(gr,"calculateTextWidth");var Oc=kn((e,t)=>{const{fontSize:r=12,fontFamily:i="Arial",fontWeight:a=400}=t;if(!e)return{width:0,height:0};const[,n]=vo(r),o=["sans-serif",i],s=e.split(oa.lineBreakRegex),l=[],c=vt("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const h=c.append("svg");for(const p of o){let d=0;const f={width:0,height:0,lineHeight:0};for(const m of s){const y=Bk();y.text=m||vk;const b=Ek(h,y).style("font-size",n).style("font-weight",a).style("font-family",p),v=(b._groups||b)[0][0].getBBox();if(v.width===0&&v.height===0)throw new Error("svg element not in render tree");f.width=Math.round(Math.max(f.width,v.width)),d=Math.round(v.height),f.height+=d,f.lineHeight=Math.round(Math.max(f.lineHeight,d))}l.push(f)}h.remove();const u=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[u]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),Zi,Pk=(Zi=class{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}},g(Zi,"InitIDGenerator"),Zi),Jn,Rk=g(function(e){return Jn=Jn||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Jn.innerHTML=e,unescape(Jn.textContent)},"entityDecode");function Ic(e){return"str"in e}g(Ic,"isDetailedError");var Dk=g((e,t,r,i)=>{var n;if(!i)return;const a=(n=e.node())==null?void 0:n.getBBox();a&&e.append("text").text(i).attr("text-anchor","middle").attr("x",a.x+a.width/2).attr("y",-r).attr("class",t)},"insertTitle"),vo=g(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function Nc(e,t){return xk({},e,t)}g(Nc,"cleanAndMerge");var Ke={assignWithDepth:re,wrapLabel:$k,calculateTextHeight:bg,calculateTextWidth:gr,calculateTextDimensions:Oc,cleanAndMerge:Nc,detectInit:Ck,detectDirective:ug,isSubstringInArray:Sk,interpolateToCurve:Pc,calcLabelPosition:fg,calcCardinalityPosition:Mk,calcTerminalLabelPosition:gg,formatUrl:pg,getStylesFromArray:mg,generateId:Lk,random:Ak,runFunc:Tk,entityDecode:Rk,insertTitle:Dk,parseFontSize:vo,InitIDGenerator:Pk},Ok=g(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const i=r.substring(1,r.length-1);return/^\+?\d+$/.test(i)?""+i+"":""+i+""}),t},"encodeEntities"),ui=g(function(e){return e.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),SE=g((e,t,{counter:r=0,prefix:i,suffix:a},n)=>n||`${i?`${i}_`:""}${e}_${t}_${r}${a?`_${a}`:""}`,"getEdgeId");function de(e){return e??null}g(de,"handleUndefinedAttr");const Ik=Object.freeze({left:0,top:0,width:16,height:16}),Vs=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),xg=Object.freeze({...Ik,...Vs}),Nk=Object.freeze({...xg,body:"",hidden:!1}),qk=Object.freeze({width:null,height:null}),zk=Object.freeze({...qk,...Vs}),Wk=(e,t,r,i="")=>{const a=e.split(":");if(e.slice(0,1)==="@"){if(a.length<2||a.length>3)return null;i=a.shift().slice(1)}if(a.length>3||!a.length)return null;if(a.length>1){const s=a.pop(),l=a.pop(),c={provider:a.length>0?a[0]:i,prefix:l,name:s};return Zo(c)?c:null}const n=a[0],o=n.split("-");if(o.length>1){const s={provider:i,prefix:o.shift(),name:o.join("-")};return Zo(s)?s:null}if(r&&i===""){const s={provider:i,prefix:"",name:n};return Zo(s,r)?s:null}return null},Zo=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;function Hk(e,t){const r={};!e.hFlip!=!t.hFlip&&(r.hFlip=!0),!e.vFlip!=!t.vFlip&&(r.vFlip=!0);const i=((e.rotate||0)+(t.rotate||0))%4;return i&&(r.rotate=i),r}function gu(e,t){const r=Hk(e,t);for(const i in Nk)i in Vs?i in e&&!(i in r)&&(r[i]=Vs[i]):i in t?r[i]=t[i]:i in e&&(r[i]=e[i]);return r}function jk(e,t){const r=e.icons,i=e.aliases||Object.create(null),a=Object.create(null);function n(o){if(r[o])return a[o]=[];if(!(o in a)){a[o]=null;const s=i[o]&&i[o].parent,l=s&&n(s);l&&(a[o]=[s].concat(l))}return a[o]}return(t||Object.keys(r).concat(Object.keys(i))).forEach(n),a}function mu(e,t,r){const i=e.icons,a=e.aliases||Object.create(null);let n={};function o(s){n=gu(i[s]||a[s],n)}return o(t),r.forEach(o),gu(e,n)}function Vk(e,t){if(e.icons[t])return mu(e,t,[]);const r=jk(e,[t])[t];return r?mu(e,t,r):null}const Uk=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Yk=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function yu(e,t,r){if(t===1)return e;if(r=r||100,typeof e=="number")return Math.ceil(e*t*r)/r;if(typeof e!="string")return e;const i=e.split(Uk);if(i===null||!i.length)return e;const a=[];let n=i.shift(),o=Yk.test(n);for(;;){if(o){const s=parseFloat(n);isNaN(s)?a.push(n):a.push(Math.ceil(s*t*r)/r)}else a.push(n);if(n=i.shift(),n===void 0)return a.join("");o=!o}}function Gk(e,t="defs"){let r="";const i=e.indexOf("<"+t);for(;i>=0;){const a=e.indexOf(">",i),n=e.indexOf("</"+t);if(a===-1||n===-1)break;const o=e.indexOf(">",n);if(o===-1)break;r+=e.slice(a+1,n).trim(),e=e.slice(0,i).trim()+e.slice(o+1)}return{defs:r,content:e}}function Xk(e,t){return e?"<defs>"+e+"</defs>"+t:t}function Zk(e,t,r){const i=Gk(e);return Xk(i.defs,t+i.content+r)}const Kk=e=>e==="unset"||e==="undefined"||e==="none";function Qk(e,t){const r={...xg,...e},i={...zk,...t},a={left:r.left,top:r.top,width:r.width,height:r.height};let n=r.body;[r,i].forEach(m=>{const y=[],b=m.hFlip,v=m.vFlip;let k=m.rotate;b?v?k+=2:(y.push("translate("+(a.width+a.left).toString()+" "+(0-a.top).toString()+")"),y.push("scale(-1 1)"),a.top=a.left=0):v&&(y.push("translate("+(0-a.left).toString()+" "+(a.height+a.top).toString()+")"),y.push("scale(1 -1)"),a.top=a.left=0);let M;switch(k<0&&(k-=Math.floor(k/4)*4),k=k%4,k){case 1:M=a.height/2+a.top,y.unshift("rotate(90 "+M.toString()+" "+M.toString()+")");break;case 2:y.unshift("rotate(180 "+(a.width/2+a.left).toString()+" "+(a.height/2+a.top).toString()+")");break;case 3:M=a.width/2+a.left,y.unshift("rotate(-90 "+M.toString()+" "+M.toString()+")");break}k%2===1&&(a.left!==a.top&&(M=a.left,a.left=a.top,a.top=M),a.width!==a.height&&(M=a.width,a.width=a.height,a.height=M)),y.length&&(n=Zk(n,'<g transform="'+y.join(" ")+'">',"</g>"))});const o=i.width,s=i.height,l=a.width,c=a.height;let h,u;o===null?(u=s===null?"1em":s==="auto"?c:s,h=yu(u,l/c)):(h=o==="auto"?l:o,u=s===null?yu(h,c/l):s==="auto"?c:s);const p={},d=(m,y)=>{Kk(y)||(p[m]=y.toString())};d("width",h),d("height",u);const f=[a.left,a.top,l,c];return p.viewBox=f.join(" "),{attributes:p,viewBox:f,body:n}}const Jk=/\sid="(\S+)"/g,tS="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let eS=0;function rS(e,t=tS){const r=[];let i;for(;i=Jk.exec(e);)r.push(i[1]);if(!r.length)return e;const a="suffix"+(Math.random()*16777216|Date.now()).toString(16);return r.forEach(n=>{const o=typeof t=="function"?t(n):t+(eS++).toString(),s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+s+')([")]|\\.[a-z])',"g"),"$1"+o+a+"$3")}),e=e.replace(new RegExp(a,"g"),""),e}function iS(e,t){let r=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in t)r+=" "+i+'="'+t[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+e+"</svg>"}function qc(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var pi=qc();function vg(e){pi=e}var sn={exec:()=>null};function Lt(e,t=""){let r=typeof e=="string"?e:e.source,i={replace:(a,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(pe.caret,"$1"),r=r.replace(a,o),i},getRegex:()=>new RegExp(r,t)};return i}var pe={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},aS=/^(?:[ \t]*(?:\n|$))+/,nS=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,sS=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Tn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,oS=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,zc=/(?:[*+-]|\d{1,9}[.)])/,_g=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,wg=Lt(_g).replace(/bull/g,zc).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),lS=Lt(_g).replace(/bull/g,zc).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Wc=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,cS=/^[^\n]+/,Hc=/(?!\s*\])(?:\\.|[^\[\]\\])+/,hS=Lt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Hc).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),uS=Lt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,zc).getRegex(),_o="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",jc=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,pS=Lt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",jc).replace("tag",_o).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Cg=Lt(Wc).replace("hr",Tn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_o).getRegex(),dS=Lt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Cg).getRegex(),Vc={blockquote:dS,code:nS,def:hS,fences:sS,heading:oS,hr:Tn,html:pS,lheading:wg,list:uS,newline:aS,paragraph:Cg,table:sn,text:cS},bu=Lt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Tn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_o).getRegex(),fS={...Vc,lheading:lS,table:bu,paragraph:Lt(Wc).replace("hr",Tn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",bu).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_o).getRegex()},gS={...Vc,html:Lt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",jc).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:sn,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Lt(Wc).replace("hr",Tn).replace("heading",` *#{1,6} *[^
]`).replace("lheading",wg).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},mS=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,yS=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,kg=/^( {2,}|\\)\n(?!\s*$)/,bS=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,wo=/[\p{P}\p{S}]/u,Uc=/[\s\p{P}\p{S}]/u,Sg=/[^\s\p{P}\p{S}]/u,xS=Lt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Uc).getRegex(),Tg=/(?!~)[\p{P}\p{S}]/u,vS=/(?!~)[\s\p{P}\p{S}]/u,_S=/(?:[^\s\p{P}\p{S}]|~)/u,wS=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,Mg=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,CS=Lt(Mg,"u").replace(/punct/g,wo).getRegex(),kS=Lt(Mg,"u").replace(/punct/g,Tg).getRegex(),Lg="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",SS=Lt(Lg,"gu").replace(/notPunctSpace/g,Sg).replace(/punctSpace/g,Uc).replace(/punct/g,wo).getRegex(),TS=Lt(Lg,"gu").replace(/notPunctSpace/g,_S).replace(/punctSpace/g,vS).replace(/punct/g,Tg).getRegex(),MS=Lt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Sg).replace(/punctSpace/g,Uc).replace(/punct/g,wo).getRegex(),LS=Lt(/\\(punct)/,"gu").replace(/punct/g,wo).getRegex(),AS=Lt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),BS=Lt(jc).replace("(?:-->|$)","-->").getRegex(),ES=Lt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",BS).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Us=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$S=Lt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Us).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ag=Lt(/^!?\[(label)\]\[(ref)\]/).replace("label",Us).replace("ref",Hc).getRegex(),Bg=Lt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Hc).getRegex(),FS=Lt("reflink|nolink(?!\\()","g").replace("reflink",Ag).replace("nolink",Bg).getRegex(),Yc={_backpedal:sn,anyPunctuation:LS,autolink:AS,blockSkip:wS,br:kg,code:yS,del:sn,emStrongLDelim:CS,emStrongRDelimAst:SS,emStrongRDelimUnd:MS,escape:mS,link:$S,nolink:Bg,punctuation:xS,reflink:Ag,reflinkSearch:FS,tag:ES,text:bS,url:sn},PS={...Yc,link:Lt(/^!?\[(label)\]\((.*?)\)/).replace("label",Us).getRegex(),reflink:Lt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Us).getRegex()},Nl={...Yc,emStrongRDelimAst:TS,emStrongLDelim:kS,url:Lt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},RS={...Nl,br:Lt(kg).replace("{2,}","*").getRegex(),text:Lt(Nl.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ts={normal:Vc,gfm:fS,pedantic:gS},Wa={normal:Yc,gfm:Nl,breaks:RS,pedantic:PS},DS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xu=e=>DS[e];function Ge(e,t){if(t){if(pe.escapeTest.test(e))return e.replace(pe.escapeReplace,xu)}else if(pe.escapeTestNoEncode.test(e))return e.replace(pe.escapeReplaceNoEncode,xu);return e}function vu(e){try{e=encodeURI(e).replace(pe.percentDecode,"%")}catch{return null}return e}function _u(e,t){var n;let r=e.replace(pe.findPipe,(o,s,l)=>{let c=!1,h=s;for(;--h>=0&&l[h]==="\\";)c=!c;return c?"|":" |"}),i=r.split(pe.splitPipe),a=0;if(i[0].trim()||i.shift(),i.length>0&&!((n=i.at(-1))!=null&&n.trim())&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;a<i.length;a++)i[a]=i[a].trim().replace(pe.slashPipe,"|");return i}function Ha(e,t,r){let i=e.length;if(i===0)return"";let a=0;for(;a<i&&e.charAt(i-a-1)===t;)a++;return e.slice(0,i-a)}function OS(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return r>0?-2:-1}function wu(e,t,r,i,a){let n=t.href,o=t.title||null,s=e[1].replace(a.other.outputLinkReplace,"$1");i.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:n,title:o,text:s,tokens:i.inlineTokens(s)};return i.state.inLink=!1,l}function IS(e,t,r){let i=e.match(r.other.indentCodeCompensation);if(i===null)return t;let a=i[1];return t.split(`
`).map(n=>{let o=n.match(r.other.beginningSpace);if(o===null)return n;let[s]=o;return s.length>=a.length?n.slice(a.length):n}).join(`
`)}var Ys=class{constructor(t){Rt(this,"options");Rt(this,"rules");Rt(this,"lexer");this.options=t||pi}space(t){let r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(t){let r=this.rules.block.code.exec(t);if(r){let i=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Ha(i,`
`)}}}fences(t){let r=this.rules.block.fences.exec(t);if(r){let i=r[0],a=IS(i,r[3]||"",this.rules);return{type:"code",raw:i,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:a}}}heading(t){let r=this.rules.block.heading.exec(t);if(r){let i=r[2].trim();if(this.rules.other.endingHash.test(i)){let a=Ha(i,"#");(this.options.pedantic||!a||this.rules.other.endingSpaceChar.test(a))&&(i=a.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){let r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:Ha(r[0],`
`)}}blockquote(t){let r=this.rules.block.blockquote.exec(t);if(r){let i=Ha(r[0],`
`).split(`
`),a="",n="",o=[];for(;i.length>0;){let s=!1,l=[],c;for(c=0;c<i.length;c++)if(this.rules.other.blockquoteStart.test(i[c]))l.push(i[c]),s=!0;else if(!s)l.push(i[c]);else break;i=i.slice(c);let h=l.join(`
`),u=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");a=a?`${a}
${h}`:h,n=n?`${n}
${u}`:u;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,o,!0),this.lexer.state.top=p,i.length===0)break;let d=o.at(-1);if((d==null?void 0:d.type)==="code")break;if((d==null?void 0:d.type)==="blockquote"){let f=d,m=f.raw+`
`+i.join(`
`),y=this.blockquote(m);o[o.length-1]=y,a=a.substring(0,a.length-f.raw.length)+y.raw,n=n.substring(0,n.length-f.text.length)+y.text;break}else if((d==null?void 0:d.type)==="list"){let f=d,m=f.raw+`
`+i.join(`
`),y=this.list(m);o[o.length-1]=y,a=a.substring(0,a.length-d.raw.length)+y.raw,n=n.substring(0,n.length-f.raw.length)+y.raw,i=m.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:a,tokens:o,text:n}}}list(t){let r=this.rules.block.list.exec(t);if(r){let i=r[1].trim(),a=i.length>1,n={type:"list",raw:"",ordered:a,start:a?+i.slice(0,-1):"",loose:!1,items:[]};i=a?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=a?i:"[*+-]");let o=this.rules.other.listItemRegex(i),s=!1;for(;t;){let c=!1,h="",u="";if(!(r=o.exec(t))||this.rules.block.hr.test(t))break;h=r[0],t=t.substring(h.length);let p=r[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,v=>" ".repeat(3*v.length)),d=t.split(`
`,1)[0],f=!p.trim(),m=0;if(this.options.pedantic?(m=2,u=p.trimStart()):f?m=r[1].length+1:(m=r[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,u=p.slice(m),m+=r[1].length),f&&this.rules.other.blankLine.test(d)&&(h+=d+`
`,t=t.substring(d.length+1),c=!0),!c){let v=this.rules.other.nextBulletRegex(m),k=this.rules.other.hrRegex(m),M=this.rules.other.fencesBeginRegex(m),T=this.rules.other.headingBeginRegex(m),_=this.rules.other.htmlBeginRegex(m);for(;t;){let S=t.split(`
`,1)[0],I;if(d=S,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),I=d):I=d.replace(this.rules.other.tabCharGlobal,"    "),M.test(d)||T.test(d)||_.test(d)||v.test(d)||k.test(d))break;if(I.search(this.rules.other.nonSpaceChar)>=m||!d.trim())u+=`
`+I.slice(m);else{if(f||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||M.test(p)||T.test(p)||k.test(p))break;u+=`
`+d}!f&&!d.trim()&&(f=!0),h+=S+`
`,t=t.substring(S.length+1),p=I.slice(m)}}n.loose||(s?n.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(s=!0));let y=null,b;this.options.gfm&&(y=this.rules.other.listIsTask.exec(u),y&&(b=y[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:h,task:!!y,checked:b,loose:!1,text:u,tokens:[]}),n.raw+=h}let l=n.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let c=0;c<n.items.length;c++)if(this.lexer.state.top=!1,n.items[c].tokens=this.lexer.blockTokens(n.items[c].text,[]),!n.loose){let h=n.items[c].tokens.filter(p=>p.type==="space"),u=h.length>0&&h.some(p=>this.rules.other.anyLine.test(p.raw));n.loose=u}if(n.loose)for(let c=0;c<n.items.length;c++)n.items[c].loose=!0;return n}}html(t){let r=this.rules.block.html.exec(t);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(t){let r=this.rules.block.def.exec(t);if(r){let i=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),a=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:i,raw:r[0],href:a,title:n}}}table(t){var s;let r=this.rules.block.table.exec(t);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;let i=_u(r[1]),a=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=(s=r[3])!=null&&s.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:r[0],header:[],align:[],rows:[]};if(i.length===a.length){for(let l of a)this.rules.other.tableAlignRight.test(l)?o.align.push("right"):this.rules.other.tableAlignCenter.test(l)?o.align.push("center"):this.rules.other.tableAlignLeft.test(l)?o.align.push("left"):o.align.push(null);for(let l=0;l<i.length;l++)o.header.push({text:i[l],tokens:this.lexer.inline(i[l]),header:!0,align:o.align[l]});for(let l of n)o.rows.push(_u(l,o.header.length).map((c,h)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:o.align[h]})));return o}}lheading(t){let r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(t){let r=this.rules.block.paragraph.exec(t);if(r){let i=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:i,tokens:this.lexer.inline(i)}}}text(t){let r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(t){let r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:r[1]}}tag(t){let r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(t){let r=this.rules.inline.link.exec(t);if(r){let i=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(i)){if(!this.rules.other.endAngleBracket.test(i))return;let o=Ha(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{let o=OS(r[2],"()");if(o===-2)return;if(o>-1){let s=(r[0].indexOf("!")===0?5:4)+r[1].length+o;r[2]=r[2].substring(0,o),r[0]=r[0].substring(0,s).trim(),r[3]=""}}let a=r[2],n="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(a);o&&(a=o[1],n=o[3])}else n=r[3]?r[3].slice(1,-1):"";return a=a.trim(),this.rules.other.startAngleBracket.test(a)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(i)?a=a.slice(1):a=a.slice(1,-1)),wu(r,{href:a&&a.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}reflink(t,r){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){let a=(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=r[a.toLowerCase()];if(!n){let o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return wu(i,n,i[0],this.lexer,this.rules)}}emStrong(t,r,i=""){let a=this.rules.inline.emStrongLDelim.exec(t);if(!(!a||a[3]&&i.match(this.rules.other.unicodeAlphaNumeric))&&(!(a[1]||a[2])||!i||this.rules.inline.punctuation.exec(i))){let n=[...a[0]].length-1,o,s,l=n,c=0,h=a[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,r=r.slice(-1*t.length+n);(a=h.exec(r))!=null;){if(o=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!o)continue;if(s=[...o].length,a[3]||a[4]){l+=s;continue}else if((a[5]||a[6])&&n%3&&!((n+s)%3)){c+=s;continue}if(l-=s,l>0)continue;s=Math.min(s,s+l+c);let u=[...a[0]][0].length,p=t.slice(0,n+a.index+u+s);if(Math.min(n,s)%2){let f=p.slice(1,-1);return{type:"em",raw:p,text:f,tokens:this.lexer.inlineTokens(f)}}let d=p.slice(2,-2);return{type:"strong",raw:p,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(t){let r=this.rules.inline.code.exec(t);if(r){let i=r[2].replace(this.rules.other.newLineCharGlobal," "),a=this.rules.other.nonSpaceChar.test(i),n=this.rules.other.startingSpaceChar.test(i)&&this.rules.other.endingSpaceChar.test(i);return a&&n&&(i=i.substring(1,i.length-1)),{type:"codespan",raw:r[0],text:i}}}br(t){let r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}}del(t){let r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(t){let r=this.rules.inline.autolink.exec(t);if(r){let i,a;return r[2]==="@"?(i=r[1],a="mailto:"+i):(i=r[1],a=i),{type:"link",raw:r[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}url(t){var i;let r;if(r=this.rules.inline.url.exec(t)){let a,n;if(r[2]==="@")a=r[0],n="mailto:"+a;else{let o;do o=r[0],r[0]=((i=this.rules.inline._backpedal.exec(r[0]))==null?void 0:i[0])??"";while(o!==r[0]);a=r[0],r[1]==="www."?n="http://"+r[0]:n=r[0]}return{type:"link",raw:r[0],text:a,href:n,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(t){let r=this.rules.inline.text.exec(t);if(r){let i=this.lexer.state.inRawBlock;return{type:"text",raw:r[0],text:r[0],escaped:i}}}},hr=class ql{constructor(t){Rt(this,"tokens");Rt(this,"options");Rt(this,"state");Rt(this,"tokenizer");Rt(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||pi,this.options.tokenizer=this.options.tokenizer||new Ys,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:pe,block:ts.normal,inline:Wa.normal};this.options.pedantic?(r.block=ts.pedantic,r.inline=Wa.pedantic):this.options.gfm&&(r.block=ts.gfm,this.options.breaks?r.inline=Wa.breaks:r.inline=Wa.gfm),this.tokenizer.rules=r}static get rules(){return{block:ts,inline:Wa}}static lex(t,r){return new ql(r).lex(t)}static lexInline(t,r){return new ql(r).inlineTokens(t)}lex(t){t=t.replace(pe.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],i=!1){var a,n,o;for(this.options.pedantic&&(t=t.replace(pe.tabCharGlobal,"    ").replace(pe.spaceLine,""));t;){let s;if((n=(a=this.options.extensions)==null?void 0:a.block)!=null&&n.some(c=>(s=c.call({lexer:this},t,r))?(t=t.substring(s.raw.length),r.push(s),!0):!1))continue;if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length);let c=r.at(-1);s.raw.length===1&&c!==void 0?c.raw+=`
`:r.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.text,this.inlineQueue.at(-1).src=c.text):r.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),r.push(s);continue}let l=t;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0,h=t.slice(1),u;this.options.extensions.startBlock.forEach(p=>{u=p.call({lexer:this},h),typeof u=="number"&&u>=0&&(c=Math.min(c,u))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(s=this.tokenizer.paragraph(l))){let c=r.at(-1);i&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):r.push(s),i=l.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length);let c=r.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):r.push(s);continue}if(t){let c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){var s,l,c;let i=t,a=null;if(this.tokens.links){let h=Object.keys(this.tokens.links);if(h.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)h.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,a.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let n=!1,o="";for(;t;){n||(o=""),n=!1;let h;if((l=(s=this.options.extensions)==null?void 0:s.inline)!=null&&l.some(p=>(h=p.call({lexer:this},t,r))?(t=t.substring(h.raw.length),r.push(h),!0):!1))continue;if(h=this.tokenizer.escape(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.tag(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.link(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(h.raw.length);let p=r.at(-1);h.type==="text"&&(p==null?void 0:p.type)==="text"?(p.raw+=h.raw,p.text+=h.text):r.push(h);continue}if(h=this.tokenizer.emStrong(t,i,o)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.codespan(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.br(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.del(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.autolink(t)){t=t.substring(h.raw.length),r.push(h);continue}if(!this.state.inLink&&(h=this.tokenizer.url(t))){t=t.substring(h.raw.length),r.push(h);continue}let u=t;if((c=this.options.extensions)!=null&&c.startInline){let p=1/0,d=t.slice(1),f;this.options.extensions.startInline.forEach(m=>{f=m.call({lexer:this},d),typeof f=="number"&&f>=0&&(p=Math.min(p,f))}),p<1/0&&p>=0&&(u=t.substring(0,p+1))}if(h=this.tokenizer.inlineText(u)){t=t.substring(h.raw.length),h.raw.slice(-1)!=="_"&&(o=h.raw.slice(-1)),n=!0;let p=r.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=h.raw,p.text+=h.text):r.push(h);continue}if(t){let p="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return r}},Gs=class{constructor(t){Rt(this,"options");Rt(this,"parser");this.options=t||pi}space(t){return""}code({text:t,lang:r,escaped:i}){var o;let a=(o=(r||"").match(pe.notSpaceStart))==null?void 0:o[0],n=t.replace(pe.endingNewline,"")+`
`;return a?'<pre><code class="language-'+Ge(a)+'">'+(i?n:Ge(n,!0))+`</code></pre>
`:"<pre><code>"+(i?n:Ge(n,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:r}){return`<h${r}>${this.parser.parseInline(t)}</h${r}>
`}hr(t){return`<hr>
`}list(t){let r=t.ordered,i=t.start,a="";for(let s=0;s<t.items.length;s++){let l=t.items[s];a+=this.listitem(l)}let n=r?"ol":"ul",o=r&&i!==1?' start="'+i+'"':"";return"<"+n+o+`>
`+a+"</"+n+`>
`}listitem(t){var i;let r="";if(t.task){let a=this.checkbox({checked:!!t.checked});t.loose?((i=t.tokens[0])==null?void 0:i.type)==="paragraph"?(t.tokens[0].text=a+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=a+" "+Ge(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:a+" ",text:a+" ",escaped:!0}):r+=a+" "}return r+=this.parser.parse(t.tokens,!!t.loose),`<li>${r}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let r="",i="";for(let n=0;n<t.header.length;n++)i+=this.tablecell(t.header[n]);r+=this.tablerow({text:i});let a="";for(let n=0;n<t.rows.length;n++){let o=t.rows[n];i="";for(let s=0;s<o.length;s++)i+=this.tablecell(o[s]);a+=this.tablerow({text:i})}return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+a+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let r=this.parser.parseInline(t.tokens),i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+r+`</${i}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Ge(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:r,tokens:i}){let a=this.parser.parseInline(i),n=vu(t);if(n===null)return a;t=n;let o='<a href="'+t+'"';return r&&(o+=' title="'+Ge(r)+'"'),o+=">"+a+"</a>",o}image({href:t,title:r,text:i,tokens:a}){a&&(i=this.parser.parseInline(a,this.parser.textRenderer));let n=vu(t);if(n===null)return Ge(i);t=n;let o=`<img src="${t}" alt="${i}"`;return r&&(o+=` title="${Ge(r)}"`),o+=">",o}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Ge(t.text)}},Gc=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},ur=class zl{constructor(t){Rt(this,"options");Rt(this,"renderer");Rt(this,"textRenderer");this.options=t||pi,this.options.renderer=this.options.renderer||new Gs,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Gc}static parse(t,r){return new zl(r).parse(t)}static parseInline(t,r){return new zl(r).parseInline(t)}parse(t,r=!0){var a,n;let i="";for(let o=0;o<t.length;o++){let s=t[o];if((n=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&n[s.type]){let c=s,h=this.options.extensions.renderers[c.type].call({parser:this},c);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){i+=h||"";continue}}let l=s;switch(l.type){case"space":{i+=this.renderer.space(l);continue}case"hr":{i+=this.renderer.hr(l);continue}case"heading":{i+=this.renderer.heading(l);continue}case"code":{i+=this.renderer.code(l);continue}case"table":{i+=this.renderer.table(l);continue}case"blockquote":{i+=this.renderer.blockquote(l);continue}case"list":{i+=this.renderer.list(l);continue}case"html":{i+=this.renderer.html(l);continue}case"paragraph":{i+=this.renderer.paragraph(l);continue}case"text":{let c=l,h=this.renderer.text(c);for(;o+1<t.length&&t[o+1].type==="text";)c=t[++o],h+=`
`+this.renderer.text(c);r?i+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):i+=h;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return i}parseInline(t,r=this.renderer){var a,n;let i="";for(let o=0;o<t.length;o++){let s=t[o];if((n=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&n[s.type]){let c=this.options.extensions.renderers[s.type].call({parser:this},s);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=c||"";continue}}let l=s;switch(l.type){case"escape":{i+=r.text(l);break}case"html":{i+=r.html(l);break}case"link":{i+=r.link(l);break}case"image":{i+=r.image(l);break}case"strong":{i+=r.strong(l);break}case"em":{i+=r.em(l);break}case"codespan":{i+=r.codespan(l);break}case"br":{i+=r.br(l);break}case"del":{i+=r.del(l);break}case"text":{i+=r.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return i}},nl,gs=(nl=class{constructor(t){Rt(this,"options");Rt(this,"block");this.options=t||pi}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?hr.lex:hr.lexInline}provideParser(){return this.block?ur.parse:ur.parseInline}},Rt(nl,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),nl),NS=class{constructor(...t){Rt(this,"defaults",qc());Rt(this,"options",this.setOptions);Rt(this,"parse",this.parseMarkdown(!0));Rt(this,"parseInline",this.parseMarkdown(!1));Rt(this,"Parser",ur);Rt(this,"Renderer",Gs);Rt(this,"TextRenderer",Gc);Rt(this,"Lexer",hr);Rt(this,"Tokenizer",Ys);Rt(this,"Hooks",gs);this.use(...t)}walkTokens(t,r){var a,n;let i=[];for(let o of t)switch(i=i.concat(r.call(this,o)),o.type){case"table":{let s=o;for(let l of s.header)i=i.concat(this.walkTokens(l.tokens,r));for(let l of s.rows)for(let c of l)i=i.concat(this.walkTokens(c.tokens,r));break}case"list":{let s=o;i=i.concat(this.walkTokens(s.items,r));break}default:{let s=o;(n=(a=this.defaults.extensions)==null?void 0:a.childTokens)!=null&&n[s.type]?this.defaults.extensions.childTokens[s.type].forEach(l=>{let c=s[l].flat(1/0);i=i.concat(this.walkTokens(c,r))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,r)))}}return i}use(...t){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(i=>{let a={...i};if(a.async=this.defaults.async||a.async||!1,i.extensions&&(i.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let o=r.renderers[n.name];o?r.renderers[n.name]=function(...s){let l=n.renderer.apply(this,s);return l===!1&&(l=o.apply(this,s)),l}:r.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=r[n.level];o?o.unshift(n.tokenizer):r[n.level]=[n.tokenizer],n.start&&(n.level==="block"?r.startBlock?r.startBlock.push(n.start):r.startBlock=[n.start]:n.level==="inline"&&(r.startInline?r.startInline.push(n.start):r.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(r.childTokens[n.name]=n.childTokens)}),a.extensions=r),i.renderer){let n=this.defaults.renderer||new Gs(this.defaults);for(let o in i.renderer){if(!(o in n))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let s=o,l=i.renderer[s],c=n[s];n[s]=(...h)=>{let u=l.apply(n,h);return u===!1&&(u=c.apply(n,h)),u||""}}a.renderer=n}if(i.tokenizer){let n=this.defaults.tokenizer||new Ys(this.defaults);for(let o in i.tokenizer){if(!(o in n))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let s=o,l=i.tokenizer[s],c=n[s];n[s]=(...h)=>{let u=l.apply(n,h);return u===!1&&(u=c.apply(n,h)),u}}a.tokenizer=n}if(i.hooks){let n=this.defaults.hooks||new gs;for(let o in i.hooks){if(!(o in n))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let s=o,l=i.hooks[s],c=n[s];gs.passThroughHooks.has(o)?n[s]=h=>{if(this.defaults.async)return Promise.resolve(l.call(n,h)).then(p=>c.call(n,p));let u=l.call(n,h);return c.call(n,u)}:n[s]=(...h)=>{let u=l.apply(n,h);return u===!1&&(u=c.apply(n,h)),u}}a.hooks=n}if(i.walkTokens){let n=this.defaults.walkTokens,o=i.walkTokens;a.walkTokens=function(s){let l=[];return l.push(o.call(this,s)),n&&(l=l.concat(n.call(this,s))),l}}this.defaults={...this.defaults,...a}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,r){return hr.lex(t,r??this.defaults)}parser(t,r){return ur.parse(t,r??this.defaults)}parseMarkdown(t){return(r,i)=>{let a={...i},n={...this.defaults,...a},o=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&a.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));n.hooks&&(n.hooks.options=n,n.hooks.block=t);let s=n.hooks?n.hooks.provideLexer():t?hr.lex:hr.lexInline,l=n.hooks?n.hooks.provideParser():t?ur.parse:ur.parseInline;if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(r):r).then(c=>s(c,n)).then(c=>n.hooks?n.hooks.processAllTokens(c):c).then(c=>n.walkTokens?Promise.all(this.walkTokens(c,n.walkTokens)).then(()=>c):c).then(c=>l(c,n)).then(c=>n.hooks?n.hooks.postprocess(c):c).catch(o);try{n.hooks&&(r=n.hooks.preprocess(r));let c=s(r,n);n.hooks&&(c=n.hooks.processAllTokens(c)),n.walkTokens&&this.walkTokens(c,n.walkTokens);let h=l(c,n);return n.hooks&&(h=n.hooks.postprocess(h)),h}catch(c){return o(c)}}}onError(t,r){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let a="<p>An error occurred:</p><pre>"+Ge(i.message+"",!0)+"</pre>";return r?Promise.resolve(a):a}if(r)return Promise.reject(i);throw i}}},si=new NS;function Mt(e,t){return si.parse(e,t)}Mt.options=Mt.setOptions=function(e){return si.setOptions(e),Mt.defaults=si.defaults,vg(Mt.defaults),Mt};Mt.getDefaults=qc;Mt.defaults=pi;Mt.use=function(...e){return si.use(...e),Mt.defaults=si.defaults,vg(Mt.defaults),Mt};Mt.walkTokens=function(e,t){return si.walkTokens(e,t)};Mt.parseInline=si.parseInline;Mt.Parser=ur;Mt.parser=ur.parse;Mt.Renderer=Gs;Mt.TextRenderer=Gc;Mt.Lexer=hr;Mt.lexer=hr.lex;Mt.Tokenizer=Ys;Mt.Hooks=gs;Mt.parse=Mt;Mt.options;Mt.setOptions;Mt.use;Mt.walkTokens;Mt.parseInline;ur.parse;hr.lex;function Eg(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=Array.from(typeof e=="string"?[e]:e);i[i.length-1]=i[i.length-1].replace(/\r?\n([\t ]*)$/,"");var a=i.reduce(function(s,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?s.concat(c.map(function(h){var u,p;return(p=(u=h.match(/[\t ]/g))===null||u===void 0?void 0:u.length)!==null&&p!==void 0?p:0})):s},[]);if(a.length){var n=new RegExp(`
[	 ]{`+Math.min.apply(Math,a)+"}","g");i=i.map(function(s){return s.replace(n,`
`)})}i[0]=i[0].replace(/^\r?\n/,"");var o=i[0];return t.forEach(function(s,l){var c=o.match(/(?:^|\n)( *)$/),h=c?c[1]:"",u=s;typeof s=="string"&&s.includes(`
`)&&(u=String(s).split(`
`).map(function(p,d){return d===0?p:""+h+p}).join(`
`)),o+=u+i[l+1]}),o}var qS={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},Wl=new Map,$g=new Map,zS=g(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(O.debug("Registering icon pack:",t.name),"loader"in t)$g.set(t.name,t.loader);else if("icons"in t)Wl.set(t.name,t.icons);else throw O.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),Fg=g(async(e,t)=>{const r=Wk(e,!0,t!==void 0);if(!r)throw new Error(`Invalid icon name: ${e}`);const i=r.prefix||t;if(!i)throw new Error(`Icon name must contain a prefix: ${e}`);let a=Wl.get(i);if(!a){const o=$g.get(i);if(!o)throw new Error(`Icon set not found: ${r.prefix}`);try{a={...await o(),prefix:i},Wl.set(i,a)}catch(s){throw O.error(s),new Error(`Failed to load icon set: ${r.prefix}`)}}const n=Vk(a,r.name);if(!n)throw new Error(`Icon not found: ${e}`);return n},"getRegisteredIconData"),WS=g(async e=>{try{return await Fg(e),!0}catch{return!1}},"isIconAvailable"),Mn=g(async(e,t,r)=>{let i;try{i=await Fg(e,t==null?void 0:t.fallbackPrefix)}catch(o){O.error(o),i=qS}const a=Qk(i,t);return iS(rS(a.body),{...a.attributes,...r})},"getIconSVG");function Pg(e,{markdownAutoWrap:t}){const i=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),a=Eg(i);return t===!1?a.replace(/ /g,"&nbsp;"):a}g(Pg,"preprocessMarkdown");function Rg(e,t={}){const r=Pg(e,t),i=Mt.lexer(r),a=[[]];let n=0;function o(s,l="normal"){s.type==="text"?s.text.split(`
`).forEach((h,u)=>{u!==0&&(n++,a.push([])),h.split(" ").forEach(p=>{p=p.replace(/&#39;/g,"'"),p&&a[n].push({content:p,type:l})})}):s.type==="strong"||s.type==="em"?s.tokens.forEach(c=>{o(c,s.type)}):s.type==="html"&&a[n].push({content:s.text,type:"normal"})}return g(o,"processNode"),i.forEach(s=>{var l;s.type==="paragraph"?(l=s.tokens)==null||l.forEach(c=>{o(c)}):s.type==="html"&&a[n].push({content:s.text,type:"normal"})}),a}g(Rg,"markdownToLines");function Dg(e,{markdownAutoWrap:t}={}){const r=Mt.lexer(e);function i(a){var n,o,s;return a.type==="text"?t===!1?a.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):a.text.replace(/\n */g,"<br/>"):a.type==="strong"?`<strong>${(n=a.tokens)==null?void 0:n.map(i).join("")}</strong>`:a.type==="em"?`<em>${(o=a.tokens)==null?void 0:o.map(i).join("")}</em>`:a.type==="paragraph"?`<p>${(s=a.tokens)==null?void 0:s.map(i).join("")}</p>`:a.type==="space"?"":a.type==="html"?`${a.text}`:a.type==="escape"?a.text:`Unsupported markdown: ${a.type}`}return g(i,"output"),r.map(i).join("")}g(Dg,"markdownToHTML");function Og(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}g(Og,"splitTextToChars");function Ig(e,t){const r=Og(t.content);return Xc(e,[],r,t.type)}g(Ig,"splitWordToFitWidth");function Xc(e,t,r,i){if(r.length===0)return[{content:t.join(""),type:i},{content:"",type:i}];const[a,...n]=r,o=[...t,a];return e([{content:o.join(""),type:i}])?Xc(e,o,n,i):(t.length===0&&a&&(t.push(a),r.shift()),[{content:t.join(""),type:i},{content:r.join(""),type:i}])}g(Xc,"splitWordToFitWidthRecursion");function Ng(e,t){if(e.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Xs(e,t)}g(Ng,"splitLineToFitWidth");function Xs(e,t,r=[],i=[]){if(e.length===0)return i.length>0&&r.push(i),r.length>0?r:[];let a="";e[0].content===" "&&(a=" ",e.shift());const n=e.shift()??{content:" ",type:"normal"},o=[...i];if(a!==""&&o.push({content:a,type:"normal"}),o.push(n),t(o))return Xs(e,t,r,o);if(i.length>0)r.push(i),e.unshift(n);else if(n.content){const[s,l]=Ig(t,n);r.push([s]),l.content&&e.unshift(l)}return Xs(e,t,r)}g(Xs,"splitLineToFitWidthRecursion");function Hl(e,t){t&&e.attr("style",t)}g(Hl,"applyStyle");async function qg(e,t,r,i,a=!1){const n=e.append("foreignObject");n.attr("width",`${10*r}px`),n.attr("height",`${10*r}px`);const o=n.append("xhtml:div");let s=t.label;t.label&&ta(t.label)&&(s=await nc(t.label.replace(oa.lineBreakRegex,`
`),St()));const l=t.isNode?"nodeLabel":"edgeLabel",c=o.append("span");c.html(s),Hl(c,t.labelStyle),c.attr("class",`${l} ${i}`),Hl(o,t.labelStyle),o.style("display","table-cell"),o.style("white-space","nowrap"),o.style("line-height","1.5"),o.style("max-width",r+"px"),o.style("text-align","center"),o.attr("xmlns","http://www.w3.org/1999/xhtml"),a&&o.attr("class","labelBkg");let h=o.node().getBoundingClientRect();return h.width===r&&(o.style("display","table"),o.style("white-space","break-spaces"),o.style("width",r+"px"),h=o.node().getBoundingClientRect()),n.node()}g(qg,"addHtmlSpan");function Co(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}g(Co,"createTspan");function zg(e,t,r){const i=e.append("text"),a=Co(i,1,t);ko(a,r);const n=a.node().getComputedTextLength();return i.remove(),n}g(zg,"computeWidthOfText");function HS(e,t,r){var o;const i=e.append("text"),a=Co(i,1,t);ko(a,[{content:r,type:"normal"}]);const n=(o=a.node())==null?void 0:o.getBoundingClientRect();return n&&i.remove(),n}g(HS,"computeDimensionOfText");function Wg(e,t,r,i=!1){const n=t.append("g"),o=n.insert("rect").attr("class","background").attr("style","stroke: none"),s=n.append("text").attr("y","-10.1");let l=0;for(const c of r){const h=g(p=>zg(n,1.1,p)<=e,"checkWidth"),u=h(c)?[c]:Ng(c,h);for(const p of u){const d=Co(s,l,1.1);ko(d,p),l++}}if(i){const c=s.node().getBBox(),h=2;return o.attr("x",c.x-h).attr("y",c.y-h).attr("width",c.width+2*h).attr("height",c.height+2*h),n.node()}else return s.node()}g(Wg,"createFormattedText");function ko(e,t){e.text(""),t.forEach((r,i)=>{const a=e.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");i===0?a.text(r.content):a.text(" "+r.content)})}g(ko,"updateTextContentAndStyles");async function Hg(e){const t=[];e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(i,a,n)=>(t.push((async()=>{const o=`${a}:${n}`;return await WS(o)?await Mn(o,void 0,{class:"label-icon"}):`<i class='${so(i).replace(":"," ")}'></i>`})()),i));const r=await Promise.all(t);return e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>r.shift()??"")}g(Hg,"replaceIconSubstring");var Pr=g(async(e,t="",{style:r="",isTitle:i=!1,classes:a="",useHtmlLabels:n=!0,isNode:o=!0,width:s=200,addSvgBackground:l=!1}={},c)=>{if(O.debug("XYZ createText",t,r,i,a,n,o,"addSvgBackground: ",l),n){const h=Dg(t,c),u=await Hg(ui(h)),p=t.replace(/\\\\/g,"\\"),d={isNode:o,label:ta(t)?p:u,labelStyle:r.replace("fill:","color:")};return await qg(e,d,s,a,l)}else{const h=t.replace(/<br\s*\/?>/g,"<br/>"),u=Rg(h.replace("<br>","<br/>"),c),p=Wg(s,e,u,t?l:!1);if(o){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const d=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");vt(p).attr("style",d)}else{const d=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");vt(p).select("rect").attr("style",d.replace(/background:/g,"fill:"));const f=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");vt(p).select("text").attr("style",f)}return p}},"createText");function Ko(e,t,r){if(e&&e.length){const[i,a]=t,n=Math.PI/180*r,o=Math.cos(n),s=Math.sin(n);for(const l of e){const[c,h]=l;l[0]=(c-i)*o-(h-a)*s+i,l[1]=(c-i)*s+(h-a)*o+a}}}function jS(e,t){return e[0]===t[0]&&e[1]===t[1]}function VS(e,t,r,i=1){const a=r,n=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,s=[0,0];if(a)for(const c of o)Ko(c,s,a);const l=function(c,h,u){const p=[];for(const v of c){const k=[...v];jS(k[0],k[k.length-1])||k.push([k[0][0],k[0][1]]),k.length>2&&p.push(k)}const d=[];h=Math.max(h,.1);const f=[];for(const v of p)for(let k=0;k<v.length-1;k++){const M=v[k],T=v[k+1];if(M[1]!==T[1]){const _=Math.min(M[1],T[1]);f.push({ymin:_,ymax:Math.max(M[1],T[1]),x:_===M[1]?M[0]:T[0],islope:(T[0]-M[0])/(T[1]-M[1])})}}if(f.sort((v,k)=>v.ymin<k.ymin?-1:v.ymin>k.ymin?1:v.x<k.x?-1:v.x>k.x?1:v.ymax===k.ymax?0:(v.ymax-k.ymax)/Math.abs(v.ymax-k.ymax)),!f.length)return d;let m=[],y=f[0].ymin,b=0;for(;m.length||f.length;){if(f.length){let v=-1;for(let k=0;k<f.length&&!(f[k].ymin>y);k++)v=k;f.splice(0,v+1).forEach(k=>{m.push({s:y,edge:k})})}if(m=m.filter(v=>!(v.edge.ymax<=y)),m.sort((v,k)=>v.edge.x===k.edge.x?0:(v.edge.x-k.edge.x)/Math.abs(v.edge.x-k.edge.x)),(u!==1||b%h==0)&&m.length>1)for(let v=0;v<m.length;v+=2){const k=v+1;if(k>=m.length)break;const M=m[v].edge,T=m[k].edge;d.push([[Math.round(M.x),y],[Math.round(T.x),y]])}y+=u,m.forEach(v=>{v.edge.x=v.edge.x+u*v.edge.islope}),b++}return d}(o,n,i);if(a){for(const c of o)Ko(c,s,-a);(function(c,h,u){const p=[];c.forEach(d=>p.push(...d)),Ko(p,h,u)})(l,s,-a)}return l}function Ln(e,t){var r;const i=t.hachureAngle+90;let a=t.hachureGap;a<0&&(a=4*t.strokeWidth),a=Math.round(Math.max(a,.1));let n=1;return t.roughness>=1&&(((r=t.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(n=a),VS(e,a,i,n||1)}class Zc{constructor(t){this.helper=t}fillPolygons(t,r){return this._fillPolygons(t,r)}_fillPolygons(t,r){const i=Ln(t,r);return{type:"fillSketch",ops:this.renderLines(i,r)}}renderLines(t,r){const i=[];for(const a of t)i.push(...this.helper.doubleLineOps(a[0][0],a[0][1],a[1][0],a[1][1],r));return i}}function So(e){const t=e[0],r=e[1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}class US extends Zc{fillPolygons(t,r){let i=r.hachureGap;i<0&&(i=4*r.strokeWidth),i=Math.max(i,.1);const a=Ln(t,Object.assign({},r,{hachureGap:i})),n=Math.PI/180*r.hachureAngle,o=[],s=.5*i*Math.cos(n),l=.5*i*Math.sin(n);for(const[c,h]of a)So([c,h])&&o.push([[c[0]-s,c[1]+l],[...h]],[[c[0]+s,c[1]-l],[...h]]);return{type:"fillSketch",ops:this.renderLines(o,r)}}}class YS extends Zc{fillPolygons(t,r){const i=this._fillPolygons(t,r),a=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),n=this._fillPolygons(t,a);return i.ops=i.ops.concat(n.ops),i}}class GS{constructor(t){this.helper=t}fillPolygons(t,r){const i=Ln(t,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(i,r)}dotsOnLines(t,r){const i=[];let a=r.hachureGap;a<0&&(a=4*r.strokeWidth),a=Math.max(a,.1);let n=r.fillWeight;n<0&&(n=r.strokeWidth/2);const o=a/4;for(const s of t){const l=So(s),c=l/a,h=Math.ceil(c)-1,u=l-h*a,p=(s[0][0]+s[1][0])/2-a/4,d=Math.min(s[0][1],s[1][1]);for(let f=0;f<h;f++){const m=d+u+f*a,y=p-o+2*Math.random()*o,b=m-o+2*Math.random()*o,v=this.helper.ellipse(y,b,n,n,r);i.push(...v.ops)}}return{type:"fillSketch",ops:i}}}class XS{constructor(t){this.helper=t}fillPolygons(t,r){const i=Ln(t,r);return{type:"fillSketch",ops:this.dashedLine(i,r)}}dashedLine(t,r){const i=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,a=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,n=[];return t.forEach(o=>{const s=So(o),l=Math.floor(s/(i+a)),c=(s+a-l*(i+a))/2;let h=o[0],u=o[1];h[0]>u[0]&&(h=o[1],u=o[0]);const p=Math.atan((u[1]-h[1])/(u[0]-h[0]));for(let d=0;d<l;d++){const f=d*(i+a),m=f+i,y=[h[0]+f*Math.cos(p)+c*Math.cos(p),h[1]+f*Math.sin(p)+c*Math.sin(p)],b=[h[0]+m*Math.cos(p)+c*Math.cos(p),h[1]+m*Math.sin(p)+c*Math.sin(p)];n.push(...this.helper.doubleLineOps(y[0],y[1],b[0],b[1],r))}}),n}}class ZS{constructor(t){this.helper=t}fillPolygons(t,r){const i=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,a=r.zigzagOffset<0?i:r.zigzagOffset,n=Ln(t,r=Object.assign({},r,{hachureGap:i+a}));return{type:"fillSketch",ops:this.zigzagLines(n,a,r)}}zigzagLines(t,r,i){const a=[];return t.forEach(n=>{const o=So(n),s=Math.round(o/(2*r));let l=n[0],c=n[1];l[0]>c[0]&&(l=n[1],c=n[0]);const h=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let u=0;u<s;u++){const p=2*u*r,d=2*(u+1)*r,f=Math.sqrt(2*Math.pow(r,2)),m=[l[0]+p*Math.cos(h),l[1]+p*Math.sin(h)],y=[l[0]+d*Math.cos(h),l[1]+d*Math.sin(h)],b=[m[0]+f*Math.cos(h+Math.PI/4),m[1]+f*Math.sin(h+Math.PI/4)];a.push(...this.helper.doubleLineOps(m[0],m[1],b[0],b[1],i),...this.helper.doubleLineOps(b[0],b[1],y[0],y[1],i))}}),a}}const me={};class KS{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const QS=0,Qo=1,Cu=2,es={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Jo(e,t){return e.type===t}function Kc(e){const t=[],r=function(o){const s=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))s[s.length]={type:QS,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];s[s.length]={type:Qo,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return s[s.length]={type:Cu,text:""},s}(e);let i="BOD",a=0,n=r[a];for(;!Jo(n,Cu);){let o=0;const s=[];if(i==="BOD"){if(n.text!=="M"&&n.text!=="m")return Kc("M0,0"+e);a++,o=es[n.text],i=n.text}else Jo(n,Qo)?o=es[i]:(a++,o=es[n.text],i=n.text);if(!(a+o<r.length))throw new Error("Path data ended short");for(let l=a;l<a+o;l++){const c=r[l];if(!Jo(c,Qo))throw new Error("Param not a number: "+i+","+c.text);s[s.length]=+c.text}if(typeof es[i]!="number")throw new Error("Bad segment: "+i);{const l={key:i,data:s};t.push(l),a+=o,n=r[a],i==="M"&&(i="L"),i==="m"&&(i="l")}}return t}function jg(e){let t=0,r=0,i=0,a=0;const n=[];for(const{key:o,data:s}of e)switch(o){case"M":n.push({key:"M",data:[...s]}),[t,r]=s,[i,a]=s;break;case"m":t+=s[0],r+=s[1],n.push({key:"M",data:[t,r]}),i=t,a=r;break;case"L":n.push({key:"L",data:[...s]}),[t,r]=s;break;case"l":t+=s[0],r+=s[1],n.push({key:"L",data:[t,r]});break;case"C":n.push({key:"C",data:[...s]}),t=s[4],r=s[5];break;case"c":{const l=s.map((c,h)=>h%2?c+r:c+t);n.push({key:"C",data:l}),t=l[4],r=l[5];break}case"Q":n.push({key:"Q",data:[...s]}),t=s[2],r=s[3];break;case"q":{const l=s.map((c,h)=>h%2?c+r:c+t);n.push({key:"Q",data:l}),t=l[2],r=l[3];break}case"A":n.push({key:"A",data:[...s]}),t=s[5],r=s[6];break;case"a":t+=s[5],r+=s[6],n.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],t,r]});break;case"H":n.push({key:"H",data:[...s]}),t=s[0];break;case"h":t+=s[0],n.push({key:"H",data:[t]});break;case"V":n.push({key:"V",data:[...s]}),r=s[0];break;case"v":r+=s[0],n.push({key:"V",data:[r]});break;case"S":n.push({key:"S",data:[...s]}),t=s[2],r=s[3];break;case"s":{const l=s.map((c,h)=>h%2?c+r:c+t);n.push({key:"S",data:l}),t=l[2],r=l[3];break}case"T":n.push({key:"T",data:[...s]}),t=s[0],r=s[1];break;case"t":t+=s[0],r+=s[1],n.push({key:"T",data:[t,r]});break;case"Z":case"z":n.push({key:"Z",data:[]}),t=i,r=a}return n}function Vg(e){const t=[];let r="",i=0,a=0,n=0,o=0,s=0,l=0;for(const{key:c,data:h}of e){switch(c){case"M":t.push({key:"M",data:[...h]}),[i,a]=h,[n,o]=h;break;case"C":t.push({key:"C",data:[...h]}),i=h[4],a=h[5],s=h[2],l=h[3];break;case"L":t.push({key:"L",data:[...h]}),[i,a]=h;break;case"H":i=h[0],t.push({key:"L",data:[i,a]});break;case"V":a=h[0],t.push({key:"L",data:[i,a]});break;case"S":{let u=0,p=0;r==="C"||r==="S"?(u=i+(i-s),p=a+(a-l)):(u=i,p=a),t.push({key:"C",data:[u,p,...h]}),s=h[0],l=h[1],i=h[2],a=h[3];break}case"T":{const[u,p]=h;let d=0,f=0;r==="Q"||r==="T"?(d=i+(i-s),f=a+(a-l)):(d=i,f=a);const m=i+2*(d-i)/3,y=a+2*(f-a)/3,b=u+2*(d-u)/3,v=p+2*(f-p)/3;t.push({key:"C",data:[m,y,b,v,u,p]}),s=d,l=f,i=u,a=p;break}case"Q":{const[u,p,d,f]=h,m=i+2*(u-i)/3,y=a+2*(p-a)/3,b=d+2*(u-d)/3,v=f+2*(p-f)/3;t.push({key:"C",data:[m,y,b,v,d,f]}),s=u,l=p,i=d,a=f;break}case"A":{const u=Math.abs(h[0]),p=Math.abs(h[1]),d=h[2],f=h[3],m=h[4],y=h[5],b=h[6];u===0||p===0?(t.push({key:"C",data:[i,a,y,b,y,b]}),i=y,a=b):(i!==y||a!==b)&&(Ug(i,a,y,b,u,p,d,f,m).forEach(function(v){t.push({key:"C",data:v})}),i=y,a=b);break}case"Z":t.push({key:"Z",data:[]}),i=n,a=o}r=c}return t}function ja(e,t,r){return[e*Math.cos(r)-t*Math.sin(r),e*Math.sin(r)+t*Math.cos(r)]}function Ug(e,t,r,i,a,n,o,s,l,c){const h=(u=o,Math.PI*u/180);var u;let p=[],d=0,f=0,m=0,y=0;if(c)[d,f,m,y]=c;else{[e,t]=ja(e,t,-h),[r,i]=ja(r,i,-h);const q=(e-r)/2,$=(t-i)/2;let E=q*q/(a*a)+$*$/(n*n);E>1&&(E=Math.sqrt(E),a*=E,n*=E);const B=a*a,D=n*n,F=B*D-B*$*$-D*q*q,X=B*$*$+D*q*q,et=(s===l?-1:1)*Math.sqrt(Math.abs(F/X));m=et*a*$/n+(e+r)/2,y=et*-n*q/a+(t+i)/2,d=Math.asin(parseFloat(((t-y)/n).toFixed(9))),f=Math.asin(parseFloat(((i-y)/n).toFixed(9))),e<m&&(d=Math.PI-d),r<m&&(f=Math.PI-f),d<0&&(d=2*Math.PI+d),f<0&&(f=2*Math.PI+f),l&&d>f&&(d-=2*Math.PI),!l&&f>d&&(f-=2*Math.PI)}let b=f-d;if(Math.abs(b)>120*Math.PI/180){const q=f,$=r,E=i;f=l&&f>d?d+120*Math.PI/180*1:d+120*Math.PI/180*-1,p=Ug(r=m+a*Math.cos(f),i=y+n*Math.sin(f),$,E,a,n,o,0,l,[f,q,m,y])}b=f-d;const v=Math.cos(d),k=Math.sin(d),M=Math.cos(f),T=Math.sin(f),_=Math.tan(b/4),S=4/3*a*_,I=4/3*n*_,V=[e,t],N=[e+S*k,t-I*v],P=[r+S*T,i-I*M],Y=[r,i];if(N[0]=2*V[0]-N[0],N[1]=2*V[1]-N[1],c)return[N,P,Y].concat(p);{p=[N,P,Y].concat(p);const q=[];for(let $=0;$<p.length;$+=3){const E=ja(p[$][0],p[$][1],h),B=ja(p[$+1][0],p[$+1][1],h),D=ja(p[$+2][0],p[$+2][1],h);q.push([E[0],E[1],B[0],B[1],D[0],D[1]])}return q}}const JS={randOffset:function(e,t){return ht(e,t)},randOffsetWithRange:function(e,t,r){return Zs(e,t,r)},ellipse:function(e,t,r,i,a){const n=Gg(r,i,a);return jl(e,t,a,n).opset},doubleLineOps:function(e,t,r,i,a){return Er(e,t,r,i,a,!0)}};function Yg(e,t,r,i,a){return{type:"path",ops:Er(e,t,r,i,a)}}function ms(e,t,r){const i=(e||[]).length;if(i>2){const a=[];for(let n=0;n<i-1;n++)a.push(...Er(e[n][0],e[n][1],e[n+1][0],e[n+1][1],r));return t&&a.push(...Er(e[i-1][0],e[i-1][1],e[0][0],e[0][1],r)),{type:"path",ops:a}}return i===2?Yg(e[0][0],e[0][1],e[1][0],e[1][1],r):{type:"path",ops:[]}}function tT(e,t,r,i,a){return function(n,o){return ms(n,!0,o)}([[e,t],[e+r,t],[e+r,t+i],[e,t+i]],a)}function ku(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,i=rs(r[0],1*(1+.2*t.roughness),t),a=t.disableMultiStroke?[]:rs(r[0],1.5*(1+.22*t.roughness),Mu(t));for(let n=1;n<r.length;n++){const o=r[n];if(o.length){const s=rs(o,1*(1+.2*t.roughness),t),l=t.disableMultiStroke?[]:rs(o,1.5*(1+.22*t.roughness),Mu(t));for(const c of s)c.op!=="move"&&i.push(c);for(const c of l)c.op!=="move"&&a.push(c)}}return{type:"path",ops:i.concat(a)}}return{type:"path",ops:[]}}function Gg(e,t,r){const i=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),a=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*i)),n=2*Math.PI/a;let o=Math.abs(e/2),s=Math.abs(t/2);const l=1-r.curveFitting;return o+=ht(o*l,r),s+=ht(s*l,r),{increment:n,rx:o,ry:s}}function jl(e,t,r,i){const[a,n]=Lu(i.increment,e,t,i.rx,i.ry,1,i.increment*Zs(.1,Zs(.4,1,r),r),r);let o=Ks(a,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[s]=Lu(i.increment,e,t,i.rx,i.ry,1.5,0,r),l=Ks(s,null,r);o=o.concat(l)}return{estimatedPoints:n,opset:{type:"path",ops:o}}}function Su(e,t,r,i,a,n,o,s,l){const c=e,h=t;let u=Math.abs(r/2),p=Math.abs(i/2);u+=ht(.01*u,l),p+=ht(.01*p,l);let d=a,f=n;for(;d<0;)d+=2*Math.PI,f+=2*Math.PI;f-d>2*Math.PI&&(d=0,f=2*Math.PI);const m=2*Math.PI/l.curveStepCount,y=Math.min(m/2,(f-d)/2),b=Au(y,c,h,u,p,d,f,1,l);if(!l.disableMultiStroke){const v=Au(y,c,h,u,p,d,f,1.5,l);b.push(...v)}return o&&(s?b.push(...Er(c,h,c+u*Math.cos(d),h+p*Math.sin(d),l),...Er(c,h,c+u*Math.cos(f),h+p*Math.sin(f),l)):b.push({op:"lineTo",data:[c,h]},{op:"lineTo",data:[c+u*Math.cos(d),h+p*Math.sin(d)]})),{type:"path",ops:b}}function Tu(e,t){const r=Vg(jg(Kc(e))),i=[];let a=[0,0],n=[0,0];for(const{key:o,data:s}of r)switch(o){case"M":n=[s[0],s[1]],a=[s[0],s[1]];break;case"L":i.push(...Er(n[0],n[1],s[0],s[1],t)),n=[s[0],s[1]];break;case"C":{const[l,c,h,u,p,d]=s;i.push(...eT(l,c,h,u,p,d,n,t)),n=[p,d];break}case"Z":i.push(...Er(n[0],n[1],a[0],a[1],t)),n=[a[0],a[1]]}return{type:"path",ops:i}}function tl(e,t){const r=[];for(const i of e)if(i.length){const a=t.maxRandomnessOffset||0,n=i.length;if(n>2){r.push({op:"move",data:[i[0][0]+ht(a,t),i[0][1]+ht(a,t)]});for(let o=1;o<n;o++)r.push({op:"lineTo",data:[i[o][0]+ht(a,t),i[o][1]+ht(a,t)]})}}return{type:"fillPath",ops:r}}function Di(e,t){return function(r,i){let a=r.fillStyle||"hachure";if(!me[a])switch(a){case"zigzag":me[a]||(me[a]=new US(i));break;case"cross-hatch":me[a]||(me[a]=new YS(i));break;case"dots":me[a]||(me[a]=new GS(i));break;case"dashed":me[a]||(me[a]=new XS(i));break;case"zigzag-line":me[a]||(me[a]=new ZS(i));break;default:a="hachure",me[a]||(me[a]=new Zc(i))}return me[a]}(t,JS).fillPolygons(e,t)}function Mu(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function Xg(e){return e.randomizer||(e.randomizer=new KS(e.seed||0)),e.randomizer.next()}function Zs(e,t,r,i=1){return r.roughness*i*(Xg(r)*(t-e)+e)}function ht(e,t,r=1){return Zs(-e,e,t,r)}function Er(e,t,r,i,a,n=!1){const o=n?a.disableMultiStrokeFill:a.disableMultiStroke,s=Vl(e,t,r,i,a,!0,!1);if(o)return s;const l=Vl(e,t,r,i,a,!0,!0);return s.concat(l)}function Vl(e,t,r,i,a,n,o){const s=Math.pow(e-r,2)+Math.pow(t-i,2),l=Math.sqrt(s);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let h=a.maxRandomnessOffset||0;h*h*100>s&&(h=l/10);const u=h/2,p=.2+.2*Xg(a);let d=a.bowing*a.maxRandomnessOffset*(i-t)/200,f=a.bowing*a.maxRandomnessOffset*(e-r)/200;d=ht(d,a,c),f=ht(f,a,c);const m=[],y=()=>ht(u,a,c),b=()=>ht(h,a,c),v=a.preserveVertices;return o?m.push({op:"move",data:[e+(v?0:y()),t+(v?0:y())]}):m.push({op:"move",data:[e+(v?0:ht(h,a,c)),t+(v?0:ht(h,a,c))]}),o?m.push({op:"bcurveTo",data:[d+e+(r-e)*p+y(),f+t+(i-t)*p+y(),d+e+2*(r-e)*p+y(),f+t+2*(i-t)*p+y(),r+(v?0:y()),i+(v?0:y())]}):m.push({op:"bcurveTo",data:[d+e+(r-e)*p+b(),f+t+(i-t)*p+b(),d+e+2*(r-e)*p+b(),f+t+2*(i-t)*p+b(),r+(v?0:b()),i+(v?0:b())]}),m}function rs(e,t,r){if(!e.length)return[];const i=[];i.push([e[0][0]+ht(t,r),e[0][1]+ht(t,r)]),i.push([e[0][0]+ht(t,r),e[0][1]+ht(t,r)]);for(let a=1;a<e.length;a++)i.push([e[a][0]+ht(t,r),e[a][1]+ht(t,r)]),a===e.length-1&&i.push([e[a][0]+ht(t,r),e[a][1]+ht(t,r)]);return Ks(i,null,r)}function Ks(e,t,r){const i=e.length,a=[];if(i>3){const n=[],o=1-r.curveTightness;a.push({op:"move",data:[e[1][0],e[1][1]]});for(let s=1;s+2<i;s++){const l=e[s];n[0]=[l[0],l[1]],n[1]=[l[0]+(o*e[s+1][0]-o*e[s-1][0])/6,l[1]+(o*e[s+1][1]-o*e[s-1][1])/6],n[2]=[e[s+1][0]+(o*e[s][0]-o*e[s+2][0])/6,e[s+1][1]+(o*e[s][1]-o*e[s+2][1])/6],n[3]=[e[s+1][0],e[s+1][1]],a.push({op:"bcurveTo",data:[n[1][0],n[1][1],n[2][0],n[2][1],n[3][0],n[3][1]]})}}else i===3?(a.push({op:"move",data:[e[1][0],e[1][1]]}),a.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):i===2&&a.push(...Vl(e[0][0],e[0][1],e[1][0],e[1][1],r,!0,!0));return a}function Lu(e,t,r,i,a,n,o,s){const l=[],c=[];if(s.roughness===0){e/=4,c.push([t+i*Math.cos(-e),r+a*Math.sin(-e)]);for(let h=0;h<=2*Math.PI;h+=e){const u=[t+i*Math.cos(h),r+a*Math.sin(h)];l.push(u),c.push(u)}c.push([t+i*Math.cos(0),r+a*Math.sin(0)]),c.push([t+i*Math.cos(e),r+a*Math.sin(e)])}else{const h=ht(.5,s)-Math.PI/2;c.push([ht(n,s)+t+.9*i*Math.cos(h-e),ht(n,s)+r+.9*a*Math.sin(h-e)]);const u=2*Math.PI+h-.01;for(let p=h;p<u;p+=e){const d=[ht(n,s)+t+i*Math.cos(p),ht(n,s)+r+a*Math.sin(p)];l.push(d),c.push(d)}c.push([ht(n,s)+t+i*Math.cos(h+2*Math.PI+.5*o),ht(n,s)+r+a*Math.sin(h+2*Math.PI+.5*o)]),c.push([ht(n,s)+t+.98*i*Math.cos(h+o),ht(n,s)+r+.98*a*Math.sin(h+o)]),c.push([ht(n,s)+t+.9*i*Math.cos(h+.5*o),ht(n,s)+r+.9*a*Math.sin(h+.5*o)])}return[c,l]}function Au(e,t,r,i,a,n,o,s,l){const c=n+ht(.1,l),h=[];h.push([ht(s,l)+t+.9*i*Math.cos(c-e),ht(s,l)+r+.9*a*Math.sin(c-e)]);for(let u=c;u<=o;u+=e)h.push([ht(s,l)+t+i*Math.cos(u),ht(s,l)+r+a*Math.sin(u)]);return h.push([t+i*Math.cos(o),r+a*Math.sin(o)]),h.push([t+i*Math.cos(o),r+a*Math.sin(o)]),Ks(h,null,l)}function eT(e,t,r,i,a,n,o,s){const l=[],c=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3];let h=[0,0];const u=s.disableMultiStroke?1:2,p=s.preserveVertices;for(let d=0;d<u;d++)d===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(p?0:ht(c[0],s)),o[1]+(p?0:ht(c[0],s))]}),h=p?[a,n]:[a+ht(c[d],s),n+ht(c[d],s)],l.push({op:"bcurveTo",data:[e+ht(c[d],s),t+ht(c[d],s),r+ht(c[d],s),i+ht(c[d],s),h[0],h[1]]});return l}function Va(e){return[...e]}function Bu(e,t=0){const r=e.length;if(r<3)throw new Error("A curve must have at least three points.");const i=[];if(r===3)i.push(Va(e[0]),Va(e[1]),Va(e[2]),Va(e[2]));else{const a=[];a.push(e[0],e[0]);for(let s=1;s<e.length;s++)a.push(e[s]),s===e.length-1&&a.push(e[s]);const n=[],o=1-t;i.push(Va(a[0]));for(let s=1;s+2<a.length;s++){const l=a[s];n[0]=[l[0],l[1]],n[1]=[l[0]+(o*a[s+1][0]-o*a[s-1][0])/6,l[1]+(o*a[s+1][1]-o*a[s-1][1])/6],n[2]=[a[s+1][0]+(o*a[s][0]-o*a[s+2][0])/6,a[s+1][1]+(o*a[s][1]-o*a[s+2][1])/6],n[3]=[a[s+1][0],a[s+1][1]],i.push(n[1],n[2],n[3])}}return i}function ys(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function rT(e,t,r){const i=ys(t,r);if(i===0)return ys(e,t);let a=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/i;return a=Math.max(0,Math.min(1,a)),ys(e,Ur(t,r,a))}function Ur(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]}function Ul(e,t,r,i){const a=i||[];if(function(s,l){const c=s[l+0],h=s[l+1],u=s[l+2],p=s[l+3];let d=3*h[0]-2*c[0]-p[0];d*=d;let f=3*h[1]-2*c[1]-p[1];f*=f;let m=3*u[0]-2*p[0]-c[0];m*=m;let y=3*u[1]-2*p[1]-c[1];return y*=y,d<m&&(d=m),f<y&&(f=y),d+f}(e,t)<r){const s=e[t+0];a.length?(n=a[a.length-1],o=s,Math.sqrt(ys(n,o))>1&&a.push(s)):a.push(s),a.push(e[t+3])}else{const l=e[t+0],c=e[t+1],h=e[t+2],u=e[t+3],p=Ur(l,c,.5),d=Ur(c,h,.5),f=Ur(h,u,.5),m=Ur(p,d,.5),y=Ur(d,f,.5),b=Ur(m,y,.5);Ul([l,p,m,b],0,r,a),Ul([b,y,f,u],0,r,a)}var n,o;return a}function iT(e,t){return Qs(e,0,e.length,t)}function Qs(e,t,r,i,a){const n=a||[],o=e[t],s=e[r-1];let l=0,c=1;for(let h=t+1;h<r-1;++h){const u=rT(e[h],o,s);u>l&&(l=u,c=h)}return Math.sqrt(l)>i?(Qs(e,t,c+1,i,n),Qs(e,c,r,i,n)):(n.length||n.push(o),n.push(s)),n}function el(e,t=.15,r){const i=[],a=(e.length-1)/3;for(let n=0;n<a;n++)Ul(e,3*n,t,i);return r&&r>0?Qs(i,0,i.length,r):i}const Ce="none";class Js{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,r,i){return{shape:t,sets:r||[],options:i||this.defaultOptions}}line(t,r,i,a,n){const o=this._o(n);return this._d("line",[Yg(t,r,i,a,o)],o)}rectangle(t,r,i,a,n){const o=this._o(n),s=[],l=tT(t,r,i,a,o);if(o.fill){const c=[[t,r],[t+i,r],[t+i,r+a],[t,r+a]];o.fillStyle==="solid"?s.push(tl([c],o)):s.push(Di([c],o))}return o.stroke!==Ce&&s.push(l),this._d("rectangle",s,o)}ellipse(t,r,i,a,n){const o=this._o(n),s=[],l=Gg(i,a,o),c=jl(t,r,o,l);if(o.fill)if(o.fillStyle==="solid"){const h=jl(t,r,o,l).opset;h.type="fillPath",s.push(h)}else s.push(Di([c.estimatedPoints],o));return o.stroke!==Ce&&s.push(c.opset),this._d("ellipse",s,o)}circle(t,r,i,a){const n=this.ellipse(t,r,i,i,a);return n.shape="circle",n}linearPath(t,r){const i=this._o(r);return this._d("linearPath",[ms(t,!1,i)],i)}arc(t,r,i,a,n,o,s=!1,l){const c=this._o(l),h=[],u=Su(t,r,i,a,n,o,s,!0,c);if(s&&c.fill)if(c.fillStyle==="solid"){const p=Object.assign({},c);p.disableMultiStroke=!0;const d=Su(t,r,i,a,n,o,!0,!1,p);d.type="fillPath",h.push(d)}else h.push(function(p,d,f,m,y,b,v){const k=p,M=d;let T=Math.abs(f/2),_=Math.abs(m/2);T+=ht(.01*T,v),_+=ht(.01*_,v);let S=y,I=b;for(;S<0;)S+=2*Math.PI,I+=2*Math.PI;I-S>2*Math.PI&&(S=0,I=2*Math.PI);const V=(I-S)/v.curveStepCount,N=[];for(let P=S;P<=I;P+=V)N.push([k+T*Math.cos(P),M+_*Math.sin(P)]);return N.push([k+T*Math.cos(I),M+_*Math.sin(I)]),N.push([k,M]),Di([N],v)}(t,r,i,a,n,o,c));return c.stroke!==Ce&&h.push(u),this._d("arc",h,c)}curve(t,r){const i=this._o(r),a=[],n=ku(t,i);if(i.fill&&i.fill!==Ce)if(i.fillStyle==="solid"){const o=ku(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],s=t;if(s.length){const l=typeof s[0][0]=="number"?[s]:s;for(const c of l)c.length<3?o.push(...c):c.length===3?o.push(...el(Bu([c[0],c[0],c[1],c[2]]),10,(1+i.roughness)/2)):o.push(...el(Bu(c),10,(1+i.roughness)/2))}o.length&&a.push(Di([o],i))}return i.stroke!==Ce&&a.push(n),this._d("curve",a,i)}polygon(t,r){const i=this._o(r),a=[],n=ms(t,!0,i);return i.fill&&(i.fillStyle==="solid"?a.push(tl([t],i)):a.push(Di([t],i))),i.stroke!==Ce&&a.push(n),this._d("polygon",a,i)}path(t,r){const i=this._o(r),a=[];if(!t)return this._d("path",a,i);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const n=i.fill&&i.fill!=="transparent"&&i.fill!==Ce,o=i.stroke!==Ce,s=!!(i.simplification&&i.simplification<1),l=function(h,u,p){const d=Vg(jg(Kc(h))),f=[];let m=[],y=[0,0],b=[];const v=()=>{b.length>=4&&m.push(...el(b,u)),b=[]},k=()=>{v(),m.length&&(f.push(m),m=[])};for(const{key:T,data:_}of d)switch(T){case"M":k(),y=[_[0],_[1]],m.push(y);break;case"L":v(),m.push([_[0],_[1]]);break;case"C":if(!b.length){const S=m.length?m[m.length-1]:y;b.push([S[0],S[1]])}b.push([_[0],_[1]]),b.push([_[2],_[3]]),b.push([_[4],_[5]]);break;case"Z":v(),m.push([y[0],y[1]])}if(k(),!p)return f;const M=[];for(const T of f){const _=iT(T,p);_.length&&M.push(_)}return M}(t,1,s?4-4*(i.simplification||1):(1+i.roughness)/2),c=Tu(t,i);if(n)if(i.fillStyle==="solid")if(l.length===1){const h=Tu(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(h.ops)})}else a.push(tl(l,i));else a.push(Di(l,i));return o&&(s?l.forEach(h=>{a.push(ms(h,!1,i))}):a.push(c)),this._d("path",a,i)}opsToPath(t,r){let i="";for(const a of t.ops){const n=typeof r=="number"&&r>=0?a.data.map(o=>+o.toFixed(r)):a.data;switch(a.op){case"move":i+=`M${n[0]} ${n[1]} `;break;case"bcurveTo":i+=`C${n[0]} ${n[1]}, ${n[2]} ${n[3]}, ${n[4]} ${n[5]} `;break;case"lineTo":i+=`L${n[0]} ${n[1]} `}}return i.trim()}toPaths(t){const r=t.sets||[],i=t.options||this.defaultOptions,a=[];for(const n of r){let o=null;switch(n.type){case"path":o={d:this.opsToPath(n),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:Ce};break;case"fillPath":o={d:this.opsToPath(n),stroke:Ce,strokeWidth:0,fill:i.fill||Ce};break;case"fillSketch":o=this.fillSketch(n,i)}o&&a.push(o)}return a}fillSketch(t,r){let i=r.fillWeight;return i<0&&(i=r.strokeWidth/2),{d:this.opsToPath(t),stroke:r.fill||Ce,strokeWidth:i,fill:Ce}}_mergedShape(t){return t.filter((r,i)=>i===0||r.op!=="move")}}class aT{constructor(t,r){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Js(r)}draw(t){const r=t.sets||[],i=t.options||this.getDefaultOptions(),a=this.ctx,n=t.options.fixedDecimalPlaceDigits;for(const o of r)switch(o.type){case"path":a.save(),a.strokeStyle=i.stroke==="none"?"transparent":i.stroke,a.lineWidth=i.strokeWidth,i.strokeLineDash&&a.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(a.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(a,o,n),a.restore();break;case"fillPath":{a.save(),a.fillStyle=i.fill||"";const s=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(a,o,n,s),a.restore();break}case"fillSketch":this.fillSketch(a,o,i)}}fillSketch(t,r,i){let a=i.fillWeight;a<0&&(a=i.strokeWidth/2),t.save(),i.fillLineDash&&t.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(t.lineDashOffset=i.fillLineDashOffset),t.strokeStyle=i.fill||"",t.lineWidth=a,this._drawToContext(t,r,i.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,r,i,a="nonzero"){t.beginPath();for(const n of r.ops){const o=typeof i=="number"&&i>=0?n.data.map(s=>+s.toFixed(i)):n.data;switch(n.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1])}}r.type==="fillPath"?t.fill(a):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,r,i,a,n){const o=this.gen.line(t,r,i,a,n);return this.draw(o),o}rectangle(t,r,i,a,n){const o=this.gen.rectangle(t,r,i,a,n);return this.draw(o),o}ellipse(t,r,i,a,n){const o=this.gen.ellipse(t,r,i,a,n);return this.draw(o),o}circle(t,r,i,a){const n=this.gen.circle(t,r,i,a);return this.draw(n),n}linearPath(t,r){const i=this.gen.linearPath(t,r);return this.draw(i),i}polygon(t,r){const i=this.gen.polygon(t,r);return this.draw(i),i}arc(t,r,i,a,n,o,s=!1,l){const c=this.gen.arc(t,r,i,a,n,o,s,l);return this.draw(c),c}curve(t,r){const i=this.gen.curve(t,r);return this.draw(i),i}path(t,r){const i=this.gen.path(t,r);return this.draw(i),i}}const is="http://www.w3.org/2000/svg";class nT{constructor(t,r){this.svg=t,this.gen=new Js(r)}draw(t){const r=t.sets||[],i=t.options||this.getDefaultOptions(),a=this.svg.ownerDocument||window.document,n=a.createElementNS(is,"g"),o=t.options.fixedDecimalPlaceDigits;for(const s of r){let l=null;switch(s.type){case"path":l=a.createElementNS(is,"path"),l.setAttribute("d",this.opsToPath(s,o)),l.setAttribute("stroke",i.stroke),l.setAttribute("stroke-width",i.strokeWidth+""),l.setAttribute("fill","none"),i.strokeLineDash&&l.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break;case"fillPath":l=a.createElementNS(is,"path"),l.setAttribute("d",this.opsToPath(s,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",i.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(a,s,i)}l&&n.appendChild(l)}return n}fillSketch(t,r,i){let a=i.fillWeight;a<0&&(a=i.strokeWidth/2);const n=t.createElementNS(is,"path");return n.setAttribute("d",this.opsToPath(r,i.fixedDecimalPlaceDigits)),n.setAttribute("stroke",i.fill||""),n.setAttribute("stroke-width",a+""),n.setAttribute("fill","none"),i.fillLineDash&&n.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&n.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),n}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,r){return this.gen.opsToPath(t,r)}line(t,r,i,a,n){const o=this.gen.line(t,r,i,a,n);return this.draw(o)}rectangle(t,r,i,a,n){const o=this.gen.rectangle(t,r,i,a,n);return this.draw(o)}ellipse(t,r,i,a,n){const o=this.gen.ellipse(t,r,i,a,n);return this.draw(o)}circle(t,r,i,a){const n=this.gen.circle(t,r,i,a);return this.draw(n)}linearPath(t,r){const i=this.gen.linearPath(t,r);return this.draw(i)}polygon(t,r){const i=this.gen.polygon(t,r);return this.draw(i)}arc(t,r,i,a,n,o,s=!1,l){const c=this.gen.arc(t,r,i,a,n,o,s,l);return this.draw(c)}curve(t,r){const i=this.gen.curve(t,r);return this.draw(i)}path(t,r){const i=this.gen.path(t,r);return this.draw(i)}}var rt={canvas:(e,t)=>new aT(e,t),svg:(e,t)=>new nT(e,t),generator:e=>new Js(e),newSeed:()=>Js.newSeed()},ft=g(async(e,t,r)=>{var u,p;let i;const a=t.useHtmlLabels||Qt((u=St())==null?void 0:u.htmlLabels);r?i=r:i="node default";const n=e.insert("g").attr("class",i).attr("id",t.domId||t.id),o=n.insert("g").attr("class","label").attr("style",de(t.labelStyle));let s;t.label===void 0?s="":s=typeof t.label=="string"?t.label:t.label[0];const l=await Pr(o,ri(ui(s),St()),{useHtmlLabels:a,width:t.width||((p=St().flowchart)==null?void 0:p.wrappingWidth),cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let c=l.getBBox();const h=((t==null?void 0:t.padding)??0)/2;if(a){const d=l.children[0],f=vt(l),m=d.getElementsByTagName("img");if(m){const y=s.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...m].map(b=>new Promise(v=>{function k(){if(b.style.display="flex",b.style.flexDirection="column",y){const M=St().fontSize?St().fontSize:window.getComputedStyle(document.body).fontSize,T=5,[_=op.fontSize]=vo(M),S=_*T+"px";b.style.minWidth=S,b.style.maxWidth=S}else b.style.width="100%";v(b)}g(k,"setupImage"),setTimeout(()=>{b.complete&&k()}),b.addEventListener("error",k),b.addEventListener("load",k)})))}c=d.getBoundingClientRect(),f.attr("width",c.width),f.attr("height",c.height)}return a?o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):o.attr("transform","translate(0, "+-c.height/2+")"),t.centerLabel&&o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:n,bbox:c,halfPadding:h,label:o}},"labelHelper"),rl=g(async(e,t,r)=>{var l,c,h,u,p,d;const i=r.useHtmlLabels||Qt((c=(l=St())==null?void 0:l.flowchart)==null?void 0:c.htmlLabels),a=e.insert("g").attr("class","label").attr("style",r.labelStyle||""),n=await Pr(a,ri(ui(t),St()),{useHtmlLabels:i,width:r.width||((u=(h=St())==null?void 0:h.flowchart)==null?void 0:u.wrappingWidth),style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let o=n.getBBox();const s=r.padding/2;if(Qt((d=(p=St())==null?void 0:p.flowchart)==null?void 0:d.htmlLabels)){const f=n.children[0],m=vt(n);o=f.getBoundingClientRect(),m.attr("width",o.width),m.attr("height",o.height)}return i?a.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):a.attr("transform","translate(0, "+-o.height/2+")"),r.centerLabel&&a.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),a.insert("rect",":first-child"),{shapeSvg:e,bbox:o,halfPadding:s,label:a}},"insertLabel"),nt=g((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),ut=g((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function _t(e){const t=e.map((r,i)=>`${i===0?"M":"L"}${r.x},${r.y}`);return t.push("Z"),t.join(" ")}g(_t,"createPathFromPoints");function $r(e,t,r,i,a,n){const o=[],l=r-e,c=i-t,h=l/n,u=2*Math.PI/h,p=t+c/2;for(let d=0;d<=50;d++){const f=d/50,m=e+f*l,y=p+a*Math.sin(u*(m-e));o.push({x:m,y})}return o}g($r,"generateFullSineWavePoints");function Qc(e,t,r,i,a,n){const o=[],s=a*Math.PI/180,h=(n*Math.PI/180-s)/(i-1);for(let u=0;u<i;u++){const p=s+u*h,d=e+r*Math.cos(p),f=t+r*Math.sin(p);o.push({x:-d,y:-f})}return o}g(Qc,"generateCirclePoints");var sT=g((e,t)=>{var r=e.x,i=e.y,a=t.x-r,n=t.y-i,o=e.width/2,s=e.height/2,l,c;return Math.abs(n)*o>Math.abs(a)*s?(n<0&&(s=-s),l=n===0?0:s*a/n,c=s):(a<0&&(o=-o),l=o,c=a===0?0:o*n/a),{x:r+l,y:i+c}},"intersectRect"),ua=sT;function Zg(e,t){t&&e.attr("style",t)}g(Zg,"applyStyle");async function Kg(e){const t=vt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div");let i=e.label;e.label&&ta(e.label)&&(i=await nc(e.label.replace(oa.lineBreakRegex,`
`),St()));const a=e.isNode?"nodeLabel":"edgeLabel";return r.html('<span class="'+a+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+i+"</span>"),Zg(r,e.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}g(Kg,"addHtmlLabel");var oT=g(async(e,t,r,i)=>{let a=e||"";if(typeof a=="object"&&(a=a[0]),Qt(St().flowchart.htmlLabels)){a=a.replace(/\\n|\n/g,"<br />"),O.info("vertexText"+a);const n={isNode:i,label:ui(a).replace(/fa[blrs]?:fa-[\w-]+/g,s=>`<i class='${s.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await Kg(n)}else{const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("style",t.replace("color:","fill:"));let o=[];typeof a=="string"?o=a.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(a)?o=a:o=[];for(const s of o){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),r?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=s.trim(),n.appendChild(l)}return n}},"createLabel"),Qr=oT,yr=g((e,t,r,i,a)=>["M",e+a,t,"H",e+r-a,"A",a,a,0,0,1,e+r,t+a,"V",t+i-a,"A",a,a,0,0,1,e+r-a,t+i,"H",e+a,"A",a,a,0,0,1,e,t+i-a,"V",t+a,"A",a,a,0,0,1,e+a,t,"Z"].join(" "),"createRoundedRectPathD"),Qg=g(async(e,t)=>{O.info("Creating subgraph rect for ",t.id,t);const r=St(),{themeVariables:i,handDrawnSeed:a}=r,{clusterBkg:n,clusterBorder:o}=i,{labelStyles:s,nodeStyles:l,borderStyles:c,backgroundStyles:h}=st(t),u=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),p=Qt(r.flowchart.htmlLabels),d=u.insert("g").attr("class","cluster-label "),f=await Pr(d,t.label,{style:t.labelStyle,useHtmlLabels:p,isNode:!0});let m=f.getBBox();if(Qt(r.flowchart.htmlLabels)){const S=f.children[0],I=vt(f);m=S.getBoundingClientRect(),I.attr("width",m.width),I.attr("height",m.height)}const y=t.width<=m.width+t.padding?m.width+t.padding:t.width;t.width<=m.width+t.padding?t.diff=(y-t.width)/2-t.padding:t.diff=-t.padding;const b=t.height,v=t.x-y/2,k=t.y-b/2;O.trace("Data ",t,JSON.stringify(t));let M;if(t.look==="handDrawn"){const S=rt.svg(u),I=it(t,{roughness:.7,fill:n,stroke:o,fillWeight:3,seed:a}),V=S.path(yr(v,k,y,b,0),I);M=u.insert(()=>(O.debug("Rough node insert CXC",V),V),":first-child"),M.select("path:nth-child(2)").attr("style",c.join(";")),M.select("path").attr("style",h.join(";").replace("fill","stroke"))}else M=u.insert("rect",":first-child"),M.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",v).attr("y",k).attr("width",y).attr("height",b);const{subGraphTitleTopMargin:T}=yc(r);if(d.attr("transform",`translate(${t.x-m.width/2}, ${t.y-t.height/2+T})`),s){const S=d.select("span");S&&S.attr("style",s)}const _=M.node().getBBox();return t.offsetX=0,t.width=_.width,t.height=_.height,t.offsetY=m.height-t.padding/2,t.intersect=function(S){return ua(t,S)},{cluster:u,labelBBox:m}},"rect"),lT=g((e,t)=>{const r=e.insert("g").attr("class","note-cluster").attr("id",t.id),i=r.insert("rect",":first-child"),a=0*t.padding,n=a/2;i.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-n).attr("y",t.y-t.height/2-n).attr("width",t.width+a).attr("height",t.height+a).attr("fill","none");const o=i.node().getBBox();return t.width=o.width,t.height=o.height,t.intersect=function(s){return ua(t,s)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),cT=g(async(e,t)=>{const r=St(),{themeVariables:i,handDrawnSeed:a}=r,{altBackground:n,compositeBackground:o,compositeTitleBackground:s,nodeBorder:l}=i,c=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),h=c.insert("g",":first-child"),u=c.insert("g").attr("class","cluster-label");let p=c.append("rect");const d=u.node().appendChild(await Qr(t.label,t.labelStyle,void 0,!0));let f=d.getBBox();if(Qt(r.flowchart.htmlLabels)){const V=d.children[0],N=vt(d);f=V.getBoundingClientRect(),N.attr("width",f.width),N.attr("height",f.height)}const m=0*t.padding,y=m/2,b=(t.width<=f.width+t.padding?f.width+t.padding:t.width)+m;t.width<=f.width+t.padding?t.diff=(b-t.width)/2-t.padding:t.diff=-t.padding;const v=t.height+m,k=t.height+m-f.height-6,M=t.x-b/2,T=t.y-v/2;t.width=b;const _=t.y-t.height/2-y+f.height+2;let S;if(t.look==="handDrawn"){const V=t.cssClasses.includes("statediagram-cluster-alt"),N=rt.svg(c),P=t.rx||t.ry?N.path(yr(M,T,b,v,10),{roughness:.7,fill:s,fillStyle:"solid",stroke:l,seed:a}):N.rectangle(M,T,b,v,{seed:a});S=c.insert(()=>P,":first-child");const Y=N.rectangle(M,_,b,k,{fill:V?n:o,fillStyle:V?"hachure":"solid",stroke:l,seed:a});S=c.insert(()=>P,":first-child"),p=c.insert(()=>Y)}else S=h.insert("rect",":first-child"),S.attr("class","outer").attr("x",M).attr("y",T).attr("width",b).attr("height",v).attr("data-look",t.look),p.attr("class","inner").attr("x",M).attr("y",_).attr("width",b).attr("height",k);u.attr("transform",`translate(${t.x-f.width/2}, ${T+1-(Qt(r.flowchart.htmlLabels)?0:3)})`);const I=S.node().getBBox();return t.height=I.height,t.offsetX=0,t.offsetY=f.height-t.padding/2,t.labelBBox=f,t.intersect=function(V){return ua(t,V)},{cluster:c,labelBBox:f}},"roundedWithTitle"),hT=g(async(e,t)=>{O.info("Creating subgraph rect for ",t.id,t);const r=St(),{themeVariables:i,handDrawnSeed:a}=r,{clusterBkg:n,clusterBorder:o}=i,{labelStyles:s,nodeStyles:l,borderStyles:c,backgroundStyles:h}=st(t),u=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),p=Qt(r.flowchart.htmlLabels),d=u.insert("g").attr("class","cluster-label "),f=await Pr(d,t.label,{style:t.labelStyle,useHtmlLabels:p,isNode:!0,width:t.width});let m=f.getBBox();if(Qt(r.flowchart.htmlLabels)){const S=f.children[0],I=vt(f);m=S.getBoundingClientRect(),I.attr("width",m.width),I.attr("height",m.height)}const y=t.width<=m.width+t.padding?m.width+t.padding:t.width;t.width<=m.width+t.padding?t.diff=(y-t.width)/2-t.padding:t.diff=-t.padding;const b=t.height,v=t.x-y/2,k=t.y-b/2;O.trace("Data ",t,JSON.stringify(t));let M;if(t.look==="handDrawn"){const S=rt.svg(u),I=it(t,{roughness:.7,fill:n,stroke:o,fillWeight:4,seed:a}),V=S.path(yr(v,k,y,b,t.rx),I);M=u.insert(()=>(O.debug("Rough node insert CXC",V),V),":first-child"),M.select("path:nth-child(2)").attr("style",c.join(";")),M.select("path").attr("style",h.join(";").replace("fill","stroke"))}else M=u.insert("rect",":first-child"),M.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",v).attr("y",k).attr("width",y).attr("height",b);const{subGraphTitleTopMargin:T}=yc(r);if(d.attr("transform",`translate(${t.x-m.width/2}, ${t.y-t.height/2+T})`),s){const S=d.select("span");S&&S.attr("style",s)}const _=M.node().getBBox();return t.offsetX=0,t.width=_.width,t.height=_.height,t.offsetY=m.height-t.padding/2,t.intersect=function(S){return ua(t,S)},{cluster:u,labelBBox:m}},"kanbanSection"),uT=g((e,t)=>{const r=St(),{themeVariables:i,handDrawnSeed:a}=r,{nodeBorder:n}=i,o=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),s=o.insert("g",":first-child"),l=0*t.padding,c=t.width+l;t.diff=-t.padding;const h=t.height+l,u=t.x-c/2,p=t.y-h/2;t.width=c;let d;if(t.look==="handDrawn"){const y=rt.svg(o).rectangle(u,p,c,h,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:n,seed:a});d=o.insert(()=>y,":first-child")}else d=s.insert("rect",":first-child"),d.attr("class","divider").attr("x",u).attr("y",p).attr("width",c).attr("height",h).attr("data-look",t.look);const f=d.node().getBBox();return t.height=f.height,t.offsetX=0,t.offsetY=0,t.intersect=function(m){return ua(t,m)},{cluster:o,labelBBox:{}}},"divider"),pT=Qg,dT={rect:Qg,squareRect:pT,roundedWithTitle:cT,noteGroup:lT,divider:uT,kanbanSection:hT},Jg=new Map,fT=g(async(e,t)=>{const r=t.shape||"rect",i=await dT[r](e,t);return Jg.set(t.id,i),i},"insertCluster"),EE=g(()=>{Jg=new Map},"clear");function tm(e,t){return e.intersect(t)}g(tm,"intersectNode");var gT=tm;function em(e,t,r,i){var a=e.x,n=e.y,o=a-i.x,s=n-i.y,l=Math.sqrt(t*t*s*s+r*r*o*o),c=Math.abs(t*r*o/l);i.x<a&&(c=-c);var h=Math.abs(t*r*s/l);return i.y<n&&(h=-h),{x:a+c,y:n+h}}g(em,"intersectEllipse");var rm=em;function im(e,t,r){return rm(e,t,t,r)}g(im,"intersectCircle");var mT=im;function am(e,t,r,i){var a,n,o,s,l,c,h,u,p,d,f,m,y,b,v;if(a=t.y-e.y,o=e.x-t.x,l=t.x*e.y-e.x*t.y,p=a*r.x+o*r.y+l,d=a*i.x+o*i.y+l,!(p!==0&&d!==0&&Yl(p,d))&&(n=i.y-r.y,s=r.x-i.x,c=i.x*r.y-r.x*i.y,h=n*e.x+s*e.y+c,u=n*t.x+s*t.y+c,!(h!==0&&u!==0&&Yl(h,u))&&(f=a*s-n*o,f!==0)))return m=Math.abs(f/2),y=o*c-s*l,b=y<0?(y-m)/f:(y+m)/f,y=n*l-a*c,v=y<0?(y-m)/f:(y+m)/f,{x:b,y:v}}g(am,"intersectLine");function Yl(e,t){return e*t>0}g(Yl,"sameSign");var yT=am;function nm(e,t,r){let i=e.x,a=e.y,n=[],o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(h){o=Math.min(o,h.x),s=Math.min(s,h.y)}):(o=Math.min(o,t.x),s=Math.min(s,t.y));let l=i-e.width/2-o,c=a-e.height/2-s;for(let h=0;h<t.length;h++){let u=t[h],p=t[h<t.length-1?h+1:0],d=yT(e,r,{x:l+u.x,y:c+u.y},{x:l+p.x,y:c+p.y});d&&n.push(d)}return n.length?(n.length>1&&n.sort(function(h,u){let p=h.x-r.x,d=h.y-r.y,f=Math.sqrt(p*p+d*d),m=u.x-r.x,y=u.y-r.y,b=Math.sqrt(m*m+y*y);return f<b?-1:f===b?0:1}),n[0]):e}g(nm,"intersectPolygon");var bT=nm,Q={node:gT,circle:mT,ellipse:rm,polygon:bT,rect:ua};function sm(e,t){const{labelStyles:r}=st(t);t.labelStyle=r;const i=ut(t);let a=i;i||(a="anchor");const n=e.insert("g").attr("class",a).attr("id",t.domId||t.id),o=1,{cssStyles:s}=t,l=rt.svg(n),c=it(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(c.roughness=0);const h=l.circle(0,0,o*2,c),u=n.insert(()=>h,":first-child");return u.attr("class","anchor").attr("style",de(s)),nt(t,u),t.intersect=function(p){return O.info("Circle intersect",t,o,p),Q.circle(t,o,p)},n}g(sm,"anchor");function Gl(e,t,r,i,a,n,o){const l=(e+r)/2,c=(t+i)/2,h=Math.atan2(i-t,r-e),u=(r-e)/2,p=(i-t)/2,d=u/a,f=p/n,m=Math.sqrt(d**2+f**2);if(m>1)throw new Error("The given radii are too small to create an arc between the points.");const y=Math.sqrt(1-m**2),b=l+y*n*Math.sin(h)*(o?-1:1),v=c-y*a*Math.cos(h)*(o?-1:1),k=Math.atan2((t-v)/n,(e-b)/a);let T=Math.atan2((i-v)/n,(r-b)/a)-k;o&&T<0&&(T+=2*Math.PI),!o&&T>0&&(T-=2*Math.PI);const _=[];for(let S=0;S<20;S++){const I=S/19,V=k+I*T,N=b+a*Math.cos(V),P=v+n*Math.sin(V);_.push({x:N,y:P})}return _}g(Gl,"generateArcPoints");async function om(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=n.width+t.padding+20,s=n.height+t.padding,l=s/2,c=l/(2.5+s/50),{cssStyles:h}=t,u=[{x:o/2,y:-s/2},{x:-o/2,y:-s/2},...Gl(-o/2,-s/2,-o/2,s/2,c,l,!1),{x:o/2,y:s/2},...Gl(o/2,s/2,o/2,-s/2,c,l,!0)],p=rt.svg(a),d=it(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=_t(u),m=p.path(f,d),y=a.insert(()=>m,":first-child");return y.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",i),y.attr("transform",`translate(${c/2}, 0)`),nt(t,y),t.intersect=function(b){return Q.polygon(t,u,b)},a}g(om,"bowTieRect");function br(e,t,r,i){return e.insert("polygon",":first-child").attr("points",i.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}g(br,"insertPolygonShape");async function lm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=n.height+t.padding,s=12,l=n.width+t.padding+s,c=0,h=l,u=-o,p=0,d=[{x:c+s,y:u},{x:h,y:u},{x:h,y:p},{x:c,y:p},{x:c,y:u+s},{x:c+s,y:u}];let f;const{cssStyles:m}=t;if(t.look==="handDrawn"){const y=rt.svg(a),b=it(t,{}),v=_t(d),k=y.path(v,b);f=a.insert(()=>k,":first-child").attr("transform",`translate(${-l/2}, ${o/2})`),m&&f.attr("style",m)}else f=br(a,l,o,d);return i&&f.attr("style",i),nt(t,f),t.intersect=function(y){return Q.polygon(t,d,y)},a}g(lm,"card");function cm(e,t){const{nodeStyles:r}=st(t);t.label="";const i=e.insert("g").attr("class",ut(t)).attr("id",t.domId??t.id),{cssStyles:a}=t,n=Math.max(28,t.width??0),o=[{x:0,y:n/2},{x:n/2,y:0},{x:0,y:-n/2},{x:-n/2,y:0}],s=rt.svg(i),l=it(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=_t(o),h=s.path(c,l),u=i.insert(()=>h,":first-child");return a&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",a),r&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",r),t.width=28,t.height=28,t.intersect=function(p){return Q.polygon(t,o,p)},i}g(cm,"choice");async function hm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,halfPadding:o}=await ft(e,t,ut(t)),s=n.width/2+o;let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const h=rt.svg(a),u=it(t,{}),p=h.circle(0,0,s*2,u);l=a.insert(()=>p,":first-child"),l.attr("class","basic label-container").attr("style",de(c))}else l=a.insert("circle",":first-child").attr("class","basic label-container").attr("style",i).attr("r",s).attr("cx",0).attr("cy",0);return nt(t,l),t.intersect=function(h){return O.info("Circle intersect",t,s,h),Q.circle(t,s,h)},a}g(hm,"circle");function um(e){const t=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),i=e*2,a={x:i/2*t,y:i/2*r},n={x:-(i/2)*t,y:i/2*r},o={x:-(i/2)*t,y:-(i/2)*r},s={x:i/2*t,y:-(i/2)*r};return`M ${n.x},${n.y} L ${s.x},${s.y}
                   M ${a.x},${a.y} L ${o.x},${o.y}`}g(um,"createLine");function pm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r,t.label="";const a=e.insert("g").attr("class",ut(t)).attr("id",t.domId??t.id),n=Math.max(30,(t==null?void 0:t.width)??0),{cssStyles:o}=t,s=rt.svg(a),l=it(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=s.circle(0,0,n*2,l),h=um(n),u=s.path(h,l),p=a.insert(()=>c,":first-child");return p.insert(()=>u),o&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",o),i&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",i),nt(t,p),t.intersect=function(d){return O.info("crossedCircle intersect",t,{radius:n,point:d}),Q.circle(t,n,d)},a}g(pm,"crossedCircle");function lr(e,t,r,i=100,a=0,n=180){const o=[],s=a*Math.PI/180,h=(n*Math.PI/180-s)/(i-1);for(let u=0;u<i;u++){const p=s+u*h,d=e+r*Math.cos(p),f=t+r*Math.sin(p);o.push({x:-d,y:-f})}return o}g(lr,"generateCirclePoints");async function dm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=n.width+(t.padding??0),l=n.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=t,u=[...lr(s/2,-l/2,c,30,-90,0),{x:-s/2-c,y:c},...lr(s/2+c*2,-c,c,20,-180,-270),...lr(s/2+c*2,c,c,20,-90,-180),{x:-s/2-c,y:-l/2},...lr(s/2,l/2,c,20,0,90)],p=[{x:s/2,y:-l/2-c},{x:-s/2,y:-l/2-c},...lr(s/2,-l/2,c,20,-90,0),{x:-s/2-c,y:-c},...lr(s/2+s*.1,-c,c,20,-180,-270),...lr(s/2+s*.1,c,c,20,-90,-180),{x:-s/2-c,y:l/2},...lr(s/2,l/2,c,20,0,90),{x:-s/2,y:l/2+c},{x:s/2,y:l/2+c}],d=rt.svg(a),f=it(t,{fill:"none"});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const y=_t(u).replace("Z",""),b=d.path(y,f),v=_t(p),k=d.path(v,{...f}),M=a.insert("g",":first-child");return M.insert(()=>k,":first-child").attr("stroke-opacity",0),M.insert(()=>b,":first-child"),M.attr("class","text"),h&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",i),M.attr("transform",`translate(${c}, 0)`),o.attr("transform",`translate(${-s/2+c-(n.x-(n.left??0))},${-l/2+(t.padding??0)/2-(n.y-(n.top??0))})`),nt(t,M),t.intersect=function(T){return Q.polygon(t,p,T)},a}g(dm,"curlyBraceLeft");function cr(e,t,r,i=100,a=0,n=180){const o=[],s=a*Math.PI/180,h=(n*Math.PI/180-s)/(i-1);for(let u=0;u<i;u++){const p=s+u*h,d=e+r*Math.cos(p),f=t+r*Math.sin(p);o.push({x:d,y:f})}return o}g(cr,"generateCirclePoints");async function fm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=n.width+(t.padding??0),l=n.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=t,u=[...cr(s/2,-l/2,c,20,-90,0),{x:s/2+c,y:-c},...cr(s/2+c*2,-c,c,20,-180,-270),...cr(s/2+c*2,c,c,20,-90,-180),{x:s/2+c,y:l/2},...cr(s/2,l/2,c,20,0,90)],p=[{x:-s/2,y:-l/2-c},{x:s/2,y:-l/2-c},...cr(s/2,-l/2,c,20,-90,0),{x:s/2+c,y:-c},...cr(s/2+c*2,-c,c,20,-180,-270),...cr(s/2+c*2,c,c,20,-90,-180),{x:s/2+c,y:l/2},...cr(s/2,l/2,c,20,0,90),{x:s/2,y:l/2+c},{x:-s/2,y:l/2+c}],d=rt.svg(a),f=it(t,{fill:"none"});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const y=_t(u).replace("Z",""),b=d.path(y,f),v=_t(p),k=d.path(v,{...f}),M=a.insert("g",":first-child");return M.insert(()=>k,":first-child").attr("stroke-opacity",0),M.insert(()=>b,":first-child"),M.attr("class","text"),h&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",i),M.attr("transform",`translate(${-c}, 0)`),o.attr("transform",`translate(${-s/2+(t.padding??0)/2-(n.x-(n.left??0))},${-l/2+(t.padding??0)/2-(n.y-(n.top??0))})`),nt(t,M),t.intersect=function(T){return Q.polygon(t,p,T)},a}g(fm,"curlyBraceRight");function te(e,t,r,i=100,a=0,n=180){const o=[],s=a*Math.PI/180,h=(n*Math.PI/180-s)/(i-1);for(let u=0;u<i;u++){const p=s+u*h,d=e+r*Math.cos(p),f=t+r*Math.sin(p);o.push({x:-d,y:-f})}return o}g(te,"generateCirclePoints");async function gm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=n.width+(t.padding??0),l=n.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=t,u=[...te(s/2,-l/2,c,30,-90,0),{x:-s/2-c,y:c},...te(s/2+c*2,-c,c,20,-180,-270),...te(s/2+c*2,c,c,20,-90,-180),{x:-s/2-c,y:-l/2},...te(s/2,l/2,c,20,0,90)],p=[...te(-s/2+c+c/2,-l/2,c,20,-90,-180),{x:s/2-c/2,y:c},...te(-s/2-c/2,-c,c,20,0,90),...te(-s/2-c/2,c,c,20,-90,0),{x:s/2-c/2,y:-c},...te(-s/2+c+c/2,l/2,c,30,-180,-270)],d=[{x:s/2,y:-l/2-c},{x:-s/2,y:-l/2-c},...te(s/2,-l/2,c,20,-90,0),{x:-s/2-c,y:-c},...te(s/2+c*2,-c,c,20,-180,-270),...te(s/2+c*2,c,c,20,-90,-180),{x:-s/2-c,y:l/2},...te(s/2,l/2,c,20,0,90),{x:-s/2,y:l/2+c},{x:s/2-c-c/2,y:l/2+c},...te(-s/2+c+c/2,-l/2,c,20,-90,-180),{x:s/2-c/2,y:c},...te(-s/2-c/2,-c,c,20,0,90),...te(-s/2-c/2,c,c,20,-90,0),{x:s/2-c/2,y:-c},...te(-s/2+c+c/2,l/2,c,30,-180,-270)],f=rt.svg(a),m=it(t,{fill:"none"});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const b=_t(u).replace("Z",""),v=f.path(b,m),M=_t(p).replace("Z",""),T=f.path(M,m),_=_t(d),S=f.path(_,{...m}),I=a.insert("g",":first-child");return I.insert(()=>S,":first-child").attr("stroke-opacity",0),I.insert(()=>v,":first-child"),I.insert(()=>T,":first-child"),I.attr("class","text"),h&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",i),I.attr("transform",`translate(${c-c/4}, 0)`),o.attr("transform",`translate(${-s/2+(t.padding??0)/2-(n.x-(n.left??0))},${-l/2+(t.padding??0)/2-(n.y-(n.top??0))})`),nt(t,I),t.intersect=function(V){return Q.polygon(t,d,V)},a}g(gm,"curlyBraces");async function mm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=80,s=20,l=Math.max(o,(n.width+(t.padding??0)*2)*1.25,(t==null?void 0:t.width)??0),c=Math.max(s,n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=c/2,{cssStyles:u}=t,p=rt.svg(a),d=it(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=l,m=c,y=f-h,b=m/4,v=[{x:y,y:0},{x:b,y:0},{x:0,y:m/2},{x:b,y:m},{x:y,y:m},...Qc(-y,-m/2,h,50,270,90)],k=_t(v),M=p.path(k,d),T=a.insert(()=>M,":first-child");return T.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",i),T.attr("transform",`translate(${-l/2}, ${-c/2})`),nt(t,T),t.intersect=function(_){return Q.polygon(t,v,_)},a}g(mm,"curvedTrapezoid");var xT=g((e,t,r,i,a,n)=>[`M${e},${t+n}`,`a${a},${n} 0,0,0 ${r},0`,`a${a},${n} 0,0,0 ${-r},0`,`l0,${i}`,`a${a},${n} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createCylinderPathD"),vT=g((e,t,r,i,a,n)=>[`M${e},${t+n}`,`M${e+r},${t+n}`,`a${a},${n} 0,0,0 ${-r},0`,`l0,${i}`,`a${a},${n} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createOuterCylinderPathD"),_T=g((e,t,r,i,a,n)=>[`M${e-r/2},${-i/2}`,`a${a},${n} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function ym(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=Math.max(n.width+t.padding,t.width??0),l=s/2,c=l/(2.5+s/50),h=Math.max(n.height+c+t.padding,t.height??0);let u;const{cssStyles:p}=t;if(t.look==="handDrawn"){const d=rt.svg(a),f=vT(0,0,s,h,l,c),m=_T(0,c,s,h,l,c),y=d.path(f,it(t,{})),b=d.path(m,it(t,{fill:"none"}));u=a.insert(()=>b,":first-child"),u=a.insert(()=>y,":first-child"),u.attr("class","basic label-container"),p&&u.attr("style",p)}else{const d=xT(0,0,s,h,l,c);u=a.insert("path",":first-child").attr("d",d).attr("class","basic label-container").attr("style",de(p)).attr("style",i)}return u.attr("label-offset-y",c),u.attr("transform",`translate(${-s/2}, ${-(h/2+c)})`),nt(t,u),o.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)+(t.padding??0)/1.5-(n.y-(n.top??0))})`),t.intersect=function(d){const f=Q.rect(t,d),m=f.x-(t.x??0);if(l!=0&&(Math.abs(m)<(t.width??0)/2||Math.abs(m)==(t.width??0)/2&&Math.abs(f.y-(t.y??0))>(t.height??0)/2-c)){let y=c*c*(1-m*m/(l*l));y>0&&(y=Math.sqrt(y)),y=c-y,d.y-(t.y??0)>0&&(y=-y),f.y+=y}return f},a}g(ym,"cylinder");async function bm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=n.width+t.padding,l=n.height+t.padding,c=l*.2,h=-s/2,u=-l/2-c/2,{cssStyles:p}=t,d=rt.svg(a),f=it(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=[{x:h,y:u+c},{x:-h,y:u+c},{x:-h,y:-u},{x:h,y:-u},{x:h,y:u},{x:-h,y:u},{x:-h,y:u+c}],y=d.polygon(m.map(v=>[v.x,v.y]),f),b=a.insert(()=>y,":first-child");return b.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",i),o.attr("transform",`translate(${h+(t.padding??0)/2-(n.x-(n.left??0))}, ${u+c+(t.padding??0)/2-(n.y-(n.top??0))})`),nt(t,b),t.intersect=function(v){return Q.rect(t,v)},a}g(bm,"dividedRectangle");async function xm(e,t){var p,d;const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,halfPadding:o}=await ft(e,t,ut(t)),l=n.width/2+o+5,c=n.width/2+o;let h;const{cssStyles:u}=t;if(t.look==="handDrawn"){const f=rt.svg(a),m=it(t,{roughness:.2,strokeWidth:2.5}),y=it(t,{roughness:.2,strokeWidth:1.5}),b=f.circle(0,0,l*2,m),v=f.circle(0,0,c*2,y);h=a.insert("g",":first-child"),h.attr("class",de(t.cssClasses)).attr("style",de(u)),(p=h.node())==null||p.appendChild(b),(d=h.node())==null||d.appendChild(v)}else{h=a.insert("g",":first-child");const f=h.insert("circle",":first-child"),m=h.insert("circle");h.attr("class","basic label-container").attr("style",i),f.attr("class","outer-circle").attr("style",i).attr("r",l).attr("cx",0).attr("cy",0),m.attr("class","inner-circle").attr("style",i).attr("r",c).attr("cx",0).attr("cy",0)}return nt(t,h),t.intersect=function(f){return O.info("DoubleCircle intersect",t,l,f),Q.circle(t,l,f)},a}g(xm,"doublecircle");function vm(e,t,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:a}=st(t);t.label="",t.labelStyle=i;const n=e.insert("g").attr("class",ut(t)).attr("id",t.domId??t.id),o=7,{cssStyles:s}=t,l=rt.svg(n),{nodeBorder:c}=r,h=it(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(h.roughness=0);const u=l.circle(0,0,o*2,h),p=n.insert(()=>u,":first-child");return p.selectAll("path").attr("style",`fill: ${c} !important;`),s&&s.length>0&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",s),a&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",a),nt(t,p),t.intersect=function(d){return O.info("filledCircle intersect",t,{radius:o,point:d}),Q.circle(t,o,d)},n}g(vm,"filledCircle");async function _m(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=n.width+(t.padding??0),l=s+n.height,c=s+n.height,h=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:u}=t,p=rt.svg(a),d=it(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=_t(h),m=p.path(f,d),y=a.insert(()=>m,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return u&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",i),t.width=s,t.height=l,nt(t,y),o.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))}, ${-l/2+(t.padding??0)/2+(n.y-(n.top??0))})`),t.intersect=function(b){return O.info("Triangle intersect",t,h,b),Q.polygon(t,h,b)},a}g(_m,"flippedTriangle");function wm(e,t,{dir:r,config:{state:i,themeVariables:a}}){const{nodeStyles:n}=st(t);t.label="";const o=e.insert("g").attr("class",ut(t)).attr("id",t.domId??t.id),{cssStyles:s}=t;let l=Math.max(70,(t==null?void 0:t.width)??0),c=Math.max(10,(t==null?void 0:t.height)??0);r==="LR"&&(l=Math.max(10,(t==null?void 0:t.width)??0),c=Math.max(70,(t==null?void 0:t.height)??0));const h=-1*l/2,u=-1*c/2,p=rt.svg(o),d=it(t,{stroke:a.lineColor,fill:a.lineColor});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=p.rectangle(h,u,l,c,d),m=o.insert(()=>f,":first-child");s&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",s),n&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",n),nt(t,m);const y=(i==null?void 0:i.padding)??0;return t.width&&t.height&&(t.width+=y/2||0,t.height+=y/2||0),t.intersect=function(b){return Q.rect(t,b)},o}g(wm,"forkJoin");async function Cm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const a=80,n=50,{shapeSvg:o,bbox:s}=await ft(e,t,ut(t)),l=Math.max(a,s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(n,s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=c/2,{cssStyles:u}=t,p=rt.svg(o),d=it(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=[{x:-l/2,y:-c/2},{x:l/2-h,y:-c/2},...Qc(-l/2+h,0,h,50,90,270),{x:l/2-h,y:c/2},{x:-l/2,y:c/2}],m=_t(f),y=p.path(m,d),b=o.insert(()=>y,":first-child");return b.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),nt(t,b),t.intersect=function(v){return O.info("Pill intersect",t,{radius:h,point:v}),Q.polygon(t,f,v)},o}g(Cm,"halfRoundedRectangle");var wT=g((e,t,r,i,a)=>[`M${e+a},${t}`,`L${e+r-a},${t}`,`L${e+r},${t-i/2}`,`L${e+r-a},${t-i}`,`L${e+a},${t-i}`,`L${e},${t-i/2}`,"Z"].join(" "),"createHexagonPathD");async function km(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=4,s=n.height+t.padding,l=s/o,c=n.width+2*l+t.padding,h=[{x:l,y:0},{x:c-l,y:0},{x:c,y:-s/2},{x:c-l,y:-s},{x:l,y:-s},{x:0,y:-s/2}];let u;const{cssStyles:p}=t;if(t.look==="handDrawn"){const d=rt.svg(a),f=it(t,{}),m=wT(0,0,c,s,l),y=d.path(m,f);u=a.insert(()=>y,":first-child").attr("transform",`translate(${-c/2}, ${s/2})`),p&&u.attr("style",p)}else u=br(a,c,s,h);return i&&u.attr("style",i),t.width=c,t.height=s,nt(t,u),t.intersect=function(d){return Q.polygon(t,h,d)},a}g(km,"hexagon");async function Sm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.label="",t.labelStyle=r;const{shapeSvg:a}=await ft(e,t,ut(t)),n=Math.max(30,(t==null?void 0:t.width)??0),o=Math.max(30,(t==null?void 0:t.height)??0),{cssStyles:s}=t,l=rt.svg(a),c=it(t,{});t.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const h=[{x:0,y:0},{x:n,y:0},{x:0,y:o},{x:n,y:o}],u=_t(h),p=l.path(u,c),d=a.insert(()=>p,":first-child");return d.attr("class","basic label-container"),s&&t.look!=="handDrawn"&&d.selectChildren("path").attr("style",s),i&&t.look!=="handDrawn"&&d.selectChildren("path").attr("style",i),d.attr("transform",`translate(${-n/2}, ${-o/2})`),nt(t,d),t.intersect=function(f){return O.info("Pill intersect",t,{points:h}),Q.polygon(t,h,f)},a}g(Sm,"hourglass");async function Tm(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:a}=st(t);t.labelStyle=a;const n=t.assetHeight??48,o=t.assetWidth??48,s=Math.max(n,o),l=i==null?void 0:i.wrappingWidth;t.width=Math.max(s,l??0);const{shapeSvg:c,bbox:h,label:u}=await ft(e,t,"icon-shape default"),p=t.pos==="t",d=s,f=s,{nodeBorder:m}=r,{stylesMap:y}=la(t),b=-f/2,v=-d/2,k=t.label?8:0,M=rt.svg(c),T=it(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const _=M.rectangle(b,v,f,d,T),S=Math.max(f,h.width),I=d+h.height+k,V=M.rectangle(-S/2,-I/2,S,I,{...T,fill:"transparent",stroke:"none"}),N=c.insert(()=>_,":first-child"),P=c.insert(()=>V);if(t.icon){const Y=c.append("g");Y.html(`<g>${await Mn(t.icon,{height:s,width:s,fallbackPrefix:""})}</g>`);const q=Y.node().getBBox(),$=q.width,E=q.height,B=q.x,D=q.y;Y.attr("transform",`translate(${-$/2-B},${p?h.height/2+k/2-E/2-D:-h.height/2-k/2-E/2-D})`),Y.attr("style",`color: ${y.get("stroke")??m};`)}return u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-I/2:I/2-h.height})`),N.attr("transform",`translate(0,${p?h.height/2+k/2:-h.height/2-k/2})`),nt(t,P),t.intersect=function(Y){if(O.info("iconSquare intersect",t,Y),!t.label)return Q.rect(t,Y);const q=t.x??0,$=t.y??0,E=t.height??0;let B=[];return p?B=[{x:q-h.width/2,y:$-E/2},{x:q+h.width/2,y:$-E/2},{x:q+h.width/2,y:$-E/2+h.height+k},{x:q+f/2,y:$-E/2+h.height+k},{x:q+f/2,y:$+E/2},{x:q-f/2,y:$+E/2},{x:q-f/2,y:$-E/2+h.height+k},{x:q-h.width/2,y:$-E/2+h.height+k}]:B=[{x:q-f/2,y:$-E/2},{x:q+f/2,y:$-E/2},{x:q+f/2,y:$-E/2+d},{x:q+h.width/2,y:$-E/2+d},{x:q+h.width/2/2,y:$+E/2},{x:q-h.width/2,y:$+E/2},{x:q-h.width/2,y:$-E/2+d},{x:q-f/2,y:$-E/2+d}],Q.polygon(t,B,Y)},c}g(Tm,"icon");async function Mm(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:a}=st(t);t.labelStyle=a;const n=t.assetHeight??48,o=t.assetWidth??48,s=Math.max(n,o),l=i==null?void 0:i.wrappingWidth;t.width=Math.max(s,l??0);const{shapeSvg:c,bbox:h,label:u}=await ft(e,t,"icon-shape default"),p=20,d=t.label?8:0,f=t.pos==="t",{nodeBorder:m,mainBkg:y}=r,{stylesMap:b}=la(t),v=rt.svg(c),k=it(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const M=b.get("fill");k.stroke=M??y;const T=c.append("g");t.icon&&T.html(`<g>${await Mn(t.icon,{height:s,width:s,fallbackPrefix:""})}</g>`);const _=T.node().getBBox(),S=_.width,I=_.height,V=_.x,N=_.y,P=Math.max(S,I)*Math.SQRT2+p*2,Y=v.circle(0,0,P,k),q=Math.max(P,h.width),$=P+h.height+d,E=v.rectangle(-q/2,-$/2,q,$,{...k,fill:"transparent",stroke:"none"}),B=c.insert(()=>Y,":first-child"),D=c.insert(()=>E);return T.attr("transform",`translate(${-S/2-V},${f?h.height/2+d/2-I/2-N:-h.height/2-d/2-I/2-N})`),T.attr("style",`color: ${b.get("stroke")??m};`),u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${f?-$/2:$/2-h.height})`),B.attr("transform",`translate(0,${f?h.height/2+d/2:-h.height/2-d/2})`),nt(t,D),t.intersect=function(F){return O.info("iconSquare intersect",t,F),Q.rect(t,F)},c}g(Mm,"iconCircle");async function Lm(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:a}=st(t);t.labelStyle=a;const n=t.assetHeight??48,o=t.assetWidth??48,s=Math.max(n,o),l=i==null?void 0:i.wrappingWidth;t.width=Math.max(s,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:p}=await ft(e,t,"icon-shape default"),d=t.pos==="t",f=s+u*2,m=s+u*2,{nodeBorder:y,mainBkg:b}=r,{stylesMap:v}=la(t),k=-m/2,M=-f/2,T=t.label?8:0,_=rt.svg(c),S=it(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const I=v.get("fill");S.stroke=I??b;const V=_.path(yr(k,M,m,f,5),S),N=Math.max(m,h.width),P=f+h.height+T,Y=_.rectangle(-N/2,-P/2,N,P,{...S,fill:"transparent",stroke:"none"}),q=c.insert(()=>V,":first-child").attr("class","icon-shape2"),$=c.insert(()=>Y);if(t.icon){const E=c.append("g");E.html(`<g>${await Mn(t.icon,{height:s,width:s,fallbackPrefix:""})}</g>`);const B=E.node().getBBox(),D=B.width,F=B.height,X=B.x,et=B.y;E.attr("transform",`translate(${-D/2-X},${d?h.height/2+T/2-F/2-et:-h.height/2-T/2-F/2-et})`),E.attr("style",`color: ${v.get("stroke")??y};`)}return p.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-P/2:P/2-h.height})`),q.attr("transform",`translate(0,${d?h.height/2+T/2:-h.height/2-T/2})`),nt(t,$),t.intersect=function(E){if(O.info("iconSquare intersect",t,E),!t.label)return Q.rect(t,E);const B=t.x??0,D=t.y??0,F=t.height??0;let X=[];return d?X=[{x:B-h.width/2,y:D-F/2},{x:B+h.width/2,y:D-F/2},{x:B+h.width/2,y:D-F/2+h.height+T},{x:B+m/2,y:D-F/2+h.height+T},{x:B+m/2,y:D+F/2},{x:B-m/2,y:D+F/2},{x:B-m/2,y:D-F/2+h.height+T},{x:B-h.width/2,y:D-F/2+h.height+T}]:X=[{x:B-m/2,y:D-F/2},{x:B+m/2,y:D-F/2},{x:B+m/2,y:D-F/2+f},{x:B+h.width/2,y:D-F/2+f},{x:B+h.width/2/2,y:D+F/2},{x:B-h.width/2,y:D+F/2},{x:B-h.width/2,y:D-F/2+f},{x:B-m/2,y:D-F/2+f}],Q.polygon(t,X,E)},c}g(Lm,"iconRounded");async function Am(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:a}=st(t);t.labelStyle=a;const n=t.assetHeight??48,o=t.assetWidth??48,s=Math.max(n,o),l=i==null?void 0:i.wrappingWidth;t.width=Math.max(s,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:p}=await ft(e,t,"icon-shape default"),d=t.pos==="t",f=s+u*2,m=s+u*2,{nodeBorder:y,mainBkg:b}=r,{stylesMap:v}=la(t),k=-m/2,M=-f/2,T=t.label?8:0,_=rt.svg(c),S=it(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const I=v.get("fill");S.stroke=I??b;const V=_.path(yr(k,M,m,f,.1),S),N=Math.max(m,h.width),P=f+h.height+T,Y=_.rectangle(-N/2,-P/2,N,P,{...S,fill:"transparent",stroke:"none"}),q=c.insert(()=>V,":first-child"),$=c.insert(()=>Y);if(t.icon){const E=c.append("g");E.html(`<g>${await Mn(t.icon,{height:s,width:s,fallbackPrefix:""})}</g>`);const B=E.node().getBBox(),D=B.width,F=B.height,X=B.x,et=B.y;E.attr("transform",`translate(${-D/2-X},${d?h.height/2+T/2-F/2-et:-h.height/2-T/2-F/2-et})`),E.attr("style",`color: ${v.get("stroke")??y};`)}return p.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-P/2:P/2-h.height})`),q.attr("transform",`translate(0,${d?h.height/2+T/2:-h.height/2-T/2})`),nt(t,$),t.intersect=function(E){if(O.info("iconSquare intersect",t,E),!t.label)return Q.rect(t,E);const B=t.x??0,D=t.y??0,F=t.height??0;let X=[];return d?X=[{x:B-h.width/2,y:D-F/2},{x:B+h.width/2,y:D-F/2},{x:B+h.width/2,y:D-F/2+h.height+T},{x:B+m/2,y:D-F/2+h.height+T},{x:B+m/2,y:D+F/2},{x:B-m/2,y:D+F/2},{x:B-m/2,y:D-F/2+h.height+T},{x:B-h.width/2,y:D-F/2+h.height+T}]:X=[{x:B-m/2,y:D-F/2},{x:B+m/2,y:D-F/2},{x:B+m/2,y:D-F/2+f},{x:B+h.width/2,y:D-F/2+f},{x:B+h.width/2/2,y:D+F/2},{x:B-h.width/2,y:D+F/2},{x:B-h.width/2,y:D-F/2+f},{x:B-m/2,y:D-F/2+f}],Q.polygon(t,X,E)},c}g(Am,"iconSquare");async function Bm(e,t,{config:{flowchart:r}}){const i=new Image;i.src=(t==null?void 0:t.img)??"",await i.decode();const a=Number(i.naturalWidth.toString().replace("px","")),n=Number(i.naturalHeight.toString().replace("px",""));t.imageAspectRatio=a/n;const{labelStyles:o}=st(t);t.labelStyle=o;const s=r==null?void 0:r.wrappingWidth;t.defaultWidth=r==null?void 0:r.wrappingWidth;const l=Math.max(t.label?s??0:0,(t==null?void 0:t.assetWidth)??a),c=t.constraint==="on"&&t!=null&&t.assetHeight?t.assetHeight*t.imageAspectRatio:l,h=t.constraint==="on"?c/t.imageAspectRatio:(t==null?void 0:t.assetHeight)??n;t.width=Math.max(c,s??0);const{shapeSvg:u,bbox:p,label:d}=await ft(e,t,"image-shape default"),f=t.pos==="t",m=-c/2,y=-h/2,b=t.label?8:0,v=rt.svg(u),k=it(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const M=v.rectangle(m,y,c,h,k),T=Math.max(c,p.width),_=h+p.height+b,S=v.rectangle(-T/2,-_/2,T,_,{...k,fill:"none",stroke:"none"}),I=u.insert(()=>M,":first-child"),V=u.insert(()=>S);if(t.img){const N=u.append("image");N.attr("href",t.img),N.attr("width",c),N.attr("height",h),N.attr("preserveAspectRatio","none"),N.attr("transform",`translate(${-c/2},${f?_/2-h:-_/2})`)}return d.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${f?-h/2-p.height/2-b/2:h/2-p.height/2+b/2})`),I.attr("transform",`translate(0,${f?p.height/2+b/2:-p.height/2-b/2})`),nt(t,V),t.intersect=function(N){if(O.info("iconSquare intersect",t,N),!t.label)return Q.rect(t,N);const P=t.x??0,Y=t.y??0,q=t.height??0;let $=[];return f?$=[{x:P-p.width/2,y:Y-q/2},{x:P+p.width/2,y:Y-q/2},{x:P+p.width/2,y:Y-q/2+p.height+b},{x:P+c/2,y:Y-q/2+p.height+b},{x:P+c/2,y:Y+q/2},{x:P-c/2,y:Y+q/2},{x:P-c/2,y:Y-q/2+p.height+b},{x:P-p.width/2,y:Y-q/2+p.height+b}]:$=[{x:P-c/2,y:Y-q/2},{x:P+c/2,y:Y-q/2},{x:P+c/2,y:Y-q/2+h},{x:P+p.width/2,y:Y-q/2+h},{x:P+p.width/2/2,y:Y+q/2},{x:P-p.width/2,y:Y+q/2},{x:P-p.width/2,y:Y-q/2+h},{x:P-c/2,y:Y-q/2+h}],Q.polygon(t,$,N)},u}g(Bm,"imageSquare");async function Em(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),s=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:o,y:0},{x:o+3*s/6,y:-s},{x:-3*s/6,y:-s}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=rt.svg(a),p=it(t,{}),d=_t(l),f=u.path(d,p);c=a.insert(()=>f,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),h&&c.attr("style",h)}else c=br(a,o,s,l);return i&&c.attr("style",i),t.width=o,t.height=s,nt(t,c),t.intersect=function(u){return Q.polygon(t,l,u)},a}g(Em,"inv_trapezoid");async function An(e,t,r){const{labelStyles:i,nodeStyles:a}=st(t);t.labelStyle=i;const{shapeSvg:n,bbox:o}=await ft(e,t,ut(t)),s=Math.max(o.width+r.labelPaddingX*2,(t==null?void 0:t.width)||0),l=Math.max(o.height+r.labelPaddingY*2,(t==null?void 0:t.height)||0),c=-s/2,h=-l/2;let u,{rx:p,ry:d}=t;const{cssStyles:f}=t;if(r!=null&&r.rx&&r.ry&&(p=r.rx,d=r.ry),t.look==="handDrawn"){const m=rt.svg(n),y=it(t,{}),b=p||d?m.path(yr(c,h,s,l,p||0),y):m.rectangle(c,h,s,l,y);u=n.insert(()=>b,":first-child"),u.attr("class","basic label-container").attr("style",de(f))}else u=n.insert("rect",":first-child"),u.attr("class","basic label-container").attr("style",a).attr("rx",de(p)).attr("ry",de(d)).attr("x",c).attr("y",h).attr("width",s).attr("height",l);return nt(t,u),t.intersect=function(m){return Q.rect(t,m)},n}g(An,"drawRect");async function $m(e,t){const{shapeSvg:r,bbox:i,label:a}=await ft(e,t,"label"),n=r.insert("rect",":first-child");return n.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),a.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),nt(t,n),t.intersect=function(l){return Q.rect(t,l)},r}g($m,"labelRect");async function Fm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=Math.max(n.width+(t.padding??0),(t==null?void 0:t.width)??0),s=Math.max(n.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:o+3*s/6,y:0},{x:o,y:-s},{x:-(3*s)/6,y:-s}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=rt.svg(a),p=it(t,{}),d=_t(l),f=u.path(d,p);c=a.insert(()=>f,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),h&&c.attr("style",h)}else c=br(a,o,s,l);return i&&c.attr("style",i),t.width=o,t.height=s,nt(t,c),t.intersect=function(u){return Q.polygon(t,l,u)},a}g(Fm,"lean_left");async function Pm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=Math.max(n.width+(t.padding??0),(t==null?void 0:t.width)??0),s=Math.max(n.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:-3*s/6,y:0},{x:o,y:0},{x:o+3*s/6,y:-s},{x:0,y:-s}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=rt.svg(a),p=it(t,{}),d=_t(l),f=u.path(d,p);c=a.insert(()=>f,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),h&&c.attr("style",h)}else c=br(a,o,s,l);return i&&c.attr("style",i),t.width=o,t.height=s,nt(t,c),t.intersect=function(u){return Q.polygon(t,l,u)},a}g(Pm,"lean_right");function Rm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.label="",t.labelStyle=r;const a=e.insert("g").attr("class",ut(t)).attr("id",t.domId??t.id),{cssStyles:n}=t,o=Math.max(35,(t==null?void 0:t.width)??0),s=Math.max(35,(t==null?void 0:t.height)??0),l=7,c=[{x:o,y:0},{x:0,y:s+l/2},{x:o-2*l,y:s+l/2},{x:0,y:2*s},{x:o,y:s-l/2},{x:2*l,y:s-l/2}],h=rt.svg(a),u=it(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const p=_t(c),d=h.path(p,u),f=a.insert(()=>d,":first-child");return n&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",n),i&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",i),f.attr("transform",`translate(-${o/2},${-s})`),nt(t,f),t.intersect=function(m){return O.info("lightningBolt intersect",t,m),Q.polygon(t,c,m)},a}g(Rm,"lightningBolt");var CT=g((e,t,r,i,a,n,o)=>[`M${e},${t+n}`,`a${a},${n} 0,0,0 ${r},0`,`a${a},${n} 0,0,0 ${-r},0`,`l0,${i}`,`a${a},${n} 0,0,0 ${r},0`,`l0,${-i}`,`M${e},${t+n+o}`,`a${a},${n} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),kT=g((e,t,r,i,a,n,o)=>[`M${e},${t+n}`,`M${e+r},${t+n}`,`a${a},${n} 0,0,0 ${-r},0`,`l0,${i}`,`a${a},${n} 0,0,0 ${r},0`,`l0,${-i}`,`M${e},${t+n+o}`,`a${a},${n} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),ST=g((e,t,r,i,a,n)=>[`M${e-r/2},${-i/2}`,`a${a},${n} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function Dm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=Math.max(n.width+(t.padding??0),t.width??0),l=s/2,c=l/(2.5+s/50),h=Math.max(n.height+c+(t.padding??0),t.height??0),u=h*.1;let p;const{cssStyles:d}=t;if(t.look==="handDrawn"){const f=rt.svg(a),m=kT(0,0,s,h,l,c,u),y=ST(0,c,s,h,l,c),b=it(t,{}),v=f.path(m,b),k=f.path(y,b);a.insert(()=>k,":first-child").attr("class","line"),p=a.insert(()=>v,":first-child"),p.attr("class","basic label-container"),d&&p.attr("style",d)}else{const f=CT(0,0,s,h,l,c,u);p=a.insert("path",":first-child").attr("d",f).attr("class","basic label-container").attr("style",de(d)).attr("style",i)}return p.attr("label-offset-y",c),p.attr("transform",`translate(${-s/2}, ${-(h/2+c)})`),nt(t,p),o.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)+c-(n.y-(n.top??0))})`),t.intersect=function(f){const m=Q.rect(t,f),y=m.x-(t.x??0);if(l!=0&&(Math.abs(y)<(t.width??0)/2||Math.abs(y)==(t.width??0)/2&&Math.abs(m.y-(t.y??0))>(t.height??0)/2-c)){let b=c*c*(1-y*y/(l*l));b>0&&(b=Math.sqrt(b)),b=c-b,f.y-(t.y??0)>0&&(b=-b),m.y+=b}return m},a}g(Dm,"linedCylinder");async function Om(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,h=l+c,{cssStyles:u}=t,p=rt.svg(a),d=it(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=[{x:-s/2-s/2*.1,y:-h/2},{x:-s/2-s/2*.1,y:h/2},...$r(-s/2-s/2*.1,h/2,s/2+s/2*.1,h/2,c,.8),{x:s/2+s/2*.1,y:-h/2},{x:-s/2-s/2*.1,y:-h/2},{x:-s/2,y:-h/2},{x:-s/2,y:h/2*1.1},{x:-s/2,y:-h/2}],m=p.polygon(f.map(b=>[b.x,b.y]),d),y=a.insert(()=>m,":first-child");return y.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",u),i&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",i),y.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-s/2+(t.padding??0)+s/2*.1/2-(n.x-(n.left??0))},${-l/2+(t.padding??0)-c/2-(n.y-(n.top??0))})`),nt(t,y),t.intersect=function(b){return Q.polygon(t,f,b)},a}g(Om,"linedWaveEdgedRect");async function Im(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=5,h=-s/2,u=-l/2,{cssStyles:p}=t,d=rt.svg(a),f=it(t,{}),m=[{x:h-c,y:u+c},{x:h-c,y:u+l+c},{x:h+s-c,y:u+l+c},{x:h+s-c,y:u+l},{x:h+s,y:u+l},{x:h+s,y:u+l-c},{x:h+s+c,y:u+l-c},{x:h+s+c,y:u-c},{x:h+c,y:u-c},{x:h+c,y:u},{x:h,y:u},{x:h,y:u+c}],y=[{x:h,y:u+c},{x:h+s-c,y:u+c},{x:h+s-c,y:u+l},{x:h+s,y:u+l},{x:h+s,y:u},{x:h,y:u}];t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const b=_t(m),v=d.path(b,f),k=_t(y),M=d.path(k,{...f,fill:"none"}),T=a.insert(()=>M,":first-child");return T.insert(()=>v,":first-child"),T.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",i),o.attr("transform",`translate(${-(n.width/2)-c-(n.x-(n.left??0))}, ${-(n.height/2)+c-(n.y-(n.top??0))})`),nt(t,T),t.intersect=function(_){return Q.polygon(t,m,_)},a}g(Im,"multiRect");async function Nm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,h=l+c,u=-s/2,p=-h/2,d=5,{cssStyles:f}=t,m=$r(u-d,p+h+d,u+s-d,p+h+d,c,.8),y=m==null?void 0:m[m.length-1],b=[{x:u-d,y:p+d},{x:u-d,y:p+h+d},...m,{x:u+s-d,y:y.y-d},{x:u+s,y:y.y-d},{x:u+s,y:y.y-2*d},{x:u+s+d,y:y.y-2*d},{x:u+s+d,y:p-d},{x:u+d,y:p-d},{x:u+d,y:p},{x:u,y:p},{x:u,y:p+d}],v=[{x:u,y:p+d},{x:u+s-d,y:p+d},{x:u+s-d,y:y.y-d},{x:u+s,y:y.y-d},{x:u+s,y:p},{x:u,y:p}],k=rt.svg(a),M=it(t,{});t.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");const T=_t(b),_=k.path(T,M),S=_t(v),I=k.path(S,M),V=a.insert(()=>_,":first-child");return V.insert(()=>I),V.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&V.selectAll("path").attr("style",f),i&&t.look!=="handDrawn"&&V.selectAll("path").attr("style",i),V.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-(n.width/2)-d-(n.x-(n.left??0))}, ${-(n.height/2)+d-c/2-(n.y-(n.top??0))})`),nt(t,V),t.intersect=function(N){return Q.polygon(t,b,N)},a}g(Nm,"multiWaveEdgedRectangle");async function qm(e,t,{config:{themeVariables:r}}){var v;const{labelStyles:i,nodeStyles:a}=st(t);t.labelStyle=i,t.useHtmlLabels||((v=ve().flowchart)==null?void 0:v.htmlLabels)!==!1||(t.centerLabel=!0);const{shapeSvg:o,bbox:s,label:l}=await ft(e,t,ut(t)),c=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),h=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=-c/2,p=-h/2,{cssStyles:d}=t,f=rt.svg(o),m=it(t,{fill:r.noteBkgColor,stroke:r.noteBorderColor});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=f.rectangle(u,p,c,h,m),b=o.insert(()=>y,":first-child");return b.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",d),a&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",a),l.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),nt(t,b),t.intersect=function(k){return Q.rect(t,k)},o}g(qm,"note");var TT=g((e,t,r)=>[`M${e+r/2},${t}`,`L${e+r},${t-r/2}`,`L${e+r/2},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function zm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=n.width+t.padding,s=n.height+t.padding,l=o+s,c=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let h;const{cssStyles:u}=t;if(t.look==="handDrawn"){const p=rt.svg(a),d=it(t,{}),f=TT(0,0,l),m=p.path(f,d);h=a.insert(()=>m,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`),u&&h.attr("style",u)}else h=br(a,l,l,c);return i&&h.attr("style",i),nt(t,h),t.intersect=function(p){return O.debug(`APA12 Intersect called SPLIT
point:`,p,`
node:
`,t,`
res:`,Q.polygon(t,c,p)),Q.polygon(t,c,p)},a}g(zm,"question");async function Wm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=Math.max(n.width+(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0),(t==null?void 0:t.height)??0),c=-s/2,h=-l/2,u=h/2,p=[{x:c+u,y:h},{x:c,y:0},{x:c+u,y:-h},{x:-c,y:-h},{x:-c,y:h}],{cssStyles:d}=t,f=rt.svg(a),m=it(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=_t(p),b=f.path(y,m),v=a.insert(()=>b,":first-child");return v.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",d),i&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",i),v.attr("transform",`translate(${-u/2},0)`),o.attr("transform",`translate(${-u/2-n.width/2-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),nt(t,v),t.intersect=function(k){return Q.polygon(t,p,k)},a}g(Wm,"rect_left_inv_arrow");async function Hm(e,t){var I,V;const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;let a;t.cssClasses?a="node "+t.cssClasses:a="node default";const n=e.insert("g").attr("class",a).attr("id",t.domId||t.id),o=n.insert("g"),s=n.insert("g").attr("class","label").attr("style",i),l=t.description,c=t.label,h=s.node().appendChild(await Qr(c,t.labelStyle,!0,!0));let u={width:0,height:0};if(Qt((V=(I=St())==null?void 0:I.flowchart)==null?void 0:V.htmlLabels)){const N=h.children[0],P=vt(h);u=N.getBoundingClientRect(),P.attr("width",u.width),P.attr("height",u.height)}O.info("Text 2",l);const p=l||[],d=h.getBBox(),f=s.node().appendChild(await Qr(p.join?p.join("<br/>"):p,t.labelStyle,!0,!0)),m=f.children[0],y=vt(f);u=m.getBoundingClientRect(),y.attr("width",u.width),y.attr("height",u.height);const b=(t.padding||0)/2;vt(f).attr("transform","translate( "+(u.width>d.width?0:(d.width-u.width)/2)+", "+(d.height+b+5)+")"),vt(h).attr("transform","translate( "+(u.width<d.width?0:-(d.width-u.width)/2)+", 0)"),u=s.node().getBBox(),s.attr("transform","translate("+-u.width/2+", "+(-u.height/2-b+3)+")");const v=u.width+(t.padding||0),k=u.height+(t.padding||0),M=-u.width/2-b,T=-u.height/2-b;let _,S;if(t.look==="handDrawn"){const N=rt.svg(n),P=it(t,{}),Y=N.path(yr(M,T,v,k,t.rx||0),P),q=N.line(-u.width/2-b,-u.height/2-b+d.height+b,u.width/2+b,-u.height/2-b+d.height+b,P);S=n.insert(()=>(O.debug("Rough node insert CXC",Y),q),":first-child"),_=n.insert(()=>(O.debug("Rough node insert CXC",Y),Y),":first-child")}else _=o.insert("rect",":first-child"),S=o.insert("line"),_.attr("class","outer title-state").attr("style",i).attr("x",-u.width/2-b).attr("y",-u.height/2-b).attr("width",u.width+(t.padding||0)).attr("height",u.height+(t.padding||0)),S.attr("class","divider").attr("x1",-u.width/2-b).attr("x2",u.width/2+b).attr("y1",-u.height/2-b+d.height+b).attr("y2",-u.height/2-b+d.height+b);return nt(t,_),t.intersect=function(N){return Q.rect(t,N)},n}g(Hm,"rectWithTitle");async function jm(e,t){const r={rx:5,ry:5,labelPaddingX:((t==null?void 0:t.padding)||0)*1,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return An(e,t,r)}g(jm,"roundedRect");async function Vm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=(t==null?void 0:t.padding)??0,l=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=-n.width/2-s,u=-n.height/2-s,{cssStyles:p}=t,d=rt.svg(a),f=it(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=[{x:h,y:u},{x:h+l+8,y:u},{x:h+l+8,y:u+c},{x:h-8,y:u+c},{x:h-8,y:u},{x:h,y:u},{x:h,y:u+c}],y=d.polygon(m.map(v=>[v.x,v.y]),f),b=a.insert(()=>y,":first-child");return b.attr("class","basic label-container").attr("style",de(p)),i&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",i),p&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",i),o.attr("transform",`translate(${-l/2+4+(t.padding??0)-(n.x-(n.left??0))},${-c/2+(t.padding??0)-(n.y-(n.top??0))})`),nt(t,b),t.intersect=function(v){return Q.rect(t,v)},a}g(Vm,"shadedProcess");async function Um(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=-s/2,h=-l/2,{cssStyles:u}=t,p=rt.svg(a),d=it(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=[{x:c,y:h},{x:c,y:h+l},{x:c+s,y:h+l},{x:c+s,y:h-l/2}],m=_t(f),y=p.path(m,d),b=a.insert(()=>y,":first-child");return b.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),b.attr("transform",`translate(0, ${l/4})`),o.attr("transform",`translate(${-s/2+(t.padding??0)-(n.x-(n.left??0))}, ${-l/4+(t.padding??0)-(n.y-(n.top??0))})`),nt(t,b),t.intersect=function(v){return Q.polygon(t,f,v)},a}g(Um,"slopedRect");async function Ym(e,t){const r={rx:0,ry:0,labelPaddingX:((t==null?void 0:t.padding)||0)*2,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return An(e,t,r)}g(Ym,"squareRect");async function Gm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=n.height+t.padding,s=n.width+o/4+t.padding;let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const h=rt.svg(a),u=it(t,{}),p=yr(-s/2,-o/2,s,o,o/2),d=h.path(p,u);l=a.insert(()=>d,":first-child"),l.attr("class","basic label-container").attr("style",de(c))}else l=a.insert("rect",":first-child"),l.attr("class","basic label-container").attr("style",i).attr("rx",o/2).attr("ry",o/2).attr("x",-s/2).attr("y",-o/2).attr("width",s).attr("height",o);return nt(t,l),t.intersect=function(h){return Q.rect(t,h)},a}g(Gm,"stadium");async function Xm(e,t){return An(e,t,{rx:5,ry:5})}g(Xm,"state");function Zm(e,t,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:a}=st(t);t.labelStyle=i;const{cssStyles:n}=t,{lineColor:o,stateBorder:s,nodeBorder:l}=r,c=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),h=rt.svg(c),u=it(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const p=h.circle(0,0,14,{...u,stroke:o,strokeWidth:2}),d=s??l,f=h.circle(0,0,5,{...u,fill:d,stroke:d,strokeWidth:2,fillStyle:"solid"}),m=c.insert(()=>p,":first-child");return m.insert(()=>f),n&&m.selectAll("path").attr("style",n),a&&m.selectAll("path").attr("style",a),nt(t,m),t.intersect=function(y){return Q.circle(t,7,y)},c}g(Zm,"stateEnd");function Km(e,t,{config:{themeVariables:r}}){const{lineColor:i}=r,a=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let n;if(t.look==="handDrawn"){const s=rt.svg(a).circle(0,0,14,uv(i));n=a.insert(()=>s),n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else n=a.insert("circle",":first-child"),n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return nt(t,n),t.intersect=function(o){return Q.circle(t,7,o)},a}g(Km,"stateStart");async function Qm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=((t==null?void 0:t.padding)||0)/2,s=n.width+t.padding,l=n.height+t.padding,c=-n.width/2-o,h=-n.height/2-o,u=[{x:0,y:0},{x:s,y:0},{x:s,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(t.look==="handDrawn"){const p=rt.svg(a),d=it(t,{}),f=p.rectangle(c-8,h,s+16,l,d),m=p.line(c,h,c,h+l,d),y=p.line(c+s,h,c+s,h+l,d);a.insert(()=>m,":first-child"),a.insert(()=>y,":first-child");const b=a.insert(()=>f,":first-child"),{cssStyles:v}=t;b.attr("class","basic label-container").attr("style",de(v)),nt(t,b)}else{const p=br(a,s,l,u);i&&p.attr("style",i),nt(t,p)}return t.intersect=function(p){return Q.polygon(t,u,p)},a}g(Qm,"subroutine");async function Jm(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),s=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=-o/2,c=-s/2,h=.2*s,u=.2*s,{cssStyles:p}=t,d=rt.svg(a),f=it(t,{}),m=[{x:l-h/2,y:c},{x:l+o+h/2,y:c},{x:l+o+h/2,y:c+s},{x:l-h/2,y:c+s}],y=[{x:l+o-h/2,y:c+s},{x:l+o+h/2,y:c+s},{x:l+o+h/2,y:c+s-u}];t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const b=_t(m),v=d.path(b,f),k=_t(y),M=d.path(k,{...f,fillStyle:"solid"}),T=a.insert(()=>M,":first-child");return T.insert(()=>v,":first-child"),T.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",i),nt(t,T),t.intersect=function(_){return Q.polygon(t,m,_)},a}g(Jm,"taggedRect");async function ty(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,h=.2*s,u=.2*l,p=l+c,{cssStyles:d}=t,f=rt.svg(a),m=it(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:-s/2-s/2*.1,y:p/2},...$r(-s/2-s/2*.1,p/2,s/2+s/2*.1,p/2,c,.8),{x:s/2+s/2*.1,y:-p/2},{x:-s/2-s/2*.1,y:-p/2}],b=-s/2+s/2*.1,v=-p/2-u*.4,k=[{x:b+s-h,y:(v+l)*1.4},{x:b+s,y:v+l-u},{x:b+s,y:(v+l)*.9},...$r(b+s,(v+l)*1.3,b+s-h,(v+l)*1.5,-l*.03,.5)],M=_t(y),T=f.path(M,m),_=_t(k),S=f.path(_,{...m,fillStyle:"solid"}),I=a.insert(()=>S,":first-child");return I.insert(()=>T,":first-child"),I.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",d),i&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",i),I.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-s/2+(t.padding??0)-(n.x-(n.left??0))},${-l/2+(t.padding??0)-c/2-(n.y-(n.top??0))})`),nt(t,I),t.intersect=function(V){return Q.polygon(t,y,V)},a}g(ty,"taggedWaveEdgedRectangle");async function ey(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=Math.max(n.width+t.padding,(t==null?void 0:t.width)||0),s=Math.max(n.height+t.padding,(t==null?void 0:t.height)||0),l=-o/2,c=-s/2,h=a.insert("rect",":first-child");return h.attr("class","text").attr("style",i).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",o).attr("height",s),nt(t,h),t.intersect=function(u){return Q.rect(t,u)},a}g(ey,"text");var MT=g((e,t,r,i,a,n)=>`M${e},${t}
    a${a},${n} 0,0,1 0,${-i}
    l${r},0
    a${a},${n} 0,0,1 0,${i}
    M${r},${-i}
    a${a},${n} 0,0,0 0,${i}
    l${-r},0`,"createCylinderPathD"),LT=g((e,t,r,i,a,n)=>[`M${e},${t}`,`M${e+r},${t}`,`a${a},${n} 0,0,0 0,${-i}`,`l${-r},0`,`a${a},${n} 0,0,0 0,${i}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),AT=g((e,t,r,i,a,n)=>[`M${e+r/2},${-i/2}`,`a${a},${n} 0,0,0 0,${i}`].join(" "),"createInnerCylinderPathD");async function ry(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o,halfPadding:s}=await ft(e,t,ut(t)),l=t.look==="neo"?s*2:s,c=n.height+l,h=c/2,u=h/(2.5+c/50),p=n.width+u+l,{cssStyles:d}=t;let f;if(t.look==="handDrawn"){const m=rt.svg(a),y=LT(0,0,p,c,u,h),b=AT(0,0,p,c,u,h),v=m.path(y,it(t,{})),k=m.path(b,it(t,{fill:"none"}));f=a.insert(()=>k,":first-child"),f=a.insert(()=>v,":first-child"),f.attr("class","basic label-container"),d&&f.attr("style",d)}else{const m=MT(0,0,p,c,u,h);f=a.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",de(d)).attr("style",i),f.attr("class","basic label-container"),d&&f.selectAll("path").attr("style",d),i&&f.selectAll("path").attr("style",i)}return f.attr("label-offset-x",u),f.attr("transform",`translate(${-p/2}, ${c/2} )`),o.attr("transform",`translate(${-(n.width/2)-u-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),nt(t,f),t.intersect=function(m){const y=Q.rect(t,m),b=y.y-(t.y??0);if(h!=0&&(Math.abs(b)<(t.height??0)/2||Math.abs(b)==(t.height??0)/2&&Math.abs(y.x-(t.x??0))>(t.width??0)/2-u)){let v=u*u*(1-b*b/(h*h));v!=0&&(v=Math.sqrt(Math.abs(v))),v=u-v,m.x-(t.x??0)>0&&(v=-v),y.x+=v}return y},a}g(ry,"tiltedCylinder");async function iy(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=n.width+t.padding,s=n.height+t.padding,l=[{x:-3*s/6,y:0},{x:o+3*s/6,y:0},{x:o,y:-s},{x:0,y:-s}];let c;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=rt.svg(a),p=it(t,{}),d=_t(l),f=u.path(d,p);c=a.insert(()=>f,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),h&&c.attr("style",h)}else c=br(a,o,s,l);return i&&c.attr("style",i),t.width=o,t.height=s,nt(t,c),t.intersect=function(u){return Q.polygon(t,l,u)},a}g(iy,"trapezoid");async function ay(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=60,s=20,l=Math.max(o,n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s,n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),{cssStyles:h}=t,u=rt.svg(a),p=it(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const d=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],f=_t(d),m=u.path(f,p),y=a.insert(()=>m,":first-child");return y.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",h),i&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",i),nt(t,y),t.intersect=function(b){return Q.polygon(t,d,b)},a}g(ay,"trapezoidalPentagon");async function ny(e,t){var v;const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=Qt((v=St().flowchart)==null?void 0:v.htmlLabels),l=n.width+(t.padding??0),c=l+n.height,h=l+n.height,u=[{x:0,y:0},{x:h,y:0},{x:h/2,y:-c}],{cssStyles:p}=t,d=rt.svg(a),f=it(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=_t(u),y=d.path(m,f),b=a.insert(()=>y,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return p&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",p),i&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),t.width=l,t.height=c,nt(t,b),o.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))}, ${c/2-(n.height+(t.padding??0)/(s?2:1)-(n.y-(n.top??0)))})`),t.intersect=function(k){return O.info("Triangle intersect",t,u,k),Q.polygon(t,u,k)},a}g(ny,"triangle");async function sy(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/8,h=l+c,{cssStyles:u}=t,d=70-s,f=d>0?d/2:0,m=rt.svg(a),y=it(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=[{x:-s/2-f,y:h/2},...$r(-s/2-f,h/2,s/2+f,h/2,c,.8),{x:s/2+f,y:-h/2},{x:-s/2-f,y:-h/2}],v=_t(b),k=m.path(v,y),M=a.insert(()=>k,":first-child");return M.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",u),i&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",i),M.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-s/2+(t.padding??0)-(n.x-(n.left??0))},${-l/2+(t.padding??0)-c-(n.y-(n.top??0))})`),nt(t,M),t.intersect=function(T){return Q.polygon(t,b,T)},a}g(sy,"waveEdgedRectangle");async function oy(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n}=await ft(e,t,ut(t)),o=100,s=50,l=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=l/c;let u=l,p=c;u>p*h?p=u/h:u=p*h,u=Math.max(u,o),p=Math.max(p,s);const d=Math.min(p*.2,p/4),f=p+d*2,{cssStyles:m}=t,y=rt.svg(a),b=it(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const v=[{x:-u/2,y:f/2},...$r(-u/2,f/2,u/2,f/2,d,1),{x:u/2,y:-f/2},...$r(u/2,-f/2,-u/2,-f/2,d,-1)],k=_t(v),M=y.path(k,b),T=a.insert(()=>M,":first-child");return T.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",m),i&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",i),nt(t,T),t.intersect=function(_){return Q.polygon(t,v,_)},a}g(oy,"waveRectangle");async function ly(e,t){const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const{shapeSvg:a,bbox:n,label:o}=await ft(e,t,ut(t)),s=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=5,h=-s/2,u=-l/2,{cssStyles:p}=t,d=rt.svg(a),f=it(t,{}),m=[{x:h-c,y:u-c},{x:h-c,y:u+l},{x:h+s,y:u+l},{x:h+s,y:u-c}],y=`M${h-c},${u-c} L${h+s},${u-c} L${h+s},${u+l} L${h-c},${u+l} L${h-c},${u-c}
                M${h-c},${u} L${h+s},${u}
                M${h},${u-c} L${h},${u+l}`;t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const b=d.path(y,f),v=a.insert(()=>b,":first-child");return v.attr("transform",`translate(${c/2}, ${c/2})`),v.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",i),o.attr("transform",`translate(${-(n.width/2)+c/2-(n.x-(n.left??0))}, ${-(n.height/2)+c/2-(n.y-(n.top??0))})`),nt(t,v),t.intersect=function(k){return Q.polygon(t,m,k)},a}g(ly,"windowPane");async function Jc(e,t){var Ct,pt,wt,mt;const r=t;if(r.alias&&(t.label=r.alias),t.look==="handDrawn"){const{themeVariables:gt}=ve(),{background:yt}=gt,Ft={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${yt}`]};await Jc(e,Ft)}const i=ve();t.useHtmlLabels=i.htmlLabels;let a=((Ct=i.er)==null?void 0:Ct.diagramPadding)??10,n=((pt=i.er)==null?void 0:pt.entityPadding)??6;const{cssStyles:o}=t,{labelStyles:s,nodeStyles:l}=st(t);if(r.attributes.length===0&&t.label){const gt={rx:0,ry:0,labelPaddingX:a,labelPaddingY:a*1.5};gr(t.label,i)+gt.labelPaddingX*2<i.er.minEntityWidth&&(t.width=i.er.minEntityWidth);const yt=await An(e,t,gt);if(!Qt(i.htmlLabels)){const Ft=yt.select("text"),Pt=(wt=Ft.node())==null?void 0:wt.getBBox();Ft.attr("transform",`translate(${-Pt.width/2}, 0)`)}return yt}i.htmlLabels||(a*=1.25,n*=1.25);let c=ut(t);c||(c="node default");const h=e.insert("g").attr("class",c).attr("id",t.domId||t.id),u=await Ii(h,t.label??"",i,0,0,["name"],s);u.height+=n;let p=0;const d=[],f=[];let m=0,y=0,b=0,v=0,k=!0,M=!0;for(const gt of r.attributes){const yt=await Ii(h,gt.type,i,0,p,["attribute-type"],s);m=Math.max(m,yt.width+a);const Ft=await Ii(h,gt.name,i,0,p,["attribute-name"],s);y=Math.max(y,Ft.width+a);const Pt=await Ii(h,gt.keys.join(),i,0,p,["attribute-keys"],s);b=Math.max(b,Pt.width+a);const Tt=await Ii(h,gt.comment,i,0,p,["attribute-comment"],s);v=Math.max(v,Tt.width+a);const zt=Math.max(yt.height,Ft.height,Pt.height,Tt.height)+n;f.push({yOffset:p,rowHeight:zt}),p+=zt}let T=4;b<=a&&(k=!1,b=0,T--),v<=a&&(M=!1,v=0,T--);const _=h.node().getBBox();if(u.width+a*2-(m+y+b+v)>0){const gt=u.width+a*2-(m+y+b+v);m+=gt/T,y+=gt/T,b>0&&(b+=gt/T),v>0&&(v+=gt/T)}const S=m+y+b+v,I=rt.svg(h),V=it(t,{});t.look!=="handDrawn"&&(V.roughness=0,V.fillStyle="solid");let N=0;f.length>0&&(N=f.reduce((gt,yt)=>gt+((yt==null?void 0:yt.rowHeight)??0),0));const P=Math.max(_.width+a*2,(t==null?void 0:t.width)||0,S),Y=Math.max((N??0)+u.height,(t==null?void 0:t.height)||0),q=-P/2,$=-Y/2;h.selectAll("g:not(:first-child)").each((gt,yt,Ft)=>{const Pt=vt(Ft[yt]),Tt=Pt.attr("transform");let zt=0,Yt=0;if(Tt){const Jt=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Tt);Jt&&(zt=parseFloat(Jt[1]),Yt=parseFloat(Jt[2]),Pt.attr("class").includes("attribute-name")?zt+=m:Pt.attr("class").includes("attribute-keys")?zt+=m+y:Pt.attr("class").includes("attribute-comment")&&(zt+=m+y+b))}Pt.attr("transform",`translate(${q+a/2+zt}, ${Yt+$+u.height+n/2})`)}),h.select(".name").attr("transform","translate("+-u.width/2+", "+($+n/2)+")");const E=I.rectangle(q,$,P,Y,V),B=h.insert(()=>E,":first-child").attr("style",o.join("")),{themeVariables:D}=ve(),{rowEven:F,rowOdd:X,nodeBorder:et}=D;d.push(0);for(const[gt,yt]of f.entries()){const Pt=(gt+1)%2===0&&yt.yOffset!==0,Tt=I.rectangle(q,u.height+$+(yt==null?void 0:yt.yOffset),P,yt==null?void 0:yt.rowHeight,{...V,fill:Pt?F:X,stroke:et});h.insert(()=>Tt,"g.label").attr("style",o.join("")).attr("class",`row-rect-${Pt?"even":"odd"}`)}let J=I.line(q,u.height+$,P+q,u.height+$,V);h.insert(()=>J).attr("class","divider"),J=I.line(m+q,u.height+$,m+q,Y+$,V),h.insert(()=>J).attr("class","divider"),k&&(J=I.line(m+y+q,u.height+$,m+y+q,Y+$,V),h.insert(()=>J).attr("class","divider")),M&&(J=I.line(m+y+b+q,u.height+$,m+y+b+q,Y+$,V),h.insert(()=>J).attr("class","divider"));for(const gt of d)J=I.line(q,u.height+$+gt,P+q,u.height+$+gt,V),h.insert(()=>J).attr("class","divider");if(nt(t,B),l&&t.look!=="handDrawn"){const gt=l.split(";"),yt=(mt=gt==null?void 0:gt.filter(Ft=>Ft.includes("stroke")))==null?void 0:mt.map(Ft=>`${Ft}`).join("; ");h.selectAll("path").attr("style",yt??""),h.selectAll(".row-rect-even path").attr("style",l)}return t.intersect=function(gt){return Q.rect(t,gt)},h}g(Jc,"erBox");async function Ii(e,t,r,i=0,a=0,n=[],o=""){const s=e.insert("g").attr("class",`label ${n.join(" ")}`).attr("transform",`translate(${i}, ${a})`).attr("style",o);t!==Sh(t)&&(t=Sh(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=s.node().appendChild(await Pr(s,t,{width:gr(t,r)+100,style:o,useHtmlLabels:r.htmlLabels},r));if(t.includes("&lt;")||t.includes("&gt;")){let h=l.children[0];for(h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");h.childNodes[0];)h=h.childNodes[0],h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(Qt(r.htmlLabels)){const h=l.children[0];h.style.textAlign="start";const u=vt(l);c=h.getBoundingClientRect(),u.attr("width",c.width),u.attr("height",c.height)}return c}g(Ii,"addText");async function cy(e,t,r,i,a=r.class.padding??12){const n=i?0:3,o=e.insert("g").attr("class",ut(t)).attr("id",t.domId||t.id);let s=null,l=null,c=null,h=null,u=0,p=0,d=0;if(s=o.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const v=t.annotations[0];await Qa(s,{text:`${v}`},0),u=s.node().getBBox().height}l=o.insert("g").attr("class","label-group text"),await Qa(l,t,0,["font-weight: bolder"]);const f=l.node().getBBox();p=f.height,c=o.insert("g").attr("class","members-group text");let m=0;for(const v of t.members){const k=await Qa(c,v,m,[v.parseClassifier()]);m+=k+n}d=c.node().getBBox().height,d<=0&&(d=a/2),h=o.insert("g").attr("class","methods-group text");let y=0;for(const v of t.methods){const k=await Qa(h,v,y,[v.parseClassifier()]);y+=k+n}let b=o.node().getBBox();if(s!==null){const v=s.node().getBBox();s.attr("transform",`translate(${-v.width/2})`)}return l.attr("transform",`translate(${-f.width/2}, ${u})`),b=o.node().getBBox(),c.attr("transform",`translate(0, ${u+p+a*2})`),b=o.node().getBBox(),h.attr("transform",`translate(0, ${u+p+(d?d+a*4:a*2)})`),b=o.node().getBBox(),{shapeSvg:o,bbox:b}}g(cy,"textHelper");async function Qa(e,t,r,i=[]){const a=e.insert("g").attr("class","label").attr("style",i.join("; ")),n=ve();let o="useHtmlLabels"in t?t.useHtmlLabels:Qt(n.htmlLabels)??!0,s="";"text"in t?s=t.text:s=t.label,!o&&s.startsWith("\\")&&(s=s.substring(1)),ta(s)&&(o=!0);const l=await Pr(a,so(ui(s)),{width:gr(s,n)+50,classes:"markdown-node-label",useHtmlLabels:o},n);let c,h=1;if(o){const u=l.children[0],p=vt(l);h=u.innerHTML.split("<br>").length,u.innerHTML.includes("</math>")&&(h+=u.innerHTML.split("<mrow>").length-1);const d=u.getElementsByTagName("img");if(d){const f=s.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...d].map(m=>new Promise(y=>{function b(){var v;if(m.style.display="flex",m.style.flexDirection="column",f){const k=((v=n.fontSize)==null?void 0:v.toString())??window.getComputedStyle(document.body).fontSize,T=parseInt(k,10)*5+"px";m.style.minWidth=T,m.style.maxWidth=T}else m.style.width="100%";y(m)}g(b,"setupImage"),setTimeout(()=>{m.complete&&b()}),m.addEventListener("error",b),m.addEventListener("load",b)})))}c=u.getBoundingClientRect(),p.attr("width",c.width),p.attr("height",c.height)}else{i.includes("font-weight: bolder")&&vt(l).selectAll("tspan").attr("font-weight",""),h=l.children.length;const u=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(u.textContent=s[0]+s.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),s[1]===" "&&(u.textContent=u.textContent[0]+" "+u.textContent.substring(1))),u.textContent==="undefined"&&(u.textContent=""),c=l.getBBox()}return a.attr("transform","translate(0,"+(-c.height/(2*h)+r)+")"),c.height}g(Qa,"addText");async function hy(e,t){var V,N;const r=St(),i=r.class.padding??12,a=i,n=t.useHtmlLabels??Qt(r.htmlLabels)??!0,o=t;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:s,bbox:l}=await cy(e,t,r,n,a),{labelStyles:c,nodeStyles:h}=st(t);t.labelStyle=c,t.cssStyles=o.styles||"";const u=((V=o.styles)==null?void 0:V.join(";"))||h||"";t.cssStyles||(t.cssStyles=u.replaceAll("!important","").split(";"));const p=o.members.length===0&&o.methods.length===0&&!((N=r.class)!=null&&N.hideEmptyMembersBox),d=rt.svg(s),f=it(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=l.width;let y=l.height;o.members.length===0&&o.methods.length===0?y+=a:o.members.length>0&&o.methods.length===0&&(y+=a*2);const b=-m/2,v=-y/2,k=d.rectangle(b-i,v-i-(p?i:o.members.length===0&&o.methods.length===0?-i/2:0),m+2*i,y+2*i+(p?i*2:o.members.length===0&&o.methods.length===0?-i:0),f),M=s.insert(()=>k,":first-child");M.attr("class","basic label-container");const T=M.node().getBBox();s.selectAll(".text").each((P,Y,q)=>{var X;const $=vt(q[Y]),E=$.attr("transform");let B=0;if(E){const J=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(E);J&&(B=parseFloat(J[2]))}let D=B+v+i-(p?i:o.members.length===0&&o.methods.length===0?-i/2:0);n||(D-=4);let F=b;($.attr("class").includes("label-group")||$.attr("class").includes("annotation-group"))&&(F=-((X=$.node())==null?void 0:X.getBBox().width)/2||0,s.selectAll("text").each(function(et,J,Ct){window.getComputedStyle(Ct[J]).textAnchor==="middle"&&(F=0)})),$.attr("transform",`translate(${F}, ${D})`)});const _=s.select(".annotation-group").node().getBBox().height-(p?i/2:0)||0,S=s.select(".label-group").node().getBBox().height-(p?i/2:0)||0,I=s.select(".members-group").node().getBBox().height-(p?i/2:0)||0;if(o.members.length>0||o.methods.length>0||p){const P=d.line(T.x,_+S+v+i,T.x+T.width,_+S+v+i,f);s.insert(()=>P).attr("class","divider").attr("style",u)}if(p||o.members.length>0||o.methods.length>0){const P=d.line(T.x,_+S+I+v+a*2+i,T.x+T.width,_+S+I+v+i+a*2,f);s.insert(()=>P).attr("class","divider").attr("style",u)}if(o.look!=="handDrawn"&&s.selectAll("path").attr("style",u),M.select(":nth-child(2)").attr("style",u),s.selectAll(".divider").select("path").attr("style",u),t.labelStyle?s.selectAll("span").attr("style",t.labelStyle):s.selectAll("span").attr("style",u),!n){const P=RegExp(/color\s*:\s*([^;]*)/),Y=P.exec(u);if(Y){const q=Y[0].replace("color","fill");s.selectAll("tspan").attr("style",q)}else if(c){const q=P.exec(c);if(q){const $=q[0].replace("color","fill");s.selectAll("tspan").attr("style",$)}}}return nt(t,M),t.intersect=function(P){return Q.rect(t,P)},s}g(hy,"classBox");async function uy(e,t){var _,S;const{labelStyles:r,nodeStyles:i}=st(t);t.labelStyle=r;const a=t,n=t,o=20,s=20,l="verifyMethod"in t,c=ut(t),h=e.insert("g").attr("class",c).attr("id",t.domId??t.id);let u;l?u=await Xe(h,`&lt;&lt;${a.type}&gt;&gt;`,0,t.labelStyle):u=await Xe(h,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let p=u;const d=await Xe(h,a.name,p,t.labelStyle+"; font-weight: bold;");if(p+=d+s,l){const I=await Xe(h,`${a.requirementId?`id: ${a.requirementId}`:""}`,p,t.labelStyle);p+=I;const V=await Xe(h,`${a.text?`Text: ${a.text}`:""}`,p,t.labelStyle);p+=V;const N=await Xe(h,`${a.risk?`Risk: ${a.risk}`:""}`,p,t.labelStyle);p+=N,await Xe(h,`${a.verifyMethod?`Verification: ${a.verifyMethod}`:""}`,p,t.labelStyle)}else{const I=await Xe(h,`${n.type?`Type: ${n.type}`:""}`,p,t.labelStyle);p+=I,await Xe(h,`${n.docRef?`Doc Ref: ${n.docRef}`:""}`,p,t.labelStyle)}const f=(((_=h.node())==null?void 0:_.getBBox().width)??200)+o,m=(((S=h.node())==null?void 0:S.getBBox().height)??200)+o,y=-f/2,b=-m/2,v=rt.svg(h),k=it(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const M=v.rectangle(y,b,f,m,k),T=h.insert(()=>M,":first-child");if(T.attr("class","basic label-container").attr("style",i),h.selectAll(".label").each((I,V,N)=>{const P=vt(N[V]),Y=P.attr("transform");let q=0,$=0;if(Y){const F=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Y);F&&(q=parseFloat(F[1]),$=parseFloat(F[2]))}const E=$-m/2;let B=y+o/2;(V===0||V===1)&&(B=q),P.attr("transform",`translate(${B}, ${E+o})`)}),p>u+d+s){const I=v.line(y,b+u+d+s,y+f,b+u+d+s,k);h.insert(()=>I).attr("style",i)}return nt(t,T),t.intersect=function(I){return Q.rect(t,I)},h}g(uy,"requirementBox");async function Xe(e,t,r,i=""){if(t==="")return 0;const a=e.insert("g").attr("class","label").attr("style",i),n=St(),o=n.htmlLabels??!0,s=await Pr(a,so(ui(t)),{width:gr(t,n)+50,classes:"markdown-node-label",useHtmlLabels:o,style:i},n);let l;if(o){const c=s.children[0],h=vt(s);l=c.getBoundingClientRect(),h.attr("width",l.width),h.attr("height",l.height)}else{const c=s.children[0];for(const h of c.children)h.textContent=h.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),i&&h.setAttribute("style",i);l=s.getBBox(),l.height+=6}return a.attr("transform",`translate(${-l.width/2},${-l.height/2+r})`),l.height}g(Xe,"addText");var BT=g(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function py(e,t,{config:r}){var Y,q;const{labelStyles:i,nodeStyles:a}=st(t);t.labelStyle=i||"";const n=10,o=t.width;t.width=(t.width??200)-10;const{shapeSvg:s,bbox:l,label:c}=await ft(e,t,ut(t)),h=t.padding||10;let u="",p;"ticket"in t&&t.ticket&&((Y=r==null?void 0:r.kanban)!=null&&Y.ticketBaseUrl)&&(u=(q=r==null?void 0:r.kanban)==null?void 0:q.ticketBaseUrl.replace("#TICKET#",t.ticket),p=s.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",u).attr("target","_blank"));const d={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let f,m;p?{label:f,bbox:m}=await rl(p,"ticket"in t&&t.ticket||"",d):{label:f,bbox:m}=await rl(s,"ticket"in t&&t.ticket||"",d);const{label:y,bbox:b}=await rl(s,"assigned"in t&&t.assigned||"",d);t.width=o;const v=10,k=(t==null?void 0:t.width)||0,M=Math.max(m.height,b.height)/2,T=Math.max(l.height+v*2,(t==null?void 0:t.height)||0)+M,_=-k/2,S=-T/2;c.attr("transform","translate("+(h-k/2)+", "+(-M-l.height/2)+")"),f.attr("transform","translate("+(h-k/2)+", "+(-M+l.height/2)+")"),y.attr("transform","translate("+(h+k/2-b.width-2*n)+", "+(-M+l.height/2)+")");let I;const{rx:V,ry:N}=t,{cssStyles:P}=t;if(t.look==="handDrawn"){const $=rt.svg(s),E=it(t,{}),B=V||N?$.path(yr(_,S,k,T,V||0),E):$.rectangle(_,S,k,T,E);I=s.insert(()=>B,":first-child"),I.attr("class","basic label-container").attr("style",P||null)}else{I=s.insert("rect",":first-child"),I.attr("class","basic label-container __APA__").attr("style",a).attr("rx",V??5).attr("ry",N??5).attr("x",_).attr("y",S).attr("width",k).attr("height",T);const $="priority"in t&&t.priority;if($){const E=s.append("line"),B=_+2,D=S+Math.floor((V??0)/2),F=S+T-Math.floor((V??0)/2);E.attr("x1",B).attr("y1",D).attr("x2",B).attr("y2",F).attr("stroke-width","4").attr("stroke",BT($))}}return nt(t,I),t.height=T,t.intersect=function($){return Q.rect(t,$)},s}g(py,"kanbanItem");var ET=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:Ym},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:jm},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:Gm},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:Qm},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:ym},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:hm},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:zm},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:km},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:Pm},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:Fm},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:iy},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:Em},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:xm},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:ey},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:lm},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Vm},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:Km},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Zm},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:wm},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:Sm},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:dm},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:fm},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:gm},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:Rm},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:sy},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:Cm},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:ry},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:Dm},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:mm},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:bm},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:ny},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:ly},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:vm},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:ay},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:_m},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:Um},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:Nm},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Im},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:om},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:pm},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:ty},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:Jm},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:oy},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Wm},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Om}],$T=g(()=>{const t=[...Object.entries({state:Xm,choice:cm,note:qm,rectWithTitle:Hm,labelRect:$m,iconSquare:Am,iconCircle:Mm,icon:Tm,iconRounded:Lm,imageSquare:Bm,anchor:sm,kanbanItem:py,classBox:hy,erBox:Jc,requirementBox:uy}),...ET.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(a=>[a,r.handler]))];return Object.fromEntries(t)},"generateShapeMap"),dy=$T();function FT(e){return e in dy}g(FT,"isValidShape");var To=new Map;async function fy(e,t,r){let i,a;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const n=t.shape?dy[t.shape]:void 0;if(!n)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let o;r.config.securityLevel==="sandbox"?o="_top":t.linkTarget&&(o=t.linkTarget||"_blank"),i=e.insert("svg:a").attr("xlink:href",t.link).attr("target",o??null),a=await n(i,t,r)}else a=await n(e,t,r),i=a;return t.tooltip&&a.attr("title",t.tooltip),To.set(t.id,i),t.haveCallback&&i.attr("class",i.attr("class")+" clickable"),i}g(fy,"insertNode");var $E=g((e,t)=>{To.set(t.id,e)},"setNodeElem"),FE=g(()=>{To.clear()},"clear"),PE=g(e=>{const t=To.get(e.id);O.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,i=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+i-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),i},"positionNode"),PT=g((e,t,r,i,a,n)=>{t.arrowTypeStart&&Eu(e,"start",t.arrowTypeStart,r,i,a,n),t.arrowTypeEnd&&Eu(e,"end",t.arrowTypeEnd,r,i,a,n)},"addEdgeMarkers"),RT={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},Eu=g((e,t,r,i,a,n,o)=>{var u;const s=RT[r];if(!s){O.warn(`Unknown arrow type: ${r}`);return}const l=s.type,h=`${a}_${n}-${l}${t==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const p=o.replace(/[^\dA-Za-z]/g,"_"),d=`${h}_${p}`;if(!document.getElementById(d)){const f=document.getElementById(h);if(f){const m=f.cloneNode(!0);m.id=d,m.querySelectorAll("path, circle, line").forEach(b=>{b.setAttribute("stroke",o),s.fill&&b.setAttribute("fill",o)}),(u=f.parentNode)==null||u.appendChild(m)}}e.attr(`marker-${t}`,`url(${i}#${d})`)}else e.attr(`marker-${t}`,`url(${i}#${h})`)},"addEdgeMarker"),to=new Map,ee=new Map,RE=g(()=>{to.clear(),ee.clear()},"clear"),Ua=g(e=>e?e.reduce((r,i)=>r+";"+i,""):"","getLabelStyles"),DT=g(async(e,t)=>{let r=Qt(St().flowchart.htmlLabels);const i=await Pr(e,t.label,{style:Ua(t.labelStyle),useHtmlLabels:r,addSvgBackground:!0,isNode:!1});O.info("abc82",t,t.labelType);const a=e.insert("g").attr("class","edgeLabel"),n=a.insert("g").attr("class","label");n.node().appendChild(i);let o=i.getBBox();if(r){const l=i.children[0],c=vt(i);o=l.getBoundingClientRect(),c.attr("width",o.width),c.attr("height",o.height)}n.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),to.set(t.id,a),t.width=o.width,t.height=o.height;let s;if(t.startLabelLeft){const l=await Qr(t.startLabelLeft,Ua(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");s=h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),ee.get(t.id)||ee.set(t.id,{}),ee.get(t.id).startLeft=c,Ja(s,t.startLabelLeft)}if(t.startLabelRight){const l=await Qr(t.startLabelRight,Ua(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");s=c.node().appendChild(l),h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),ee.get(t.id)||ee.set(t.id,{}),ee.get(t.id).startRight=c,Ja(s,t.startLabelRight)}if(t.endLabelLeft){const l=await Qr(t.endLabelLeft,Ua(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");s=h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),c.node().appendChild(l),ee.get(t.id)||ee.set(t.id,{}),ee.get(t.id).endLeft=c,Ja(s,t.endLabelLeft)}if(t.endLabelRight){const l=await Qr(t.endLabelRight,Ua(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");s=h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),c.node().appendChild(l),ee.get(t.id)||ee.set(t.id,{}),ee.get(t.id).endRight=c,Ja(s,t.endLabelRight)}return i},"insertEdgeLabel");function Ja(e,t){St().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}g(Ja,"setTerminalWidth");var OT=g((e,t)=>{O.debug("Moving label abc88 ",e.id,e.label,to.get(e.id),t);let r=t.updatedPath?t.updatedPath:t.originalPath;const i=St(),{subGraphTitleTotalMargin:a}=yc(i);if(e.label){const n=to.get(e.id);let o=e.x,s=e.y;if(r){const l=Ke.calcLabelPosition(r);O.debug("Moving label "+e.label+" from (",o,",",s,") to (",l.x,",",l.y,") abc88"),t.updatedPath&&(o=l.x,s=l.y)}n.attr("transform",`translate(${o}, ${s+a/2})`)}if(e.startLabelLeft){const n=ee.get(e.id).startLeft;let o=e.x,s=e.y;if(r){const l=Ke.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);o=l.x,s=l.y}n.attr("transform",`translate(${o}, ${s})`)}if(e.startLabelRight){const n=ee.get(e.id).startRight;let o=e.x,s=e.y;if(r){const l=Ke.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);o=l.x,s=l.y}n.attr("transform",`translate(${o}, ${s})`)}if(e.endLabelLeft){const n=ee.get(e.id).endLeft;let o=e.x,s=e.y;if(r){const l=Ke.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);o=l.x,s=l.y}n.attr("transform",`translate(${o}, ${s})`)}if(e.endLabelRight){const n=ee.get(e.id).endRight;let o=e.x,s=e.y;if(r){const l=Ke.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);o=l.x,s=l.y}n.attr("transform",`translate(${o}, ${s})`)}},"positionEdgeLabel"),IT=g((e,t)=>{const r=e.x,i=e.y,a=Math.abs(t.x-r),n=Math.abs(t.y-i),o=e.width/2,s=e.height/2;return a>=o||n>=s},"outsideNode"),NT=g((e,t,r)=>{O.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const i=e.x,a=e.y,n=Math.abs(i-r.x),o=e.width/2;let s=r.x<t.x?o-n:o+n;const l=e.height/2,c=Math.abs(t.y-r.y),h=Math.abs(t.x-r.x);if(Math.abs(a-t.y)*o>Math.abs(i-t.x)*l){let u=r.y<t.y?t.y-l-a:a-l-t.y;s=h*u/c;const p={x:r.x<t.x?r.x+s:r.x-h+s,y:r.y<t.y?r.y+c-u:r.y-c+u};return s===0&&(p.x=t.x,p.y=t.y),h===0&&(p.x=t.x),c===0&&(p.y=t.y),O.debug(`abc89 top/bottom calc, Q ${c}, q ${u}, R ${h}, r ${s}`,p),p}else{r.x<t.x?s=t.x-o-i:s=i-o-t.x;let u=c*s/h,p=r.x<t.x?r.x+h-s:r.x-h+s,d=r.y<t.y?r.y+u:r.y-u;return O.debug(`sides calc abc89, Q ${c}, q ${u}, R ${h}, r ${s}`,{_x:p,_y:d}),s===0&&(p=t.x,d=t.y),h===0&&(p=t.x),c===0&&(d=t.y),{x:p,y:d}}},"intersection"),$u=g((e,t)=>{O.warn("abc88 cutPathAtIntersect",e,t);let r=[],i=e[0],a=!1;return e.forEach(n=>{if(O.info("abc88 checking point",n,t),!IT(t,n)&&!a){const o=NT(t,i,n);O.debug("abc88 inside",n,i,o),O.debug("abc88 intersection",o,t);let s=!1;r.forEach(l=>{s=s||l.x===o.x&&l.y===o.y}),r.some(l=>l.x===o.x&&l.y===o.y)?O.warn("abc88 no intersect",o,r):r.push(o),a=!0}else O.warn("abc88 outside",n,i),i=n,a||r.push(n)}),O.debug("returning points",r),r},"cutPathAtIntersect");function gy(e){const t=[],r=[];for(let i=1;i<e.length-1;i++){const a=e[i-1],n=e[i],o=e[i+1];(a.x===n.x&&n.y===o.y&&Math.abs(n.x-o.x)>5&&Math.abs(n.y-a.y)>5||a.y===n.y&&n.x===o.x&&Math.abs(n.x-a.x)>5&&Math.abs(n.y-o.y)>5)&&(t.push(n),r.push(i))}return{cornerPoints:t,cornerPointPositions:r}}g(gy,"extractCornerPoints");var Fu=g(function(e,t,r){const i=t.x-e.x,a=t.y-e.y,n=Math.sqrt(i*i+a*a),o=r/n;return{x:t.x-o*i,y:t.y-o*a}},"findAdjacentPoint"),qT=g(function(e){const{cornerPointPositions:t}=gy(e),r=[];for(let i=0;i<e.length;i++)if(t.includes(i)){const a=e[i-1],n=e[i+1],o=e[i],s=Fu(a,o,5),l=Fu(n,o,5),c=l.x-s.x,h=l.y-s.y;r.push(s);const u=Math.sqrt(2)*2;let p={x:o.x,y:o.y};if(Math.abs(n.x-a.x)>10&&Math.abs(n.y-a.y)>=10){O.debug("Corner point fixing",Math.abs(n.x-a.x),Math.abs(n.y-a.y));const d=5;o.x===s.x?p={x:c<0?s.x-d+u:s.x+d-u,y:h<0?s.y-u:s.y+u}:p={x:c<0?s.x-u:s.x+u,y:h<0?s.y-d+u:s.y+d-u}}else O.debug("Corner point skipping fixing",Math.abs(n.x-a.x),Math.abs(n.y-a.y));r.push(p,l)}else r.push(e[i]);return r},"fixCorners"),zT=g(function(e,t,r,i,a,n,o){var V;const{handDrawnSeed:s}=St();let l=t.points,c=!1;const h=a;var u=n;const p=[];for(const N in t.cssCompiledStyles)tf(N)||p.push(t.cssCompiledStyles[N]);u.intersect&&h.intersect&&(l=l.slice(1,t.points.length-1),l.unshift(h.intersect(l[0])),O.debug("Last point APA12",t.start,"-->",t.end,l[l.length-1],u,u.intersect(l[l.length-1])),l.push(u.intersect(l[l.length-1]))),t.toCluster&&(O.info("to cluster abc88",r.get(t.toCluster)),l=$u(t.points,r.get(t.toCluster).node),c=!0),t.fromCluster&&(O.debug("from cluster abc88",r.get(t.fromCluster),JSON.stringify(l,null,2)),l=$u(l.reverse(),r.get(t.fromCluster).node).reverse(),c=!0);let d=l.filter(N=>!Number.isNaN(N.y));d=qT(d);let f=fs;switch(f=Os,t.curve){case"linear":f=Os;break;case"basis":f=fs;break;case"cardinal":f=Df;break;case"bumpX":f=Ef;break;case"bumpY":f=$f;break;case"catmullRom":f=If;break;case"monotoneX":f=jf;break;case"monotoneY":f=Vf;break;case"natural":f=Yf;break;case"step":f=Gf;break;case"stepAfter":f=Zf;break;case"stepBefore":f=Xf;break;default:f=fs}const{x:m,y}=hv(t),b=O2().x(m).y(y).curve(f);let v;switch(t.thickness){case"normal":v="edge-thickness-normal";break;case"thick":v="edge-thickness-thick";break;case"invisible":v="edge-thickness-invisible";break;default:v="edge-thickness-normal"}switch(t.pattern){case"solid":v+=" edge-pattern-solid";break;case"dotted":v+=" edge-pattern-dotted";break;case"dashed":v+=" edge-pattern-dashed";break;default:v+=" edge-pattern-solid"}let k,M=b(d);const T=Array.isArray(t.style)?t.style:t.style?[t.style]:[];let _=T.find(N=>N==null?void 0:N.startsWith("stroke:"));if(t.look==="handDrawn"){const N=rt.svg(e);Object.assign([],d);const P=N.path(M,{roughness:.3,seed:s});v+=" transition",k=vt(P).select("path").attr("id",t.id).attr("class"," "+v+(t.classes?" "+t.classes:"")).attr("style",T?T.reduce((q,$)=>q+";"+$,""):"");let Y=k.attr("d");k.attr("d",Y),e.node().appendChild(k.node())}else{const N=p.join(";"),P=T?T.reduce(($,E)=>$+E+";",""):"";let Y="";t.animate&&(Y=" edge-animation-fast"),t.animation&&(Y=" edge-animation-"+t.animation);const q=N?N+";"+P+";":P;k=e.append("path").attr("d",M).attr("id",t.id).attr("class"," "+v+(t.classes?" "+t.classes:"")+(Y??"")).attr("style",q),_=(V=q.match(/stroke:([^;]+)/))==null?void 0:V[1]}let S="";(St().flowchart.arrowMarkerAbsolute||St().state.arrowMarkerAbsolute)&&(S=mp(!0)),O.info("arrowTypeStart",t.arrowTypeStart),O.info("arrowTypeEnd",t.arrowTypeEnd),PT(k,t,S,o,i,_);let I={};return c&&(I.updatedPath=l),I.originalPath=t.points,I},"insertEdge"),WT=g((e,t,r,i)=>{t.forEach(a=>{aM[a](e,r,i)})},"insertMarkers"),HT=g((e,t,r)=>{O.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),jT=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),VT=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),UT=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),YT=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),GT=g((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),XT=g((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),ZT=g((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),KT=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),QT=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),JT=g((e,t,r)=>{const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("d","M9,0 L9,18");const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),a.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),tM=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),eM=g((e,t,r)=>{const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),a.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),rM=g((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),iM=g((e,t,r)=>{const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");i.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),i.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),i.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),aM={extension:HT,composition:jT,aggregation:VT,dependency:UT,lollipop:YT,point:GT,circle:XT,cross:ZT,barb:KT,only_one:QT,zero_or_one:JT,one_or_more:tM,zero_or_more:eM,requirement_arrow:rM,requirement_contains:iM},nM=WT,sM={common:oa,getConfig:ve,insertCluster:fT,insertEdge:zT,insertEdgeLabel:DT,insertMarkers:nM,insertNode:fy,interpolateToCurve:Pc,labelHelper:ft,log:O,positionEdgeLabel:OT},yn={},my=g(e=>{for(const t of e)yn[t.name]=t},"registerLayoutLoaders"),oM=g(()=>{my([{name:"dagre",loader:g(async()=>await Et(()=>import("./3oJoh2Vv.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),"loader")}])},"registerDefaultLayoutLoaders");oM();var DE=g(async(e,t)=>{if(!(e.layoutAlgorithm in yn))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const r=yn[e.layoutAlgorithm];return(await r.loader()).render(e,t,sM,{algorithm:r.algorithm})},"render"),OE=g((e="",{fallback:t="dagre"}={})=>{if(e in yn)return e;if(t in yn)return O.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),Pu={name:"mermaid",version:"11.9.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.0.4","@iconify/utils":"^2.1.33","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.13",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.0.0",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.2","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.0",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.0.2",jison:"^0.4.18","js-base64":"^3.7.7",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.2",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.10","type-fest":"^4.35.0",typedoc:"^0.27.8","typedoc-plugin-markdown":"^4.4.2",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.0.2","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},lM=g(e=>{var a;const{securityLevel:t}=St();let r=vt("body");if(t==="sandbox"){const o=((a=vt(`#i${e}`).node())==null?void 0:a.contentDocument)??document;r=vt(o.body)}return r.select(`#${e}`)},"selectSvgElement"),yy="comm",by="rule",xy="decl",cM="@import",hM="@namespace",uM="@keyframes",pM="@layer",vy=Math.abs,th=String.fromCharCode;function _y(e){return e.trim()}function bs(e,t,r){return e.replace(t,r)}function dM(e,t,r){return e.indexOf(t,r)}function Wi(e,t){return e.charCodeAt(t)|0}function na(e,t,r){return e.slice(t,r)}function Ze(e){return e.length}function fM(e){return e.length}function as(e,t){return t.push(e),e}var Mo=1,sa=1,wy=0,Fe=0,Xt=0,pa="";function eh(e,t,r,i,a,n,o,s){return{value:e,root:t,parent:r,type:i,props:a,children:n,line:Mo,column:sa,length:o,return:"",siblings:s}}function gM(){return Xt}function mM(){return Xt=Fe>0?Wi(pa,--Fe):0,sa--,Xt===10&&(sa=1,Mo--),Xt}function qe(){return Xt=Fe<wy?Wi(pa,Fe++):0,sa++,Xt===10&&(sa=1,Mo++),Xt}function Mr(){return Wi(pa,Fe)}function xs(){return Fe}function Lo(e,t){return na(pa,e,t)}function bn(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function yM(e){return Mo=sa=1,wy=Ze(pa=e),Fe=0,[]}function bM(e){return pa="",e}function il(e){return _y(Lo(Fe-1,Xl(e===91?e+2:e===40?e+1:e)))}function xM(e){for(;(Xt=Mr())&&Xt<33;)qe();return bn(e)>2||bn(Xt)>3?"":" "}function vM(e,t){for(;--t&&qe()&&!(Xt<48||Xt>102||Xt>57&&Xt<65||Xt>70&&Xt<97););return Lo(e,xs()+(t<6&&Mr()==32&&qe()==32))}function Xl(e){for(;qe();)switch(Xt){case e:return Fe;case 34:case 39:e!==34&&e!==39&&Xl(Xt);break;case 40:e===41&&Xl(e);break;case 92:qe();break}return Fe}function _M(e,t){for(;qe()&&e+Xt!==57;)if(e+Xt===84&&Mr()===47)break;return"/*"+Lo(t,Fe-1)+"*"+th(e===47?e:qe())}function wM(e){for(;!bn(Mr());)qe();return Lo(e,Fe)}function CM(e){return bM(vs("",null,null,null,[""],e=yM(e),0,[0],e))}function vs(e,t,r,i,a,n,o,s,l){for(var c=0,h=0,u=o,p=0,d=0,f=0,m=1,y=1,b=1,v=0,k="",M=a,T=n,_=i,S=k;y;)switch(f=v,v=qe()){case 40:if(f!=108&&Wi(S,u-1)==58){dM(S+=bs(il(v),"&","&\f"),"&\f",vy(c?s[c-1]:0))!=-1&&(b=-1);break}case 34:case 39:case 91:S+=il(v);break;case 9:case 10:case 13:case 32:S+=xM(f);break;case 92:S+=vM(xs()-1,7);continue;case 47:switch(Mr()){case 42:case 47:as(kM(_M(qe(),xs()),t,r,l),l),(bn(f||1)==5||bn(Mr()||1)==5)&&Ze(S)&&na(S,-1,void 0)!==" "&&(S+=" ");break;default:S+="/"}break;case 123*m:s[c++]=Ze(S)*b;case 125*m:case 59:case 0:switch(v){case 0:case 125:y=0;case 59+h:b==-1&&(S=bs(S,/\f/g,"")),d>0&&(Ze(S)-u||m===0&&f===47)&&as(d>32?Du(S+";",i,r,u-1,l):Du(bs(S," ","")+";",i,r,u-2,l),l);break;case 59:S+=";";default:if(as(_=Ru(S,t,r,c,h,a,s,k,M=[],T=[],u,n),n),v===123)if(h===0)vs(S,t,_,_,M,n,u,s,T);else{switch(p){case 99:if(Wi(S,3)===110)break;case 108:if(Wi(S,2)===97)break;default:h=0;case 100:case 109:case 115:}h?vs(e,_,_,i&&as(Ru(e,_,_,0,0,a,s,k,a,M=[],u,T),T),a,T,u,s,i?M:T):vs(S,_,_,_,[""],T,0,s,T)}}c=h=d=0,m=b=1,k=S="",u=o;break;case 58:u=1+Ze(S),d=f;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&mM()==125)continue}switch(S+=th(v),v*m){case 38:b=h>0?1:(S+="\f",-1);break;case 44:s[c++]=(Ze(S)-1)*b,b=1;break;case 64:Mr()===45&&(S+=il(qe())),p=Mr(),h=u=Ze(k=S+=wM(xs())),v++;break;case 45:f===45&&Ze(S)==2&&(m=0)}}return n}function Ru(e,t,r,i,a,n,o,s,l,c,h,u){for(var p=a-1,d=a===0?n:[""],f=fM(d),m=0,y=0,b=0;m<i;++m)for(var v=0,k=na(e,p+1,p=vy(y=o[m])),M=e;v<f;++v)(M=_y(y>0?d[v]+" "+k:bs(k,/&\f/g,d[v])))&&(l[b++]=M);return eh(e,t,r,a===0?by:s,l,c,h,u)}function kM(e,t,r,i){return eh(e,t,r,yy,th(gM()),na(e,2,-2),0,i)}function Du(e,t,r,i,a){return eh(e,t,r,xy,na(e,0,i),na(e,i+1,-1),i,a)}function Zl(e,t){for(var r="",i=0;i<e.length;i++)r+=t(e[i],i,e,t)||"";return r}function SM(e,t,r,i){switch(e.type){case pM:if(e.children.length)break;case cM:case hM:case xy:return e.return=e.return||e.value;case yy:return"";case uM:return e.return=e.value+"{"+Zl(e.children,i)+"}";case by:if(!Ze(e.value=e.props.join(",")))return""}return Ze(r=Zl(e.children,i))?e.return=e.value+"{"+r+"}":""}var TM=tg(Object.keys,Object),MM=Object.prototype,LM=MM.hasOwnProperty;function AM(e){if(!bo(e))return TM(e);var t=[];for(var r in Object(e))LM.call(e,r)&&r!="constructor"&&t.push(r);return t}var Kl=hi(rr,"DataView"),Ql=hi(rr,"Promise"),Jl=hi(rr,"Set"),tc=hi(rr,"WeakMap"),Ou="[object Map]",BM="[object Object]",Iu="[object Promise]",Nu="[object Set]",qu="[object WeakMap]",zu="[object DataView]",EM=ci(Kl),$M=ci(mn),FM=ci(Ql),PM=ci(Jl),RM=ci(tc),Yr=ca;(Kl&&Yr(new Kl(new ArrayBuffer(1)))!=zu||mn&&Yr(new mn)!=Ou||Ql&&Yr(Ql.resolve())!=Iu||Jl&&Yr(new Jl)!=Nu||tc&&Yr(new tc)!=qu)&&(Yr=function(e){var t=ca(e),r=t==BM?e.constructor:void 0,i=r?ci(r):"";if(i)switch(i){case EM:return zu;case $M:return Ou;case FM:return Iu;case PM:return Nu;case RM:return qu}return t});var DM="[object Map]",OM="[object Set]",IM=Object.prototype,NM=IM.hasOwnProperty;function Wu(e){if(e==null)return!0;if(xo(e)&&(js(e)||typeof e=="string"||typeof e.splice=="function"||$c(e)||Fc(e)||Hs(e)))return!e.length;var t=Yr(e);if(t==DM||t==OM)return!e.size;if(bo(e))return!AM(e).length;for(var r in e)if(NM.call(e,r))return!1;return!0}var Cy="c4",qM=g(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),zM=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./AUYcg6Wq.js");return{diagram:t}},__vite__mapDeps([6,7]),import.meta.url);return{id:Cy,diagram:e}},"loader"),WM={id:Cy,detector:qM,loader:zM},HM=WM,ky="flowchart",jM=g((e,t)=>{var r,i;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-wrapper"||((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)},"detector"),VM=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./BuX-gmxX.js");return{diagram:t}},__vite__mapDeps([8,9,10,11,12]),import.meta.url);return{id:ky,diagram:e}},"loader"),UM={id:ky,detector:jM,loader:VM},YM=UM,Sy="flowchart-v2",GM=g((e,t)=>{var r,i,a;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-d3"?!1:(((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&((a=t==null?void 0:t.flowchart)==null?void 0:a.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(e))},"detector"),XM=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./BuX-gmxX.js");return{diagram:t}},__vite__mapDeps([8,9,10,11,12]),import.meta.url);return{id:Sy,diagram:e}},"loader"),ZM={id:Sy,detector:GM,loader:XM},KM=ZM,Ty="er",QM=g(e=>/^\s*erDiagram/.test(e),"detector"),JM=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./DpxYA0nJ.js");return{diagram:t}},__vite__mapDeps([13,10,11,12]),import.meta.url);return{id:Ty,diagram:e}},"loader"),tL={id:Ty,detector:QM,loader:JM},eL=tL,My="gitGraph",rL=g(e=>/^\s*gitGraph/.test(e),"detector"),iL=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./CDyARCXa.js");return{diagram:t}},__vite__mapDeps([14,15,16,17,18,2,4,5]),import.meta.url);return{id:My,diagram:e}},"loader"),aL={id:My,detector:rL,loader:iL},nL=aL,Ly="gantt",sL=g(e=>/^\s*gantt/.test(e),"detector"),oL=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./BCwU4Wqj.js");return{diagram:t}},__vite__mapDeps([19,20,21,22,23]),import.meta.url);return{id:Ly,diagram:e}},"loader"),lL={id:Ly,detector:sL,loader:oL},cL=lL,Ay="info",hL=g(e=>/^\s*info/.test(e),"detector"),uL=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./D3bk8jiW.js");return{diagram:t}},__vite__mapDeps([24,17,18,2,4,5]),import.meta.url);return{id:Ay,diagram:e}},"loader"),pL={id:Ay,detector:hL,loader:uL},By="pie",dL=g(e=>/^\s*pie/.test(e),"detector"),fL=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./IQl1QDjV.js");return{diagram:t}},__vite__mapDeps([25,15,17,18,2,4,5,26,27,22]),import.meta.url);return{id:By,diagram:e}},"loader"),gL={id:By,detector:dL,loader:fL},Ey="quadrantChart",mL=g(e=>/^\s*quadrantChart/.test(e),"detector"),yL=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./CHvfuDG_.js");return{diagram:t}},__vite__mapDeps([28,21,22,23]),import.meta.url);return{id:Ey,diagram:e}},"loader"),bL={id:Ey,detector:mL,loader:yL},xL=bL,$y="xychart",vL=g(e=>/^\s*xychart-beta/.test(e),"detector"),_L=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./Q5CLQ42W.js");return{diagram:t}},__vite__mapDeps([29,22,27,21,23]),import.meta.url);return{id:$y,diagram:e}},"loader"),wL={id:$y,detector:vL,loader:_L},CL=wL,Fy="requirement",kL=g(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),SL=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./sO_z5wE-.js");return{diagram:t}},__vite__mapDeps([30,10,11]),import.meta.url);return{id:Fy,diagram:e}},"loader"),TL={id:Fy,detector:kL,loader:SL},ML=TL,Py="sequence",LL=g(e=>/^\s*sequenceDiagram/.test(e),"detector"),AL=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./Cgt_BHMd.js");return{diagram:t}},__vite__mapDeps([31,7,16]),import.meta.url);return{id:Py,diagram:e}},"loader"),BL={id:Py,detector:LL,loader:AL},EL=BL,Ry="class",$L=g((e,t)=>{var r;return((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e)},"detector"),FL=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./CPvZ1rNz.js");return{diagram:t}},__vite__mapDeps([32,33,9,10,11]),import.meta.url);return{id:Ry,diagram:e}},"loader"),PL={id:Ry,detector:$L,loader:FL},RL=PL,Dy="classDiagram",DL=g((e,t)=>{var r;return/^\s*classDiagram/.test(e)&&((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e)},"detector"),OL=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./BQFKAnsf.js");return{diagram:t}},__vite__mapDeps([34,33,9,10,11]),import.meta.url);return{id:Dy,diagram:e}},"loader"),IL={id:Dy,detector:DL,loader:OL},NL=IL,Oy="state",qL=g((e,t)=>{var r;return((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e)},"detector"),zL=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./BZZKErRp.js");return{diagram:t}},__vite__mapDeps([35,36,10,11,1,2,3,4]),import.meta.url);return{id:Oy,diagram:e}},"loader"),WL={id:Oy,detector:qL,loader:zL},HL=WL,Iy="stateDiagram",jL=g((e,t)=>{var r;return!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper")},"detector"),VL=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./CnMaNL8Y.js");return{diagram:t}},__vite__mapDeps([37,36,10,11]),import.meta.url);return{id:Iy,diagram:e}},"loader"),UL={id:Iy,detector:jL,loader:VL},YL=UL,Ny="journey",GL=g(e=>/^\s*journey/.test(e),"detector"),XL=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./mTN-6KNO.js");return{diagram:t}},__vite__mapDeps([38,7,9,26]),import.meta.url);return{id:Ny,diagram:e}},"loader"),ZL={id:Ny,detector:GL,loader:XL},KL=ZL,QL=g((e,t,r)=>{O.debug(`rendering svg for syntax error
`);const i=lM(t),a=i.append("g");i.attr("viewBox","0 0 2412 512"),yp(i,100,512,!0),a.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),a.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),a.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),a.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),a.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),a.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),a.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),a.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),qy={draw:QL},JL=qy,tA={db:{},renderer:qy,parser:{parse:g(()=>{},"parse")}},eA=tA,zy="flowchart-elk",rA=g((e,t={})=>{var r;return/^\s*flowchart-elk/.test(e)||/^\s*flowchart|graph/.test(e)&&((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk"?(t.layout="elk",!0):!1},"detector"),iA=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./BuX-gmxX.js");return{diagram:t}},__vite__mapDeps([8,9,10,11,12]),import.meta.url);return{id:zy,diagram:e}},"loader"),aA={id:zy,detector:rA,loader:iA},nA=aA,Wy="timeline",sA=g(e=>/^\s*timeline/.test(e),"detector"),oA=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./B-253Mrk.js");return{diagram:t}},__vite__mapDeps([39,26]),import.meta.url);return{id:Wy,diagram:e}},"loader"),lA={id:Wy,detector:sA,loader:oA},cA=lA,Hy="mindmap",hA=g(e=>/^\s*mindmap/.test(e),"detector"),uA=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./BNraQwKC.js");return{diagram:t}},__vite__mapDeps([40,41,20]),import.meta.url);return{id:Hy,diagram:e}},"loader"),pA={id:Hy,detector:hA,loader:uA},dA=pA,jy="kanban",fA=g(e=>/^\s*kanban/.test(e),"detector"),gA=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./DCKqHaGt.js");return{diagram:t}},__vite__mapDeps([42,9]),import.meta.url);return{id:jy,diagram:e}},"loader"),mA={id:jy,detector:fA,loader:gA},yA=mA,Vy="sankey",bA=g(e=>/^\s*sankey-beta/.test(e),"detector"),xA=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./D_3AKv80.js");return{diagram:t}},__vite__mapDeps([43,27,22]),import.meta.url);return{id:Vy,diagram:e}},"loader"),vA={id:Vy,detector:bA,loader:xA},_A=vA,Uy="packet",wA=g(e=>/^\s*packet(-beta)?/.test(e),"detector"),CA=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./DPjLcZFk.js");return{diagram:t}},__vite__mapDeps([44,15,17,18,2,4,5]),import.meta.url);return{id:Uy,diagram:e}},"loader"),kA={id:Uy,detector:wA,loader:CA},Yy="radar",SA=g(e=>/^\s*radar-beta/.test(e),"detector"),TA=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./CfquIHMI.js");return{diagram:t}},__vite__mapDeps([45,15,17,18,2,4,5]),import.meta.url);return{id:Yy,diagram:e}},"loader"),MA={id:Yy,detector:SA,loader:TA},Gy="block",LA=g(e=>/^\s*block-beta/.test(e),"detector"),AA=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./D2fpmNgQ.js");return{diagram:t}},__vite__mapDeps([46,9,5,2,1,12]),import.meta.url);return{id:Gy,diagram:e}},"loader"),BA={id:Gy,detector:LA,loader:AA},EA=BA,Xy="architecture",$A=g(e=>/^\s*architecture/.test(e),"detector"),FA=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./Bf422eml.js");return{diagram:t}},__vite__mapDeps([47,15,16,17,18,2,4,5,41,20]),import.meta.url);return{id:Xy,diagram:e}},"loader"),PA={id:Xy,detector:$A,loader:FA},RA=PA,Zy="treemap",DA=g(e=>/^\s*treemap/.test(e),"detector"),OA=g(async()=>{const{diagram:e}=await Et(async()=>{const{diagram:t}=await import("./BneqE7Fp.js");return{diagram:t}},__vite__mapDeps([48,11,15,17,18,2,4,5,23,27,22]),import.meta.url);return{id:Zy,diagram:e}},"loader"),IA={id:Zy,detector:DA,loader:OA},Hu=!1,Ao=g(()=>{Hu||(Hu=!0,ks("error",eA,e=>e.toLowerCase().trim()==="error"),ks("---",{db:{clear:g(()=>{},"clear")},styles:{},renderer:{draw:g(()=>{},"draw")},parser:{parse:g(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:g(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),ll(nA,dA,RA),ll(HM,yA,NL,RL,eL,cL,pL,gL,ML,EL,KM,YM,cA,nL,YL,HL,KL,xL,_A,kA,CL,EA,MA,IA))},"addDiagrams"),NA=g(async()=>{O.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(ei).map(async([r,{detector:i,loader:a}])=>{if(a)try{pl(r)}catch{try{const{diagram:n,id:o}=await a();ks(o,n,i)}catch(n){throw O.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete ei[r],n}}}))).filter(r=>r.status==="rejected");if(t.length>0){O.error(`Failed to load ${t.length} external diagrams`);for(const r of t)O.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),qA="graphics-document document";function Ky(e,t){e.attr("role",qA),t!==""&&e.attr("aria-roledescription",t)}g(Ky,"setA11yDiagramInfo");function Qy(e,t,r,i){if(e.insert!==void 0){if(r){const a=`chart-desc-${i}`;e.attr("aria-describedby",a),e.insert("desc",":first-child").attr("id",a).text(r)}if(t){const a=`chart-title-${i}`;e.attr("aria-labelledby",a),e.insert("title",":first-child").attr("id",a).text(t)}}}g(Qy,"addSVGa11yTitleDescription");var ti,ec=(ti=class{constructor(t,r,i,a,n){this.type=t,this.text=r,this.db=i,this.parser=a,this.renderer=n}static async fromText(t,r={}){var c,h;const i=ve(),a=ac(t,i);t=Ok(t)+`
`;try{pl(a)}catch{const u=ub(a);if(!u)throw new ip(`Diagram ${a} not found.`);const{id:p,diagram:d}=await u();ks(p,d)}const{db:n,parser:o,renderer:s,init:l}=pl(a);return o.parser&&(o.parser.yy=n),(c=n.clear)==null||c.call(n),l==null||l(i),r.title&&((h=n.setDiagramTitle)==null||h.call(n,r.title)),await o.parse(t),new ti(a,t,n,o,s)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},g(ti,"Diagram"),ti),ju=[],zA=g(()=>{ju.forEach(e=>{e()}),ju=[]},"attachFunctions"),WA=g(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function Jy(e){const t=e.match(rp);if(!t)return{text:e,metadata:{}};let r=cv(t[1],{schema:lv})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const i={};return r.displayMode&&(i.displayMode=r.displayMode.toString()),r.title&&(i.title=r.title.toString()),r.config&&(i.config=r.config),{text:e.slice(t[0].length),metadata:i}}g(Jy,"extractFrontMatter");var HA=g(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,i)=>"<"+r+i.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),jA=g(e=>{const{text:t,metadata:r}=Jy(e),{displayMode:i,title:a,config:n={}}=r;return i&&(n.gantt||(n.gantt={}),n.gantt.displayMode=i),{title:a,config:n,text:t}},"processFrontmatter"),VA=g(e=>{const t=Ke.detectInit(e)??{},r=Ke.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:i})=>i==="wrap"):(r==null?void 0:r.type)==="wrap"&&(t.wrap=!0),{text:kk(e),directive:t}},"processDirectives");function rh(e){const t=HA(e),r=jA(t),i=VA(r.text),a=Nc(r.config,i.directive);return e=WA(i.text),{code:e,title:r.title,config:a}}g(rh,"preprocessDiagram");function t0(e){const t=new TextEncoder().encode(e),r=Array.from(t,i=>String.fromCodePoint(i)).join("");return btoa(r)}g(t0,"toBase64");var UA=5e4,YA="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",GA="sandbox",XA="loose",ZA="http://www.w3.org/2000/svg",KA="http://www.w3.org/1999/xlink",QA="http://www.w3.org/1999/xhtml",JA="100%",tB="100%",eB="border:0;margin:0;",rB="margin:0",iB="allow-top-navigation-by-user-activation allow-popups",aB='The "iframe" tag is not supported by your browser.',nB=["foreignobject"],sB=["dominant-baseline"];function ih(e){const t=rh(e);return ws(),Mb(t.config??{}),t}g(ih,"processAndSetConfigs");async function e0(e,t){Ao();try{const{code:r,config:i}=ih(e);return{diagramType:(await i0(r)).type,config:i}}catch(r){if(t!=null&&t.suppressErrors)return!1;throw r}}g(e0,"parse");var Vu=g((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),oB=g((e,t=new Map)=>{var i;let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const s=e.htmlLabels??((i=e.flowchart)==null?void 0:i.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(l=>{Wu(l.styles)||s.forEach(c=>{r+=Vu(l.id,c,l.styles)}),Wu(l.textStyles)||(r+=Vu(l.id,"tspan",((l==null?void 0:l.textStyles)||[]).map(c=>c.replace("color","fill"))))})}return r},"createCssStyles"),lB=g((e,t,r,i)=>{const a=oB(e,r),n=Vb(t,a,e.themeVariables);return Zl(CM(`${i}{${n}}`),SM)},"createUserStyles"),cB=g((e="",t,r)=>{let i=e;return!r&&!t&&(i=i.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),i=ui(i),i=i.replace(/<br>/g,"<br/>"),i},"cleanUpSvgCode"),hB=g((e="",t)=>{var a,n;const r=(n=(a=t==null?void 0:t.viewBox)==null?void 0:a.baseVal)!=null&&n.height?t.viewBox.baseVal.height+"px":tB,i=t0(`<body style="${rB}">${e}</body>`);return`<iframe style="width:${JA};height:${r};${eB}" src="data:text/html;charset=UTF-8;base64,${i}" sandbox="${iB}">
  ${aB}
</iframe>`},"putIntoIFrame"),Uu=g((e,t,r,i,a)=>{const n=e.append("div");n.attr("id",r),i&&n.attr("style",i);const o=n.append("svg").attr("id",t).attr("width","100%").attr("xmlns",ZA);return a&&o.attr("xmlns:xlink",a),o.append("g"),e},"appendDivSvgG");function rc(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}g(rc,"sandboxedIframe");var uB=g((e,t,r,i)=>{var a,n,o;(a=e.getElementById(t))==null||a.remove(),(n=e.getElementById(r))==null||n.remove(),(o=e.getElementById(i))==null||o.remove()},"removeExistingElements"),pB=g(async function(e,t,r){var Y,q,$,E,B,D;Ao();const i=ih(t);t=i.code;const a=ve();O.debug(a),t.length>((a==null?void 0:a.maxTextSize)??UA)&&(t=YA);const n="#"+e,o="i"+e,s="#"+o,l="d"+e,c="#"+l,h=g(()=>{const X=vt(p?s:c).node();X&&"remove"in X&&X.remove()},"removeTempElements");let u=vt("body");const p=a.securityLevel===GA,d=a.securityLevel===XA,f=a.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),p){const F=rc(vt(r),o);u=vt(F.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=vt(r);Uu(u,e,l,`font-family: ${f}`,KA)}else{if(uB(document,e,l,o),p){const F=rc(vt("body"),o);u=vt(F.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=vt("body");Uu(u,e,l)}let m,y;try{m=await ec.fromText(t,{title:i.title})}catch(F){if(a.suppressErrorRendering)throw h(),F;m=await ec.fromText("error"),y=F}const b=u.select(c).node(),v=m.type,k=b.firstChild,M=k.firstChild,T=(q=(Y=m.renderer).getClasses)==null?void 0:q.call(Y,t,m),_=lB(a,v,T,n),S=document.createElement("style");S.innerHTML=_,k.insertBefore(S,M);try{await m.renderer.draw(t,e,Pu.version,m)}catch(F){throw a.suppressErrorRendering?h():JL.draw(t,e,Pu.version),F}const I=u.select(`${c} svg`),V=(E=($=m.db).getAccTitle)==null?void 0:E.call($),N=(D=(B=m.db).getAccDescription)==null?void 0:D.call(B);a0(v,I,V,N),u.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",QA);let P=u.select(c).node().innerHTML;if(O.debug("config.arrowMarkerAbsolute",a.arrowMarkerAbsolute),P=cB(P,p,Qt(a.arrowMarkerAbsolute)),p){const F=u.select(c+" svg").node();P=hB(P,F)}else d||(P=Ki.sanitize(P,{ADD_TAGS:nB,ADD_ATTR:sB,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(zA(),y)throw y;return h(),{diagramType:v,svg:P,bindFunctions:m.db.bindFunctions}},"render");function r0(e={}){var i;const t=re({},e);t!=null&&t.fontFamily&&!((i=t.themeVariables)!=null&&i.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),Sb(t),t!=null&&t.theme&&t.theme in pr?t.themeVariables=pr[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=pr.default.getThemeVariables(t.themeVariables));const r=typeof t=="object"?kb(t):cp();ic(r.logLevel),Ao()}g(r0,"initialize");var i0=g((e,t={})=>{const{code:r}=rh(e);return ec.fromText(r,t)},"getDiagramFromText");function a0(e,t,r,i){Ky(t,e),Qy(t,r,i,t.attr("id"))}g(a0,"addA11yInfo");var oi=Object.freeze({render:pB,parse:e0,getDiagramFromText:i0,initialize:r0,getConfig:ve,setConfig:hp,getSiteConfig:cp,updateSiteConfig:Tb,reset:g(()=>{ws()},"reset"),globalReset:g(()=>{ws(Qi)},"globalReset"),defaultConfig:Qi});ic(ve().logLevel);ws(ve());var dB=g((e,t,r)=>{O.warn(e),Ic(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),n0=g(async function(e={querySelector:".mermaid"}){try{await fB(e)}catch(t){if(Ic(t)&&O.error(t.str),ke.parseError&&ke.parseError(t),!e.suppressErrors)throw O.error("Use the suppressErrors option to suppress these errors"),t}},"run"),fB=g(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const i=oi.getConfig();O.debug(`${e?"":"No "}Callback function found`);let a;if(r)a=r;else if(t)a=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");O.debug(`Found ${a.length} diagrams`),(i==null?void 0:i.startOnLoad)!==void 0&&(O.debug("Start On Load: "+(i==null?void 0:i.startOnLoad)),oi.updateSiteConfig({startOnLoad:i==null?void 0:i.startOnLoad}));const n=new Ke.InitIDGenerator(i.deterministicIds,i.deterministicIDSeed);let o;const s=[];for(const l of Array.from(a)){if(O.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${n.next()}`;o=l.innerHTML,o=Eg(Ke.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=Ke.detectInit(o);h&&O.debug("Detected early reinit: ",h);try{const{svg:u,bindFunctions:p}=await c0(c,o,l);l.innerHTML=u,e&&await e(c),p&&p(l)}catch(u){dB(u,s,ke.parseError)}}if(s.length>0)throw s[0]},"runThrowsErrors"),s0=g(function(e){oi.initialize(e)},"initialize"),gB=g(async function(e,t,r){O.warn("mermaid.init is deprecated. Please use run instead."),e&&s0(e);const i={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?i.querySelector=t:t&&(t instanceof HTMLElement?i.nodes=[t]:i.nodes=t),await n0(i)},"init"),mB=g(async(e,{lazyLoad:t=!0}={})=>{Ao(),ll(...e),t===!1&&await NA()},"registerExternalDiagrams"),o0=g(function(){if(ke.startOnLoad){const{startOnLoad:e}=oi.getConfig();e&&ke.run().catch(t=>O.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",o0,!1);var yB=g(function(e){ke.parseError=e},"setParseErrorHandler"),eo=[],al=!1,l0=g(async()=>{if(!al){for(al=!0;eo.length>0;){const e=eo.shift();if(e)try{await e()}catch(t){O.error("Error executing queue",t)}}al=!1}},"executeQueue"),bB=g(async(e,t)=>new Promise((r,i)=>{const a=g(()=>new Promise((n,o)=>{oi.parse(e,t).then(s=>{n(s),r(s)},s=>{var l;O.error("Error parsing",s),(l=ke.parseError)==null||l.call(ke,s),o(s),i(s)})}),"performCall");eo.push(a),l0().catch(i)}),"parse"),c0=g((e,t,r)=>new Promise((i,a)=>{const n=g(()=>new Promise((o,s)=>{oi.render(e,t,r).then(l=>{o(l),i(l)},l=>{var c;O.error("Error parsing",l),(c=ke.parseError)==null||c.call(ke,l),s(l),a(l)})}),"performCall");eo.push(n),l0().catch(a)}),"render"),xB=g(()=>Object.keys(ei).map(e=>({id:e})),"getRegisteredDiagramsMetadata"),ke={startOnLoad:!0,mermaidAPI:oi,parse:bB,render:c0,init:gB,run:n0,registerExternalDiagrams:mB,registerLayoutLoaders:my,initialize:s0,parseError:void 0,contentLoaded:o0,setParseErrorHandler:yB,detectType:ac,registerIconPacks:zS,getRegisteredDiagramsMetadata:xB},Yu=ke;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */var vB=Bt('<meta name="description" content="Interactive tool to design and analyze custom voting methods. Mix and match ballot types, voting methods, and multi-winner options to create your ideal voting system."/>'),_B=Bt('<label class="facet-check svelte-ip3fvg"><input type="checkbox" class="svelte-ip3fvg"/> <span> </span></label>'),wB=Bt('<label class="facet-check svelte-ip3fvg"><input type="checkbox" class="svelte-ip3fvg"/> <span> </span></label>'),CB=Bt('<div class="facet-group svelte-ip3fvg"><h3 class="facet-title svelte-ip3fvg">ChooseX Limits <span class="facet-tip svelte-ip3fvg" title="For ChooseX ballots: Pick 1 (FPTP) versus Pick up to X or Approve any. This changes which methods fit and the strategic properties."></span></h3> <div class="facet-grid svelte-ip3fvg"></div> <p class="facet-help svelte-ip3fvg">These options apply to chooseX ballots.</p></div>'),kB=Bt('<span class="badge proportional svelte-ip3fvg" title="Proportional representation"></span>'),SB=Bt('<span class="badge recommended svelte-ip3fvg" title="Recommended"></span>'),TB=Bt('<span class="badge redflag svelte-ip3fvg" title="Complex or known major weaknesses"></span>'),MB=Bt('<button><div class="method-card-header svelte-ip3fvg"><h3 class="method-title svelte-ip3fvg"> </h3> <div class="badge-group svelte-ip3fvg"><!> <!> <!></div></div> <p class="method-desc"> </p></button>'),LB=Bt('<span class="proportional-badge svelte-ip3fvg" title="This is a proportional representation method that ensures fair party/group representation"></span>'),AB=Bt(`<div class="info-panel svelte-ip3fvg">How well the election results reflect the proportion of support for different
                    groups or parties - higher scores mean seats are allocated more fairly based on
                    vote share</div>`),BB=Bt(`<div class="info-panel svelte-ip3fvg">How easy it is for voters to understand and use the voting method - considers
                    ballot complexity, cognitive load, and learning curve</div>`),EB=Bt(`<div class="info-panel svelte-ip3fvg">How well the method resists dishonest strategies where you support a
                    less-preferred candidate more than a preferred one - higher scores mean less
                    incentive for tactical voting</div>`),$B=Bt(`<div class="info-panel svelte-ip3fvg">How well the elected candidates actually represent the preferences and will of
                    the electorate - considers broad support, minority representation, and whether
                    outcomes reflect voter intent</div>`),FB=Bt(`<div class="info-panel svelte-ip3fvg">How easy it is to vote your true preferences without needing to consider
                    strategy or candidate viability - higher scores mean less mental burden on
                    voters</div>`),PB=Bt('<div class="method-scores svelte-ip3fvg"><h3 class="svelte-ip3fvg">System Analysis</h3> <div class="score-grid svelte-ip3fvg"><div class="score-item svelte-ip3fvg"><div class="score-bar-container svelte-ip3fvg"><div class="score-label-container svelte-ip3fvg"><span class="score-label clickable svelte-ip3fvg" role="button" tabindex="0">Proportionality</span></div> <div class="score-bar svelte-ip3fvg"><div class="score-fill svelte-ip3fvg"></div> <span class="score-value svelte-ip3fvg"> </span></div></div> <!></div> <div class="score-item svelte-ip3fvg"><div class="score-bar-container svelte-ip3fvg"><div class="score-label-container svelte-ip3fvg"><span class="score-label clickable svelte-ip3fvg" role="button" tabindex="0">Voter Simplicity</span></div> <div class="score-bar svelte-ip3fvg"><div class="score-fill svelte-ip3fvg"></div> <span class="score-value svelte-ip3fvg"> </span></div></div> <!></div> <div class="score-item svelte-ip3fvg"><div class="score-bar-container svelte-ip3fvg"><div class="score-label-container svelte-ip3fvg"><span class="score-label clickable svelte-ip3fvg" role="button" tabindex="0">Honest Strategy Resistance</span></div> <div class="score-bar svelte-ip3fvg"><div class="score-fill svelte-ip3fvg"></div> <span class="score-value svelte-ip3fvg"> </span></div></div> <!></div> <div class="score-item svelte-ip3fvg"><div class="score-bar-container svelte-ip3fvg"><div class="score-label-container svelte-ip3fvg"><span class="score-label clickable svelte-ip3fvg" role="button" tabindex="0">Representation Quality</span></div> <div class="score-bar svelte-ip3fvg"><div class="score-fill svelte-ip3fvg"></div> <span class="score-value svelte-ip3fvg"> </span></div></div> <!></div> <div class="score-item svelte-ip3fvg"><div class="score-bar-container svelte-ip3fvg"><div class="score-label-container svelte-ip3fvg"><span class="score-label clickable svelte-ip3fvg" role="button" tabindex="0">Strategic Straightforwardness</span></div> <div class="score-bar svelte-ip3fvg"><div class="score-fill svelte-ip3fvg"></div> <span class="score-value svelte-ip3fvg"> </span></div></div> <!></div></div></div>'),RB=Bt('<div class="method-summary svelte-ip3fvg"><!></div>'),DB=Bt('<div class="method-critique svelte-ip3fvg"><h3 class="svelte-ip3fvg">Detailed Analysis</h3> <!></div>'),OB=Bt('<span class="flag svelte-ip3fvg"> </span>'),IB=Bt('<div class="method-usedby svelte-ip3fvg"><h3 class="svelte-ip3fvg">Used By</h3> <div class="flag-list svelte-ip3fvg"></div></div>'),NB=Bt('<div class="method-flowchart svelte-ip3fvg"><h3 class="svelte-ip3fvg">Counting Process</h3> <div class="flowchart-container svelte-ip3fvg"></div></div>'),qB=Bt('<div class="comparison-suggestion svelte-ip3fvg"><button class="compare-button svelte-ip3fvg"> </button> <p class="suggestion-description svelte-ip3fvg"> </p></div>'),zB=Bt('<div class="comparison-suggestions svelte-ip3fvg"><h3 class="svelte-ip3fvg"> Confused about similar methods?</h3> <!></div>'),WB=Bt('<!> <div class="method-actions svelte-ip3fvg"><a class="action-link svelte-ip3fvg">Learn about voting systems</a> <a href="https://github.com/fsargent/approval-vote/issues" target="_blank" rel="noopener noreferrer" class="action-link github-link svelte-ip3fvg">Found something wrong? File an issue on GitHub</a></div>',1),HB=Bt('<span class="current-badge svelte-ip3fvg">Current</span>'),jB=Bt('<div class="compatibility-compact svelte-ip3fvg"><span class="compatibility-label svelte-ip3fvg">Voting Machines:</span> <span> </span></div>'),VB=Bt('<button class="switch-method-button svelte-ip3fvg">Switch to this method</button>'),UB=Bt('<div><div class="card-header svelte-ip3fvg"><h3 class="svelte-ip3fvg"> </h3> <!></div> <div class="method-summary-compact svelte-ip3fvg"><p class="svelte-ip3fvg"><strong>What it does:</strong> </p></div> <div class="score-comparison svelte-ip3fvg"><div class="score-row svelte-ip3fvg"><span class="score-name svelte-ip3fvg">Proportionality</span> <div class="score-bar-small svelte-ip3fvg"><div class="score-fill-small svelte-ip3fvg"></div></div> <span class="score-num svelte-ip3fvg"> </span></div> <div class="score-row svelte-ip3fvg"><span class="score-name svelte-ip3fvg">Simplicity</span> <div class="score-bar-small svelte-ip3fvg"><div class="score-fill-small svelte-ip3fvg"></div></div> <span class="score-num svelte-ip3fvg"> </span></div> <div class="score-row svelte-ip3fvg"><span class="score-name svelte-ip3fvg">Honest Strategy</span> <div class="score-bar-small svelte-ip3fvg"><div class="score-fill-small svelte-ip3fvg"></div></div> <span class="score-num svelte-ip3fvg"> </span></div> <div class="score-row svelte-ip3fvg"><span class="score-name svelte-ip3fvg">Straightforward</span> <div class="score-bar-small svelte-ip3fvg"><div class="score-fill-small svelte-ip3fvg"></div></div> <span class="score-num svelte-ip3fvg"> </span></div> <div class="score-row svelte-ip3fvg"><span class="score-name svelte-ip3fvg">Representation</span> <div class="score-bar-small svelte-ip3fvg"><div class="score-fill-small svelte-ip3fvg"></div></div> <span class="score-num svelte-ip3fvg"> </span></div></div> <div class="method-details svelte-ip3fvg"><p class="svelte-ip3fvg"><strong>Key Trade-offs:</strong> </p></div> <!> <!></div>'),YB=Bt('<div class="comparison-overlay svelte-ip3fvg" role="button" tabindex="0"><div class="comparison-modal svelte-ip3fvg" role="dialog" tabindex="-1" aria-labelledby="comparison-title"><div class="comparison-header svelte-ip3fvg"><h2 id="comparison-title" class="svelte-ip3fvg">Method Comparison</h2> <button class="close-button svelte-ip3fvg"></button></div> <div class="comparison-content svelte-ip3fvg"><div class="comparison-grid svelte-ip3fvg"></div></div></div></div>'),GB=Bt(`<div class="container wide-builder"><div class="description"><h1 style="color: black;"><a>approval.vote</a> // <strong>Voting Method Builder</strong></h1> <p class="subtitle svelte-ip3fvg">Mix and match components to design your ideal voting system</p></div> <div class="builder-layout svelte-ip3fvg"><div class="config-panel"><section class="config-section svelte-ip3fvg"><h2 class="svelte-ip3fvg"> Filters</h2> <p class="section-description svelte-ip3fvg">Use these facets to narrow down voting methods. They don't lock in a choice  pick a method on the right when ready.</p> <div class="facet-group svelte-ip3fvg"><h3 class="facet-title svelte-ip3fvg">Election Type <span class="facet-tip svelte-ip3fvg" title="Single-winner methods elect one seat; multi-winner methods elect multiple seats (for councils/assemblies). This choice affects which methods are compatible and whether proportional representation is possible."></span></h3> <div class="facet-grid svelte-ip3fvg"><label class="facet-check svelte-ip3fvg"><input type="checkbox" class="svelte-ip3fvg"/> <span>Single Winner</span></label> <label class="facet-check svelte-ip3fvg"><input type="checkbox" class="svelte-ip3fvg"/> <span>Multi Winner</span></label></div></div> <div class="facet-group svelte-ip3fvg"><h3 class="facet-title svelte-ip3fvg">Ballot Type <span class="facet-tip svelte-ip3fvg" title="How voters express preferences: ChooseX (select candidates), Ranked (order candidates), Score (rate candidates). Different methods require different ballot types."></span></h3> <div class="facet-grid svelte-ip3fvg"></div></div> <!> <div class="facet-group svelte-ip3fvg"><h3 class="facet-title svelte-ip3fvg">Party Structure <span class="facet-tip svelte-ip3fvg" title="Some methods require parties and allocate seats by party vote (e.g., Party List, MMP). Others are candidatebased and work without parties."></span></h3> <div class="facet-grid svelte-ip3fvg"><label class="facet-check svelte-ip3fvg"><input type="checkbox" class="svelte-ip3fvg"/> <span>Requires parties (e.g., Party List, MMP)</span></label> <label class="facet-check svelte-ip3fvg"><input type="checkbox" class="svelte-ip3fvg"/> <span>Candidate-based (no parties required)</span></label></div></div></section></div> <div class="gallery-panel svelte-ip3fvg"><div class="methods-gallery svelte-ip3fvg"><div class="gallery-header svelte-ip3fvg"><h2> Voting Methods</h2> <p class="section-description svelte-ip3fvg"> </p></div> <div class="methods-grid svelte-ip3fvg"></div></div></div> <div class="details-panel svelte-ip3fvg"><div class="result-card svelte-ip3fvg"><h2 class="method-name svelte-ip3fvg"> <!></h2> <!> <!> <!> <!> <!> <!></div></div></div></div> <!>`,1);function IE(e,t){k0(t,!1);const r=It(),i=It(),a=It(),n=It(),o=It(),s=It(),l=It(),c=It(),h=It(),u=It(),p=It(),d=It();let f=It({ballotType:null,limitedChoices:"1",customLimit:3,tabulationMethod:null,numberOfSeats:1,hasParties:!0,canVoteForParties:!0,canVoteForCandidates:!0,hasPrimaries:!1,listType:null,mixedMember:!1,singleWinnerProportion:50,allowNegativeVotes:!1,scoreMin:0,scoreMax:5}),m=It("all"),y=It(["single","multi"]),b=It(["choose-x","ranking","score"]),v=It(["1","custom","unlimited"]);function k(w,x){return w.includes(x)?w.filter(A=>A!==x):[...w,x]}function M(w){return w===1?"single":"multi"}const T=[{id:"choose-x",name:"Choose X",description:"Pick candidates"},{id:"ranking",name:"Ranked",description:"Rank candidates in order of preference"},{id:"score",name:"Score",description:"Give each candidate a numerical score"}],_=[{id:"1",name:"Pick 1",description:"Must select exactly 1 (FPTP)"},{id:"custom",name:"Custom limit",description:"Set your own maximum"},{id:"unlimited",name:"As many as you like",description:"No limit on selections (approval voting)"}],S={fptp:{name:"First Past The Post",shortDescription:"Most votes wins",detailedCritique:'First Past The Post (FPTP) is the most widely used voting system globally, where voters select one candidate and the candidate with the most votes wins. While its simplicity makes it easy to understand and implement, FPTP suffers from severe limitations that can undermine democratic representation. The system is highly susceptible to vote splitting, where similar candidates divide their shared voter base, potentially allowing a less popular candidate to win. This creates the spoiler effect, forcing voters to strategically vote for a "lesser evil" rather than their true preference. FPTP tends to produce two-party dominance over time, as voters abandon third parties to avoid wasting their votes. In multi-candidate races, winners can have surprisingly low vote shares - sometimes under 30% - meaning the majority of voters preferred someone else. The system also leads to gerrymandering concerns and can produce highly disproportionate results when used for legislative elections.',ballotType:"choose-x",choiceLimitation:"1",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:5,honestStrategyResistance:0,strategicStraightforwardness:0,representation:1},isProportional:!1,isSemiProportional:!1,category:"plurality",ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences."},tabulationCritique:"**FPTP:** Simple but suffers from vote splitting and spoiler effects with multiple candidates.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["simple","plurality","majoritarian","single-mark"]},approval:{name:"Approval Voting",shortDescription:"Approve any number of candidates",detailedCritique:"Approval Voting represents a minimal yet powerful reform to plurality voting, allowing voters to select as many candidates as they approve of, with the candidate receiving the most approvals winning. This elegantly simple change eliminates the spoiler effect entirely - voters can support both their favorite candidate and a more viable alternative without harming either. The system encourages honest voting since supporting additional candidates never hurts those you've already selected. Studies and real-world implementations show Approval Voting tends to elect broadly acceptable consensus candidates rather than polarizing figures. It requires no new voting equipment, as it uses the same ballots as plurality voting. The main limitation is the lack of preference expression - you cannot indicate that you prefer one approved candidate over another. However, this simplicity is also a strength, making the system transparent and easy to understand. Approval Voting has been successfully used by the UN, various professional societies, and the cities of Fargo and St. Louis.",usedBy:[{code:"US-ND",name:"Fargo (USA)",flag:""},{code:"US-MO",name:"St. Louis (USA)",flag:""},{code:"UN",name:"United Nations (various committees)",flag:""}],ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:5,honestStrategyResistance:5,strategicStraightforwardness:1,representation:4},isProportional:!1,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**Most Approvals:** Simple and intuitive, encourages honest voting without strategic downsides.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["simple","consensus","binary-choice","spoiler-free"]},"limited-voting-single":{name:"Limited Voting (Single Winner)",shortDescription:"Pick up to X candidates, most votes wins",detailedCritique:"Voters can select up to a specified number of candidates (less than total candidates). The candidate with the most votes wins. Reduces vote splitting compared to FPTP.",ballotType:"choose-x",choiceLimitation:"custom",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:4,honestStrategyResistance:2,strategicStraightforwardness:2,representation:3},isProportional:!1,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-custom":"**Strengths:** Reduces vote splitting compared to FPTP, allows some preference expression. **Weaknesses:** Arbitrary limit may not reflect true preferences, still susceptible to strategic voting."},tabulationCritique:"**Limited Voting (Single Winner):** Allows voters to select multiple candidates but only elects one winner. Can reduce vote splitting when limit is greater than 1.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},irv:{name:"IRV / RCV (Instant Runoff)",shortDescription:"Eliminate lowest, transfer votes",detailedCritique:`Instant Runoff Voting (IRV), also called Ranked Choice Voting (RCV) or Alternate Vote (AV, in the UK). Allows voters to rank candidates in order of preference. If no candidate receives a majority of first-choice votes, the candidate with the fewest votes is eliminated and their voters' ballots are transferred to their next choice. This process continues until someone has a majority. While IRV does eliminate the most basic spoiler effects between similar candidates, it suffers from several paradoxes that can produce counterintuitive results. The system can eliminate centrist candidates who would beat any other candidate head-to-head (the "center squeeze" problem), and in some cases, getting more first-choice votes can actually cause a candidate to lose (non-monotonicity). IRV is also vulnerable to strategic voting - "bullet voting" (only ranking one candidate) can sometimes help your favorite candidate. The sequential elimination process makes results difficult to predict and can take days to tabulate in close races. Despite these flaws, IRV does ensure majority support (among remaining candidates) and allows voters to express preferences.`,usedBy:[{code:"AU",name:"Australia (House of Representatives)",flag:""},{code:"IE",name:"Ireland (Presidential elections)",flag:""},{code:"US",name:"Multiple US cities",flag:""}],ballotType:"ranking",choiceLimitation:"any",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!1,description:"Requires new voting machines and ballot software"},scores:{proportionality:0,simplicity:1,honestStrategyResistance:3,strategicStraightforwardness:4,representation:4},isProportional:!1,isSemiProportional:!1,category:"ranked",ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**IRV:** Good at eliminating spoiler effects but can eliminate Condorcet winners and has center-squeeze problems.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",flowchart:`flowchart TD
    A["Start: Count first-choice votes"] --> B{"Any candidate has<br/>majority (>50%)?"}
    B -->|Yes| C["Winner: Candidate with majority"]
    B -->|No| D["Identify candidate with<br/>fewest first-choice votes"]
    D --> E["Eliminate candidate<br/>with fewest votes"]
    E --> F["Transfer votes to voters'<br/>next ranked choice"]
    F --> G["Recount all remaining votes"]
    G --> H{"Any candidate has<br/>majority (>50%)?"}
    H -->|Yes| I["Winner: Candidate with majority"]
    H -->|No| J{"Only 2 candidates<br/>remain?"}
    J -->|Yes| K["Winner: Candidate with<br/>more votes"]
    J -->|No| D

    style A fill:#e1f5fe
    style C fill:#c8e6c9
    style I fill:#c8e6c9
    style K fill:#c8e6c9`,tags:["ranked","runoff","instant-runoff","elimination","transfers"]},borda:{name:"Borda Count",shortDescription:"Points based on ranking position",detailedCritique:"Rewards broadly acceptable candidates but highly vulnerable to strategic manipulation and compromise.",ballotType:"ranking",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:1,honestStrategyResistance:0,strategicStraightforwardness:0,representation:3},isProportional:!1,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires new voting machines and ballot software"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**Borda:** Rewards broadly acceptable candidates but highly vulnerable to strategic nomination.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["ranked","positional","compromise","strategic-vulnerable","summable"]},condorcet:{name:"Condorcet",shortDescription:"Head-to-head winner if exists",detailedCritique:"Theoretically optimal but can have no winner (Condorcet paradox) requiring complex tie-breaking.",ballotType:"ranking",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:1,honestStrategyResistance:5,strategicStraightforwardness:5,representation:4},isProportional:!1,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires new voting machines and ballot software"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**Condorcet:** Elects the candidate who beats all others head-to-head, but may have no winner in some cases.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["ranked","condorcet-compliant","pairwise","head-to-head","complex"]},"highest-total":{name:"Score Voting",shortDescription:"Sum all scores, highest wins",detailedCritique:"Adds up all scores for each candidate - the candidate with the highest sum wins. Simple. Works best with many candidates and relatively few voters where expressivity helps prevent ties.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!1,description:"Requires new voting machines and ballot software"},scores:{proportionality:0,simplicity:4,honestStrategyResistance:2,strategicStraightforwardness:2,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Normalization issues between voters. When Min/Maxed then becomes approval voting","choose-x-custom":"**Strengths:** Reduces vote splitting compared to FPTP, allows some preference expression. **Weaknesses:** Arbitrary limit may not reflect true preferences."},tabulationCritique:"**Highest Total:** Adds up all scores for each candidate - the candidate with the highest sum wins. Simple. Works best with many candidates and relatively few voters where expressivity helps prevent ties.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["score","cardinal","expressive","simple","summable"]},star:{name:"STAR Voting",shortDescription:"Score then automatic runoff",detailedCritique:"Combines benefits of score voting with runoff security, eliminating strategic concerns. The scoring phase works best with many candidates and relatively few voters, while the runoff provides decisive results.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!1,description:"Requires new voting machines and ballot software"},scores:{proportionality:0,simplicity:4,honestStrategyResistance:3,strategicStraightforwardness:4,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**STAR:** Combines benefits of score voting with runoff security, eliminating strategic concerns. The scoring phase works best with many candidates and relatively few voters, while the runoff provides decisive results.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["score","cardinal","hybrid","runoff","two-phase","consensus","spoiler-resistant"]},"block-voting":{name:"Block Voting",shortDescription:"Choose one, top candidates win multiple seats",detailedCritique:'Also called "Plurality-at-large". Voters choose one candidate, and the candidates with the most votes win seats. Simple but tends to give all seats to the most popular party or faction.',ballotType:"choose-x",choiceLimitation:"1",minSeats:2,maxSeats:"unlimited",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:5,honestStrategyResistance:0,strategicStraightforwardness:0,representation:1},isProportional:!1,isSemiProportional:!1,category:"plurality",ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences."},tabulationCritique:"**Block Voting:** Simple plurality system for multiple seats. Tends to give all seats to the most popular party - very poor minority representation.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",tags:["simple","majoritarian","plurality","single-mark","bloc-voting","sweep-prone"]},"block-approval":{name:"Block Approval Voting",shortDescription:"Approve any number, top candidates win multiple seats",detailedCritique:"Simple extension of approval to multiple winners but provides no proportional representation.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:2,maxSeats:"unlimited",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:5,honestStrategyResistance:5,strategicStraightforwardness:1,representation:2},isProportional:!1,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**Block Approval:** Simple extension of approval voting to multiple seats. Better minority representation than Block Voting.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},"limited-voting":{name:"Limited Voting",shortDescription:"Voters pick fewer candidates than seats available",detailedCritique:'Also called "Block Voting with limitations." Voters can select up to a specific number of candidates (less than the total seats). Candidates with the most votes win. Provides some minority representation but not fully proportional.',ballotType:"choose-x",choiceLimitation:"custom",minSeats:2,maxSeats:"unlimited",scores:{proportionality:0,simplicity:4,honestStrategyResistance:1,strategicStraightforwardness:2,representation:3},isProportional:!1,isSemiProportional:!0,category:"approval",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},ballotTypeCritique:{"choose-x-custom":"**Strengths:** Reduces vote splitting compared to FPTP, allows some preference expression. **Weaknesses:** Arbitrary limit may not reflect true preferences, still susceptible to strategic voting."},tabulationCritique:"**Limited Voting:** Provides some minority representation but not fully proportional. Strategic nomination is important.",proportionalityDetails:"**Semi-Proportional:** Provides some minority representation but not full proportional representation."},"cumulative-voting":{name:"Cumulative Voting",shortDescription:"Voters get points equal to seats and distribute them freely",detailedCritique:"Voters receive a number of points equal to the number of seats and can distribute them among candidates however they choose, including giving multiple points to the same candidate. Semi-proportional system that allows minority representation.",ballotType:"choose-x",choiceLimitation:"custom",minSeats:2,maxSeats:"unlimited",scores:{proportionality:0,simplicity:3,honestStrategyResistance:1,strategicStraightforwardness:2,representation:3},isProportional:!1,isSemiProportional:!0,category:"approval",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},ballotTypeCritique:{"choose-x-custom":"**Strengths:** Reduces vote splitting compared to FPTP, allows some preference expression. **Weaknesses:** Arbitrary limit may not reflect true preferences, still susceptible to strategic voting."},tabulationCritique:"**Cumulative Voting:** Allows voters to distribute points strategically. Semi-proportional system that can provide minority representation with proper strategy.",proportionalityDetails:"**Semi-Proportional:** Provides some minority representation but not full proportional representation."},sntv:{name:"SNTV (Single Non-Transferable Vote)",shortDescription:"Semi-proportional for choose-one ballots",detailedCritique:"Semi-proportional method for choose-one ballots. Requires strategic nomination by parties to achieve proportionality - too many candidates splits the vote, too few wastes votes.",ballotType:"choose-x",choiceLimitation:"1",minSeats:2,maxSeats:"unlimited",scores:{proportionality:3,simplicity:5,honestStrategyResistance:2,strategicStraightforwardness:2,representation:3},isProportional:!1,isSemiProportional:!0,category:"approval",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences."},tabulationCritique:"**SNTV:** Semi-proportional method for choose-one ballots. Requires strategic nomination by parties to achieve proportionality - too many candidates splits the vote, too few wastes votes.",proportionalityDetails:"**Semi-Proportional:** Provides some minority representation but not full proportional representation."},"satisfaction-approval":{name:"Satisfaction Approval",shortDescription:"Semi-proportional splits votes equally",detailedCritique:"Semi-proportional system that splits each vote equally between all approved candidates. More proportional than block voting but requires strategic coordination - voters must know how many seats their party deserves and vote for exactly that many candidates. Vulnerable to 'wipeout' if strategy fails.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:2,maxSeats:"unlimited",scores:{proportionality:3,simplicity:5,honestStrategyResistance:3,strategicStraightforwardness:3,representation:4},isProportional:!1,isSemiProportional:!0,category:"approval",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**Satisfaction Approval:** Semi-proportional system that splits each vote equally between all approved candidates. More proportional than block voting but requires strategic coordination - voters must know how many seats their party deserves and vote for exactly that many candidates. Vulnerable to 'wipeout' if strategy fails.",proportionalityDetails:"**Semi-Proportional:** Provides some minority representation but not full proportional representation."},spav:{name:"SPAV (Sequential Proportional Approval)",shortDescription:"Proportional approval using sequential selection",detailedCritique:"Sequential Proportional Approval Voting that encourages diverse representation. Much more practical to implement than the theoretical PAV optimization.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:4,honestStrategyResistance:3,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**SPAV:** Sequential Proportional Approval Voting that encourages diverse representation. Much more practical to implement than the theoretical PAV optimization.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},stv:{name:"STV (Single Transferable Vote)",shortDescription:"Proportional ranked choice voting",detailedCritique:"Provides proportional representation with ranked ballots, maintaining local representation while ensuring diversity.",usedBy:[{code:"IE",name:"Ireland (Dil ireann)",flag:""},{code:"MT",name:"Malta",flag:""},{code:"AU",name:"Australia (Senate)",flag:""}],ballotType:"ranking",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:1,honestStrategyResistance:3,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"ranked",ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**STV:** Provides proportional representation with ranked ballots, maintaining local representation while ensuring diversity.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability.",tags:["proportional","ranked","transfers","quota-based","complex","candidate-based","surplus-transfer"]},"cpo-stv":{name:"CPO-STV",shortDescription:"Condorcet-refined proportional ranked choice",detailedCritique:"Comparison of Pairs of Outcomes STV combines proportional representation with Condorcet-style optimality. More theoretically sound than traditional STV but significantly more complex to compute and explain.",ballotType:"ranking",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:1,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires specialized software for complex calculations"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**CPO-STV:** Uses Condorcet-style comparisons to find the optimal proportional outcome. More theoretically sound than standard STV but requires exponentially complex calculations.",proportionalityDetails:"**Proportional Representation:** Ensures optimal proportional outcomes by comparing all possible seat allocations, though at the cost of computational complexity."},"schulze-stv":{name:"Schulze STV",shortDescription:"Schulze method extended to proportional representation",detailedCritique:"Applies the Schulze method principles to multi-winner elections for proportional representation. Eliminates many strategic voting problems but is extremely complex to calculate and verify.",ballotType:"ranking",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:1,honestStrategyResistance:5,strategicStraightforwardness:4,representation:5},isProportional:!0,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires specialized software for very complex calculations"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**Schulze STV:** Extends the Schulze method to achieve proportional representation. Excellent theoretical properties but extremely complex implementation.",proportionalityDetails:"**Proportional Representation:** Provides optimal proportional representation using Schulze method principles, ensuring strong Condorcet-style criteria are met."},"meek-stv":{name:"Meek STV",shortDescription:"STV with iterative reweighting",detailedCritique:"Uses iterative reweighting instead of fractional vote transfers. More mathematically elegant than traditional STV and avoids some anomalies, but harder to verify by hand.",ballotType:"ranking",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:2,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires new software for iterative calculations"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**Meek STV:** Uses iterative reweighting instead of fractional transfers. More mathematically sound than traditional STV but requires computer calculation.",proportionalityDetails:"**Proportional Representation:** Achieves excellent proportional representation through continuous reweighting, avoiding some traditional STV anomalies."},"pr-borda":{name:"PR-Borda",shortDescription:"Proportional representation using Borda count",detailedCritique:"Allocates seats proportionally based on Borda count scores. Rewards consensus candidates and provides proportional representation, but highly vulnerable to strategic nomination and cloning.",ballotType:"ranking",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:4,simplicity:1,honestStrategyResistance:0,strategicStraightforwardness:0,representation:4},isProportional:!0,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires new software for Borda calculations and proportional allocation"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**PR-Borda:** Calculates Borda scores and allocates seats proportionally. Simple concept but extremely vulnerable to strategic nomination and candidate cloning.",proportionalityDetails:"**Proportional Representation:** Provides proportional representation based on Borda scores, rewarding broadly acceptable candidates across party lines."},"wright-stv":{name:"Wright STV",shortDescription:"STV variant with refined transfer rules",detailedCritique:"A variant of STV that uses different vote transfer mechanisms to reduce some strategic voting opportunities. More complex than traditional STV but with better theoretical properties.",ballotType:"ranking",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:1,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"ranked",votingMachineCompatibility:{existingMachines:!1,description:"Requires specialized software for refined transfer calculations"},ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**Wright STV:** Uses refined transfer rules to improve upon traditional STV. Better theoretical properties but more complex implementation and verification.",proportionalityDetails:"**Proportional Representation:** Achieves proportional representation with improved transfer mechanisms that reduce some strategic voting opportunities."},"party-list-pr":{name:"Party List PR",shortDescription:"Proportional seats by party vote share. Can use Open Lists (voters pick candidates within a party) or Closed Lists (party sets candidate order).",detailedCritique:"Pure proportional representation where voters choose parties, and seats are allocated based on each party's share of the vote. Can be Open List (voters choose specific candidates within a party, increasing voter choice but potentially creating intraparty competition), Closed List (party decides candidate order, strengthening cohesion but reducing voter choice), or Flexible/Hybrid List (voters may either accept party order or elevate specific candidates). Ensures fair representation but can reduce individual candidate accountability. Used in many European countries like the Netherlands, Israel, and Finland.",requiresParties:!0,usedBy:[{code:"NL",name:"Netherlands",flag:""},{code:"IL",name:"Israel",flag:""},{code:"SE",name:"Sweden",flag:""}],ballotType:"choose-x",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:4,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"mixed",hasVariants:!0,variants:{listType:!0},ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences.","choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**Party List PR:** Direct proportional representation where parties receive seats based on their vote share. Achieves excellent proportionality but may weaken the link between voters and individual representatives. Works best with diverse multi-party systems.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability.",listTypeCritique:{closed:"**Closed Lists:** Give parties full control over candidate selection and ordering, which can strengthen party discipline but reduce voter choice.",open:"**Open Lists:** Allow voters to choose specific candidates within parties, increasing voter choice but potentially fragmenting party unity.",flexible:"**Flexible Lists:** Balance party control with voter choice, allowing both party and candidate votes to influence outcomes."},primaryCritique:{withPrimaries:"**Primary Elections:** Increase voter choice and party democracy but can favor extreme candidates, reduce general election competitiveness, and increase campaign costs. May lead to more polarized candidates who appeal to party bases rather than general electorate.",withoutPrimaries:"**No Primaries:** Parties select candidates internally (conventions, appointments, etc.). This gives party leadership more control but may reduce grassroots democracy and voter input in candidate selection."}},mmp:{name:"MMP (Mixed Member Proportional)",shortDescription:"Combines districts with party lists. Party lists may be Open or Closed depending on implementation.",detailedCritique:'Hybrid system combining local districts with party lists. Voters cast two ballots: one for a local representative and one for a party. Party lists can be Open (voters can select candidates within the party) or Closed (party sets the order). Additional "top-up" seats ensure overall proportionality while preserving local representation. Successfully used in Germany, New Zealand, and Scotland.',requiresParties:!0,ballotType:"choose-x",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:3,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"mixed",hasVariants:!0,variants:{listType:!0,mixedMember:!0},ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences.","choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**MMP:** Combines the best of both worlds - local accountability through districts and fair representation through proportional top-up seats. More complex to implement but provides excellent balance between local representation and proportionality. May create two classes of representatives.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability.",listTypeCritique:{closed:"**Closed Lists:** Give parties full control over candidate selection and ordering, which can strengthen party discipline but reduce voter choice.",open:"**Open Lists:** Allow voters to choose specific candidates within parties, increasing voter choice but potentially fragmenting party unity.",flexible:"**Flexible Lists:** Balance party control with voter choice, allowing both party and candidate votes to influence outcomes."},primaryCritique:{withPrimaries:"**Primary Elections:** Increase voter choice and party democracy but can favor extreme candidates, reduce general election competitiveness, and increase campaign costs. May lead to more polarized candidates who appeal to party bases rather than general electorate.",withoutPrimaries:"**No Primaries:** Parties select candidates internally (conventions, appointments, etc.). This gives party leadership more control but may reduce grassroots democracy and voter input in candidate selection."}},"block-score":{name:"Block Score Voting",shortDescription:"Highest total scores win multiple seats",detailedCritique:"Multi-winner extension of score voting where candidates with the highest total scores win seats. Simple but provides no proportional representation.",ballotType:"score",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:0,simplicity:5,honestStrategyResistance:2,strategicStraightforwardness:2,representation:2},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Block Score Voting:** Simple extension of score voting to multiple winners. Candidates with highest total scores win seats, but provides no proportional representation.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},"equal-shares":{name:"Method of Equal Shares",shortDescription:"Equal budget per voter",detailedCritique:"Ensures each voter gets an equal 'budget' of representation. Excellent proportionality and fairness, but complex for voters to understand. The detailed scoring works best with many candidates and relatively few voters.",ballotType:"score",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:3,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Method of Equal Shares:** Ensures each voter gets an equal 'budget' of representation. Excellent proportionality and fairness, but complex for voters to understand. The detailed scoring works best with many candidates and relatively few voters.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},pav:{name:"PAV (Proportional Approval Voting)",shortDescription:"Optimal approval-based proportional representation",detailedCritique:"The theoretical optimum for proportional representation using approval ballots. Maximizes voter satisfaction but requires complex optimization algorithms that are computationally intensive for large elections.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:2,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**PAV:** The theoretical optimum for proportional representation using approval ballots. Maximizes voter satisfaction but requires complex optimization algorithms that are computationally intensive for large elections.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability.",tags:["proportional","approval","optimization","theoretically-optimal","computationally-complex","np-hard"]},"star-pr":{name:"STAR-PR",shortDescription:"Proportional STAR voting",detailedCritique:"Extends STAR voting to multi-winner elections by using proportional allocation. Combines the benefits of score voting expressiveness with proportional representation, but adds complexity to the tabulation process.",ballotType:"score",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:3,honestStrategyResistance:4,strategicStraightforwardness:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**STAR-PR:** Extends STAR voting to multi-winner elections by using proportional allocation. Combines the benefits of score voting expressiveness with proportional representation, but adds complexity to the tabulation process.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},"allocated-score":{name:"Allocated Score",shortDescription:"Practical proportional score voting",detailedCritique:"A practical implementation of proportional score voting that allocates candidates based on weighted scores. Simpler than Method of Equal Shares while still achieving good proportionality.",ballotType:"score",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:4,simplicity:4,honestStrategyResistance:3,strategicStraightforwardness:3,representation:4},isProportional:!0,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Allocated Score:** A practical approach to proportional score voting that's easier to implement than Method of Equal Shares while maintaining good proportional outcomes.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},"range-voting":{name:"Range Voting",shortDescription:"Pure score voting without runoff",detailedCritique:"Simple score voting where the candidate with the highest total score wins. More expressive than approval voting but vulnerable to strategic exaggeration and normalization issues between voters.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:4,honestStrategyResistance:2,strategicStraightforwardness:2,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Range Voting:** Simple score voting where the candidate with the highest total score wins. More expressive than approval voting but vulnerable to strategic exaggeration and normalization issues between voters.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},"3-2-1-voting":{name:"3-2-1 Voting",shortDescription:"Score 3-2-1, advance top 2, pick winner",detailedCritique:"Voters score candidates as Good (3), OK (2), or Bad (1). The two highest-scoring candidates advance to a runoff based on who is rated higher by more voters. Simple to understand and resistant to tactical voting.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:4,honestStrategyResistance:4,strategicStraightforwardness:3,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**3-2-1 Voting:** Simple to understand and resistant to tactical voting. Uses a constrained score range that's easy for voters to grasp.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},"majority-judgment":{name:"Majority Judgment",shortDescription:"Winner has highest median score",detailedCritique:"Uses the median (middle) score for each candidate rather than totals or averages. Highly resistant to strategic manipulation since extreme scores don't affect the median. Can lead to ties requiring complex tie-breaking rules.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:3,honestStrategyResistance:2,strategicStraightforwardness:1,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Majority Judgment:** Uses the median (middle) score for each candidate rather than totals or averages. This makes it highly resistant to strategic manipulation since extreme scores (very high or very low) don't affect the median. However, it can lead to ties when candidates have the same median, requiring complex tie-breaking rules. The detailed scoring is most valuable when there are many candidates to differentiate.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},"top-two-runoff":{name:"Top-Two Runoff",shortDescription:"Top 2 candidates advance to runoff election",detailedCritique:"Two-round system where if no candidate gets a majority, the top two candidates compete in a second election. Simple and familiar but can eliminate popular candidates in the first round.",ballotType:"choose-x",choiceLimitation:"1",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:4,honestStrategyResistance:1,strategicStraightforwardness:2,representation:2},isProportional:!1,isSemiProportional:!1,category:"plurality",ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences."},tabulationCritique:"**Top-Two Runoff:** Ensures the winner has majority support in the final round, but can eliminate popular candidates who don't make the top two. Technically not a different tabulation method, but just block voting then FPTP",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"}}},I=[{id:"closed",name:"Closed List",description:"Voters vote for parties, party decides candidate order"},{id:"open",name:"Open List",description:"Voters vote for individual candidates within parties"},{id:"flexible",name:"Flexible List",description:"Voters can vote for party or individual candidates"}];let V=It([]);function N(w){const x=([at,lt])=>lt.ballotType===w.ballotType,A=([at,lt])=>lt.choiceLimitation==="any"||lt.choiceLimitation===w.limitedChoices,R=([at,lt])=>C(m)==="all"?!0:(M(w.numberOfSeats),C(m)==="single"?lt.minSeats<=1:lt.maxSeats!==1),j=([at,lt])=>C(m)==="all"?!0:w.numberOfSeats>=lt.minSeats&&(lt.maxSeats==="unlimited"||w.numberOfSeats<=lt.maxSeats);return Object.entries(S).filter(x).filter(A).filter(R).filter(j).map(([at])=>at)}let P=It([]);function Y(w){if(!C(y).length)return!1;const x=w.maxSeats===1?"single":"multi";return C(y).includes(x)}function q(w){return C(b).length===0?!0:C(b).includes(w.ballotType)}function $(w){return w.ballotType!=="choose-x"||C(v).length===0||w.choiceLimitation==="any"?!0:C(v).includes(w.choiceLimitation)}let E=It(["party-required","no-party-required"]);function B(w){const x=!!w.requiresParties;return!!(C(E).length===0||x&&C(E).includes("party-required")||!x&&C(E).includes("no-party-required"))}function D(w){const x=S[w];if(x)if(Bi(f,C(f).tabulationMethod=w),Bi(f,C(f).ballotType=x.ballotType),x.ballotType==="choose-x"?Bi(f,C(f).limitedChoices=x.choiceLimitation==="any"?"unlimited":x.choiceLimitation):Bi(f,C(f).limitedChoices="unlimited"),x.maxSeats===1)Bi(f,C(f).numberOfSeats=1);else{const A=typeof x.minSeats=="number"?x.minSeats:2;Bi(f,C(f).numberOfSeats=C(f).numberOfSeats>1?C(f).numberOfSeats:Math.max(2,A))}}function F(w){if(!w.tabulationMethod||!w.ballotType)return"Choose a voting method";if(!w.tabulationMethod){if(w.ballotType==="choose-x"){if(w.limitedChoices==="1")return"First Past The Post";if(w.limitedChoices==="unlimited")return"Approval Voting";if(w.limitedChoices==="custom")return`Limited Voting (${w.customLimit})`}return"Choose a voting method"}const x=S[w.tabulationMethod||""];if(!x)return"Unknown Method";let A=x.name;if(w.listType&&["party-list-pr","mmp"].includes(w.tabulationMethod)){const R=I.find(j=>j.id===w.listType);R&&(A=`${R.name} ${A}`)}if(w.tabulationMethod==="mmp"&&w.mixedMember){const R=w.singleWinnerProportion,j=100-R;A+=` (${R}% districts, ${j}% list)`}return w.limitedChoices==="custom"&&w.customLimit!==3&&(A.includes(`(${w.customLimit})`)||(A+=` (${w.customLimit})`)),A}function X(w){if(!w.ballotType)return"";let x="";const A=T.find(R=>R.id===w.ballotType);if(A&&(x+=`**Ballot Type:** ${A.description}`,w.ballotType==="score"&&(x+=` (${w.scoreMin} to ${w.scoreMax}`,w.allowNegativeVotes&&(x+=", negative scores allowed. Negative values "),x+="). Score voting works best with many candidates and relatively few voters, where the expressivity helps prevent ties"),x+=`

`),w.limitedChoices&&w.limitedChoices!=="unlimited")if(w.limitedChoices==="custom")x+=`**Choice Limit:** Maximum of ${w.customLimit} candidate${w.customLimit===1?"":"s"}

`;else{const R=_.find(j=>j.id===w.limitedChoices);R&&(x+=`**Choice Limit:** ${R.description}

`)}if(w.tabulationMethod){const R=C(V).find(at=>at.id===w.tabulationMethod);R&&(x+=`**Voting Method:** ${R.description}

`);const j=S[w.tabulationMethod||""];if(j&&j.votingMachineCompatibility){const at=j.votingMachineCompatibility.existingMachines?"":"";x+=`**Voting Machines:** ${at} ${j.votingMachineCompatibility.description}

`}}if(w.numberOfSeats===1)x+=`**Single-Winner Election:** Electing 1 seat

`;else{x+=`**Multi-Winner Election:** Electing ${w.numberOfSeats} seats

`;let R="**Party Structure:** Election has political parties. ";if(w.canVoteForParties&&w.canVoteForCandidates?R+="Voters can choose both parties and individual candidates.":w.canVoteForParties?R+="Voters choose parties only.":w.canVoteForCandidates&&(R+="Voters choose individual candidates within parties."),w.hasPrimaries?R+=" Parties select candidates through primary elections.":R+=" Parties select candidates through internal processes (conventions, appointments, etc.).",x+=R+`

`,["party-list-pr","mmp"].includes(w.tabulationMethod||"")){if(w.listType){const j=I.find(at=>at.id===w.listType);j&&(x+=`**List Type:** ${j.description}

`)}if(w.tabulationMethod==="mmp"&&w.mixedMember){const j=w.singleWinnerProportion,at=100-j;x+=`**Mixed System:** ${j}% of seats elected in single-winner districts, ${at}% from party lists to ensure proportionality

`}}}return x.trim()}function et(w){if(!w.ballotType||!w.tabulationMethod)return"";const x=S[w.tabulationMethod||""];if(!x)return"";let A="";if(x.ballotTypeCritique){let R=w.ballotType;w.ballotType==="choose-x"&&(R=`choose-x-${w.limitedChoices||"unlimited"}`);const j=x.ballotTypeCritique[R]||x.ballotTypeCritique[w.ballotType]||x.ballotTypeCritique["choose-x-unlimited"];j&&(A+="**Ballot Type Analysis:** "+j+`

`)}if(x.tabulationCritique&&(A+=x.tabulationCritique+`

`),w.numberOfSeats>1&&x.proportionalityDetails){if(A+=x.proportionalityDetails,w.hasParties&&["party-list-pr","mmp"].includes(w.tabulationMethod||"")){if(A+=`

**List Method Types:**

`,A+=`**Open List:** Voters can choose specific candidates within a party. This maximizes voter choice and allows popular candidates to rise regardless of party ranking. However, it can lead to intra-party competition, potentially fragmenting party unity and making campaigns more expensive as candidates compete against their own party members.

`,A+=`**Closed List:** The party determines the order of candidates, and voters can only vote for the party as a whole. This strengthens party discipline and cohesion, ensures balanced representation (parties can guarantee diversity), and simplifies voting. However, it reduces voter choice and can lead to party elites having too much control over who gets elected.

`,A+=`**Hybrid/Flexible List:** Combines elements of both systems. Voters can either vote for the party (accepting its ranking) or for specific candidates. If enough voters choose a candidate, they can move up the list. This balances party cohesion with voter choice, though it adds complexity to both voting and vote counting.

`,w.listType&&x.listTypeCritique){const R=x.listTypeCritique[w.listType];R&&(A+="**Your Selected "+(w.listType==="flexible"?"Flexible":w.listType.charAt(0).toUpperCase()+w.listType.slice(1))+" List System:** "+R.replace(/^\*\*[^:]+:\*\*\s*/,""))}}else if(w.listType&&x.listTypeCritique){const R=x.listTypeCritique[w.listType];R&&(A+=`

`+R)}if(w.tabulationMethod==="mmp"&&w.mixedMember){A+=`

`;const R=w.singleWinnerProportion;R>70?A+="**High District Proportion:** Maintains strong local representation but may reduce proportionality effectiveness.":R<30?A+="**High List Proportion:** Maximizes proportionality but may weaken local representation and accountability.":A+="**Balanced Mixed System:** Good compromise between local representation and proportionality."}if(w.hasParties&&x.primaryCritique){A+=`

`;const R=w.hasPrimaries?"withPrimaries":"withoutPrimaries",j=x.primaryCritique[R];j&&(A+=j)}}return A.trim()}function J(w){const x={proportionality:0,simplicity:0,honestStrategyResistance:0,strategicStraightforwardness:0,representation:0};if(!w.ballotType||!w.tabulationMethod)return x;const A=S[w.tabulationMethod||""];if(!A)return x;const R={...A.scores};return w.numberOfSeats>1&&w.tabulationMethod==="block-approval"&&(R.representation=2),w.limitedChoices==="1"&&w.ballotType==="choose-x"&&(R.honestStrategyResistance=0,R.strategicStraightforwardness=0,R.representation=1),w.numberOfSeats===1&&(R.proportionality=0),R}function Ct(w){if(w.numberOfSeats<=1)return!1;const x=S[w.tabulationMethod||""];return(x==null?void 0:x.isProportional)||!1}let pt=It(null);function wt(w){$t(pt,C(pt)===w?null:w)}function mt(){$t(pt,null)}function gt(w){w.key==="Escape"&&mt()}let yt=It(!1),Ft=It([]);function Pt(w){$t(Ft,w.filter(x=>x in S)),$t(yt,!0)}function Tt(){$t(yt,!1),$t(Ft,[])}function zt(w){if(!S[w.tabulationMethod||""]||!w.tabulationMethod)return[];const A=N(w),R=w.tabulationMethod,j=H=>A.filter(Ot=>H(S[Ot])),at=H=>A.filter(Ot=>{var Ht;return((Ht=S[Ot].tags)==null?void 0:Ht.includes(H))||!1}),lt=H=>A.filter(Ot=>H.some(Ht=>{var kt;return((kt=S[Ot].tags)==null?void 0:kt.includes(Ht))||!1}));return[{methods:j(H=>H.ballotType==="score"&&H.isProportional),title:"Proportional Score Methods",description:"All provide proportional representation with score/approval ballots but use different algorithms"},{methods:j(H=>H.ballotType==="score"&&H.maxSeats!==1),title:"Multi-Winner Score Methods",description:"Different approaches to multi-winner elections with score ballots - from simple block voting to complex proportional systems"},{methods:j(H=>H.ballotType==="score"&&H.maxSeats===1),title:"Single-Winner Score Methods",description:"Different ways to count score ballots - from simple totals to complex runoffs"},{methods:j(H=>H.ballotType==="choose-x"&&H.maxSeats===1),title:"Single-Winner Choose-X Methods",description:"Different approaches to single-winner elections with choose-X ballots"},{methods:j(H=>H.ballotType==="choose-x"&&H.isProportional),title:"Approval-Based Proportional Methods",description:"Ways to achieve proportional representation using approval ballots"},{methods:j(H=>H.ballotType==="choose-x"),title:"Choose-X Methods",description:"Different ways to count choose-X ballots - from simple plurality to complex proportional systems"},{methods:j(H=>H.ballotType==="choose-x"&&H.maxSeats!==1),title:"Multi-Winner Choose-X Methods",description:"Different approaches to multi-winner elections with choose-X ballots - from simple block voting to proportional systems"},{methods:j(H=>H.ballotType==="ranking"),title:"Ranked Choice Methods",description:"Different algorithms for counting ranked ballots"},{methods:j(H=>H.isProportional),title:"Proportional Methods",description:"All methods that achieve proportional representation"},{methods:at("simple"),title:"Simple Methods",description:"Easy to understand and implement voting methods"},{methods:at("runoff"),title:"Runoff-Based Methods",description:"Methods that use some form of runoff or elimination process"},{methods:at("consensus"),title:"Consensus-Building Methods",description:"Methods that tend to elect broadly acceptable candidates"},{methods:at("proportional"),title:"Proportional Methods (Tagged)",description:"All methods tagged as proportional"},{methods:lt(["computationally-complex","optimization"]),title:"Computationally Complex Methods",description:"Methods that require significant computation or optimization"}].filter(H=>H.methods.includes(R)&&H.methods.length>1)}let Yt=It(!1);g0(()=>{Yu.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose"}),$t(Yt,!0)});async function Te(w,x){if(C(Yt))try{const{svg:A}=await Yu.render(`flowchart-${Date.now()}`,x);w.innerHTML=A}catch(A){console.error("Error rendering flowchart:",A),w.innerHTML="<p>Error rendering flowchart</p>"}}let Jt=It();le(()=>C(f),()=>{$t(r,M(C(f).numberOfSeats))}),le(()=>C(f),()=>{$t(i,C(f).ballotType==="ranking")}),le(()=>C(f),()=>{$t(a,C(f).ballotType==="choose-x")}),le(()=>C(f),()=>{$t(n,C(f).ballotType==="score")}),le(()=>C(f),()=>{$t(o,C(f).numberOfSeats>1)}),le(()=>(C(f),C(m)),()=>{const w=N(C(f));C(m),$t(V,w.map(x=>({id:x,name:S[x].name,description:S[x].shortDescription})))}),le(()=>(C(y),C(b),C(v),C(E)),()=>{C(y),C(b),C(v),C(E),$t(P,Object.entries(S).filter(([w,x])=>!!x&&!!x.name).filter(([w,x])=>Y(x)).filter(([w,x])=>q(x)).filter(([w,x])=>$(x)).filter(([w,x])=>B(x)).map(([w,x])=>({id:w,name:x.name,shortDescription:x.shortDescription,category:x.category,isProportional:x.isProportional,isSemiProportional:x.isSemiProportional,ballotType:x.ballotType,choiceLimitation:x.choiceLimitation,minSeats:x.minSeats,maxSeats:x.maxSeats,recommended:["star","approval","pav","spav","star-pr","equal-shares"].includes(w),redFlag:["fptp","block-voting","borda","pr-borda","cpo-stv","schulze-stv","meek-stv"].includes(w)})))}),le(()=>C(f),()=>{$t(s,F(C(f)))}),le(()=>C(f),()=>{$t(l,X(C(f)))}),le(()=>C(f),()=>{$t(c,et(C(f)))}),le(()=>C(f),()=>{$t(h,J(C(f)))}),le(()=>C(f),()=>{$t(u,S[C(f).tabulationMethod||""])}),le(()=>C(u),()=>{var w;$t(p,(w=C(u))==null?void 0:w.flowchart)}),le(()=>C(u),()=>{var w;$t(d,((w=C(u))==null?void 0:w.usedBy)||[])}),le(()=>(C(Jt),C(p),C(Yt)),()=>{C(Jt)&&C(p)&&C(Yt)&&Te(C(Jt),C(p))}),S0(),f0();var di=GB();L0(w=>{var x=vB();M0.title="Voting Method Builder - Create Your Custom Voting System - approval.vote",At(w,x)}),Dt("keydown",hh,gt),Dt("click",hh,mt);var Rr=ch(di),We=W(Rr),Dr=W(We),fi=W(Dr);Cr(2),z(Dr),Cr(2),z(We);var da=U(We,2),gi=W(da),Bn=W(gi),Or=U(W(Bn),4),xr=U(W(Or),2),He=W(xr),je=W(He);Pi(je),Cr(2),z(He);var fa=U(He,2),mi=W(fa);Pi(mi),Cr(2),z(fa),z(xr),z(Or);var yi=U(Or,2),bi=U(W(yi),2);Ei(bi,5,()=>T,$i,(w,x)=>{var A=_B(),R=W(A);Pi(R);var j=U(R,2),at=W(j,!0);z(j),z(A),De(lt=>{Fi(R,lt),Wt(at,(C(x),tt(()=>C(x).name)))},[()=>(C(b),C(x),tt(()=>C(b).includes(C(x).id)))]),Dt("change",R,()=>$t(b,k(C(b),C(x).id))),At(w,A)}),z(bi),z(yi);var ga=U(yi,2);{var xi=w=>{var x=CB(),A=U(W(x),2);Ei(A,5,()=>_,$i,(R,j)=>{var at=wB(),lt=W(at);Pi(lt);var xt=U(lt,2),H=W(xt,!0);z(xt),z(at),De(Ot=>{Fi(lt,Ot),Wt(H,(C(j),tt(()=>C(j).name)))},[()=>(C(v),C(j),tt(()=>C(v).includes(C(j).id)))]),Dt("change",lt,()=>$t(v,k(C(v),C(j).id))),At(R,at)}),z(A),Cr(2),z(x),At(w,x)};Vt(ga,w=>{C(b),tt(()=>C(b).includes("choose-x"))&&w(xi)})}var Ir=U(ga,2),Me=U(W(Ir),2),Ve=W(Me),Nr=W(Ve);Pi(Nr),Cr(2),z(Ve);var vi=U(Ve,2),ma=W(vi);Pi(ma),Cr(2),z(vi),z(Me),z(Ir),z(Bn),z(gi);var vr=U(gi,2),qr=W(vr),ya=W(qr),_r=U(W(ya),2),Bo=W(_r);z(_r),z(ya);var En=U(ya,2);Ei(En,5,()=>C(P),$i,(w,x)=>{var A=MB();let R;var j=W(A),at=W(j),lt=W(at,!0);z(at);var xt=U(at,2),H=W(xt);{var Ot=Gt=>{var Re=kB();At(Gt,Re)};Vt(H,Gt=>{C(x),tt(()=>C(x).isProportional)&&Gt(Ot)})}var Ht=U(H,2);{var kt=Gt=>{var Re=SB();At(Gt,Re)};Vt(Ht,Gt=>{C(x),tt(()=>C(x).recommended)&&Gt(kt)})}var se=U(Ht,2);{var Ae=Gt=>{var Re=TB();At(Gt,Re)};Vt(se,Gt=>{C(x),tt(()=>C(x).redFlag)&&Gt(Ae)})}z(xt),z(j);var Pe=U(j,2),ar=W(Pe,!0);z(Pe),z(A),De(Gt=>{R=Io(A,1,"method-card svelte-ip3fvg",null,R,Gt),Wt(lt,(C(x),tt(()=>C(x).name))),Wt(ar,(C(x),tt(()=>C(x).shortDescription)))},[()=>({selected:C(f).tabulationMethod===C(x).id})]),Dt("click",A,()=>D(C(x).id)),At(w,A)}),z(En),z(qr),z(vr);var jt=U(vr,2),ir=W(jt),ba=W(ir),xa=W(ba),va=U(xa);{var $n=w=>{var x=LB();At(w,x)};Vt(va,w=>{C(f),tt(()=>Ct(C(f)))&&w($n)})}z(ba);var _a=U(ba,2);{var Eo=w=>{var x=PB(),A=U(W(x),2),R=W(A),j=W(R),at=W(j),lt=W(at);z(at);var xt=U(at,2),H=W(xt),Ot=U(H,2),Ht=W(Ot);z(Ot),z(xt),z(j);var kt=U(j,2);{var se=Z=>{var we=AB();At(Z,we)};Vt(kt,Z=>{C(pt)==="proportionality"&&Z(se)})}z(R);var Ae=U(R,2),Pe=W(Ae),ar=W(Pe),Gt=W(ar);z(ar);var Re=U(ar,2),Ca=W(Re),wi=U(Ca,2),ka=W(wi);z(wi),z(Re),z(Pe);var Sa=U(Pe,2);{var Fo=Z=>{var we=BB();At(Z,we)};Vt(Sa,Z=>{C(pt)==="simplicity"&&Z(Fo)})}z(Ae);var Ci=U(Ae,2),Ta=W(Ci),zr=W(Ta),ki=W(zr);z(zr);var Nn=U(zr,2),Si=W(Nn),qn=U(Si,2),Ma=W(qn);z(qn),z(Nn),z(Ta);var La=U(Ta,2);{var Po=Z=>{var we=EB();At(Z,we)};Vt(La,Z=>{C(pt)==="honest-resistance"&&Z(Po)})}z(Ci);var Ti=U(Ci,2),Aa=W(Ti),Wr=W(Aa),Mi=W(Wr);z(Wr);var zn=U(Wr,2),Li=W(zn),Wn=U(Li,2),Hn=W(Wn);z(Wn),z(zn),z(Aa);var Ba=U(Aa,2);{var Ro=Z=>{var we=$B();At(Z,we)};Vt(Ba,Z=>{C(pt)==="quality"&&Z(Ro)})}z(Ti);var Ea=U(Ti,2),$a=W(Ea),Hr=W($a),Fa=W(Hr);z(Hr);var jn=U(Hr,2),Ai=W(jn),Vn=U(Ai,2),Do=W(Vn);z(Vn),z(jn),z($a);var Oo=U($a,2);{var oe=Z=>{var we=FB();At(Z,we)};Vt(Oo,Z=>{C(pt)==="straightforwardness"&&Z(oe)})}z(Ea),z(A),z(x),De(()=>{kr(H,"data-score",(C(h),tt(()=>C(h).proportionality))),Ue(H,`width: ${C(h),tt(()=>C(h).proportionality/5*100)??""}%`),Wt(Ht,`${C(h),tt(()=>C(h).proportionality)??""}/5`),kr(Ca,"data-score",(C(h),tt(()=>C(h).simplicity))),Ue(Ca,`width: ${C(h),tt(()=>C(h).simplicity/5*100)??""}%`),Wt(ka,`${C(h),tt(()=>C(h).simplicity)??""}/5`),kr(Si,"data-score",(C(h),tt(()=>C(h).honestStrategyResistance))),Ue(Si,`width: ${C(h),tt(()=>C(h).honestStrategyResistance/5*100)??""}%`),Wt(Ma,`${C(h),tt(()=>C(h).honestStrategyResistance)??""}/5`),kr(Li,"data-score",(C(h),tt(()=>C(h).representation))),Ue(Li,`width: ${C(h),tt(()=>C(h).representation/5*100)??""}%`),Wt(Hn,`${C(h),tt(()=>C(h).representation)??""}/5`),kr(Ai,"data-score",(C(h),tt(()=>C(h).strategicStraightforwardness))),Ue(Ai,`width: ${C(h),tt(()=>C(h).strategicStraightforwardness/5*100)??""}%`),Wt(Do,`${C(h),tt(()=>C(h).strategicStraightforwardness)??""}/5`)}),Dt("click",lt,Z=>{Z.stopPropagation(),wt("proportionality")}),Dt("keydown",lt,Z=>{(Z.key==="Enter"||Z.key===" ")&&(Z.preventDefault(),Z.stopPropagation(),wt("proportionality"))}),Dt("click",Gt,Z=>{Z.stopPropagation(),wt("simplicity")}),Dt("keydown",Gt,Z=>{(Z.key==="Enter"||Z.key===" ")&&(Z.preventDefault(),Z.stopPropagation(),wt("simplicity"))}),Dt("click",ki,Z=>{Z.stopPropagation(),wt("honest-resistance")}),Dt("keydown",ki,Z=>{(Z.key==="Enter"||Z.key===" ")&&(Z.preventDefault(),Z.stopPropagation(),wt("honest-resistance"))}),Dt("click",Mi,Z=>{Z.stopPropagation(),wt("quality")}),Dt("keydown",Mi,Z=>{(Z.key==="Enter"||Z.key===" ")&&(Z.preventDefault(),Z.stopPropagation(),wt("quality"))}),Dt("click",Fa,Z=>{Z.stopPropagation(),wt("straightforwardness")}),Dt("keydown",Fa,Z=>{(Z.key==="Enter"||Z.key===" ")&&(Z.preventDefault(),Z.stopPropagation(),wt("straightforwardness"))}),At(w,x)};Vt(_a,w=>{C(f),tt(()=>C(f).ballotType&&C(f).tabulationMethod)&&w(Eo)})}var _e=U(_a,2);{var wr=w=>{var x=RB(),A=W(x);ph(A,()=>(C(l),tt(()=>C(l).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n\n/g,"<br><br>")))),z(x),At(w,x)};Vt(_e,w=>{C(l)&&w(wr)})}var wa=U(_e,2);{var Fn=w=>{var x=DB(),A=U(W(x),2);ph(A,()=>(C(c),tt(()=>C(c).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n\n/g,"<br><br>")))),z(x),At(w,x)};Vt(wa,w=>{C(c)&&w(Fn)})}var _i=U(wa,2);{var Pn=w=>{var x=IB(),A=U(W(x),2);Ei(A,5,()=>C(d),$i,(R,j)=>{var at=OB(),lt=W(at,!0);z(at),De(()=>{kr(at,"title",(C(j),tt(()=>C(j).name))),Wt(lt,(C(j),tt(()=>C(j).flag)))}),At(R,at)}),z(A),z(x),At(w,x)};Vt(_i,w=>{C(d),tt(()=>C(d).length)&&w(Pn)})}var Le=U(_i,2);{var Rn=w=>{var x=NB(),A=U(W(x),2);A0(A,R=>$t(Jt,R),()=>C(Jt)),z(x),At(w,x)};Vt(Le,w=>{C(p)&&w(Rn)})}var Dn=U(Le,2);{var On=w=>{var x=WB(),A=ch(x);{var R=lt=>{var xt=zB(),H=U(W(xt),2);Ei(H,1,()=>(C(f),tt(()=>zt(C(f)))),$i,(Ot,Ht)=>{var kt=qB(),se=W(kt),Ae=W(se);z(se);var Pe=U(se,2),ar=W(Pe,!0);z(Pe),z(kt),De(()=>{Wt(Ae,`Compare ${C(Ht),tt(()=>C(Ht).title)??""}`),Wt(ar,(C(Ht),tt(()=>C(Ht).description)))}),Dt("click",se,()=>Pt(C(Ht).methods)),At(Ot,kt)}),z(xt),At(lt,xt)};Vt(A,lt=>{C(f),tt(()=>C(f).tabulationMethod&&zt(C(f)).length>0)&&lt(R)})}var j=U(A,2),at=W(j);Cr(2),z(j),De(lt=>kr(at,"href",lt),[()=>(uh(Yn),tt(()=>Yn("/about-approval-voting")))]),At(w,x)};Vt(Dn,w=>{C(f),tt(()=>C(f).ballotType)&&w(On)})}z(ir),z(jt),z(da),z(Rr);var In=U(Rr,2);{var $o=w=>{var x=YB(),A=W(x),R=W(A),j=U(W(R),2);z(R);var at=U(R,2),lt=W(at);Ei(lt,5,()=>C(Ft),$i,(xt,H)=>{var Ot=UB();let Ht;var kt=W(Ot),se=W(kt),Ae=W(se,!0);z(se);var Pe=U(se,2);{var ar=oe=>{var Z=HB();At(oe,Z)};Vt(Pe,oe=>{C(H),C(f),tt(()=>C(H)===C(f).tabulationMethod)&&oe(ar)})}z(kt);var Gt=U(kt,2),Re=W(Gt),Ca=U(W(Re));z(Re),z(Gt);var wi=U(Gt,2),ka=W(wi),Sa=U(W(ka),2),Fo=W(Sa);z(Sa);var Ci=U(Sa,2),Ta=W(Ci);z(Ci),z(ka);var zr=U(ka,2),ki=U(W(zr),2),Nn=W(ki);z(ki);var Si=U(ki,2),qn=W(Si);z(Si),z(zr);var Ma=U(zr,2),La=U(W(Ma),2),Po=W(La);z(La);var Ti=U(La,2),Aa=W(Ti);z(Ti),z(Ma);var Wr=U(Ma,2),Mi=U(W(Wr),2),zn=W(Mi);z(Mi);var Li=U(Mi,2),Wn=W(Li);z(Li),z(Wr);var Hn=U(Wr,2),Ba=U(W(Hn),2),Ro=W(Ba);z(Ba);var Ea=U(Ba,2),$a=W(Ea);z(Ea),z(Hn),z(wi);var Hr=U(wi,2),Fa=W(Hr),jn=U(W(Fa));z(Fa),z(Hr);var Ai=U(Hr,2);{var Vn=oe=>{var Z=jB(),we=U(W(Z),2);let ah;var h0=W(we,!0);z(we),z(Z),De(u0=>{ah=Io(we,1,"compatibility-value svelte-ip3fvg",null,ah,u0),Wt(h0,(C(H),tt(()=>S[C(H)].votingMachineCompatibility.existingMachines?"Compatible":"Requires New Machines")))},[()=>({compatible:S[C(H)].votingMachineCompatibility.existingMachines,incompatible:!S[C(H)].votingMachineCompatibility.existingMachines})]),At(oe,Z)};Vt(Ai,oe=>{C(H),tt(()=>S[C(H)].votingMachineCompatibility)&&oe(Vn)})}var Do=U(Ai,2);{var Oo=oe=>{var Z=VB();Dt("click",Z,()=>{D(C(H)),Tt()}),At(oe,Z)};Vt(Do,oe=>{C(H),C(f),tt(()=>C(H)!==C(f).tabulationMethod)&&oe(Oo)})}z(Ot),De((oe,Z)=>{Ht=Io(Ot,1,"comparison-card svelte-ip3fvg",null,Ht,oe),Wt(Ae,(C(H),tt(()=>S[C(H)].name))),Wt(Ca,` ${C(H),tt(()=>S[C(H)].shortDescription)??""}`),Ue(Fo,`width: ${C(H),tt(()=>S[C(H)].scores.proportionality/5*100)??""}%`),Wt(Ta,`${C(H),tt(()=>S[C(H)].scores.proportionality)??""}/5`),Ue(Nn,`width: ${C(H),tt(()=>S[C(H)].scores.simplicity/5*100)??""}%`),Wt(qn,`${C(H),tt(()=>S[C(H)].scores.simplicity)??""}/5`),Ue(Po,`width: ${C(H),tt(()=>S[C(H)].scores.honestStrategyResistance/5*100)??""}%`),Wt(Aa,`${C(H),tt(()=>S[C(H)].scores.honestStrategyResistance)??""}/5`),Ue(zn,`width: ${C(H),tt(()=>S[C(H)].scores.strategicStraightforwardness/5*100)??""}%`),Wt(Wn,`${C(H),tt(()=>S[C(H)].scores.strategicStraightforwardness)??""}/5`),Ue(Ro,`width: ${C(H),tt(()=>S[C(H)].scores.representation/5*100)??""}%`),Wt($a,`${C(H),tt(()=>S[C(H)].scores.representation)??""}/5`),Wt(jn,` ${Z??""}.`)},[()=>({current:C(H)===C(f).tabulationMethod}),()=>(C(H),tt(()=>S[C(H)].detailedCritique.split(".")[0]))]),At(xt,Ot)}),z(lt),z(at),z(A),z(x),Dt("click",j,Tt),Dt("click",A,xt=>xt.stopPropagation()),Dt("keydown",A,xt=>xt.stopPropagation()),Dt("click",x,Tt),Dt("keydown",x,xt=>xt.key==="Escape"&&Tt()),At(w,x)};Vt(In,w=>{C(yt)&&w($o)})}De((w,x,A,R,j)=>{kr(fi,"href",w),Fi(je,x),Fi(mi,A),Fi(Nr,R),Fi(ma,j),Wt(Bo,`Showing ${C(P),tt(()=>C(P).length)??""} method${C(P),tt(()=>C(P).length===1?"":"s")??""}`),Wt(xa,`${C(s)??""} `)},[()=>(uh(Yn),tt(()=>Yn("/"))),()=>(C(y),tt(()=>C(y).includes("single"))),()=>(C(y),tt(()=>C(y).includes("multi"))),()=>(C(E),tt(()=>C(E).includes("party-required"))),()=>(C(E),tt(()=>C(E).includes("no-party-required")))]),Dt("change",je,()=>$t(y,k(C(y),"single"))),Dt("change",mi,()=>$t(y,k(C(y),"multi"))),Dt("change",Nr,()=>$t(E,k(C(E),"party-required"))),Dt("change",ma,()=>$t(E,k(C(E),"no-party-required"))),At(e,di),T0()}export{bp as $,en as A,cb as B,tx as C,Nc as D,ve as E,op as F,Ak as G,lM as H,Pu as I,lv as J,yb as K,ta as L,uE as M,vo as N,mp as O,nc as P,Sh as Q,O2 as R,fs as S,Lk as T,vn as U,Wb as V,xn as W,K as X,ct as Y,vk as Z,g as _,Gb as a,s_ as a$,F2 as a0,Xh as a1,Gh as a2,wE as a3,yE as a4,vE as a5,xE as a6,gE as a7,Ri as a8,Sc as a9,nt as aA,$E as aB,zT as aC,OT as aD,DT as aE,HS as aF,P2 as aG,Mn as aH,zS as aI,qS as aJ,_c as aK,Tr as aL,Wh as aM,d_ as aN,dn as aO,li as aP,yk as aQ,lg as aR,go as aS,xo as aT,js as aU,hg as aV,og as aW,YC as aX,st as aY,tf as aZ,xe as a_,_E as aa,mE as ab,kE as ac,CE as ad,bE as ae,fT as af,fy as ag,PE as ah,dt as ai,Je as aj,hv as ak,Qt as al,Pr as am,yc as an,Hg as ao,ui as ap,mg as aq,mk as ar,lC as as,ck as at,Bc as au,Wu as av,nM as aw,FE as ax,RE as ay,EE as az,Yb as b,vc as b0,gf as b1,Cn as b2,bf as b3,fE as b4,P0 as b5,gk as b6,lk as b7,Xw as b8,Ec as b9,bo as bA,IE as bB,HC as ba,xk as bb,Sn as bc,ca as bd,zs as be,tk as bf,AM as bg,kn as bh,Hs as bi,GC as bj,eg as bk,Qw as bl,Jw as bm,Yr as bn,hu as bo,tC as bp,$c as bq,Kw as br,iC as bs,ha as bt,Fr as bu,nu as bv,Fc as bw,ig as bx,Jl as by,bk as bz,St as c,vt as d,yp as e,re as f,Zb as g,gr as h,ri as i,gv as j,oa as k,O as l,bg as m,pE as n,OE as o,Kb as p,Qb as q,DE as r,Xb as s,cv as t,Ke as u,FT as v,$k as w,SE as x,Ub as y,dE as z};
