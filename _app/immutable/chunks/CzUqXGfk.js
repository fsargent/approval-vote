const e=!1;var t=Array.isArray,n=Array.prototype.indexOf,r=Array.from,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyDescriptors,s=Object.prototype,l=Array.prototype,u=Object.getPrototypeOf,c=Object.isExtensible;const h=()=>{};function d(e){return e()}function f(e){for(var t=0;t<e.length;t++)e[t]()}function p(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const n=[];for(const r of e)if(n.push(r),n.length===t)break;return n}const g=16,m=32,v=64,y=256,b=512,x=1024,w=2048,E=4096,T=8192,_=16384,k=32768,A=65536,S=1<<17,N=1<<18,M=1<<19,C=1<<21,I=1<<22,R=1<<23,L=Symbol("$state"),O=Symbol("legacy props"),D=Symbol(""),P=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function B(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function F(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}const z="[!",U={},G=Symbol();let V,j=!1;function H(e){j=e}function $(e){if(null===e)throw U;return V=e}function Y(){return $(ut(V))}function q(e){if(j){if(null!==ut(V))throw U;V=e}}function W(e=1){if(j){for(var t=e,n=V;t--;)n=ut(n);V=n}}function X(){for(var e=0,t=V;;){if(8===t.nodeType){var n=t.data;if("]"===n){if(0===e)return t;e-=1}else"["!==n&&n!==z||(e+=1)}var r=ut(t);t.remove(),t=r}}function K(e){if(!e||8!==e.nodeType)throw U;return e.data}function Z(e){return e===this.v}function Q(e,t){return e!=e?t==t:e!==t||null!==e&&"object"==typeof e||"function"==typeof e}function J(e){return!Q(e,this.v)}let ee=!1;let te=null;function ne(e){te=e}function re(e,t){return se().set(e,t),t}function ie(e,t=!1,n){te={p:te,c:null,e:null,s:e,x:null,l:ee&&!t?{s:null,u:null,$:[]}:null}}function oe(e){var t=te,n=t.e;if(null!==n)for(var r of(t.e=null,n))Et(r);return te=t.p,{}}function ae(){return!ee||null!==te&&null===te.l}function se(e){return null===te&&B(),te.c??=new Map(function(e){let t=e.p;for(;null!==t;){const e=t.c;if(null!==e)return e;t=t.p}return null}(te)||void 0)}const le=new WeakMap;function ue(e,t){for(;null!==t;){if(128&t.f)try{return void t.b.error(e)}catch(LY){e=LY}t=t.parent}throw e instanceof Error&&ce(e),e}function ce(e){const t=le.get(e);t&&(i(e,"message",{value:t.message}),i(e,"stack",{value:t.stack}))}const he="undefined"==typeof requestIdleCallback?e=>setTimeout(e,1):requestIdleCallback;let de=[],fe=[];function pe(){var e=de;de=[],f(e)}function ge(){var e=fe;fe=[],f(e)}function me(e){0===de.length&&queueMicrotask(pe),de.push(e)}function ve(){de.length>0&&pe(),fe.length>0&&ge()}function ye(){for(var e=Wt.b;null!==e&&!e.has_pending_snippet();)e=e.parent;return null===e&&function(){throw new Error("https://svelte.dev/e/await_outside_boundary")}(),e}function be(e){var t=2050,n=null!==$t&&2&$t.f?$t:null;null===Wt||null!==n&&0!==(n.f&y)?t|=y:Wt.f|=M;return{ctx:te,deps:null,effects:null,equals:Z,f:t,fn:e,reactions:null,rv:0,v:G,wv:0,parent:n??Wt,ac:null}}function xe(e,t){let n=Wt;null===n&&function(){throw new Error("https://svelte.dev/e/async_derived_orphan")}();var r=n.b,i=void 0,o=$e(G),a=null,s=!$t;return function(e){bt(4718592,e,!0)}(()=>{try{var t=e();a&&Promise.resolve(t).catch(()=>{})}catch(h){t=Promise.reject(h)}var n=()=>t;i=a?.then(n,n)??Promise.resolve(t),a=i;var l=Me,u=r.pending;s&&(r.update_pending_count(1),u||l.increment());const c=(e,t=void 0)=>{a=null,u||l.activate(),t?t!==P&&(o.f|=R,Ke(o,t)):(0!==(o.f&R)&&(o.f^=R),Ke(o,e)),s&&(r.update_pending_count(-1),u||l.decrement()),Se()};if(i.then(c,e=>c(null,e||"unknown")),l)return()=>{queueMicrotask(()=>l.neuter())}}),new Promise(e=>{!function t(n){function r(){n===i?e(o):t(i)}n.then(r,r)}(i)})}function we(e){const t=be(e);return Zt(t),t}function Ee(e){const t=be(e);return t.equals=J,t}function Te(e){var t=e.effects;if(null!==t){e.effects=null;for(var n=0;n<t.length;n+=1)Lt(t[n])}}function _e(e){var t,n=Wt;Xt(function(e){for(var t=e.parent;null!==t;){if(!(2&t.f))return t;t=t.parent}return null}(e));try{Te(e),t=cn(e)}finally{Xt(n)}return t}function ke(e){var t=_e(e);(e.equals(t)||(e.v=t,e.wv=sn()),jt)||bn(e,!an&&0===(e.f&y)||null===e.deps?x:E)}function Ae(e,t,n){const r=ae()?be:Ee;if(0!==t.length){var i,o,a,s,l=Me,u=Wt,c=(i=Wt,o=$t,a=te,s=Me,function(){Xt(i),qt(o),ne(a),s?.activate()}),h=ye();Promise.all(t.map(e=>xe(e))).then(t=>{l?.activate(),c();try{n([...e.map(r),...t])}catch(i){0===(u.f&_)&&ue(i,u)}l?.deactivate(),Se()}).catch(e=>{h.error(e)})}else n(e.map(r))}function Se(){Xt(null),qt(null),ne(null)}const Ne=new Set;let Me=null,Ce=new Set,Ie=[];function Re(){const e=Ie.shift();Ie.length>0&&queueMicrotask(Re),e()}let Le=[],Oe=null,De=!1,Pe=!1;class Be{current=new Map;#e=new Map;#t=new Set;#n=0;#r=null;#i=!1;#o=[];#a=[];#s=[];#l=[];#u=[];#c=[];#h=[];skipped_effects=new Set;process(e){Le=[];for(const r of e)this.#d(r);if(0===this.#o.length&&0===this.#n){this.#f();var t=this.#s,n=this.#l;this.#s=[],this.#l=[],this.#u=[],Me=null,Ve(t),Ve(n),null===Me?Me=this:Ne.delete(this),this.#r?.resolve()}else this.#p(this.#s),this.#p(this.#l),this.#p(this.#u);for(const r of this.#o)fn(r);for(const r of this.#a)fn(r);this.#o=[],this.#a=[]}#d(e){e.f^=x;for(var t=e.first;null!==t;){var n=t.f,r=!!(96&n);if(!(r&&0!==(n&x)||0!==(n&T)||this.skipped_effects.has(t))&&null!==t.fn){if(r)t.f^=x;else if(4&n)this.#l.push(t);else if(0===(n&x)){if(0!==(n&I))(t.b?.pending?this.#a:this.#o).push(t);else ln(t)&&(0!==(t.f&g)&&this.#u.push(t),fn(t))}var i=t.first;if(null!==i){t=i;continue}}var o=t.parent;for(t=t.next;null===t&&null!==o;)t=o.next,o=o.parent}}#p(e){for(const t of e){(0!==(t.f&w)?this.#c:this.#h).push(t),bn(t,x)}e.length=0}capture(e,t){this.#e.has(e)||this.#e.set(e,t),this.current.set(e,e.v)}activate(){Me=this}deactivate(){Me=null;for(const e of Ce)if(Ce.delete(e),e(),null!==Me)break}neuter(){this.#i=!0}flush(){Le.length>0?ze():this.#f(),Me===this&&(0===this.#n&&Ne.delete(this),this.deactivate())}#f(){if(!this.#i)for(const e of this.#t)e();this.#t.clear()}increment(){this.#n+=1}decrement(){if(this.#n-=1,0===this.#n){for(const e of this.#c)bn(e,w),je(e);for(const e of this.#h)bn(e,E),je(e);this.#s=[],this.#l=[],this.flush()}else this.deactivate()}add_callback(e){this.#t.add(e)}settled(){return(this.#r??={promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}).promise;var e,t}static ensure(){if(null===Me){const e=Me=new Be;Ne.add(Me),Pe||Be.enqueue(()=>{Me===e&&e.flush()})}return Me}static enqueue(e){0===Ie.length&&queueMicrotask(Re),Ie.unshift(e)}}function Fe(e){var t=Pe;Pe=!0;try{var n;for(e&&(ze(),n=e());;){if(ve(),0===Le.length&&(Me?.flush(),0===Le.length))return Oe=null,n;ze()}}finally{Pe=t}}function ze(){var t=Gt;De=!0;try{var n=0;for(Vt(!0);Le.length>0;){var r=Be.ensure();if(n++>1e3)e,Ue();r.process(Le),He.clear()}}finally{De=!1,Vt(t),Oe=null}}function Ue(){try{!function(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}()}catch(e){ue(e,Oe)}}let Ge=null;function Ve(e){var t=e.length;if(0!==t){for(var n=0;n<t;){var r=e[n++];if(!(24576&r.f)&&ln(r)&&(Ge=[],fn(r),null===r.deps&&null===r.first&&null===r.nodes_start&&(null===r.teardown&&null===r.ac?Dt(r):r.fn=null),Ge?.length>0)){He.clear();for(const e of Ge)fn(e);Ge=[]}}Ge=null}}function je(e){for(var t=Oe=e;null!==t.parent;){var n=(t=t.parent).f;if(De&&t===Wt&&0!==(n&g))return;if(96&n){if(0===(n&x))return;t.f^=x}}Le.push(t)}const He=new Map;function $e(e,t){return{f:0,v:e,reactions:null,equals:Z,rv:0,wv:0}}function Ye(e,t){const n=$e(e);return Zt(n),n}function qe(e,t=!1,n=!0){const r=$e(e);return t||(r.equals=J),ee&&n&&null!==te&&null!==te.l&&(te.l.s??=[]).push(r),r}function We(e,t){return Xe(e,vn(()=>gn(e))),t}function Xe(e,t,n=!1){return null!==$t&&(!Yt||0!==($t.f&S))&&ae()&&4325394&$t.f&&!Kt?.includes(e)&&function(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}(),Ke(e,n?Je(t):t)}function Ke(e,t){if(!e.equals(t)){var n=e.v;jt?He.set(e,t):He.set(e,n),e.v=t,Be.ensure().capture(e,n),2&e.f&&(0!==(e.f&w)&&_e(e),bn(e,0===(e.f&y)?x:E)),e.wv=sn(),Qe(e,w),!ae()||null===Wt||0===(Wt.f&x)||96&Wt.f||(null===en?function(e){en=e}([e]):en.push(e))}return t}function Ze(e){Xe(e,e.v+1)}function Qe(e,t){var n=e.reactions;if(null!==n)for(var r=ae(),i=n.length,o=0;o<i;o++){var a=n[o],s=a.f;if(r||a!==Wt){var l=0===(s&w);l&&bn(a,t),2&s?Qe(a,E):l&&(0!==(s&g)&&null!==Ge&&Ge.push(a),je(a))}}}function Je(e){if("object"!=typeof e||null===e||L in e)return e;const n=u(e);if(n!==s&&n!==l)return e;var r=new Map,i=t(e),a=Ye(0),c=rn,h=e=>{if(rn===c)return e();var t=$t,n=rn;qt(null),on(c);var r=e();return qt(t),on(n),r};return i&&r.set("length",Ye(e.length)),new Proxy(e,{defineProperty(e,t,n){"value"in n&&!1!==n.configurable&&!1!==n.enumerable&&!1!==n.writable||function(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}();var i=r.get(t);return void 0===i?i=h(()=>{var e=Ye(n.value);return r.set(t,e),e}):Xe(i,n.value,!0),!0},deleteProperty(e,t){var n=r.get(t);if(void 0===n){if(t in e){const e=h(()=>Ye(G));r.set(t,e),Ze(a)}}else Xe(n,G),Ze(a);return!0},get(t,n,i){if(n===L)return e;var a=r.get(n),s=n in t;if(void 0!==a||s&&!o(t,n)?.writable||(a=h(()=>Ye(Je(s?t[n]:G))),r.set(n,a)),void 0!==a){var l=gn(a);return l===G?void 0:l}return Reflect.get(t,n,i)},getOwnPropertyDescriptor(e,t){var n=Reflect.getOwnPropertyDescriptor(e,t);if(n&&"value"in n){var i=r.get(t);i&&(n.value=gn(i))}else if(void 0===n){var o=r.get(t),a=o?.v;if(void 0!==o&&a!==G)return{enumerable:!0,configurable:!0,value:a,writable:!0}}return n},has(e,t){if(t===L)return!0;var n=r.get(t),i=void 0!==n&&n.v!==G||Reflect.has(e,t);if((void 0!==n||null!==Wt&&(!i||o(e,t)?.writable))&&(void 0===n&&(n=h(()=>Ye(i?Je(e[t]):G)),r.set(t,n)),gn(n)===G))return!1;return i},set(e,t,n,s){var l=r.get(t),u=t in e;if(i&&"length"===t)for(var c=n;c<l.v;c+=1){var d=r.get(c+"");void 0!==d?Xe(d,G):c in e&&(d=h(()=>Ye(G)),r.set(c+"",d))}void 0===l?u&&!o(e,t)?.writable||(Xe(l=h(()=>Ye(void 0)),Je(n)),r.set(t,l)):(u=l.v!==G,Xe(l,h(()=>Je(n))));var f=Reflect.getOwnPropertyDescriptor(e,t);if(f?.set&&f.set.call(s,n),!u){if(i&&"string"==typeof t){var p=r.get("length"),g=Number(t);Number.isInteger(g)&&g>=p.v&&Xe(p,g+1)}Ze(a)}return!0},ownKeys(e){gn(a);var t=Reflect.ownKeys(e).filter(e=>{var t=r.get(e);return void 0===t||t.v!==G});for(var[n,i]of r)i.v===G||n in e||t.push(n);return t},setPrototypeOf(){!function(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}()}})}function et(e){try{if(null!==e&&"object"==typeof e&&L in e)return e[L]}catch{}return e}var tt,nt,rt,it,ot;function at(){if(void 0===tt){tt=window,nt=document,rt=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;it=o(t,"firstChild").get,ot=o(t,"nextSibling").get,c(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),c(n)&&(n.__t=void 0)}}function st(e=""){return document.createTextNode(e)}function lt(e){return it.call(e)}function ut(e){return ot.call(e)}function ct(e,t){if(!j)return lt(e);var n=lt(V);if(null===n)n=V.appendChild(st());else if(t&&3!==n.nodeType){var r=st();return n?.before(r),$(r),r}return $(n),n}function ht(e,t){if(!j){var n=lt(e);return n instanceof Comment&&""===n.data?ut(n):n}return V}function dt(e,t=1,n=!1){let r=j?V:e;for(var i;t--;)i=r,r=ut(r);if(!j)return r;if(n&&3!==r?.nodeType){var o=st();return null===r?i?.after(o):r.before(o),$(o),o}return $(r),r}function ft(e){e.textContent=""}let pt=!1;function gt(){pt||(pt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function mt(e){var t=$t,n=Wt;qt(null),Xt(null);try{return e()}finally{qt(t),Xt(n)}}function vt(e,t,n,r=n){e.addEventListener(t,()=>mt(n));const i=e.__on_r;e.__on_r=i?()=>{i(),r(!0)}:()=>r(!0),gt()}function yt(e){null===Wt&&null===$t&&function(){throw new Error("https://svelte.dev/e/effect_orphan")}(),null!==$t&&0!==($t.f&y)&&null===Wt&&function(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}(),jt&&function(){throw new Error("https://svelte.dev/e/effect_in_teardown")}()}function bt(e,t,n,r=!0){var i=Wt;null!==i&&0!==(i.f&T)&&(e|=T);var o={ctx:te,deps:null,nodes_start:null,nodes_end:null,f:e|w,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{fn(o),o.f|=k}catch(l){throw Lt(o),l}else null!==t&&je(o);if(r){var a=o;if(n&&null===a.deps&&null===a.teardown&&null===a.nodes_start&&a.first===a.last&&0===(a.f&M)&&(a=a.first),null!==a&&(a.parent=i,null!==i&&function(e,t){var n=t.last;null===n?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}(a,i),null!==$t&&2&$t.f&&0===(e&v))){var s=$t;(s.effects??=[]).push(a)}}return o}function xt(e){const t=bt(8,null,!1);return bn(t,x),t.teardown=e,t}function wt(e){yt();var t=Wt.f;if(!(!$t&&0!==(t&m)&&0===(t&k)))return Et(e);var n=te;(n.e??=[]).push(e)}function Et(e){return bt(1048580,e,!1)}function Tt(e){return yt(),bt(1048584,e,!0)}function _t(e){return bt(4,e,!1)}function kt(e,t){var n={effect:null,ran:!1,deps:e};te.l.$.push(n),n.effect=St(()=>{e(),n.ran||(n.ran=!0,vn(t))})}function At(){var e=te;St(()=>{for(var t of e.l.$){t.deps();var n=t.effect;0!==(n.f&x)&&bn(n,E),ln(n)&&fn(n),t.ran=!1}})}function St(e,t=0){return bt(8|t,e,!0)}function Nt(e,t=[],n=[]){Ae(t,n,t=>{bt(8,()=>e(...t.map(gn)),!0)})}function Mt(e,t=0){return bt(g|t,e,!0)}function Ct(e,t=!0){return bt(524320,e,!0,t)}function It(e){var t=e.teardown;if(null!==t){const e=jt,n=$t;Ht(!0),qt(null);try{t.call(null)}finally{Ht(e),qt(n)}}}function Rt(e,t=!1){var n=e.first;for(e.first=e.last=null;null!==n;){const e=n.ac;null!==e&&mt(()=>{e.abort(P)});var r=n.next;0!==(n.f&v)?n.parent=null:Lt(n,t),n=r}}function Lt(e,t=!0){var n=!1;!t&&0===(e.f&N)||null===e.nodes_start||null===e.nodes_end||(Ot(e.nodes_start,e.nodes_end),n=!0),Rt(e,t&&!n),dn(e,0),bn(e,_);var r=e.transitions;if(null!==r)for(const o of r)o.stop();It(e);var i=e.parent;null!==i&&null!==i.first&&Dt(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Ot(e,t){for(;null!==e;){var n=e===t?null:ut(e);e.remove(),e=n}}function Dt(e){var t=e.parent,n=e.prev,r=e.next;null!==n&&(n.next=r),null!==r&&(r.prev=n),null!==t&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Pt(e,t){var n=[];Ft(e,n,!0),Bt(n,()=>{Lt(e),t&&t()})}function Bt(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Ft(e,t,n){if(0===(e.f&T)){if(e.f^=T,null!==e.transitions)for(const r of e.transitions)(r.is_global||n)&&t.push(r);for(var r=e.first;null!==r;){var i=r.next;Ft(r,t,!!(0!==(r.f&A)||0!==(r.f&m))&&n),r=i}}}function zt(e){Ut(e,!0)}function Ut(e,t){if(0!==(e.f&T)){e.f^=T,0===(e.f&x)&&(bn(e,w),je(e));for(var n=e.first;null!==n;){var r=n.next;Ut(n,!!(0!==(n.f&A)||0!==(n.f&m))&&t),n=r}if(null!==e.transitions)for(const n of e.transitions)(n.is_global||t)&&n.in()}}let Gt=!1;function Vt(e){Gt=e}let jt=!1;function Ht(e){jt=e}let $t=null,Yt=!1;function qt(e){$t=e}let Wt=null;function Xt(e){Wt=e}let Kt=null;function Zt(e){null!==$t&&(null===Kt?Kt=[e]:Kt.push(e))}let Qt=null,Jt=0,en=null;let tn=1,nn=0,rn=nn;function on(e){rn=e}let an=!1;function sn(){return++tn}function ln(e){var t=e.f;if(0!==(t&w))return!0;if(0!==(t&E)){var n=e.deps,r=0!==(t&y);if(null!==n){var i,o,a=0!==(t&b),s=r&&null!==Wt&&!an,l=n.length;if((a||s)&&(null===Wt||0===(Wt.f&_))){var u=e,c=u.parent;for(i=0;i<l;i++)o=n[i],!a&&o?.reactions?.includes(u)||(o.reactions??=[]).push(u);a&&(u.f^=b),s&&null!==c&&0===(c.f&y)&&(u.f^=y)}for(i=0;i<l;i++)if(ln(o=n[i])&&ke(o),o.wv>e.wv)return!0}r&&(null===Wt||an)||bn(e,x)}return!1}function un(e,t,n=!0){var r=e.reactions;if(null!==r&&!Kt?.includes(e))for(var i=0;i<r.length;i++){var o=r[i];2&o.f?un(o,t,!1):t===o&&(n?bn(o,w):0!==(o.f&x)&&bn(o,E),je(o))}}function cn(e){var t=Qt,n=Jt,r=en,i=$t,o=an,a=Kt,s=te,l=Yt,u=rn,c=e.f;Qt=null,Jt=0,en=null,an=0!==(c&y)&&(Yt||!Gt||null===$t),$t=96&c?null:e,Kt=null,ne(e.ctx),Yt=!1,rn=++nn,null!==e.ac&&(mt(()=>{e.ac.abort(P)}),e.ac=null);try{e.f|=C;var h=(0,e.fn)(),d=e.deps;if(null!==Qt){var f;if(dn(e,Jt),null!==d&&Jt>0)for(d.length=Jt+Qt.length,f=0;f<Qt.length;f++)d[Jt+f]=Qt[f];else e.deps=d=Qt;if(!an||2&c&&null!==e.reactions)for(f=Jt;f<d.length;f++)(d[f].reactions??=[]).push(e)}else null!==d&&Jt<d.length&&(dn(e,Jt),d.length=Jt);if(ae()&&null!==en&&!Yt&&null!==d&&!(6146&e.f))for(f=0;f<en.length;f++)un(en[f],e);return null!==i&&i!==e&&(nn++,null!==en&&(null===r?r=en:r.push(...en))),0!==(e.f&R)&&(e.f^=R),h}catch(p){return function(e){var t=Wt;if(null===t)return $t.f|=R,e;if(0===(t.f&k)){if(!(128&t.f))throw!t.parent&&e instanceof Error&&ce(e),e;t.b.error(e)}else ue(e,t)}(p)}finally{e.f^=C,Qt=t,Jt=n,en=r,$t=i,an=o,Kt=a,ne(s),Yt=l,rn=u}}function hn(e,t){let r=t.reactions;if(null!==r){var i=n.call(r,e);if(-1!==i){var o=r.length-1;0===o?r=t.reactions=null:(r[i]=r[o],r.pop())}}null===r&&2&t.f&&(null===Qt||!Qt.includes(t))&&(bn(t,E),768&t.f||(t.f^=b),Te(t),dn(t,0))}function dn(e,t){var n=e.deps;if(null!==n)for(var r=t;r<n.length;r++)hn(e,n[r])}function fn(e){var t=e.f;if(0===(t&_)){bn(e,x);var n=Wt,r=Gt;Wt=e,Gt=!0;try{0!==(t&g)?function(e){for(var t=e.first;null!==t;){var n=t.next;0===(t.f&m)&&Lt(t),t=n}}(e):Rt(e),It(e);var i=cn(e);e.teardown="function"==typeof i?i:null,e.wv=tn}finally{Gt=r,Wt=n}}}async function pn(){await Promise.resolve(),Fe()}function gn(e){var t=!!(2&e.f);if(null===$t||Yt){if(t&&null===e.deps&&null===e.effects){var n=e,r=n.parent;null!==r&&0===(r.f&y)&&(n.f^=y)}}else if(!(null!==Wt&&0!==(Wt.f&_))&&!Kt?.includes(e)){var i=$t.deps;if(0!==($t.f&C))e.rv<nn&&(e.rv=nn,null===Qt&&null!==i&&i[Jt]===e?Jt++:null===Qt?Qt=[e]:an&&Qt.includes(e)||Qt.push(e));else{($t.deps??=[]).push(e);var o=e.reactions;null===o?e.reactions=[$t]:o.includes($t)||o.push($t)}}if(jt){if(He.has(e))return He.get(e);if(t){var a=(n=e).v;return(0===(n.f&x)&&null!==n.reactions||mn(n))&&(a=_e(n)),He.set(n,a),a}}else t&&ln(n=e)&&ke(n);if(0!==(e.f&R))throw e.v;return e.v}function mn(e){if(e.v===G)return!0;if(null===e.deps)return!1;for(const t of e.deps){if(He.has(t))return!0;if(2&t.f&&mn(t))return!0}return!1}function vn(e){var t=Yt;try{return Yt=!0,e()}finally{Yt=t}}const yn=-7169;function bn(e,t){e.f=e.f&yn|t}function xn(e){if("object"==typeof e&&e&&!(e instanceof EventTarget))if(L in e)wn(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];"object"==typeof n&&n&&L in n&&wn(n)}}function wn(e,t=new Set){if(!("object"!=typeof e||null===e||e instanceof EventTarget||t.has(e))){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{wn(e[r],t)}catch(LY){}const n=u(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const t=a(n);for(let n in t){const r=t[n].get;if(r)try{r.call(e)}catch(LY){}}}}}const En=["touchstart","touchmove"];function Tn(e){return En.includes(e)}const _n=new Set,kn=new Set;function An(e,t,n,r,i){var o={capture:r,passive:i},a=function(e,t,n,r={}){function i(e){if(r.capture||Cn.call(t,e),!e.cancelBubble)return mt(()=>n?.call(this,e))}return e.startsWith("pointer")||e.startsWith("touch")||"wheel"===e?me(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&xt(()=>{t.removeEventListener(e,a,o)})}function Sn(e){for(var t=0;t<e.length;t++)_n.add(e[t]);for(var n of kn)n(e)}let Nn,Mn=null;function Cn(e){var n=this,r=n.ownerDocument,o=e.type,a=e.composedPath?.()||[],s=a[0]||e.target;Mn=e;var l=0,u=Mn===e&&e.__root;if(u){var c=a.indexOf(u);if(-1!==c&&(n===document||n===window))return void(e.__root=n);var h=a.indexOf(n);if(-1===h)return;c<=h&&(l=c)}if((s=a[l]||e.target)!==n){i(e,"currentTarget",{configurable:!0,get:()=>s||r});var d=$t,f=Wt;qt(null),Xt(null);try{for(var p,g=[];null!==s;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var v=s["__"+o];if(null!=v&&(!s.disabled||e.target===s))if(t(v)){var[y,...b]=v;y.apply(s,[e,...b])}else v.call(s,e)}catch(x){p?g.push(x):p=x}if(e.cancelBubble||m===n||null===m)break;s=m}if(p){for(let e of g)queueMicrotask(()=>{throw e});throw p}}finally{e.__root=n,delete e.currentTarget,qt(d),Xt(f)}}}function In(e){let t=null,n=j;var r;if(j){for(t=V,void 0===Nn&&(Nn=lt(document.head));null!==Nn&&(8!==Nn.nodeType||"["!==Nn.data);)Nn=ut(Nn);null===Nn?H(!1):Nn=$(ut(Nn))}j||(r=document.head.appendChild(st()));try{Mt(()=>e(r),N)}finally{n&&(H(!0),Nn=V,$(t))}}function Rn(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","\x3c!----\x3e"),t.content}function Ln(e,t){var n=Wt;null===n.nodes_start&&(n.nodes_start=e,n.nodes_end=t)}function On(e,t){var n,r=!!(1&t),i=!!(2&t),o=!e.startsWith("<!>");return()=>{if(j)return Ln(V,null),V;void 0===n&&(n=Rn(o?e:"<!>"+e),r||(n=lt(n)));var t=i||rt?document.importNode(n,!0):n.cloneNode(!0);r?Ln(lt(t),t.lastChild):Ln(t,t);return t}}function Dn(e,t,n="svg"){var r,i=`<${n}>${!e.startsWith("<!>")?e:"<!>"+e}</${n}>`;return()=>{if(j)return Ln(V,null),V;if(!r){var e=Rn(i);r=lt(lt(e))}var t=r.cloneNode(!0);return Ln(t,t),t}}function Pn(e,t){return Dn(e,0,"svg")}function Bn(e){return()=>function(e){if(j)return e;const t=11===e.nodeType,n="SCRIPT"===e.tagName?[e]:e.querySelectorAll("script"),r=Wt;for(const o of n){const n=document.createElement("script");for(var i of o.attributes)n.setAttribute(i.name,i.value);n.textContent=o.textContent,(t?e.firstChild===o:e===o)&&(r.nodes_start=n),(t?e.lastChild===o:e===o)&&(r.nodes_end=n),o.replaceWith(n)}return e}(e())}function Fn(e=""){if(!j){var t=st(e+"");return Ln(t,t),t}var n=V;return 3!==n.nodeType&&(n.before(n=st()),$(n)),Ln(n,n),n}function zn(){if(j)return Ln(V,null),V;var e=document.createDocumentFragment(),t=document.createComment(""),n=st();return e.append(t,n),Ln(t,n),e}function Un(e,t){if(j)return Wt.nodes_end=V,void Y();null!==e&&e.before(t)}function Gn(e,t){var n=null==t?"":"object"==typeof t?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Vn(e,t){return $n(e,t)}function jn(e,t){at(),t.intro=t.intro??!1;const n=t.target,r=j,i=V;try{for(var o=lt(n);o&&(8!==o.nodeType||"["!==o.data);)o=ut(o);if(!o)throw U;H(!0),$(o),Y();const r=$n(e,{...t,anchor:o});if(null===V||8!==V.nodeType||"]"!==V.data)throw U;return H(!1),r}catch(a){if(a instanceof Error&&a.message.split("\n").some(e=>e.startsWith("https://svelte.dev/e/")))throw a;return!1===t.recover&&function(){throw new Error("https://svelte.dev/e/hydration_failed")}(),at(),ft(n),H(!1),Vn(e,t)}finally{H(r),$(i),Nn=void 0}}const Hn=new Map;function $n(e,{target:t,anchor:n,props:i={},events:o,context:a,intro:s=!0}){at();var l=new Set,u=e=>{for(var n=0;n<e.length;n++){var r=e[n];if(!l.has(r)){l.add(r);var i=Tn(r);t.addEventListener(r,Cn,{passive:i});var o=Hn.get(r);void 0===o?(document.addEventListener(r,Cn,{passive:i}),Hn.set(r,1)):Hn.set(r,o+1)}}};u(r(_n)),kn.add(u);var c=void 0,h=function(e){Be.ensure();const t=bt(524352,e,!0);return(e={})=>new Promise(n=>{e.outro?Pt(t,()=>{Lt(t),n(void 0)}):(Lt(t),n(void 0))})}(()=>{var r=n??t.appendChild(st());return Ct(()=>{a&&(ie({}),te.c=a);o&&(i.$$events=o),j&&Ln(r,null),c=e(r,i)||{},j&&(Wt.nodes_end=V),a&&oe()}),()=>{for(var e of l){t.removeEventListener(e,Cn);var i=Hn.get(e);0===--i?(document.removeEventListener(e,Cn),Hn.delete(e)):Hn.set(e,i)}kn.delete(u),r!==n&&r.parentNode?.removeChild(r)}});return Yn.set(c,h),c}let Yn=new WeakMap;function qn(e,t){const n=Yn.get(e);return n?(Yn.delete(e),n(t)):Promise.resolve()}function Wn(e,t,n=!1){j&&Y();var r=e,i=null,o=null,a=G,s=!1;const l=(e,t=!0)=>{s=!0,h(t,e)};var u=null;function c(){null!==u&&(u.lastChild.remove(),r.before(u),u=null);var e=a?i:o,t=a?o:i;e&&zt(e),t&&Pt(t,()=>{a?o=null:i=null})}const h=(e,t)=>{if(a===(a=e))return;let n=!1;if(j){const e=K(r)===z;!!a===e&&($(r=X()),H(!1),n=!0)}var s=!1,l=r;a?i??=t&&Ct(()=>t(l)):o??=t&&Ct(()=>t(l)),c(),n&&H(!0)};Mt(()=>{s=!1,t(l),s||h(null,null)},n?A:0),j&&(r=V)}function Xn(e,t){return t}function Kn(e,n,i,o,a,s=null){var l=e,u={flags:n,items:new Map,first:null};if(!!(4&n)){var c=e;l=j?$(lt(c)):c.appendChild(st())}j&&Y();var h,d,f=null,p=!1,g=new Map,m=Ee(()=>{var e=i();return t(e)?e:null==e?[]:r(e)});function v(){!function(e,t,n,i,o,a,s,l,u){var c,h,d,f,p,g,m=!!(8&s),v=!!(3&s),y=t.length,b=n.items,x=n.first,w=x,E=null,_=[],k=[];if(m)for(g=0;g<y;g+=1)f=l(d=t[g],g),void 0!==(p=b.get(f))&&(p.a?.measure(),(h??=new Set).add(p));for(g=0;g<y;g+=1)if(f=l(d=t[g],g),void 0!==(p=b.get(f))){if(v&&Zn(p,d,g,s),0!==(p.e.f&T)&&(zt(p.e),m&&(p.a?.unfix(),(h??=new Set).delete(p))),p!==w){if(void 0!==c&&c.has(p)){if(_.length<k.length){var A,S=k[0];E=S.prev;var N=_[0],M=_[_.length-1];for(A=0;A<_.length;A+=1)Jn(_[A],S,o);for(A=0;A<k.length;A+=1)c.delete(k[A]);er(n,N.prev,M.next),er(n,E,N),er(n,M,S),w=S,E=M,g-=1,_=[],k=[]}else c.delete(p),Jn(p,w,o),er(n,p.prev,p.next),er(n,p,null===E?n.first:E.next),er(n,E,p),E=p;continue}for(_=[],k=[];null!==w&&w.k!==f;)0===(w.e.f&T)&&(c??=new Set).add(w),k.push(w),w=w.next;if(null===w)continue;p=w}_.push(p),E=p,w=p.next}else{var C=i.get(f);if(void 0!==C){i.delete(f),b.set(f,C);var I=E?E.next:w;er(n,E,C),er(n,C,I),Jn(C,I,o),E=C}else{E=Qn(w?w.e.nodes_start:o,n,E,null===E?n.first:E.next,d,f,g,a,s,u)}b.set(f,E),_=[],k=[],w=E.next}if(null!==w||void 0!==c){for(var R=void 0===c?[]:r(c);null!==w;)0===(w.e.f&T)&&R.push(w),w=w.next;var L=R.length;if(L>0){var O=4&s&&0===y?o:null;if(m){for(g=0;g<L;g+=1)R[g].a?.measure();for(g=0;g<L;g+=1)R[g].a?.fix()}!function(e,t,n){for(var r=e.items,i=[],o=t.length,a=0;a<o;a++)Ft(t[a].e,i,!0);var s=o>0&&0===i.length&&null!==n;if(s){var l=n.parentNode;ft(l),l.append(n),r.clear(),er(e,t[0].prev,t[o-1].next)}Bt(i,()=>{for(var n=0;n<o;n++){var i=t[n];s||(r.delete(i.k),er(e,i.prev,i.next)),Lt(i.e,!s)}})}(n,R,O)}}m&&me(()=>{if(void 0!==h)for(p of h)p.a?.apply()});for(var D of(e.first=n.first&&n.first.e,e.last=E&&E.e,i.values()))Lt(D.e);i.clear()}(d,h,u,g,l,a,n,o,i),null!==s&&(0===h.length?f?zt(f):f=Ct(()=>s(l)):null!==f&&Pt(f,()=>{f=null}))}Mt(()=>{d??=Wt;var e=(h=gn(m)).length;if(p&&0===e)return;p=0===e;let t=!1;j&&(K(l)===z!==(0===e)&&($(l=X()),H(!1),t=!0));if(j){for(var r,c=null,g=0;g<e;g++){if(8===V.nodeType&&"]"===V.data){l=V,t=!0,H(!1);break}var y=h[g],b=o(y,g);r=Qn(V,u,c,null,y,b,g,a,n,i),u.items.set(b,r),c=r}e>0&&$(X())}j?0===e&&s&&(f=Ct(()=>s(l))):v();t&&H(!0),gn(m)}),j&&(l=V)}function Zn(e,t,n,r){1&r&&Ke(e.v,t),2&r?Ke(e.i,n):e.i=n}function Qn(e,t,n,r,i,o,a,s,l,u,c){var h=!!(1&l)?!(16&l)?qe(i,!1,!1):$e(i):i,d=2&l?$e(a):a,f={i:d,v:h,k:o,a:null,e:null,prev:n,next:r};try{if(null===e)document.createDocumentFragment().append(e=st());return f.e=Ct(()=>s(e,h,d,u),j),f.e.prev=n&&n.e,f.e.next=r&&r.e,null===n?c||(t.first=f):(n.next=f,n.e.next=f.e),null!==r&&(r.prev=f,r.e.prev=f.e),f}finally{}}function Jn(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;null!==o&&o!==r;){var a=ut(o);i.before(o),o=a}}function er(e,t,n){null===t?e.first=n:(t.next=n,t.e.next=n&&n.e),null!==n&&(n.prev=t,n.e.prev=t&&t.e)}function tr(e,t,n=!1,r=!1,i=!1){var o=e,a="";Nt(()=>{var e=Wt;if(a!==(a=t()??"")){if(null!==e.nodes_start&&(Ot(e.nodes_start,e.nodes_end),e.nodes_start=e.nodes_end=null),""!==a){if(j){V.data;for(var i=Y(),s=i;null!==i&&(8!==i.nodeType||""!==i.data);)s=i,i=ut(i);if(null===i)throw U;return Ln(V,s),void(o=$(i))}var l=a+"";n?l=`<svg>${l}</svg>`:r&&(l=`<math>${l}</math>`);var u=Rn(l);if((n||r)&&(u=lt(u)),Ln(lt(u),u.lastChild),n||r)for(;lt(u);)o.before(lt(u));else o.before(u)}}else j&&Y()})}function nr(e,t,...n){var r,i=e,o=h;Mt(()=>{o!==(o=t())&&(r&&(Lt(r),r=null),r=Ct(()=>o(i,...n)))},A),j&&(i=V)}function rr(e,t,n){j&&Y();var r,i,o=e,a=null,s=null;function l(){i&&(Pt(i),i=null),a&&(a.lastChild.remove(),o.before(a),a=null),i=s,s=null}Mt(()=>{if(r!==(r=t())){var e=!1;if(r){var i=o;e,s=Ct(()=>n(i,r))}l()}},A),j&&(o=V)}function ir(e,t,n){_t(()=>{var r=vn(()=>t(e,n?.())||{});if(n&&r?.update){var i=!1,o={};St(()=>{var e=n();xn(e),i&&Q(o,e)&&(o=e,r.update(e))}),i=!0}if(r?.destroy)return()=>r.destroy()})}function or(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=or(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ar(e){return"object"==typeof e?function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=or(e))&&(r&&(r+=" "),r+=t);return r}(e):e??""}const sr=[..." \t\n\r\f \v\ufeff"];function lr(e,t,n,r,i,o){var a=e.__className;if(j||a!==n||void 0===a){var s=function(e,t,n){var r=null==e?"":""+e;if(t&&(r=r?r+" "+t:t),n)for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,a=0;(a=r.indexOf(i,a))>=0;){var s=a+o;0!==a&&!sr.includes(r[a-1])||s!==r.length&&!sr.includes(r[s])?a=s:r=(0===a?"":r.substring(0,a))+r.substring(s+1)}return""===r?null:r}(n,r,o);j&&s===e.getAttribute("class")||(null==s?e.removeAttribute("class"):t?e.className=s:e.setAttribute("class",s)),e.__className=n}else if(o&&i!==o)for(var l in o){var u=!!o[l];null!=i&&u===!!i[l]||e.classList.toggle(l,u)}return o}function ur(e,t,n,r){var i=e.__style;if(j||i!==t){var o=function(e){return null==e?null:String(e)}(t);j&&o===e.getAttribute("style")||(null==o?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}return r}const cr=Symbol("is custom element"),hr=Symbol("is html");function dr(e){if(j){var t,n=!1,r=()=>{if(!n){if(n=!0,e.hasAttribute("value")){var t=e.value;gr(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var r=e.checked;gr(e,"checked",null),e.checked=r}}};e.__on_r=r,t=r,0===fe.length&&he(ge),fe.push(t),gt()}}function fr(e,t){var n=mr(e);n.value!==(n.value=t??void 0)&&(e.value!==t||0===t&&"PROGRESS"===e.nodeName)&&(e.value=t??"")}function pr(e,t){var n=mr(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function gr(e,t,n,r){var i=mr(e);j&&(i[t]=e.getAttribute(t),"src"===t||"srcset"===t||"href"===t&&"LINK"===e.nodeName)||i[t]!==(i[t]=n)&&("loading"===t&&(e[D]=n),null==n?e.removeAttribute(t):"string"!=typeof n&&function(e){var t,n=e.getAttribute("is")||e.nodeName,r=vr.get(n);if(r)return r;vr.set(n,r=[]);var i=e,o=Element.prototype;for(;o!==i;){for(var s in t=a(i))t[s].set&&r.push(s);i=u(i)}return r}(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function mr(e){return e.__attributes??={[cr]:e.nodeName.includes("-"),[hr]:"http://www.w3.org/1999/xhtml"===e.namespaceURI}}var vr=new Map;const yr=new Set;function br(e,t,n,r,i=r){var o="checkbox"===n.getAttribute("type"),a=e;let s=!1;if(null!==t)for(var l of t)a=a[l]??=[];a.push(n),vt(n,"change",()=>{var e=n.__value;o&&(e=wr(a,e,n.checked)),i(e)},()=>i(o?[]:null)),St(()=>{var e,t,i=r();j&&n.defaultChecked!==n.checked?s=!0:o?(i=i||[],n.checked=i.includes(n.__value)):n.checked=(e=n.__value,t=i,Object.is(et(e),et(t)))}),xt(()=>{var e=a.indexOf(n);-1!==e&&a.splice(e,1)}),yr.has(a)||(yr.add(a),me(()=>{a.sort((e,t)=>4===e.compareDocumentPosition(t)?-1:1),yr.delete(a)})),me(()=>{if(s){var e;if(o)e=wr(a,e,n.checked);else{var t=a.find(e=>e.checked);e=t?.__value}i(e)}})}function xr(e,t,n=t){vt(e,"change",t=>{var r=t?e.defaultChecked:e.checked;n(r)}),(j&&e.defaultChecked!==e.checked||null==vn(t))&&n(e.checked),St(()=>{var n=t();e.checked=Boolean(n)})}function wr(e,t,n){for(var r=new Set,i=0;i<e.length;i+=1)e[i].checked&&r.add(e[i].__value);return n||r.delete(t),Array.from(r)}function Er(e,t){return e===t||e?.[L]===t}function Tr(e={},t,n,r){return _t(()=>{var r,i;return St(()=>{r=i,i=[],vn(()=>{e!==n(...i)&&(t(e,...i),r&&Er(n(...r),e)&&t(null,...r))})}),()=>{me(()=>{i&&Er(n(...i),e)&&t(null,...i)})}}),e}function _r(e=!1){const t=te,n=t.l.u;if(!n)return;let r=()=>xn(t.s);if(e){let e=0,n={};const i=be(()=>{let r=!1;const i=t.s;for(const e in i)i[e]!==n[e]&&(n[e]=i[e],r=!0);return r&&e++,e});r=()=>gn(i)}n.b.length&&Tt(()=>{kr(t,r),f(n.b)}),wt(()=>{const e=vn(()=>n.m.map(d));return()=>{for(const t of e)"function"==typeof t&&t()}}),n.a.length&&wt(()=>{kr(t,r),f(n.a)})}function kr(e,t){if(e.l.s)for(const n of e.l.s)gn(n);t()}function Ar(e,t,n){if(null==e)return t(void 0),h;const r=vn(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Sr=[];function Nr(e,t=h){let n=null;const r=new Set;function i(t){if(Q(e,t)&&(e=t,n)){const t=!Sr.length;for(const n of r)n[1](),Sr.push(n,e);if(t){for(let e=0;e<Sr.length;e+=2)Sr[e][0](Sr[e+1]);Sr.length=0}}}function o(t){i(t(e))}return{set:i,update:o,subscribe:function(a,s=h){const l=[a,s];return r.add(l),1===r.size&&(n=t(i,o)||h),a(e),()=>{r.delete(l),0===r.size&&n&&(n(),n=null)}}}}let Mr=!1,Cr=Symbol();function Ir(e,t,n){const r=n[t]??={store:null,source:qe(void 0),unsubscribe:h};if(r.store!==e&&!(Cr in n))if(r.unsubscribe(),r.store=e??null,null==e)r.source.v=void 0,r.unsubscribe=h;else{var i=!0;r.unsubscribe=Ar(e,e=>{i?r.source.v=e:Xe(r.source,e)}),i=!1}return e&&Cr in n?function(e){let t;return Ar(e,e=>t=e)(),t}(e):gn(r.source)}function Rr(){const e={};return[e,function(){xt(()=>{for(var t in e){e[t].unsubscribe()}i(e,Cr,{enumerable:!1,value:!0})})}]}function Lr(e,t,n,r){var i,a,s=!ee||!!(2&n),l=!!(8&n),u=!!(16&n),c=r,h=!0,d=()=>(h&&(h=!1,c=u?vn(r):r),c);if(l){var f=L in e||O in e;i=o(e,t)?.set??(f&&t in e?n=>e[t]=n:void 0)}var p,g=!1;if(l?[a,g]=function(e){var t=Mr;try{return Mr=!1,[e(),Mr]}finally{Mr=t}}(()=>e[t]):a=e[t],void 0===a&&void 0!==r&&(a=d(),i&&(s&&function(){throw new Error("https://svelte.dev/e/props_invalid_value")}(),i(a))),p=s?()=>{var n=e[t];return void 0===n?d():(h=!0,n)}:()=>{var n=e[t];return void 0!==n&&(c=void 0),void 0===n?c:n},s&&!(4&n))return p;if(i){var m=e.$$legacy;return function(e,t){return arguments.length>0?(s&&t&&!m&&!g||i(t?p():e),e):p()}}var v=!1,y=(1&n?be:Ee)(()=>(v=!1,p()));l&&gn(y);var b=Wt;return function(e,t){if(arguments.length>0){const n=t?gn(y):s&&l?Je(e):e;return Xe(y,n),v=!0,void 0!==c&&(c=n),e}return jt&&v||0!==(b.f&_)?y.v:gn(y)}}function Or(e){return class extends Dr{constructor(t){super({component:e,...t})}}}class Dr{#g;#m;constructor(e){var t=new Map,n=(e,n)=>{var r=qe(n,!1,!1);return t.set(e,r),r};const r=new Proxy({...e.props||{},$$events:{}},{get:(e,r)=>gn(t.get(r)??n(r,Reflect.get(e,r))),has:(e,r)=>r===O||(gn(t.get(r)??n(r,Reflect.get(e,r))),Reflect.has(e,r)),set:(e,r,i)=>(Xe(t.get(r)??n(r,i),i),Reflect.set(e,r,i))});this.#m=(e.hydrate?jn:Vn)(e.component,{target:e.target,anchor:e.anchor,props:r,context:e.context,intro:e.intro??!1,recover:e.recover}),e?.props?.$$host&&!1!==e.sync||Fe(),this.#g=r.$$events;for(const o of Object.keys(this.#m))"$set"!==o&&"$destroy"!==o&&"$on"!==o&&i(this,o,{get(){return this.#m[o]},set(e){this.#m[o]=e},enumerable:!0});this.#m.$set=e=>{Object.assign(r,e)},this.#m.$destroy=()=>{qn(this.#m)}}$set(e){this.#m.$set(e)}$on(e,t){this.#g[e]=this.#g[e]||[];const n=(...e)=>t.call(this,...e);return this.#g[e].push(n),()=>{this.#g[e]=this.#g[e].filter(e=>e!==n)}}$destroy(){this.#m.$destroy()}}function Pr(e){null===te&&B(),ee&&null!==te.l?Br(te).m.push(e):wt(()=>{const t=vn(e);if("function"==typeof t)return t})}function Br(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Fr=Object.freeze(Object.defineProperty({__proto__:null,afterUpdate:function(e){null===te&&B(),null===te.l&&F(),Br(te).a.push(e)},beforeUpdate:function(e){null===te&&B(),null===te.l&&F(),Br(te).b.push(e)},createEventDispatcher:function(){const e=te;return null===e&&B(),(n,r,i)=>{const o=e.s.$$events?.[n];if(o){const a=t(o)?o.slice():[o],s=function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}(n,r,i);for(const t of a)t.call(e.x,s);return!s.defaultPrevented}return!0}},createRawSnippet:function(e){return(t,...n)=>{var r,i=e(...n);j?(r=V,Y()):(r=lt(Rn(i.render().trim())),t.before(r));const o=i.setup?.(r);Ln(r,r),"function"==typeof o&&xt(o)}},flushSync:Fe,getAbortSignal:function(){return null===$t&&function(){throw new Error("https://svelte.dev/e/get_abort_signal_outside_reaction")}(),($t.ac??=new AbortController).signal},getAllContexts:function(){return se()},getContext:function(e){return se().get(e)},hasContext:function(e){return se().has(e)},hydrate:jn,mount:Vn,onDestroy:function(e){null===te&&B(),Pr(()=>()=>vn(e))},onMount:Pr,setContext:re,settled:function(){return Be.ensure().settled()},tick:pn,unmount:qn,untrack:vn},Symbol.toStringTag,{value:"Module"}));class zr{constructor(e,t){this.status=e,this.body="string"==typeof t?{message:t}:t||{message:`Error: ${e}`}}toString(){return JSON.stringify(this.body)}}class Ur{constructor(e,t){this.status=e,this.location=t}}class Gr extends Error{constructor(e,t,n){super(n),this.status=e,this.text=t}}function Vr(e){for(const t in e)e[t]=decodeURIComponent(e[t]);return e}function jr({href:e}){return e.split("#")[0]}function Hr(e,t,n,r=!1){const i=new URL(e);Object.defineProperty(i,"searchParams",{value:new Proxy(i.searchParams,{get(e,r){if("get"===r||"getAll"===r||"has"===r)return t=>(n(t),e[r](t));t();const i=Reflect.get(e,r);return"function"==typeof i?i.bind(e):i}}),enumerable:!0,configurable:!0});const o=["href","pathname","search","toString","toJSON"];r&&o.push("hash");for(const a of o)Object.defineProperty(i,a,{get:()=>(t(),e[a]),enumerable:!0,configurable:!0});return i}new URL("sveltekit-internal://"),new TextEncoder;const $r=new TextDecoder;const Yr=window.fetch;window.fetch=(e,t)=>("GET"!==(e instanceof Request?e.method:t?.method||"GET")&&qr.delete(Xr(e)),Yr(e,t));const qr=new Map;function Wr(e,t){const n=Xr(e,t),r=document.querySelector(n);if(r?.textContent){r.remove();let{body:e,...t}=JSON.parse(r.textContent);const i=r.getAttribute("data-ttl");i&&qr.set(n,{body:e,init:t,ttl:1e3*Number(i)});return null!==r.getAttribute("data-b64")&&(e=function(e){const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(e)),Promise.resolve(new Response(e,t))}return window.fetch(e,t)}function Xr(e,t){let n=`script[data-sveltekit-fetched][data-url=${JSON.stringify(e instanceof Request?e.url:e)}]`;if(t?.headers||t?.body){const e=[];t.headers&&e.push([...new Headers(t.headers)].join(",")),t.body&&("string"==typeof t.body||ArrayBuffer.isView(t.body))&&e.push(t.body),n+=`[data-hash="${function(...e){let t=5381;for(const n of e)if("string"==typeof n){let e=n.length;for(;e;)t=33*t^n.charCodeAt(--e)}else{if(!ArrayBuffer.isView(n))throw new TypeError("value must be a string or TypedArray");{const e=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);let r=e.length;for(;r;)t=33*t^e[--r]}}return(t>>>0).toString(36)}(...e)}"]`}return n}const Kr=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function Zr(e){return""!==e&&!/^\([^)]+\)$/.test(e)}function Qr(e){return e.slice(1).split("/").filter(Zr)}function Jr(e){return e.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}const ei=/\[(\[)?(\.\.\.)?(\w+?)(?:=(\w+))?\]\]?/g;function ti({nodes:e,server_loads:t,dictionary:n,matchers:r}){const i=new Set(t);return Object.entries(n).map(([t,[n,i,s]])=>{const{pattern:l,params:u}=function(e){const t=[],n="/"===e?/^\/$/:new RegExp(`^${Qr(e).map(e=>{const n=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(e);if(n)return t.push({name:n[1],matcher:n[2],optional:!1,rest:!0,chained:!0}),"(?:/([^]*))?";const r=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(e);if(r)return t.push({name:r[1],matcher:r[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!e)return;const i=e.split(/\[(.+?)\](?!\])/),o=i.map((e,n)=>{if(n%2){if(e.startsWith("x+"))return Jr(String.fromCharCode(parseInt(e.slice(2),16)));if(e.startsWith("u+"))return Jr(String.fromCharCode(...e.slice(2).split("-").map(e=>parseInt(e,16))));const r=Kr.exec(e),[,o,a,s,l]=r;return t.push({name:s,matcher:l,optional:!!o,rest:!!a,chained:!!a&&1===n&&""===i[0]}),a?"([^]*?)":o?"([^/]*)?":"([^/]+?)"}return Jr(e)}).join("");return"/"+o}).join("")}/?$`);return{pattern:n,params:t}}(t),c={id:t,exec:e=>{const t=l.exec(e);if(t)return function(e,t,n){const r={},i=e.slice(1),o=i.filter(e=>void 0!==e);let a=0;for(let s=0;s<t.length;s+=1){const e=t[s];let l=i[s-a];if(e.chained&&e.rest&&a&&(l=i.slice(s-a,s+1).filter(e=>e).join("/"),a=0),void 0!==l){if(!e.matcher||n[e.matcher](l)){r[e.name]=l;const n=t[s+1],u=i[s+1];n&&!n.rest&&n.optional&&u&&e.chained&&(a=0),n||u||Object.keys(r).length!==o.length||(a=0);continue}if(!e.optional||!e.chained)return;a++}else e.rest&&(r[e.name]="")}if(!a)return r}(t,u,r)},errors:[1,...s||[]].map(t=>e[t]),layouts:[0,...i||[]].map(a),leaf:o(n)};return c.errors.length=c.layouts.length=Math.max(c.errors.length,c.layouts.length),c});function o(t){const n=t<0;return n&&(t=~t),[n,e[t]]}function a(t){return void 0===t?t:[i.has(t),e[t]]}}function ni(e,t=JSON.parse){try{return t(sessionStorage[e])}catch{}}function ri(e,t,n=JSON.stringify){const r=n(t);try{sessionStorage[e]=r}catch{}}const ii=globalThis.__sveltekit_3m1v7j?.base??"",oi=globalThis.__sveltekit_3m1v7j?.assets??ii,ai="sveltekit:snapshot",si="sveltekit:scroll",li="sveltekit:states",ui="sveltekit:pageurl",ci="sveltekit:history",hi="sveltekit:navigation",di={tap:1,hover:2,viewport:3,eager:4,off:-1,false:-1},fi=location.origin;function pi(e){if(e instanceof URL)return e;let t=document.baseURI;if(!t){const e=document.getElementsByTagName("base");t=e.length?e[0].href:document.URL}return new URL(e,t)}function gi(){return{x:pageXOffset,y:pageYOffset}}function mi(e,t){return e.getAttribute(`data-sveltekit-${t}`)}const vi={...di,"":di.hover};function yi(e){let t=e.assignedSlot??e.parentNode;return 11===t?.nodeType&&(t=t.host),t}function bi(e,t){for(;e&&e!==t;){if("A"===e.nodeName.toUpperCase()&&e.hasAttribute("href"))return e;e=yi(e)}}function xi(e,t,n){let r;try{if(r=new URL(e instanceof SVGAElement?e.href.baseVal:e.href,document.baseURI),n&&r.hash.match(/^#[^/]/)){const e=location.hash.split("#")[1]||"/";r.hash=`#${e}${r.hash}`}}catch{}const i=e instanceof SVGAElement?e.target.baseVal:e.target;return{url:r,external:!r||!!i||ki(r,t,n)||(e.getAttribute("rel")||"").split(/\s+/).includes("external"),target:i,download:r?.origin===fi&&e.hasAttribute("download")}}function wi(e){let t=null,n=null,r=null,i=null,o=null,a=null,s=e;for(;s&&s!==document.documentElement;)null===r&&(r=mi(s,"preload-code")),null===i&&(i=mi(s,"preload-data")),null===t&&(t=mi(s,"keepfocus")),null===n&&(n=mi(s,"noscroll")),null===o&&(o=mi(s,"reload")),null===a&&(a=mi(s,"replacestate")),s=yi(s);function l(e){switch(e){case"":case"true":return!0;case"off":case"false":return!1;default:return}}return{preload_code:vi[r??"off"],preload_data:vi[i??"off"],keepfocus:l(t),noscroll:l(n),reload:l(o),replace_state:l(a)}}function Ei(e){const t=Nr(e);let n=!0;return{notify:function(){n=!0,t.update(e=>e)},set:function(e){n=!1,t.set(e)},subscribe:function(e){let r;return t.subscribe(t=>{(void 0===r||n&&t!==r)&&e(r=t)})}}}const Ti={v:()=>{}};function _i(){const{set:e,subscribe:t}=Nr(!1);let n;return{subscribe:t,check:async function(){clearTimeout(n);try{const t=await fetch(`${oi}/_app/version.json`,{headers:{pragma:"no-cache","cache-control":"no-cache"}});if(!t.ok)return!1;const r="1756580298320"!==(await t.json()).version;return r&&(e(!0),Ti.v(),clearTimeout(n)),r}catch{return!1}}}}function ki(e,t,n){return e.origin!==fi||!e.pathname.startsWith(t)||!!n&&(e.pathname!==t+"/"&&e.pathname!==t+"/index.html"&&("file:"!==e.protocol||e.pathname.replace(/\/[^/]+\.html?$/,"")!==t))}function Ai(e){}function Si(e){const t=function(e){e.length%4==0&&(e=e.replace(/==?$/,""));let t="",n=0,r=0;for(let i=0;i<e.length;i++)n<<=6,n|=Ni.indexOf(e[i]),r+=6,24===r&&(t+=String.fromCharCode((16711680&n)>>16),t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n),n=r=0);12===r?(n>>=4,t+=String.fromCharCode(n)):18===r&&(n>>=2,t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n));return t}(e),n=new ArrayBuffer(t.length),r=new DataView(n);for(let i=0;i<n.byteLength;i++)r.setUint8(i,t.charCodeAt(i));return n}const Ni="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";const Mi=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);function Ci(e){return e instanceof zr||e instanceof Gr?e.status:500}let Ii,Ri,Li;Pr.toString().includes("$$")||/function \w+\(\) \{\}/.test(Pr.toString())?(Ii={data:{},form:null,error:null,params:{},route:{id:null},state:{},status:-1,url:new URL("https://example.com")},Ri={current:null},Li={current:!1}):(Ii=new class{#v=Ye({});get data(){return gn(this.#v)}set data(e){Xe(this.#v,e)}#y=Ye(null);get form(){return gn(this.#y)}set form(e){Xe(this.#y,e)}#b=Ye(null);get error(){return gn(this.#b)}set error(e){Xe(this.#b,e)}#x=Ye({});get params(){return gn(this.#x)}set params(e){Xe(this.#x,e)}#w=Ye({id:null});get route(){return gn(this.#w)}set route(e){Xe(this.#w,e)}#E=Ye({});get state(){return gn(this.#E)}set state(e){Xe(this.#E,e)}#T=Ye(-1);get status(){return gn(this.#T)}set status(e){Xe(this.#T,e)}#_=Ye(new URL("https://example.com"));get url(){return gn(this.#_)}set url(e){Xe(this.#_,e)}},Ri=new class{#k=Ye(null);get current(){return gn(this.#k)}set current(e){Xe(this.#k,e)}},Li=new class{#k=Ye(!1);get current(){return gn(this.#k)}set current(e){Xe(this.#k,e)}},Ti.v=()=>Li.current=!0);const Oi={spanContext:()=>Di,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this},addLink(){return this},addLinks(){return this}},Di={traceId:"",spanId:"",traceFlags:0},{tick:Pi}=Fr,Bi=new Set(["icon","shortcut icon","apple-touch-icon"]),Fi=ni(si)??{},zi=ni(ai)??{},Ui={url:Ei({}),page:Ei({}),navigating:Nr(null),updated:_i()};function Gi(e){Fi[e]=gi()}function Vi(e){return location.href=e.href,new Promise(()=>{})}async function ji(){if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistration(ii||"/");e&&await e.update()}}function Hi(){}let $i,Yi,qi,Wi,Xi,Ki;globalThis.__sveltekit_3m1v7j;const Zi=[],Qi=[];let Ji=null;const eo=new Map,to=new Set,no=new Set,ro=new Set;let io,oo,ao,so,lo={branch:[],error:null,url:null},uo=!1,co=!1,ho=!0,fo=!1,po=!1,go=!1,mo=!1;const vo=new Set,yo=new Map;async function bo(e,t,n){document.URL!==location.href&&(location.href=location.href),Ki=e,await(e.hooks.init?.()),$i=ti(e),Wi=document.documentElement,Xi=t,Yi=e.nodes[0],qi=e.nodes[1],Yi(),qi(),oo=history.state?.[ci],ao=history.state?.[hi],oo||(oo=ao=Date.now(),history.replaceState({...history.state,[ci]:oo,[hi]:ao},""));const r=Fi[oo];function i(){r&&(history.scrollRestoration="manual",scrollTo(r.x,r.y))}n?(i(),await async function(e,{status:t=200,error:n,node_ids:r,params:i,route:o,server_route:a,data:s,form:l}){uo=!0;const u=new URL(location.href);let c,h;({params:i={},route:o={id:null}}=await Do(u,!1)||{}),c=$i.find(({id:e})=>e===o.id);let d=!0;try{const e=r.map(async(t,n)=>{const r=s[n];return r?.uses&&(r.uses=jo(r.uses)),So({loader:Ki.nodes[t],url:u,params:i,route:o,parent:async()=>{const t={};for(let r=0;r<n;r+=1)Object.assign(t,(await e[r]).data);return t},server_data_node:Co(r)})}),a=await Promise.all(e);if(c){const e=c.layouts;for(let t=0;t<e.length;t++)e[t]||a.splice(t,0,void 0)}h=Ao({url:u,params:i,branch:a,status:t,error:n,form:l,route:c??null})}catch(f){if(f instanceof Ur)return void(await Vi(new URL(f.location,location.href)));h=await Oo({status:Ci(f),error:await Uo(f,{url:u,params:i,route:o}),url:u,route:o}),e.textContent="",d=!1}h.props.page&&(h.props.page.state={});ko(h,e,d)}(Xi,n)):(await Fo({type:"enter",url:pi(Ki.hash?qo(new URL(location.href)):location.href),replace_state:!0}),i()),function(){history.scrollRestoration="manual",addEventListener("beforeunload",e=>{let t=!1;if(Eo(),!fo){const e=$o(lo,void 0,null,"leave"),n={...e.navigation,cancel:()=>{t=!0,e.reject(new Error("navigation cancelled"))}};to.forEach(e=>e(n))}t?(e.preventDefault(),e.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&Eo()}),navigator.connection?.saveData||function(){let e,t,n;function r(e){e.defaultPrevented||o(e.composedPath()[0],di.tap)}Wi.addEventListener("mousemove",t=>{const n=t.target;clearTimeout(e),e=setTimeout(()=>{o(n,di.hover)},20)}),Wi.addEventListener("mousedown",r),Wi.addEventListener("touchstart",r,{passive:!0});const i=new IntersectionObserver(e=>{for(const t of e)t.isIntersecting&&(_o(new URL(t.target.href)),i.unobserve(t.target))},{threshold:0});async function o(e,r){const i=bi(e,Wi);if(!i||i===t&&r>=n)return;const{url:o,external:a,download:s}=xi(i,ii,Ki.hash);if(a||s)return;const l=wi(i),u=o&&Po(lo.url)===Po(o);if(!l.reload&&!u)if(r<=l.preload_data){t=i,n=di.tap;const e=await Do(o,!1);if(!e)return;!async function(e){if(e.id!==Ji?.id){const t={};vo.add(t),Ji={id:e.id,token:t,promise:Ro({...e,preload:t}).then(e=>(vo.delete(t),"loaded"===e.type&&e.state.error&&(Ji=null),e))}}Ji.promise}(e)}else r<=l.preload_code&&(t=i,n=r,_o(o))}function a(){i.disconnect();for(const e of Wi.querySelectorAll("a")){const{url:t,external:n,download:r}=xi(e,ii,Ki.hash);if(n||r)continue;const o=wi(e);o.reload||(o.preload_code===di.viewport&&i.observe(e),o.preload_code===di.eager&&_o(t))}}ro.add(a),a()}();Wi.addEventListener("click",async t=>{if(t.button||1!==t.which)return;if(t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)return;if(t.defaultPrevented)return;const n=bi(t.composedPath()[0],Wi);if(!n)return;const{url:r,external:i,target:o,download:a}=xi(n,ii,Ki.hash);if(!r)return;if("_parent"===o||"_top"===o){if(window.parent!==window)return}else if(o&&"_self"!==o)return;const s=wi(n);if(!(n instanceof SVGAElement)&&r.protocol!==location.protocol&&"https:"!==r.protocol&&"http:"!==r.protocol)return;if(a)return;const[l,u]=(Ki.hash?r.hash.replace(/^#/,""):r.href).split("#"),c=l===jr(location);if(!i&&(!s.reload||c&&u)){if(void 0!==u&&c){const[,i]=lo.url.href.split("#");if(i===u){if(t.preventDefault(),""===u||"top"===u&&null===n.ownerDocument.getElementById("top"))window.scrollTo({top:0});else{const e=n.ownerDocument.getElementById(decodeURIComponent(u));e&&(e.scrollIntoView(),e.focus())}return}if(po=!0,Gi(oo),e(r),!s.replace_state)return;po=!1}t.preventDefault(),await new Promise(e=>{requestAnimationFrame(()=>{setTimeout(e,0)}),setTimeout(e,100)}),await Fo({type:"link",url:r,keepfocus:s.keepfocus,noscroll:s.noscroll,replace_state:s.replace_state??r.href===location.href})}else Bo({url:r,type:"link"})?fo=!0:t.preventDefault()}),Wi.addEventListener("submit",e=>{if(e.defaultPrevented)return;const t=HTMLFormElement.prototype.cloneNode.call(e.target),n=e.submitter;if("_blank"===(n?.formTarget||t.target))return;if("get"!==(n?.formMethod||t.method))return;const r=new URL(n?.hasAttribute("formaction")&&n?.formAction||t.action);if(ki(r,ii,!1))return;const i=e.target,o=wi(i);if(o.reload)return;e.preventDefault(),e.stopPropagation();const a=new FormData(i),s=n?.getAttribute("name");s&&a.append(s,n?.getAttribute("value")??""),r.search=new URLSearchParams(a).toString(),Fo({type:"form",url:r,keepfocus:o.keepfocus,noscroll:o.noscroll,replace_state:o.replace_state??r.href===location.href})}),addEventListener("popstate",async t=>{if(!Ho)if(t.state?.[ci]){const n=t.state[ci];if(so={},n===oo)return;const r=Fi[n],i=t.state[li]??{},o=new URL(t.state[ui]??location.href),a=t.state[hi],s=!!lo.url&&jr(location)===jr(lo.url);if(a===ao&&(go||s))return i!==Ii.state&&(Ii.state=i),e(o),Fi[oo]=gi(),r&&scrollTo(r.x,r.y),void(oo=n);const l=n-oo;await Fo({type:"popstate",url:o,popped:{state:i,scroll:r,delta:l},accept:()=>{oo=n,ao=a},block:()=>{history.go(-l)},nav_token:so})}else if(!po){e(new URL(location.href)),Ki.hash&&location.reload()}}),addEventListener("hashchange",()=>{po&&(po=!1,history.replaceState({...history.state,[ci]:++oo,[hi]:ao},"",location.href))});for(const t of document.querySelectorAll("link"))Bi.has(t.rel)&&(t.href=t.href);function e(e){lo.url=Ii.url=e,Ui.page.set(Yo(Ii)),Ui.page.notify()}addEventListener("pageshow",e=>{e.persisted&&Ui.navigating.set(Ri.current=null)})}()}function xo(e){Qi.some(e=>e?.snapshot)&&(zi[e]=Qi.map(e=>e?.snapshot?.capture()))}function wo(e){zi[e]?.forEach((e,t)=>{Qi[t]?.snapshot?.restore(e)})}function Eo(){Gi(oo),ri(si,Fi),xo(ao),ri(ai,zi)}async function To(e,t,n,r){let i;const o=await Fo({type:"goto",url:pi(e),keepfocus:t.keepFocus,noscroll:t.noScroll,replace_state:t.replaceState,state:t.state,redirect_count:n,nav_token:r,accept:()=>{t.invalidateAll&&(mo=!0,i=[...yo.keys()]),t.invalidate&&t.invalidate.forEach(Go)}});return t.invalidateAll&&pn().then(pn).then(()=>{yo.forEach(({resource:e},t)=>{i?.includes(t)&&e.refresh?.()})}),o}async function _o(e){const t=(await Do(e,!1))?.route;t&&await Promise.all([...t.layouts,t.leaf].map(e=>e?.[1]()))}function ko(e,t,n){lo=e.state;const r=document.querySelector("style[data-sveltekit]");if(r&&r.remove(),Object.assign(Ii,e.props.page),io=new Ki.root({target:t,props:{...e.props,stores:Ui,components:Qi},hydrate:n,sync:!1}),wo(ao),n){const e={from:null,to:{params:lo.params,route:{id:lo.route?.id??null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};ro.forEach(t=>t(e))}co=!0}function Ao({url:e,params:t,branch:n,status:r,error:i,route:o,form:a}){let s="never";if(!ii||e.pathname!==ii&&e.pathname!==ii+"/")for(const g of n)void 0!==g?.slash&&(s=g.slash);else s="always";var l,u;e.pathname=(l=e.pathname,u=s,"/"===l||"ignore"===u?l:"never"===u?l.endsWith("/")?l.slice(0,-1):l:"always"!==u||l.endsWith("/")?l:l+"/"),e.search=e.search;const c={type:"loaded",state:{url:e,params:t,branch:n,error:i,route:o},props:{constructors:(h=n,h.filter(e=>null!=e)).map(e=>e.node.component),page:Yo(Ii)}};var h;void 0!==a&&(c.props.form=a);let d={},f=!Ii,p=0;for(let g=0;g<Math.max(n.length,lo.branch.length);g+=1){const e=n[g],t=lo.branch[g];e?.data!==t?.data&&(f=!0),e&&(d={...d,...e.data},f&&(c.props[`data_${p}`]=d),p+=1)}return(!lo.url||e.href!==lo.url.href||lo.error!==i||void 0!==a&&a!==Ii.form||f)&&(c.props.page={error:i,params:t,route:{id:o?.id??null},state:{},status:r,url:new URL(e),form:a??null,data:f?d:Ii.data}),c}async function So({loader:e,parent:t,url:n,params:r,route:i,server_data_node:o}){let a=null,s=!0;const l={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},u=await e();if(u.universal?.load){let e=function(...e){for(const t of e){const{href:e}=new URL(t,n);l.dependencies.add(e)}};const c={tracing:{enabled:!1,root:Oi,current:Oi},route:new Proxy(i,{get:(e,t)=>(s&&(l.route=!0),e[t])}),params:new Proxy(r,{get:(e,t)=>(s&&l.params.add(t),e[t])}),data:o?.data??null,url:Hr(n,()=>{s&&(l.url=!0)},e=>{s&&l.search_params.add(e)},Ki.hash),async fetch(t,r){t instanceof Request&&(r={body:"GET"===t.method||"HEAD"===t.method?void 0:await t.blob(),cache:t.cache,credentials:t.credentials,headers:[...t.headers].length>0?t?.headers:void 0,integrity:t.integrity,keepalive:t.keepalive,method:t.method,mode:t.mode,redirect:t.redirect,referrer:t.referrer,referrerPolicy:t.referrerPolicy,signal:t.signal,...r});const{resolved:i,promise:o}=No(t,r,n);return s&&e(i.href),o},setHeaders:()=>{},depends:e,parent:()=>(s&&(l.parent=!0),t()),untrack(e){s=!1;try{return e()}finally{s=!0}}};a=await u.universal.load.call(null,c)??null}return{node:u,loader:e,server:o,universal:u.universal?.load?{type:"data",data:a,uses:l}:null,data:a??o?.data??null,slash:u.universal?.trailingSlash??o?.slash}}function No(e,t,n){let r=e instanceof Request?e.url:e;const i=new URL(r,n);i.origin===n.origin&&(r=i.href.slice(n.origin.length));const o=co?function(e,t,n){if(qr.size>0){const t=Xr(e,n),r=qr.get(t);if(r){if(performance.now()<r.ttl&&["default","force-cache","only-if-cached",void 0].includes(n?.cache))return new Response(r.body,r.init);qr.delete(t)}}return window.fetch(t,n)}(r,i.href,t):Wr(r,t);return{resolved:i,promise:o}}function Mo(e,t,n,r,i,o){if(mo)return!0;if(!i)return!1;if(i.parent&&e)return!0;if(i.route&&t)return!0;if(i.url&&n)return!0;for(const a of i.search_params)if(r.has(a))return!0;for(const a of i.params)if(o[a]!==lo.params[a])return!0;for(const a of i.dependencies)if(Zi.some(e=>e(new URL(a))))return!0;return!1}function Co(e,t){return"data"===e?.type?e:"skip"===e?.type?t??null:null}function Io({error:e,url:t,route:n,params:r}){return{type:"loaded",state:{error:e,url:t,route:n,params:r,branch:[]},props:{page:Yo(Ii),constructors:[]}}}async function Ro({id:e,invalidating:t,url:n,params:r,route:i,preload:o}){if(Ji?.id===e)return vo.delete(Ji.token),Ji.promise;const{errors:a,layouts:s,leaf:l}=i,u=[...s,l];a.forEach(e=>e?.().catch(()=>{})),u.forEach(e=>e?.[1]().catch(()=>{}));let c=null;const h=!!lo.url&&e!==Po(lo.url),d=!!lo.route&&i.id!==lo.route.id,f=function(e,t){if(!e)return new Set(t.searchParams.keys());const n=new Set([...e.searchParams.keys(),...t.searchParams.keys()]);for(const r of n){const i=e.searchParams.getAll(r),o=t.searchParams.getAll(r);i.every(e=>o.includes(e))&&o.every(e=>i.includes(e))&&n.delete(r)}return n}(lo.url,n);let p=!1;const g=u.map((e,t)=>{const n=lo.branch[t],i=!!e?.[0]&&(n?.loader!==e[1]||Mo(p,d,h,f,n.server?.uses,r));return i&&(p=!0),i});if(g.some(Boolean)){try{c=await Vo(n,g)}catch(x){const t=await Uo(x,{url:n,params:r,route:{id:e}});return vo.has(o)?Io({error:t,url:n,params:r,route:i}):Oo({status:Ci(x),error:t,url:n,route:i})}if("redirect"===c.type)return c}const m=c?.nodes;let v=!1;const y=u.map(async(e,t)=>{if(!e)return;const o=lo.branch[t],a=m?.[t];if(!(a&&"skip"!==a.type||e[1]!==o?.loader||Mo(v,d,h,f,o.universal?.uses,r)))return o;if(v=!0,"error"===a?.type)throw a;return So({loader:e[1],url:n,params:r,route:i,parent:async()=>{const e={};for(let n=0;n<t;n+=1)Object.assign(e,(await y[n])?.data);return e},server_data_node:Co(void 0===a&&e[0]?{type:"skip"}:a??null,e[0]?o?.server:void 0)})});for(const E of y)E.catch(()=>{});const b=[];for(let E=0;E<u.length;E+=1)if(u[E])try{b.push(await y[E])}catch(w){if(w instanceof Ur)return{type:"redirect",location:w.location};if(vo.has(o))return Io({error:await Uo(w,{params:r,url:n,route:{id:i.id}}),url:n,params:r,route:i});let e,t=Ci(w);if(m?.includes(w))t=w.status??t,e=w.error;else if(w instanceof zr)e=w.body;else{if(await Ui.updated.check())return await ji(),await Vi(n);e=await Uo(w,{params:r,url:n,route:{id:i.id}})}const s=await Lo(E,b,a);return s?Ao({url:n,params:r,branch:b.slice(0,s.idx).concat(s.node),status:t,error:e,route:i}):await zo(n,{id:i.id},e,t)}else b.push(void 0);return Ao({url:n,params:r,branch:b,status:200,error:null,route:i,form:t?void 0:null})}async function Lo(e,t,n){for(;e--;)if(n[e]){let r=e;for(;!t[r];)r-=1;try{return{idx:r+1,node:{node:await n[e](),loader:n[e],data:{},server:null,universal:null}}}catch{continue}}}async function Oo({status:e,error:t,url:n,route:r}){const i={};let o=null;if(0===Ki.server_loads[0])try{const e=await Vo(n,[!0]);if("data"!==e.type||e.nodes[0]&&"data"!==e.nodes[0].type)throw 0;o=e.nodes[0]??null}catch{(n.origin!==fi||n.pathname!==location.pathname||uo)&&await Vi(n)}try{const a=await So({loader:Yi,url:n,params:i,route:r,parent:()=>Promise.resolve({}),server_data_node:Co(o)});return Ao({url:n,params:i,branch:[a,{node:await qi(),loader:qi,universal:null,server:null,data:null}],status:e,error:t,route:null})}catch(a){if(a instanceof Ur)return To(new URL(a.location,location.href),{},0);throw a}}async function Do(e,t){if(e&&!ki(e,ii,Ki.hash)){const n=await async function(e){const t=e.href;if(eo.has(t))return eo.get(t);let n;try{const r=(async()=>{let t=await Ki.hooks.reroute({url:new URL(e),fetch:async(t,n)=>No(t,n,e).promise})??e;if("string"==typeof t){const n=new URL(e);Ki.hash?n.hash=t:n.pathname=t,t=n}return t})();eo.set(t,r),n=await r}catch(LY){return void eo.delete(t)}return n}(e);if(!n)return;const r=function(e){return t=Ki.hash?e.hash.replace(/^#/,"").replace(/[?#].+/,""):e.pathname.slice(ii.length),t.split("%25").map(decodeURI).join("%25")||"/";var t}(n);for(const i of $i){const n=i.exec(r);if(n)return{id:Po(e),invalidating:t,route:i,params:Vr(n),url:e}}}}function Po(e){return(Ki.hash?e.hash.replace(/^#/,""):e.pathname)+e.search}function Bo({url:e,type:t,intent:n,delta:r}){let i=!1;const o=$o(lo,n,e,t);void 0!==r&&(o.navigation.delta=r);const a={...o.navigation,cancel:()=>{i=!0,o.reject(new Error("navigation cancelled"))}};return fo||to.forEach(e=>e(a)),i?null:o}async function Fo({type:e,url:t,popped:n,keepfocus:r,noscroll:i,replace_state:o,state:a={},redirect_count:s=0,nav_token:l={},accept:u=Hi,block:c=Hi}){const h=so;so=l;const d=await Do(t,!1),f="enter"===e?$o(lo,d,t,e):Bo({url:t,type:e,delta:n?.delta,intent:d});if(!f)return c(),void(so===l&&(so=h));const p=oo,g=ao;u(),fo=!0,co&&"enter"!==f.navigation.type&&Ui.navigating.set(Ri.current=f.navigation);let m=d&&await Ro(d);if(!m){if(ki(t,ii,Ki.hash))return await Vi(t);m=await zo(t,{id:null},await Uo(new Gr(404,"Not Found",`Not found: ${t.pathname}`),{url:t,params:{},route:{id:null}}),404)}if(t=d?.url||t,so!==l)return f.reject(new Error("navigation aborted")),!1;if("redirect"===m.type){if(!(s>=20))return await To(new URL(m.location,t).href,{},s+1,l),!1;m=await Oo({status:500,error:await Uo(new Error("Redirect loop"),{url:t,params:{},route:{id:null}}),url:t,route:{id:null}})}else if(m.props.page.status>=400){await Ui.updated.check()&&(await ji(),await Vi(t))}if(Zi.length=0,mo=!1,Gi(p),xo(g),m.props.page.url.pathname!==t.pathname&&(t.pathname=m.props.page.url.pathname),a=n?n.state:a,!n){const e=o?0:1,n={[ci]:oo+=e,[hi]:ao+=e,[li]:a};(o?history.replaceState:history.pushState).call(history,n,"",t),o||function(e,t){let n=e+1;for(;Fi[n];)delete Fi[n],n+=1;for(n=t+1;zi[n];)delete zi[n],n+=1}(oo,ao)}if(Ji=null,m.props.page.state=a,co){const e=(await Promise.all(Array.from(no,e=>e(f.navigation)))).filter(e=>"function"==typeof e);if(e.length>0){let t=function(){e.forEach(e=>{ro.delete(e)})};e.push(t),e.forEach(e=>{ro.add(e)})}lo=m.state,m.props.page&&(m.props.page.url=t),io.$set(m.props),v=m.props.page,Object.assign(Ii,v),go=!0}else ko(m,Xi,!1);var v;const{activeElement:y}=document;await Pi();const b=n?n.scroll:i?gi():null;if(ho){const e=t.hash&&document.getElementById(Wo(t));b?scrollTo(b.x,b.y):e?e.scrollIntoView():scrollTo(0,0)}const x=document.activeElement!==y&&document.activeElement!==document.body;r||x||function(e){const t=document.querySelector("[autofocus]");if(t)t.focus();else{const t=Wo(e);if(t&&document.getElementById(t)){const{x:n,y:r}=gi();setTimeout(()=>{const i=history.state;Ho=!0,location.replace(`#${t}`),Ki.hash&&location.replace(e.hash),history.replaceState(i,"",e.hash),scrollTo(n,r),Ho=!1})}else{const e=document.body,t=e.getAttribute("tabindex");e.tabIndex=-1,e.focus({preventScroll:!0,focusVisible:!1}),null!==t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}const n=getSelection();if(n&&"None"!==n.type){const e=[];for(let t=0;t<n.rangeCount;t+=1)e.push(n.getRangeAt(t));setTimeout(()=>{if(n.rangeCount===e.length){for(let t=0;t<n.rangeCount;t+=1){const r=e[t],i=n.getRangeAt(t);if(r.commonAncestorContainer!==i.commonAncestorContainer||r.startContainer!==i.startContainer||r.endContainer!==i.endContainer||r.startOffset!==i.startOffset||r.endOffset!==i.endOffset)return}n.removeAllRanges()}})}}}(t),ho=!0,m.props.page&&Object.assign(Ii,m.props.page),fo=!1,"popstate"===e&&wo(ao),f.fulfil(void 0),ro.forEach(e=>e(f.navigation)),Ui.navigating.set(Ri.current=null)}async function zo(e,t,n,r){return e.origin!==fi||e.pathname!==location.pathname||uo?await Vi(e):await Oo({status:r,error:n,url:e,route:t})}function Uo(e,t){if(e instanceof zr)return e.body;const n=Ci(e),r=function(e){return e instanceof Gr?e.text:"Internal Error"}(e);return Ki.hooks.handleError({error:e,event:t,status:n,message:r})??{message:r}}function Go(e){if("function"==typeof e)Zi.push(e);else{const{href:t}=new URL(e,location.href);Zi.push(e=>e.href===t)}}async function Vo(e,t){const n=new URL(e);var r;n.pathname=(r=e.pathname).endsWith(".html")?r.replace(/\.html$/,".html__data.json"):r.replace(/\/$/,"")+"/__data.json",e.pathname.endsWith("/")&&n.searchParams.append("x-sveltekit-trailing-slash","1"),n.searchParams.append("x-sveltekit-invalidated",t.map(e=>e?"1":"0").join(""));const i=window.fetch,o=await i(n.href,{});if(!o.ok){let e;throw o.headers.get("content-type")?.includes("application/json")?e=await o.json():404===o.status?e="Not Found":500===o.status&&(e="Internal Error"),new zr(o.status,e)}return new Promise(async e=>{const t=new Map,n=o.body.getReader();function r(e){return function(e,t){if("number"==typeof e)return i(e,!0);if(!Array.isArray(e)||0===e.length)throw new Error("Invalid input");const n=e,r=Array(n.length);function i(e,o=!1){if(-1===e)return;if(-3===e)return NaN;if(-4===e)return 1/0;if(-5===e)return-1/0;if(-6===e)return-0;if(o||"number"!=typeof e)throw new Error("Invalid input");if(e in r)return r[e];const a=n[e];if(a&&"object"==typeof a)if(Array.isArray(a))if("string"==typeof a[0]){const n=a[0],o=t?.[n];if(o)return r[e]=o(i(a[1]));switch(n){case"Date":r[e]=new Date(a[1]);break;case"Set":const t=new Set;r[e]=t;for(let e=1;e<a.length;e+=1)t.add(i(a[e]));break;case"Map":const o=new Map;r[e]=o;for(let e=1;e<a.length;e+=2)o.set(i(a[e]),i(a[e+1]));break;case"RegExp":r[e]=new RegExp(a[1],a[2]);break;case"Object":r[e]=Object(a[1]);break;case"BigInt":r[e]=BigInt(a[1]);break;case"null":const s=Object.create(null);r[e]=s;for(let e=1;e<a.length;e+=2)s[a[e]]=i(a[e+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const t=new(0,globalThis[n])(i(a[1]));r[e]=void 0!==a[2]?t.subarray(a[2],a[3]):t;break}case"ArrayBuffer":{const t=Si(a[1]);r[e]=t;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const t=n.slice(9);r[e]=Temporal[t].from(a[1]);break}case"URL":{const t=new URL(a[1]);r[e]=t;break}case"URLSearchParams":{const t=new URLSearchParams(a[1]);r[e]=t;break}default:throw new Error(`Unknown type ${n}`)}}else{const t=new Array(a.length);r[e]=t;for(let e=0;e<a.length;e+=1){const n=a[e];-2!==n&&(t[e]=i(n))}}else{const t={};r[e]=t;for(const e in a){if("__proto__"===e)throw new Error("Cannot parse an object with a `__proto__` property");const n=a[e];t[e]=i(n)}}else r[e]=a;return r[e]}return i(0)}(e,{...Ki.decoders,Promise:e=>new Promise((n,r)=>{t.set(e,{fulfil:n,reject:r})})})}let i="";for(;;){const{done:o,value:a}=await n.read();if(o&&!i)break;for(i+=!a&&i?"\n":$r.decode(a,{stream:!0});;){const n=i.indexOf("\n");if(-1===n)break;const o=JSON.parse(i.slice(0,n));if(i=i.slice(n+1),"redirect"===o.type)return e(o);if("data"===o.type)o.nodes?.forEach(e=>{"data"===e?.type&&(e.uses=jo(e.uses),e.data=r(e.data))}),e(o);else if("chunk"===o.type){const{id:e,data:n,error:i}=o,a=t.get(e);t.delete(e),i?a.reject(r(i)):a.fulfil(r(n))}}}})}function jo(e){return{dependencies:new Set(e?.dependencies??[]),params:new Set(e?.params??[]),parent:!!e?.parent,route:!!e?.route,url:!!e?.url,search_params:new Set(e?.search_params??[])}}let Ho=!1;function $o(e,t,n,r){let i,o;const a=new Promise((e,t)=>{i=e,o=t});a.catch(()=>{});return{navigation:{from:{params:e.params,route:{id:e.route?.id??null},url:e.url},to:n&&{params:t?.params??null,route:{id:t?.route?.id??null},url:n},willUnload:!t,type:r,complete:a},fulfil:i,reject:o}}function Yo(e){return{data:e.data,error:e.error,form:e.form,params:e.params,route:e.route,state:e.state,status:e.status,url:e.url}}function qo(e){const t=new URL(e);return t.hash=decodeURIComponent(e.hash),t}function Wo(e){let t;if(Ki.hash){const[,,n]=e.hash.split("#",3);t=n??""}else t=e.hash.slice(1);return decodeURIComponent(t)}function Xo(e,t){return ii+function(e,t){return"/"+Qr(e).map(n=>n.replace(ei,(n,r,i,o)=>{const a=t[o];if(!a){if(r)return"";if(i&&void 0!==a)return"";throw new Error(`Missing parameter '${o}' in route ${e}`)}if(a.startsWith("/")||a.endsWith("/"))throw new Error(`Parameter '${o}' in route ${e} cannot start or end with a slash -- this would cause an invalid route like foo//bar`);return a})).filter(Boolean).join("/")}(e,t)}"undefined"!=typeof window&&((window.__svelte??={}).v??=new Set).add("5"),ee=!0;const Ko={subscribe:e=>(()=>{const e=Ui;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}})().page.subscribe(e)};function Zo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qo,Jo,ea={};var ta,na={},ra={};function ia(){if(ta)return ra;let e;ta=1;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return ra.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},ra.getSymbolTotalCodewords=function(e){return t[e]},ra.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},ra.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');e=t},ra.isKanjiModeEnabled=function(){return void 0!==e},ra.toSJIS=function(t){return e(t)},ra}var oa,aa,sa,la,ua,ca={};function ha(){return oa||(oa=1,(e=ca).L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(LY){return n}}),ca;var e}var da,fa={};var pa,ga={};var ma,va={};var ya,ba={};function xa(){if(ya)return ba;ya=1;const e=ha(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return ba.getBlocksCount=function(n,r){switch(r){case e.L:return t[4*(n-1)+0];case e.M:return t[4*(n-1)+1];case e.Q:return t[4*(n-1)+2];case e.H:return t[4*(n-1)+3];default:return}},ba.getTotalCodewordsCount=function(t,r){switch(r){case e.L:return n[4*(t-1)+0];case e.M:return n[4*(t-1)+1];case e.Q:return n[4*(t-1)+2];case e.H:return n[4*(t-1)+3];default:return}},ba}var wa,Ea,Ta,_a,ka={},Aa={};function Sa(){return Ea||(Ea=1,function(e){const t=function(){if(wa)return Aa;wa=1;const e=new Uint8Array(512),t=new Uint8Array(256);return function(){let n=1;for(let r=0;r<255;r++)e[r]=n,t[n]=r,n<<=1,256&n&&(n^=285);for(let t=255;t<512;t++)e[t]=e[t-255]}(),Aa.log=function(e){if(e<1)throw new Error("log("+e+")");return t[e]},Aa.exp=function(t){return e[t]},Aa.mul=function(n,r){return 0===n||0===r?0:e[t[n]+t[r]]},Aa}();e.mul=function(e,n){const r=new Uint8Array(e.length+n.length-1);for(let i=0;i<e.length;i++)for(let o=0;o<n.length;o++)r[i+o]^=t.mul(e[i],n[o]);return r},e.mod=function(e,n){let r=new Uint8Array(e);for(;r.length-n.length>=0;){const e=r[0];for(let o=0;o<n.length;o++)r[o]^=t.mul(n[o],e);let i=0;for(;i<r.length&&0===r[i];)i++;r=r.slice(i)}return r},e.generateECPolynomial=function(n){let r=new Uint8Array([1]);for(let i=0;i<n;i++)r=e.mul(r,new Uint8Array([1,t.exp(i)]));return r}}(ka)),ka}var Na,Ma={},Ca={},Ia={};function Ra(){return Na||(Na=1,Ia.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Ia}var La,Oa,Da,Pa={};function Ba(){if(La)return Pa;La=1;const e="[0-9]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+")(?:.|[\r\n]))+";Pa.KANJI=new RegExp(t,"g"),Pa.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Pa.BYTE=new RegExp(n,"g"),Pa.NUMERIC=new RegExp(e,"g"),Pa.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const r=new RegExp("^"+t+"$"),i=new RegExp("^"+e+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Pa.testKanji=function(e){return r.test(e)},Pa.testNumeric=function(e){return i.test(e)},Pa.testAlphanumeric=function(e){return o.test(e)},Pa}function Fa(){return Oa||(Oa=1,function(e){const t=Ra(),n=Ba();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(e,n){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!t.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?e.ccBits[0]:n<27?e.ccBits[1]:e.ccBits[2]},e.getBestModeForData=function(t){return n.testNumeric(t)?e.NUMERIC:n.testAlphanumeric(t)?e.ALPHANUMERIC:n.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},e.isValid=function(e){return e&&e.bit&&e.ccBits},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(LY){return n}}}(Ca)),Ca}function za(){return Da||(Da=1,function(e){const t=ia(),n=xa(),r=ha(),i=Fa(),o=Ra(),a=t.getBCHDigit(7973);function s(e,t){return i.getCharCountIndicator(e,t)+4}function l(e,t){let n=0;return e.forEach(function(e){const r=s(e.mode,t);n+=r+e.getBitsLength()}),n}e.from=function(e,t){return o.isValid(e)?parseInt(e,10):t},e.getCapacity=function(e,r,a){if(!o.isValid(e))throw new Error("Invalid QR Code version");void 0===a&&(a=i.BYTE);const l=8*(t.getSymbolTotalCodewords(e)-n.getTotalCodewordsCount(e,r));if(a===i.MIXED)return l;const u=l-s(a,e);switch(a){case i.NUMERIC:return Math.floor(u/10*3);case i.ALPHANUMERIC:return Math.floor(u/11*2);case i.KANJI:return Math.floor(u/13);case i.BYTE:default:return Math.floor(u/8)}},e.getBestVersionForData=function(t,n){let o;const a=r.from(n,r.M);if(Array.isArray(t)){if(t.length>1)return function(t,n){for(let r=1;r<=40;r++)if(l(t,r)<=e.getCapacity(r,n,i.MIXED))return r}(t,a);if(0===t.length)return 1;o=t[0]}else o=t;return function(t,n,r){for(let i=1;i<=40;i++)if(n<=e.getCapacity(i,r,t))return i}(o.mode,o.getLength(),a)},e.getEncodedBits=function(e){if(!o.isValid(e)||e<7)throw new Error("Invalid QR Code version");let n=e<<12;for(;t.getBCHDigit(n)-a>=0;)n^=7973<<t.getBCHDigit(n)-a;return e<<12|n}}(Ma)),Ma}var Ua,Ga={};var Va,ja,Ha,$a,Ya,qa,Wa,Xa,Ka={};var Za,Qa,Ja,es={exports:{}};function ts(){return Qa||(Qa=1,function(e){const t=Fa(),n=function(){if(ja)return Va;ja=1;const e=Fa();function t(t){this.mode=e.NUMERIC,this.data=t.toString()}return t.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);const i=this.data.length-t;i>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*i+1))},Va=t}(),r=function(){if($a)return Ha;$a=1;const e=Fa(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(t){this.mode=e.ALPHANUMERIC,this.data=t}return n.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=45*t.indexOf(this.data[n]);r+=t.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(t.indexOf(this.data[n]),6)},Ha=n}(),i=function(){if(qa)return Ya;qa=1;const e=Fa();function t(t){this.mode=e.BYTE,this.data="string"==typeof t?(new TextEncoder).encode(t):new Uint8Array(t)}return t.getBitsLength=function(e){return 8*e},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},Ya=t}(),o=function(){if(Xa)return Wa;Xa=1;const e=Fa(),t=ia();function n(t){this.mode=e.KANJI,this.data=t}return n.getBitsLength=function(e){return 13*e},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let n;for(n=0;n<this.data.length;n++){let r=t.toSJIS(this.data[n]);if(r>=33088&&r<=40956)r-=33088;else{if(!(r>=57408&&r<=60351))throw new Error("Invalid SJIS character: "+this.data[n]+"\nMake sure your charset is UTF-8");r-=49472}r=192*(r>>>8&255)+(255&r),e.put(r,13)}},Wa=n}(),a=Ba(),s=ia(),l=function(){return Za?es.exports:(Za=1,es.exports=e={single_source_shortest_paths:function(t,n,r){var i={},o={};o[n]=0;var a,s,l,u,c,h,d,f=e.PriorityQueue.make();for(f.push(n,0);!f.empty();)for(l in s=(a=f.pop()).value,u=a.cost,c=t[s]||{})c.hasOwnProperty(l)&&(h=u+c[l],d=o[l],(void 0===o[l]||d>h)&&(o[l]=h,f.push(l,h),i[l]=s));if(void 0!==r&&void 0===o[r]){var p=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(p)}return i},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(t,n,r){var i=e.single_source_shortest_paths(t,n,r);return e.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(t){var n,r=e.PriorityQueue,i={};for(n in t=t||{},r)r.hasOwnProperty(n)&&(i[n]=r[n]);return i.queue=[],i.sorter=t.sorter||r.default_sorter,i},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}});var e}();function u(e){return unescape(encodeURIComponent(e)).length}function c(e,t,n){const r=[];let i;for(;null!==(i=e.exec(n));)r.push({data:i[0],index:i.index,mode:t,length:i[0].length});return r}function h(e){const n=c(a.NUMERIC,t.NUMERIC,e),r=c(a.ALPHANUMERIC,t.ALPHANUMERIC,e);let i,o;s.isKanjiModeEnabled()?(i=c(a.BYTE,t.BYTE,e),o=c(a.KANJI,t.KANJI,e)):(i=c(a.BYTE_KANJI,t.BYTE,e),o=[]);return n.concat(r,i,o).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function d(e,a){switch(a){case t.NUMERIC:return n.getBitsLength(e);case t.ALPHANUMERIC:return r.getBitsLength(e);case t.KANJI:return o.getBitsLength(e);case t.BYTE:return i.getBitsLength(e)}}function f(e,a){let l;const u=t.getBestModeForData(e);if(l=t.from(a,u),l!==t.BYTE&&l.bit<u.bit)throw new Error('"'+e+'" cannot be encoded with mode '+t.toString(l)+".\n Suggested mode is: "+t.toString(u));switch(l!==t.KANJI||s.isKanjiModeEnabled()||(l=t.BYTE),l){case t.NUMERIC:return new n(e);case t.ALPHANUMERIC:return new r(e);case t.KANJI:return new o(e);case t.BYTE:return new i(e)}}e.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(f(t,null)):t.data&&e.push(f(t.data,t.mode)),e},[])},e.fromString=function(n,r){const i=function(e){const n=[];for(let r=0;r<e.length;r++){const i=e[r];switch(i.mode){case t.NUMERIC:n.push([i,{data:i.data,mode:t.ALPHANUMERIC,length:i.length},{data:i.data,mode:t.BYTE,length:i.length}]);break;case t.ALPHANUMERIC:n.push([i,{data:i.data,mode:t.BYTE,length:i.length}]);break;case t.KANJI:n.push([i,{data:i.data,mode:t.BYTE,length:u(i.data)}]);break;case t.BYTE:n.push([{data:i.data,mode:t.BYTE,length:u(i.data)}])}}return n}(h(n,s.isKanjiModeEnabled())),o=function(e,n){const r={},i={start:{}};let o=["start"];for(let a=0;a<e.length;a++){const s=e[a],l=[];for(let e=0;e<s.length;e++){const u=s[e],c=""+a+e;l.push(c),r[c]={node:u,lastCount:0},i[c]={};for(let e=0;e<o.length;e++){const a=o[e];r[a]&&r[a].node.mode===u.mode?(i[a][c]=d(r[a].lastCount+u.length,u.mode)-d(r[a].lastCount,u.mode),r[a].lastCount+=u.length):(r[a]&&(r[a].lastCount=u.length),i[a][c]=d(u.length,u.mode)+4+t.getCharCountIndicator(u.mode,n))}}o=l}for(let t=0;t<o.length;t++)i[o[t]].end=0;return{map:i,table:r}}(i,r),a=l.find_path(o.map,"start","end"),c=[];for(let e=1;e<a.length-1;e++)c.push(o.table[a[e]].node);return e.fromArray(function(e){return e.reduce(function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}(c))},e.rawSplit=function(t){return e.fromArray(h(t,s.isKanjiModeEnabled()))}}(Ka)),Ka}function ns(){if(Ja)return na;Ja=1;const e=ia(),t=ha(),n=function(){if(sa)return aa;function e(){this.buffer=[],this.length=0}return sa=1,e.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},aa=e}(),r=function(){if(ua)return la;function e(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return ua=1,e.prototype.set=function(e,t,n,r){const i=e*this.size+t;this.data[i]=n,r&&(this.reservedBit[i]=!0)},e.prototype.get=function(e,t){return this.data[e*this.size+t]},e.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},e.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},la=e}(),i=(da||(da=1,function(e){const t=ia().getSymbolSize;e.getRowColCoords=function(e){if(1===e)return[];const n=Math.floor(e/7)+2,r=t(e),i=145===r?26:2*Math.ceil((r-13)/(2*n-2)),o=[r-7];for(let t=1;t<n-1;t++)o[t]=o[t-1]-i;return o.push(6),o.reverse()},e.getPositions=function(t){const n=[],r=e.getRowColCoords(t),i=r.length;for(let e=0;e<i;e++)for(let t=0;t<i;t++)0===e&&0===t||0===e&&t===i-1||e===i-1&&0===t||n.push([r[e],r[t]]);return n}}(fa)),fa),o=function(){if(pa)return ga;pa=1;const e=ia().getSymbolSize;return ga.getPositions=function(t){const n=e(t);return[[0,0],[n-7,0],[0,n-7]]},ga}(),a=(ma||(ma=1,function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t=3,n=3,r=40,i=10;function o(t,n,r){switch(t){case e.Patterns.PATTERN000:return(n+r)%2==0;case e.Patterns.PATTERN001:return n%2==0;case e.Patterns.PATTERN010:return r%3==0;case e.Patterns.PATTERN011:return(n+r)%3==0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case e.Patterns.PATTERN101:return n*r%2+n*r%3==0;case e.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case e.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(e){const n=e.size;let r=0,i=0,o=0,a=null,s=null;for(let l=0;l<n;l++){i=o=0,a=s=null;for(let u=0;u<n;u++){let n=e.get(l,u);n===a?i++:(i>=5&&(r+=t+(i-5)),a=n,i=1),n=e.get(u,l),n===s?o++:(o>=5&&(r+=t+(o-5)),s=n,o=1)}i>=5&&(r+=t+(i-5)),o>=5&&(r+=t+(o-5))}return r},e.getPenaltyN2=function(e){const t=e.size;let r=0;for(let n=0;n<t-1;n++)for(let i=0;i<t-1;i++){const t=e.get(n,i)+e.get(n,i+1)+e.get(n+1,i)+e.get(n+1,i+1);4!==t&&0!==t||r++}return r*n},e.getPenaltyN3=function(e){const t=e.size;let n=0,i=0,o=0;for(let r=0;r<t;r++){i=o=0;for(let a=0;a<t;a++)i=i<<1&2047|e.get(r,a),a>=10&&(1488===i||93===i)&&n++,o=o<<1&2047|e.get(a,r),a>=10&&(1488===o||93===o)&&n++}return n*r},e.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*i},e.applyMask=function(e,t){const n=t.size;for(let r=0;r<n;r++)for(let i=0;i<n;i++)t.isReserved(i,r)||t.xor(i,r,o(e,i,r))},e.getBestMask=function(t,n){const r=Object.keys(e.Patterns).length;let i=0,o=1/0;for(let a=0;a<r;a++){n(a),e.applyMask(a,t);const r=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(a,t),r<o&&(o=r,i=a)}return i}}(va)),va),s=xa(),l=function(){if(_a)return Ta;_a=1;const e=Sa();function t(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(t){this.degree=t,this.genPoly=e.generateECPolynomial(this.degree)},t.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const r=e.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){const e=new Uint8Array(this.degree);return e.set(r,i),e}return r},Ta=t}(),u=za(),c=function(){if(Ua)return Ga;Ua=1;const e=ia(),t=e.getBCHDigit(1335);return Ga.getEncodedBits=function(n,r){const i=n.bit<<3|r;let o=i<<10;for(;e.getBCHDigit(o)-t>=0;)o^=1335<<e.getBCHDigit(o)-t;return 21522^(i<<10|o)},Ga}(),h=Fa(),d=ts();function f(e,t,n){const r=e.size,i=c.getEncodedBits(t,n);let o,a;for(o=0;o<15;o++)a=1==(i>>o&1),o<6?e.set(o,8,a,!0):o<8?e.set(o+1,8,a,!0):e.set(r-15+o,8,a,!0),o<8?e.set(8,r-o-1,a,!0):o<9?e.set(8,15-o-1+1,a,!0):e.set(8,15-o-1,a,!0);e.set(r-8,8,1,!0)}function p(t,r,i){const o=new n;i.forEach(function(e){o.put(e.mode.bit,4),o.put(e.getLength(),h.getCharCountIndicator(e.mode,t)),e.write(o)});const a=8*(e.getSymbolTotalCodewords(t)-s.getTotalCodewordsCount(t,r));for(o.getLengthInBits()+4<=a&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(0);const u=(a-o.getLengthInBits())/8;for(let e=0;e<u;e++)o.put(e%2?17:236,8);return function(t,n,r){const i=e.getSymbolTotalCodewords(n),o=s.getTotalCodewordsCount(n,r),a=i-o,u=s.getBlocksCount(n,r),c=i%u,h=u-c,d=Math.floor(i/u),f=Math.floor(a/u),p=f+1,g=d-f,m=new l(g);let v=0;const y=new Array(u),b=new Array(u);let x=0;const w=new Uint8Array(t.buffer);for(let e=0;e<u;e++){const t=e<h?f:p;y[e]=w.slice(v,v+t),b[e]=m.encode(y[e]),v+=t,x=Math.max(x,t)}const E=new Uint8Array(i);let T,_,k=0;for(T=0;T<x;T++)for(_=0;_<u;_++)T<y[_].length&&(E[k++]=y[_][T]);for(T=0;T<g;T++)for(_=0;_<u;_++)E[k++]=b[_][T];return E}(o,t,r)}function g(t,n,s,l){let c;if(Array.isArray(t))c=d.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let e=n;if(!e){const n=d.rawSplit(t);e=u.getBestVersionForData(n,s)}c=d.fromString(t,e||40)}}const h=u.getBestVersionForData(c,s);if(!h)throw new Error("The amount of data is too big to be stored in a QR Code");if(n){if(n<h)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+h+".\n")}else n=h;const g=p(n,s,c),m=e.getSymbolSize(n),v=new r(m);return function(e,t){const n=e.size,r=o.getPositions(t);for(let i=0;i<r.length;i++){const t=r[i][0],o=r[i][1];for(let r=-1;r<=7;r++)if(!(t+r<=-1||n<=t+r))for(let i=-1;i<=7;i++)o+i<=-1||n<=o+i||(r>=0&&r<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===r||6===r)||r>=2&&r<=4&&i>=2&&i<=4?e.set(t+r,o+i,!0,!0):e.set(t+r,o+i,!1,!0))}}(v,n),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2==0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(v),function(e,t){const n=i.getPositions(t);for(let r=0;r<n.length;r++){const t=n[r][0],i=n[r][1];for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)-2===n||2===n||-2===r||2===r||0===n&&0===r?e.set(t+n,i+r,!0,!0):e.set(t+n,i+r,!1,!0)}}(v,n),f(v,s,0),n>=7&&function(e,t){const n=e.size,r=u.getEncodedBits(t);let i,o,a;for(let s=0;s<18;s++)i=Math.floor(s/3),o=s%3+n-8-3,a=1==(r>>s&1),e.set(i,o,a,!0),e.set(o,i,a,!0)}(v,n),function(e,t){const n=e.size;let r=-1,i=n-1,o=7,a=0;for(let s=n-1;s>0;s-=2)for(6===s&&s--;;){for(let n=0;n<2;n++)if(!e.isReserved(i,s-n)){let r=!1;a<t.length&&(r=1==(t[a]>>>o&1)),e.set(i,s-n,r),o--,-1===o&&(a++,o=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}(v,g),isNaN(l)&&(l=a.getBestMask(v,f.bind(null,v,s))),a.applyMask(l,v),f(v,s,l),{modules:v,version:n,errorCorrectionLevel:s,maskPattern:l,segments:c}}return na.create=function(n,r){if(void 0===n||""===n)throw new Error("No input text");let i,o,s=t.M;return void 0!==r&&(s=t.from(r.errorCorrectionLevel,t.M),i=u.from(r.version),o=a.from(r.maskPattern),r.toSJISFunc&&e.setToSJISFunction(r.toSJISFunc)),g(n,i,s,o)},na}var rs,is,os={},as={};function ss(){return rs||(rs=1,function(e){function t(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}e.getOptions=function(e){e||(e={}),e.color||(e.color={});const n=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:r,scale:r?4:i,margin:n,color:{dark:t(e.color.dark||"#000000ff"),light:t(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},e.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},e.getImageWidth=function(t,n){const r=e.getScale(t,n);return Math.floor((t+2*n.margin)*r)},e.qrToImageData=function(t,n,r){const i=n.modules.size,o=n.modules.data,a=e.getScale(i,r),s=Math.floor((i+2*r.margin)*a),l=r.margin*a,u=[r.color.light,r.color.dark];for(let e=0;e<s;e++)for(let n=0;n<s;n++){let c=4*(e*s+n),h=r.color.light;if(e>=l&&n>=l&&e<s-l&&n<s-l){h=u[o[Math.floor((e-l)/a)*i+Math.floor((n-l)/a)]?1:0]}t[c++]=h.r,t[c++]=h.g,t[c++]=h.b,t[c]=h.a}}}(as)),as}function ls(){return is||(is=1,function(e){const t=ss();e.render=function(e,n,r){let i=r,o=n;void 0!==i||n&&n.getContext||(i=n,n=void 0),n||(o=function(){try{return document.createElement("canvas")}catch(LY){throw new Error("You need to specify a canvas element")}}()),i=t.getOptions(i);const a=t.getImageWidth(e.modules.size,i),s=o.getContext("2d"),l=s.createImageData(a,a);return t.qrToImageData(l.data,e,i),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(s,o,a),s.putImageData(l,0,0),o},e.renderToDataURL=function(t,n,r){let i=r;void 0!==i||n&&n.getContext||(i=n,n=void 0),i||(i={});const o=e.render(t,n,i),a=i.type||"image/png",s=i.rendererOpts||{};return o.toDataURL(a,s.quality)}}(os)),os}var us,cs,hs={};function ds(){if(us)return hs;us=1;const e=ss();function t(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function n(e,t,n){let r=e+t;return void 0!==n&&(r+=" "+n),r}return hs.render=function(r,i,o){const a=e.getOptions(i),s=r.modules.size,l=r.modules.data,u=s+2*a.margin,c=a.color.light.a?"<path "+t(a.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",h="<path "+t(a.color.dark,"stroke")+' d="'+function(e,t,r){let i="",o=0,a=!1,s=0;for(let l=0;l<e.length;l++){const u=Math.floor(l%t),c=Math.floor(l/t);u||a||(a=!0),e[l]?(s++,l>0&&u>0&&e[l-1]||(i+=a?n("M",u+r,.5+c+r):n("m",o,0),o=0,a=!1),u+1<t&&e[l+1]||(i+=n("h",s),s=0)):o++}return i}(l,s,a.margin)+'"/>',d='viewBox="0 0 '+u+" "+u+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+h+"</svg>\n";return"function"==typeof o&&o(null,f),f},hs}var fs=function(){if(cs)return ea;cs=1;const e=Jo?Qo:(Jo=1,Qo=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}),t=ns(),n=ls(),r=ds();function i(n,r,i,o,a){const s=[].slice.call(arguments,1),l=s.length,u="function"==typeof s[l-1];if(!u&&!e())throw new Error("Callback required as last argument");if(!u){if(l<1)throw new Error("Too few arguments provided");return 1===l?(i=r,r=o=void 0):2!==l||r.getContext||(o=i,i=r,r=void 0),new Promise(function(e,a){try{const a=t.create(i,o);e(n(a,r,o))}catch(LY){a(LY)}})}if(l<2)throw new Error("Too few arguments provided");2===l?(a=i,i=r,r=o=void 0):3===l&&(r.getContext&&void 0===a?(a=o,o=void 0):(a=o,o=i,i=r,r=void 0));try{const e=t.create(i,o);a(null,n(e,r,o))}catch(LY){a(LY)}}return ea.create=t.create,ea.toCanvas=i.bind(null,n.render),ea.toDataURL=i.bind(null,n.renderToDataURL),ea.toString=i.bind(null,function(e,t,n){return r.render(e,n)}),ea}();const ps=Zo(fs);var gs="top",ms="bottom",vs="right",ys="left",bs="auto",xs=[gs,ms,vs,ys],ws="start",Es="end",Ts="viewport",_s="popper",ks=xs.reduce(function(e,t){return e.concat([t+"-"+ws,t+"-"+Es])},[]),As=[].concat(xs,[bs]).reduce(function(e,t){return e.concat([t,t+"-"+ws,t+"-"+Es])},[]),Ss=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Ns(e){return e?(e.nodeName||"").toLowerCase():null}function Ms(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Cs(e){return e instanceof Ms(e).Element||e instanceof Element}function Is(e){return e instanceof Ms(e).HTMLElement||e instanceof HTMLElement}function Rs(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Ms(e).ShadowRoot||e instanceof ShadowRoot)}const Ls={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];Is(i)&&Ns(i)&&(Object.assign(i.style,n),Object.keys(r).forEach(function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});Is(r)&&Ns(r)&&(Object.assign(r.style,o),Object.keys(i).forEach(function(e){r.removeAttribute(e)}))})}},requires:["computeStyles"]};function Os(e){return e.split("-")[0]}var Ds=Math.max,Ps=Math.min,Bs=Math.round;function Fs(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function zs(){return!/^((?!chrome|android).)*safari/i.test(Fs())}function Us(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&Is(e)&&(i=e.offsetWidth>0&&Bs(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Bs(r.height)/e.offsetHeight||1);var a=(Cs(e)?Ms(e):window).visualViewport,s=!zs()&&n,l=(r.left+(s&&a?a.offsetLeft:0))/i,u=(r.top+(s&&a?a.offsetTop:0))/o,c=r.width/i,h=r.height/o;return{width:c,height:h,top:u,right:l+c,bottom:u+h,left:l,x:l,y:u}}function Gs(e){var t=Us(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Vs(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Rs(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function js(e){return Ms(e).getComputedStyle(e)}function Hs(e){return["table","td","th"].indexOf(Ns(e))>=0}function $s(e){return((Cs(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ys(e){return"html"===Ns(e)?e:e.assignedSlot||e.parentNode||(Rs(e)?e.host:null)||$s(e)}function qs(e){return Is(e)&&"fixed"!==js(e).position?e.offsetParent:null}function Ws(e){for(var t=Ms(e),n=qs(e);n&&Hs(n)&&"static"===js(n).position;)n=qs(n);return n&&("html"===Ns(n)||"body"===Ns(n)&&"static"===js(n).position)?t:n||function(e){var t=/firefox/i.test(Fs());if(/Trident/i.test(Fs())&&Is(e)&&"fixed"===js(e).position)return null;var n=Ys(e);for(Rs(n)&&(n=n.host);Is(n)&&["html","body"].indexOf(Ns(n))<0;){var r=js(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function Xs(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ks(e,t,n){return Ds(e,Ps(t,n))}function Zs(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Qs(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function Js(e){return e.split("-")[1]}var el={top:"auto",right:"auto",bottom:"auto",left:"auto"};function tl(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,h=e.isFixed,d=a.x,f=void 0===d?0:d,p=a.y,g=void 0===p?0:p,m="function"==typeof c?c({x:f,y:g}):{x:f,y:g};f=m.x,g=m.y;var v=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),b=ys,x=gs,w=window;if(u){var E=Ws(n),T="clientHeight",_="clientWidth";if(E===Ms(n)&&"static"!==js(E=$s(n)).position&&"absolute"===s&&(T="scrollHeight",_="scrollWidth"),i===gs||(i===ys||i===vs)&&o===Es)x=ms,g-=(h&&E===w&&w.visualViewport?w.visualViewport.height:E[T])-r.height,g*=l?1:-1;if(i===ys||(i===gs||i===ms)&&o===Es)b=vs,f-=(h&&E===w&&w.visualViewport?w.visualViewport.width:E[_])-r.width,f*=l?1:-1}var k,A=Object.assign({position:s},u&&el),S=!0===c?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:Bs(n*i)/i||0,y:Bs(r*i)/i||0}}({x:f,y:g},Ms(n)):{x:f,y:g};return f=S.x,g=S.y,l?Object.assign({},A,((k={})[x]=y?"0":"",k[b]=v?"0":"",k.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",k)):Object.assign({},A,((t={})[x]=y?g+"px":"",t[b]=v?f+"px":"",t.transform="",t))}var nl={passive:!0};var rl={left:"right",right:"left",bottom:"top",top:"bottom"};function il(e){return e.replace(/left|right|bottom|top/g,function(e){return rl[e]})}var ol={start:"end",end:"start"};function al(e){return e.replace(/start|end/g,function(e){return ol[e]})}function sl(e){var t=Ms(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ll(e){return Us($s(e)).left+sl(e).scrollLeft}function ul(e){var t=js(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function cl(e){return["html","body","#document"].indexOf(Ns(e))>=0?e.ownerDocument.body:Is(e)&&ul(e)?e:cl(Ys(e))}function hl(e,t){var n;void 0===t&&(t=[]);var r=cl(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=Ms(r),a=i?[o].concat(o.visualViewport||[],ul(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(hl(Ys(a)))}function dl(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function fl(e,t,n){return t===Ts?dl(function(e,t){var n=Ms(e),r=$s(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var u=zs();(u||!u&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+ll(e),y:l}}(e,n)):Cs(t)?function(e,t){var n=Us(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):dl(function(e){var t,n=$s(e),r=sl(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=Ds(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Ds(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+ll(e),l=-r.scrollTop;return"rtl"===js(i||n).direction&&(s+=Ds(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}($s(e)))}function pl(e,t,n,r){var i="clippingParents"===t?function(e){var t=hl(Ys(e)),n=["absolute","fixed"].indexOf(js(e).position)>=0&&Is(e)?Ws(e):e;return Cs(n)?t.filter(function(e){return Cs(e)&&Vs(e,n)&&"body"!==Ns(e)}):[]}(e):[].concat(t),o=[].concat(i,[n]),a=o[0],s=o.reduce(function(t,n){var i=fl(e,n,r);return t.top=Ds(i.top,t.top),t.right=Ps(i.right,t.right),t.bottom=Ps(i.bottom,t.bottom),t.left=Ds(i.left,t.left),t},fl(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function gl(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?Os(i):null,a=i?Js(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case gs:t={x:s,y:n.y-r.height};break;case ms:t={x:s,y:n.y+n.height};break;case vs:t={x:n.x+n.width,y:l};break;case ys:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var u=o?Xs(o):null;if(null!=u){var c="y"===u?"height":"width";switch(a){case ws:t[u]=t[u]-(n[c]/2-r[c]/2);break;case Es:t[u]=t[u]+(n[c]/2-r[c]/2)}}return t}function ml(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,a=void 0===o?e.strategy:o,s=n.boundary,l=void 0===s?"clippingParents":s,u=n.rootBoundary,c=void 0===u?Ts:u,h=n.elementContext,d=void 0===h?_s:h,f=n.altBoundary,p=void 0!==f&&f,g=n.padding,m=void 0===g?0:g,v=Zs("number"!=typeof m?m:Qs(m,xs)),y=d===_s?"reference":_s,b=e.rects.popper,x=e.elements[p?y:d],w=pl(Cs(x)?x:x.contextElement||$s(e.elements.popper),l,c,a),E=Us(e.elements.reference),T=gl({reference:E,element:b,placement:i}),_=dl(Object.assign({},b,T)),k=d===_s?_:E,A={top:w.top-k.top+v.top,bottom:k.bottom-w.bottom+v.bottom,left:w.left-k.left+v.left,right:k.right-w.right+v.right},S=e.modifiersData.offset;if(d===_s&&S){var N=S[i];Object.keys(A).forEach(function(e){var t=[vs,ms].indexOf(e)>=0?1:-1,n=[gs,ms].indexOf(e)>=0?"y":"x";A[e]+=N[n]*t})}return A}const vl={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,g=n.allowedAutoPlacements,m=t.options.placement,v=Os(m),y=l||(v===m||!p?[il(m)]:function(e){if(Os(e)===bs)return[];var t=il(e);return[al(e),t,al(t)]}(m)),b=[m].concat(y).reduce(function(e,n){return e.concat(Os(n)===bs?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=void 0===l?As:l,c=Js(r),h=c?s?ks:ks.filter(function(e){return Js(e)===c}):xs,d=h.filter(function(e){return u.indexOf(e)>=0});0===d.length&&(d=h);var f=d.reduce(function(t,n){return t[n]=ml(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[Os(n)],t},{});return Object.keys(f).sort(function(e,t){return f[e]-f[t]})}(t,{placement:n,boundary:c,rootBoundary:h,padding:u,flipVariations:p,allowedAutoPlacements:g}):n)},[]),x=t.rects.reference,w=t.rects.popper,E=new Map,T=!0,_=b[0],k=0;k<b.length;k++){var A=b[k],S=Os(A),N=Js(A)===ws,M=[gs,ms].indexOf(S)>=0,C=M?"width":"height",I=ml(t,{placement:A,boundary:c,rootBoundary:h,altBoundary:d,padding:u}),R=M?N?vs:ys:N?ms:gs;x[C]>w[C]&&(R=il(R));var L=il(R),O=[];if(o&&O.push(I[S]<=0),s&&O.push(I[R]<=0,I[L]<=0),O.every(function(e){return e})){_=A,T=!1;break}E.set(A,O)}if(T)for(var D=function(e){var t=b.find(function(t){var n=E.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return _=t,"break"},P=p?3:1;P>0;P--){if("break"===D(P))break}t.placement!==_&&(t.modifiersData[r]._skip=!0,t.placement=_,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function yl(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function bl(e){return[gs,vs,ms,ys].some(function(t){return e[t]>=0})}function xl(e,t,n){void 0===n&&(n=!1);var r,i,o=Is(t),a=Is(t)&&function(e){var t=e.getBoundingClientRect(),n=Bs(t.width)/e.offsetWidth||1,r=Bs(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),s=$s(t),l=Us(e,a,n),u={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(o||!o&&!n)&&(("body"!==Ns(t)||ul(s))&&(u=(r=t)!==Ms(r)&&Is(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:sl(r)),Is(t)?((c=Us(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=ll(s))),{x:l.left+u.scrollLeft-c.x,y:l.top+u.scrollTop-c.y,width:l.width,height:l.height}}function wl(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}}),r.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||i(e)}),r}var El={placement:"bottom",modifiers:[],strategy:"absolute"};function Tl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function _l(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?El:i;return function(e,t,n){void 0===n&&(n=o);var i,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},El,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],u=!1,c={state:s,setOptions:function(n){var i="function"==typeof n?n(s.options):n;h(),s.options=Object.assign({},o,s.options,i),s.scrollParents={reference:Cs(e)?hl(e):e.contextElement?hl(e.contextElement):[],popper:hl(t)};var a,u,d=function(e){var t=wl(e);return Ss.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}((a=[].concat(r,s.options.modifiers),u=a.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{}),Object.keys(u).map(function(e){return u[e]})));return s.orderedModifiers=d.filter(function(e){return e.enabled}),s.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var o=i({state:s,name:t,instance:c,options:r}),a=function(){};l.push(o||a)}}),c.update()},forceUpdate:function(){if(!u){var e=s.elements,t=e.reference,n=e.popper;if(Tl(t,n)){s.rects={reference:xl(t,Ws(n),"fixed"===s.options.strategy),popper:Gs(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach(function(e){return s.modifiersData[e.name]=Object.assign({},e.data)});for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var i=s.orderedModifiers[r],o=i.fn,a=i.options,l=void 0===a?{}:a,h=i.name;"function"==typeof o&&(s=o({state:s,options:l,name:h,instance:c})||s)}else s.reset=!1,r=-1}}},update:(i=function(){return new Promise(function(e){c.forceUpdate(),e(s)})},function(){return a||(a=new Promise(function(e){Promise.resolve().then(function(){a=void 0,e(i())})})),a}),destroy:function(){h(),u=!0}};if(!Tl(e,t))return c;function h(){l.forEach(function(e){return e()}),l=[]}return c.setOptions(n).then(function(e){!u&&n.onFirstUpdate&&n.onFirstUpdate(e)}),c}}var kl=_l({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=Ms(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(e){e.addEventListener("scroll",n.update,nl)}),s&&l.addEventListener("resize",n.update,nl),function(){o&&u.forEach(function(e){e.removeEventListener("scroll",n.update,nl)}),s&&l.removeEventListener("resize",n.update,nl)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=gl({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,u={placement:Os(t.placement),variation:Js(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,tl(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,tl(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Ls,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=As.reduce(function(e,n){return e[n]=function(e,t,n){var r=Os(e),i=[ys,gs].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[ys,vs].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e},{}),s=a[t.placement],l=s.x,u=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=a}},vl,{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,h=n.padding,d=n.tether,f=void 0===d||d,p=n.tetherOffset,g=void 0===p?0:p,m=ml(t,{boundary:l,rootBoundary:u,padding:h,altBoundary:c}),v=Os(t.placement),y=Js(t.placement),b=!y,x=Xs(v),w="x"===x?"y":"x",E=t.modifiersData.popperOffsets,T=t.rects.reference,_=t.rects.popper,k="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,A="number"==typeof k?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),S=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,N={x:0,y:0};if(E){if(o){var M,C="y"===x?gs:ys,I="y"===x?ms:vs,R="y"===x?"height":"width",L=E[x],O=L+m[C],D=L-m[I],P=f?-_[R]/2:0,B=y===ws?T[R]:_[R],F=y===ws?-_[R]:-T[R],z=t.elements.arrow,U=f&&z?Gs(z):{width:0,height:0},G=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=G[C],j=G[I],H=Ks(0,T[R],U[R]),$=b?T[R]/2-P-H-V-A.mainAxis:B-H-V-A.mainAxis,Y=b?-T[R]/2+P+H+j+A.mainAxis:F+H+j+A.mainAxis,q=t.elements.arrow&&Ws(t.elements.arrow),W=q?"y"===x?q.clientTop||0:q.clientLeft||0:0,X=null!=(M=null==S?void 0:S[x])?M:0,K=L+Y-X,Z=Ks(f?Ps(O,L+$-X-W):O,L,f?Ds(D,K):D);E[x]=Z,N[x]=Z-L}if(s){var Q,J="x"===x?gs:ys,ee="x"===x?ms:vs,te=E[w],ne="y"===w?"height":"width",re=te+m[J],ie=te-m[ee],oe=-1!==[gs,ys].indexOf(v),ae=null!=(Q=null==S?void 0:S[w])?Q:0,se=oe?re:te-T[ne]-_[ne]-ae+A.altAxis,le=oe?te+T[ne]+_[ne]-ae-A.altAxis:ie,ue=f&&oe?function(e,t,n){var r=Ks(e,t,n);return r>n?n:r}(se,te,le):Ks(f?se:re,te,f?le:ie);E[w]=ue,N[w]=ue-te}t.modifiersData[r]=N}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=Os(n.placement),l=Xs(s),u=[ys,vs].indexOf(s)>=0?"height":"width";if(o&&a){var c=function(e,t){return Zs("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Qs(e,xs))}(i.padding,n),h=Gs(o),d="y"===l?gs:ys,f="y"===l?ms:vs,p=n.rects.reference[u]+n.rects.reference[l]-a[l]-n.rects.popper[u],g=a[l]-n.rects.reference[l],m=Ws(o),v=m?"y"===l?m.clientHeight||0:m.clientWidth||0:0,y=p/2-g/2,b=c[d],x=v-h[u]-c[f],w=v/2-h[u]/2+y,E=Ks(b,w,x),T=l;n.modifiersData[r]=((t={})[T]=E,t.centerOffset=E-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&Vs(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=ml(t,{elementContext:"reference"}),s=ml(t,{altBoundary:!0}),l=yl(a,r),u=yl(s,i,o),c=bl(l),h=bl(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}}]}),Al="tippy-content",Sl="tippy-arrow",Nl="tippy-svg-arrow",Ml={passive:!0,capture:!0},Cl=function(){return document.body};function Il(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function Rl(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function Ll(e,t){return"function"==typeof e?e.apply(void 0,t):e}function Ol(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)};var n}function Dl(e){return[].concat(e)}function Pl(e,t){-1===e.indexOf(t)&&e.push(t)}function Bl(e){return[].slice.call(e)}function Fl(e){return Object.keys(e).reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function zl(){return document.createElement("div")}function Ul(e){return["Element","Fragment"].some(function(t){return Rl(e,t)})}function Gl(e){return Rl(e,"MouseEvent")}function Vl(e){return Ul(e)?[e]:function(e){return Rl(e,"NodeList")}(e)?Bl(e):Array.isArray(e)?e:Bl(document.querySelectorAll(e))}function jl(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function Hl(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function $l(e){var t,n=Dl(e)[0];return null!=n&&null!=(t=n.ownerDocument)&&t.body?n.ownerDocument:document}function Yl(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(t){e[r](t,n)})}function ql(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var Wl={isTouch:!1},Xl=0;function Kl(){Wl.isTouch||(Wl.isTouch=!0,window.performance&&document.addEventListener("mousemove",Zl))}function Zl(){var e=performance.now();e-Xl<20&&(Wl.isTouch=!1,document.removeEventListener("mousemove",Zl)),Xl=e}function Ql(){var e,t=document.activeElement;if((e=t)&&e._tippy&&e._tippy.reference===e){var n=t._tippy;t.blur&&!n.state.isVisible&&t.blur()}}var Jl=!!("undefined"!=typeof window&&"undefined"!=typeof document)&&!!window.msCrypto,eu=Object.assign({appendTo:Cl,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),tu=Object.keys(eu);function nu(e){var t=(e.plugins||[]).reduce(function(t,n){var r,i=n.name,o=n.defaultValue;i&&(t[i]=void 0!==e[i]?e[i]:null!=(r=eu[i])?r:o);return t},{});return Object.assign({},e,t)}function ru(e,t){var n=Object.assign({},t,{content:Ll(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(nu(Object.assign({},eu,{plugins:t}))):tu).reduce(function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(LY){t[n]=r}return t},{})}(e,t.plugins));return n.aria=Object.assign({},eu.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}function iu(e,t){e.innerHTML=t}function ou(e){var t=zl();return!0===e?t.className=Sl:(t.className=Nl,Ul(e)?t.appendChild(e):iu(t,e)),t}function au(e,t){Ul(t.content)?(iu(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?iu(e,t.content):e.textContent=t.content)}function su(e){var t=e.firstElementChild,n=Bl(t.children);return{box:t,content:n.find(function(e){return e.classList.contains(Al)}),arrow:n.find(function(e){return e.classList.contains(Sl)||e.classList.contains(Nl)}),backdrop:n.find(function(e){return e.classList.contains("tippy-backdrop")})}}function lu(e){var t=zl(),n=zl();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=zl();function i(n,r){var i=su(t),o=i.box,a=i.content,s=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"==typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||au(a,e.props),r.arrow?s?n.arrow!==r.arrow&&(o.removeChild(s),o.appendChild(ou(r.arrow))):o.appendChild(ou(r.arrow)):s&&o.removeChild(s)}return r.className=Al,r.setAttribute("data-state","hidden"),au(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props),{popper:t,onUpdate:i}}lu.$$tippy=!0;var uu=1,cu=[],hu=[];function du(e,t){var n,r,i,o,a,s,l,u,c=ru(e,Object.assign({},eu,nu(Fl(t)))),h=!1,d=!1,f=!1,p=!1,g=[],m=Ol(q,c.interactiveDebounce),v=uu++,y=(u=c.plugins).filter(function(e,t){return u.indexOf(e)===t}),b={id:v,reference:e,popper:zl(),popperInstance:null,props:c,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)},setProps:function(t){if(b.state.isDestroyed)return;L("onBeforeUpdate",[b,t]),$();var n=b.props,r=ru(e,Object.assign({},n,Fl(t),{ignoreAttributes:!0}));b.props=r,H(),n.interactiveDebounce!==r.interactiveDebounce&&(P(),m=Ol(q,r.interactiveDebounce));n.triggerTarget&&!r.triggerTarget?Dl(n.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):r.triggerTarget&&e.removeAttribute("aria-expanded");D(),R(),E&&E(n,r);b.popperInstance&&(Z(),J().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)}));L("onAfterUpdate",[b,t])},setContent:function(e){b.setProps({content:e})},show:function(){var e=b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=Wl.isTouch&&!b.props.touch,i=Il(b.props.duration,0,eu.duration);if(e||t||n||r)return;if(N().hasAttribute("disabled"))return;if(L("onShow",[b],!1),!1===b.props.onShow(b))return;b.state.isVisible=!0,S()&&(w.style.visibility="visible");R(),U(),b.state.isMounted||(w.style.transition="none");if(S()){var o=C();jl([o.box,o.content],0)}s=function(){var e;if(b.state.isVisible&&!p){if(p=!0,w.offsetHeight,w.style.transition=b.props.moveTransition,S()&&b.props.animation){var t=C(),n=t.box,r=t.content;jl([n,r],i),Hl([n,r],"visible")}O(),D(),Pl(hu,b),null==(e=b.popperInstance)||e.forceUpdate(),L("onMount",[b]),b.props.animation&&S()&&function(e,t){V(e,t)}(i,function(){b.state.isShown=!0,L("onShown",[b])})}},function(){var e,t=b.props.appendTo,n=N();e=b.props.interactive&&t===Cl||"parent"===t?n.parentNode:Ll(t,[n]);e.contains(w)||e.appendChild(w);b.state.isMounted=!0,Z()}()},hide:function(){var e=!b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=Il(b.props.duration,1,eu.duration);if(e||t||n)return;if(L("onHide",[b],!1),!1===b.props.onHide(b))return;b.state.isVisible=!1,b.state.isShown=!1,p=!1,h=!1,S()&&(w.style.visibility="hidden");if(P(),G(),R(!0),S()){var i=C(),o=i.box,a=i.content;b.props.animation&&(jl([o,a],r),Hl([o,a],"hidden"))}O(),D(),b.props.animation?S()&&function(e,t){V(e,function(){!b.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&t()})}(r,b.unmount):b.unmount()},hideWithInteractivity:function(e){M().addEventListener("mousemove",m),Pl(cu,m),m(e)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){b.state.isVisible&&b.hide();if(!b.state.isMounted)return;Q(),J().forEach(function(e){e._tippy.unmount()}),w.parentNode&&w.parentNode.removeChild(w);hu=hu.filter(function(e){return e!==b}),b.state.isMounted=!1,L("onHidden",[b])},destroy:function(){if(b.state.isDestroyed)return;b.clearDelayTimeouts(),b.unmount(),$(),delete e._tippy,b.state.isDestroyed=!0,L("onDestroy",[b])}};if(!c.render)return b;var x=c.render(b),w=x.popper,E=x.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+b.id,b.popper=w,e._tippy=b,w._tippy=b;var T=y.map(function(e){return e.fn(b)}),_=e.hasAttribute("aria-expanded");return H(),D(),R(),L("onCreate",[b]),c.showOnCreate&&ee(),w.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),w.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&M().addEventListener("mousemove",m)}),b;function k(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function A(){return"hold"===k()[0]}function S(){var e;return!(null==(e=b.props.render)||!e.$$tippy)}function N(){return l||e}function M(){var e=N().parentNode;return e?$l(e):document}function C(){return su(w)}function I(e){return b.state.isMounted&&!b.state.isVisible||Wl.isTouch||o&&"focus"===o.type?0:Il(b.props.delay,e?0:1,eu.delay)}function R(e){void 0===e&&(e=!1),w.style.pointerEvents=b.props.interactive&&!e?"":"none",w.style.zIndex=""+b.props.zIndex}function L(e,t,n){var r;(void 0===n&&(n=!0),T.forEach(function(n){n[e]&&n[e].apply(n,t)}),n)&&(r=b.props)[e].apply(r,t)}function O(){var t=b.props.aria;if(t.content){var n="aria-"+t.content,r=w.id;Dl(b.props.triggerTarget||e).forEach(function(e){var t=e.getAttribute(n);if(b.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var i=t&&t.replace(r,"").trim();i?e.setAttribute(n,i):e.removeAttribute(n)}})}}function D(){!_&&b.props.aria.expanded&&Dl(b.props.triggerTarget||e).forEach(function(e){b.props.interactive?e.setAttribute("aria-expanded",b.state.isVisible&&e===N()?"true":"false"):e.removeAttribute("aria-expanded")})}function P(){M().removeEventListener("mousemove",m),cu=cu.filter(function(e){return e!==m})}function B(t){if(!Wl.isTouch||!f&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!b.props.interactive||!ql(w,n)){if(Dl(b.props.triggerTarget||e).some(function(e){return ql(e,n)})){if(Wl.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else L("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),d=!0,setTimeout(function(){d=!1}),b.state.isMounted||G())}}}function F(){f=!0}function z(){f=!1}function U(){var e=M();e.addEventListener("mousedown",B,!0),e.addEventListener("touchend",B,Ml),e.addEventListener("touchstart",z,Ml),e.addEventListener("touchmove",F,Ml)}function G(){var e=M();e.removeEventListener("mousedown",B,!0),e.removeEventListener("touchend",B,Ml),e.removeEventListener("touchstart",z,Ml),e.removeEventListener("touchmove",F,Ml)}function V(e,t){var n=C().box;function r(e){e.target===n&&(Yl(n,"remove",r),t())}if(0===e)return t();Yl(n,"remove",a),Yl(n,"add",r),a=r}function j(t,n,r){void 0===r&&(r=!1),Dl(b.props.triggerTarget||e).forEach(function(e){e.addEventListener(t,n,r),g.push({node:e,eventType:t,handler:n,options:r})})}function H(){var e;A()&&(j("touchstart",Y,{passive:!0}),j("touchend",W,{passive:!0})),(e=b.props.trigger,e.split(/\s+/).filter(Boolean)).forEach(function(e){if("manual"!==e)switch(j(e,Y),e){case"mouseenter":j("mouseleave",W);break;case"focus":j(Jl?"focusout":"blur",X);break;case"focusin":j("focusout",X)}})}function $(){g.forEach(function(e){var t=e.node,n=e.eventType,r=e.handler,i=e.options;t.removeEventListener(n,r,i)}),g=[]}function Y(e){var t,n=!1;if(b.state.isEnabled&&!K(e)&&!d){var r="focus"===(null==(t=o)?void 0:t.type);o=e,l=e.currentTarget,D(),!b.state.isVisible&&Gl(e)&&cu.forEach(function(t){return t(e)}),"click"===e.type&&(b.props.trigger.indexOf("mouseenter")<0||h)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:ee(e),"click"===e.type&&(h=!n),n&&!r&&te(e)}}function q(e){var t=e.target,n=N().contains(t)||w.contains(t);"mousemove"===e.type&&n||function(e,t){var n=t.clientX,r=t.clientY;return e.every(function(e){var t=e.popperRect,i=e.popperState,o=e.props.interactiveBorder,a=i.placement.split("-")[0],s=i.modifiersData.offset;if(!s)return!0;var l="bottom"===a?s.top.y:0,u="top"===a?s.bottom.y:0,c="right"===a?s.left.x:0,h="left"===a?s.right.x:0,d=t.top-r+l>o,f=r-t.bottom-u>o,p=t.left-n+c>o,g=n-t.right-h>o;return d||f||p||g})}(J().concat(w).map(function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:c}:null}).filter(Boolean),e)&&(P(),te(e))}function W(e){K(e)||b.props.trigger.indexOf("click")>=0&&h||(b.props.interactive?b.hideWithInteractivity(e):te(e))}function X(e){b.props.trigger.indexOf("focusin")<0&&e.target!==N()||b.props.interactive&&e.relatedTarget&&w.contains(e.relatedTarget)||te(e)}function K(e){return!!Wl.isTouch&&A()!==e.type.indexOf("touch")>=0}function Z(){Q();var t=b.props,n=t.popperOptions,r=t.placement,i=t.offset,o=t.getReferenceClientRect,a=t.moveTransition,l=S()?su(w).arrow:null,u=o?{getBoundingClientRect:o,contextElement:o.contextElement||N()}:e,c=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(S()){var n=C().box;["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)}),t.attributes.popper={}}}}];S()&&l&&c.push({name:"arrow",options:{element:l,padding:3}}),c.push.apply(c,(null==n?void 0:n.modifiers)||[]),b.popperInstance=kl(u,w,Object.assign({},n,{placement:r,onFirstUpdate:s,modifiers:c}))}function Q(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function J(){return Bl(w.querySelectorAll("[data-tippy-root]"))}function ee(e){b.clearDelayTimeouts(),e&&L("onTrigger",[b,e]),U();var t=I(!0),r=k(),i=r[0],o=r[1];Wl.isTouch&&"hold"===i&&o&&(t=o),t?n=setTimeout(function(){b.show()},t):b.show()}function te(e){if(b.clearDelayTimeouts(),L("onUntrigger",[b,e]),b.state.isVisible){if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&h)){var t=I(!1);t?r=setTimeout(function(){b.state.isVisible&&b.hide()},t):i=requestAnimationFrame(function(){b.hide()})}}else G()}}function fu(e,t){void 0===t&&(t={});var n=eu.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",Kl,Ml),window.addEventListener("blur",Ql);var r=Object.assign({},t,{plugins:n}),i=Vl(e).reduce(function(e,t){var n=t&&du(t,r);return n&&e.push(n),e},[]);return Ul(e)?i[0]:i}fu.defaultProps=eu,fu.setDefaultProps=function(e){Object.keys(e).forEach(function(t){eu[t]=e[t]})},fu.currentInput=Wl,Object.assign({},Ls,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});var pu={clientX:0,clientY:0},gu=[];function mu(e){var t=e.clientX,n=e.clientY;pu={clientX:t,clientY:n}}var vu={name:"followCursor",defaultValue:!1,fn:function(e){var t=e.reference,n=$l(e.props.triggerTarget||t),r=!1,i=!1,o=!0,a=e.props;function s(){return"initial"===e.props.followCursor&&e.state.isVisible}function l(){n.addEventListener("mousemove",h)}function u(){n.removeEventListener("mousemove",h)}function c(){r=!0,e.setProps({getReferenceClientRect:null}),r=!1}function h(n){var r=!n.target||t.contains(n.target),i=e.props.followCursor,o=n.clientX,a=n.clientY,s=t.getBoundingClientRect(),l=o-s.left,u=a-s.top;!r&&e.props.interactive||e.setProps({getReferenceClientRect:function(){var e=t.getBoundingClientRect(),n=o,r=a;"initial"===i&&(n=e.left+l,r=e.top+u);var s="horizontal"===i?e.top:r,c="vertical"===i?e.right:n,h="horizontal"===i?e.bottom:r,d="vertical"===i?e.left:n;return{width:c-d,height:h-s,top:s,right:c,bottom:h,left:d}}})}function d(){e.props.followCursor&&(gu.push({instance:e,doc:n}),function(e){e.addEventListener("mousemove",mu)}(n))}function f(){0===(gu=gu.filter(function(t){return t.instance!==e})).filter(function(e){return e.doc===n}).length&&function(e){e.removeEventListener("mousemove",mu)}(n)}return{onCreate:d,onDestroy:f,onBeforeUpdate:function(){a=e.props},onAfterUpdate:function(t,n){var o=n.followCursor;r||void 0!==o&&a.followCursor!==o&&(f(),o?(d(),!e.state.isMounted||i||s()||l()):(u(),c()))},onMount:function(){e.props.followCursor&&!i&&(o&&(h(pu),o=!1),s()||l())},onTrigger:function(e,t){Gl(t)&&(pu={clientX:t.clientX,clientY:t.clientY}),i="focus"===t.type},onHidden:function(){e.props.followCursor&&(c(),u(),o=!0)}}}};fu.setDefaultProps({render:lu});var yu,bu={exports:{}};var xu=(yu||(yu=1,bu.exports=function(){var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",o="minute",a="hour",s="day",l="week",u="month",c="quarter",h="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},v=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y={s:v,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+v(r,2,"0")+":"+v(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,u),o=n-i<0,a=t.clone().add(r+(o?-1:1),u);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:h,w:l,d:s,D:d,h:a,m:o,s:i,ms:r,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",x={};x[b]=m;var w="$isDayjsObject",E=function(e){return e instanceof A||!(!e||!e[w])},T=function e(t,n,r){var i;if(!t)return b;if("string"==typeof t){var o=t.toLowerCase();x[o]&&(i=o),n&&(x[o]=n,i=o);var a=t.split("-");if(!i&&a.length>1)return e(a[0])}else{var s=t.name;x[s]=t,i=s}return!r&&i&&(b=i),i||!r&&b},_=function(e,t){if(E(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new A(n)},k=y;k.l=T,k.i=E,k.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var A=function(){function m(e){this.$L=T(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var v=m.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(k.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return k},v.isValid=function(){return!(this.$d.toString()===f)},v.isSame=function(e,t){var n=_(e);return this.startOf(t)<=n&&n<=this.endOf(t)},v.isAfter=function(e,t){return _(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<_(e)},v.$g=function(e,t,n){return k.u(e)?this[t]:this.set(n,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var n=this,r=!!k.u(t)||t,c=k.p(e),f=function(e,t){var i=k.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},p=function(e,t){return k.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,m=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(c){case h:return r?f(1,0):f(31,11);case u:return r?f(1,m):f(0,m+1);case l:var b=this.$locale().weekStart||0,x=(g<b?g+7:g)-b;return f(r?v-x:v+(6-x),m);case s:case d:return p(y+"Hours",0);case a:return p(y+"Minutes",1);case o:return p(y+"Seconds",2);case i:return p(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var n,l=k.p(e),c="set"+(this.$u?"UTC":""),f=(n={},n[s]=c+"Date",n[d]=c+"Date",n[u]=c+"Month",n[h]=c+"FullYear",n[a]=c+"Hours",n[o]=c+"Minutes",n[i]=c+"Seconds",n[r]=c+"Milliseconds",n)[l],p=l===s?this.$D+(t-this.$W):t;if(l===u||l===h){var g=this.clone().set(d,1);g.$d[f](p),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[k.p(e)]()},v.add=function(r,c){var d,f=this;r=Number(r);var p=k.p(c),g=function(e){var t=_(f);return k.w(t.date(t.date()+Math.round(e*r)),f)};if(p===u)return this.set(u,this.$M+r);if(p===h)return this.set(h,this.$y+r);if(p===s)return g(1);if(p===l)return g(7);var m=(d={},d[o]=t,d[a]=n,d[i]=e,d)[p]||1,v=this.$d.getTime()+r*m;return k.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=k.z(this),o=this.$H,a=this.$m,s=this.$M,l=n.weekdays,u=n.months,c=n.meridiem,h=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].slice(0,o)},d=function(e){return k.s(o%12||12,e,"0")},p=c||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(g,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return k.s(t.$y,4,"0");case"M":return s+1;case"MM":return k.s(s+1,2,"0");case"MMM":return h(n.monthsShort,s,u,3);case"MMMM":return h(u,s);case"D":return t.$D;case"DD":return k.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(n.weekdaysMin,t.$W,l,2);case"ddd":return h(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(o);case"HH":return k.s(o,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return p(o,a,!0);case"A":return p(o,a,!1);case"m":return String(a);case"mm":return k.s(a,2,"0");case"s":return String(t.$s);case"ss":return k.s(t.$s,2,"0");case"SSS":return k.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,d,f){var p,g=this,m=k.p(d),v=_(r),y=(v.utcOffset()-this.utcOffset())*t,b=this-v,x=function(){return k.m(g,v)};switch(m){case h:p=x()/12;break;case u:p=x();break;case c:p=x()/3;break;case l:p=(b-y)/6048e5;break;case s:p=(b-y)/864e5;break;case a:p=b/n;break;case o:p=b/t;break;case i:p=b/e;break;default:p=b}return f?p:k.a(p)},v.daysInMonth=function(){return this.endOf(u).$D},v.$locale=function(){return x[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=T(e,t,!0);return r&&(n.$L=r),n},v.clone=function(){return k.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},m}(),S=A.prototype;return _.prototype=S,[["$ms",r],["$s",i],["$m",o],["$H",a],["$W",s],["$M",u],["$y",h],["$D",d]].forEach(function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),_.extend=function(e,t){return e.$i||(e(t,A,_),e.$i=!0),_},_.locale=T,_.isDayjs=E,_.unix=function(e){return _(1e3*e)},_.en=x[b],_.Ls=x,_.p={},_}()),bu.exports);const wu=Zo(xu),Eu={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),hsl2rgb:({h:e,s:t,l:n},r)=>{if(!t)return 2.55*n;e/=360,t/=100;const i=(n/=100)<.5?n*(1+t):n+t-n*t,o=2*n-i;switch(r){case"r":return 255*Eu.hue2rgb(o,i,e+1/3);case"g":return 255*Eu.hue2rgb(o,i,e);case"b":return 255*Eu.hue2rgb(o,i,e-1/3)}},rgb2hsl:({r:e,g:t,b:n},r)=>{e/=255,t/=255,n/=255;const i=Math.max(e,t,n),o=Math.min(e,t,n),a=(i+o)/2;if("l"===r)return 100*a;if(i===o)return 0;const s=i-o;if("s"===r)return 100*(a>.5?s/(2-i-o):s/(i+o));switch(i){case e:return 60*((t-n)/s+(t<n?6:0));case t:return 60*((n-e)/s+2);case n:return 60*((e-t)/s+4);default:return-1}}},Tu={channel:Eu,lang:{clamp:(e,t,n)=>t>n?Math.min(t,Math.max(n,e)):Math.min(n,Math.max(t,e)),round:e=>Math.round(1e10*e)/1e10},unit:{dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}}},_u={};for(let R7=0;R7<=255;R7++)_u[R7]=Tu.unit.dec2hex(R7);const ku=0,Au=1,Su=2;let Nu=class{constructor(){this.type=ku}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=ku}is(e){return this.type===e}};const Mu=new class{constructor(e,t){this.color=t,this.changed=!1,this.data=e,this.type=new Nu}set(e,t){return this.color=t,this.changed=!1,this.data=e,this.type.type=ku,this}_ensureHSL(){const e=this.data,{h:t,s:n,l:r}=e;void 0===t&&(e.h=Tu.channel.rgb2hsl(e,"h")),void 0===n&&(e.s=Tu.channel.rgb2hsl(e,"s")),void 0===r&&(e.l=Tu.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:t,g:n,b:r}=e;void 0===t&&(e.r=Tu.channel.hsl2rgb(e,"r")),void 0===n&&(e.g=Tu.channel.hsl2rgb(e,"g")),void 0===r&&(e.b=Tu.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,t=e.r;return this.type.is(Su)||void 0===t?(this._ensureHSL(),Tu.channel.hsl2rgb(e,"r")):t}get g(){const e=this.data,t=e.g;return this.type.is(Su)||void 0===t?(this._ensureHSL(),Tu.channel.hsl2rgb(e,"g")):t}get b(){const e=this.data,t=e.b;return this.type.is(Su)||void 0===t?(this._ensureHSL(),Tu.channel.hsl2rgb(e,"b")):t}get h(){const e=this.data,t=e.h;return this.type.is(Au)||void 0===t?(this._ensureRGB(),Tu.channel.rgb2hsl(e,"h")):t}get s(){const e=this.data,t=e.s;return this.type.is(Au)||void 0===t?(this._ensureRGB(),Tu.channel.rgb2hsl(e,"s")):t}get l(){const e=this.data,t=e.l;return this.type.is(Au)||void 0===t?(this._ensureRGB(),Tu.channel.rgb2hsl(e,"l")):t}get a(){return this.data.a}set r(e){this.type.set(Au),this.changed=!0,this.data.r=e}set g(e){this.type.set(Au),this.changed=!0,this.data.g=e}set b(e){this.type.set(Au),this.changed=!0,this.data.b=e}set h(e){this.type.set(Su),this.changed=!0,this.data.h=e}set s(e){this.type.set(Su),this.changed=!0,this.data.s=e}set l(e){this.type.set(Su),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}({r:0,g:0,b:0,a:0},"transparent"),Cu={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(35!==e.charCodeAt(0))return;const t=e.match(Cu.re);if(!t)return;const n=t[1],r=parseInt(n,16),i=n.length,o=i%4==0,a=i>4,s=a?1:17,l=a?8:4,u=o?0:-1,c=a?255:15;return Mu.set({r:(r>>l*(u+3)&c)*s,g:(r>>l*(u+2)&c)*s,b:(r>>l*(u+1)&c)*s,a:o?(r&c)*s/255:1},e)},stringify:e=>{const{r:t,g:n,b:r,a:i}=e;return i<1?`#${_u[Math.round(t)]}${_u[Math.round(n)]}${_u[Math.round(r)]}${_u[Math.round(255*i)]}`:`#${_u[Math.round(t)]}${_u[Math.round(n)]}${_u[Math.round(r)]}`}},Iu={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(Iu.hueRe);if(t){const[,e,n]=t;switch(n){case"grad":return Tu.channel.clamp.h(.9*parseFloat(e));case"rad":return Tu.channel.clamp.h(180*parseFloat(e)/Math.PI);case"turn":return Tu.channel.clamp.h(360*parseFloat(e))}}return Tu.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(104!==t&&72!==t)return;const n=e.match(Iu.re);if(!n)return;const[,r,i,o,a,s]=n;return Mu.set({h:Iu._hue2deg(r),s:Tu.channel.clamp.s(parseFloat(i)),l:Tu.channel.clamp.l(parseFloat(o)),a:a?Tu.channel.clamp.a(s?parseFloat(a)/100:parseFloat(a)):1},e)},stringify:e=>{const{h:t,s:n,l:r,a:i}=e;return i<1?`hsla(${Tu.lang.round(t)}, ${Tu.lang.round(n)}%, ${Tu.lang.round(r)}%, ${i})`:`hsl(${Tu.lang.round(t)}, ${Tu.lang.round(n)}%, ${Tu.lang.round(r)}%)`}},Ru={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=Ru.colors[e];if(t)return Cu.parse(t)},stringify:e=>{const t=Cu.stringify(e);for(const n in Ru.colors)if(Ru.colors[n]===t)return n}},Lu={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(114!==t&&82!==t)return;const n=e.match(Lu.re);if(!n)return;const[,r,i,o,a,s,l,u,c]=n;return Mu.set({r:Tu.channel.clamp.r(i?2.55*parseFloat(r):parseFloat(r)),g:Tu.channel.clamp.g(a?2.55*parseFloat(o):parseFloat(o)),b:Tu.channel.clamp.b(l?2.55*parseFloat(s):parseFloat(s)),a:u?Tu.channel.clamp.a(c?parseFloat(u)/100:parseFloat(u)):1},e)},stringify:e=>{const{r:t,g:n,b:r,a:i}=e;return i<1?`rgba(${Tu.lang.round(t)}, ${Tu.lang.round(n)}, ${Tu.lang.round(r)}, ${Tu.lang.round(i)})`:`rgb(${Tu.lang.round(t)}, ${Tu.lang.round(n)}, ${Tu.lang.round(r)})`}},Ou=e=>{if("string"!=typeof e)return e;const t=Cu.parse(e)||Lu.parse(e)||Iu.parse(e)||Ru.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},Du=e=>!e.changed&&e.color?e.color:e.type.is(Su)||void 0===e.data.r?Iu.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Lu.stringify(e):Cu.stringify(e),Pu=(e,t)=>{const n=Ou(e);for(const r in t)n[r]=Tu.channel.clamp[r](t[r]);return Du(n)},Bu=(e,t,n=0,r=1)=>{if("number"!=typeof e)return Pu(e,{a:t});const i=Mu.set({r:Tu.channel.clamp.r(e),g:Tu.channel.clamp.g(t),b:Tu.channel.clamp.b(n),a:Tu.channel.clamp.a(r)});return Du(i)},Fu=(e,t)=>Tu.lang.round(Ou(e)[t]),zu=e=>(e=>{const{r:t,g:n,b:r}=Ou(e),i=.2126*Tu.channel.toLinear(t)+.7152*Tu.channel.toLinear(n)+.0722*Tu.channel.toLinear(r);return Tu.lang.round(i)})(e)>=.5,Uu=e=>!zu(e),Gu=(e,t,n)=>{const r=Ou(e),i=r[t],o=Tu.channel.clamp[t](i+n);return i!==o&&(r[t]=o),Du(r)},Vu=(e,t)=>Gu(e,"l",t),ju=(e,t)=>Gu(e,"l",-t),Hu=(e,t)=>{const n=Ou(e),r={};for(const i in t)t[i]&&(r[i]=n[i]+t[i]);return Pu(e,r)},$u=(e,t=100)=>{const n=Ou(e);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,((e,t,n=50)=>{const{r:r,g:i,b:o,a:a}=Ou(e),{r:s,g:l,b:u,a:c}=Ou(t),h=n/100,d=2*h-1,f=a-c,p=((d*f===-1?d:(d+f)/(1+d*f))+1)/2,g=1-p;return Bu(r*p+s*g,i*p+l*g,o*p+u*g,a*h+c*(1-h))})(n,e,t)},{entries:Yu,setPrototypeOf:qu,isFrozen:Wu,getPrototypeOf:Xu,getOwnPropertyDescriptor:Ku}=Object;let{freeze:Zu,seal:Qu,create:Ju}=Object,{apply:ec,construct:tc}="undefined"!=typeof Reflect&&Reflect;Zu||(Zu=function(e){return e}),Qu||(Qu=function(e){return e}),ec||(ec=function(e,t,n){return e.apply(t,n)}),tc||(tc=function(e,t){return new e(...t)});const nc=vc(Array.prototype.forEach),rc=vc(Array.prototype.lastIndexOf),ic=vc(Array.prototype.pop),oc=vc(Array.prototype.push),ac=vc(Array.prototype.splice),sc=vc(String.prototype.toLowerCase),lc=vc(String.prototype.toString),uc=vc(String.prototype.match),cc=vc(String.prototype.replace),hc=vc(String.prototype.indexOf),dc=vc(String.prototype.trim),fc=vc(Object.prototype.hasOwnProperty),pc=vc(RegExp.prototype.test),gc=(mc=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tc(mc,t)});var mc;function vc(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return ec(e,t,r)}}function yc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sc;qu&&qu(e,null);let r=t.length;for(;r--;){let i=t[r];if("string"==typeof i){const e=n(i);e!==i&&(Wu(t)||(t[r]=e),i=e)}e[i]=!0}return e}function bc(e){for(let t=0;t<e.length;t++){fc(e,t)||(e[t]=null)}return e}function xc(e){const t=Ju(null);for(const[n,r]of Yu(e)){fc(e,n)&&(Array.isArray(r)?t[n]=bc(r):r&&"object"==typeof r&&r.constructor===Object?t[n]=xc(r):t[n]=r)}return t}function wc(e,t){for(;null!==e;){const n=Ku(e,t);if(n){if(n.get)return vc(n.get);if("function"==typeof n.value)return vc(n.value)}e=Xu(e)}return function(){return null}}const Ec=Zu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Tc=Zu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),_c=Zu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),kc=Zu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ac=Zu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Sc=Zu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Nc=Zu(["#text"]),Mc=Zu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Cc=Zu(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ic=Zu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Rc=Zu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Lc=Qu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Oc=Qu(/<%[\w\W]*|[\w\W]*%>/gm),Dc=Qu(/\$\{[\w\W]*/gm),Pc=Qu(/^data-[\-\w.\u00B7-\uFFFF]+$/),Bc=Qu(/^aria-[\-\w]+$/),Fc=Qu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),zc=Qu(/^(?:\w+script|data):/i),Uc=Qu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Gc=Qu(/^html$/i),Vc=Qu(/^[a-z][.\w]*(-[.\w]+)+$/i);var jc=Object.freeze({__proto__:null,ARIA_ATTR:Bc,ATTR_WHITESPACE:Uc,CUSTOM_ELEMENT:Vc,DATA_ATTR:Pc,DOCTYPE_NAME:Gc,ERB_EXPR:Oc,IS_ALLOWED_URI:Fc,IS_SCRIPT_OR_DATA:zc,MUSTACHE_EXPR:Lc,TMPLIT_EXPR:Dc});const Hc=1,$c=3,Yc=7,qc=8,Wc=9;var Xc,Kc,Zc=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const n=t=>e(t);if(n.version="3.2.6",n.removed=[],!t||!t.document||t.document.nodeType!==Wc||!t.Element)return n.isSupported=!1,n;let{document:r}=t;const i=r,o=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:l,Element:u,NodeFilter:c,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:p}=t,g=u.prototype,m=wc(g,"cloneNode"),v=wc(g,"remove"),y=wc(g,"nextSibling"),b=wc(g,"childNodes"),x=wc(g,"parentNode");if("function"==typeof s){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let w,E="";const{implementation:T,createNodeIterator:_,createDocumentFragment:k,getElementsByTagName:A}=r,{importNode:S}=i;let N={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof Yu&&"function"==typeof x&&T&&void 0!==T.createHTMLDocument;const{MUSTACHE_EXPR:M,ERB_EXPR:C,TMPLIT_EXPR:I,DATA_ATTR:R,ARIA_ATTR:L,IS_SCRIPT_OR_DATA:O,ATTR_WHITESPACE:D,CUSTOM_ELEMENT:P}=jc;let{IS_ALLOWED_URI:B}=jc,F=null;const z=yc({},[...Ec,...Tc,..._c,...Ac,...Nc]);let U=null;const G=yc({},[...Mc,...Cc,...Ic,...Rc]);let V=Object.seal(Ju(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),j=null,H=null,$=!0,Y=!0,q=!1,W=!0,X=!1,K=!0,Z=!1,Q=!1,J=!1,ee=!1,te=!1,ne=!1,re=!0,ie=!1,oe=!0,ae=!1,se={},le=null;const ue=yc({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ce=null;const he=yc({},["audio","video","img","source","image","track"]);let de=null;const fe=yc({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pe="http://www.w3.org/1998/Math/MathML",ge="http://www.w3.org/2000/svg",me="http://www.w3.org/1999/xhtml";let ve=me,ye=!1,be=null;const xe=yc({},[pe,ge,me],lc);let we=yc({},["mi","mo","mn","ms","mtext"]),Ee=yc({},["annotation-xml"]);const Te=yc({},["title","style","font","a","script"]);let _e=null;const ke=["application/xhtml+xml","text/html"];let Ae=null,Se=null;const Ne=r.createElement("form"),Me=function(e){return e instanceof RegExp||e instanceof Function},Ce=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Se||Se!==e){if(e&&"object"==typeof e||(e={}),e=xc(e),_e=-1===ke.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,Ae="application/xhtml+xml"===_e?lc:sc,F=fc(e,"ALLOWED_TAGS")?yc({},e.ALLOWED_TAGS,Ae):z,U=fc(e,"ALLOWED_ATTR")?yc({},e.ALLOWED_ATTR,Ae):G,be=fc(e,"ALLOWED_NAMESPACES")?yc({},e.ALLOWED_NAMESPACES,lc):xe,de=fc(e,"ADD_URI_SAFE_ATTR")?yc(xc(fe),e.ADD_URI_SAFE_ATTR,Ae):fe,ce=fc(e,"ADD_DATA_URI_TAGS")?yc(xc(he),e.ADD_DATA_URI_TAGS,Ae):he,le=fc(e,"FORBID_CONTENTS")?yc({},e.FORBID_CONTENTS,Ae):ue,j=fc(e,"FORBID_TAGS")?yc({},e.FORBID_TAGS,Ae):xc({}),H=fc(e,"FORBID_ATTR")?yc({},e.FORBID_ATTR,Ae):xc({}),se=!!fc(e,"USE_PROFILES")&&e.USE_PROFILES,$=!1!==e.ALLOW_ARIA_ATTR,Y=!1!==e.ALLOW_DATA_ATTR,q=e.ALLOW_UNKNOWN_PROTOCOLS||!1,W=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,X=e.SAFE_FOR_TEMPLATES||!1,K=!1!==e.SAFE_FOR_XML,Z=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,ne=e.RETURN_TRUSTED_TYPE||!1,J=e.FORCE_BODY||!1,re=!1!==e.SANITIZE_DOM,ie=e.SANITIZE_NAMED_PROPS||!1,oe=!1!==e.KEEP_CONTENT,ae=e.IN_PLACE||!1,B=e.ALLOWED_URI_REGEXP||Fc,ve=e.NAMESPACE||me,we=e.MATHML_TEXT_INTEGRATION_POINTS||we,Ee=e.HTML_INTEGRATION_POINTS||Ee,V=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Me(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Me(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(V.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(Y=!1),te&&(ee=!0),se&&(F=yc({},Nc),U=[],!0===se.html&&(yc(F,Ec),yc(U,Mc)),!0===se.svg&&(yc(F,Tc),yc(U,Cc),yc(U,Rc)),!0===se.svgFilters&&(yc(F,_c),yc(U,Cc),yc(U,Rc)),!0===se.mathMl&&(yc(F,Ac),yc(U,Ic),yc(U,Rc))),e.ADD_TAGS&&(F===z&&(F=xc(F)),yc(F,e.ADD_TAGS,Ae)),e.ADD_ATTR&&(U===G&&(U=xc(U)),yc(U,e.ADD_ATTR,Ae)),e.ADD_URI_SAFE_ATTR&&yc(de,e.ADD_URI_SAFE_ATTR,Ae),e.FORBID_CONTENTS&&(le===ue&&(le=xc(le)),yc(le,e.FORBID_CONTENTS,Ae)),oe&&(F["#text"]=!0),Z&&yc(F,["html","head","body"]),F.table&&(yc(F,["tbody"]),delete j.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw gc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw gc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=e.TRUSTED_TYPES_POLICY,E=w.createHTML("")}else void 0===w&&(w=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(o){return null}}(p,o)),null!==w&&"string"==typeof E&&(E=w.createHTML(""));Zu&&Zu(e),Se=e}},Ie=yc({},[...Tc,..._c,...kc]),Re=yc({},[...Ac,...Sc]),Le=function(e){oc(n.removed,{element:e});try{x(e).removeChild(e)}catch(t){v(e)}},Oe=function(e,t){try{oc(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(r){oc(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ee||te)try{Le(t)}catch(r){}else try{t.setAttribute(e,"")}catch(r){}},De=function(e){let t=null,n=null;if(J)e="<remove></remove>"+e;else{const t=uc(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===_e&&ve===me&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=w?w.createHTML(e):e;if(ve===me)try{t=(new f).parseFromString(i,_e)}catch(a){}if(!t||!t.documentElement){t=T.createDocument(ve,"template",null);try{t.documentElement.innerHTML=ye?E:i}catch(a){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),ve===me?A.call(t,Z?"html":"body")[0]:Z?t.documentElement:o},Pe=function(e){return _.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Be=function(e){return e instanceof d&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof h)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Fe=function(e){return"function"==typeof l&&e instanceof l};function ze(e,t,r){nc(e,e=>{e.call(n,t,r,Se)})}const Ue=function(e){let t=null;if(ze(N.beforeSanitizeElements,e,null),Be(e))return Le(e),!0;const r=Ae(e.nodeName);if(ze(N.uponSanitizeElement,e,{tagName:r,allowedTags:F}),K&&e.hasChildNodes()&&!Fe(e.firstElementChild)&&pc(/<[/\w!]/g,e.innerHTML)&&pc(/<[/\w!]/g,e.textContent))return Le(e),!0;if(e.nodeType===Yc)return Le(e),!0;if(K&&e.nodeType===qc&&pc(/<[/\w]/g,e.data))return Le(e),!0;if(!F[r]||j[r]){if(!j[r]&&Ve(r)){if(V.tagNameCheck instanceof RegExp&&pc(V.tagNameCheck,r))return!1;if(V.tagNameCheck instanceof Function&&V.tagNameCheck(r))return!1}if(oe&&!le[r]){const t=x(e)||e.parentNode,n=b(e)||e.childNodes;if(n&&t){for(let r=n.length-1;r>=0;--r){const i=m(n[r],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,y(e))}}}return Le(e),!0}return e instanceof u&&!function(e){let t=x(e);t&&t.tagName||(t={namespaceURI:ve,tagName:"template"});const n=sc(e.tagName),r=sc(t.tagName);return!!be[e.namespaceURI]&&(e.namespaceURI===ge?t.namespaceURI===me?"svg"===n:t.namespaceURI===pe?"svg"===n&&("annotation-xml"===r||we[r]):Boolean(Ie[n]):e.namespaceURI===pe?t.namespaceURI===me?"math"===n:t.namespaceURI===ge?"math"===n&&Ee[r]:Boolean(Re[n]):e.namespaceURI===me?!(t.namespaceURI===ge&&!Ee[r])&&!(t.namespaceURI===pe&&!we[r])&&!Re[n]&&(Te[n]||!Ie[n]):!("application/xhtml+xml"!==_e||!be[e.namespaceURI]))}(e)?(Le(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!pc(/<\/no(script|embed|frames)/i,e.innerHTML)?(X&&e.nodeType===$c&&(t=e.textContent,nc([M,C,I],e=>{t=cc(t,e," ")}),e.textContent!==t&&(oc(n.removed,{element:e.cloneNode()}),e.textContent=t)),ze(N.afterSanitizeElements,e,null),!1):(Le(e),!0)},Ge=function(e,t,n){if(re&&("id"===t||"name"===t)&&(n in r||n in Ne))return!1;if(Y&&!H[t]&&pc(R,t));else if($&&pc(L,t));else if(!U[t]||H[t]){if(!(Ve(e)&&(V.tagNameCheck instanceof RegExp&&pc(V.tagNameCheck,e)||V.tagNameCheck instanceof Function&&V.tagNameCheck(e))&&(V.attributeNameCheck instanceof RegExp&&pc(V.attributeNameCheck,t)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(t))||"is"===t&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&pc(V.tagNameCheck,n)||V.tagNameCheck instanceof Function&&V.tagNameCheck(n))))return!1}else if(de[t]);else if(pc(B,cc(n,D,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==hc(n,"data:")||!ce[e]){if(q&&!pc(O,cc(n,D,"")));else if(n)return!1}else;return!0},Ve=function(e){return"annotation-xml"!==e&&uc(e,P)},je=function(e){ze(N.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Be(e))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U,forceKeepAttr:void 0};let i=t.length;for(;i--;){const a=t[i],{name:s,namespaceURI:l,value:u}=a,c=Ae(s),h=u;let d="value"===s?h:dc(h);if(r.attrName=c,r.attrValue=d,r.keepAttr=!0,r.forceKeepAttr=void 0,ze(N.uponSanitizeAttribute,e,r),d=r.attrValue,!ie||"id"!==c&&"name"!==c||(Oe(s,e),d="user-content-"+d),K&&pc(/((--!?|])>)|<\/(style|title)/i,d)){Oe(s,e);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr){Oe(s,e);continue}if(!W&&pc(/\/>/i,d)){Oe(s,e);continue}X&&nc([M,C,I],e=>{d=cc(d,e," ")});const f=Ae(e.nodeName);if(Ge(f,c,d)){if(w&&"object"==typeof p&&"function"==typeof p.getAttributeType)if(l);else switch(p.getAttributeType(f,c)){case"TrustedHTML":d=w.createHTML(d);break;case"TrustedScriptURL":d=w.createScriptURL(d)}if(d!==h)try{l?e.setAttributeNS(l,s,d):e.setAttribute(s,d),Be(e)?Le(e):ic(n.removed)}catch(o){Oe(s,e)}}else Oe(s,e)}ze(N.afterSanitizeAttributes,e,null)},He=function e(t){let n=null;const r=Pe(t);for(ze(N.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)ze(N.uponSanitizeShadowNode,n,null),Ue(n),je(n),n.content instanceof a&&e(n.content);ze(N.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,o=null,s=null,u=null;if(ye=!e,ye&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Fe(e)){if("function"!=typeof e.toString)throw gc("toString is not a function");if("string"!=typeof(e=e.toString()))throw gc("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Q||Ce(t),n.removed=[],"string"==typeof e&&(ae=!1),ae){if(e.nodeName){const t=Ae(e.nodeName);if(!F[t]||j[t])throw gc("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)r=De("\x3c!----\x3e"),o=r.ownerDocument.importNode(e,!0),o.nodeType===Hc&&"BODY"===o.nodeName||"HTML"===o.nodeName?r=o:r.appendChild(o);else{if(!ee&&!X&&!Z&&-1===e.indexOf("<"))return w&&ne?w.createHTML(e):e;if(r=De(e),!r)return ee?null:ne?E:""}r&&J&&Le(r.firstChild);const c=Pe(ae?e:r);for(;s=c.nextNode();)Ue(s),je(s),s.content instanceof a&&He(s.content);if(ae)return e;if(ee){if(te)for(u=k.call(r.ownerDocument);r.firstChild;)u.appendChild(r.firstChild);else u=r;return(U.shadowroot||U.shadowrootmode)&&(u=S.call(i,u,!0)),u}let h=Z?r.outerHTML:r.innerHTML;return Z&&F["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&pc(Gc,r.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+h),X&&nc([M,C,I],e=>{h=cc(h,e," ")}),w&&ne?w.createHTML(h):h},n.setConfig=function(){Ce(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Q=!0},n.clearConfig=function(){Se=null,Q=!1},n.isValidAttribute=function(e,t,n){Se||Ce({});const r=Ae(e),i=Ae(t);return Ge(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&oc(N[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=rc(N[e],t);return-1===n?void 0:ac(N[e],n,1)[0]}return ic(N[e])},n.removeHooks=function(e){N[e]=[]},n.removeAllHooks=function(){N={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}(),Qc={},Jc={};var eh=function(){if(Kc)return Qc;Kc=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.sanitizeUrl=void 0;var e=(Xc||(Xc=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.BLANK_URL=Jc.relativeFirstCharacters=Jc.whitespaceEscapeCharsRegex=Jc.urlSchemeRegex=Jc.ctrlCharactersRegex=Jc.htmlCtrlEntityRegex=Jc.htmlEntitiesRegex=Jc.invalidProtocolRegex=void 0,Jc.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Jc.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Jc.htmlCtrlEntityRegex=/&(newline|tab);/gi,Jc.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Jc.urlSchemeRegex=/^.+(:|&colon;)/gim,Jc.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Jc.relativeFirstCharacters=[".","/"],Jc.BLANK_URL="about:blank"),Jc);function t(t){return t.replace(e.ctrlCharactersRegex,"").replace(e.htmlEntitiesRegex,function(e,t){return String.fromCharCode(t)})}function n(e){try{return decodeURIComponent(e)}catch(LY){return e}}return Qc.sanitizeUrl=function(r){if(!r)return e.BLANK_URL;var i,o=n(r.trim());do{i=(o=n(o=t(o).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim())).match(e.ctrlCharactersRegex)||o.match(e.htmlEntitiesRegex)||o.match(e.htmlCtrlEntityRegex)||o.match(e.whitespaceEscapeCharsRegex)}while(i&&i.length>0);var a=o;if(!a)return e.BLANK_URL;if(function(t){return e.relativeFirstCharacters.indexOf(t[0])>-1}(a))return a;var s=a.trimStart(),l=s.match(e.urlSchemeRegex);if(!l)return a;var u=l[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(u))return e.BLANK_URL;var c=s.replace(/\\/g,"/");if("mailto:"===u||u.includes("://"))return c;if("http:"===u||"https:"===u){if(!function(e){return URL.canParse(e)}(c))return e.BLANK_URL;var h=new URL(c);return h.protocol=h.protocol.toLowerCase(),h.hostname=h.hostname.toLowerCase(),h.toString()}return c},Qc}();function th(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nh(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rh(e){let t,n,r;function i(e,r,i=0,o=e.length){if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<0?i=t+1:o=t}while(i<o)}return i}return 2!==e.length?(t=th,n=(t,n)=>th(e(t),n),r=(t,n)=>e(t)-n):(t=e===th||e===nh?e:ih,n=e,r=e),{left:i,center:function(e,t,n=0,o=e.length){const a=i(e,t,n,o-1);return a>n&&r(e[a-1],t)>-r(e[a],t)?a-1:a},right:function(e,r,i=0,o=e.length){if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<=0?i=t+1:o=t}while(i<o)}return i}}}function ih(){return 0}const oh=rh(th).right;rh(function(e){return null===e?NaN:+e}).center;class ah extends Map{constructor(e,t=lh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(sh(this,e))}has(e){return super.has(sh(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const r=t(n);e.has(r)&&(n=e.get(r),e.delete(r));return n}(this,e))}}function sh({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function lh(e){return null!==e&&"object"==typeof e?e.valueOf():e}const uh=Math.sqrt(50),ch=Math.sqrt(10),hh=Math.sqrt(2);function dh(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=uh?10:o>=ch?5:o>=hh?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?dh(e,t,2*n):[s,l,u]}function fh(e,t,n){return dh(e=+e,t=+t,n=+n)[2]}function ph(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?fh(t,e,n):fh(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function gh(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function mh(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function vh(e){return e}var yh=1e-6;function bh(e){return"translate("+e+",0)"}function xh(e){return"translate(0,"+e+")"}function wh(e){return t=>+e(t)}function Eh(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Th(){return!this.__axis}function _h(e,t){var n=[],r=null,i=null,o=6,a=6,s=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,u=1===e||4===e?-1:1,c=4===e||2===e?"x":"y",h=1===e||3===e?bh:xh;function d(d){var f=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,p=null==i?t.tickFormat?t.tickFormat.apply(t,n):vh:i,g=Math.max(o,0)+s,m=t.range(),v=+m[0]+l,y=+m[m.length-1]+l,b=(t.bandwidth?Eh:wh)(t.copy(),l),x=d.selection?d.selection():d,w=x.selectAll(".domain").data([null]),E=x.selectAll(".tick").data(f,t).order(),T=E.exit(),_=E.enter().append("g").attr("class","tick"),k=E.select("line"),A=E.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(_),k=k.merge(_.append("line").attr("stroke","currentColor").attr(c+"2",u*o)),A=A.merge(_.append("text").attr("fill","currentColor").attr(c,u*g).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),d!==x&&(w=w.transition(d),E=E.transition(d),k=k.transition(d),A=A.transition(d),T=T.transition(d).attr("opacity",yh).attr("transform",function(e){return isFinite(e=b(e))?h(e+l):this.getAttribute("transform")}),_.attr("opacity",yh).attr("transform",function(e){var t=this.parentNode.__axis;return h((t&&isFinite(t=t(e))?t:b(e))+l)})),T.remove(),w.attr("d",4===e||2===e?a?"M"+u*a+","+v+"H"+l+"V"+y+"H"+u*a:"M"+l+","+v+"V"+y:a?"M"+v+","+u*a+"V"+l+"H"+y+"V"+u*a:"M"+v+","+l+"H"+y),E.attr("opacity",1).attr("transform",function(e){return h(b(e)+l)}),k.attr(c+"2",u*o),A.attr(c,u*g).text(p),x.filter(Th).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),x.each(function(){this.__axis=b})}return d.scale=function(e){return arguments.length?(t=e,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(e){return arguments.length?(n=null==e?[]:Array.from(e),d):n.slice()},d.tickValues=function(e){return arguments.length?(r=null==e?null:Array.from(e),d):r&&r.slice()},d.tickFormat=function(e){return arguments.length?(i=e,d):i},d.tickSize=function(e){return arguments.length?(o=a=+e,d):o},d.tickSizeInner=function(e){return arguments.length?(o=+e,d):o},d.tickSizeOuter=function(e){return arguments.length?(a=+e,d):a},d.tickPadding=function(e){return arguments.length?(s=+e,d):s},d.offset=function(e){return arguments.length?(l=+e,d):l},d}function kh(e){return _h(1,e)}function Ah(e){return _h(3,e)}var Sh={value:()=>{}};function Nh(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Mh(r)}function Mh(e){this._=e}function Ch(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Ih(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Sh,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Mh.prototype=Nh.prototype={constructor:Mh,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=o[a]).type)i[n]=Ih(i[n],e.name,t);else if(null==t)for(n in i)i[n]=Ih(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=o[a]).type)&&(n=Ch(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Mh(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var Rh="http://www.w3.org/1999/xhtml";const Lh={svg:"http://www.w3.org/2000/svg",xhtml:Rh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Oh(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Lh.hasOwnProperty(t)?{space:Lh[t],local:e}:e}function Dh(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Rh&&t.documentElement.namespaceURI===Rh?t.createElement(e):t.createElementNS(n,e)}}function Ph(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Bh(e){var t=Oh(e);return(t.local?Ph:Dh)(t)}function Fh(){}function zh(e){return null==e?Fh:function(){return this.querySelector(e)}}function Uh(){return[]}function Gh(e){return null==e?Uh:function(){return this.querySelectorAll(e)}}function Vh(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function jh(e){return function(){return this.matches(e)}}function Hh(e){return function(t){return t.matches(e)}}var $h=Array.prototype.find;function Yh(){return this.firstElementChild}var qh=Array.prototype.filter;function Wh(){return Array.from(this.children)}function Xh(e){return new Array(e.length)}function Kh(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Zh(e,t,n,r,i,o){for(var a,s=0,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Kh(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function Qh(e,t,n,r,i,o,a){var s,l,u,c=new Map,h=t.length,d=o.length,f=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(f[s]=u=a.call(l,l.__data__,s,t)+"",c.has(u)?i[s]=l:c.set(u,l));for(s=0;s<d;++s)u=a.call(e,o[s],s,o)+"",(l=c.get(u))?(r[s]=l,l.__data__=o[s],c.delete(u)):n[s]=new Kh(e,o[s]);for(s=0;s<h;++s)(l=t[s])&&c.get(f[s])===l&&(i[s]=l)}function Jh(e){return e.__data__}function ed(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function td(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function nd(e){return function(){this.removeAttribute(e)}}function rd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function id(e,t){return function(){this.setAttribute(e,t)}}function od(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ad(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function sd(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ld(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ud(e){return function(){this.style.removeProperty(e)}}function cd(e,t,n){return function(){this.style.setProperty(e,t,n)}}function hd(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function dd(e,t){return e.style.getPropertyValue(t)||ld(e).getComputedStyle(e,null).getPropertyValue(t)}function fd(e){return function(){delete this[e]}}function pd(e,t){return function(){this[e]=t}}function gd(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function md(e){return e.trim().split(/^|\s+/)}function vd(e){return e.classList||new yd(e)}function yd(e){this._node=e,this._names=md(e.getAttribute("class")||"")}function bd(e,t){for(var n=vd(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function xd(e,t){for(var n=vd(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function wd(e){return function(){bd(this,e)}}function Ed(e){return function(){xd(this,e)}}function Td(e,t){return function(){(t.apply(this,arguments)?bd:xd)(this,e)}}function _d(){this.textContent=""}function kd(e){return function(){this.textContent=e}}function Ad(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Sd(){this.innerHTML=""}function Nd(e){return function(){this.innerHTML=e}}function Md(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Cd(){this.nextSibling&&this.parentNode.appendChild(this)}function Id(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Rd(){return null}function Ld(){var e=this.parentNode;e&&e.removeChild(this)}function Od(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dd(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pd(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Bd(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Fd(e,t,n){var r=ld(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function zd(e,t){return function(){return Fd(this,e,t)}}function Ud(e,t){return function(){return Fd(this,e,t.apply(this,arguments))}}Kh.prototype={constructor:Kh,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},yd.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Gd=[null];function Vd(e,t){this._groups=e,this._parents=t}function jd(){return new Vd([[document.documentElement]],Gd)}function Hd(e){return"string"==typeof e?new Vd([[document.querySelector(e)]],[document.documentElement]):new Vd([[e]],Gd)}function $d(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Yd(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function qd(){}Vd.prototype=jd.prototype={constructor:Vd,select:function(e){"function"!=typeof e&&(e=zh(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new Vd(r,this._parents)},selectAll:function(e){e="function"==typeof e?Vh(e):Gh(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(r.push(e.call(a,a.__data__,u,s)),i.push(a));return new Vd(r,i)},selectChild:function(e){return this.select(null==e?Yh:function(e){return function(){return $h.call(this.children,e)}}("function"==typeof e?e:Hh(e)))},selectChildren:function(e){return this.selectAll(null==e?Wh:function(e){return function(){return qh.call(this.children,e)}}("function"==typeof e?e:Hh(e)))},filter:function(e){"function"!=typeof e&&(e=jh(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new Vd(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Jh);var n,r=t?Qh:Zh,i=this._parents,o=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=o.length,s=new Array(a),l=new Array(a),u=new Array(a),c=0;c<a;++c){var h=i[c],d=o[c],f=d.length,p=ed(e.call(h,h&&h.__data__,c,i)),g=p.length,m=l[c]=new Array(g),v=s[c]=new Array(g);r(h,d,m,v,u[c]=new Array(f),p,t);for(var y,b,x=0,w=0;x<g;++x)if(y=m[x]){for(x>=w&&(w=x+1);!(b=v[w])&&++w<g;);y._next=b||null}}return(s=new Vd(s,i))._enter=l,s._exit=u,s},enter:function(){return new Vd(this._enter||this._groups.map(Xh),this._parents)},exit:function(){return new Vd(this._exit||this._groups.map(Xh),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var u,c=n[l],h=r[l],d=c.length,f=s[l]=new Array(d),p=0;p<d;++p)(u=c[p]||h[p])&&(f[p]=u);for(;l<i;++l)s[l]=n[l];return new Vd(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=td);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new Vd(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=Oh(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?rd:nd:"function"==typeof t?n.local?sd:ad:n.local?od:id)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?ud:"function"==typeof t?hd:cd)(e,t,null==n?"":n)):dd(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?fd:"function"==typeof t?gd:pd)(e,t)):this.node()[e]},classed:function(e,t){var n=md(e+"");if(arguments.length<2){for(var r=vd(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?Td:t?wd:Ed)(n,t))},text:function(e){return arguments.length?this.each(null==e?_d:("function"==typeof e?Ad:kd)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Sd:("function"==typeof e?Md:Nd)(e)):this.node().innerHTML},raise:function(){return this.each(Cd)},lower:function(){return this.each(Id)},append:function(e){var t="function"==typeof e?e:Bh(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:Bh(e),r=null==t?Rd:"function"==typeof t?t:zh(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Ld)},clone:function(e){return this.select(e?Dd:Od)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?Bd:Pd,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?Ud:zd)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var Wd=.7,Xd=1/Wd,Kd="\\s*([+-]?\\d+)\\s*",Zd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jd=/^#([0-9a-f]{3,8})$/,ef=new RegExp(`^rgb\\(${Kd},${Kd},${Kd}\\)$`),tf=new RegExp(`^rgb\\(${Qd},${Qd},${Qd}\\)$`),nf=new RegExp(`^rgba\\(${Kd},${Kd},${Kd},${Zd}\\)$`),rf=new RegExp(`^rgba\\(${Qd},${Qd},${Qd},${Zd}\\)$`),of=new RegExp(`^hsl\\(${Zd},${Qd},${Qd}\\)$`),af=new RegExp(`^hsla\\(${Zd},${Qd},${Qd},${Zd}\\)$`),sf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function lf(){return this.rgb().formatHex()}function uf(){return this.rgb().formatRgb()}function cf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Jd.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?hf(t):3===n?new gf(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?df(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?df(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ef.exec(e))?new gf(t[1],t[2],t[3],1):(t=tf.exec(e))?new gf(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=nf.exec(e))?df(t[1],t[2],t[3],t[4]):(t=rf.exec(e))?df(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=of.exec(e))?wf(t[1],t[2]/100,t[3]/100,1):(t=af.exec(e))?wf(t[1],t[2]/100,t[3]/100,t[4]):sf.hasOwnProperty(e)?hf(sf[e]):"transparent"===e?new gf(NaN,NaN,NaN,0):null}function hf(e){return new gf(e>>16&255,e>>8&255,255&e,1)}function df(e,t,n,r){return r<=0&&(e=t=n=NaN),new gf(e,t,n,r)}function ff(e){return e instanceof qd||(e=cf(e)),e?new gf((e=e.rgb()).r,e.g,e.b,e.opacity):new gf}function pf(e,t,n,r){return 1===arguments.length?ff(e):new gf(e,t,n,null==r?1:r)}function gf(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function mf(){return`#${xf(this.r)}${xf(this.g)}${xf(this.b)}`}function vf(){const e=yf(this.opacity);return`${1===e?"rgb(":"rgba("}${bf(this.r)}, ${bf(this.g)}, ${bf(this.b)}${1===e?")":`, ${e})`}`}function yf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xf(e){return((e=bf(e))<16?"0":"")+e.toString(16)}function wf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Tf(e,t,n,r)}function Ef(e){if(e instanceof Tf)return new Tf(e.h,e.s,e.l,e.opacity);if(e instanceof qd||(e=cf(e)),!e)return new Tf;if(e instanceof Tf)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Tf(a,s,l,e.opacity)}function Tf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function _f(e){return(e=(e||0)%360)<0?e+360:e}function kf(e){return Math.max(0,Math.min(1,e||0))}function Af(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}$d(qd,cf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:lf,formatHex:lf,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ef(this).formatHsl()},formatRgb:uf,toString:uf}),$d(gf,pf,Yd(qd,{brighter(e){return e=null==e?Xd:Math.pow(Xd,e),new gf(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Wd:Math.pow(Wd,e),new gf(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gf(bf(this.r),bf(this.g),bf(this.b),yf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mf,formatHex:mf,formatHex8:function(){return`#${xf(this.r)}${xf(this.g)}${xf(this.b)}${xf(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:vf,toString:vf})),$d(Tf,function(e,t,n,r){return 1===arguments.length?Ef(e):new Tf(e,t,n,null==r?1:r)},Yd(qd,{brighter(e){return e=null==e?Xd:Math.pow(Xd,e),new Tf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Wd:Math.pow(Wd,e),new Tf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new gf(Af(e>=240?e-240:e+120,i,r),Af(e,i,r),Af(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Tf(_f(this.h),kf(this.s),kf(this.l),yf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=yf(this.opacity);return`${1===e?"hsl(":"hsla("}${_f(this.h)}, ${100*kf(this.s)}%, ${100*kf(this.l)}%${1===e?")":`, ${e})`}`}}));const Sf=Math.PI/180,Nf=180/Math.PI,Mf=.96422,Cf=.82521,If=4/29,Rf=6/29,Lf=3*Rf*Rf,Of=Rf*Rf*Rf;function Df(e){if(e instanceof Pf)return new Pf(e.l,e.a,e.b,e.opacity);if(e instanceof Vf)return jf(e);e instanceof gf||(e=ff(e));var t,n,r=Uf(e.r),i=Uf(e.g),o=Uf(e.b),a=Bf((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?t=n=a:(t=Bf((.4360747*r+.3850649*i+.1430804*o)/Mf),n=Bf((.0139322*r+.0971045*i+.7141733*o)/Cf)),new Pf(116*a-16,500*(t-a),200*(a-n),e.opacity)}function Pf(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Bf(e){return e>Of?Math.pow(e,1/3):e/Lf+If}function Ff(e){return e>Rf?e*e*e:Lf*(e-If)}function zf(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Uf(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Gf(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof Vf)return new Vf(e.h,e.c,e.l,e.opacity);if(e instanceof Pf||(e=Df(e)),0===e.a&&0===e.b)return new Vf(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Nf;return new Vf(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new Vf(e,t,n,null==r?1:r)}function Vf(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function jf(e){if(isNaN(e.h))return new Pf(e.l,0,0,e.opacity);var t=e.h*Sf;return new Pf(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}$d(Pf,function(e,t,n,r){return 1===arguments.length?Df(e):new Pf(e,t,n,null==r?1:r)},Yd(qd,{brighter(e){return new Pf(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker(e){return new Pf(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new gf(zf(3.1338561*(t=Mf*Ff(t))-1.6168667*(e=1*Ff(e))-.4906146*(n=Cf*Ff(n))),zf(-.9787684*t+1.9161415*e+.033454*n),zf(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),$d(Vf,Gf,Yd(qd,{brighter(e){return new Vf(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker(e){return new Vf(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb(){return jf(this).rgb()}}));const Hf=e=>()=>e;function $f(e,t){return function(n){return e+n*t}}function Yf(e){return 1===(e=+e)?qf:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Hf(isNaN(t)?n:t)}}function qf(e,t){var n=t-e;return n?$f(e,n):Hf(isNaN(e)?t:e)}const Wf=function e(t){var n=Yf(t);function r(e,t){var r=n((e=pf(e)).r,(t=pf(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=qf(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function Xf(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function Kf(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=rp(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function Zf(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Qf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Jf(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=rp(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var ep=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tp=new RegExp(ep.source,"g");function np(e,t){var n,r,i,o=ep.lastIndex=tp.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=ep.exec(e))&&(r=tp.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Qf(n,r)})),o=tp.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function rp(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?Hf(t):("number"===i?Qf:"string"===i?(n=cf(t))?(t=n,Wf):np:t instanceof cf?Wf:t instanceof Date?Zf:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?Kf:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Jf:Qf:Xf))(e,t)}function ip(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var op,ap=180/Math.PI,sp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lp(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*ap,skewX:Math.atan(l)*ap,scaleX:a,scaleY:s}}function up(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:Qf(e,i)},{i:l-2,x:Qf(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Qf(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Qf(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Qf(e,n)},{i:s-2,x:Qf(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var cp=up(function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?sp:lp(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),hp=up(function(e){return null==e?sp:(op||(op=document.createElementNS("http://www.w3.org/2000/svg","g")),op.setAttribute("transform",e),(e=op.transform.baseVal.consolidate())?lp((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):sp)},", ",")",")");const dp=(fp=function(e,t){var n=t-e;return n?$f(e,n>180||n<-180?n-360*Math.round(n/360):n):Hf(isNaN(e)?t:e)},function(e,t){var n=fp((e=Gf(e)).h,(t=Gf(t)).h),r=qf(e.c,t.c),i=qf(e.l,t.l),o=qf(e.opacity,t.opacity);return function(t){return e.h=n(t),e.c=r(t),e.l=i(t),e.opacity=o(t),e+""}});var fp,pp,gp,mp=0,vp=0,yp=0,bp=0,xp=0,wp=0,Ep="object"==typeof performance&&performance.now?performance:Date,Tp="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function _p(){return xp||(Tp(kp),xp=Ep.now()+wp)}function kp(){xp=0}function Ap(){this._call=this._time=this._next=null}function Sp(e,t,n){var r=new Ap;return r.restart(e,t,n),r}function Np(){xp=(bp=Ep.now())+wp,mp=vp=0;try{!function(){_p(),++mp;for(var e,t=pp;t;)(e=xp-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mp}()}finally{mp=0,function(){var e,t,n=pp,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:pp=t);gp=e,Cp(r)}(),xp=0}}function Mp(){var e=Ep.now(),t=e-bp;t>1e3&&(wp-=t,bp=e)}function Cp(e){mp||(vp&&(vp=clearTimeout(vp)),e-xp>24?(e<1/0&&(vp=setTimeout(Np,e-Ep.now()-wp)),yp&&(yp=clearInterval(yp))):(yp||(bp=Ep.now(),yp=setInterval(Mp,1e3)),mp=1,Tp(Np)))}function Ip(e,t,n){var r=new Ap;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}Ap.prototype=Sp.prototype={constructor:Ap,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?_p():+n)+(null==t?0:+t),this._next||gp===this||(gp?gp._next=this:pp=this,gp=this),this._call=e,this._time=n,Cp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Cp())}};var Rp=Nh("start","end","cancel","interrupt"),Lp=[];function Op(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var u,c,h,d;if(1!==n.state)return l();for(u in i)if((d=i[u]).name===n.name){if(3===d.state)return Ip(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[u]):+u<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[u])}if(Ip(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Sp(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:Rp,tween:Lp,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Dp(e,t){var n=Bp(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Pp(e,t){var n=Bp(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Bp(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Fp(e,t){var n,r;return function(){var i=Pp(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function zp(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Pp(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function Up(e,t,n){var r=e._id;return e.each(function(){var e=Pp(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Bp(e,r).value[t]}}function Gp(e,t){var n;return("number"==typeof t?Qf:t instanceof cf?Wf:(n=cf(t))?(t=n,Wf):np)(e,t)}function Vp(e){return function(){this.removeAttribute(e)}}function jp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hp(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function $p(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function Yp(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttribute(e)}}function qp(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function Wp(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Xp(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Kp(e,t){return function(){Dp(this,e).delay=+t.apply(this,arguments)}}function Zp(e,t){return t=+t,function(){Dp(this,e).delay=t}}function Qp(e,t){return function(){Pp(this,e).duration=+t.apply(this,arguments)}}function Jp(e,t){return t=+t,function(){Pp(this,e).duration=t}}var eg=jd.prototype.constructor;function tg(e){return function(){this.style.removeProperty(e)}}var ng=0;function rg(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ig(){return++ng}var og=jd.prototype;rg.prototype={constructor:rg,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=zh(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,u=r[a],c=u.length,h=o[a]=new Array(c),d=0;d<c;++d)(s=u[d])&&(l=e.call(s,s.__data__,d,u))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,Op(h[d],t,n,d,h,Bp(s,n)));return new rg(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Gh(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,u=r[s],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var d,f=e.call(l,l.__data__,h,u),p=Bp(l,n),g=0,m=f.length;g<m;++g)(d=f[g])&&Op(d,t,n,g,f,p);o.push(f),a.push(l)}return new rg(o,a,t,n)},selectChild:og.selectChild,selectChildren:og.selectChildren,filter:function(e){"function"!=typeof e&&(e=jh(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new rg(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=t[s],c=n[s],h=u.length,d=a[s]=new Array(h),f=0;f<h;++f)(l=u[f]||c[f])&&(d[f]=l);for(;s<r;++s)a[s]=t[s];return new rg(a,this._parents,this._name,this._id)},selection:function(){return new eg(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=ig(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=Bp(a,t);Op(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new rg(r,this._parents,e,n)},call:og.call,nodes:og.nodes,node:og.node,size:og.size,empty:og.empty,each:og.each,on:function(e,t){var n=this._id;return arguments.length<2?Bp(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?Dp:Pp;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=Oh(e),r="transform"===n?hp:Gp;return this.attrTween(e,"function"==typeof t?(n.local?qp:Yp)(n,r,Up(this,"attr."+e,t)):null==t?(n.local?jp:Vp)(n):(n.local?$p:Hp)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Oh(e);return this.tween(n,(r.local?Wp:Xp)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?cp:Gp;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=dd(this,e),a=(this.style.removeProperty(e),dd(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,tg(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=dd(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=dd(this,e)),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}(e,r,Up(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=Pp(this,e),u=l.on,c=null==l.value[a]?o||(o=tg(t)):void 0;u===n&&i===c||(r=(n=u).copy()).on(s,i=c),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=dd(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Up(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=Bp(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?Fp:zp)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Kp:Zp)(t,e)):Bp(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Qp:Jp)(t,e)):Bp(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Pp(this,e).ease=t}}(t,e)):Bp(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Pp(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each(function(){var n=Pp(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===i&&o()})},[Symbol.iterator]:og[Symbol.iterator]};var ag={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function sg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}jd.prototype.interrupt=function(e){return this.each(function(){!function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}(this,e)})},jd.prototype.transition=function(e){var t,n;e instanceof rg?(t=e._id,e=e._name):(t=ig(),(n=ag).time=_p(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)(a=s[u])&&Op(a,e,t,u,s,n||sg(a,t));return new rg(r,this._parents,e,t)};const lg=Math.PI,ug=2*lg,cg=1e-6,hg=ug-cg;function dg(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}let fg=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?dg:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return dg;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,o){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-e,l=r-t,u=o-e,c=a-t,h=u*u+c*c;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>cg)if(Math.abs(c*s-l*u)>cg&&i){let d=n-o,f=r-a,p=s*s+l*l,g=d*d+f*f,m=Math.sqrt(p),v=Math.sqrt(h),y=i*Math.tan((lg-Math.acos((p+h-g)/(2*m*v)))/2),b=y/v,x=y/m;Math.abs(b-1)>cg&&this._append`L${e+b*u},${t+b*c}`,this._append`A${i},${i},0,0,${+(c*d>u*f)},${this._x1=e+x*s},${this._y1=t+x*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,i,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),l=e+a,u=t+s,c=1^o,h=o?r-i:i-r;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>cg||Math.abs(this._y1-u)>cg)&&this._append`L${l},${u}`,n&&(h<0&&(h=h%ug+ug),h>hg?this._append`A${n},${n},0,1,${c},${e-a},${t-s}A${n},${n},0,1,${c},${this._x1=l},${this._y1=u}`:h>cg&&this._append`A${n},${n},0,${+(h>=lg)},${c},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};function pg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function gg(e){return(e=pg(Math.abs(e)))?e[1]:NaN}var mg,vg=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yg(e){if(!(t=vg.exec(e)))throw new Error("invalid format: "+e);var t;return new bg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function bg(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function xg(e,t){var n=pg(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}yg.prototype=bg.prototype,bg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const wg={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>xg(100*e,t),r:xg,s:function(e,t){var n=pg(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(mg=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+pg(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Eg(e){return e}var Tg,_g,kg,Ag=Array.prototype.map,Sg=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ng(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Eg:(t=Ag.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Eg:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Ag.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"−":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=yg(e)).fill,n=e.align,h=e.sign,d=e.symbol,f=e.zero,p=e.width,g=e.comma,m=e.precision,v=e.trim,y=e.type;"n"===y?(g=!0,y="g"):wg[y]||(void 0===m&&(m=12),v=!0,y="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===d?o:/[%p]/.test(y)?l:"",w=wg[y],E=/[defgprs%]/.test(y);function T(e){var i,o,l,d=b,T=x;if("c"===y)T=w(e)+T,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),m),v&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),_&&0===+e&&"+"!==h&&(_=!1),d=(_?"("===h?h:u:"-"===h||"("===h?"":h)+d,T=("s"===y?Sg[8+mg/3]:"")+T+(_&&"("===h?")":""),E)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){T=(46===l?a+e.slice(i+1):e.slice(i))+T,e=e.slice(0,i);break}}g&&!f&&(e=r(e,1/0));var k=d.length+e.length+T.length,A=k<p?new Array(p-k+1).join(t):"";switch(g&&f&&(e=r(A+e,A.length?p-T.length:1/0),A=""),n){case"<":e=d+e+T+A;break;case"=":e=d+A+e+T;break;case"^":e=A.slice(0,k=A.length>>1)+d+e+T+A.slice(k);break;default:e=A+d+e+T}return s(e)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),T.toString=function(){return e+""},T}return{format:h,formatPrefix:function(e,t){var n=h(((e=yg(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(gg(t)/3))),i=Math.pow(10,-r),o=Sg[8+r/3];return function(e){return n(i*e)+o}}}}function Mg(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function Cg(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=Rg)):void 0===t&&(t=Ig);for(var n,r,i,o,a,s=new Dg(e),l=[s];n=l.pop();)if((i=t(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)l.push(r=i[o]=new Dg(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Og)}function Ig(e){return e.children}function Rg(e){return Array.isArray(e)?e[1]:null}function Lg(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function Og(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function Dg(e){this.data=e,this.depth=this.height=0,this.parent=null}function Pg(){return 0}function Bg(e){return function(){return e}}function Fg(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function zg(e,t,n,r,i){for(var o,a=e.children,s=-1,l=a.length,u=e.value&&(r-t)/e.value;++s<l;)(o=a[s]).y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*u}function Ug(e,t,n,r,i){for(var o,a=e.children,s=-1,l=a.length,u=e.value&&(i-n)/e.value;++s<l;)(o=a[s]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*u}Tg=Ng({thousands:",",grouping:[3],currency:["$",""]}),_g=Tg.format,kg=Tg.formatPrefix,Dg.prototype=Cg.prototype={constructor:Dg,count:function(){return this.eachAfter(Mg)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,o=this,a=[o],s=[],l=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)e.call(t,o,++l,this);return this},eachBefore:function(e,t){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(e.call(t,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return Cg(this).eachBefore(Lg)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,o=[i];do{for(e=o.reverse(),o=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)o.push(t[n])}while(o.length)}};const Gg=function e(t){function n(e,n,r,i,o){!function(e,t,n,r,i,o){for(var a,s,l,u,c,h,d,f,p,g,m,v=[],y=t.children,b=0,x=0,w=y.length,E=t.value;b<w;){l=i-n,u=o-r;do{c=y[x++].value}while(!c&&x<w);for(h=d=c,m=c*c*(g=Math.max(u/l,l/u)/(E*e)),p=Math.max(d/m,m/h);x<w;++x){if(c+=s=y[x].value,s<h&&(h=s),s>d&&(d=s),m=c*c*g,(f=Math.max(d/m,m/h))>p){c-=s;break}p=f}v.push(a={value:c,dice:l<u,children:y.slice(b,x)}),a.dice?zg(a,n,r,i,E?r+=u*c/E:o):Ug(a,n,r,E?n+=l*c/E:i,o),E-=c,b=x}}(t,e,n,r,i,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}((1+Math.sqrt(5))/2);function Vg(){var e=Gg,t=!1,n=1,r=1,i=[0],o=Pg,a=Pg,s=Pg,l=Pg,u=Pg;function c(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(h),i=[0],t&&e.eachBefore(Fg),e}function h(t){var n=i[t.depth],r=t.x0+n,c=t.y0+n,h=t.x1-n,d=t.y1-n;h<r&&(r=h=(r+h)/2),d<c&&(c=d=(c+d)/2),t.x0=r,t.y0=c,t.x1=h,t.y1=d,t.children&&(n=i[t.depth+1]=o(t)/2,r+=u(t)-n,c+=a(t)-n,(h-=s(t)-n)<r&&(r=h=(r+h)/2),(d-=l(t)-n)<c&&(c=d=(c+d)/2),e(t,r,c,h,d))}return c.round=function(e){return arguments.length?(t=!!e,c):t},c.size=function(e){return arguments.length?(n=+e[0],r=+e[1],c):[n,r]},c.tile=function(t){return arguments.length?(e=function(e){if("function"!=typeof e)throw new Error;return e}(t),c):e},c.padding=function(e){return arguments.length?c.paddingInner(e).paddingOuter(e):c.paddingInner()},c.paddingInner=function(e){return arguments.length?(o="function"==typeof e?e:Bg(+e),c):o},c.paddingOuter=function(e){return arguments.length?c.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):c.paddingTop()},c.paddingTop=function(e){return arguments.length?(a="function"==typeof e?e:Bg(+e),c):a},c.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:Bg(+e),c):s},c.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:Bg(+e),c):l},c.paddingLeft=function(e){return arguments.length?(u="function"==typeof e?e:Bg(+e),c):u},c}function jg(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}const Hg=Symbol("implicit");function $g(){var e=new ah,t=[],n=[],r=Hg;function i(i){let o=e.get(i);if(void 0===o){if(r!==Hg)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new ah;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return $g(t,n).unknown(r)},jg.apply(i,arguments),i}function Yg(){var e,t,n=$g().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,l=0,u=0,c=.5;function h(){var n=r().length,h=a<o,d=h?a:o,f=h?o:a;e=(f-d)/Math.max(1,n-l+2*u),s&&(e=Math.floor(e)),d+=(f-d-e*(n-l))*c,t=e*(1-l),s&&(d=Math.round(d),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}(n).map(function(t){return d+e*t});return i(h?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),h()):r()},n.range=function(e){return arguments.length?([o,a]=e,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(e){return[o,a]=e,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,h()):s},n.padding=function(e){return arguments.length?(l=Math.min(1,u=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(u=+e,h()):u},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),h()):c},n.copy=function(){return Yg(r(),[o,a]).round(s).paddingInner(l).paddingOuter(u).align(c)},jg.apply(h(),arguments)}function qg(e){return+e}var Wg=[0,1];function Xg(e){return e}function Kg(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Zg(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Kg(i,r),o=n(a,o)):(r=Kg(r,i),o=n(o,a)),function(e){return o(r(e))}}function Qg(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Kg(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=oh(e,t,1,r)-1;return o[n](i[n](t))}}function Jg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function em(){var e,t,n,r,i,o,a=Wg,s=Wg,l=rp,u=Xg;function c(){var e,t,n,l=Math.min(a.length,s.length);return u!==Xg&&(e=a[0],t=a[l-1],e>t&&(n=e,e=t,t=n),u=function(n){return Math.max(e,Math.min(t,n))}),r=l>2?Qg:Zg,i=o=null,h}function h(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(u(t)))}return h.invert=function(n){return u(t((o||(o=r(s,a.map(e),Qf)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,qg),c()):a.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=ip,c()},h.clamp=function(e){return arguments.length?(u=!!e||Xg,c()):u!==Xg},h.interpolate=function(e){return arguments.length?(l=e,c()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,c()}}function tm(){return em()(Xg,Xg)}function nm(e,t,n,r){var i,o=ph(e,t,n);switch((r=yg(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(gg(t)/3)))-gg(Math.abs(e)))}(o,a))||(r.precision=i),kg(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gg(t)-gg(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-gg(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return _g(r)}function rm(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,o,a]=r?dh(t,e,n):dh(e,t,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return nm(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,l=o[a],u=o[s],c=10;for(u<l&&(i=l,l=u,u=i,i=a,a=s,s=i);c-- >0;){if((i=fh(l,u,n))===r)return o[a]=l,o[s]=u,t(o);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i}r=i}return e},e}function im(){var e=tm();return e.copy=function(){return Jg(e,im())},jg.apply(e,arguments),rm(e)}const om=new Date,am=new Date;function sm(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;let s;do{a.push(s=new Date(+n)),t(n,o),e(n)}while(s<n&&n<r);return a},i.filter=n=>sm(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(i.count=(t,r)=>(om.setTime(+t),am.setTime(+r),e(om),e(am),Math.floor(n(om,am))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const lm=sm(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);lm.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?sm(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):lm:null),lm.range;const um=1e3,cm=6e4,hm=36e5,dm=864e5,fm=6048e5,pm=2592e6,gm=31536e6,mm=sm(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*um)},(e,t)=>(t-e)/um,e=>e.getUTCSeconds());mm.range;const vm=sm(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*um)},(e,t)=>{e.setTime(+e+t*cm)},(e,t)=>(t-e)/cm,e=>e.getMinutes());vm.range;sm(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*cm)},(e,t)=>(t-e)/cm,e=>e.getUTCMinutes()).range;const ym=sm(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*um-e.getMinutes()*cm)},(e,t)=>{e.setTime(+e+t*hm)},(e,t)=>(t-e)/hm,e=>e.getHours());ym.range;sm(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*hm)},(e,t)=>(t-e)/hm,e=>e.getUTCHours()).range;const bm=sm(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*cm)/dm,e=>e.getDate()-1);bm.range;const xm=sm(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/dm,e=>e.getUTCDate()-1);xm.range;function wm(e){return sm(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*cm)/fm)}sm(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/dm,e=>Math.floor(e/dm)).range;const Em=wm(0),Tm=wm(1),_m=wm(2),km=wm(3),Am=wm(4),Sm=wm(5),Nm=wm(6);function Mm(e){return sm(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/fm)}Em.range,Tm.range,_m.range,km.range,Am.range,Sm.range,Nm.range;const Cm=Mm(0),Im=Mm(1),Rm=Mm(2),Lm=Mm(3),Om=Mm(4),Dm=Mm(5),Pm=Mm(6);Cm.range,Im.range,Rm.range,Lm.range,Om.range,Dm.range,Pm.range;const Bm=sm(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());Bm.range;sm(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth()).range;const Fm=sm(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Fm.every=e=>isFinite(e=Math.floor(e))&&e>0?sm(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null,Fm.range;const zm=sm(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());zm.every=e=>isFinite(e=Math.floor(e))&&e>0?sm(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null,zm.range;const[Um,Gm]=function(e,t,n,r,i,o){const a=[[mm,1,um],[mm,5,5e3],[mm,15,15e3],[mm,30,3e4],[o,1,cm],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,hm],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,dm],[r,2,1728e5],[n,1,fm],[t,1,pm],[t,3,7776e6],[e,1,gm]];function s(t,n,r){const i=Math.abs(n-t)/r,o=rh(([,,e])=>e).right(a,i);if(o===a.length)return e.every(ph(t/gm,n/gm,r));if(0===o)return lm.every(Math.max(ph(t,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}(Fm,Bm,Em,bm,ym,vm);function Vm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hm(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var $m,Ym,qm={"-":"",_:" ",0:"0"},Wm=/^\s*\d+/,Xm=/^%/,Km=/[\\^$*+?|[\]().{}]/g;function Zm(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Qm(e){return e.replace(Km,"\\$&")}function Jm(e){return new RegExp("^(?:"+e.map(Qm).join("|")+")","i")}function ev(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function tv(e,t,n){var r=Wm.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function nv(e,t,n){var r=Wm.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function rv(e,t,n){var r=Wm.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function iv(e,t,n){var r=Wm.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ov(e,t,n){var r=Wm.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function av(e,t,n){var r=Wm.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function sv(e,t,n){var r=Wm.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function lv(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function uv(e,t,n){var r=Wm.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function cv(e,t,n){var r=Wm.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function hv(e,t,n){var r=Wm.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function dv(e,t,n){var r=Wm.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function fv(e,t,n){var r=Wm.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function pv(e,t,n){var r=Wm.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function gv(e,t,n){var r=Wm.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function mv(e,t,n){var r=Wm.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function vv(e,t,n){var r=Wm.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function yv(e,t,n){var r=Xm.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function bv(e,t,n){var r=Wm.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function xv(e,t,n){var r=Wm.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function wv(e,t){return Zm(e.getDate(),t,2)}function Ev(e,t){return Zm(e.getHours(),t,2)}function Tv(e,t){return Zm(e.getHours()%12||12,t,2)}function _v(e,t){return Zm(1+bm.count(Fm(e),e),t,3)}function kv(e,t){return Zm(e.getMilliseconds(),t,3)}function Av(e,t){return kv(e,t)+"000"}function Sv(e,t){return Zm(e.getMonth()+1,t,2)}function Nv(e,t){return Zm(e.getMinutes(),t,2)}function Mv(e,t){return Zm(e.getSeconds(),t,2)}function Cv(e){var t=e.getDay();return 0===t?7:t}function Iv(e,t){return Zm(Em.count(Fm(e)-1,e),t,2)}function Rv(e){var t=e.getDay();return t>=4||0===t?Am(e):Am.ceil(e)}function Lv(e,t){return e=Rv(e),Zm(Am.count(Fm(e),e)+(4===Fm(e).getDay()),t,2)}function Ov(e){return e.getDay()}function Dv(e,t){return Zm(Tm.count(Fm(e)-1,e),t,2)}function Pv(e,t){return Zm(e.getFullYear()%100,t,2)}function Bv(e,t){return Zm((e=Rv(e)).getFullYear()%100,t,2)}function Fv(e,t){return Zm(e.getFullYear()%1e4,t,4)}function zv(e,t){var n=e.getDay();return Zm((e=n>=4||0===n?Am(e):Am.ceil(e)).getFullYear()%1e4,t,4)}function Uv(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Zm(t/60|0,"0",2)+Zm(t%60,"0",2)}function Gv(e,t){return Zm(e.getUTCDate(),t,2)}function Vv(e,t){return Zm(e.getUTCHours(),t,2)}function jv(e,t){return Zm(e.getUTCHours()%12||12,t,2)}function Hv(e,t){return Zm(1+xm.count(zm(e),e),t,3)}function $v(e,t){return Zm(e.getUTCMilliseconds(),t,3)}function Yv(e,t){return $v(e,t)+"000"}function qv(e,t){return Zm(e.getUTCMonth()+1,t,2)}function Wv(e,t){return Zm(e.getUTCMinutes(),t,2)}function Xv(e,t){return Zm(e.getUTCSeconds(),t,2)}function Kv(e){var t=e.getUTCDay();return 0===t?7:t}function Zv(e,t){return Zm(Cm.count(zm(e)-1,e),t,2)}function Qv(e){var t=e.getUTCDay();return t>=4||0===t?Om(e):Om.ceil(e)}function Jv(e,t){return e=Qv(e),Zm(Om.count(zm(e),e)+(4===zm(e).getUTCDay()),t,2)}function ey(e){return e.getUTCDay()}function ty(e,t){return Zm(Im.count(zm(e)-1,e),t,2)}function ny(e,t){return Zm(e.getUTCFullYear()%100,t,2)}function ry(e,t){return Zm((e=Qv(e)).getUTCFullYear()%100,t,2)}function iy(e,t){return Zm(e.getUTCFullYear()%1e4,t,4)}function oy(e,t){var n=e.getUTCDay();return Zm((e=n>=4||0===n?Om(e):Om.ceil(e)).getUTCFullYear()%1e4,t,4)}function ay(){return"+0000"}function sy(){return"%"}function ly(e){return+e}function uy(e){return Math.floor(+e/1e3)}function cy(e){return new Date(e)}function hy(e){return e instanceof Date?+e:+new Date(+e)}function dy(e,t,n,r,i,o,a,s,l,u){var c=tm(),h=c.invert,d=c.domain,f=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),v=u("%a %d"),y=u("%b %d"),b=u("%B"),x=u("%Y");function w(e){return(l(e)<e?f:s(e)<e?p:a(e)<e?g:o(e)<e?m:r(e)<e?i(e)<e?v:y:n(e)<e?b:x)(e)}return c.invert=function(e){return new Date(h(e))},c.domain=function(e){return arguments.length?d(Array.from(e,hy)):d().map(cy)},c.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?w:u(t)},c.nice=function(e){var n=d();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(function(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}(n,e)):c},c.copy=function(){return Jg(c,dy(e,t,n,r,i,o,a,s,l,u))},c}function fy(){return jg.apply(dy(Um,Gm,Fm,Bm,Em,bm,ym,vm,mm,Ym).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}!function(e){$m=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=Jm(i),c=ev(i),h=Jm(o),d=ev(o),f=Jm(a),p=ev(a),g=Jm(s),m=ev(s),v=Jm(l),y=ev(l),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:wv,e:wv,f:Av,g:Bv,G:zv,H:Ev,I:Tv,j:_v,L:kv,m:Sv,M:Nv,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:ly,s:uy,S:Mv,u:Cv,U:Iv,V:Lv,w:Ov,W:Dv,x:null,X:null,y:Pv,Y:Fv,Z:Uv,"%":sy},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Gv,e:Gv,f:Yv,g:ry,G:oy,H:Vv,I:jv,j:Hv,L:$v,m:qv,M:Wv,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:ly,s:uy,S:Xv,u:Kv,U:Zv,V:Jv,w:ey,W:ty,x:null,X:null,y:ny,Y:iy,Z:ay,"%":sy},w={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return _(e,t,n,r)},d:hv,e:hv,f:vv,g:sv,G:av,H:fv,I:fv,j:dv,L:mv,m:cv,M:pv,p:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:uv,Q:bv,s:xv,S:gv,u:nv,U:rv,V:iv,w:tv,W:ov,x:function(e,t,r){return _(e,n,t,r)},X:function(e,t,n){return _(e,r,t,n)},y:sv,Y:av,Z:lv,"%":yv};function E(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=qm[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function T(e,t){return function(n){var r,i,o=Hm(1900,void 0,1);if(_(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=jm(Hm(o.y,0,1))).getUTCDay(),r=i>4||0===i?Im.ceil(r):Im(r),r=xm.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Vm(Hm(o.y,0,1))).getDay(),r=i>4||0===i?Tm.ceil(r):Tm(r),r=bm.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?jm(Hm(o.y,0,1)).getUTCDay():Vm(Hm(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,jm(o)):Vm(o)}}function _(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=w[i in qm?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=E(n,b),b.X=E(r,b),b.c=E(t,b),x.x=E(n,x),x.X=E(r,x),x.c=E(t,x),{format:function(e){var t=E(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=T(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=E(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=T(e+="",!0);return t.toString=function(){return e},t}}}(e),Ym=$m.format,$m.parse,$m.utcFormat,$m.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const py=function(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function gy(e){return function(){return e}}const my=Math.abs,vy=Math.atan2,yy=Math.cos,by=Math.max,xy=Math.min,wy=Math.sin,Ey=Math.sqrt,Ty=1e-12,_y=Math.PI,ky=_y/2,Ay=2*_y;function Sy(e){return e>=1?ky:e<=-1?-ky:Math.asin(e)}function Ny(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new fg(t)}function My(e){return e.innerRadius}function Cy(e){return e.outerRadius}function Iy(e){return e.startAngle}function Ry(e){return e.endAngle}function Ly(e){return e&&e.padAngle}function Oy(e,t,n,r,i,o,a){var s=e-n,l=t-r,u=(a?o:-o)/Ey(s*s+l*l),c=u*l,h=-u*s,d=e+c,f=t+h,p=n+c,g=r+h,m=(d+p)/2,v=(f+g)/2,y=p-d,b=g-f,x=y*y+b*b,w=i-o,E=d*g-p*f,T=(b<0?-1:1)*Ey(by(0,w*w*x-E*E)),_=(E*b-y*T)/x,k=(-E*y-b*T)/x,A=(E*b+y*T)/x,S=(-E*y+b*T)/x,N=_-m,M=k-v,C=A-m,I=S-v;return N*N+M*M>C*C+I*I&&(_=A,k=S),{cx:_,cy:k,x01:-c,y01:-h,x11:_*(i/w-1),y11:k*(i/w-1)}}function Dy(){var e=My,t=Cy,n=gy(0),r=null,i=Iy,o=Ry,a=Ly,s=null,l=Ny(u);function u(){var u,c,h,d=+e.apply(this,arguments),f=+t.apply(this,arguments),p=i.apply(this,arguments)-ky,g=o.apply(this,arguments)-ky,m=my(g-p),v=g>p;if(s||(s=u=l()),f<d&&(c=f,f=d,d=c),f>Ty)if(m>Ay-Ty)s.moveTo(f*yy(p),f*wy(p)),s.arc(0,0,f,p,g,!v),d>Ty&&(s.moveTo(d*yy(g),d*wy(g)),s.arc(0,0,d,g,p,v));else{var y,b,x=p,w=g,E=p,T=g,_=m,k=m,A=a.apply(this,arguments)/2,S=A>Ty&&(r?+r.apply(this,arguments):Ey(d*d+f*f)),N=xy(my(f-d)/2,+n.apply(this,arguments)),M=N,C=N;if(S>Ty){var I=Sy(S/d*wy(A)),R=Sy(S/f*wy(A));(_-=2*I)>Ty?(E+=I*=v?1:-1,T-=I):(_=0,E=T=(p+g)/2),(k-=2*R)>Ty?(x+=R*=v?1:-1,w-=R):(k=0,x=w=(p+g)/2)}var L=f*yy(x),O=f*wy(x),D=d*yy(T),P=d*wy(T);if(N>Ty){var B,F=f*yy(w),z=f*wy(w),U=d*yy(E),G=d*wy(E);if(m<_y)if(B=function(e,t,n,r,i,o,a,s){var l=n-e,u=r-t,c=a-i,h=s-o,d=h*l-c*u;if(!(d*d<Ty))return[e+(d=(c*(t-o)-h*(e-i))/d)*l,t+d*u]}(L,O,U,G,F,z,D,P)){var V=L-B[0],j=O-B[1],H=F-B[0],$=z-B[1],Y=1/wy(((h=(V*H+j*$)/(Ey(V*V+j*j)*Ey(H*H+$*$)))>1?0:h<-1?_y:Math.acos(h))/2),q=Ey(B[0]*B[0]+B[1]*B[1]);M=xy(N,(d-q)/(Y-1)),C=xy(N,(f-q)/(Y+1))}else M=C=0}k>Ty?C>Ty?(y=Oy(U,G,L,O,f,C,v),b=Oy(F,z,D,P,f,C,v),s.moveTo(y.cx+y.x01,y.cy+y.y01),C<N?s.arc(y.cx,y.cy,C,vy(y.y01,y.x01),vy(b.y01,b.x01),!v):(s.arc(y.cx,y.cy,C,vy(y.y01,y.x01),vy(y.y11,y.x11),!v),s.arc(0,0,f,vy(y.cy+y.y11,y.cx+y.x11),vy(b.cy+b.y11,b.cx+b.x11),!v),s.arc(b.cx,b.cy,C,vy(b.y11,b.x11),vy(b.y01,b.x01),!v))):(s.moveTo(L,O),s.arc(0,0,f,x,w,!v)):s.moveTo(L,O),d>Ty&&_>Ty?M>Ty?(y=Oy(D,P,F,z,d,-M,v),b=Oy(L,O,U,G,d,-M,v),s.lineTo(y.cx+y.x01,y.cy+y.y01),M<N?s.arc(y.cx,y.cy,M,vy(y.y01,y.x01),vy(b.y01,b.x01),!v):(s.arc(y.cx,y.cy,M,vy(y.y01,y.x01),vy(y.y11,y.x11),!v),s.arc(0,0,d,vy(y.cy+y.y11,y.cx+y.x11),vy(b.cy+b.y11,b.cx+b.x11),v),s.arc(b.cx,b.cy,M,vy(b.y11,b.x11),vy(b.y01,b.x01),!v))):s.arc(0,0,d,T,E,v):s.lineTo(D,P)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-_y/2;return[yy(r)*n,wy(r)*n]},u.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:gy(+t),u):e},u.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:gy(+e),u):t},u.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:gy(+e),u):n},u.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:gy(+e),u):r},u.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:gy(+e),u):i},u.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:gy(+e),u):o},u.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:gy(+e),u):a},u.context=function(e){return arguments.length?(s=null==e?null:e,u):s},u}function Py(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function By(e){this._context=e}function Fy(e){return new By(e)}function zy(e){return e[0]}function Uy(e){return e[1]}function Gy(e,t){var n=gy(!0),r=null,i=Fy,o=null,a=Ny(s);function s(s){var l,u,c,h=(s=Py(s)).length,d=!1;for(null==r&&(o=i(c=a())),l=0;l<=h;++l)!(l<h&&n(u=s[l],l,s))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(u,l,s),+t(u,l,s));if(c)return o=null,c+""||null}return e="function"==typeof e?e:void 0===e?zy:gy(e),t="function"==typeof t?t:void 0===t?Uy:gy(t),s.x=function(t){return arguments.length?(e="function"==typeof t?t:gy(+t),s):e},s.y=function(e){return arguments.length?(t="function"==typeof e?e:gy(+e),s):t},s.defined=function(e){return arguments.length?(n="function"==typeof e?e:gy(!!e),s):n},s.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),s):i},s.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),s):r},s}function Vy(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function jy(e){return e}function Hy(){var e=jy,t=Vy,n=null,r=gy(0),i=gy(Ay),o=gy(0);function a(a){var s,l,u,c,h,d=(a=Py(a)).length,f=0,p=new Array(d),g=new Array(d),m=+r.apply(this,arguments),v=Math.min(Ay,Math.max(-Ay,i.apply(this,arguments)-m)),y=Math.min(Math.abs(v)/d,o.apply(this,arguments)),b=y*(v<0?-1:1);for(s=0;s<d;++s)(h=g[p[s]=s]=+e(a[s],s,a))>0&&(f+=h);for(null!=t?p.sort(function(e,n){return t(g[e],g[n])}):null!=n&&p.sort(function(e,t){return n(a[e],a[t])}),s=0,u=f?(v-d*b)/f:0;s<d;++s,m=c)l=p[s],c=m+((h=g[l])>0?h*u:0)+b,g[l]={data:a[l],index:s,value:h,startAngle:m,endAngle:c,padAngle:y};return g}return a.value=function(t){return arguments.length?(e="function"==typeof t?t:gy(+t),a):e},a.sortValues=function(e){return arguments.length?(t=e,n=null,a):t},a.sort=function(e){return arguments.length?(n=e,t=null,a):n},a.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:gy(+e),a):r},a.endAngle=function(e){return arguments.length?(i="function"==typeof e?e:gy(+e),a):i},a.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:gy(+e),a):o},a}By.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class $y{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function Yy(e){return new $y(e,!0)}function qy(e){return new $y(e,!1)}function Wy(){}function Xy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Ky(e){this._context=e}function Zy(e){return new Ky(e)}function Qy(e){this._context=e}function Jy(e){return new Qy(e)}function eb(e){this._context=e}function tb(e){return new eb(e)}function nb(e,t){this._basis=new Ky(e),this._beta=t}Ky.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xy(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Qy.prototype={areaStart:Wy,areaEnd:Wy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Xy(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},eb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Xy(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},nb.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+r*a),this._beta*t[l]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const rb=function e(t){function n(e){return 1===t?new Ky(e):new nb(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function ib(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ob(e,t){this._context=e,this._k=(1-t)/6}ob.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ib(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ib(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ab=function e(t){function n(e){return new ob(e,t)}return n.tension=function(t){return e(+t)},n}(0);function sb(e,t){this._context=e,this._k=(1-t)/6}sb.prototype={areaStart:Wy,areaEnd:Wy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ib(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lb=function e(t){function n(e){return new sb(e,t)}return n.tension=function(t){return e(+t)},n}(0);function ub(e,t){this._context=e,this._k=(1-t)/6}ub.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ib(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const cb=function e(t){function n(e){return new ub(e,t)}return n.tension=function(t){return e(+t)},n}(0);function hb(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Ty){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Ty){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function db(e,t){this._context=e,this._alpha=t}db.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:hb(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const fb=function e(t){function n(e){return t?new db(e,t):new ob(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function pb(e,t){this._context=e,this._alpha=t}pb.prototype={areaStart:Wy,areaEnd:Wy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:hb(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const gb=function e(t){function n(e){return t?new pb(e,t):new sb(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function mb(e,t){this._context=e,this._alpha=t}mb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hb(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vb=function e(t){function n(e){return t?new mb(e,t):new ub(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function yb(e){this._context=e}function bb(e){return new yb(e)}function xb(e){return e<0?-1:1}function wb(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(xb(o)+xb(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Eb(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Tb(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function _b(e){this._context=e}function kb(e){this._context=new Ab(e)}function Ab(e){this._context=e}function Sb(e){return new _b(e)}function Nb(e){return new kb(e)}function Mb(e){this._context=e}function Cb(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function Ib(e){return new Mb(e)}function Rb(e,t){this._context=e,this._t=t}function Lb(e){return new Rb(e,.5)}function Ob(e){return new Rb(e,0)}function Db(e){return new Rb(e,1)}function Pb(e,t,n){this.k=e,this.x=t,this.y=n}yb.prototype={areaStart:Wy,areaEnd:Wy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},_b.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Tb(this,this._t0,Eb(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Tb(this,Eb(this,n=wb(this,e,t)),n);break;default:Tb(this,this._t0,n=wb(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(kb.prototype=Object.create(_b.prototype)).point=function(e,t){_b.prototype.point.call(this,t,e)},Ab.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},Mb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Cb(e),i=Cb(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Rb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}},Pb.prototype={constructor:Pb,scale:function(e){return 1===e?this:new Pb(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Pb(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Pb.prototype;var Bb="object"==typeof global&&global&&global.Object===Object&&global,Fb="object"==typeof self&&self&&self.Object===Object&&self,zb=Bb||Fb||Function("return this")(),Ub=zb.Symbol,Gb=Object.prototype,Vb=Gb.hasOwnProperty,jb=Gb.toString,Hb=Ub?Ub.toStringTag:void 0;var $b=Object.prototype.toString;var Yb=Ub?Ub.toStringTag:void 0;function qb(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Yb&&Yb in Object(e)?function(e){var t=Vb.call(e,Hb),n=e[Hb];try{e[Hb]=void 0;var r=!0}catch(LY){}var i=jb.call(e);return r&&(t?e[Hb]=n:delete e[Hb]),i}(e):function(e){return $b.call(e)}(e)}function Wb(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Xb(e){if(!Wb(e))return!1;var t=qb(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Kb,Zb=zb["__core-js_shared__"],Qb=(Kb=/[^.]+$/.exec(Zb&&Zb.keys&&Zb.keys.IE_PROTO||""))?"Symbol(src)_1."+Kb:"";var Jb=Function.prototype.toString;function ex(e){if(null!=e){try{return Jb.call(e)}catch(LY){}try{return e+""}catch(LY){}}return""}var tx=/^\[object .+?Constructor\]$/,nx=Function.prototype,rx=Object.prototype,ix=nx.toString,ox=rx.hasOwnProperty,ax=RegExp("^"+ix.call(ox).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function sx(e){return!(!Wb(e)||function(e){return!!Qb&&Qb in e}(e))&&(Xb(e)?ax:tx).test(ex(e))}function lx(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return sx(n)?n:void 0}var ux=lx(Object,"create");var cx=Object.prototype.hasOwnProperty;var hx=Object.prototype.hasOwnProperty;function dx(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function fx(e,t){return e===t||e!=e&&t!=t}function px(e,t){for(var n=e.length;n--;)if(fx(e[n][0],t))return n;return-1}dx.prototype.clear=function(){this.__data__=ux?ux(null):{},this.size=0},dx.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},dx.prototype.get=function(e){var t=this.__data__;if(ux){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return cx.call(t,e)?t[e]:void 0},dx.prototype.has=function(e){var t=this.__data__;return ux?void 0!==t[e]:hx.call(t,e)},dx.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ux&&void 0===t?"__lodash_hash_undefined__":t,this};var gx=Array.prototype.splice;function mx(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}mx.prototype.clear=function(){this.__data__=[],this.size=0},mx.prototype.delete=function(e){var t=this.__data__,n=px(t,e);return!(n<0)&&(n==t.length-1?t.pop():gx.call(t,n,1),--this.size,!0)},mx.prototype.get=function(e){var t=this.__data__,n=px(t,e);return n<0?void 0:t[n][1]},mx.prototype.has=function(e){return px(this.__data__,e)>-1},mx.prototype.set=function(e,t){var n=this.__data__,r=px(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var vx=lx(zb,"Map");function yx(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function bx(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}bx.prototype.clear=function(){this.size=0,this.__data__={hash:new dx,map:new(vx||mx),string:new dx}},bx.prototype.delete=function(e){var t=yx(this,e).delete(e);return this.size-=t?1:0,t},bx.prototype.get=function(e){return yx(this,e).get(e)},bx.prototype.has=function(e){return yx(this,e).has(e)},bx.prototype.set=function(e,t){var n=yx(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function xx(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(xx.Cache||bx),n}xx.Cache=bx;function wx(e){var t=this.__data__=new mx(e);this.size=t.size}wx.prototype.clear=function(){this.__data__=new mx,this.size=0},wx.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},wx.prototype.get=function(e){return this.__data__.get(e)},wx.prototype.has=function(e){return this.__data__.has(e)},wx.prototype.set=function(e,t){var n=this.__data__;if(n instanceof mx){var r=n.__data__;if(!vx||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new bx(r)}return n.set(e,t),this.size=n.size,this};var Ex=function(){try{var e=lx(Object,"defineProperty");return e({},"",{}),e}catch(LY){}}();function Tx(e,t,n){"__proto__"==t&&Ex?Ex(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function _x(e,t,n){(void 0!==n&&!fx(e[t],n)||void 0===n&&!(t in e))&&Tx(e,t,n)}var kx=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}return e},Ax="object"==typeof exports&&exports&&!exports.nodeType&&exports,Sx=Ax&&"object"==typeof module&&module&&!module.nodeType&&module,Nx=Sx&&Sx.exports===Ax?zb.Buffer:void 0,Mx=Nx?Nx.allocUnsafe:void 0;function Cx(e,t){if(t)return e.slice();var n=e.length,r=Mx?Mx(n):new e.constructor(n);return e.copy(r),r}var Ix=zb.Uint8Array;function Rx(e){var t=new e.constructor(e.byteLength);return new Ix(t).set(new Ix(e)),t}function Lx(e,t){var n=t?Rx(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ox(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Dx=Object.create,Px=function(){function e(){}return function(t){if(!Wb(t))return{};if(Dx)return Dx(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Bx(e,t){return function(n){return e(t(n))}}var Fx=Bx(Object.getPrototypeOf,Object),zx=Object.prototype;function Ux(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||zx)}function Gx(e){return"function"!=typeof e.constructor||Ux(e)?{}:Px(Fx(e))}function Vx(e){return null!=e&&"object"==typeof e}function jx(e){return Vx(e)&&"[object Arguments]"==qb(e)}var Hx=Object.prototype,$x=Hx.hasOwnProperty,Yx=Hx.propertyIsEnumerable,qx=jx(function(){return arguments}())?jx:function(e){return Vx(e)&&$x.call(e,"callee")&&!Yx.call(e,"callee")},Wx=Array.isArray;function Xx(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Kx(e){return null!=e&&Xx(e.length)&&!Xb(e)}function Zx(e){return Vx(e)&&Kx(e)}var Qx="object"==typeof exports&&exports&&!exports.nodeType&&exports,Jx=Qx&&"object"==typeof module&&module&&!module.nodeType&&module,ew=Jx&&Jx.exports===Qx?zb.Buffer:void 0,tw=(ew?ew.isBuffer:void 0)||function(){return!1},nw=Function.prototype,rw=Object.prototype,iw=nw.toString,ow=rw.hasOwnProperty,aw=iw.call(Object);var sw={};function lw(e){return function(t){return e(t)}}sw["[object Float32Array]"]=sw["[object Float64Array]"]=sw["[object Int8Array]"]=sw["[object Int16Array]"]=sw["[object Int32Array]"]=sw["[object Uint8Array]"]=sw["[object Uint8ClampedArray]"]=sw["[object Uint16Array]"]=sw["[object Uint32Array]"]=!0,sw["[object Arguments]"]=sw["[object Array]"]=sw["[object ArrayBuffer]"]=sw["[object Boolean]"]=sw["[object DataView]"]=sw["[object Date]"]=sw["[object Error]"]=sw["[object Function]"]=sw["[object Map]"]=sw["[object Number]"]=sw["[object Object]"]=sw["[object RegExp]"]=sw["[object Set]"]=sw["[object String]"]=sw["[object WeakMap]"]=!1;var uw="object"==typeof exports&&exports&&!exports.nodeType&&exports,cw=uw&&"object"==typeof module&&module&&!module.nodeType&&module,hw=cw&&cw.exports===uw&&Bb.process,dw=function(){try{var e=cw&&cw.require&&cw.require("util").types;return e||hw&&hw.binding&&hw.binding("util")}catch(LY){}}(),fw=dw&&dw.isTypedArray,pw=fw?lw(fw):function(e){return Vx(e)&&Xx(e.length)&&!!sw[qb(e)]};function gw(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var mw=Object.prototype.hasOwnProperty;function vw(e,t,n){var r=e[t];mw.call(e,t)&&fx(r,n)&&(void 0!==n||t in e)||Tx(e,t,n)}function yw(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=void 0;void 0===l&&(l=e[s]),i?Tx(n,s,l):vw(n,s,l)}return n}var bw=/^(?:0|[1-9]\d*)$/;function xw(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&bw.test(e))&&e>-1&&e%1==0&&e<t}var ww=Object.prototype.hasOwnProperty;function Ew(e,t){var n=Wx(e),r=!n&&qx(e),i=!n&&!r&&tw(e),o=!n&&!r&&!i&&pw(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var u in e)!t&&!ww.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||xw(u,l))||s.push(u);return s}var Tw=Object.prototype.hasOwnProperty;function _w(e){if(!Wb(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Ux(e),n=[];for(var r in e)("constructor"!=r||!t&&Tw.call(e,r))&&n.push(r);return n}function kw(e){return Kx(e)?Ew(e,!0):_w(e)}function Aw(e,t,n,r,i,o,a){var s=gw(e,n),l=gw(t,n),u=a.get(l);if(u)_x(e,n,u);else{var c,h=o?o(s,l,n+"",e,t,a):void 0,d=void 0===h;if(d){var f=Wx(l),p=!f&&tw(l),g=!f&&!p&&pw(l);h=l,f||p||g?Wx(s)?h=s:Zx(s)?h=Ox(s):p?(d=!1,h=Cx(l,!0)):g?(d=!1,h=Lx(l,!0)):h=[]:function(e){if(!Vx(e)||"[object Object]"!=qb(e))return!1;var t=Fx(e);if(null===t)return!0;var n=ow.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&iw.call(n)==aw}(l)||qx(l)?(h=s,qx(s)?h=yw(c=s,kw(c)):Wb(s)&&!Xb(s)||(h=Gx(l))):d=!1}d&&(a.set(l,h),i(h,l,r,o,a),a.delete(l)),_x(e,n,h)}}function Sw(e,t,n,r,i){e!==t&&kx(t,function(o,a){if(i||(i=new wx),Wb(o))Aw(e,t,a,n,Sw,r,i);else{var s=r?r(gw(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),_x(e,a,s)}},kw)}function Nw(e){return e}var Mw=Math.max;function Cw(e,t,n){return t=Mw(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Mw(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}function Iw(e){return function(){return e}}var Rw=Ex?function(e,t){return Ex(e,"toString",{configurable:!0,enumerable:!1,value:Iw(t),writable:!0})}:Nw,Lw=Date.now;var Ow=function(e){var t=0,n=0;return function(){var r=Lw(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Rw);function Dw(e,t){return Ow(Cw(e,t,Nw),e+"")}function Pw(e,t,n){if(!Wb(n))return!1;var r=typeof t;return!!("number"==r?Kx(n)&&xw(t,n.length):"string"==r&&t in n)&&fx(n[t],e)}function Bw(e){return Dw(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&Pw(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}var Fw=Bw(function(e,t,n){Sw(e,t,n)});const zw=Object.freeze({left:0,top:0,width:16,height:16}),Uw=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Gw=Object.freeze({...zw,...Uw}),Vw=Object.freeze({...Gw,body:"",hidden:!1}),jw=Object.freeze({width:null,height:null}),Hw=Object.freeze({...jw,...Uw}),$w=(e,t,n,r="")=>{const i=e.split(":");if("@"===e.slice(0,1)){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const e=i.pop(),t=i.pop(),n={provider:i.length>0?i[0]:r,prefix:t,name:e};return Yw(n)?n:null}const o=i[0],a=o.split("-");if(a.length>1){const e={provider:r,prefix:a.shift(),name:a.join("-")};return Yw(e)?e:null}if(n&&""===r){const e={provider:r,prefix:"",name:o};return Yw(e,n)?e:null}return null},Yw=(e,t)=>!!e&&!(!(t&&""===e.prefix||e.prefix)||!e.name);function qw(e,t){const n=function(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const r=((e.rotate||0)+(t.rotate||0))%4;return r&&(n.rotate=r),n}(e,t);for(const r in Vw)r in Uw?r in e&&!(r in n)&&(n[r]=Uw[r]):r in t?n[r]=t[r]:r in e&&(n[r]=e[r]);return n}function Ww(e,t,n){const r=e.icons,i=e.aliases||Object.create(null);let o={};function a(e){o=qw(r[e]||i[e],o)}return a(t),n.forEach(a),qw(e,o)}function Xw(e,t){if(e.icons[t])return Ww(e,t,[]);const n=function(e,t){const n=e.icons,r=e.aliases||Object.create(null),i=Object.create(null);return(t||Object.keys(n).concat(Object.keys(r))).forEach(function e(t){if(n[t])return i[t]=[];if(!(t in i)){i[t]=null;const n=r[t]&&r[t].parent,o=n&&e(n);o&&(i[t]=[n].concat(o))}return i[t]}),i}(e,[t])[t];return n?Ww(e,t,n):null}const Kw=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Zw=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Qw(e,t,n){if(1===t)return e;if(n=n||100,"number"==typeof e)return Math.ceil(e*t*n)/n;if("string"!=typeof e)return e;const r=e.split(Kw);if(null===r||!r.length)return e;const i=[];let o=r.shift(),a=Zw.test(o);for(;;){if(a){const e=parseFloat(o);isNaN(e)?i.push(o):i.push(Math.ceil(e*t*n)/n)}else i.push(o);if(o=r.shift(),void 0===o)return i.join("");a=!a}}function Jw(e,t){const n={...Gw,...e},r={...Hw,...t},i={left:n.left,top:n.top,width:n.width,height:n.height};let o=n.body;[n,r].forEach(e=>{const t=[],n=e.hFlip,r=e.vFlip;let a,s=e.rotate;switch(n?r?s+=2:(t.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),t.push("scale(-1 1)"),i.top=i.left=0):r&&(t.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),t.push("scale(1 -1)"),i.top=i.left=0),s<0&&(s-=4*Math.floor(s/4)),s%=4,s){case 1:a=i.height/2+i.top,t.unshift("rotate(90 "+a.toString()+" "+a.toString()+")");break;case 2:t.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:a=i.width/2+i.left,t.unshift("rotate(-90 "+a.toString()+" "+a.toString()+")")}s%2==1&&(i.left!==i.top&&(a=i.left,i.left=i.top,i.top=a),i.width!==i.height&&(a=i.width,i.width=i.height,i.height=a)),t.length&&(o=function(e,t,n){const r=function(e,t="defs"){let n="";const r=e.indexOf("<"+t);for(;r>=0;){const i=e.indexOf(">",r),o=e.indexOf("</"+t);if(-1===i||-1===o)break;const a=e.indexOf(">",o);if(-1===a)break;n+=e.slice(i+1,o).trim(),e=e.slice(0,r).trim()+e.slice(a+1)}return{defs:n,content:e}}(e);return i=r.defs,o=t+r.content+n,i?"<defs>"+i+"</defs>"+o:o;var i,o}(o,'<g transform="'+t.join(" ")+'">',"</g>"))});const a=r.width,s=r.height,l=i.width,u=i.height;let c,h;null===a?(h=null===s?"1em":"auto"===s?u:s,c=Qw(h,l/u)):(c="auto"===a?l:a,h=null===s?Qw(c,u/l):"auto"===s?u:s);const d={},f=(e,t)=>{(e=>"unset"===e||"undefined"===e||"none"===e)(t)||(d[e]=t.toString())};f("width",c),f("height",h);const p=[i.left,i.top,l,u];return d.viewBox=p.join(" "),{attributes:d,viewBox:p,body:o}}const eE=/\sid="(\S+)"/g,tE="IconifyId"+Date.now().toString(16)+(16777216*Math.random()|0).toString(16);let nE=0;function rE(e,t=tE){const n=[];let r;for(;r=eE.exec(e);)n.push(r[1]);if(!n.length)return e;const i="suffix"+(16777216*Math.random()|Date.now()).toString(16);return n.forEach(n=>{const r="function"==typeof t?t(n):t+(nE++).toString(),o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+r+i+"$3")}),e=e.replace(new RegExp(i,"g"),"")}function iE(e,t){let n=-1===e.indexOf("xlink:")?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in t)n+=" "+r+'="'+t[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function oE(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var aE={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function sE(e){aE=e}var lE={exec:()=>null};function uE(e,t=""){let n="string"==typeof e?e:e.source,r={replace:(e,t)=>{let i="string"==typeof t?t:t.source;return i=i.replace(cE.caret,"$1"),n=n.replace(e,i),r},getRegex:()=>new RegExp(n,t)};return r}var cE={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},hE=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,dE=/(?:[*+-]|\d{1,9}[.)])/,fE=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,pE=uE(fE).replace(/bull/g,dE).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),gE=uE(fE).replace(/bull/g,dE).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),mE=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,vE=/(?!\s*\])(?:\\.|[^\[\]\\])+/,yE=uE(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",vE).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),bE=uE(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,dE).getRegex(),xE="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",wE=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,EE=uE("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",wE).replace("tag",xE).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),TE=uE(mE).replace("hr",hE).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xE).getRegex(),_E={blockquote:uE(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",TE).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:yE,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:hE,html:EE,lheading:pE,list:bE,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:TE,table:lE,text:/^[^\n]+/},kE=uE("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",hE).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xE).getRegex(),AE={..._E,lheading:gE,table:kE,paragraph:uE(mE).replace("hr",hE).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",kE).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xE).getRegex()},SE={..._E,html:uE("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",wE).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:lE,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:uE(mE).replace("hr",hE).replace("heading"," *#{1,6} *[^\n]").replace("lheading",pE).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},NE=/^( {2,}|\\)\n(?!\s*$)/,ME=/[\p{P}\p{S}]/u,CE=/[\s\p{P}\p{S}]/u,IE=/[^\s\p{P}\p{S}]/u,RE=uE(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,CE).getRegex(),LE=/(?!~)[\p{P}\p{S}]/u,OE=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,DE=uE(OE,"u").replace(/punct/g,ME).getRegex(),PE=uE(OE,"u").replace(/punct/g,LE).getRegex(),BE="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",FE=uE(BE,"gu").replace(/notPunctSpace/g,IE).replace(/punctSpace/g,CE).replace(/punct/g,ME).getRegex(),zE=uE(BE,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,LE).getRegex(),UE=uE("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,IE).replace(/punctSpace/g,CE).replace(/punct/g,ME).getRegex(),GE=uE(/\\(punct)/,"gu").replace(/punct/g,ME).getRegex(),VE=uE(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),jE=uE(wE).replace("(?:--\x3e|$)","--\x3e").getRegex(),HE=uE("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",jE).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),$E=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,YE=uE(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",$E).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),qE=uE(/^!?\[(label)\]\[(ref)\]/).replace("label",$E).replace("ref",vE).getRegex(),WE=uE(/^!?\[(ref)\](?:\[\])?/).replace("ref",vE).getRegex(),XE={_backpedal:lE,anyPunctuation:GE,autolink:VE,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,br:NE,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:lE,emStrongLDelim:DE,emStrongRDelimAst:FE,emStrongRDelimUnd:UE,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:YE,nolink:WE,punctuation:RE,reflink:qE,reflinkSearch:uE("reflink|nolink(?!\\()","g").replace("reflink",qE).replace("nolink",WE).getRegex(),tag:HE,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:lE},KE={...XE,link:uE(/^!?\[(label)\]\((.*?)\)/).replace("label",$E).getRegex(),reflink:uE(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$E).getRegex()},ZE={...XE,emStrongRDelimAst:zE,emStrongLDelim:PE,url:uE(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},QE={...ZE,br:uE(NE).replace("{2,}","*").getRegex(),text:uE(ZE.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},JE={normal:_E,gfm:AE,pedantic:SE},eT={normal:XE,gfm:ZE,breaks:QE,pedantic:KE},tT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nT=e=>tT[e];function rT(e,t){if(t){if(cE.escapeTest.test(e))return e.replace(cE.escapeReplace,nT)}else if(cE.escapeTestNoEncode.test(e))return e.replace(cE.escapeReplaceNoEncode,nT);return e}function iT(e){try{e=encodeURI(e).replace(cE.percentDecode,"%")}catch{return null}return e}function oT(e,t){let n=e.replace(cE.findPipe,(e,t,n)=>{let r=!1,i=t;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"}).split(cE.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(cE.slashPipe,"|");return n}function aT(e,t,n){let r=e.length;if(0===r)return"";let i=0;for(;i<r;){if(e.charAt(r-i-1)!==t)break;i++}return e.slice(0,r-i)}function sT(e,t,n,r,i){let o=t.href,a=t.title||null,s=e[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:"!"===e[0].charAt(0)?"image":"link",raw:n,href:o,title:a,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,l}var lT=class{options;rules;lexer;constructor(e){this.options=e||aE}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:aT(e,"\n")}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],n=function(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(null===r)return t;let i=r[1];return t.split("\n").map(e=>{let t=e.match(n.other.beginningSpace);if(null===t)return e;let[r]=t;return r.length>=i.length?e.slice(i.length):e}).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let t=aT(e,"#");(this.options.pedantic||!t||this.rules.other.endingSpaceChar.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:aT(t[0],"\n")}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=aT(t[0],"\n").split("\n"),n="",r="",i=[];for(;e.length>0;){let t,o=!1,a=[];for(t=0;t<e.length;t++)if(this.rules.other.blockquoteStart.test(e[t]))a.push(e[t]),o=!0;else{if(o)break;a.push(e[t])}e=e.slice(t);let s=a.join("\n"),l=s.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}\n${s}`:s,r=r?`${r}\n${l}`:l;let u=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=u,0===e.length)break;let c=i.at(-1);if("code"===c?.type)break;if("blockquote"===c?.type){let t=c,o=t.raw+"\n"+e.join("\n"),a=this.blockquote(o);i[i.length-1]=a,n=n.substring(0,n.length-t.raw.length)+a.raw,r=r.substring(0,r.length-t.text.length)+a.text;break}if("list"===c?.type){let t=c,o=t.raw+"\n"+e.join("\n"),a=this.list(o);i[i.length-1]=a,n=n.substring(0,n.length-c.raw.length)+a.raw,r=r.substring(0,r.length-t.raw.length)+a.raw,e=o.substring(i.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:n,tokens:i,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let o=this.rules.other.listItemRegex(n),a=!1;for(;e;){let n=!1,r="",s="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;r=t[0],e=e.substring(r.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,e=>" ".repeat(3*e.length)),u=e.split("\n",1)[0],c=!l.trim(),h=0;if(this.options.pedantic?(h=2,s=l.trimStart()):c?h=t[1].length+1:(h=t[2].search(this.rules.other.nonSpaceChar),h=h>4?1:h,s=l.slice(h),h+=t[1].length),c&&this.rules.other.blankLine.test(u)&&(r+=u+"\n",e=e.substring(u.length+1),n=!0),!n){let t=this.rules.other.nextBulletRegex(h),n=this.rules.other.hrRegex(h),i=this.rules.other.fencesBeginRegex(h),o=this.rules.other.headingBeginRegex(h),a=this.rules.other.htmlBeginRegex(h);for(;e;){let d,f=e.split("\n",1)[0];if(u=f,this.options.pedantic?(u=u.replace(this.rules.other.listReplaceNesting,"  "),d=u):d=u.replace(this.rules.other.tabCharGlobal,"    "),i.test(u)||o.test(u)||a.test(u)||t.test(u)||n.test(u))break;if(d.search(this.rules.other.nonSpaceChar)>=h||!u.trim())s+="\n"+d.slice(h);else{if(c||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||i.test(l)||o.test(l)||n.test(l))break;s+="\n"+u}!c&&!u.trim()&&(c=!0),r+=f+"\n",e=e.substring(f.length+1),l=d.slice(h)}}i.loose||(a?i.loose=!0:this.rules.other.doubleBlankLine.test(r)&&(a=!0));let d,f=null;this.options.gfm&&(f=this.rules.other.listIsTask.exec(s),f&&(d="[ ] "!==f[0],s=s.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:r,task:!!f,checked:d,loose:!1,text:s,tokens:[]}),i.raw+=r}let s=i.items.at(-1);if(!s)return;s.raw=s.raw.trimEnd(),s.text=s.text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){let t=i.items[e].tokens.filter(e=>"space"===e.type),n=t.length>0&&t.some(e=>this.rules.other.anyLine.test(e.raw));i.loose=n}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:r}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=oT(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let e of r)this.rules.other.tableAlignRight.test(e)?o.align.push("right"):this.rules.other.tableAlignCenter.test(e)?o.align.push("center"):this.rules.other.tableAlignLeft.test(e)?o.align.push("left"):o.align.push(null);for(let e=0;e<n.length;e++)o.header.push({text:n[e],tokens:this.lexer.inline(n[e]),header:!0,align:o.align[e]});for(let e of i)o.rows.push(oT(e,o.header.length).map((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:o.align[t]})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let t=aT(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}(t[2],"()");if(-2===e)return;if(e>-1){let n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?n.slice(1):n.slice(1,-1)),sT(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=t[(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){let e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return sT(n,e,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!r[1]&&!r[2]||!n||this.rules.inline.punctuation.exec(n))){let n,i,o=[...r[0]].length-1,a=o,s=0,l="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+o);null!=(r=l.exec(t));){if(n=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!n)continue;if(i=[...n].length,r[3]||r[4]){a+=i;continue}if((r[5]||r[6])&&o%3&&!((o+i)%3)){s+=i;continue}if(a-=i,a>0)continue;i=Math.min(i,i+a+s);let t=[...r[0]][0].length,l=e.slice(0,o+r.index+t+i);if(Math.min(o,i)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let u=l.slice(2,-2);return{type:"strong",raw:l,text:u,tokens:this.lexer.inlineTokens(u)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(e),r=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return n&&r&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=t[1],n="mailto:"+e):(e=t[1],n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if("@"===t[2])e=t[0],n="mailto:"+e;else{let r;do{r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(r!==t[0]);e=t[0],n="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},uT=class e{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||aE,this.options.tokenizer=this.options.tokenizer||new lT,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:cE,block:JE.normal,inline:eT.normal};this.options.pedantic?(t.block=JE.pedantic,t.inline=eT.pedantic):this.options.gfm&&(t.block=JE.gfm,this.options.breaks?t.inline=eT.breaks:t.inline=eT.gfm),this.tokenizer.rules=t}static get rules(){return{block:JE,inline:eT}}static lex(t,n){return new e(n).lex(t)}static lexInline(t,n){return new e(n).inlineTokens(t)}lex(e){e=e.replace(cE.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){for(this.options.pedantic&&(e=e.replace(cE.tabCharGlobal,"    ").replace(cE.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let n=t.at(-1);1===r.raw.length&&void 0!==n?n.raw+="\n":t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let n=t.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+r.raw,n.text+="\n"+r.text,this.inlineQueue.at(-1).src=n.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let n=t.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+r.raw,n.text+="\n"+r.raw,this.inlineQueue.at(-1).src=n.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let i=e;if(this.options.extensions?.startBlock){let t,n=1/0,r=e.slice(1);this.options.extensions.startBlock.forEach(e=>{t=e.call({lexer:this},r),"number"==typeof t&&t>=0&&(n=Math.min(n,t))}),n<1/0&&n>=0&&(i=e.substring(0,n+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){let o=t.at(-1);n&&"paragraph"===o?.type?(o.raw+=(o.raw.endsWith("\n")?"":"\n")+r.raw,o.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(r),n=i.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let n=t.at(-1);"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+r.raw,n.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):t.push(r);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent)break;throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n=e,r=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(n));)e.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.anyPunctuation.exec(n));)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(n));)n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,o="";for(;e;){let r;if(i||(o=""),i=!1,this.options.extensions?.inline?.some(n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))continue;if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length);let n=t.at(-1);"text"===r.type&&"text"===n?.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,n,o)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}let a=e;if(this.options.extensions?.startInline){let t,n=1/0,r=e.slice(1);this.options.extensions.startInline.forEach(e=>{t=e.call({lexer:this},r),"number"==typeof t&&t>=0&&(n=Math.min(n,t))}),n<1/0&&n>=0&&(a=e.substring(0,n+1))}if(r=this.tokenizer.inlineText(a)){e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(o=r.raw.slice(-1)),i=!0;let n=t.at(-1);"text"===n?.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent)break;throw new Error(t)}}return t}},cT=class{options;parser;constructor(e){this.options=e||aE}space(e){return""}code({text:e,lang:t,escaped:n}){let r=(t||"").match(cE.notSpaceStart)?.[0],i=e.replace(cE.endingNewline,"")+"\n";return r?'<pre><code class="language-'+rT(r)+'">'+(n?i:rT(i,!0))+"</code></pre>\n":"<pre><code>"+(n?i:rT(i,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){let t=e.ordered,n=e.start,r="";for(let o=0;o<e.items.length;o++){let t=e.items[o];r+=this.listitem(t)}let i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+r+"</"+i+">\n"}listitem(e){let t="";if(e.task){let n=this.checkbox({checked:!!e.checked});e.loose?"paragraph"===e.tokens[0]?.type?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=n+" "+rT(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let r="";for(let i=0;i<e.rows.length;i++){let t=e.rows[i];n="";for(let e=0;e<t.length;e++)n+=this.tablecell(t[e]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+r+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${rT(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),i=iT(e);if(null===i)return r;let o='<a href="'+(e=i)+'"';return t&&(o+=' title="'+rT(t)+'"'),o+=">"+r+"</a>",o}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let i=iT(e);if(null===i)return rT(n);let o=`<img src="${e=i}" alt="${n}"`;return t&&(o+=` title="${rT(t)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:rT(e.text)}},hT=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},dT=class e{options;renderer;textRenderer;constructor(e){this.options=e||aE,this.options.renderer=this.options.renderer||new cT,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new hT}static parse(t,n){return new e(n).parse(t)}static parseInline(t,n){return new e(n).parseInline(t)}parse(e,t=!0){let n="";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let e=i,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}let o=i;switch(o.type){case"space":n+=this.renderer.space(o);continue;case"hr":n+=this.renderer.hr(o);continue;case"heading":n+=this.renderer.heading(o);continue;case"code":n+=this.renderer.code(o);continue;case"table":n+=this.renderer.table(o);continue;case"blockquote":n+=this.renderer.blockquote(o);continue;case"list":n+=this.renderer.list(o);continue;case"html":n+=this.renderer.html(o);continue;case"paragraph":n+=this.renderer.paragraph(o);continue;case"text":{let i=o,a=this.renderer.text(i);for(;r+1<e.length&&"text"===e[r+1].type;)i=e[++r],a+="\n"+this.renderer.text(i);n+=t?this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a,escaped:!0}]}):a;continue}default:{let e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return"";throw new Error(e)}}}return n}parseInline(e,t=this.renderer){let n="";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=e||"";continue}}let o=i;switch(o.type){case"escape":case"text":n+=t.text(o);break;case"html":n+=t.html(o);break;case"link":n+=t.link(o);break;case"image":n+=t.image(o);break;case"strong":n+=t.strong(o);break;case"em":n+=t.em(o);break;case"codespan":n+=t.codespan(o);break;case"br":n+=t.br(o);break;case"del":n+=t.del(o);break;default:{let e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return"";throw new Error(e)}}}return n}},fT=class{options;block;constructor(e){this.options=e||aE}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?uT.lex:uT.lexInline}provideParser(){return this.block?dT.parse:dT.parseInline}},pT=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=dT;Renderer=cT;TextRenderer=hT;Lexer=uT;Tokenizer=lT;Hooks=fT;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{let e=r;for(let r of e.header)n=n.concat(this.walkTokens(r.tokens,t));for(let r of e.rows)for(let e of r)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{let e=r;n=n.concat(this.walkTokens(e.items,t));break}default:{let e=r;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach(r=>{let i=e[r].flat(1/0);n=n.concat(this.walkTokens(i,t))}):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{let n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){let n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let r=e.renderer.apply(this,t);return!1===r&&(r=n.apply(this,t)),r}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");let n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),n.extensions=t),e.renderer){let t=this.defaults.renderer||new cT(this.defaults);for(let n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;let r=n,i=e.renderer[r],o=t[r];t[r]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new lT(this.defaults);for(let n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;let r=n,i=e.tokenizer[r],o=t[r];t[r]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new fT;for(let n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;let r=n,i=e.hooks[r],o=t[r];fT.passThroughHooks.has(n)?t[r]=e=>{if(this.defaults.async)return Promise.resolve(i.call(t,e)).then(e=>o.call(t,e));let n=i.call(t,e);return o.call(t,n)}:t[r]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,r=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(r.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return uT.lex(e,t??this.defaults)}parser(e,t){return dT.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let r={...n},i={...this.defaults,...r},o=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===r.async)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||null===t)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);let a=i.hooks?i.hooks.provideLexer():e?uT.lex:uT.lexInline,s=i.hooks?i.hooks.provideParser():e?dT.parse:dT.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then(e=>a(e,i)).then(e=>i.hooks?i.hooks.processAllTokens(e):e).then(e=>i.walkTokens?Promise.all(this.walkTokens(e,i.walkTokens)).then(()=>e):e).then(e=>s(e,i)).then(e=>i.hooks?i.hooks.postprocess(e):e).catch(o);try{i.hooks&&(t=i.hooks.preprocess(t));let e=a(t,i);i.hooks&&(e=i.hooks.processAllTokens(e)),i.walkTokens&&this.walkTokens(e,i.walkTokens);let n=s(e,i);return i.hooks&&(n=i.hooks.postprocess(n)),n}catch(l){return o(l)}}}onError(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+rT(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function gT(e,t){return pT.parse(e,t)}function mT(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.from("string"==typeof e?[e]:e);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce(function(e,t){var n=t.match(/\n([\t ]+|(?!\s).)/g);return n?e.concat(n.map(function(e){var t,n;return null!==(n=null===(t=e.match(/[\t ]/g))||void 0===t?void 0:t.length)&&void 0!==n?n:0})):e},[]);if(i.length){var o=new RegExp("\n[\t ]{"+Math.min.apply(Math,i)+"}","g");r=r.map(function(e){return e.replace(o,"\n")})}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return t.forEach(function(e,t){var n=a.match(/(?:^|\n)( *)$/),i=n?n[1]:"",o=e;"string"==typeof e&&e.includes("\n")&&(o=String(e).split("\n").map(function(e,t){return 0===t?e:""+i+e}).join("\n")),a+=o+r[t+1]}),a}function vT(e,t,n){if(e&&e.length){const[r,i]=t,o=Math.PI/180*n,a=Math.cos(o),s=Math.sin(o);for(const t of e){const[e,n]=t;t[0]=(e-r)*a-(n-i)*s+r,t[1]=(e-r)*s+(n-i)*a+i}}}function yT(e,t){return e[0]===t[0]&&e[1]===t[1]}function bT(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=4*t.strokeWidth),i=Math.round(Math.max(i,.1));let o=1;return t.roughness>=1&&((null===(n=t.randomizer)||void 0===n?void 0:n.next())||Math.random())>.7&&(o=i),function(e,t,n,r=1){const i=n,o=Math.max(t,.1),a=e[0]&&e[0][0]&&"number"==typeof e[0][0]?[e]:e,s=[0,0];if(i)for(const u of a)vT(u,s,i);const l=function(e,t,n){const r=[];for(const u of e){const e=[...u];yT(e[0],e[e.length-1])||e.push([e[0][0],e[0][1]]),e.length>2&&r.push(e)}const i=[];t=Math.max(t,.1);const o=[];for(const u of r)for(let e=0;e<u.length-1;e++){const t=u[e],n=u[e+1];if(t[1]!==n[1]){const e=Math.min(t[1],n[1]);o.push({ymin:e,ymax:Math.max(t[1],n[1]),x:e===t[1]?t[0]:n[0],islope:(n[0]-t[0])/(n[1]-t[1])})}}if(o.sort((e,t)=>e.ymin<t.ymin?-1:e.ymin>t.ymin?1:e.x<t.x?-1:e.x>t.x?1:e.ymax===t.ymax?0:(e.ymax-t.ymax)/Math.abs(e.ymax-t.ymax)),!o.length)return i;let a=[],s=o[0].ymin,l=0;for(;a.length||o.length;){if(o.length){let e=-1;for(let t=0;t<o.length&&!(o[t].ymin>s);t++)e=t;o.splice(0,e+1).forEach(e=>{a.push({s:s,edge:e})})}if(a=a.filter(e=>!(e.edge.ymax<=s)),a.sort((e,t)=>e.edge.x===t.edge.x?0:(e.edge.x-t.edge.x)/Math.abs(e.edge.x-t.edge.x)),(1!==n||l%t==0)&&a.length>1)for(let e=0;e<a.length;e+=2){const t=e+1;if(t>=a.length)break;const n=a[e].edge,r=a[t].edge;i.push([[Math.round(n.x),s],[Math.round(r.x),s]])}s+=n,a.forEach(e=>{e.edge.x=e.edge.x+n*e.edge.islope}),l++}return i}(a,o,r);if(i){for(const e of a)vT(e,s,-i);!function(e,t,n){const r=[];e.forEach(e=>r.push(...e)),vT(r,t,n)}(l,s,-i)}return l}(e,i,r,o||1)}gT.options=gT.setOptions=function(e){return pT.setOptions(e),gT.defaults=pT.defaults,sE(gT.defaults),gT},gT.getDefaults=oE,gT.defaults=aE,gT.use=function(...e){return pT.use(...e),gT.defaults=pT.defaults,sE(gT.defaults),gT},gT.walkTokens=function(e,t){return pT.walkTokens(e,t)},gT.parseInline=pT.parseInline,gT.Parser=dT,gT.parser=dT.parse,gT.Renderer=cT,gT.TextRenderer=hT,gT.Lexer=uT,gT.lexer=uT.lex,gT.Tokenizer=lT,gT.Hooks=fT,gT.parse=gT,gT.options,gT.setOptions,gT.use,gT.walkTokens,gT.parseInline,dT.parse,uT.lex;class xT{constructor(e){this.helper=e}fillPolygons(e,t){return this._fillPolygons(e,t)}_fillPolygons(e,t){const n=bT(e,t);return{type:"fillSketch",ops:this.renderLines(n,t)}}renderLines(e,t){const n=[];for(const r of e)n.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],t));return n}}function wT(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class ET extends xT{fillPolygons(e,t){let n=t.hachureGap;n<0&&(n=4*t.strokeWidth),n=Math.max(n,.1);const r=bT(e,Object.assign({},t,{hachureGap:n})),i=Math.PI/180*t.hachureAngle,o=[],a=.5*n*Math.cos(i),s=.5*n*Math.sin(i);for(const[l,u]of r)wT([l,u])&&o.push([[l[0]-a,l[1]+s],[...u]],[[l[0]+a,l[1]-s],[...u]]);return{type:"fillSketch",ops:this.renderLines(o,t)}}}class TT extends xT{fillPolygons(e,t){const n=this._fillPolygons(e,t),r=Object.assign({},t,{hachureAngle:t.hachureAngle+90}),i=this._fillPolygons(e,r);return n.ops=n.ops.concat(i.ops),n}}let _T=class{constructor(e){this.helper=e}fillPolygons(e,t){const n=bT(e,t=Object.assign({},t,{hachureAngle:0}));return this.dotsOnLines(n,t)}dotsOnLines(e,t){const n=[];let r=t.hachureGap;r<0&&(r=4*t.strokeWidth),r=Math.max(r,.1);let i=t.fillWeight;i<0&&(i=t.strokeWidth/2);const o=r/4;for(const a of e){const e=wT(a),s=e/r,l=Math.ceil(s)-1,u=e-l*r,c=(a[0][0]+a[1][0])/2-r/4,h=Math.min(a[0][1],a[1][1]);for(let a=0;a<l;a++){const e=h+u+a*r,s=c-o+2*Math.random()*o,l=e-o+2*Math.random()*o,d=this.helper.ellipse(s,l,i,i,t);n.push(...d.ops)}}return{type:"fillSketch",ops:n}}};class kT{constructor(e){this.helper=e}fillPolygons(e,t){const n=bT(e,t);return{type:"fillSketch",ops:this.dashedLine(n,t)}}dashedLine(e,t){const n=t.dashOffset<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashOffset,r=t.dashGap<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashGap,i=[];return e.forEach(e=>{const o=wT(e),a=Math.floor(o/(n+r)),s=(o+r-a*(n+r))/2;let l=e[0],u=e[1];l[0]>u[0]&&(l=e[1],u=e[0]);const c=Math.atan((u[1]-l[1])/(u[0]-l[0]));for(let h=0;h<a;h++){const e=h*(n+r),o=e+n,a=[l[0]+e*Math.cos(c)+s*Math.cos(c),l[1]+e*Math.sin(c)+s*Math.sin(c)],u=[l[0]+o*Math.cos(c)+s*Math.cos(c),l[1]+o*Math.sin(c)+s*Math.sin(c)];i.push(...this.helper.doubleLineOps(a[0],a[1],u[0],u[1],t))}}),i}}class AT{constructor(e){this.helper=e}fillPolygons(e,t){const n=t.hachureGap<0?4*t.strokeWidth:t.hachureGap,r=t.zigzagOffset<0?n:t.zigzagOffset,i=bT(e,t=Object.assign({},t,{hachureGap:n+r}));return{type:"fillSketch",ops:this.zigzagLines(i,r,t)}}zigzagLines(e,t,n){const r=[];return e.forEach(e=>{const i=wT(e),o=Math.round(i/(2*t));let a=e[0],s=e[1];a[0]>s[0]&&(a=e[1],s=e[0]);const l=Math.atan((s[1]-a[1])/(s[0]-a[0]));for(let u=0;u<o;u++){const e=2*u*t,i=2*(u+1)*t,o=Math.sqrt(2*Math.pow(t,2)),s=[a[0]+e*Math.cos(l),a[1]+e*Math.sin(l)],c=[a[0]+i*Math.cos(l),a[1]+i*Math.sin(l)],h=[s[0]+o*Math.cos(l+Math.PI/4),s[1]+o*Math.sin(l+Math.PI/4)];r.push(...this.helper.doubleLineOps(s[0],s[1],h[0],h[1],n),...this.helper.doubleLineOps(h[0],h[1],c[0],c[1],n))}}),r}}const ST={};let NT=class{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}};const MT={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function CT(e,t){return e.type===t}function IT(e){const t=[],n=function(e){const t=new Array;for(;""!==e;)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:0,text:RegExp.$1},e=e.substr(RegExp.$1.length);else{if(!e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];t[t.length]={type:1,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length)}return t[t.length]={type:2,text:""},t}(e);let r="BOD",i=0,o=n[i];for(;!CT(o,2);){let a=0;const s=[];if("BOD"===r){if("M"!==o.text&&"m"!==o.text)return IT("M0,0"+e);i++,a=MT[o.text],r=o.text}else CT(o,1)?a=MT[r]:(i++,a=MT[o.text],r=o.text);if(!(i+a<n.length))throw new Error("Path data ended short");for(let e=i;e<i+a;e++){const t=n[e];if(!CT(t,1))throw new Error("Param not a number: "+r+","+t.text);s[s.length]=+t.text}if("number"!=typeof MT[r])throw new Error("Bad segment: "+r);{const e={key:r,data:s};t.push(e),i+=a,o=n[i],"M"===r&&(r="L"),"m"===r&&(r="l")}}return t}function RT(e){let t=0,n=0,r=0,i=0;const o=[];for(const{key:a,data:s}of e)switch(a){case"M":o.push({key:"M",data:[...s]}),[t,n]=s,[r,i]=s;break;case"m":t+=s[0],n+=s[1],o.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":o.push({key:"L",data:[...s]}),[t,n]=s;break;case"l":t+=s[0],n+=s[1],o.push({key:"L",data:[t,n]});break;case"C":o.push({key:"C",data:[...s]}),t=s[4],n=s[5];break;case"c":{const e=s.map((e,r)=>r%2?e+n:e+t);o.push({key:"C",data:e}),t=e[4],n=e[5];break}case"Q":o.push({key:"Q",data:[...s]}),t=s[2],n=s[3];break;case"q":{const e=s.map((e,r)=>r%2?e+n:e+t);o.push({key:"Q",data:e}),t=e[2],n=e[3];break}case"A":o.push({key:"A",data:[...s]}),t=s[5],n=s[6];break;case"a":t+=s[5],n+=s[6],o.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],t,n]});break;case"H":o.push({key:"H",data:[...s]}),t=s[0];break;case"h":t+=s[0],o.push({key:"H",data:[t]});break;case"V":o.push({key:"V",data:[...s]}),n=s[0];break;case"v":n+=s[0],o.push({key:"V",data:[n]});break;case"S":o.push({key:"S",data:[...s]}),t=s[2],n=s[3];break;case"s":{const e=s.map((e,r)=>r%2?e+n:e+t);o.push({key:"S",data:e}),t=e[2],n=e[3];break}case"T":o.push({key:"T",data:[...s]}),t=s[0],n=s[1];break;case"t":t+=s[0],n+=s[1],o.push({key:"T",data:[t,n]});break;case"Z":case"z":o.push({key:"Z",data:[]}),t=r,n=i}return o}function LT(e){const t=[];let n="",r=0,i=0,o=0,a=0,s=0,l=0;for(const{key:u,data:c}of e){switch(u){case"M":t.push({key:"M",data:[...c]}),[r,i]=c,[o,a]=c;break;case"C":t.push({key:"C",data:[...c]}),r=c[4],i=c[5],s=c[2],l=c[3];break;case"L":t.push({key:"L",data:[...c]}),[r,i]=c;break;case"H":r=c[0],t.push({key:"L",data:[r,i]});break;case"V":i=c[0],t.push({key:"L",data:[r,i]});break;case"S":{let e=0,o=0;"C"===n||"S"===n?(e=r+(r-s),o=i+(i-l)):(e=r,o=i),t.push({key:"C",data:[e,o,...c]}),s=c[0],l=c[1],r=c[2],i=c[3];break}case"T":{const[e,o]=c;let a=0,u=0;"Q"===n||"T"===n?(a=r+(r-s),u=i+(i-l)):(a=r,u=i);const h=r+2*(a-r)/3,d=i+2*(u-i)/3,f=e+2*(a-e)/3,p=o+2*(u-o)/3;t.push({key:"C",data:[h,d,f,p,e,o]}),s=a,l=u,r=e,i=o;break}case"Q":{const[e,n,o,a]=c,u=r+2*(e-r)/3,h=i+2*(n-i)/3,d=o+2*(e-o)/3,f=a+2*(n-a)/3;t.push({key:"C",data:[u,h,d,f,o,a]}),s=e,l=n,r=o,i=a;break}case"A":{const e=Math.abs(c[0]),n=Math.abs(c[1]),o=c[2],a=c[3],s=c[4],l=c[5],u=c[6];0===e||0===n?(t.push({key:"C",data:[r,i,l,u,l,u]}),r=l,i=u):r===l&&i===u||(DT(r,i,l,u,e,n,o,a,s).forEach(function(e){t.push({key:"C",data:e})}),r=l,i=u);break}case"Z":t.push({key:"Z",data:[]}),r=o,i=a}n=u}return t}function OT(e,t,n){return[e*Math.cos(n)-t*Math.sin(n),e*Math.sin(n)+t*Math.cos(n)]}function DT(e,t,n,r,i,o,a,s,l,u){const c=(h=a,Math.PI*h/180);var h;let d=[],f=0,p=0,g=0,m=0;if(u)[f,p,g,m]=u;else{[e,t]=OT(e,t,-c),[n,r]=OT(n,r,-c);const a=(e-n)/2,u=(t-r)/2;let h=a*a/(i*i)+u*u/(o*o);h>1&&(h=Math.sqrt(h),i*=h,o*=h);const d=i*i,v=o*o,y=d*v-d*u*u-v*a*a,b=d*u*u+v*a*a,x=(s===l?-1:1)*Math.sqrt(Math.abs(y/b));g=x*i*u/o+(e+n)/2,m=x*-o*a/i+(t+r)/2,f=Math.asin(parseFloat(((t-m)/o).toFixed(9))),p=Math.asin(parseFloat(((r-m)/o).toFixed(9))),e<g&&(f=Math.PI-f),n<g&&(p=Math.PI-p),f<0&&(f=2*Math.PI+f),p<0&&(p=2*Math.PI+p),l&&f>p&&(f-=2*Math.PI),!l&&p>f&&(p-=2*Math.PI)}let v=p-f;if(Math.abs(v)>120*Math.PI/180){const e=p,t=n,s=r;p=l&&p>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,d=DT(n=g+i*Math.cos(p),r=m+o*Math.sin(p),t,s,i,o,a,0,l,[p,e,g,m])}v=p-f;const y=Math.cos(f),b=Math.sin(f),x=Math.cos(p),w=Math.sin(p),E=Math.tan(v/4),T=4/3*i*E,_=4/3*o*E,k=[e,t],A=[e+T*b,t-_*y],S=[n+T*w,r-_*x],N=[n,r];if(A[0]=2*k[0]-A[0],A[1]=2*k[1]-A[1],u)return[A,S,N].concat(d);{d=[A,S,N].concat(d);const e=[];for(let t=0;t<d.length;t+=3){const n=OT(d[t][0],d[t][1],c),r=OT(d[t+1][0],d[t+1][1],c),i=OT(d[t+2][0],d[t+2][1],c);e.push([n[0],n[1],r[0],r[1],i[0],i[1]])}return e}}const PT={randOffset:function(e,t){return XT(e,t)},randOffsetWithRange:function(e,t,n){return WT(e,t,n)},ellipse:function(e,t,n,r,i){return GT(e,t,i,UT(n,r,i)).opset},doubleLineOps:function(e,t,n,r,i){return KT(e,t,n,r,i,!0)}};function BT(e,t,n,r,i){return{type:"path",ops:KT(e,t,n,r,i)}}function FT(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let t=0;t<r-1;t++)i.push(...KT(e[t][0],e[t][1],e[t+1][0],e[t+1][1],n));return t&&i.push(...KT(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}return 2===r?BT(e[0][0],e[0][1],e[1][0],e[1][1],n):{type:"path",ops:[]}}function zT(e,t){if(e.length){const n="number"==typeof e[0][0]?[e]:e,r=QT(n[0],1*(1+.2*t.roughness),t),i=t.disableMultiStroke?[]:QT(n[0],1.5*(1+.22*t.roughness),YT(t));for(let e=1;e<n.length;e++){const o=n[e];if(o.length){const e=QT(o,1*(1+.2*t.roughness),t),n=t.disableMultiStroke?[]:QT(o,1.5*(1+.22*t.roughness),YT(t));for(const t of e)"move"!==t.op&&r.push(t);for(const t of n)"move"!==t.op&&i.push(t)}}return{type:"path",ops:r.concat(i)}}return{type:"path",ops:[]}}function UT(e,t,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),o=2*Math.PI/i;let a=Math.abs(e/2),s=Math.abs(t/2);const l=1-n.curveFitting;return a+=XT(a*l,n),s+=XT(s*l,n),{increment:o,rx:a,ry:s}}function GT(e,t,n,r){const[i,o]=e_(r.increment,e,t,r.rx,r.ry,1,r.increment*WT(.1,WT(.4,1,n),n),n);let a=JT(i,null,n);if(!n.disableMultiStroke&&0!==n.roughness){const[i]=e_(r.increment,e,t,r.rx,r.ry,1.5,0,n),o=JT(i,null,n);a=a.concat(o)}return{estimatedPoints:o,opset:{type:"path",ops:a}}}function VT(e,t,n,r,i,o,a,s,l){const u=e,c=t;let h=Math.abs(n/2),d=Math.abs(r/2);h+=XT(.01*h,l),d+=XT(.01*d,l);let f=i,p=o;for(;f<0;)f+=2*Math.PI,p+=2*Math.PI;p-f>2*Math.PI&&(f=0,p=2*Math.PI);const g=2*Math.PI/l.curveStepCount,m=Math.min(g/2,(p-f)/2),v=t_(m,u,c,h,d,f,p,1,l);if(!l.disableMultiStroke){const e=t_(m,u,c,h,d,f,p,1.5,l);v.push(...e)}return a&&(s?v.push(...KT(u,c,u+h*Math.cos(f),c+d*Math.sin(f),l),...KT(u,c,u+h*Math.cos(p),c+d*Math.sin(p),l)):v.push({op:"lineTo",data:[u,c]},{op:"lineTo",data:[u+h*Math.cos(f),c+d*Math.sin(f)]})),{type:"path",ops:v}}function jT(e,t){const n=LT(RT(IT(e))),r=[];let i=[0,0],o=[0,0];for(const{key:a,data:s}of n)switch(a){case"M":o=[s[0],s[1]],i=[s[0],s[1]];break;case"L":r.push(...KT(o[0],o[1],s[0],s[1],t)),o=[s[0],s[1]];break;case"C":{const[e,n,i,a,l,u]=s;r.push(...n_(e,n,i,a,l,u,o,t)),o=[l,u];break}case"Z":r.push(...KT(o[0],o[1],i[0],i[1],t)),o=[i[0],i[1]]}return{type:"path",ops:r}}function HT(e,t){const n=[];for(const r of e)if(r.length){const e=t.maxRandomnessOffset||0,i=r.length;if(i>2){n.push({op:"move",data:[r[0][0]+XT(e,t),r[0][1]+XT(e,t)]});for(let o=1;o<i;o++)n.push({op:"lineTo",data:[r[o][0]+XT(e,t),r[o][1]+XT(e,t)]})}}return{type:"fillPath",ops:n}}function $T(e,t){return function(e,t){let n=e.fillStyle||"hachure";if(!ST[n])switch(n){case"zigzag":ST[n]||(ST[n]=new ET(t));break;case"cross-hatch":ST[n]||(ST[n]=new TT(t));break;case"dots":ST[n]||(ST[n]=new _T(t));break;case"dashed":ST[n]||(ST[n]=new kT(t));break;case"zigzag-line":ST[n]||(ST[n]=new AT(t));break;default:n="hachure",ST[n]||(ST[n]=new xT(t))}return ST[n]}(t,PT).fillPolygons(e,t)}function YT(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function qT(e){return e.randomizer||(e.randomizer=new NT(e.seed||0)),e.randomizer.next()}function WT(e,t,n,r=1){return n.roughness*r*(qT(n)*(t-e)+e)}function XT(e,t,n=1){return WT(-e,e,t,n)}function KT(e,t,n,r,i,o=!1){const a=o?i.disableMultiStrokeFill:i.disableMultiStroke,s=ZT(e,t,n,r,i,!0,!1);if(a)return s;const l=ZT(e,t,n,r,i,!0,!0);return s.concat(l)}function ZT(e,t,n,r,i,o,a){const s=Math.pow(e-n,2)+Math.pow(t-r,2),l=Math.sqrt(s);let u=1;u=l<200?1:l>500?.4:-.0016668*l+1.233334;let c=i.maxRandomnessOffset||0;c*c*100>s&&(c=l/10);const h=c/2,d=.2+.2*qT(i);let f=i.bowing*i.maxRandomnessOffset*(r-t)/200,p=i.bowing*i.maxRandomnessOffset*(e-n)/200;f=XT(f,i,u),p=XT(p,i,u);const g=[],m=()=>XT(h,i,u),v=()=>XT(c,i,u),y=i.preserveVertices;return a?g.push({op:"move",data:[e+(y?0:m()),t+(y?0:m())]}):g.push({op:"move",data:[e+(y?0:XT(c,i,u)),t+(y?0:XT(c,i,u))]}),a?g.push({op:"bcurveTo",data:[f+e+(n-e)*d+m(),p+t+(r-t)*d+m(),f+e+2*(n-e)*d+m(),p+t+2*(r-t)*d+m(),n+(y?0:m()),r+(y?0:m())]}):g.push({op:"bcurveTo",data:[f+e+(n-e)*d+v(),p+t+(r-t)*d+v(),f+e+2*(n-e)*d+v(),p+t+2*(r-t)*d+v(),n+(y?0:v()),r+(y?0:v())]}),g}function QT(e,t,n){if(!e.length)return[];const r=[];r.push([e[0][0]+XT(t,n),e[0][1]+XT(t,n)]),r.push([e[0][0]+XT(t,n),e[0][1]+XT(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+XT(t,n),e[i][1]+XT(t,n)]),i===e.length-1&&r.push([e[i][0]+XT(t,n),e[i][1]+XT(t,n)]);return JT(r,null,n)}function JT(e,t,n){const r=e.length,i=[];if(r>3){const t=[],o=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let n=1;n+2<r;n++){const r=e[n];t[0]=[r[0],r[1]],t[1]=[r[0]+(o*e[n+1][0]-o*e[n-1][0])/6,r[1]+(o*e[n+1][1]-o*e[n-1][1])/6],t[2]=[e[n+1][0]+(o*e[n][0]-o*e[n+2][0])/6,e[n+1][1]+(o*e[n][1]-o*e[n+2][1])/6],t[3]=[e[n+1][0],e[n+1][1]],i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[3][0],t[3][1]]})}}else 3===r?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):2===r&&i.push(...ZT(e[0][0],e[0][1],e[1][0],e[1][1],n,0,!0));return i}function e_(e,t,n,r,i,o,a,s){const l=[],u=[];if(0===s.roughness){e/=4,u.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let o=0;o<=2*Math.PI;o+=e){const e=[t+r*Math.cos(o),n+i*Math.sin(o)];l.push(e),u.push(e)}u.push([t+r*Math.cos(0),n+i*Math.sin(0)]),u.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const c=XT(.5,s)-Math.PI/2;u.push([XT(o,s)+t+.9*r*Math.cos(c-e),XT(o,s)+n+.9*i*Math.sin(c-e)]);const h=2*Math.PI+c-.01;for(let a=c;a<h;a+=e){const e=[XT(o,s)+t+r*Math.cos(a),XT(o,s)+n+i*Math.sin(a)];l.push(e),u.push(e)}u.push([XT(o,s)+t+r*Math.cos(c+2*Math.PI+.5*a),XT(o,s)+n+i*Math.sin(c+2*Math.PI+.5*a)]),u.push([XT(o,s)+t+.98*r*Math.cos(c+a),XT(o,s)+n+.98*i*Math.sin(c+a)]),u.push([XT(o,s)+t+.9*r*Math.cos(c+.5*a),XT(o,s)+n+.9*i*Math.sin(c+.5*a)])}return[u,l]}function t_(e,t,n,r,i,o,a,s,l){const u=o+XT(.1,l),c=[];c.push([XT(s,l)+t+.9*r*Math.cos(u-e),XT(s,l)+n+.9*i*Math.sin(u-e)]);for(let h=u;h<=a;h+=e)c.push([XT(s,l)+t+r*Math.cos(h),XT(s,l)+n+i*Math.sin(h)]);return c.push([t+r*Math.cos(a),n+i*Math.sin(a)]),c.push([t+r*Math.cos(a),n+i*Math.sin(a)]),JT(c,0,l)}function n_(e,t,n,r,i,o,a,s){const l=[],u=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3];let c=[0,0];const h=s.disableMultiStroke?1:2,d=s.preserveVertices;for(let f=0;f<h;f++)0===f?l.push({op:"move",data:[a[0],a[1]]}):l.push({op:"move",data:[a[0]+(d?0:XT(u[0],s)),a[1]+(d?0:XT(u[0],s))]}),c=d?[i,o]:[i+XT(u[f],s),o+XT(u[f],s)],l.push({op:"bcurveTo",data:[e+XT(u[f],s),t+XT(u[f],s),n+XT(u[f],s),r+XT(u[f],s),c[0],c[1]]});return l}function r_(e){return[...e]}function i_(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(3===n)r.push(r_(e[0]),r_(e[1]),r_(e[2]),r_(e[2]));else{const n=[];n.push(e[0],e[0]);for(let t=1;t<e.length;t++)n.push(e[t]),t===e.length-1&&n.push(e[t]);const i=[],o=1-t;r.push(r_(n[0]));for(let e=1;e+2<n.length;e++){const t=n[e];i[0]=[t[0],t[1]],i[1]=[t[0]+(o*n[e+1][0]-o*n[e-1][0])/6,t[1]+(o*n[e+1][1]-o*n[e-1][1])/6],i[2]=[n[e+1][0]+(o*n[e][0]-o*n[e+2][0])/6,n[e+1][1]+(o*n[e][1]-o*n[e+2][1])/6],i[3]=[n[e+1][0],n[e+1][1]],r.push(i[1],i[2],i[3])}}return r}function o_(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function a_(e,t,n){const r=o_(t,n);if(0===r)return o_(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),o_(e,s_(t,n,i))}function s_(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function l_(e,t,n,r){const i=r||[];if(function(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let a=3*r[0]-2*n[0]-o[0];a*=a;let s=3*r[1]-2*n[1]-o[1];s*=s;let l=3*i[0]-2*o[0]-n[0];l*=l;let u=3*i[1]-2*o[1]-n[1];return u*=u,a<l&&(a=l),s<u&&(s=u),a+s}(e,t)<n){const n=e[t+0];i.length?(o=i[i.length-1],a=n,Math.sqrt(o_(o,a))>1&&i.push(n)):i.push(n),i.push(e[t+3])}else{const r=.5,o=e[t+0],a=e[t+1],s=e[t+2],l=e[t+3],u=s_(o,a,r),c=s_(a,s,r),h=s_(s,l,r),d=s_(u,c,r),f=s_(c,h,r),p=s_(d,f,r);l_([o,u,d,p],0,n,i),l_([p,f,h,l],0,n,i)}var o,a;return i}function u_(e,t){return c_(e,0,e.length,t)}function c_(e,t,n,r,i){const o=i||[],a=e[t],s=e[n-1];let l=0,u=1;for(let c=t+1;c<n-1;++c){const t=a_(e[c],a,s);t>l&&(l=t,u=c)}return Math.sqrt(l)>r?(c_(e,t,u+1,r,o),c_(e,u,n,r,o)):(o.length||o.push(a),o.push(s)),o}function h_(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++)l_(e,3*o,t,r);return n&&n>0?c_(r,0,r.length,n):r}const d_="none";class f_{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,t,n){return{shape:e,sets:t||[],options:n||this.defaultOptions}}line(e,t,n,r,i){const o=this._o(i);return this._d("line",[BT(e,t,n,r,o)],o)}rectangle(e,t,n,r,i){const o=this._o(i),a=[],s=function(e,t,n,r,i){return FT([[e,t],[e+n,t],[e+n,t+r],[e,t+r]],!0,i)}(e,t,n,r,o);if(o.fill){const i=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];"solid"===o.fillStyle?a.push(HT([i],o)):a.push($T([i],o))}return o.stroke!==d_&&a.push(s),this._d("rectangle",a,o)}ellipse(e,t,n,r,i){const o=this._o(i),a=[],s=UT(n,r,o),l=GT(e,t,o,s);if(o.fill)if("solid"===o.fillStyle){const n=GT(e,t,o,s).opset;n.type="fillPath",a.push(n)}else a.push($T([l.estimatedPoints],o));return o.stroke!==d_&&a.push(l.opset),this._d("ellipse",a,o)}circle(e,t,n,r){const i=this.ellipse(e,t,n,n,r);return i.shape="circle",i}linearPath(e,t){const n=this._o(t);return this._d("linearPath",[FT(e,!1,n)],n)}arc(e,t,n,r,i,o,a=!1,s){const l=this._o(s),u=[],c=VT(e,t,n,r,i,o,a,!0,l);if(a&&l.fill)if("solid"===l.fillStyle){const a=Object.assign({},l);a.disableMultiStroke=!0;const s=VT(e,t,n,r,i,o,!0,!1,a);s.type="fillPath",u.push(s)}else u.push(function(e,t,n,r,i,o,a){const s=e,l=t;let u=Math.abs(n/2),c=Math.abs(r/2);u+=XT(.01*u,a),c+=XT(.01*c,a);let h=i,d=o;for(;h<0;)h+=2*Math.PI,d+=2*Math.PI;d-h>2*Math.PI&&(h=0,d=2*Math.PI);const f=(d-h)/a.curveStepCount,p=[];for(let g=h;g<=d;g+=f)p.push([s+u*Math.cos(g),l+c*Math.sin(g)]);return p.push([s+u*Math.cos(d),l+c*Math.sin(d)]),p.push([s,l]),$T([p],a)}(e,t,n,r,i,o,l));return l.stroke!==d_&&u.push(c),this._d("arc",u,l)}curve(e,t){const n=this._o(t),r=[],i=zT(e,n);if(n.fill&&n.fill!==d_)if("solid"===n.fillStyle){const t=zT(e,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(t.ops)})}else{const t=[],i=e;if(i.length){const e="number"==typeof i[0][0]?[i]:i;for(const r of e)r.length<3?t.push(...r):3===r.length?t.push(...h_(i_([r[0],r[0],r[1],r[2]]),10,(1+n.roughness)/2)):t.push(...h_(i_(r),10,(1+n.roughness)/2))}t.length&&r.push($T([t],n))}return n.stroke!==d_&&r.push(i),this._d("curve",r,n)}polygon(e,t){const n=this._o(t),r=[],i=FT(e,!0,n);return n.fill&&("solid"===n.fillStyle?r.push(HT([e],n)):r.push($T([e],n))),n.stroke!==d_&&r.push(i),this._d("polygon",r,n)}path(e,t){const n=this._o(t),r=[];if(!e)return this._d("path",r,n);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const i=n.fill&&"transparent"!==n.fill&&n.fill!==d_,o=n.stroke!==d_,a=!!(n.simplification&&n.simplification<1),s=function(e,t,n){const r=LT(RT(IT(e))),i=[];let o=[],a=[0,0],s=[];const l=()=>{s.length>=4&&o.push(...h_(s,1)),s=[]},u=()=>{l(),o.length&&(i.push(o),o=[])};for(const{key:h,data:d}of r)switch(h){case"M":u(),a=[d[0],d[1]],o.push(a);break;case"L":l(),o.push([d[0],d[1]]);break;case"C":if(!s.length){const e=o.length?o[o.length-1]:a;s.push([e[0],e[1]])}s.push([d[0],d[1]]),s.push([d[2],d[3]]),s.push([d[4],d[5]]);break;case"Z":l(),o.push([a[0],a[1]])}if(u(),!n)return i;const c=[];for(const h of i){const e=u_(h,n);e.length&&c.push(e)}return c}(e,0,a?4-4*(n.simplification||1):(1+n.roughness)/2),l=jT(e,n);if(i)if("solid"===n.fillStyle)if(1===s.length){const t=jT(e,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(t.ops)})}else r.push(HT(s,n));else r.push($T(s,n));return o&&(a?s.forEach(e=>{r.push(FT(e,!1,n))}):r.push(l)),this._d("path",r,n)}opsToPath(e,t){let n="";for(const r of e.ops){const e="number"==typeof t&&t>=0?r.data.map(e=>+e.toFixed(t)):r.data;switch(r.op){case"move":n+=`M${e[0]} ${e[1]} `;break;case"bcurveTo":n+=`C${e[0]} ${e[1]}, ${e[2]} ${e[3]}, ${e[4]} ${e[5]} `;break;case"lineTo":n+=`L${e[0]} ${e[1]} `}}return n.trim()}toPaths(e){const t=e.sets||[],n=e.options||this.defaultOptions,r=[];for(const i of t){let e=null;switch(i.type){case"path":e={d:this.opsToPath(i),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:d_};break;case"fillPath":e={d:this.opsToPath(i),stroke:d_,strokeWidth:0,fill:n.fill||d_};break;case"fillSketch":e=this.fillSketch(i,n)}e&&r.push(e)}return r}fillSketch(e,t){let n=t.fillWeight;return n<0&&(n=t.strokeWidth/2),{d:this.opsToPath(e),stroke:t.fill||d_,strokeWidth:n,fill:d_}}_mergedShape(e){return e.filter((e,t)=>0===t||"move"!==e.op)}}class p_{constructor(e,t){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new f_(t)}draw(e){const t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.ctx,i=e.options.fixedDecimalPlaceDigits;for(const o of t)switch(o.type){case"path":r.save(),r.strokeStyle="none"===n.stroke?"transparent":n.stroke,r.lineWidth=n.strokeWidth,n.strokeLineDash&&r.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(r.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(r,o,i),r.restore();break;case"fillPath":{r.save(),r.fillStyle=n.fill||"";const t="curve"===e.shape||"polygon"===e.shape||"path"===e.shape?"evenodd":"nonzero";this._drawToContext(r,o,i,t),r.restore();break}case"fillSketch":this.fillSketch(r,o,n)}}fillSketch(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2),e.save(),n.fillLineDash&&e.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(e.lineDashOffset=n.fillLineDashOffset),e.strokeStyle=n.fill||"",e.lineWidth=r,this._drawToContext(e,t,n.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,t,n,r="nonzero"){e.beginPath();for(const i of t.ops){const t="number"==typeof n&&n>=0?i.data.map(e=>+e.toFixed(n)):i.data;switch(i.op){case"move":e.moveTo(t[0],t[1]);break;case"bcurveTo":e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]);break;case"lineTo":e.lineTo(t[0],t[1])}}"fillPath"===t.type?e.fill(r):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,t,n,r,i){const o=this.gen.line(e,t,n,r,i);return this.draw(o),o}rectangle(e,t,n,r,i){const o=this.gen.rectangle(e,t,n,r,i);return this.draw(o),o}ellipse(e,t,n,r,i){const o=this.gen.ellipse(e,t,n,r,i);return this.draw(o),o}circle(e,t,n,r){const i=this.gen.circle(e,t,n,r);return this.draw(i),i}linearPath(e,t){const n=this.gen.linearPath(e,t);return this.draw(n),n}polygon(e,t){const n=this.gen.polygon(e,t);return this.draw(n),n}arc(e,t,n,r,i,o,a=!1,s){const l=this.gen.arc(e,t,n,r,i,o,a,s);return this.draw(l),l}curve(e,t){const n=this.gen.curve(e,t);return this.draw(n),n}path(e,t){const n=this.gen.path(e,t);return this.draw(n),n}}const g_="http://www.w3.org/2000/svg";class m_{constructor(e,t){this.svg=e,this.gen=new f_(t)}draw(e){const t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,i=r.createElementNS(g_,"g"),o=e.options.fixedDecimalPlaceDigits;for(const a of t){let t=null;switch(a.type){case"path":t=r.createElementNS(g_,"path"),t.setAttribute("d",this.opsToPath(a,o)),t.setAttribute("stroke",n.stroke),t.setAttribute("stroke-width",n.strokeWidth+""),t.setAttribute("fill","none"),n.strokeLineDash&&t.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&t.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":t=r.createElementNS(g_,"path"),t.setAttribute("d",this.opsToPath(a,o)),t.setAttribute("stroke","none"),t.setAttribute("stroke-width","0"),t.setAttribute("fill",n.fill||""),"curve"!==e.shape&&"polygon"!==e.shape||t.setAttribute("fill-rule","evenodd");break;case"fillSketch":t=this.fillSketch(r,a,n)}t&&i.appendChild(t)}return i}fillSketch(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2);const i=e.createElementNS(g_,"path");return i.setAttribute("d",this.opsToPath(t,n.fixedDecimalPlaceDigits)),i.setAttribute("stroke",n.fill||""),i.setAttribute("stroke-width",r+""),i.setAttribute("fill","none"),n.fillLineDash&&i.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&i.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,t){return this.gen.opsToPath(e,t)}line(e,t,n,r,i){const o=this.gen.line(e,t,n,r,i);return this.draw(o)}rectangle(e,t,n,r,i){const o=this.gen.rectangle(e,t,n,r,i);return this.draw(o)}ellipse(e,t,n,r,i){const o=this.gen.ellipse(e,t,n,r,i);return this.draw(o)}circle(e,t,n,r){const i=this.gen.circle(e,t,n,r);return this.draw(i)}linearPath(e,t){const n=this.gen.linearPath(e,t);return this.draw(n)}polygon(e,t){const n=this.gen.polygon(e,t);return this.draw(n)}arc(e,t,n,r,i,o,a=!1,s){const l=this.gen.arc(e,t,n,r,i,o,a,s);return this.draw(l)}curve(e,t){const n=this.gen.curve(e,t);return this.draw(n)}path(e,t){const n=this.gen.path(e,t);return this.draw(n)}}var v_={canvas:(e,t)=>new p_(e,t),svg:(e,t)=>new m_(e,t),generator:e=>new f_(e),newSeed:()=>f_.newSeed()},y_="comm",b_="rule",x_="decl",w_=Math.abs,E_=String.fromCharCode;function T_(e){return e.trim()}function __(e,t,n){return e.replace(t,n)}function k_(e,t,n){return e.indexOf(t,n)}function A_(e,t){return 0|e.charCodeAt(t)}function S_(e,t,n){return e.slice(t,n)}function N_(e){return e.length}function M_(e,t){return t.push(e),e}var C_=1,I_=1,R_=0,L_=0,O_=0,D_="";function P_(e,t,n,r,i,o,a,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:C_,column:I_,length:a,return:"",siblings:s}}function B_(){return O_=L_>0?A_(D_,--L_):0,I_--,10===O_&&(I_=1,C_--),O_}function F_(){return O_=L_<R_?A_(D_,L_++):0,I_++,10===O_&&(I_=1,C_++),O_}function z_(){return A_(D_,L_)}function U_(){return L_}function G_(e,t){return S_(D_,e,t)}function V_(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function j_(e){return T_(G_(L_-1,Y_(91===e?e+2:40===e?e+1:e)))}function H_(e){for(;(O_=z_())&&O_<33;)F_();return V_(e)>2||V_(O_)>3?"":" "}function $_(e,t){for(;--t&&F_()&&!(O_<48||O_>102||O_>57&&O_<65||O_>70&&O_<97););return G_(e,U_()+(t<6&&32==z_()&&32==F_()))}function Y_(e){for(;F_();)switch(O_){case e:return L_;case 34:case 39:34!==e&&39!==e&&Y_(O_);break;case 40:41===e&&Y_(e);break;case 92:F_()}return L_}function q_(e,t){for(;F_()&&e+O_!==57&&(e+O_!==84||47!==z_()););return"/*"+G_(t,L_-1)+"*"+E_(47===e?e:F_())}function W_(e){for(;!V_(z_());)F_();return G_(e,L_)}function X_(e){return function(e){return D_="",e}(K_("",null,null,null,[""],e=function(e){return C_=I_=1,R_=N_(D_=e),L_=0,[]}(e),0,[0],e))}function K_(e,t,n,r,i,o,a,s,l){for(var u=0,c=0,h=a,d=0,f=0,p=0,g=1,m=1,v=1,y=0,b="",x=i,w=o,E=r,T=b;m;)switch(p=y,y=F_()){case 40:if(108!=p&&58==A_(T,h-1)){-1!=k_(T+=__(j_(y),"&","&\f"),"&\f",w_(u?s[u-1]:0))&&(v=-1);break}case 34:case 39:case 91:T+=j_(y);break;case 9:case 10:case 13:case 32:T+=H_(p);break;case 92:T+=$_(U_()-1,7);continue;case 47:switch(z_()){case 42:case 47:M_(Q_(q_(F_(),U_()),t,n,l),l),5!=V_(p||1)&&5!=V_(z_()||1)||!N_(T)||" "===S_(T,-1,void 0)||(T+=" ");break;default:T+="/"}break;case 123*g:s[u++]=N_(T)*v;case 125*g:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+c:-1==v&&(T=__(T,/\f/g,"")),f>0&&(N_(T)-h||0===g&&47===p)&&M_(f>32?J_(T+";",r,n,h-1,l):J_(__(T," ","")+";",r,n,h-2,l),l);break;case 59:T+=";";default:if(M_(E=Z_(T,t,n,u,c,i,s,b,x=[],w=[],h,o),o),123===y)if(0===c)K_(T,t,E,E,x,o,h,s,w);else{switch(d){case 99:if(110===A_(T,3))break;case 108:if(97===A_(T,2))break;default:c=0;case 100:case 109:case 115:}c?K_(e,E,E,r&&M_(Z_(e,E,E,0,0,i,s,b,i,x=[],h,w),w),i,w,h,s,r?x:w):K_(T,E,E,E,[""],w,0,s,w)}}u=c=f=0,g=v=1,b=T="",h=a;break;case 58:h=1+N_(T),f=p;default:if(g<1)if(123==y)--g;else if(125==y&&0==g++&&125==B_())continue;switch(T+=E_(y),y*g){case 38:v=c>0?1:(T+="\f",-1);break;case 44:s[u++]=(N_(T)-1)*v,v=1;break;case 64:45===z_()&&(T+=j_(F_())),d=z_(),c=h=N_(b=T+=W_(U_())),y++;break;case 45:45===p&&2==N_(T)&&(g=0)}}return o}function Z_(e,t,n,r,i,o,a,s,l,u,c,h){for(var d=i-1,f=0===i?o:[""],p=function(e){return e.length}(f),g=0,m=0,v=0;g<r;++g)for(var y=0,b=S_(e,d+1,d=w_(m=a[g])),x=e;y<p;++y)(x=T_(m>0?f[y]+" "+b:__(b,/&\f/g,f[y])))&&(l[v++]=x);return P_(e,t,n,0===i?b_:s,l,u,c,h)}function Q_(e,t,n,r){return P_(e,t,n,y_,E_(O_),S_(e,2,-2),0,r)}function J_(e,t,n,r,i){return P_(e,t,n,x_,S_(e,0,r),S_(e,r+1,-1),r,i)}function ek(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function tk(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case"@namespace":case x_:return e.return=e.return||e.value;case y_:return"";case"@keyframes":return e.return=e.value+"{"+ek(e.children,r)+"}";case b_:if(!N_(e.value=e.props.join(",")))return""}return N_(n=ek(e.children,r))?e.return=e.value+"{"+n+"}":""}var nk=Bx(Object.keys,Object),rk=Object.prototype.hasOwnProperty;function ik(e){if(!Ux(e))return nk(e);var t=[];for(var n in Object(e))rk.call(e,n)&&"constructor"!=n&&t.push(n);return t}var ok=lx(zb,"DataView"),ak=lx(zb,"Promise"),sk=lx(zb,"Set"),lk=lx(zb,"WeakMap"),uk="[object Map]",ck="[object Promise]",hk="[object Set]",dk="[object WeakMap]",fk="[object DataView]",pk=ex(ok),gk=ex(vx),mk=ex(ak),vk=ex(sk),yk=ex(lk),bk=qb;(ok&&bk(new ok(new ArrayBuffer(1)))!=fk||vx&&bk(new vx)!=uk||ak&&bk(ak.resolve())!=ck||sk&&bk(new sk)!=hk||lk&&bk(new lk)!=dk)&&(bk=function(e){var t=qb(e),n="[object Object]"==t?e.constructor:void 0,r=n?ex(n):"";if(r)switch(r){case pk:return fk;case gk:return uk;case mk:return ck;case vk:return hk;case yk:return dk}return t});var xk=Object.prototype.hasOwnProperty;function wk(e){if(null==e)return!0;if(Kx(e)&&(Wx(e)||"string"==typeof e||"function"==typeof e.splice||tw(e)||pw(e)||qx(e)))return!e.length;var t=bk(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Ux(e))return!ik(e).length;for(var n in e)if(xk.call(e,n))return!1;return!0}class Ek{constructor(e,t,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=n}static range(e,t){return t?e&&e.loc&&t.loc&&e.loc.lexer===t.loc.lexer?new Ek(e.loc.lexer,e.loc.start,t.loc.end):null:e&&e.loc}}class Tk{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new Tk(t,Ek.range(this,e))}}class _k{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n,r,i="KaTeX parse error: "+e,o=t&&t.loc;if(o&&o.start<=o.end){var a=o.lexer.input;n=o.start,r=o.end,n===a.length?i+=" at end of input: ":i+=" at position "+(n+1)+": ";var s=a.slice(n,r).replace(/[^]/g,"$&̲");i+=(n>15?"…"+a.slice(n-15,n):a.slice(0,n))+s+(r+15<a.length?a.slice(r,r+15)+"…":a.slice(r))}var l=new Error(i);return l.name="ParseError",l.__proto__=_k.prototype,l.position=n,null!=n&&null!=r&&(l.length=r-n),l.rawMessage=e,l}}_k.prototype.__proto__=Error.prototype;var kk=/([A-Z])/g,Ak={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Sk=/[&><"']/g;var Nk=function e(t){return"ordgroup"===t.type||"color"===t.type?1===t.body.length?e(t.body[0]):t:"font"===t.type?e(t.body):t},Mk={contains:function(e,t){return-1!==e.indexOf(t)},deflt:function(e,t){return void 0===e?t:e},escape:function(e){return String(e).replace(Sk,e=>Ak[e])},hyphenate:function(e){return e.replace(kk,"-$1").toLowerCase()},getBaseElem:Nk,isCharacterBox:function(e){var t=Nk(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type},protocolFromUrl:function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?":"!==t[2]?null:/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?t[1].toLowerCase():null:"_relative"}},Ck={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>"Infinity"===e?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function Ik(e){if(e.default)return e.default;var t=e.type,n=Array.isArray(t)?t[0]:t;if("string"!=typeof n)return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class Rk{constructor(e){for(var t in this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{},Ck)if(Ck.hasOwnProperty(t)){var n=Ck[t];this[t]=void 0!==e[t]?n.processor?n.processor(e[t]):e[t]:Ik(n)}}reportNonstrict(e,t,n){var r=this.strict;if("function"==typeof r&&(r=r(e,t,n)),r&&"ignore"!==r&&(!0===r||"error"===r))throw new _k("LaTeX-incompatible input and strict mode is set to 'error': "+t+" ["+e+"]",n)}useStrictBehavior(e,t,n){var r=this.strict;if("function"==typeof r)try{r=r(e,t,n)}catch(i){r="error"}return!(!r||"ignore"===r)&&(!0===r||"error"===r)}isTrusted(e){if(e.url&&!e.protocol){var t=Mk.protocolFromUrl(e.url);if(null==t)return!1;e.protocol=t}var n="function"==typeof this.trust?this.trust(e):this.trust;return Boolean(n)}}class Lk{constructor(e,t,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=n}sup(){return Ok[Dk[this.id]]}sub(){return Ok[Pk[this.id]]}fracNum(){return Ok[Bk[this.id]]}fracDen(){return Ok[Fk[this.id]]}cramp(){return Ok[zk[this.id]]}text(){return Ok[Uk[this.id]]}isTight(){return this.size>=2}}var Ok=[new Lk(0,0,!1),new Lk(1,0,!0),new Lk(2,1,!1),new Lk(3,1,!0),new Lk(4,2,!1),new Lk(5,2,!0),new Lk(6,3,!1),new Lk(7,3,!0)],Dk=[4,5,4,5,6,7,6,7],Pk=[5,5,5,5,7,7,7,7],Bk=[2,3,4,5,6,7,6,7],Fk=[3,3,5,5,7,7,7,7],zk=[1,1,3,3,5,5,7,7],Uk=[0,1,2,3,2,3,2,3],Gk={DISPLAY:Ok[0],TEXT:Ok[2],SCRIPT:Ok[4],SCRIPTSCRIPT:Ok[6]},Vk=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];var jk=[];function Hk(e){for(var t=0;t<jk.length;t+=2)if(e>=jk[t]&&e<=jk[t+1])return!0;return!1}Vk.forEach(e=>e.blocks.forEach(e=>jk.push(...e)));var $k=80,Yk={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"};class qk{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return Mk.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){return this.children.map(e=>e.toText()).join("")}}var Wk={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Xk={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Kk={"Å":"A","Ð":"D","Þ":"o","å":"a","ð":"d","þ":"o","А":"A","Б":"B","В":"B","Г":"F","Д":"A","Е":"E","Ж":"K","З":"3","И":"N","Й":"N","К":"K","Л":"N","М":"M","Н":"H","О":"O","П":"N","Р":"P","С":"C","Т":"T","У":"y","Ф":"O","Х":"X","Ц":"U","Ч":"h","Ш":"W","Щ":"W","Ъ":"B","Ы":"X","Ь":"B","Э":"3","Ю":"X","Я":"R","а":"a","б":"b","в":"a","г":"r","д":"y","е":"e","ж":"m","з":"e","и":"n","й":"n","к":"n","л":"n","м":"m","н":"n","о":"o","п":"n","р":"p","с":"c","т":"o","у":"y","ф":"b","х":"x","ц":"n","ч":"n","ш":"w","щ":"w","ъ":"a","ы":"m","ь":"a","э":"e","ю":"m","я":"r"};function Zk(e,t){Wk[e]=t}function Qk(e,t,n){if(!Wk[t])throw new Error("Font metrics not found for font: "+t+".");var r=e.charCodeAt(0),i=Wk[t][r];if(!i&&e[0]in Kk&&(r=Kk[e[0]].charCodeAt(0),i=Wk[t][r]),i||"text"!==n||Hk(r)&&(i=Wk[t][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var Jk={};var eA=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],tA=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],nA=function(e,t){return t.size<2?e:eA[e-1][t.size-1]};class rA{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||rA.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=tA[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return new rA(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:nA(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:tA[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=nA(rA.BASESIZE,e);return this.size===t&&this.textSize===rA.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==rA.BASESIZE?["sizing","reset-size"+this.size,"size"+rA.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=function(e){var t;if(!Jk[t=e>=5?0:e>=3?1:2]){var n=Jk[t]={cssEmPerMu:Xk.quad[t]/18};for(var r in Xk)Xk.hasOwnProperty(r)&&(n[r]=Xk[r][t])}return Jk[t]}(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}rA.BASESIZE=6;var iA={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},oA={ex:!0,em:!0,mu:!0},aA=function(e){return"string"!=typeof e&&(e=e.unit),e in iA||e in oA||"ex"===e},sA=function(e,t){var n;if(e.unit in iA)n=iA[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if("mu"===e.unit)n=t.fontMetrics().cssEmPerMu;else{var r;if(r=t.style.isTight()?t.havingStyle(t.style.text()):t,"ex"===e.unit)n=r.fontMetrics().xHeight;else{if("em"!==e.unit)throw new _k("Invalid unit: '"+e.unit+"'");n=r.fontMetrics().quad}r!==t&&(n*=r.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*n,t.maxSize)},lA=function(e){return+e.toFixed(4)+"em"},uA=function(e){return e.filter(e=>e).join(" ")},cA=function(e,t,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},t){t.style.isTight()&&this.classes.push("mtight");var r=t.getColor();r&&(this.style.color=r)}},hA=function(e){var t=document.createElement(e);for(var n in t.className=uA(this.classes),this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&t.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},dA=/[\s"'>/=\x00-\x1f]/,fA=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+Mk.escape(uA(this.classes))+'"');var n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=Mk.hyphenate(r)+":"+this.style[r]+";");for(var i in n&&(t+=' style="'+Mk.escape(n)+'"'),this.attributes)if(this.attributes.hasOwnProperty(i)){if(dA.test(i))throw new _k("Invalid attribute name '"+i+"'");t+=" "+i+'="'+Mk.escape(this.attributes[i])+'"'}t+=">";for(var o=0;o<this.children.length;o++)t+=this.children[o].toMarkup();return t+="</"+e+">"};class pA{constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,cA.call(this,e,n,r),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return Mk.contains(this.classes,e)}toNode(){return hA.call(this,"span")}toMarkup(){return fA.call(this,"span")}}class gA{constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,cA.call(this,t,r),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return Mk.contains(this.classes,e)}toNode(){return hA.call(this,"a")}toMarkup(){return fA.call(this,"a")}}class mA{constructor(e,t,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return Mk.contains(this.classes,e)}toNode(){var e=document.createElement("img");for(var t in e.src=this.src,e.alt=this.alt,e.className="mord",this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+Mk.escape(this.src)+'" alt="'+Mk.escape(this.alt)+'"',t="";for(var n in this.style)this.style.hasOwnProperty(n)&&(t+=Mk.hyphenate(n)+":"+this.style[n]+";");return t&&(e+=' style="'+Mk.escape(t)+'"'),e+="'/>"}}var vA={"î":"ı̂","ï":"ı̈","í":"ı́","ì":"ı̀"};class yA{constructor(e,t,n,r,i,o,a,s){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=n||0,this.italic=r||0,this.skew=i||0,this.width=o||0,this.classes=a||[],this.style=s||{},this.maxFontSize=0;var l=function(e){for(var t=0;t<Vk.length;t++)for(var n=Vk[t],r=0;r<n.blocks.length;r++){var i=n.blocks[r];if(e>=i[0]&&e<=i[1])return n.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=vA[this.text])}hasClass(e){return Mk.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;for(var n in this.italic>0&&((t=document.createElement("span")).style.marginRight=lA(this.italic)),this.classes.length>0&&((t=t||document.createElement("span")).className=uA(this.classes)),this.style)this.style.hasOwnProperty(n)&&((t=t||document.createElement("span")).style[n]=this.style[n]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=Mk.escape(uA(this.classes)),t+='"');var n="";for(var r in this.italic>0&&(n+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(r)&&(n+=Mk.hyphenate(r)+":"+this.style[r]+";");n&&(e=!0,t+=' style="'+Mk.escape(n)+'"');var i=Mk.escape(this.text);return e?(t+=">",t+=i,t+="</span>"):i}}class bA{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Mk.escape(this.attributes[t])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>"}}class xA{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",Yk[this.pathName]),e}toMarkup(){return this.alternate?'<path d="'+Mk.escape(this.alternate)+'"/>':'<path d="'+Mk.escape(Yk[this.pathName])+'"/>'}}class wA{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","line");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);return e}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Mk.escape(this.attributes[t])+'"');return e+="/>"}}function EA(e){if(e instanceof yA)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}var TA={bin:1,close:1,inner:1,open:1,punct:1,rel:1},_A={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},kA={math:{},text:{}};function AA(e,t,n,r,i,o){kA[e][i]={font:t,group:n,replace:r},o&&r&&(kA[e][r]=kA[e][i])}var SA="math",NA="text",MA="main",CA="ams",IA="accent-token",RA="bin",LA="close",OA="inner",DA="mathord",PA="op-token",BA="open",FA="punct",zA="rel",UA="spacing",GA="textord";AA(SA,MA,zA,"≡","\\equiv",!0),AA(SA,MA,zA,"≺","\\prec",!0),AA(SA,MA,zA,"≻","\\succ",!0),AA(SA,MA,zA,"∼","\\sim",!0),AA(SA,MA,zA,"⊥","\\perp"),AA(SA,MA,zA,"⪯","\\preceq",!0),AA(SA,MA,zA,"⪰","\\succeq",!0),AA(SA,MA,zA,"≃","\\simeq",!0),AA(SA,MA,zA,"∣","\\mid",!0),AA(SA,MA,zA,"≪","\\ll",!0),AA(SA,MA,zA,"≫","\\gg",!0),AA(SA,MA,zA,"≍","\\asymp",!0),AA(SA,MA,zA,"∥","\\parallel"),AA(SA,MA,zA,"⋈","\\bowtie",!0),AA(SA,MA,zA,"⌣","\\smile",!0),AA(SA,MA,zA,"⊑","\\sqsubseteq",!0),AA(SA,MA,zA,"⊒","\\sqsupseteq",!0),AA(SA,MA,zA,"≐","\\doteq",!0),AA(SA,MA,zA,"⌢","\\frown",!0),AA(SA,MA,zA,"∋","\\ni",!0),AA(SA,MA,zA,"∝","\\propto",!0),AA(SA,MA,zA,"⊢","\\vdash",!0),AA(SA,MA,zA,"⊣","\\dashv",!0),AA(SA,MA,zA,"∋","\\owns"),AA(SA,MA,FA,".","\\ldotp"),AA(SA,MA,FA,"⋅","\\cdotp"),AA(SA,MA,GA,"#","\\#"),AA(NA,MA,GA,"#","\\#"),AA(SA,MA,GA,"&","\\&"),AA(NA,MA,GA,"&","\\&"),AA(SA,MA,GA,"ℵ","\\aleph",!0),AA(SA,MA,GA,"∀","\\forall",!0),AA(SA,MA,GA,"ℏ","\\hbar",!0),AA(SA,MA,GA,"∃","\\exists",!0),AA(SA,MA,GA,"∇","\\nabla",!0),AA(SA,MA,GA,"♭","\\flat",!0),AA(SA,MA,GA,"ℓ","\\ell",!0),AA(SA,MA,GA,"♮","\\natural",!0),AA(SA,MA,GA,"♣","\\clubsuit",!0),AA(SA,MA,GA,"℘","\\wp",!0),AA(SA,MA,GA,"♯","\\sharp",!0),AA(SA,MA,GA,"♢","\\diamondsuit",!0),AA(SA,MA,GA,"ℜ","\\Re",!0),AA(SA,MA,GA,"♡","\\heartsuit",!0),AA(SA,MA,GA,"ℑ","\\Im",!0),AA(SA,MA,GA,"♠","\\spadesuit",!0),AA(SA,MA,GA,"§","\\S",!0),AA(NA,MA,GA,"§","\\S"),AA(SA,MA,GA,"¶","\\P",!0),AA(NA,MA,GA,"¶","\\P"),AA(SA,MA,GA,"†","\\dag"),AA(NA,MA,GA,"†","\\dag"),AA(NA,MA,GA,"†","\\textdagger"),AA(SA,MA,GA,"‡","\\ddag"),AA(NA,MA,GA,"‡","\\ddag"),AA(NA,MA,GA,"‡","\\textdaggerdbl"),AA(SA,MA,LA,"⎱","\\rmoustache",!0),AA(SA,MA,BA,"⎰","\\lmoustache",!0),AA(SA,MA,LA,"⟯","\\rgroup",!0),AA(SA,MA,BA,"⟮","\\lgroup",!0),AA(SA,MA,RA,"∓","\\mp",!0),AA(SA,MA,RA,"⊖","\\ominus",!0),AA(SA,MA,RA,"⊎","\\uplus",!0),AA(SA,MA,RA,"⊓","\\sqcap",!0),AA(SA,MA,RA,"∗","\\ast"),AA(SA,MA,RA,"⊔","\\sqcup",!0),AA(SA,MA,RA,"◯","\\bigcirc",!0),AA(SA,MA,RA,"∙","\\bullet",!0),AA(SA,MA,RA,"‡","\\ddagger"),AA(SA,MA,RA,"≀","\\wr",!0),AA(SA,MA,RA,"⨿","\\amalg"),AA(SA,MA,RA,"&","\\And"),AA(SA,MA,zA,"⟵","\\longleftarrow",!0),AA(SA,MA,zA,"⇐","\\Leftarrow",!0),AA(SA,MA,zA,"⟸","\\Longleftarrow",!0),AA(SA,MA,zA,"⟶","\\longrightarrow",!0),AA(SA,MA,zA,"⇒","\\Rightarrow",!0),AA(SA,MA,zA,"⟹","\\Longrightarrow",!0),AA(SA,MA,zA,"↔","\\leftrightarrow",!0),AA(SA,MA,zA,"⟷","\\longleftrightarrow",!0),AA(SA,MA,zA,"⇔","\\Leftrightarrow",!0),AA(SA,MA,zA,"⟺","\\Longleftrightarrow",!0),AA(SA,MA,zA,"↦","\\mapsto",!0),AA(SA,MA,zA,"⟼","\\longmapsto",!0),AA(SA,MA,zA,"↗","\\nearrow",!0),AA(SA,MA,zA,"↩","\\hookleftarrow",!0),AA(SA,MA,zA,"↪","\\hookrightarrow",!0),AA(SA,MA,zA,"↘","\\searrow",!0),AA(SA,MA,zA,"↼","\\leftharpoonup",!0),AA(SA,MA,zA,"⇀","\\rightharpoonup",!0),AA(SA,MA,zA,"↙","\\swarrow",!0),AA(SA,MA,zA,"↽","\\leftharpoondown",!0),AA(SA,MA,zA,"⇁","\\rightharpoondown",!0),AA(SA,MA,zA,"↖","\\nwarrow",!0),AA(SA,MA,zA,"⇌","\\rightleftharpoons",!0),AA(SA,CA,zA,"≮","\\nless",!0),AA(SA,CA,zA,"","\\@nleqslant"),AA(SA,CA,zA,"","\\@nleqq"),AA(SA,CA,zA,"⪇","\\lneq",!0),AA(SA,CA,zA,"≨","\\lneqq",!0),AA(SA,CA,zA,"","\\@lvertneqq"),AA(SA,CA,zA,"⋦","\\lnsim",!0),AA(SA,CA,zA,"⪉","\\lnapprox",!0),AA(SA,CA,zA,"⊀","\\nprec",!0),AA(SA,CA,zA,"⋠","\\npreceq",!0),AA(SA,CA,zA,"⋨","\\precnsim",!0),AA(SA,CA,zA,"⪹","\\precnapprox",!0),AA(SA,CA,zA,"≁","\\nsim",!0),AA(SA,CA,zA,"","\\@nshortmid"),AA(SA,CA,zA,"∤","\\nmid",!0),AA(SA,CA,zA,"⊬","\\nvdash",!0),AA(SA,CA,zA,"⊭","\\nvDash",!0),AA(SA,CA,zA,"⋪","\\ntriangleleft"),AA(SA,CA,zA,"⋬","\\ntrianglelefteq",!0),AA(SA,CA,zA,"⊊","\\subsetneq",!0),AA(SA,CA,zA,"","\\@varsubsetneq"),AA(SA,CA,zA,"⫋","\\subsetneqq",!0),AA(SA,CA,zA,"","\\@varsubsetneqq"),AA(SA,CA,zA,"≯","\\ngtr",!0),AA(SA,CA,zA,"","\\@ngeqslant"),AA(SA,CA,zA,"","\\@ngeqq"),AA(SA,CA,zA,"⪈","\\gneq",!0),AA(SA,CA,zA,"≩","\\gneqq",!0),AA(SA,CA,zA,"","\\@gvertneqq"),AA(SA,CA,zA,"⋧","\\gnsim",!0),AA(SA,CA,zA,"⪊","\\gnapprox",!0),AA(SA,CA,zA,"⊁","\\nsucc",!0),AA(SA,CA,zA,"⋡","\\nsucceq",!0),AA(SA,CA,zA,"⋩","\\succnsim",!0),AA(SA,CA,zA,"⪺","\\succnapprox",!0),AA(SA,CA,zA,"≆","\\ncong",!0),AA(SA,CA,zA,"","\\@nshortparallel"),AA(SA,CA,zA,"∦","\\nparallel",!0),AA(SA,CA,zA,"⊯","\\nVDash",!0),AA(SA,CA,zA,"⋫","\\ntriangleright"),AA(SA,CA,zA,"⋭","\\ntrianglerighteq",!0),AA(SA,CA,zA,"","\\@nsupseteqq"),AA(SA,CA,zA,"⊋","\\supsetneq",!0),AA(SA,CA,zA,"","\\@varsupsetneq"),AA(SA,CA,zA,"⫌","\\supsetneqq",!0),AA(SA,CA,zA,"","\\@varsupsetneqq"),AA(SA,CA,zA,"⊮","\\nVdash",!0),AA(SA,CA,zA,"⪵","\\precneqq",!0),AA(SA,CA,zA,"⪶","\\succneqq",!0),AA(SA,CA,zA,"","\\@nsubseteqq"),AA(SA,CA,RA,"⊴","\\unlhd"),AA(SA,CA,RA,"⊵","\\unrhd"),AA(SA,CA,zA,"↚","\\nleftarrow",!0),AA(SA,CA,zA,"↛","\\nrightarrow",!0),AA(SA,CA,zA,"⇍","\\nLeftarrow",!0),AA(SA,CA,zA,"⇏","\\nRightarrow",!0),AA(SA,CA,zA,"↮","\\nleftrightarrow",!0),AA(SA,CA,zA,"⇎","\\nLeftrightarrow",!0),AA(SA,CA,zA,"△","\\vartriangle"),AA(SA,CA,GA,"ℏ","\\hslash"),AA(SA,CA,GA,"▽","\\triangledown"),AA(SA,CA,GA,"◊","\\lozenge"),AA(SA,CA,GA,"Ⓢ","\\circledS"),AA(SA,CA,GA,"®","\\circledR"),AA(NA,CA,GA,"®","\\circledR"),AA(SA,CA,GA,"∡","\\measuredangle",!0),AA(SA,CA,GA,"∄","\\nexists"),AA(SA,CA,GA,"℧","\\mho"),AA(SA,CA,GA,"Ⅎ","\\Finv",!0),AA(SA,CA,GA,"⅁","\\Game",!0),AA(SA,CA,GA,"‵","\\backprime"),AA(SA,CA,GA,"▲","\\blacktriangle"),AA(SA,CA,GA,"▼","\\blacktriangledown"),AA(SA,CA,GA,"■","\\blacksquare"),AA(SA,CA,GA,"⧫","\\blacklozenge"),AA(SA,CA,GA,"★","\\bigstar"),AA(SA,CA,GA,"∢","\\sphericalangle",!0),AA(SA,CA,GA,"∁","\\complement",!0),AA(SA,CA,GA,"ð","\\eth",!0),AA(NA,MA,GA,"ð","ð"),AA(SA,CA,GA,"╱","\\diagup"),AA(SA,CA,GA,"╲","\\diagdown"),AA(SA,CA,GA,"□","\\square"),AA(SA,CA,GA,"□","\\Box"),AA(SA,CA,GA,"◊","\\Diamond"),AA(SA,CA,GA,"¥","\\yen",!0),AA(NA,CA,GA,"¥","\\yen",!0),AA(SA,CA,GA,"✓","\\checkmark",!0),AA(NA,CA,GA,"✓","\\checkmark"),AA(SA,CA,GA,"ℶ","\\beth",!0),AA(SA,CA,GA,"ℸ","\\daleth",!0),AA(SA,CA,GA,"ℷ","\\gimel",!0),AA(SA,CA,GA,"ϝ","\\digamma",!0),AA(SA,CA,GA,"ϰ","\\varkappa"),AA(SA,CA,BA,"┌","\\@ulcorner",!0),AA(SA,CA,LA,"┐","\\@urcorner",!0),AA(SA,CA,BA,"└","\\@llcorner",!0),AA(SA,CA,LA,"┘","\\@lrcorner",!0),AA(SA,CA,zA,"≦","\\leqq",!0),AA(SA,CA,zA,"⩽","\\leqslant",!0),AA(SA,CA,zA,"⪕","\\eqslantless",!0),AA(SA,CA,zA,"≲","\\lesssim",!0),AA(SA,CA,zA,"⪅","\\lessapprox",!0),AA(SA,CA,zA,"≊","\\approxeq",!0),AA(SA,CA,RA,"⋖","\\lessdot"),AA(SA,CA,zA,"⋘","\\lll",!0),AA(SA,CA,zA,"≶","\\lessgtr",!0),AA(SA,CA,zA,"⋚","\\lesseqgtr",!0),AA(SA,CA,zA,"⪋","\\lesseqqgtr",!0),AA(SA,CA,zA,"≑","\\doteqdot"),AA(SA,CA,zA,"≓","\\risingdotseq",!0),AA(SA,CA,zA,"≒","\\fallingdotseq",!0),AA(SA,CA,zA,"∽","\\backsim",!0),AA(SA,CA,zA,"⋍","\\backsimeq",!0),AA(SA,CA,zA,"⫅","\\subseteqq",!0),AA(SA,CA,zA,"⋐","\\Subset",!0),AA(SA,CA,zA,"⊏","\\sqsubset",!0),AA(SA,CA,zA,"≼","\\preccurlyeq",!0),AA(SA,CA,zA,"⋞","\\curlyeqprec",!0),AA(SA,CA,zA,"≾","\\precsim",!0),AA(SA,CA,zA,"⪷","\\precapprox",!0),AA(SA,CA,zA,"⊲","\\vartriangleleft"),AA(SA,CA,zA,"⊴","\\trianglelefteq"),AA(SA,CA,zA,"⊨","\\vDash",!0),AA(SA,CA,zA,"⊪","\\Vvdash",!0),AA(SA,CA,zA,"⌣","\\smallsmile"),AA(SA,CA,zA,"⌢","\\smallfrown"),AA(SA,CA,zA,"≏","\\bumpeq",!0),AA(SA,CA,zA,"≎","\\Bumpeq",!0),AA(SA,CA,zA,"≧","\\geqq",!0),AA(SA,CA,zA,"⩾","\\geqslant",!0),AA(SA,CA,zA,"⪖","\\eqslantgtr",!0),AA(SA,CA,zA,"≳","\\gtrsim",!0),AA(SA,CA,zA,"⪆","\\gtrapprox",!0),AA(SA,CA,RA,"⋗","\\gtrdot"),AA(SA,CA,zA,"⋙","\\ggg",!0),AA(SA,CA,zA,"≷","\\gtrless",!0),AA(SA,CA,zA,"⋛","\\gtreqless",!0),AA(SA,CA,zA,"⪌","\\gtreqqless",!0),AA(SA,CA,zA,"≖","\\eqcirc",!0),AA(SA,CA,zA,"≗","\\circeq",!0),AA(SA,CA,zA,"≜","\\triangleq",!0),AA(SA,CA,zA,"∼","\\thicksim"),AA(SA,CA,zA,"≈","\\thickapprox"),AA(SA,CA,zA,"⫆","\\supseteqq",!0),AA(SA,CA,zA,"⋑","\\Supset",!0),AA(SA,CA,zA,"⊐","\\sqsupset",!0),AA(SA,CA,zA,"≽","\\succcurlyeq",!0),AA(SA,CA,zA,"⋟","\\curlyeqsucc",!0),AA(SA,CA,zA,"≿","\\succsim",!0),AA(SA,CA,zA,"⪸","\\succapprox",!0),AA(SA,CA,zA,"⊳","\\vartriangleright"),AA(SA,CA,zA,"⊵","\\trianglerighteq"),AA(SA,CA,zA,"⊩","\\Vdash",!0),AA(SA,CA,zA,"∣","\\shortmid"),AA(SA,CA,zA,"∥","\\shortparallel"),AA(SA,CA,zA,"≬","\\between",!0),AA(SA,CA,zA,"⋔","\\pitchfork",!0),AA(SA,CA,zA,"∝","\\varpropto"),AA(SA,CA,zA,"◀","\\blacktriangleleft"),AA(SA,CA,zA,"∴","\\therefore",!0),AA(SA,CA,zA,"∍","\\backepsilon"),AA(SA,CA,zA,"▶","\\blacktriangleright"),AA(SA,CA,zA,"∵","\\because",!0),AA(SA,CA,zA,"⋘","\\llless"),AA(SA,CA,zA,"⋙","\\gggtr"),AA(SA,CA,RA,"⊲","\\lhd"),AA(SA,CA,RA,"⊳","\\rhd"),AA(SA,CA,zA,"≂","\\eqsim",!0),AA(SA,MA,zA,"⋈","\\Join"),AA(SA,CA,zA,"≑","\\Doteq",!0),AA(SA,CA,RA,"∔","\\dotplus",!0),AA(SA,CA,RA,"∖","\\smallsetminus"),AA(SA,CA,RA,"⋒","\\Cap",!0),AA(SA,CA,RA,"⋓","\\Cup",!0),AA(SA,CA,RA,"⩞","\\doublebarwedge",!0),AA(SA,CA,RA,"⊟","\\boxminus",!0),AA(SA,CA,RA,"⊞","\\boxplus",!0),AA(SA,CA,RA,"⋇","\\divideontimes",!0),AA(SA,CA,RA,"⋉","\\ltimes",!0),AA(SA,CA,RA,"⋊","\\rtimes",!0),AA(SA,CA,RA,"⋋","\\leftthreetimes",!0),AA(SA,CA,RA,"⋌","\\rightthreetimes",!0),AA(SA,CA,RA,"⋏","\\curlywedge",!0),AA(SA,CA,RA,"⋎","\\curlyvee",!0),AA(SA,CA,RA,"⊝","\\circleddash",!0),AA(SA,CA,RA,"⊛","\\circledast",!0),AA(SA,CA,RA,"⋅","\\centerdot"),AA(SA,CA,RA,"⊺","\\intercal",!0),AA(SA,CA,RA,"⋒","\\doublecap"),AA(SA,CA,RA,"⋓","\\doublecup"),AA(SA,CA,RA,"⊠","\\boxtimes",!0),AA(SA,CA,zA,"⇢","\\dashrightarrow",!0),AA(SA,CA,zA,"⇠","\\dashleftarrow",!0),AA(SA,CA,zA,"⇇","\\leftleftarrows",!0),AA(SA,CA,zA,"⇆","\\leftrightarrows",!0),AA(SA,CA,zA,"⇚","\\Lleftarrow",!0),AA(SA,CA,zA,"↞","\\twoheadleftarrow",!0),AA(SA,CA,zA,"↢","\\leftarrowtail",!0),AA(SA,CA,zA,"↫","\\looparrowleft",!0),AA(SA,CA,zA,"⇋","\\leftrightharpoons",!0),AA(SA,CA,zA,"↶","\\curvearrowleft",!0),AA(SA,CA,zA,"↺","\\circlearrowleft",!0),AA(SA,CA,zA,"↰","\\Lsh",!0),AA(SA,CA,zA,"⇈","\\upuparrows",!0),AA(SA,CA,zA,"↿","\\upharpoonleft",!0),AA(SA,CA,zA,"⇃","\\downharpoonleft",!0),AA(SA,MA,zA,"⊶","\\origof",!0),AA(SA,MA,zA,"⊷","\\imageof",!0),AA(SA,CA,zA,"⊸","\\multimap",!0),AA(SA,CA,zA,"↭","\\leftrightsquigarrow",!0),AA(SA,CA,zA,"⇉","\\rightrightarrows",!0),AA(SA,CA,zA,"⇄","\\rightleftarrows",!0),AA(SA,CA,zA,"↠","\\twoheadrightarrow",!0),AA(SA,CA,zA,"↣","\\rightarrowtail",!0),AA(SA,CA,zA,"↬","\\looparrowright",!0),AA(SA,CA,zA,"↷","\\curvearrowright",!0),AA(SA,CA,zA,"↻","\\circlearrowright",!0),AA(SA,CA,zA,"↱","\\Rsh",!0),AA(SA,CA,zA,"⇊","\\downdownarrows",!0),AA(SA,CA,zA,"↾","\\upharpoonright",!0),AA(SA,CA,zA,"⇂","\\downharpoonright",!0),AA(SA,CA,zA,"⇝","\\rightsquigarrow",!0),AA(SA,CA,zA,"⇝","\\leadsto"),AA(SA,CA,zA,"⇛","\\Rrightarrow",!0),AA(SA,CA,zA,"↾","\\restriction"),AA(SA,MA,GA,"‘","`"),AA(SA,MA,GA,"$","\\$"),AA(NA,MA,GA,"$","\\$"),AA(NA,MA,GA,"$","\\textdollar"),AA(SA,MA,GA,"%","\\%"),AA(NA,MA,GA,"%","\\%"),AA(SA,MA,GA,"_","\\_"),AA(NA,MA,GA,"_","\\_"),AA(NA,MA,GA,"_","\\textunderscore"),AA(SA,MA,GA,"∠","\\angle",!0),AA(SA,MA,GA,"∞","\\infty",!0),AA(SA,MA,GA,"′","\\prime"),AA(SA,MA,GA,"△","\\triangle"),AA(SA,MA,GA,"Γ","\\Gamma",!0),AA(SA,MA,GA,"Δ","\\Delta",!0),AA(SA,MA,GA,"Θ","\\Theta",!0),AA(SA,MA,GA,"Λ","\\Lambda",!0),AA(SA,MA,GA,"Ξ","\\Xi",!0),AA(SA,MA,GA,"Π","\\Pi",!0),AA(SA,MA,GA,"Σ","\\Sigma",!0),AA(SA,MA,GA,"Υ","\\Upsilon",!0),AA(SA,MA,GA,"Φ","\\Phi",!0),AA(SA,MA,GA,"Ψ","\\Psi",!0),AA(SA,MA,GA,"Ω","\\Omega",!0),AA(SA,MA,GA,"A","Α"),AA(SA,MA,GA,"B","Β"),AA(SA,MA,GA,"E","Ε"),AA(SA,MA,GA,"Z","Ζ"),AA(SA,MA,GA,"H","Η"),AA(SA,MA,GA,"I","Ι"),AA(SA,MA,GA,"K","Κ"),AA(SA,MA,GA,"M","Μ"),AA(SA,MA,GA,"N","Ν"),AA(SA,MA,GA,"O","Ο"),AA(SA,MA,GA,"P","Ρ"),AA(SA,MA,GA,"T","Τ"),AA(SA,MA,GA,"X","Χ"),AA(SA,MA,GA,"¬","\\neg",!0),AA(SA,MA,GA,"¬","\\lnot"),AA(SA,MA,GA,"⊤","\\top"),AA(SA,MA,GA,"⊥","\\bot"),AA(SA,MA,GA,"∅","\\emptyset"),AA(SA,CA,GA,"∅","\\varnothing"),AA(SA,MA,DA,"α","\\alpha",!0),AA(SA,MA,DA,"β","\\beta",!0),AA(SA,MA,DA,"γ","\\gamma",!0),AA(SA,MA,DA,"δ","\\delta",!0),AA(SA,MA,DA,"ϵ","\\epsilon",!0),AA(SA,MA,DA,"ζ","\\zeta",!0),AA(SA,MA,DA,"η","\\eta",!0),AA(SA,MA,DA,"θ","\\theta",!0),AA(SA,MA,DA,"ι","\\iota",!0),AA(SA,MA,DA,"κ","\\kappa",!0),AA(SA,MA,DA,"λ","\\lambda",!0),AA(SA,MA,DA,"μ","\\mu",!0),AA(SA,MA,DA,"ν","\\nu",!0),AA(SA,MA,DA,"ξ","\\xi",!0),AA(SA,MA,DA,"ο","\\omicron",!0),AA(SA,MA,DA,"π","\\pi",!0),AA(SA,MA,DA,"ρ","\\rho",!0),AA(SA,MA,DA,"σ","\\sigma",!0),AA(SA,MA,DA,"τ","\\tau",!0),AA(SA,MA,DA,"υ","\\upsilon",!0),AA(SA,MA,DA,"ϕ","\\phi",!0),AA(SA,MA,DA,"χ","\\chi",!0),AA(SA,MA,DA,"ψ","\\psi",!0),AA(SA,MA,DA,"ω","\\omega",!0),AA(SA,MA,DA,"ε","\\varepsilon",!0),AA(SA,MA,DA,"ϑ","\\vartheta",!0),AA(SA,MA,DA,"ϖ","\\varpi",!0),AA(SA,MA,DA,"ϱ","\\varrho",!0),AA(SA,MA,DA,"ς","\\varsigma",!0),AA(SA,MA,DA,"φ","\\varphi",!0),AA(SA,MA,RA,"∗","*",!0),AA(SA,MA,RA,"+","+"),AA(SA,MA,RA,"−","-",!0),AA(SA,MA,RA,"⋅","\\cdot",!0),AA(SA,MA,RA,"∘","\\circ",!0),AA(SA,MA,RA,"÷","\\div",!0),AA(SA,MA,RA,"±","\\pm",!0),AA(SA,MA,RA,"×","\\times",!0),AA(SA,MA,RA,"∩","\\cap",!0),AA(SA,MA,RA,"∪","\\cup",!0),AA(SA,MA,RA,"∖","\\setminus",!0),AA(SA,MA,RA,"∧","\\land"),AA(SA,MA,RA,"∨","\\lor"),AA(SA,MA,RA,"∧","\\wedge",!0),AA(SA,MA,RA,"∨","\\vee",!0),AA(SA,MA,GA,"√","\\surd"),AA(SA,MA,BA,"⟨","\\langle",!0),AA(SA,MA,BA,"∣","\\lvert"),AA(SA,MA,BA,"∥","\\lVert"),AA(SA,MA,LA,"?","?"),AA(SA,MA,LA,"!","!"),AA(SA,MA,LA,"⟩","\\rangle",!0),AA(SA,MA,LA,"∣","\\rvert"),AA(SA,MA,LA,"∥","\\rVert"),AA(SA,MA,zA,"=","="),AA(SA,MA,zA,":",":"),AA(SA,MA,zA,"≈","\\approx",!0),AA(SA,MA,zA,"≅","\\cong",!0),AA(SA,MA,zA,"≥","\\ge"),AA(SA,MA,zA,"≥","\\geq",!0),AA(SA,MA,zA,"←","\\gets"),AA(SA,MA,zA,">","\\gt",!0),AA(SA,MA,zA,"∈","\\in",!0),AA(SA,MA,zA,"","\\@not"),AA(SA,MA,zA,"⊂","\\subset",!0),AA(SA,MA,zA,"⊃","\\supset",!0),AA(SA,MA,zA,"⊆","\\subseteq",!0),AA(SA,MA,zA,"⊇","\\supseteq",!0),AA(SA,CA,zA,"⊈","\\nsubseteq",!0),AA(SA,CA,zA,"⊉","\\nsupseteq",!0),AA(SA,MA,zA,"⊨","\\models"),AA(SA,MA,zA,"←","\\leftarrow",!0),AA(SA,MA,zA,"≤","\\le"),AA(SA,MA,zA,"≤","\\leq",!0),AA(SA,MA,zA,"<","\\lt",!0),AA(SA,MA,zA,"→","\\rightarrow",!0),AA(SA,MA,zA,"→","\\to"),AA(SA,CA,zA,"≱","\\ngeq",!0),AA(SA,CA,zA,"≰","\\nleq",!0),AA(SA,MA,UA," ","\\ "),AA(SA,MA,UA," ","\\space"),AA(SA,MA,UA," ","\\nobreakspace"),AA(NA,MA,UA," ","\\ "),AA(NA,MA,UA," "," "),AA(NA,MA,UA," ","\\space"),AA(NA,MA,UA," ","\\nobreakspace"),AA(SA,MA,UA,null,"\\nobreak"),AA(SA,MA,UA,null,"\\allowbreak"),AA(SA,MA,FA,",",","),AA(SA,MA,FA,";",";"),AA(SA,CA,RA,"⊼","\\barwedge",!0),AA(SA,CA,RA,"⊻","\\veebar",!0),AA(SA,MA,RA,"⊙","\\odot",!0),AA(SA,MA,RA,"⊕","\\oplus",!0),AA(SA,MA,RA,"⊗","\\otimes",!0),AA(SA,MA,GA,"∂","\\partial",!0),AA(SA,MA,RA,"⊘","\\oslash",!0),AA(SA,CA,RA,"⊚","\\circledcirc",!0),AA(SA,CA,RA,"⊡","\\boxdot",!0),AA(SA,MA,RA,"△","\\bigtriangleup"),AA(SA,MA,RA,"▽","\\bigtriangledown"),AA(SA,MA,RA,"†","\\dagger"),AA(SA,MA,RA,"⋄","\\diamond"),AA(SA,MA,RA,"⋆","\\star"),AA(SA,MA,RA,"◃","\\triangleleft"),AA(SA,MA,RA,"▹","\\triangleright"),AA(SA,MA,BA,"{","\\{"),AA(NA,MA,GA,"{","\\{"),AA(NA,MA,GA,"{","\\textbraceleft"),AA(SA,MA,LA,"}","\\}"),AA(NA,MA,GA,"}","\\}"),AA(NA,MA,GA,"}","\\textbraceright"),AA(SA,MA,BA,"{","\\lbrace"),AA(SA,MA,LA,"}","\\rbrace"),AA(SA,MA,BA,"[","\\lbrack",!0),AA(NA,MA,GA,"[","\\lbrack",!0),AA(SA,MA,LA,"]","\\rbrack",!0),AA(NA,MA,GA,"]","\\rbrack",!0),AA(SA,MA,BA,"(","\\lparen",!0),AA(SA,MA,LA,")","\\rparen",!0),AA(NA,MA,GA,"<","\\textless",!0),AA(NA,MA,GA,">","\\textgreater",!0),AA(SA,MA,BA,"⌊","\\lfloor",!0),AA(SA,MA,LA,"⌋","\\rfloor",!0),AA(SA,MA,BA,"⌈","\\lceil",!0),AA(SA,MA,LA,"⌉","\\rceil",!0),AA(SA,MA,GA,"\\","\\backslash"),AA(SA,MA,GA,"∣","|"),AA(SA,MA,GA,"∣","\\vert"),AA(NA,MA,GA,"|","\\textbar",!0),AA(SA,MA,GA,"∥","\\|"),AA(SA,MA,GA,"∥","\\Vert"),AA(NA,MA,GA,"∥","\\textbardbl"),AA(NA,MA,GA,"~","\\textasciitilde"),AA(NA,MA,GA,"\\","\\textbackslash"),AA(NA,MA,GA,"^","\\textasciicircum"),AA(SA,MA,zA,"↑","\\uparrow",!0),AA(SA,MA,zA,"⇑","\\Uparrow",!0),AA(SA,MA,zA,"↓","\\downarrow",!0),AA(SA,MA,zA,"⇓","\\Downarrow",!0),AA(SA,MA,zA,"↕","\\updownarrow",!0),AA(SA,MA,zA,"⇕","\\Updownarrow",!0),AA(SA,MA,PA,"∐","\\coprod"),AA(SA,MA,PA,"⋁","\\bigvee"),AA(SA,MA,PA,"⋀","\\bigwedge"),AA(SA,MA,PA,"⨄","\\biguplus"),AA(SA,MA,PA,"⋂","\\bigcap"),AA(SA,MA,PA,"⋃","\\bigcup"),AA(SA,MA,PA,"∫","\\int"),AA(SA,MA,PA,"∫","\\intop"),AA(SA,MA,PA,"∬","\\iint"),AA(SA,MA,PA,"∭","\\iiint"),AA(SA,MA,PA,"∏","\\prod"),AA(SA,MA,PA,"∑","\\sum"),AA(SA,MA,PA,"⨂","\\bigotimes"),AA(SA,MA,PA,"⨁","\\bigoplus"),AA(SA,MA,PA,"⨀","\\bigodot"),AA(SA,MA,PA,"∮","\\oint"),AA(SA,MA,PA,"∯","\\oiint"),AA(SA,MA,PA,"∰","\\oiiint"),AA(SA,MA,PA,"⨆","\\bigsqcup"),AA(SA,MA,PA,"∫","\\smallint"),AA(NA,MA,OA,"…","\\textellipsis"),AA(SA,MA,OA,"…","\\mathellipsis"),AA(NA,MA,OA,"…","\\ldots",!0),AA(SA,MA,OA,"…","\\ldots",!0),AA(SA,MA,OA,"⋯","\\@cdots",!0),AA(SA,MA,OA,"⋱","\\ddots",!0),AA(SA,MA,GA,"⋮","\\varvdots"),AA(NA,MA,GA,"⋮","\\varvdots"),AA(SA,MA,IA,"ˊ","\\acute"),AA(SA,MA,IA,"ˋ","\\grave"),AA(SA,MA,IA,"¨","\\ddot"),AA(SA,MA,IA,"~","\\tilde"),AA(SA,MA,IA,"ˉ","\\bar"),AA(SA,MA,IA,"˘","\\breve"),AA(SA,MA,IA,"ˇ","\\check"),AA(SA,MA,IA,"^","\\hat"),AA(SA,MA,IA,"⃗","\\vec"),AA(SA,MA,IA,"˙","\\dot"),AA(SA,MA,IA,"˚","\\mathring"),AA(SA,MA,DA,"","\\@imath"),AA(SA,MA,DA,"","\\@jmath"),AA(SA,MA,GA,"ı","ı"),AA(SA,MA,GA,"ȷ","ȷ"),AA(NA,MA,GA,"ı","\\i",!0),AA(NA,MA,GA,"ȷ","\\j",!0),AA(NA,MA,GA,"ß","\\ss",!0),AA(NA,MA,GA,"æ","\\ae",!0),AA(NA,MA,GA,"œ","\\oe",!0),AA(NA,MA,GA,"ø","\\o",!0),AA(NA,MA,GA,"Æ","\\AE",!0),AA(NA,MA,GA,"Œ","\\OE",!0),AA(NA,MA,GA,"Ø","\\O",!0),AA(NA,MA,IA,"ˊ","\\'"),AA(NA,MA,IA,"ˋ","\\`"),AA(NA,MA,IA,"ˆ","\\^"),AA(NA,MA,IA,"˜","\\~"),AA(NA,MA,IA,"ˉ","\\="),AA(NA,MA,IA,"˘","\\u"),AA(NA,MA,IA,"˙","\\."),AA(NA,MA,IA,"¸","\\c"),AA(NA,MA,IA,"˚","\\r"),AA(NA,MA,IA,"ˇ","\\v"),AA(NA,MA,IA,"¨",'\\"'),AA(NA,MA,IA,"˝","\\H"),AA(NA,MA,IA,"◯","\\textcircled");var VA={"--":!0,"---":!0,"``":!0,"''":!0};AA(NA,MA,GA,"–","--",!0),AA(NA,MA,GA,"–","\\textendash"),AA(NA,MA,GA,"—","---",!0),AA(NA,MA,GA,"—","\\textemdash"),AA(NA,MA,GA,"‘","`",!0),AA(NA,MA,GA,"‘","\\textquoteleft"),AA(NA,MA,GA,"’","'",!0),AA(NA,MA,GA,"’","\\textquoteright"),AA(NA,MA,GA,"“","``",!0),AA(NA,MA,GA,"“","\\textquotedblleft"),AA(NA,MA,GA,"”","''",!0),AA(NA,MA,GA,"”","\\textquotedblright"),AA(SA,MA,GA,"°","\\degree",!0),AA(NA,MA,GA,"°","\\degree"),AA(NA,MA,GA,"°","\\textdegree",!0),AA(SA,MA,GA,"£","\\pounds"),AA(SA,MA,GA,"£","\\mathsterling",!0),AA(NA,MA,GA,"£","\\pounds"),AA(NA,MA,GA,"£","\\textsterling",!0),AA(SA,CA,GA,"✠","\\maltese"),AA(NA,CA,GA,"✠","\\maltese");for(var jA='0123456789/@."',HA=0;HA<14;HA++){var $A=jA.charAt(HA);AA(SA,MA,GA,$A,$A)}for(var YA='0123456789!@*()-=+";:?/.,',qA=0;qA<25;qA++){var WA=YA.charAt(qA);AA(NA,MA,GA,WA,WA)}for(var XA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",KA=0;KA<52;KA++){var ZA=XA.charAt(KA);AA(SA,MA,DA,ZA,ZA),AA(NA,MA,GA,ZA,ZA)}AA(SA,CA,GA,"C","ℂ"),AA(NA,CA,GA,"C","ℂ"),AA(SA,CA,GA,"H","ℍ"),AA(NA,CA,GA,"H","ℍ"),AA(SA,CA,GA,"N","ℕ"),AA(NA,CA,GA,"N","ℕ"),AA(SA,CA,GA,"P","ℙ"),AA(NA,CA,GA,"P","ℙ"),AA(SA,CA,GA,"Q","ℚ"),AA(NA,CA,GA,"Q","ℚ"),AA(SA,CA,GA,"R","ℝ"),AA(NA,CA,GA,"R","ℝ"),AA(SA,CA,GA,"Z","ℤ"),AA(NA,CA,GA,"Z","ℤ"),AA(SA,MA,DA,"h","ℎ"),AA(NA,MA,DA,"h","ℎ");for(var QA="",JA=0;JA<52;JA++){var eS=XA.charAt(JA);AA(SA,MA,DA,eS,QA=String.fromCharCode(55349,56320+JA)),AA(NA,MA,GA,eS,QA),AA(SA,MA,DA,eS,QA=String.fromCharCode(55349,56372+JA)),AA(NA,MA,GA,eS,QA),AA(SA,MA,DA,eS,QA=String.fromCharCode(55349,56424+JA)),AA(NA,MA,GA,eS,QA),AA(SA,MA,DA,eS,QA=String.fromCharCode(55349,56580+JA)),AA(NA,MA,GA,eS,QA),AA(SA,MA,DA,eS,QA=String.fromCharCode(55349,56684+JA)),AA(NA,MA,GA,eS,QA),AA(SA,MA,DA,eS,QA=String.fromCharCode(55349,56736+JA)),AA(NA,MA,GA,eS,QA),AA(SA,MA,DA,eS,QA=String.fromCharCode(55349,56788+JA)),AA(NA,MA,GA,eS,QA),AA(SA,MA,DA,eS,QA=String.fromCharCode(55349,56840+JA)),AA(NA,MA,GA,eS,QA),AA(SA,MA,DA,eS,QA=String.fromCharCode(55349,56944+JA)),AA(NA,MA,GA,eS,QA),JA<26&&(AA(SA,MA,DA,eS,QA=String.fromCharCode(55349,56632+JA)),AA(NA,MA,GA,eS,QA),AA(SA,MA,DA,eS,QA=String.fromCharCode(55349,56476+JA)),AA(NA,MA,GA,eS,QA))}AA(SA,MA,DA,"k",QA=String.fromCharCode(55349,56668)),AA(NA,MA,GA,"k",QA);for(var tS=0;tS<10;tS++){var nS=tS.toString();AA(SA,MA,DA,nS,QA=String.fromCharCode(55349,57294+tS)),AA(NA,MA,GA,nS,QA),AA(SA,MA,DA,nS,QA=String.fromCharCode(55349,57314+tS)),AA(NA,MA,GA,nS,QA),AA(SA,MA,DA,nS,QA=String.fromCharCode(55349,57324+tS)),AA(NA,MA,GA,nS,QA),AA(SA,MA,DA,nS,QA=String.fromCharCode(55349,57334+tS)),AA(NA,MA,GA,nS,QA)}for(var rS="ÐÞþ",iS=0;iS<3;iS++){var oS=rS.charAt(iS);AA(SA,MA,DA,oS,oS),AA(NA,MA,GA,oS,oS)}var aS=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],sS=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],lS=function(e,t,n){return kA[n][e]&&kA[n][e].replace&&(e=kA[n][e].replace),{value:e,metrics:Qk(e,t,n)}},uS=function(e,t,n,r,i){var o,a=lS(e,t,n),s=a.metrics;if(e=a.value,s){var l=s.italic;("text"===n||r&&"mathit"===r.font)&&(l=0),o=new yA(e,s.height,s.depth,l,s.skew,s.width,i)}else o=new yA(e,0,0,0,0,0,i);if(r){o.maxFontSize=r.sizeMultiplier,r.style.isTight()&&o.classes.push("mtight");var u=r.getColor();u&&(o.style.color=u)}return o},cS=(e,t)=>{if(uA(e.classes)!==uA(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(1===e.classes.length){var n=e.classes[0];if("mbin"===n||"mord"===n)return!1}for(var r in e.style)if(e.style.hasOwnProperty(r)&&e.style[r]!==t.style[r])return!1;for(var i in t.style)if(t.style.hasOwnProperty(i)&&e.style[i]!==t.style[i])return!1;return!0},hS=function(e){for(var t=0,n=0,r=0,i=0;i<e.children.length;i++){var o=e.children[i];o.height>t&&(t=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>r&&(r=o.maxFontSize)}e.height=t,e.depth=n,e.maxFontSize=r},dS=function(e,t,n,r){var i=new pA(e,t,n,r);return hS(i),i},fS=(e,t,n,r)=>new pA(e,t,n,r),pS=function(e){var t=new qk(e);return hS(t),t},gS=function(e,t,n){var r="";switch(e){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=e}return r+"-"+("textbf"===t&&"textit"===n?"BoldItalic":"textbf"===t?"Bold":"textit"===t?"Italic":"Regular")},mS={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},vS={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},yS={fontMap:mS,makeSymbol:uS,mathsym:function(e,t,n,r){return void 0===r&&(r=[]),"boldsymbol"===n.font&&lS(e,"Main-Bold",t).metrics?uS(e,"Main-Bold",t,n,r.concat(["mathbf"])):"\\"===e||"main"===kA[t][e].font?uS(e,"Main-Regular",t,n,r):uS(e,"AMS-Regular",t,n,r.concat(["amsrm"]))},makeSpan:dS,makeSvgSpan:fS,makeLineSpan:function(e,t,n){var r=dS([e],[],t);return r.height=Math.max(n||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),r.style.borderBottomWidth=lA(r.height),r.maxFontSize=1,r},makeAnchor:function(e,t,n,r){var i=new gA(e,t,n,r);return hS(i),i},makeFragment:pS,wrapFragment:function(e,t){return e instanceof qk?dS([],[e],t):e},makeVList:function(e,t){for(var{children:n,depth:r}=function(e){if("individualShift"===e.positionType){for(var t=e.children,n=[t[0]],r=-t[0].shift-t[0].elem.depth,i=r,o=1;o<t.length;o++){var a=-t[o].shift-i-t[o].elem.depth,s=a-(t[o-1].elem.height+t[o-1].elem.depth);i+=a,n.push({type:"kern",size:s}),n.push(t[o])}return{children:n,depth:r}}var l;if("top"===e.positionType){for(var u=e.positionData,c=0;c<e.children.length;c++){var h=e.children[c];u-="kern"===h.type?h.size:h.elem.height+h.elem.depth}l=u}else if("bottom"===e.positionType)l=-e.positionData;else{var d=e.children[0];if("elem"!==d.type)throw new Error('First child must have type "elem".');if("shift"===e.positionType)l=-d.elem.depth-e.positionData;else{if("firstBaseline"!==e.positionType)throw new Error("Invalid positionType "+e.positionType+".");l=-d.elem.depth}}return{children:e.children,depth:l}}(e),i=0,o=0;o<n.length;o++){var a=n[o];if("elem"===a.type){var s=a.elem;i=Math.max(i,s.maxFontSize,s.height)}}i+=2;var l=dS(["pstrut"],[]);l.style.height=lA(i);for(var u=[],c=r,h=r,d=r,f=0;f<n.length;f++){var p=n[f];if("kern"===p.type)d+=p.size;else{var g=p.elem,m=p.wrapperClasses||[],v=p.wrapperStyle||{},y=dS(m,[l,g],void 0,v);y.style.top=lA(-i-d-g.depth),p.marginLeft&&(y.style.marginLeft=p.marginLeft),p.marginRight&&(y.style.marginRight=p.marginRight),u.push(y),d+=g.height+g.depth}c=Math.min(c,d),h=Math.max(h,d)}var b,x=dS(["vlist"],u);if(x.style.height=lA(h),c<0){var w=dS([],[]),E=dS(["vlist"],[w]);E.style.height=lA(-c);var T=dS(["vlist-s"],[new yA("​")]);b=[dS(["vlist-r"],[x,T]),dS(["vlist-r"],[E])]}else b=[dS(["vlist-r"],[x])];var _=dS(["vlist-t"],b);return 2===b.length&&_.classes.push("vlist-t2"),_.height=h,_.depth=-c,_},makeOrd:function(e,t,n){var r=e.mode,i=e.text,o=["mord"],a="math"===r||"text"===r&&t.font,s=a?t.font:t.fontFamily,l="",u="";if(55349===i.charCodeAt(0)&&([l,u]=function(e,t){var n=1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536,r="math"===t?0:1;if(119808<=n&&n<120484){var i=Math.floor((n-119808)/26);return[aS[i][2],aS[i][r]]}if(120782<=n&&n<=120831){var o=Math.floor((n-120782)/10);return[sS[o][2],sS[o][r]]}if(120485===n||120486===n)return[aS[0][2],aS[0][r]];if(120486<n&&n<120782)return["",""];throw new _k("Unsupported character: "+e)}(i,r)),l.length>0)return uS(i,l,r,t,o.concat(u));if(s){var c,h;if("boldsymbol"===s){var d=function(e,t,n,r,i){return"textord"!==i&&lS(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(i,r,0,0,n);c=d.fontName,h=[d.fontClass]}else a?(c=mS[s].fontName,h=[s]):(c=gS(s,t.fontWeight,t.fontShape),h=[s,t.fontWeight,t.fontShape]);if(lS(i,c,r).metrics)return uS(i,c,r,t,o.concat(h));if(VA.hasOwnProperty(i)&&"Typewriter"===c.slice(0,10)){for(var f=[],p=0;p<i.length;p++)f.push(uS(i[p],c,r,t,o.concat(h)));return pS(f)}}if("mathord"===n)return uS(i,"Math-Italic",r,t,o.concat(["mathnormal"]));if("textord"===n){var g=kA[r][i]&&kA[r][i].font;if("ams"===g){var m=gS("amsrm",t.fontWeight,t.fontShape);return uS(i,m,r,t,o.concat("amsrm",t.fontWeight,t.fontShape))}if("main"!==g&&g){var v=gS(g,t.fontWeight,t.fontShape);return uS(i,v,r,t,o.concat(v,t.fontWeight,t.fontShape))}var y=gS("textrm",t.fontWeight,t.fontShape);return uS(i,y,r,t,o.concat(t.fontWeight,t.fontShape))}throw new Error("unexpected type: "+n+" in makeOrd")},makeGlue:(e,t)=>{var n=dS(["mspace"],[],t),r=sA(e,t);return n.style.marginRight=lA(r),n},staticSvg:function(e,t){var[n,r,i]=vS[e],o=new xA(n),a=new bA([o],{width:lA(r),height:lA(i),style:"width:"+lA(r),viewBox:"0 0 "+1e3*r+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),s=fS(["overlay"],[a],t);return s.height=i,s.style.height=lA(i),s.style.width=lA(r),s},svgData:vS,tryCombineChars:e=>{for(var t=0;t<e.length-1;t++){var n=e[t],r=e[t+1];n instanceof yA&&r instanceof yA&&cS(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,e.splice(t+1,1),t--)}return e}},bS={number:3,unit:"mu"},xS={number:4,unit:"mu"},wS={number:5,unit:"mu"},ES={mord:{mop:bS,mbin:xS,mrel:wS,minner:bS},mop:{mord:bS,mop:bS,mrel:wS,minner:bS},mbin:{mord:xS,mop:xS,mopen:xS,minner:xS},mrel:{mord:wS,mop:wS,mopen:wS,minner:wS},mopen:{},mclose:{mop:bS,mbin:xS,mrel:wS,minner:bS},mpunct:{mord:bS,mop:bS,mrel:wS,mopen:bS,mclose:bS,mpunct:bS,minner:bS},minner:{mord:bS,mop:bS,mbin:xS,mrel:wS,mopen:bS,mpunct:bS,minner:bS}},TS={mord:{mop:bS},mop:{mord:bS,mop:bS},mbin:{},mrel:{},mopen:{},mclose:{mop:bS},mpunct:{},minner:{mop:bS}},_S={},kS={},AS={};function SS(e){for(var{type:t,names:n,props:r,handler:i,htmlBuilder:o,mathmlBuilder:a}=e,s={type:t,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:void 0===r.allowedInMath||r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:i},l=0;l<n.length;++l)_S[n[l]]=s;t&&(o&&(kS[t]=o),a&&(AS[t]=a))}function NS(e){var{type:t,htmlBuilder:n,mathmlBuilder:r}=e;SS({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:r})}var MS=function(e){return"ordgroup"===e.type&&1===e.body.length?e.body[0]:e},CS=function(e){return"ordgroup"===e.type?e.body:[e]},IS=yS.makeSpan,RS=["leftmost","mbin","mopen","mrel","mop","mpunct"],LS=["rightmost","mrel","mclose","mpunct"],OS={display:Gk.DISPLAY,text:Gk.TEXT,script:Gk.SCRIPT,scriptscript:Gk.SCRIPTSCRIPT},DS={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},PS=function(e,t,n,r){void 0===r&&(r=[null,null]);for(var i=[],o=0;o<e.length;o++){var a=VS(e[o],t);if(a instanceof qk){var s=a.children;i.push(...s)}else i.push(a)}if(yS.tryCombineChars(i),!n)return i;var l=t;if(1===e.length){var u=e[0];"sizing"===u.type?l=t.havingSize(u.size):"styling"===u.type&&(l=t.havingStyle(OS[u.style]))}var c=IS([r[0]||"leftmost"],[],t),h=IS([r[1]||"rightmost"],[],t),d="root"===n;return BS(i,(e,t)=>{var n=t.classes[0],r=e.classes[0];"mbin"===n&&Mk.contains(LS,r)?t.classes[0]="mord":"mbin"===r&&Mk.contains(RS,n)&&(e.classes[0]="mord")},{node:c},h,d),BS(i,(e,t)=>{var n=US(t),r=US(e),i=n&&r?e.hasClass("mtight")?TS[n][r]:ES[n][r]:null;if(i)return yS.makeGlue(i,l)},{node:c},h,d),i},BS=function e(t,n,r,i,o){i&&t.push(i);for(var a=0;a<t.length;a++){var s=t[a],l=FS(s);if(l)e(l.children,n,r,null,o);else{var u=!s.hasClass("mspace");if(u){var c=n(s,r.node);c&&(r.insertAfter?r.insertAfter(c):(t.unshift(c),a++))}u?r.node=s:o&&s.hasClass("newline")&&(r.node=IS(["leftmost"])),r.insertAfter=(e=>n=>{t.splice(e+1,0,n),a++})(a)}}i&&t.pop()},FS=function(e){return e instanceof qk||e instanceof gA||e instanceof pA&&e.hasClass("enclosing")?e:null},zS=function e(t,n){var r=FS(t);if(r){var i=r.children;if(i.length){if("right"===n)return e(i[i.length-1],"right");if("left"===n)return e(i[0],"left")}}return t},US=function(e,t){return e?(t&&(e=zS(e,t)),DS[e.classes[0]]||null):null},GS=function(e,t){var n=["nulldelimiter"].concat(e.baseSizingClasses());return IS(t.concat(n))},VS=function(e,t,n){if(!e)return IS();if(kS[e.type]){var r=kS[e.type](e,t);if(n&&t.size!==n.size){r=IS(t.sizingClasses(n),[r],t);var i=t.sizeMultiplier/n.sizeMultiplier;r.height*=i,r.depth*=i}return r}throw new _k("Got group of unknown type: '"+e.type+"'")};function jS(e,t){var n=IS(["base"],e,t),r=IS(["strut"]);return r.style.height=lA(n.height+n.depth),n.depth&&(r.style.verticalAlign=lA(-n.depth)),n.children.unshift(r),n}function HS(e,t){var n=null;1===e.length&&"tag"===e[0].type&&(n=e[0].tag,e=e[0].body);var r,i=PS(e,t,"root");2===i.length&&i[1].hasClass("tag")&&(r=i.pop());for(var o,a=[],s=[],l=0;l<i.length;l++)if(s.push(i[l]),i[l].hasClass("mbin")||i[l].hasClass("mrel")||i[l].hasClass("allowbreak")){for(var u=!1;l<i.length-1&&i[l+1].hasClass("mspace")&&!i[l+1].hasClass("newline");)l++,s.push(i[l]),i[l].hasClass("nobreak")&&(u=!0);u||(a.push(jS(s,t)),s=[])}else i[l].hasClass("newline")&&(s.pop(),s.length>0&&(a.push(jS(s,t)),s=[]),a.push(i[l]));s.length>0&&a.push(jS(s,t)),n?((o=jS(PS(n,t,!0))).classes=["tag"],a.push(o)):r&&a.push(r);var c=IS(["katex-html"],a);if(c.setAttribute("aria-hidden","true"),o){var h=o.children[0];h.style.height=lA(c.height+c.depth),c.depth&&(h.style.verticalAlign=lA(-c.depth))}return c}function $S(e){return new qk(e)}class YS{constructor(e,t,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=n||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=uA(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof qS&&this.children[n+1]instanceof qS){for(var r=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof qS;)r+=this.children[++n].toText();e.appendChild(new qS(r).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=Mk.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+Mk.escape(uA(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">"}toText(){return this.children.map(e=>e.toText()).join("")}}class qS{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Mk.escape(this.toText())}toText(){return this.text}}var WS={MathNode:YS,TextNode:qS,SpaceNode:class{constructor(e){this.width=void 0,this.character=void 0,this.width=e,this.character=e>=.05555&&e<=.05556?" ":e>=.1666&&e<=.1667?" ":e>=.2222&&e<=.2223?" ":e>=.2777&&e<=.2778?"  ":e>=-.05556&&e<=-.05555?" ⁣":e>=-.1667&&e<=-.1666?" ⁣":e>=-.2223&&e<=-.2222?" ⁣":e>=-.2778&&e<=-.2777?" ⁣":null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",lA(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+lA(this.width)+'"/>'}toText(){return this.character?this.character:" "}},newDocumentFragment:$S},XS=function(e,t,n){return!kA[t][e]||!kA[t][e].replace||55349===e.charCodeAt(0)||VA.hasOwnProperty(e)&&n&&(n.fontFamily&&"tt"===n.fontFamily.slice(4,6)||n.font&&"tt"===n.font.slice(4,6))||(e=kA[t][e].replace),new WS.TextNode(e)},KS=function(e){return 1===e.length?e[0]:new WS.MathNode("mrow",e)},ZS=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";var n=t.font;if(!n||"mathnormal"===n)return null;var r=e.mode;if("mathit"===n)return"italic";if("boldsymbol"===n)return"textord"===e.type?"bold":"bold-italic";if("mathbf"===n)return"bold";if("mathbb"===n)return"double-struck";if("mathsfit"===n)return"sans-serif-italic";if("mathfrak"===n)return"fraktur";if("mathscr"===n||"mathcal"===n)return"script";if("mathsf"===n)return"sans-serif";if("mathtt"===n)return"monospace";var i=e.text;return Mk.contains(["\\imath","\\jmath"],i)?null:(kA[r][i]&&kA[r][i].replace&&(i=kA[r][i].replace),Qk(i,yS.fontMap[n].fontName,r)?yS.fontMap[n].variant:null)};function QS(e){if(!e)return!1;if("mi"===e.type&&1===e.children.length){var t=e.children[0];return t instanceof qS&&"."===t.text}if("mo"===e.type&&1===e.children.length&&"true"===e.getAttribute("separator")&&"0em"===e.getAttribute("lspace")&&"0em"===e.getAttribute("rspace")){var n=e.children[0];return n instanceof qS&&","===n.text}return!1}var JS=function(e,t,n){if(1===e.length){var r=tN(e[0],t);return n&&r instanceof YS&&"mo"===r.type&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var i,o=[],a=0;a<e.length;a++){var s=tN(e[a],t);if(s instanceof YS&&i instanceof YS){if("mtext"===s.type&&"mtext"===i.type&&s.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...s.children);continue}if("mn"===s.type&&"mn"===i.type){i.children.push(...s.children);continue}if(QS(s)&&"mn"===i.type){i.children.push(...s.children);continue}if("mn"===s.type&&QS(i))s.children=[...i.children,...s.children],o.pop();else if(("msup"===s.type||"msub"===s.type)&&s.children.length>=1&&("mn"===i.type||QS(i))){var l=s.children[0];l instanceof YS&&"mn"===l.type&&(l.children=[...i.children,...l.children],o.pop())}else if("mi"===i.type&&1===i.children.length){var u=i.children[0];if(u instanceof qS&&"̸"===u.text&&("mo"===s.type||"mi"===s.type||"mn"===s.type)){var c=s.children[0];c instanceof qS&&c.text.length>0&&(c.text=c.text.slice(0,1)+"̸"+c.text.slice(1),o.pop())}}}o.push(s),i=s}return o},eN=function(e,t,n){return KS(JS(e,t,n))},tN=function(e,t){if(!e)return new WS.MathNode("mrow");if(AS[e.type])return AS[e.type](e,t);throw new _k("Got group of unknown type: '"+e.type+"'")};function nN(e,t,n,r,i){var o,a=JS(e,n);o=1===a.length&&a[0]instanceof YS&&Mk.contains(["mrow","mtable"],a[0].type)?a[0]:new WS.MathNode("mrow",a);var s=new WS.MathNode("annotation",[new WS.TextNode(t)]);s.setAttribute("encoding","application/x-tex");var l=new WS.MathNode("semantics",[o,s]),u=new WS.MathNode("math",[l]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&u.setAttribute("display","block");var c=i?"katex":"katex-mathml";return yS.makeSpan([c],[u])}var rN=function(e){return new rA({style:e.displayMode?Gk.DISPLAY:Gk.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},iN=function(e,t){if(t.displayMode){var n=["katex-display"];t.leqno&&n.push("leqno"),t.fleqn&&n.push("fleqn"),e=yS.makeSpan(n,[e])}return e},oN={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},aN={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},sN=function(e,t,n,r,i){var o,a=e.height+e.depth+n+r;if(/fbox|color|angl/.test(t)){if(o=yS.makeSpan(["stretchy",t],[],i),"fbox"===t){var s=i.color&&i.getColor();s&&(o.style.borderColor=s)}}else{var l=[];/^[bx]cancel$/.test(t)&&l.push(new wA({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&l.push(new wA({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new bA(l,{width:"100%",height:lA(a)});o=yS.makeSvgSpan([],[u],i)}return o.height=a,o.style.height=lA(a),o},lN=function(e){var t=new WS.MathNode("mo",[new WS.TextNode(oN[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},uN=function(e,t){var{span:n,minWidth:r,height:i}=function(){var n=4e5,r=e.label.slice(1);if(Mk.contains(["widehat","widecheck","widetilde","utilde"],r)){var i,o,a,s="ordgroup"===(f=e.base).type?f.body.length:1;if(s>5)"widehat"===r||"widecheck"===r?(i=420,n=2364,a=.42,o=r+"4"):(i=312,n=2340,a=.34,o="tilde4");else{var l=[1,1,2,2,3,3][s];"widehat"===r||"widecheck"===r?(n=[0,1062,2364,2364,2364][l],i=[0,239,300,360,420][l],a=[0,.24,.3,.3,.36,.42][l],o=r+l):(n=[0,600,1033,2339,2340][l],i=[0,260,286,306,312][l],a=[0,.26,.286,.3,.306,.34][l],o="tilde"+l)}var u=new xA(o),c=new bA([u],{width:"100%",height:lA(a),viewBox:"0 0 "+n+" "+i,preserveAspectRatio:"none"});return{span:yS.makeSvgSpan([],[c],t),minWidth:0,height:a}}var h,d,f,p=[],g=aN[r],[m,v,y]=g,b=y/1e3,x=m.length;if(1===x)h=["hide-tail"],d=[g[3]];else if(2===x)h=["halfarrow-left","halfarrow-right"],d=["xMinYMin","xMaxYMin"];else{if(3!==x)throw new Error("Correct katexImagesData or update code here to support\n                    "+x+" children.");h=["brace-left","brace-center","brace-right"],d=["xMinYMin","xMidYMin","xMaxYMin"]}for(var w=0;w<x;w++){var E=new xA(m[w]),T=new bA([E],{width:"400em",height:lA(b),viewBox:"0 0 "+n+" "+y,preserveAspectRatio:d[w]+" slice"}),_=yS.makeSvgSpan([h[w]],[T],t);if(1===x)return{span:_,minWidth:v,height:b};_.style.height=lA(b),p.push(_)}return{span:yS.makeSpan(["stretchy"],p,t),minWidth:v,height:b}}();return n.height=i,n.style.height=lA(i),r>0&&(n.style.minWidth=lA(r)),n};function cN(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function hN(e){var t=dN(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function dN(e){return e&&("atom"===e.type||_A.hasOwnProperty(e.type))?e:null}var fN=(e,t)=>{var n,r,i;e&&"supsub"===e.type?(n=(r=cN(e.base,"accent")).base,e.base=n,i=function(e){if(e instanceof pA)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}(VS(e,t)),e.base=r):n=(r=cN(e,"accent")).base;var o=VS(n,t.havingCrampedStyle()),a=0;if(r.isShifty&&Mk.isCharacterBox(n)){var s=Mk.getBaseElem(n);a=EA(VS(s,t.havingCrampedStyle())).skew}var l,u="\\c"===r.label,c=u?o.height+o.depth:Math.min(o.height,t.fontMetrics().xHeight);if(r.isStretchy)l=uN(r,t),l=yS.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"elem",elem:l,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+lA(2*a)+")",marginLeft:lA(2*a)}:void 0}]},t);else{var h,d;"\\vec"===r.label?(h=yS.staticSvg("vec",t),d=yS.svgData.vec[1]):((h=EA(h=yS.makeOrd({mode:r.mode,text:r.label},t,"textord"))).italic=0,d=h.width,u&&(c+=h.depth)),l=yS.makeSpan(["accent-body"],[h]);var f="\\textcircled"===r.label;f&&(l.classes.push("accent-full"),c=o.height);var p=a;f||(p-=d/2),l.style.left=lA(p),"\\textcircled"===r.label&&(l.style.top=".2em"),l=yS.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:-c},{type:"elem",elem:l}]},t)}var g=yS.makeSpan(["mord","accent"],[l],t);return i?(i.children[0]=g,i.height=Math.max(g.height,i.height),i.classes[0]="mord",i):g},pN=(e,t)=>{var n=e.isStretchy?lN(e.label):new WS.MathNode("mo",[XS(e.label,e.mode)]),r=new WS.MathNode("mover",[tN(e.base,t),n]);return r.setAttribute("accent","true"),r},gN=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));SS({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var n=MS(t[0]),r=!gN.test(e.funcName),i=!r||"\\widehat"===e.funcName||"\\widetilde"===e.funcName||"\\widecheck"===e.funcName;return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:r,isShifty:i,base:n}},htmlBuilder:fN,mathmlBuilder:pN}),SS({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var n=t[0],r=e.parser.mode;return"math"===r&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:e.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:fN,mathmlBuilder:pN}),SS({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0];return{type:"accentUnder",mode:n.mode,label:r,base:i}},htmlBuilder:(e,t)=>{var n=VS(e.base,t),r=uN(e,t),i="\\utilde"===e.label?.12:0,o=yS.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:n}]},t);return yS.makeSpan(["mord","accentunder"],[o],t)},mathmlBuilder:(e,t)=>{var n=lN(e.label),r=new WS.MathNode("munder",[tN(e.base,t),n]);return r.setAttribute("accentunder","true"),r}});var mN=e=>{var t=new WS.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};SS({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r,funcName:i}=e;return{type:"xArrow",mode:r.mode,label:i,body:t[0],below:n[0]}},htmlBuilder(e,t){var n,r=t.style,i=t.havingStyle(r.sup()),o=yS.wrapFragment(VS(e.body,i,t),t),a="\\x"===e.label.slice(0,2)?"x":"cd";o.classes.push(a+"-arrow-pad"),e.below&&(i=t.havingStyle(r.sub()),(n=yS.wrapFragment(VS(e.below,i,t),t)).classes.push(a+"-arrow-pad"));var s,l=uN(e,t),u=-t.fontMetrics().axisHeight+.5*l.height,c=-t.fontMetrics().axisHeight-.5*l.height-.111;if((o.depth>.25||"\\xleftequilibrium"===e.label)&&(c-=o.depth),n){var h=-t.fontMetrics().axisHeight+n.height+.5*l.height+.111;s=yS.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:c},{type:"elem",elem:l,shift:u},{type:"elem",elem:n,shift:h}]},t)}else s=yS.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:c},{type:"elem",elem:l,shift:u}]},t);return s.children[0].children[0].children[1].classes.push("svg-align"),yS.makeSpan(["mrel","x-arrow"],[s],t)},mathmlBuilder(e,t){var n,r=lN(e.label);if(r.setAttribute("minsize","x"===e.label.charAt(0)?"1.75em":"3.0em"),e.body){var i=mN(tN(e.body,t));if(e.below){var o=mN(tN(e.below,t));n=new WS.MathNode("munderover",[r,o,i])}else n=new WS.MathNode("mover",[r,i])}else if(e.below){var a=mN(tN(e.below,t));n=new WS.MathNode("munder",[r,a])}else n=mN(),n=new WS.MathNode("mover",[r,n]);return n}});var vN=yS.makeSpan;function yN(e,t){var n=PS(e.body,t,!0);return vN([e.mclass],n,t)}function bN(e,t){var n,r=JS(e.body,t);return"minner"===e.mclass?n=new WS.MathNode("mpadded",r):"mord"===e.mclass?e.isCharacterBox?(n=r[0]).type="mi":n=new WS.MathNode("mi",r):(e.isCharacterBox?(n=r[0]).type="mo":n=new WS.MathNode("mo",r),"mbin"===e.mclass?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):"mpunct"===e.mclass?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):"mopen"===e.mclass||"mclose"===e.mclass?(n.attributes.lspace="0em",n.attributes.rspace="0em"):"minner"===e.mclass&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}SS({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.slice(5),body:CS(i),isCharacterBox:Mk.isCharacterBox(i)}},htmlBuilder:yN,mathmlBuilder:bN});var xN=e=>{var t="ordgroup"===e.type&&e.body.length?e.body[0]:e;return"atom"!==t.type||"bin"!==t.family&&"rel"!==t.family?"mord":"m"+t.family};SS({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:n}=e;return{type:"mclass",mode:n.mode,mclass:xN(t[0]),body:CS(t[1]),isCharacterBox:Mk.isCharacterBox(t[1])}}}),SS({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var n,{parser:r,funcName:i}=e,o=t[1],a=t[0];n="\\stackrel"!==i?xN(o):"mrel";var s={type:"op",mode:o.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==i,body:CS(o)},l={type:"supsub",mode:a.mode,base:s,sup:"\\underset"===i?null:a,sub:"\\underset"===i?a:null};return{type:"mclass",mode:r.mode,mclass:n,body:[l],isCharacterBox:Mk.isCharacterBox(l)}},htmlBuilder:yN,mathmlBuilder:bN}),SS({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"pmb",mode:n.mode,mclass:xN(t[0]),body:CS(t[0])}},htmlBuilder(e,t){var n=PS(e.body,t,!0),r=yS.makeSpan([e.mclass],n,t);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(e,t){var n=JS(e.body,t),r=new WS.MathNode("mstyle",n);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var wN={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},EN=()=>({type:"styling",body:[],mode:"math",style:"display"}),TN=e=>"textord"===e.type&&"@"===e.text,_N=(e,t)=>("mathord"===e.type||"atom"===e.type)&&e.text===t;function kN(e,t,n){var r=wN[e];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(r,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":var i={type:"atom",text:r,mode:"math",family:"rel"},o={type:"ordgroup",mode:"math",body:[n.callFunction("\\\\cdleft",[t[0]],[]),n.callFunction("\\Big",[i],[]),n.callFunction("\\\\cdright",[t[1]],[])]};return n.callFunction("\\\\cdparent",[o],[]);case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return n.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}SS({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"cdlabel",mode:n.mode,side:r.slice(4),label:t[0]}},htmlBuilder(e,t){var n=t.havingStyle(t.style.sup()),r=yS.wrapFragment(VS(e.label,n,t),t);return r.classes.push("cd-label-"+e.side),r.style.bottom=lA(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(e,t){var n=new WS.MathNode("mrow",[tN(e.label,t)]);return(n=new WS.MathNode("mpadded",[n])).setAttribute("width","0"),"left"===e.side&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),(n=new WS.MathNode("mstyle",[n])).setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}}),SS({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:n}=e;return{type:"cdlabelparent",mode:n.mode,fragment:t[0]}},htmlBuilder(e,t){var n=yS.wrapFragment(VS(e.fragment,t),t);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder:(e,t)=>new WS.MathNode("mrow",[tN(e.fragment,t)])}),SS({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:n}=e,r=cN(t[0],"ordgroup").body,i="",o=0;o<r.length;o++){i+=cN(r[o],"textord").text}var a,s=parseInt(i);if(isNaN(s))throw new _k("\\@char has non-numeric argument "+i);if(s<0||s>=1114111)throw new _k("\\@char with invalid code point "+i);return s<=65535?a=String.fromCharCode(s):(s-=65536,a=String.fromCharCode(55296+(s>>10),56320+(1023&s))),{type:"textord",mode:n.mode,text:a}}});var AN=(e,t)=>{var n=PS(e.body,t.withColor(e.color),!1);return yS.makeFragment(n)},SN=(e,t)=>{var n=JS(e.body,t.withColor(e.color)),r=new WS.MathNode("mstyle",n);return r.setAttribute("mathcolor",e.color),r};SS({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:n}=e,r=cN(t[0],"color-token").color,i=t[1];return{type:"color",mode:n.mode,color:r,body:CS(i)}},htmlBuilder:AN,mathmlBuilder:SN}),SS({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:n,breakOnTokenText:r}=e,i=cN(t[0],"color-token").color;n.gullet.macros.set("\\current@color",i);var o=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:i,body:o}},htmlBuilder:AN,mathmlBuilder:SN}),SS({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,n){var{parser:r}=e,i="["===r.gullet.future().text?r.parseSizeGroup(!0):null,o=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:o,size:i&&cN(i,"size").value}},htmlBuilder(e,t){var n=yS.makeSpan(["mspace"],[],t);return e.newLine&&(n.classes.push("newline"),e.size&&(n.style.marginTop=lA(sA(e.size,t)))),n},mathmlBuilder(e,t){var n=new WS.MathNode("mspace");return e.newLine&&(n.setAttribute("linebreak","newline"),e.size&&n.setAttribute("height",lA(sA(e.size,t)))),n}});var NN={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},MN=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new _k("Expected a control sequence",e);return t},CN=(e,t,n,r)=>{var i=e.gullet.macros.get(n.text);null==i&&(n.noexpand=!0,i={tokens:[n],numArgs:0,unexpandable:!e.gullet.isExpandable(n.text)}),e.gullet.macros.set(t,i,r)};SS({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:n}=e;t.consumeSpaces();var r=t.fetch();if(NN[r.text])return"\\global"!==n&&"\\\\globallong"!==n||(r.text=NN[r.text]),cN(t.parseFunction(),"internal");throw new _k("Invalid token after macro prefix",r)}}),SS({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=t.gullet.popToken(),i=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new _k("Expected a control sequence",r);for(var o,a=0,s=[[]];"{"!==t.gullet.future().text;)if("#"===(r=t.gullet.popToken()).text){if("{"===t.gullet.future().text){o=t.gullet.future(),s[a].push("{");break}if(r=t.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new _k('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==a+1)throw new _k('Argument number "'+r.text+'" out of order');a++,s.push([])}else{if("EOF"===r.text)throw new _k("Expected a macro definition");s[a].push(r.text)}var{tokens:l}=t.gullet.consumeArg();return o&&l.unshift(o),"\\edef"!==n&&"\\xdef"!==n||(l=t.gullet.expandTokens(l)).reverse(),t.gullet.macros.set(i,{tokens:l,numArgs:a,delimiters:s},n===NN[n]),{type:"internal",mode:t.mode}}}),SS({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=MN(t.gullet.popToken());t.gullet.consumeSpaces();var i=(e=>{var t=e.gullet.popToken();return"="===t.text&&" "===(t=e.gullet.popToken()).text&&(t=e.gullet.popToken()),t})(t);return CN(t,r,i,"\\\\globallet"===n),{type:"internal",mode:t.mode}}}),SS({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=MN(t.gullet.popToken()),i=t.gullet.popToken(),o=t.gullet.popToken();return CN(t,r,o,"\\\\globalfuture"===n),t.gullet.pushToken(o),t.gullet.pushToken(i),{type:"internal",mode:t.mode}}});var IN=function(e,t,n){var r=Qk(kA.math[e]&&kA.math[e].replace||e,t,n);if(!r)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return r},RN=function(e,t,n,r){var i=n.havingBaseStyle(t),o=yS.makeSpan(r.concat(i.sizingClasses(n)),[e],n),a=i.sizeMultiplier/n.sizeMultiplier;return o.height*=a,o.depth*=a,o.maxFontSize=i.sizeMultiplier,o},LN=function(e,t,n){var r=t.havingBaseStyle(n),i=(1-t.sizeMultiplier/r.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=lA(i),e.height-=i,e.depth+=i},ON=function(e,t,n,r,i,o){var a=function(e,t,n,r){return yS.makeSymbol(e,"Size"+t+"-Regular",n,r)}(e,t,i,r),s=RN(yS.makeSpan(["delimsizing","size"+t],[a],r),Gk.TEXT,r,o);return n&&LN(s,r,Gk.TEXT),s},DN=function(e,t,n){var r;return r="Size1-Regular"===t?"delim-size1":"delim-size4",{type:"elem",elem:yS.makeSpan(["delimsizinginner",r],[yS.makeSpan([],[yS.makeSymbol(e,t,n)])])}},PN=function(e,t,n){var r=Wk["Size4-Regular"][e.charCodeAt(0)]?Wk["Size4-Regular"][e.charCodeAt(0)][4]:Wk["Size1-Regular"][e.charCodeAt(0)][4],i=new xA("inner",function(e,t){switch(e){case"⎜":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"∣":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"∥":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145zM367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z";case"⎟":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"⎢":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"⎥":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"⎪":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"⏐":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"‖":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257zM478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z";default:return""}}(e,Math.round(1e3*t))),o=new bA([i],{width:lA(r),height:lA(t),style:"width:"+lA(r),viewBox:"0 0 "+1e3*r+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),a=yS.makeSvgSpan([],[o],n);return a.height=t,a.style.height=lA(t),a.style.width=lA(r),{type:"elem",elem:a}},BN={type:"kern",size:-.008},FN=["|","\\lvert","\\rvert","\\vert"],zN=["\\|","\\lVert","\\rVert","\\Vert"],UN=function(e,t,n,r,i,o){var a,s,l,u,c="",h=0;a=l=u=e,s=null;var d="Size1-Regular";"\\uparrow"===e?l=u="⏐":"\\Uparrow"===e?l=u="‖":"\\downarrow"===e?a=l="⏐":"\\Downarrow"===e?a=l="‖":"\\updownarrow"===e?(a="\\uparrow",l="⏐",u="\\downarrow"):"\\Updownarrow"===e?(a="\\Uparrow",l="‖",u="\\Downarrow"):Mk.contains(FN,e)?(l="∣",c="vert",h=333):Mk.contains(zN,e)?(l="∥",c="doublevert",h=556):"["===e||"\\lbrack"===e?(a="⎡",l="⎢",u="⎣",d="Size4-Regular",c="lbrack",h=667):"]"===e||"\\rbrack"===e?(a="⎤",l="⎥",u="⎦",d="Size4-Regular",c="rbrack",h=667):"\\lfloor"===e||"⌊"===e?(l=a="⎢",u="⎣",d="Size4-Regular",c="lfloor",h=667):"\\lceil"===e||"⌈"===e?(a="⎡",l=u="⎢",d="Size4-Regular",c="lceil",h=667):"\\rfloor"===e||"⌋"===e?(l=a="⎥",u="⎦",d="Size4-Regular",c="rfloor",h=667):"\\rceil"===e||"⌉"===e?(a="⎤",l=u="⎥",d="Size4-Regular",c="rceil",h=667):"("===e||"\\lparen"===e?(a="⎛",l="⎜",u="⎝",d="Size4-Regular",c="lparen",h=875):")"===e||"\\rparen"===e?(a="⎞",l="⎟",u="⎠",d="Size4-Regular",c="rparen",h=875):"\\{"===e||"\\lbrace"===e?(a="⎧",s="⎨",u="⎩",l="⎪",d="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(a="⎫",s="⎬",u="⎭",l="⎪",d="Size4-Regular"):"\\lgroup"===e||"⟮"===e?(a="⎧",u="⎩",l="⎪",d="Size4-Regular"):"\\rgroup"===e||"⟯"===e?(a="⎫",u="⎭",l="⎪",d="Size4-Regular"):"\\lmoustache"===e||"⎰"===e?(a="⎧",u="⎭",l="⎪",d="Size4-Regular"):"\\rmoustache"!==e&&"⎱"!==e||(a="⎫",u="⎩",l="⎪",d="Size4-Regular");var f=IN(a,d,i),p=f.height+f.depth,g=IN(l,d,i),m=g.height+g.depth,v=IN(u,d,i),y=v.height+v.depth,b=0,x=1;if(null!==s){var w=IN(s,d,i);b=w.height+w.depth,x=2}var E=p+y+b,T=E+Math.max(0,Math.ceil((t-E)/(x*m)))*x*m,_=r.fontMetrics().axisHeight;n&&(_*=r.sizeMultiplier);var k=T/2-_,A=[];if(c.length>0){var S=T-p-y,N=Math.round(1e3*T),M=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+" v1759 h347 v-84\nH403z M403 1759 V0 H319 V1759 v"+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+" v1759 H0 v84 H347z\nM347 1759 V0 H263 V1759 v"+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+t+" v585 h43z\nM367 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M410 15 H367 v585 v"+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+" v1715 h263 v84 H319z\nMM319 602 V0 H403 V602 v"+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+" v1799 H0 v-84 H319z\nMM319 602 V0 H403 V602 v"+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+" v602 h84z\nM403 1759 V0 H319 V1759 v"+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+" v602 h84z\nM347 1759 V0 h-84 V1759 v"+t+" v602 h84z";case"lparen":return"M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1\nc-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,\n-36,557 l0,"+(t+84)+"c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,\n949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9\nc0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,\n-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189\nl0,-"+(t+92)+"c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,\n-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z";case"rparen":return"M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,\n63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5\nc11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,"+(t+9)+"\nc-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664\nc-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11\nc0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17\nc242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558\nl0,-"+(t+144)+"c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,\n-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z";default:throw new Error("Unknown stretchy delimiter.")}}(c,Math.round(1e3*S)),C=new xA(c,M),I=(h/1e3).toFixed(3)+"em",R=(N/1e3).toFixed(3)+"em",L=new bA([C],{width:I,height:R,viewBox:"0 0 "+h+" "+N}),O=yS.makeSvgSpan([],[L],r);O.height=N/1e3,O.style.width=I,O.style.height=R,A.push({type:"elem",elem:O})}else{if(A.push(DN(u,d,i)),A.push(BN),null===s){var D=T-p-y+.016;A.push(PN(l,D,r))}else{var P=(T-p-y-b)/2+.016;A.push(PN(l,P,r)),A.push(BN),A.push(DN(s,d,i)),A.push(BN),A.push(PN(l,P,r))}A.push(BN),A.push(DN(a,d,i))}var B=r.havingBaseStyle(Gk.TEXT),F=yS.makeVList({positionType:"bottom",positionData:k,children:A},B);return RN(yS.makeSpan(["delimsizing","mult"],[F],B),Gk.TEXT,r,o)},GN=.08,VN=function(e,t,n,r,i){var o=function(e,t,n){t*=1e3;var r="";switch(e){case"sqrtMain":r=function(e){return"M95,"+(622+e+$k)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+e/2.075+" -"+e+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+e)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+e)+" "+$k+"h400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize1":r=function(e){return"M263,"+(601+e+$k)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+e/2.084+" -"+e+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+e)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+e)+" "+$k+"h400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize2":r=function(e){return"M983 "+(10+e+$k)+"\nl"+e/3.13+" -"+e+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+e)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+e)+" "+$k+"h400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize3":r=function(e){return"M424,"+(2398+e+$k)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+e/4.223+" -"+e+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+e)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+e)+" "+$k+"\nh400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize4":r=function(e){return"M473,"+(2713+e+$k)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+e/5.298+" -"+e+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+e)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+e)+" "+$k+"h400000v"+(40+e)+"H1017.7z"}(t);break;case"sqrtTall":r=function(e,t,n){return"M702 "+(e+$k)+"H400000"+(40+e)+"\nH742v"+(n-54-$k-e)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 "+$k+"H400000v"+(40+e)+"H742z"}(t,0,n)}return r}(e,r,n),a=new xA(e,o),s=new bA([a],{width:"400em",height:lA(t),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return yS.makeSvgSpan(["hide-tail"],[s],i)},jN=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],HN=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],$N=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],YN=[0,1.2,1.8,2.4,3],qN=[{type:"small",style:Gk.SCRIPTSCRIPT},{type:"small",style:Gk.SCRIPT},{type:"small",style:Gk.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],WN=[{type:"small",style:Gk.SCRIPTSCRIPT},{type:"small",style:Gk.SCRIPT},{type:"small",style:Gk.TEXT},{type:"stack"}],XN=[{type:"small",style:Gk.SCRIPTSCRIPT},{type:"small",style:Gk.SCRIPT},{type:"small",style:Gk.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],KN=function(e){if("small"===e.type)return"Main-Regular";if("large"===e.type)return"Size"+e.size+"-Regular";if("stack"===e.type)return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},ZN=function(e,t,n,r){for(var i=Math.min(2,3-r.style.size);i<n.length&&"stack"!==n[i].type;i++){var o=IN(e,KN(n[i]),"math"),a=o.height+o.depth;if("small"===n[i].type&&(a*=r.havingBaseStyle(n[i].style).sizeMultiplier),a>t)return n[i]}return n[n.length-1]},QN=function(e,t,n,r,i,o){var a;"<"===e||"\\lt"===e||"⟨"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"⟩"!==e||(e="\\rangle"),a=Mk.contains($N,e)?qN:Mk.contains(jN,e)?XN:WN;var s=ZN(e,t,a,r);return"small"===s.type?function(e,t,n,r,i,o){var a=yS.makeSymbol(e,"Main-Regular",i,r),s=RN(a,t,r,o);return n&&LN(s,r,t),s}(e,s.style,n,r,i,o):"large"===s.type?ON(e,s.size,n,r,i,o):UN(e,t,n,r,i,o)},JN={sqrtImage:function(e,t){var n,r,i=t.havingBaseSizing(),o=ZN("\\surd",e*i.sizeMultiplier,XN,i),a=i.sizeMultiplier,s=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),l=0,u=0,c=0;return"small"===o.type?(e<1?a=1:e<1.4&&(a=.7),u=(1+s)/a,(n=VN("sqrtMain",l=(1+s+GN)/a,c=1e3+1e3*s+80,s,t)).style.minWidth="0.853em",r=.833/a):"large"===o.type?(c=1080*YN[o.size],u=(YN[o.size]+s)/a,l=(YN[o.size]+s+GN)/a,(n=VN("sqrtSize"+o.size,l,c,s,t)).style.minWidth="1.02em",r=1/a):(l=e+s+GN,u=e+s,c=Math.floor(1e3*e+s)+80,(n=VN("sqrtTall",l,c,s,t)).style.minWidth="0.742em",r=1.056),n.height=u,n.style.height=lA(l),{span:n,advanceWidth:r,ruleWidth:(t.fontMetrics().sqrtRuleThickness+s)*a}},sizedDelim:function(e,t,n,r,i){if("<"===e||"\\lt"===e||"⟨"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"⟩"!==e||(e="\\rangle"),Mk.contains(jN,e)||Mk.contains($N,e))return ON(e,t,!1,n,r,i);if(Mk.contains(HN,e))return UN(e,YN[t],!1,n,r,i);throw new _k("Illegal delimiter: '"+e+"'")},sizeToMaxHeight:YN,customSizedDelim:QN,leftRightDelim:function(e,t,n,r,i,o){var a=r.fontMetrics().axisHeight*r.sizeMultiplier,s=5/r.fontMetrics().ptPerEm,l=Math.max(t-a,n+a),u=Math.max(l/500*901,2*l-s);return QN(e,u,!0,r,i,o)}},eM={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},tM=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function nM(e,t){var n=dN(e);if(n&&Mk.contains(tM,n.text))return n;throw new _k(n?"Invalid delimiter '"+n.text+"' after '"+t.funcName+"'":"Invalid delimiter type '"+e.type+"'",e)}function rM(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}SS({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var n=nM(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:eM[e.funcName].size,mclass:eM[e.funcName].mclass,delim:n.text}},htmlBuilder:(e,t)=>"."===e.delim?yS.makeSpan([e.mclass]):JN.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];"."!==e.delim&&t.push(XS(e.delim,e.mode));var n=new WS.MathNode("mo",t);"mopen"===e.mclass||"mclose"===e.mclass?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var r=lA(JN.sizeToMaxHeight[e.size]);return n.setAttribute("minsize",r),n.setAttribute("maxsize",r),n}}),SS({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=e.parser.gullet.macros.get("\\current@color");if(n&&"string"!=typeof n)throw new _k("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:nM(t[0],e).text,color:n}}}),SS({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=nM(t[0],e),r=e.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var o=cN(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:n.text,right:o.delim,rightColor:o.color}},htmlBuilder:(e,t)=>{rM(e);for(var n,r,i=PS(e.body,t,!0,["mopen","mclose"]),o=0,a=0,s=!1,l=0;l<i.length;l++)i[l].isMiddle?s=!0:(o=Math.max(i[l].height,o),a=Math.max(i[l].depth,a));if(o*=t.sizeMultiplier,a*=t.sizeMultiplier,n="."===e.left?GS(t,["mopen"]):JN.leftRightDelim(e.left,o,a,t,e.mode,["mopen"]),i.unshift(n),s)for(var u=1;u<i.length;u++){var c=i[u].isMiddle;c&&(i[u]=JN.leftRightDelim(c.delim,o,a,c.options,e.mode,[]))}if("."===e.right)r=GS(t,["mclose"]);else{var h=e.rightColor?t.withColor(e.rightColor):t;r=JN.leftRightDelim(e.right,o,a,h,e.mode,["mclose"])}return i.push(r),yS.makeSpan(["minner"],i,t)},mathmlBuilder:(e,t)=>{rM(e);var n=JS(e.body,t);if("."!==e.left){var r=new WS.MathNode("mo",[XS(e.left,e.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if("."!==e.right){var i=new WS.MathNode("mo",[XS(e.right,e.mode)]);i.setAttribute("fence","true"),e.rightColor&&i.setAttribute("mathcolor",e.rightColor),n.push(i)}return KS(n)}}),SS({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=nM(t[0],e);if(!e.parser.leftrightDepth)throw new _k("\\middle without preceding \\left",n);return{type:"middle",mode:e.parser.mode,delim:n.text}},htmlBuilder:(e,t)=>{var n;if("."===e.delim)n=GS(t,[]);else{n=JN.sizedDelim(e.delim,1,t,e.mode,[]);var r={delim:e.delim,options:t};n.isMiddle=r}return n},mathmlBuilder:(e,t)=>{var n="\\vert"===e.delim||"|"===e.delim?XS("|","text"):XS(e.delim,e.mode),r=new WS.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var iM=(e,t)=>{var n,r,i,o=yS.wrapFragment(VS(e.body,t),t),a=e.label.slice(1),s=t.sizeMultiplier,l=0,u=Mk.isCharacterBox(e.body);if("sout"===a)(n=yS.makeSpan(["stretchy","sout"])).height=t.fontMetrics().defaultRuleThickness/s,l=-.5*t.fontMetrics().xHeight;else if("phase"===a){var c=sA({number:.6,unit:"pt"},t),h=sA({number:.35,unit:"ex"},t);s/=t.havingBaseSizing().sizeMultiplier;var d=o.height+o.depth+c+h;o.style.paddingLeft=lA(d/2+c);var f=Math.floor(1e3*d*s),p="M400000 "+(r=f)+" H0 L"+r/2+" 0 l65 45 L145 "+(r-80)+" H400000z",g=new bA([new xA("phase",p)],{width:"400em",height:lA(f/1e3),viewBox:"0 0 400000 "+f,preserveAspectRatio:"xMinYMin slice"});(n=yS.makeSvgSpan(["hide-tail"],[g],t)).style.height=lA(d),l=o.depth+c+h}else{/cancel/.test(a)?u||o.classes.push("cancel-pad"):"angl"===a?o.classes.push("anglpad"):o.classes.push("boxpad");var m=0,v=0,y=0;/box/.test(a)?(y=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),v=m=t.fontMetrics().fboxsep+("colorbox"===a?0:y)):"angl"===a?(m=4*(y=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness)),v=Math.max(0,.25-o.depth)):v=m=u?.2:0,n=sN(o,a,m,v,t),/fbox|boxed|fcolorbox/.test(a)?(n.style.borderStyle="solid",n.style.borderWidth=lA(y)):"angl"===a&&.049!==y&&(n.style.borderTopWidth=lA(y),n.style.borderRightWidth=lA(y)),l=o.depth+v,e.backgroundColor&&(n.style.backgroundColor=e.backgroundColor,e.borderColor&&(n.style.borderColor=e.borderColor))}if(e.backgroundColor)i=yS.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:l},{type:"elem",elem:o,shift:0}]},t);else{var b=/cancel|phase/.test(a)?["svg-align"]:[];i=yS.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:0},{type:"elem",elem:n,shift:l,wrapperClasses:b}]},t)}return/cancel/.test(a)&&(i.height=o.height,i.depth=o.depth),/cancel/.test(a)&&!u?yS.makeSpan(["mord","cancel-lap"],[i],t):yS.makeSpan(["mord"],[i],t)},oM=(e,t)=>{var n=0,r=new WS.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[tN(e.body,t)]);switch(e.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),"\\fcolorbox"===e.label){var i=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);r.setAttribute("style","border: "+i+"em solid "+String(e.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return e.backgroundColor&&r.setAttribute("mathbackground",e.backgroundColor),r};SS({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,n){var{parser:r,funcName:i}=e,o=cN(t[0],"color-token").color,a=t[1];return{type:"enclose",mode:r.mode,label:i,backgroundColor:o,body:a}},htmlBuilder:iM,mathmlBuilder:oM}),SS({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,n){var{parser:r,funcName:i}=e,o=cN(t[0],"color-token").color,a=cN(t[1],"color-token").color,s=t[2];return{type:"enclose",mode:r.mode,label:i,backgroundColor:a,borderColor:o,body:s}},htmlBuilder:iM,mathmlBuilder:oM}),SS({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\fbox",body:t[0]}}}),SS({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];return{type:"enclose",mode:n.mode,label:r,body:i}},htmlBuilder:iM,mathmlBuilder:oM}),SS({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\angl",body:t[0]}}});var aM={};function sM(e){for(var{type:t,names:n,props:r,handler:i,htmlBuilder:o,mathmlBuilder:a}=e,s={type:t,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<n.length;++l)aM[n[l]]=s;o&&(kS[t]=o),a&&(AS[t]=a)}var lM={};function uM(e,t){lM[e]=t}function cM(e){var t=[];e.consumeSpaces();var n=e.fetch().text;for("\\relax"===n&&(e.consume(),e.consumeSpaces(),n=e.fetch().text);"\\hline"===n||"\\hdashline"===n;)e.consume(),t.push("\\hdashline"===n),e.consumeSpaces(),n=e.fetch().text;return t}var hM=e=>{if(!e.parser.settings.displayMode)throw new _k("{"+e.envName+"} can be used only in display mode.")};function dM(e){if(-1===e.indexOf("ed"))return-1===e.indexOf("*")}function fM(e,t,n){var{hskipBeforeAndAfter:r,addJot:i,cols:o,arraystretch:a,colSeparationType:s,autoTag:l,singleRow:u,emptySingleRow:c,maxNumCols:h,leqno:d}=t;if(e.gullet.beginGroup(),u||e.gullet.macros.set("\\cr","\\\\\\relax"),!a){var f=e.gullet.expandMacroAsText("\\arraystretch");if(null==f)a=1;else if(!(a=parseFloat(f))||a<0)throw new _k("Invalid \\arraystretch: "+f)}e.gullet.beginGroup();var p=[],g=[p],m=[],v=[],y=null!=l?[]:void 0;function b(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function x(){y&&(e.gullet.macros.get("\\df@tag")?(y.push(e.subparse([new Tk("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):y.push(Boolean(l)&&"1"===e.gullet.macros.get("\\@eqnsw")))}for(b(),v.push(cM(e));;){var w=e.parseExpression(!1,u?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),w={type:"ordgroup",mode:e.mode,body:w},n&&(w={type:"styling",mode:e.mode,style:n,body:[w]}),p.push(w);var E=e.fetch().text;if("&"===E){if(h&&p.length===h){if(u||s)throw new _k("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else{if("\\end"===E){x(),1===p.length&&"styling"===w.type&&0===w.body[0].body.length&&(g.length>1||!c)&&g.pop(),v.length<g.length+1&&v.push([]);break}if("\\\\"!==E)throw new _k("Expected & or \\\\ or \\cr or \\end",e.nextToken);e.consume();var T=void 0;" "!==e.gullet.future().text&&(T=e.parseSizeGroup(!0)),m.push(T?T.value:null),x(),v.push(cM(e)),p=[],g.push(p),b()}}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:i,arraystretch:a,body:g,cols:o,rowGaps:m,hskipBeforeAndAfter:r,hLinesBeforeRow:v,colSeparationType:s,tags:y,leqno:d}}function pM(e){return"d"===e.slice(0,1)?"display":"text"}var gM=function(e,t){var n,r,i=e.body.length,o=e.hLinesBeforeRow,a=0,s=new Array(i),l=[],u=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),c=1/t.fontMetrics().ptPerEm,h=5*c;e.colSeparationType&&"small"===e.colSeparationType&&(h=t.havingStyle(Gk.SCRIPT).sizeMultiplier/t.sizeMultiplier*.2778);var d="CD"===e.colSeparationType?sA({number:3,unit:"ex"},t):12*c,f=3*c,p=e.arraystretch*d,g=.7*p,m=.3*p,v=0;function y(e){for(var t=0;t<e.length;++t)t>0&&(v+=.25),l.push({pos:v,isDashed:e[t]})}for(y(o[0]),n=0;n<e.body.length;++n){var b=e.body[n],x=g,w=m;a<b.length&&(a=b.length);var E=new Array(b.length);for(r=0;r<b.length;++r){var T=VS(b[r],t);w<T.depth&&(w=T.depth),x<T.height&&(x=T.height),E[r]=T}var _=e.rowGaps[n],k=0;_&&(k=sA(_,t))>0&&(w<(k+=m)&&(w=k),k=0),e.addJot&&(w+=f),E.height=x,E.depth=w,v+=x,E.pos=v,v+=w+k,s[n]=E,y(o[n+1])}var A,S,N=v/2+t.fontMetrics().axisHeight,M=e.cols||[],C=[],I=[];if(e.tags&&e.tags.some(e=>e))for(n=0;n<i;++n){var R=s[n],L=R.pos-N,O=e.tags[n],D=void 0;(D=!0===O?yS.makeSpan(["eqn-num"],[],t):!1===O?yS.makeSpan([],[],t):yS.makeSpan([],PS(O,t,!0),t)).depth=R.depth,D.height=R.height,I.push({type:"elem",elem:D,shift:L})}for(r=0,S=0;r<a||S<M.length;++r,++S){for(var P=M[S]||{},B=!0;"separator"===P.type;){if(B||((A=yS.makeSpan(["arraycolsep"],[])).style.width=lA(t.fontMetrics().doubleRuleSep),C.push(A)),"|"!==P.separator&&":"!==P.separator)throw new _k("Invalid separator type: "+P.separator);var F="|"===P.separator?"solid":"dashed",z=yS.makeSpan(["vertical-separator"],[],t);z.style.height=lA(v),z.style.borderRightWidth=lA(u),z.style.borderRightStyle=F,z.style.margin="0 "+lA(-u/2);var U=v-N;U&&(z.style.verticalAlign=lA(-U)),C.push(z),P=M[++S]||{},B=!1}if(!(r>=a)){var G=void 0;(r>0||e.hskipBeforeAndAfter)&&0!==(G=Mk.deflt(P.pregap,h))&&((A=yS.makeSpan(["arraycolsep"],[])).style.width=lA(G),C.push(A));var V=[];for(n=0;n<i;++n){var j=s[n],H=j[r];if(H){var $=j.pos-N;H.depth=j.depth,H.height=j.height,V.push({type:"elem",elem:H,shift:$})}}V=yS.makeVList({positionType:"individualShift",children:V},t),V=yS.makeSpan(["col-align-"+(P.align||"c")],[V]),C.push(V),(r<a-1||e.hskipBeforeAndAfter)&&0!==(G=Mk.deflt(P.postgap,h))&&((A=yS.makeSpan(["arraycolsep"],[])).style.width=lA(G),C.push(A))}}if(s=yS.makeSpan(["mtable"],C),l.length>0){for(var Y=yS.makeLineSpan("hline",t,u),q=yS.makeLineSpan("hdashline",t,u),W=[{type:"elem",elem:s,shift:0}];l.length>0;){var X=l.pop(),K=X.pos-N;X.isDashed?W.push({type:"elem",elem:q,shift:K}):W.push({type:"elem",elem:Y,shift:K})}s=yS.makeVList({positionType:"individualShift",children:W},t)}if(0===I.length)return yS.makeSpan(["mord"],[s],t);var Z=yS.makeVList({positionType:"individualShift",children:I},t);return Z=yS.makeSpan(["tag"],[Z],t),yS.makeFragment([s,Z])},mM={c:"center ",l:"left ",r:"right "},vM=function(e,t){for(var n=[],r=new WS.MathNode("mtd",[],["mtr-glue"]),i=new WS.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var a=e.body[o],s=[],l=0;l<a.length;l++)s.push(new WS.MathNode("mtd",[tN(a[l],t)]));e.tags&&e.tags[o]&&(s.unshift(r),s.push(r),e.leqno?s.unshift(i):s.push(i)),n.push(new WS.MathNode("mtr",s))}var u=new WS.MathNode("mtable",n),c=.5===e.arraystretch?.1:.16+e.arraystretch-1+(e.addJot?.09:0);u.setAttribute("rowspacing",lA(c));var h="",d="";if(e.cols&&e.cols.length>0){var f=e.cols,p="",g=!1,m=0,v=f.length;"separator"===f[0].type&&(h+="top ",m=1),"separator"===f[f.length-1].type&&(h+="bottom ",v-=1);for(var y=m;y<v;y++)"align"===f[y].type?(d+=mM[f[y].align],g&&(p+="none "),g=!0):"separator"===f[y].type&&g&&(p+="|"===f[y].separator?"solid ":"dashed ",g=!1);u.setAttribute("columnalign",d.trim()),/[sd]/.test(p)&&u.setAttribute("columnlines",p.trim())}if("align"===e.colSeparationType){for(var b=e.cols||[],x="",w=1;w<b.length;w++)x+=w%2?"0em ":"1em ";u.setAttribute("columnspacing",x.trim())}else"alignat"===e.colSeparationType||"gather"===e.colSeparationType?u.setAttribute("columnspacing","0em"):"small"===e.colSeparationType?u.setAttribute("columnspacing","0.2778em"):"CD"===e.colSeparationType?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var E="",T=e.hLinesBeforeRow;h+=T[0].length>0?"left ":"",h+=T[T.length-1].length>0?"right ":"";for(var _=1;_<T.length-1;_++)E+=0===T[_].length?"none ":T[_][0]?"dashed ":"solid ";return/[sd]/.test(E)&&u.setAttribute("rowlines",E.trim()),""!==h&&(u=new WS.MathNode("menclose",[u])).setAttribute("notation",h.trim()),e.arraystretch&&e.arraystretch<1&&(u=new WS.MathNode("mstyle",[u])).setAttribute("scriptlevel","1"),u},yM=function(e,t){-1===e.envName.indexOf("ed")&&hM(e);var n,r=[],i=e.envName.indexOf("at")>-1?"alignat":"align",o="split"===e.envName,a=fM(e.parser,{cols:r,addJot:!0,autoTag:o?void 0:dM(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:o?2:void 0,leqno:e.parser.settings.leqno},"display"),s=0,l={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&"ordgroup"===t[0].type){for(var u="",c=0;c<t[0].body.length;c++){u+=cN(t[0].body[c],"textord").text}n=Number(u),s=2*n}var h=!s;a.body.forEach(function(e){for(var t=1;t<e.length;t+=2){var r=cN(e[t],"styling");cN(r.body[0],"ordgroup").body.unshift(l)}if(h)s<e.length&&(s=e.length);else{var i=e.length/2;if(n<i)throw new _k("Too many math in a row: expected "+n+", but got "+i,e[0])}});for(var d=0;d<s;++d){var f="r",p=0;d%2==1?f="l":d>0&&h&&(p=1),r[d]={type:"align",align:f,pregap:p,postgap:0}}return a.colSeparationType=h?"align":"alignat",a};sM({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var n=(dN(t[0])?[t[0]]:cN(t[0],"ordgroup").body).map(function(e){var t=hN(e).text;if(-1!=="lcr".indexOf(t))return{type:"align",align:t};if("|"===t)return{type:"separator",separator:"|"};if(":"===t)return{type:"separator",separator:":"};throw new _k("Unknown column alignment: "+t,e)}),r={cols:n,hskipBeforeAndAfter:!0,maxNumCols:n.length};return fM(e.parser,r,pM(e.envName))},htmlBuilder:gM,mathmlBuilder:vM}),sM({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],n="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if("*"===e.envName.charAt(e.envName.length-1)){var i=e.parser;if(i.consumeSpaces(),"["===i.fetch().text){if(i.consume(),i.consumeSpaces(),n=i.fetch().text,-1==="lcr".indexOf(n))throw new _k("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),r.cols=[{type:"align",align:n}]}}var o=fM(e.parser,r,pM(e.envName)),a=Math.max(0,...o.body.map(e=>e.length));return o.cols=new Array(a).fill({type:"align",align:n}),t?{type:"leftright",mode:e.mode,body:[o],left:t[0],right:t[1],rightColor:void 0}:o},htmlBuilder:gM,mathmlBuilder:vM}),sM({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t=fM(e.parser,{arraystretch:.5},"script");return t.colSeparationType="small",t},htmlBuilder:gM,mathmlBuilder:vM}),sM({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var n=(dN(t[0])?[t[0]]:cN(t[0],"ordgroup").body).map(function(e){var t=hN(e).text;if(-1!=="lc".indexOf(t))return{type:"align",align:t};throw new _k("Unknown column alignment: "+t,e)});if(n.length>1)throw new _k("{subarray} can contain only one column");var r={cols:n,hskipBeforeAndAfter:!1,arraystretch:.5};if((r=fM(e.parser,r,"script")).body.length>0&&r.body[0].length>1)throw new _k("{subarray} can contain only one column");return r},htmlBuilder:gM,mathmlBuilder:vM}),sM({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t=fM(e.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},pM(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:gM,mathmlBuilder:vM}),sM({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:yM,htmlBuilder:gM,mathmlBuilder:vM}),sM({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){Mk.contains(["gather","gather*"],e.envName)&&hM(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:dM(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return fM(e.parser,t,"display")},htmlBuilder:gM,mathmlBuilder:vM}),sM({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:yM,htmlBuilder:gM,mathmlBuilder:vM}),sM({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){hM(e);var t={autoTag:dM(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return fM(e.parser,t,"display")},htmlBuilder:gM,mathmlBuilder:vM}),sM({type:"array",names:["CD"],props:{numArgs:0},handler:e=>(hM(e),function(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var n=e.fetch().text;if("&"!==n&&"\\\\"!==n){if("\\end"===n){0===t[t.length-1].length&&t.pop();break}throw new _k("Expected \\\\ or \\cr or \\end",e.nextToken)}e.consume()}for(var r=[],i=[r],o=0;o<t.length;o++){for(var a=t[o],s=EN(),l=0;l<a.length;l++)if(TN(a[l])){r.push(s);var u=hN(a[l+=1]).text,c=new Array(2);if(c[0]={type:"ordgroup",mode:"math",body:[]},c[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(u)>-1);else{if(!("<>AV".indexOf(u)>-1))throw new _k('Expected one of "<>AV=|." after @',a[l]);for(var h=0;h<2;h++){for(var d=!0,f=l+1;f<a.length;f++){if(_N(a[f],u)){d=!1,l=f;break}if(TN(a[f]))throw new _k("Missing a "+u+" character to complete a CD arrow.",a[f]);c[h].body.push(a[f])}if(d)throw new _k("Missing a "+u+" character to complete a CD arrow.",a[l])}}var p={type:"styling",body:[kN(u,c,e)],mode:"math",style:"display"};r.push(p),s=EN()}else s.body.push(a[l]);o%2==0?r.push(s):r.shift(),r=[],i.push(r)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25}),colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}(e.parser)),htmlBuilder:gM,mathmlBuilder:vM}),uM("\\nonumber","\\gdef\\@eqnsw{0}"),uM("\\notag","\\nonumber"),SS({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new _k(e.funcName+" valid only within array environment")}});var bM=aM;SS({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];if("ordgroup"!==i.type)throw new _k("Invalid environment name",i);for(var o="",a=0;a<i.body.length;++a)o+=cN(i.body[a],"textord").text;if("\\begin"===r){if(!bM.hasOwnProperty(o))throw new _k("No such environment: "+o,i);var s=bM[o],{args:l,optArgs:u}=n.parseArguments("\\begin{"+o+"}",s),c={mode:n.mode,envName:o,parser:n},h=s.handler(c,l,u);n.expect("\\end",!1);var d=n.nextToken,f=cN(n.parseFunction(),"environment");if(f.name!==o)throw new _k("Mismatch: \\begin{"+o+"} matched by \\end{"+f.name+"}",d);return h}return{type:"environment",mode:n.mode,name:o,nameGroup:i}}});var xM=(e,t)=>{var n=e.font,r=t.withFont(n);return VS(e.body,r)},wM=(e,t)=>{var n=e.font,r=t.withFont(n);return tN(e.body,r)},EM={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};SS({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=MS(t[0]),o=r;return o in EM&&(o=EM[o]),{type:"font",mode:n.mode,font:o.slice(1),body:i}},htmlBuilder:xM,mathmlBuilder:wM}),SS({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:n}=e,r=t[0],i=Mk.isCharacterBox(r);return{type:"mclass",mode:n.mode,mclass:xN(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:i}}}),SS({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r,breakOnTokenText:i}=e,{mode:o}=n,a=n.parseExpression(!0,i);return{type:"font",mode:o,font:"math"+r.slice(1),body:{type:"ordgroup",mode:n.mode,body:a}}},htmlBuilder:xM,mathmlBuilder:wM});var TM=(e,t)=>{var n=t;return"display"===e?n=n.id>=Gk.SCRIPT.id?n.text():Gk.DISPLAY:"text"===e&&n.size===Gk.DISPLAY.size?n=Gk.TEXT:"script"===e?n=Gk.SCRIPT:"scriptscript"===e&&(n=Gk.SCRIPTSCRIPT),n},_M=(e,t)=>{var n,r=TM(e.size,t.style),i=r.fracNum(),o=r.fracDen();n=t.havingStyle(i);var a=VS(e.numer,n,t);if(e.continued){var s=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;a.height=a.height<s?s:a.height,a.depth=a.depth<l?l:a.depth}n=t.havingStyle(o);var u,c,h,d,f,p,g,m,v,y,b=VS(e.denom,n,t);if(e.hasBarLine?(e.barSize?(c=sA(e.barSize,t),u=yS.makeLineSpan("frac-line",t,c)):u=yS.makeLineSpan("frac-line",t),c=u.height,h=u.height):(u=null,c=0,h=t.fontMetrics().defaultRuleThickness),r.size===Gk.DISPLAY.size||"display"===e.size?(d=t.fontMetrics().num1,f=c>0?3*h:7*h,p=t.fontMetrics().denom1):(c>0?(d=t.fontMetrics().num2,f=h):(d=t.fontMetrics().num3,f=3*h),p=t.fontMetrics().denom2),u){var x=t.fontMetrics().axisHeight;d-a.depth-(x+.5*c)<f&&(d+=f-(d-a.depth-(x+.5*c))),x-.5*c-(b.height-p)<f&&(p+=f-(x-.5*c-(b.height-p)));var w=-(x-.5*c);g=yS.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:p},{type:"elem",elem:u,shift:w},{type:"elem",elem:a,shift:-d}]},t)}else{var E=d-a.depth-(b.height-p);E<f&&(d+=.5*(f-E),p+=.5*(f-E)),g=yS.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:p},{type:"elem",elem:a,shift:-d}]},t)}return n=t.havingStyle(r),g.height*=n.sizeMultiplier/t.sizeMultiplier,g.depth*=n.sizeMultiplier/t.sizeMultiplier,m=r.size===Gk.DISPLAY.size?t.fontMetrics().delim1:r.size===Gk.SCRIPTSCRIPT.size?t.havingStyle(Gk.SCRIPT).fontMetrics().delim2:t.fontMetrics().delim2,v=null==e.leftDelim?GS(t,["mopen"]):JN.customSizedDelim(e.leftDelim,m,!0,t.havingStyle(r),e.mode,["mopen"]),y=e.continued?yS.makeSpan([]):null==e.rightDelim?GS(t,["mclose"]):JN.customSizedDelim(e.rightDelim,m,!0,t.havingStyle(r),e.mode,["mclose"]),yS.makeSpan(["mord"].concat(n.sizingClasses(t)),[v,yS.makeSpan(["mfrac"],[g]),y],t)},kM=(e,t)=>{var n=new WS.MathNode("mfrac",[tN(e.numer,t),tN(e.denom,t)]);if(e.hasBarLine){if(e.barSize){var r=sA(e.barSize,t);n.setAttribute("linethickness",lA(r))}}else n.setAttribute("linethickness","0px");var i=TM(e.size,t.style);if(i.size!==t.style.size){n=new WS.MathNode("mstyle",[n]);var o=i.size===Gk.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",o),n.setAttribute("scriptlevel","0")}if(null!=e.leftDelim||null!=e.rightDelim){var a=[];if(null!=e.leftDelim){var s=new WS.MathNode("mo",[new WS.TextNode(e.leftDelim.replace("\\",""))]);s.setAttribute("fence","true"),a.push(s)}if(a.push(n),null!=e.rightDelim){var l=new WS.MathNode("mo",[new WS.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),a.push(l)}return KS(a)}return n};SS({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var n,{parser:r,funcName:i}=e,o=t[0],a=t[1],s=null,l=null,u="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":n=!0;break;case"\\\\atopfrac":n=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":n=!1,s="(",l=")";break;case"\\\\bracefrac":n=!1,s="\\{",l="\\}";break;case"\\\\brackfrac":n=!1,s="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text"}return{type:"genfrac",mode:r.mode,continued:!1,numer:o,denom:a,hasBarLine:n,leftDelim:s,rightDelim:l,size:u,barSize:null}},htmlBuilder:_M,mathmlBuilder:kM}),SS({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0],o=t[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:i,denom:o,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),SS({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var t,{parser:n,funcName:r,token:i}=e;switch(r){case"\\over":t="\\frac";break;case"\\choose":t="\\binom";break;case"\\atop":t="\\\\atopfrac";break;case"\\brace":t="\\\\bracefrac";break;case"\\brack":t="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:n.mode,replaceWith:t,token:i}}});var AM=["display","text","script","scriptscript"],SM=function(e){var t=null;return e.length>0&&(t="."===(t=e)?null:t),t};SS({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var n,{parser:r}=e,i=t[4],o=t[5],a=MS(t[0]),s="atom"===a.type&&"open"===a.family?SM(a.text):null,l=MS(t[1]),u="atom"===l.type&&"close"===l.family?SM(l.text):null,c=cN(t[2],"size"),h=null;n=!!c.isBlank||(h=c.value).number>0;var d="auto",f=t[3];if("ordgroup"===f.type){if(f.body.length>0){var p=cN(f.body[0],"textord");d=AM[Number(p.text)]}}else f=cN(f,"textord"),d=AM[Number(f.text)];return{type:"genfrac",mode:r.mode,numer:i,denom:o,continued:!1,hasBarLine:n,barSize:h,leftDelim:s,rightDelim:u,size:d}},htmlBuilder:_M,mathmlBuilder:kM}),SS({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:n,funcName:r,token:i}=e;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:cN(t[0],"size").value,token:i}}}),SS({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0],o=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e}(cN(t[1],"infix").size),a=t[2],s=o.number>0;return{type:"genfrac",mode:n.mode,numer:i,denom:a,continued:!1,hasBarLine:s,barSize:o,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:_M,mathmlBuilder:kM});var NM=(e,t)=>{var n,r,i=t.style;"supsub"===e.type?(n=e.sup?VS(e.sup,t.havingStyle(i.sup()),t):VS(e.sub,t.havingStyle(i.sub()),t),r=cN(e.base,"horizBrace")):r=cN(e,"horizBrace");var o,a=VS(r.base,t.havingBaseStyle(Gk.DISPLAY)),s=uN(r,t);if(r.isOver?(o=yS.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},t)).children[0].children[0].children[1].classes.push("svg-align"):(o=yS.makeVList({positionType:"bottom",positionData:a.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},t)).children[0].children[0].children[0].classes.push("svg-align"),n){var l=yS.makeSpan(["mord",r.isOver?"mover":"munder"],[o],t);o=r.isOver?yS.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},t):yS.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return yS.makeSpan(["mord",r.isOver?"mover":"munder"],[o],t)};SS({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:t[0]}},htmlBuilder:NM,mathmlBuilder:(e,t)=>{var n=lN(e.label);return new WS.MathNode(e.isOver?"mover":"munder",[tN(e.base,t),n])}}),SS({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[1],i=cN(t[0],"url").url;return n.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:n.mode,href:i,body:CS(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var n=PS(e.body,t,!1);return yS.makeAnchor(e.href,[],n,t)},mathmlBuilder:(e,t)=>{var n=eN(e.body,t);return n instanceof YS||(n=new YS("mrow",[n])),n.setAttribute("href",e.href),n}}),SS({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=cN(t[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var i=[],o=0;o<r.length;o++){var a=r[o];"~"===a&&(a="\\textasciitilde"),i.push({type:"textord",mode:"text",text:a})}var s={type:"text",mode:n.mode,font:"\\texttt",body:i};return{type:"href",mode:n.mode,href:r,body:CS(s)}}}),SS({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:n}=e;return{type:"hbox",mode:n.mode,body:CS(t[0])}},htmlBuilder(e,t){var n=PS(e.body,t,!1);return yS.makeFragment(n)},mathmlBuilder:(e,t)=>new WS.MathNode("mrow",JS(e.body,t))}),SS({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var n,{parser:r,funcName:i,token:o}=e,a=cN(t[0],"raw").string,s=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l={};switch(i){case"\\htmlClass":l.class=a,n={command:"\\htmlClass",class:a};break;case"\\htmlId":l.id=a,n={command:"\\htmlId",id:a};break;case"\\htmlStyle":l.style=a,n={command:"\\htmlStyle",style:a};break;case"\\htmlData":for(var u=a.split(","),c=0;c<u.length;c++){var h=u[c].split("=");if(2!==h.length)throw new _k("Error parsing key-value for \\htmlData");l["data-"+h[0].trim()]=h[1].trim()}n={command:"\\htmlData",attributes:l};break;default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(n)?{type:"html",mode:r.mode,attributes:l,body:CS(s)}:r.formatUnsupportedCmd(i)},htmlBuilder:(e,t)=>{var n=PS(e.body,t,!1),r=["enclosing"];e.attributes.class&&r.push(...e.attributes.class.trim().split(/\s+/));var i=yS.makeSpan(r,n,t);for(var o in e.attributes)"class"!==o&&e.attributes.hasOwnProperty(o)&&i.setAttribute(o,e.attributes[o]);return i},mathmlBuilder:(e,t)=>eN(e.body,t)}),SS({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"htmlmathml",mode:n.mode,html:CS(t[0]),mathml:CS(t[1])}},htmlBuilder:(e,t)=>{var n=PS(e.html,t,!1);return yS.makeFragment(n)},mathmlBuilder:(e,t)=>eN(e.mathml,t)});var MM=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new _k("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(t[1]+t[2]),unit:t[3]};if(!aA(n))throw new _k("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};SS({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,n)=>{var{parser:r}=e,i={number:0,unit:"em"},o={number:.9,unit:"em"},a={number:0,unit:"em"},s="";if(n[0])for(var l=cN(n[0],"raw").string.split(","),u=0;u<l.length;u++){var c=l[u].split("=");if(2===c.length){var h=c[1].trim();switch(c[0].trim()){case"alt":s=h;break;case"width":i=MM(h);break;case"height":o=MM(h);break;case"totalheight":a=MM(h);break;default:throw new _k("Invalid key: '"+c[0]+"' in \\includegraphics.")}}}var d=cN(t[0],"url").url;return""===s&&(s=(s=(s=d).replace(/^.*[\\/]/,"")).substring(0,s.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:d})?{type:"includegraphics",mode:r.mode,alt:s,width:i,height:o,totalheight:a,src:d}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var n=sA(e.height,t),r=0;e.totalheight.number>0&&(r=sA(e.totalheight,t)-n);var i=0;e.width.number>0&&(i=sA(e.width,t));var o={height:lA(n+r)};i>0&&(o.width=lA(i)),r>0&&(o.verticalAlign=lA(-r));var a=new mA(e.src,e.alt,o);return a.height=n,a.depth=r,a},mathmlBuilder:(e,t)=>{var n=new WS.MathNode("mglyph",[]);n.setAttribute("alt",e.alt);var r=sA(e.height,t),i=0;if(e.totalheight.number>0&&(i=sA(e.totalheight,t)-r,n.setAttribute("valign",lA(-i))),n.setAttribute("height",lA(r+i)),e.width.number>0){var o=sA(e.width,t);n.setAttribute("width",lA(o))}return n.setAttribute("src",e.src),n}}),SS({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,i=cN(t[0],"size");if(n.settings.strict){var o="m"===r[1],a="mu"===i.value.unit;o?(a||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, not "+i.value.unit+" units"),"math"!==n.mode&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):a&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:i.value}},htmlBuilder:(e,t)=>yS.makeGlue(e.dimension,t),mathmlBuilder(e,t){var n=sA(e.dimension,t);return new WS.SpaceNode(n)}}),SS({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:i}},htmlBuilder:(e,t)=>{var n;"clap"===e.alignment?(n=yS.makeSpan([],[VS(e.body,t)]),n=yS.makeSpan(["inner"],[n],t)):n=yS.makeSpan(["inner"],[VS(e.body,t)]);var r=yS.makeSpan(["fix"],[]),i=yS.makeSpan([e.alignment],[n,r],t),o=yS.makeSpan(["strut"]);return o.style.height=lA(i.height+i.depth),i.depth&&(o.style.verticalAlign=lA(-i.depth)),i.children.unshift(o),i=yS.makeSpan(["thinbox"],[i],t),yS.makeSpan(["mord","vbox"],[i],t)},mathmlBuilder:(e,t)=>{var n=new WS.MathNode("mpadded",[tN(e.body,t)]);if("rlap"!==e.alignment){var r="llap"===e.alignment?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}}),SS({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:n,parser:r}=e,i=r.mode;r.switchMode("math");var o="\\("===n?"\\)":"$",a=r.parseExpression(!1,o);return r.expect(o),r.switchMode(i),{type:"styling",mode:r.mode,style:"text",body:a}}}),SS({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new _k("Mismatched "+e.funcName)}});var CM=(e,t)=>{switch(t.style.size){case Gk.DISPLAY.size:return e.display;case Gk.TEXT.size:return e.text;case Gk.SCRIPT.size:return e.script;case Gk.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};SS({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"mathchoice",mode:n.mode,display:CS(t[0]),text:CS(t[1]),script:CS(t[2]),scriptscript:CS(t[3])}},htmlBuilder:(e,t)=>{var n=CM(e,t),r=PS(n,t,!1);return yS.makeFragment(r)},mathmlBuilder:(e,t)=>{var n=CM(e,t);return eN(n,t)}});var IM=(e,t,n,r,i,o,a)=>{e=yS.makeSpan([],[e]);var s,l,u,c=n&&Mk.isCharacterBox(n);if(t){var h=VS(t,r.havingStyle(i.sup()),r);l={elem:h,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-h.depth)}}if(n){var d=VS(n,r.havingStyle(i.sub()),r);s={elem:d,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-d.height)}}if(l&&s){var f=r.fontMetrics().bigOpSpacing5+s.elem.height+s.elem.depth+s.kern+e.depth+a;u=yS.makeVList({positionType:"bottom",positionData:f,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:s.elem,marginLeft:lA(-o)},{type:"kern",size:s.kern},{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:lA(o)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(s){var p=e.height-a;u=yS.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:s.elem,marginLeft:lA(-o)},{type:"kern",size:s.kern},{type:"elem",elem:e}]},r)}else{if(!l)return e;var g=e.depth+a;u=yS.makeVList({positionType:"bottom",positionData:g,children:[{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:lA(o)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}var m=[u];if(s&&0!==o&&!c){var v=yS.makeSpan(["mspace"],[],r);v.style.marginRight=lA(o),m.unshift(v)}return yS.makeSpan(["mop","op-limits"],m,r)},RM=["\\smallint"],LM=(e,t)=>{var n,r,i,o=!1;"supsub"===e.type?(n=e.sup,r=e.sub,i=cN(e.base,"op"),o=!0):i=cN(e,"op");var a,s=t.style,l=!1;if(s.size===Gk.DISPLAY.size&&i.symbol&&!Mk.contains(RM,i.name)&&(l=!0),i.symbol){var u=l?"Size2-Regular":"Size1-Regular",c="";if("\\oiint"!==i.name&&"\\oiiint"!==i.name||(c=i.name.slice(1),i.name="oiint"===c?"\\iint":"\\iiint"),a=yS.makeSymbol(i.name,u,"math",t,["mop","op-symbol",l?"large-op":"small-op"]),c.length>0){var h=a.italic,d=yS.staticSvg(c+"Size"+(l?"2":"1"),t);a=yS.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:0},{type:"elem",elem:d,shift:l?.08:0}]},t),i.name="\\"+c,a.classes.unshift("mop"),a.italic=h}}else if(i.body){var f=PS(i.body,t,!0);1===f.length&&f[0]instanceof yA?(a=f[0]).classes[0]="mop":a=yS.makeSpan(["mop"],f,t)}else{for(var p=[],g=1;g<i.name.length;g++)p.push(yS.mathsym(i.name[g],i.mode,t));a=yS.makeSpan(["mop"],p,t)}var m=0,v=0;return(a instanceof yA||"\\oiint"===i.name||"\\oiiint"===i.name)&&!i.suppressBaseShift&&(m=(a.height-a.depth)/2-t.fontMetrics().axisHeight,v=a.italic),o?IM(a,n,r,t,s,v,m):(m&&(a.style.position="relative",a.style.top=lA(m)),a)},OM=(e,t)=>{var n;if(e.symbol)n=new YS("mo",[XS(e.name,e.mode)]),Mk.contains(RM,e.name)&&n.setAttribute("largeop","false");else if(e.body)n=new YS("mo",JS(e.body,t));else{n=new YS("mi",[new qS(e.name.slice(1))]);var r=new YS("mo",[XS("⁡","text")]);n=e.parentIsSupSub?new YS("mrow",[n,r]):$S([n,r])}return n},DM={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};SS({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=r;return 1===i.length&&(i=DM[i]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:LM,mathmlBuilder:OM}),SS({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:CS(r)}},htmlBuilder:LM,mathmlBuilder:OM});var PM={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};SS({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:LM,mathmlBuilder:OM}),SS({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:LM,mathmlBuilder:OM}),SS({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e,r=n;return 1===r.length&&(r=PM[r]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:LM,mathmlBuilder:OM});var BM=(e,t)=>{var n,r,i,o,a=!1;if("supsub"===e.type?(n=e.sup,r=e.sub,i=cN(e.base,"operatorname"),a=!0):i=cN(e,"operatorname"),i.body.length>0){for(var s=i.body.map(e=>{var t=e.text;return"string"==typeof t?{type:"textord",mode:e.mode,text:t}:e}),l=PS(s,t.withFont("mathrm"),!0),u=0;u<l.length;u++){var c=l[u];c instanceof yA&&(c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=yS.makeSpan(["mop"],l,t)}else o=yS.makeSpan(["mop"],[],t);return a?IM(o,n,r,t,t.style,0,0):o};function FM(e,t,n){for(var r=PS(e,t,!1),i=t.sizeMultiplier/n.sizeMultiplier,o=0;o<r.length;o++){var a=r[o].classes.indexOf("sizing");a<0?Array.prototype.push.apply(r[o].classes,t.sizingClasses(n)):r[o].classes[a+1]==="reset-size"+t.size&&(r[o].classes[a+1]="reset-size"+n.size),r[o].height*=i,r[o].depth*=i}return yS.makeFragment(r)}SS({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0];return{type:"operatorname",mode:n.mode,body:CS(i),alwaysHandleSupSub:"\\operatornamewithlimits"===r,limits:!1,parentIsSupSub:!1}},htmlBuilder:BM,mathmlBuilder:(e,t)=>{for(var n=JS(e.body,t.withFont("mathrm")),r=!0,i=0;i<n.length;i++){var o=n[i];if(o instanceof WS.SpaceNode);else if(o instanceof WS.MathNode)switch(o.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var a=o.children[0];1===o.children.length&&a instanceof WS.TextNode?a.text=a.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break;default:r=!1}else r=!1}if(r){var s=n.map(e=>e.toText()).join("");n=[new WS.TextNode(s)]}var l=new WS.MathNode("mi",n);l.setAttribute("mathvariant","normal");var u=new WS.MathNode("mo",[XS("⁡","text")]);return e.parentIsSupSub?new WS.MathNode("mrow",[l,u]):WS.newDocumentFragment([l,u])}}),uM("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),NS({type:"ordgroup",htmlBuilder:(e,t)=>e.semisimple?yS.makeFragment(PS(e.body,t,!1)):yS.makeSpan(["mord"],PS(e.body,t,!0),t),mathmlBuilder:(e,t)=>eN(e.body,t,!0)}),SS({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:n}=e,r=t[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder(e,t){var n=VS(e.body,t.havingCrampedStyle()),r=yS.makeLineSpan("overline-line",t),i=t.fontMetrics().defaultRuleThickness,o=yS.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r},{type:"kern",size:i}]},t);return yS.makeSpan(["mord","overline"],[o],t)},mathmlBuilder(e,t){var n=new WS.MathNode("mo",[new WS.TextNode("‾")]);n.setAttribute("stretchy","true");var r=new WS.MathNode("mover",[tN(e.body,t),n]);return r.setAttribute("accent","true"),r}}),SS({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"phantom",mode:n.mode,body:CS(r)}},htmlBuilder:(e,t)=>{var n=PS(e.body,t.withPhantom(),!1);return yS.makeFragment(n)},mathmlBuilder:(e,t)=>{var n=JS(e.body,t);return new WS.MathNode("mphantom",n)}}),SS({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=yS.makeSpan([],[VS(e.body,t.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=yS.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t),yS.makeSpan(["mord"],[n],t)},mathmlBuilder:(e,t)=>{var n=JS(CS(e.body),t),r=new WS.MathNode("mphantom",n),i=new WS.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}}),SS({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=yS.makeSpan(["inner"],[VS(e.body,t.withPhantom())]),r=yS.makeSpan(["fix"],[]);return yS.makeSpan(["mord","rlap"],[n,r],t)},mathmlBuilder:(e,t)=>{var n=JS(CS(e.body),t),r=new WS.MathNode("mphantom",n),i=new WS.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}}),SS({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e,r=cN(t[0],"size").value,i=t[1];return{type:"raisebox",mode:n.mode,dy:r,body:i}},htmlBuilder(e,t){var n=VS(e.body,t),r=sA(e.dy,t);return yS.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},t)},mathmlBuilder(e,t){var n=new WS.MathNode("mpadded",[tN(e.body,t)]),r=e.dy.number+e.dy.unit;return n.setAttribute("voffset",r),n}}),SS({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}}),SS({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,n){var{parser:r}=e,i=n[0],o=cN(t[0],"size"),a=cN(t[1],"size");return{type:"rule",mode:r.mode,shift:i&&cN(i,"size").value,width:o.value,height:a.value}},htmlBuilder(e,t){var n=yS.makeSpan(["mord","rule"],[],t),r=sA(e.width,t),i=sA(e.height,t),o=e.shift?sA(e.shift,t):0;return n.style.borderRightWidth=lA(r),n.style.borderTopWidth=lA(i),n.style.bottom=lA(o),n.width=r,n.height=i+o,n.depth=-o,n.maxFontSize=1.125*i*t.sizeMultiplier,n},mathmlBuilder(e,t){var n=sA(e.width,t),r=sA(e.height,t),i=e.shift?sA(e.shift,t):0,o=t.color&&t.getColor()||"black",a=new WS.MathNode("mspace");a.setAttribute("mathbackground",o),a.setAttribute("width",lA(n)),a.setAttribute("height",lA(r));var s=new WS.MathNode("mpadded",[a]);return i>=0?s.setAttribute("height",lA(i)):(s.setAttribute("height",lA(i)),s.setAttribute("depth",lA(-i))),s.setAttribute("voffset",lA(i)),s}});var zM=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];SS({type:"sizing",names:zM,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:n,funcName:r,parser:i}=e,o=i.parseExpression(!1,n);return{type:"sizing",mode:i.mode,size:zM.indexOf(r)+1,body:o}},htmlBuilder:(e,t)=>{var n=t.havingSize(e.size);return FM(e.body,n,t)},mathmlBuilder:(e,t)=>{var n=t.havingSize(e.size),r=JS(e.body,n),i=new WS.MathNode("mstyle",r);return i.setAttribute("mathsize",lA(n.sizeMultiplier)),i}}),SS({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,n)=>{var{parser:r}=e,i=!1,o=!1,a=n[0]&&cN(n[0],"ordgroup");if(a)for(var s="",l=0;l<a.body.length;++l){if("t"===(s=a.body[l].text))i=!0;else{if("b"!==s){i=!1,o=!1;break}o=!0}}else i=!0,o=!0;var u=t[0];return{type:"smash",mode:r.mode,body:u,smashHeight:i,smashDepth:o}},htmlBuilder:(e,t)=>{var n=yS.makeSpan([],[VS(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return n;if(e.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(e.smashDepth&&(n.depth=0,n.children))for(var i=0;i<n.children.length;i++)n.children[i].depth=0;var o=yS.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t);return yS.makeSpan(["mord"],[o],t)},mathmlBuilder:(e,t)=>{var n=new WS.MathNode("mpadded",[tN(e.body,t)]);return e.smashHeight&&n.setAttribute("height","0px"),e.smashDepth&&n.setAttribute("depth","0px"),n}}),SS({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r}=e,i=n[0],o=t[0];return{type:"sqrt",mode:r.mode,body:o,index:i}},htmlBuilder(e,t){var n=VS(e.body,t.havingCrampedStyle());0===n.height&&(n.height=t.fontMetrics().xHeight),n=yS.wrapFragment(n,t);var r=t.fontMetrics().defaultRuleThickness,i=r;t.style.id<Gk.TEXT.id&&(i=t.fontMetrics().xHeight);var o=r+i/4,a=n.height+n.depth+o+r,{span:s,ruleWidth:l,advanceWidth:u}=JN.sqrtImage(a,t),c=s.height-l;c>n.height+n.depth+o&&(o=(o+c-n.height-n.depth)/2);var h=s.height-n.height-o-l;n.style.paddingLeft=lA(u);var d=yS.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+h)},{type:"elem",elem:s},{type:"kern",size:l}]},t);if(e.index){var f=t.havingStyle(Gk.SCRIPTSCRIPT),p=VS(e.index,f,t),g=.6*(d.height-d.depth),m=yS.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:p}]},t),v=yS.makeSpan(["root"],[m]);return yS.makeSpan(["mord","sqrt"],[v,d],t)}return yS.makeSpan(["mord","sqrt"],[d],t)},mathmlBuilder(e,t){var{body:n,index:r}=e;return r?new WS.MathNode("mroot",[tN(n,t),tN(r,t)]):new WS.MathNode("msqrt",[tN(n,t)])}});var UM={display:Gk.DISPLAY,text:Gk.TEXT,script:Gk.SCRIPT,scriptscript:Gk.SCRIPTSCRIPT};SS({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:n,funcName:r,parser:i}=e,o=i.parseExpression(!0,n),a=r.slice(1,r.length-5);return{type:"styling",mode:i.mode,style:a,body:o}},htmlBuilder(e,t){var n=UM[e.style],r=t.havingStyle(n).withFont("");return FM(e.body,r,t)},mathmlBuilder(e,t){var n=UM[e.style],r=t.havingStyle(n),i=JS(e.body,r),o=new WS.MathNode("mstyle",i),a={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[e.style];return o.setAttribute("scriptlevel",a[0]),o.setAttribute("displaystyle",a[1]),o}});NS({type:"supsub",htmlBuilder(e,t){var n=function(e,t){var n=e.base;return n?"op"===n.type?n.limits&&(t.style.size===Gk.DISPLAY.size||n.alwaysHandleSupSub)?LM:null:"operatorname"===n.type?n.alwaysHandleSupSub&&(t.style.size===Gk.DISPLAY.size||n.limits)?BM:null:"accent"===n.type?Mk.isCharacterBox(n.base)?fN:null:"horizBrace"===n.type&&!e.sub===n.isOver?NM:null:null}(e,t);if(n)return n(e,t);var r,i,o,{base:a,sup:s,sub:l}=e,u=VS(a,t),c=t.fontMetrics(),h=0,d=0,f=a&&Mk.isCharacterBox(a);if(s){var p=t.havingStyle(t.style.sup());r=VS(s,p,t),f||(h=u.height-p.fontMetrics().supDrop*p.sizeMultiplier/t.sizeMultiplier)}if(l){var g=t.havingStyle(t.style.sub());i=VS(l,g,t),f||(d=u.depth+g.fontMetrics().subDrop*g.sizeMultiplier/t.sizeMultiplier)}o=t.style===Gk.DISPLAY?c.sup1:t.style.cramped?c.sup3:c.sup2;var m,v=t.sizeMultiplier,y=lA(.5/c.ptPerEm/v),b=null;if(i){var x=e.base&&"op"===e.base.type&&e.base.name&&("\\oiint"===e.base.name||"\\oiiint"===e.base.name);(u instanceof yA||x)&&(b=lA(-u.italic))}if(r&&i){h=Math.max(h,o,r.depth+.25*c.xHeight),d=Math.max(d,c.sub2);var w=4*c.defaultRuleThickness;if(h-r.depth-(i.height-d)<w){d=w-(h-r.depth)+i.height;var E=.8*c.xHeight-(h-r.depth);E>0&&(h+=E,d-=E)}var T=[{type:"elem",elem:i,shift:d,marginRight:y,marginLeft:b},{type:"elem",elem:r,shift:-h,marginRight:y}];m=yS.makeVList({positionType:"individualShift",children:T},t)}else if(i){d=Math.max(d,c.sub1,i.height-.8*c.xHeight);var _=[{type:"elem",elem:i,marginLeft:b,marginRight:y}];m=yS.makeVList({positionType:"shift",positionData:d,children:_},t)}else{if(!r)throw new Error("supsub must have either sup or sub.");h=Math.max(h,o,r.depth+.25*c.xHeight),m=yS.makeVList({positionType:"shift",positionData:-h,children:[{type:"elem",elem:r,marginRight:y}]},t)}var k=US(u,"right")||"mord";return yS.makeSpan([k],[u,yS.makeSpan(["msupsub"],[m])],t)},mathmlBuilder(e,t){var n,r=!1;e.base&&"horizBrace"===e.base.type&&!!e.sup===e.base.isOver&&(r=!0,n=e.base.isOver),!e.base||"op"!==e.base.type&&"operatorname"!==e.base.type||(e.base.parentIsSupSub=!0);var i,o=[tN(e.base,t)];if(e.sub&&o.push(tN(e.sub,t)),e.sup&&o.push(tN(e.sup,t)),r)i=n?"mover":"munder";else if(e.sub)if(e.sup){var a=e.base;i=a&&"op"===a.type&&a.limits&&t.style===Gk.DISPLAY||a&&"operatorname"===a.type&&a.alwaysHandleSupSub&&(t.style===Gk.DISPLAY||a.limits)?"munderover":"msubsup"}else{var s=e.base;i=s&&"op"===s.type&&s.limits&&(t.style===Gk.DISPLAY||s.alwaysHandleSupSub)||s&&"operatorname"===s.type&&s.alwaysHandleSupSub&&(s.limits||t.style===Gk.DISPLAY)?"munder":"msub"}else{var l=e.base;i=l&&"op"===l.type&&l.limits&&(t.style===Gk.DISPLAY||l.alwaysHandleSupSub)||l&&"operatorname"===l.type&&l.alwaysHandleSupSub&&(l.limits||t.style===Gk.DISPLAY)?"mover":"msup"}return new WS.MathNode(i,o)}}),NS({type:"atom",htmlBuilder:(e,t)=>yS.mathsym(e.text,e.mode,t,["m"+e.family]),mathmlBuilder(e,t){var n=new WS.MathNode("mo",[XS(e.text,e.mode)]);if("bin"===e.family){var r=ZS(e,t);"bold-italic"===r&&n.setAttribute("mathvariant",r)}else"punct"===e.family?n.setAttribute("separator","true"):"open"!==e.family&&"close"!==e.family||n.setAttribute("stretchy","false");return n}});var GM={mi:"italic",mn:"normal",mtext:"normal"};NS({type:"mathord",htmlBuilder:(e,t)=>yS.makeOrd(e,t,"mathord"),mathmlBuilder(e,t){var n=new WS.MathNode("mi",[XS(e.text,e.mode,t)]),r=ZS(e,t)||"italic";return r!==GM[n.type]&&n.setAttribute("mathvariant",r),n}}),NS({type:"textord",htmlBuilder:(e,t)=>yS.makeOrd(e,t,"textord"),mathmlBuilder(e,t){var n,r=XS(e.text,e.mode,t),i=ZS(e,t)||"normal";return n="text"===e.mode?new WS.MathNode("mtext",[r]):/[0-9]/.test(e.text)?new WS.MathNode("mn",[r]):"\\prime"===e.text?new WS.MathNode("mo",[r]):new WS.MathNode("mi",[r]),i!==GM[n.type]&&n.setAttribute("mathvariant",i),n}});var VM={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},jM={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};NS({type:"spacing",htmlBuilder(e,t){if(jM.hasOwnProperty(e.text)){var n=jM[e.text].className||"";if("text"===e.mode){var r=yS.makeOrd(e,t,"textord");return r.classes.push(n),r}return yS.makeSpan(["mspace",n],[yS.mathsym(e.text,e.mode,t)],t)}if(VM.hasOwnProperty(e.text))return yS.makeSpan(["mspace",VM[e.text]],[],t);throw new _k('Unknown type of space "'+e.text+'"')},mathmlBuilder(e,t){if(!jM.hasOwnProperty(e.text)){if(VM.hasOwnProperty(e.text))return new WS.MathNode("mspace");throw new _k('Unknown type of space "'+e.text+'"')}return new WS.MathNode("mtext",[new WS.TextNode(" ")])}});var HM=()=>{var e=new WS.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};NS({type:"tag",mathmlBuilder(e,t){var n=new WS.MathNode("mtable",[new WS.MathNode("mtr",[HM(),new WS.MathNode("mtd",[eN(e.body,t)]),HM(),new WS.MathNode("mtd",[eN(e.tag,t)])])]);return n.setAttribute("width","100%"),n}});var $M={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},YM={"\\textbf":"textbf","\\textmd":"textmd"},qM={"\\textit":"textit","\\textup":"textup"},WM=(e,t)=>{var n=e.font;return n?$M[n]?t.withTextFontFamily($M[n]):YM[n]?t.withTextFontWeight(YM[n]):"\\emph"===n?"textit"===t.fontShape?t.withTextFontShape("textup"):t.withTextFontShape("textit"):t.withTextFontShape(qM[n]):t};SS({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];return{type:"text",mode:n.mode,body:CS(i),font:r}},htmlBuilder(e,t){var n=WM(e,t),r=PS(e.body,n,!0);return yS.makeSpan(["mord","text"],r,n)},mathmlBuilder(e,t){var n=WM(e,t);return eN(e.body,n)}}),SS({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"underline",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=VS(e.body,t),r=yS.makeLineSpan("underline-line",t),i=t.fontMetrics().defaultRuleThickness,o=yS.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:i},{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n}]},t);return yS.makeSpan(["mord","underline"],[o],t)},mathmlBuilder(e,t){var n=new WS.MathNode("mo",[new WS.TextNode("‾")]);n.setAttribute("stretchy","true");var r=new WS.MathNode("munder",[tN(e.body,t),n]);return r.setAttribute("accentunder","true"),r}}),SS({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"vcenter",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=VS(e.body,t),r=t.fontMetrics().axisHeight,i=.5*(n.height-r-(n.depth+r));return yS.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:n}]},t)},mathmlBuilder:(e,t)=>new WS.MathNode("mpadded",[tN(e.body,t)],["vcenter"])}),SS({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,n){throw new _k("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var n=XM(e),r=[],i=t.havingStyle(t.style.text()),o=0;o<n.length;o++){var a=n[o];"~"===a&&(a="\\textasciitilde"),r.push(yS.makeSymbol(a,"Typewriter-Regular",e.mode,i,["mord","texttt"]))}return yS.makeSpan(["mord","text"].concat(i.sizingClasses(t)),yS.tryCombineChars(r),i)},mathmlBuilder(e,t){var n=new WS.TextNode(XM(e)),r=new WS.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var XM=e=>e.body.replace(/ /g,e.star?"␣":" "),KM=_S,ZM="[ \r\n\t]",QM="(\\\\[a-zA-Z@]+)"+ZM+"*",JM="[̀-ͯ]",eC=new RegExp(JM+"+$"),tC="("+ZM+"+)|\\\\(\n|[ \r\t]+\n?)[ \r\t]*|([!-\\[\\]-‧‪-퟿豈-￿]"+JM+"*|[\ud800-\udbff][\udc00-\udfff]"+JM+"*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|"+QM+"|\\\\[^\ud800-\udfff])";let nC=class{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(tC,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new Tk("EOF",new Ek(this,t,t));var n=this.tokenRegex.exec(e);if(null===n||n.index!==t)throw new _k("Unexpected character: '"+e[t]+"'",new Tk(e[t],new Ek(this,t,t+1)));var r=n[6]||n[3]||(n[2]?"\\ ":" ");if(14===this.catcodes[r]){var i=e.indexOf("\n",this.tokenRegex.lastIndex);return-1===i?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new Tk(r,new Ek(this,t,this.tokenRegex.lastIndex))}};class rC{constructor(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(0===this.undefStack.length)throw new _k("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(null==e[t]?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,n){if(void 0===n&&(n=!1),n){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}null==t?delete this.current[e]:this.current[e]=t}}var iC=lM;uM("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}}),uM("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}}),uM("\\@firstoftwo",function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}}),uM("\\@secondoftwo",function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}}),uM("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var n=e.future();return 1===t[0].length&&t[0][0].text===n.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}}),uM("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),uM("\\TextOrMath",function(e){var t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var oC={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};uM("\\char",function(e){var t,n=e.popToken(),r="";if("'"===n.text)t=8,n=e.popToken();else if('"'===n.text)t=16,n=e.popToken();else if("`"===n.text)if("\\"===(n=e.popToken()).text[0])r=n.text.charCodeAt(1);else{if("EOF"===n.text)throw new _k("\\char` missing argument");r=n.text.charCodeAt(0)}else t=10;if(t){if(null==(r=oC[n.text])||r>=t)throw new _k("Invalid base-"+t+" digit "+n.text);for(var i;null!=(i=oC[e.future().text])&&i<t;)r*=t,r+=i,e.popToken()}return"\\@char{"+r+"}"});var aC=(e,t,n,r)=>{var i=e.consumeArg().tokens;if(1!==i.length)throw new _k("\\newcommand's first argument must be a macro name");var o=i[0].text,a=e.isDefined(o);if(a&&!t)throw new _k("\\newcommand{"+o+"} attempting to redefine "+o+"; use \\renewcommand");if(!a&&!n)throw new _k("\\renewcommand{"+o+"} when command "+o+" does not yet exist; use \\newcommand");var s=0;if(1===(i=e.consumeArg().tokens).length&&"["===i[0].text){for(var l="",u=e.expandNextToken();"]"!==u.text&&"EOF"!==u.text;)l+=u.text,u=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new _k("Invalid number of arguments: "+l);s=parseInt(l),i=e.consumeArg().tokens}return a&&r||e.macros.set(o,{tokens:i,numArgs:s}),""};uM("\\newcommand",e=>aC(e,!1,!0,!1)),uM("\\renewcommand",e=>aC(e,!0,!1,!1)),uM("\\providecommand",e=>aC(e,!0,!0,!0)),uM("\\message",e=>{e.consumeArgs(1)[0];return""}),uM("\\errmessage",e=>{e.consumeArgs(1)[0];return""}),uM("\\show",e=>{e.popToken().text;return""}),uM("\\bgroup","{"),uM("\\egroup","}"),uM("~","\\nobreakspace"),uM("\\lq","`"),uM("\\rq","'"),uM("\\aa","\\r a"),uM("\\AA","\\r A"),uM("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),uM("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),uM("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),uM("ℬ","\\mathscr{B}"),uM("ℰ","\\mathscr{E}"),uM("ℱ","\\mathscr{F}"),uM("ℋ","\\mathscr{H}"),uM("ℐ","\\mathscr{I}"),uM("ℒ","\\mathscr{L}"),uM("ℳ","\\mathscr{M}"),uM("ℛ","\\mathscr{R}"),uM("ℭ","\\mathfrak{C}"),uM("ℌ","\\mathfrak{H}"),uM("ℨ","\\mathfrak{Z}"),uM("\\Bbbk","\\Bbb{k}"),uM("·","\\cdotp"),uM("\\llap","\\mathllap{\\textrm{#1}}"),uM("\\rlap","\\mathrlap{\\textrm{#1}}"),uM("\\clap","\\mathclap{\\textrm{#1}}"),uM("\\mathstrut","\\vphantom{(}"),uM("\\underbar","\\underline{\\text{#1}}"),uM("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),uM("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),uM("\\ne","\\neq"),uM("≠","\\neq"),uM("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),uM("∉","\\notin"),uM("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),uM("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),uM("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),uM("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),uM("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),uM("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),uM("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),uM("⟂","\\perp"),uM("‼","\\mathclose{!\\mkern-0.8mu!}"),uM("∌","\\notni"),uM("⌜","\\ulcorner"),uM("⌝","\\urcorner"),uM("⌞","\\llcorner"),uM("⌟","\\lrcorner"),uM("©","\\copyright"),uM("®","\\textregistered"),uM("️","\\textregistered"),uM("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),uM("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),uM("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),uM("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),uM("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),uM("⋮","\\vdots"),uM("\\varGamma","\\mathit{\\Gamma}"),uM("\\varDelta","\\mathit{\\Delta}"),uM("\\varTheta","\\mathit{\\Theta}"),uM("\\varLambda","\\mathit{\\Lambda}"),uM("\\varXi","\\mathit{\\Xi}"),uM("\\varPi","\\mathit{\\Pi}"),uM("\\varSigma","\\mathit{\\Sigma}"),uM("\\varUpsilon","\\mathit{\\Upsilon}"),uM("\\varPhi","\\mathit{\\Phi}"),uM("\\varPsi","\\mathit{\\Psi}"),uM("\\varOmega","\\mathit{\\Omega}"),uM("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),uM("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),uM("\\boxed","\\fbox{$\\displaystyle{#1}$}"),uM("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),uM("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),uM("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),uM("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),uM("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var sC={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};uM("\\dots",function(e){var t="\\dotso",n=e.expandAfterFuture().text;return n in sC?t=sC[n]:("\\not"===n.slice(0,4)||n in kA.math&&Mk.contains(["bin","rel"],kA.math[n].group))&&(t="\\dotsb"),t});var lC={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};uM("\\dotso",function(e){return e.future().text in lC?"\\ldots\\,":"\\ldots"}),uM("\\dotsc",function(e){var t=e.future().text;return t in lC&&","!==t?"\\ldots\\,":"\\ldots"}),uM("\\cdots",function(e){return e.future().text in lC?"\\@cdots\\,":"\\@cdots"}),uM("\\dotsb","\\cdots"),uM("\\dotsm","\\cdots"),uM("\\dotsi","\\!\\cdots"),uM("\\dotsx","\\ldots\\,"),uM("\\DOTSI","\\relax"),uM("\\DOTSB","\\relax"),uM("\\DOTSX","\\relax"),uM("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),uM("\\,","\\tmspace+{3mu}{.1667em}"),uM("\\thinspace","\\,"),uM("\\>","\\mskip{4mu}"),uM("\\:","\\tmspace+{4mu}{.2222em}"),uM("\\medspace","\\:"),uM("\\;","\\tmspace+{5mu}{.2777em}"),uM("\\thickspace","\\;"),uM("\\!","\\tmspace-{3mu}{.1667em}"),uM("\\negthinspace","\\!"),uM("\\negmedspace","\\tmspace-{4mu}{.2222em}"),uM("\\negthickspace","\\tmspace-{5mu}{.277em}"),uM("\\enspace","\\kern.5em "),uM("\\enskip","\\hskip.5em\\relax"),uM("\\quad","\\hskip1em\\relax"),uM("\\qquad","\\hskip2em\\relax"),uM("\\tag","\\@ifstar\\tag@literal\\tag@paren"),uM("\\tag@paren","\\tag@literal{({#1})}"),uM("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new _k("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),uM("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),uM("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),uM("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),uM("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),uM("\\newline","\\\\\\relax"),uM("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var uC=lA(Wk["Main-Regular"]["T".charCodeAt(0)][1]-.7*Wk["Main-Regular"]["A".charCodeAt(0)][1]);uM("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+uC+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),uM("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+uC+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),uM("\\hspace","\\@ifstar\\@hspacer\\@hspace"),uM("\\@hspace","\\hskip #1\\relax"),uM("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),uM("\\ordinarycolon",":"),uM("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),uM("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),uM("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),uM("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),uM("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),uM("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),uM("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),uM("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),uM("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),uM("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),uM("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),uM("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),uM("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),uM("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),uM("∷","\\dblcolon"),uM("∹","\\eqcolon"),uM("≔","\\coloneqq"),uM("≕","\\eqqcolon"),uM("⩴","\\Coloneqq"),uM("\\ratio","\\vcentcolon"),uM("\\coloncolon","\\dblcolon"),uM("\\colonequals","\\coloneqq"),uM("\\coloncolonequals","\\Coloneqq"),uM("\\equalscolon","\\eqqcolon"),uM("\\equalscoloncolon","\\Eqqcolon"),uM("\\colonminus","\\coloneq"),uM("\\coloncolonminus","\\Coloneq"),uM("\\minuscolon","\\eqcolon"),uM("\\minuscoloncolon","\\Eqcolon"),uM("\\coloncolonapprox","\\Colonapprox"),uM("\\coloncolonsim","\\Colonsim"),uM("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),uM("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),uM("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),uM("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),uM("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),uM("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),uM("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),uM("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),uM("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),uM("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),uM("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),uM("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),uM("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),uM("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}"),uM("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}"),uM("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}"),uM("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}"),uM("\\nleqq","\\html@mathml{\\@nleqq}{≰}"),uM("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}"),uM("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}"),uM("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}"),uM("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}"),uM("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}"),uM("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}"),uM("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}"),uM("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}"),uM("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}"),uM("\\imath","\\html@mathml{\\@imath}{ı}"),uM("\\jmath","\\html@mathml{\\@jmath}{ȷ}"),uM("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}"),uM("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}"),uM("⟦","\\llbracket"),uM("⟧","\\rrbracket"),uM("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}"),uM("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}"),uM("⦃","\\lBrace"),uM("⦄","\\rBrace"),uM("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}"),uM("⦵","\\minuso"),uM("\\darr","\\downarrow"),uM("\\dArr","\\Downarrow"),uM("\\Darr","\\Downarrow"),uM("\\lang","\\langle"),uM("\\rang","\\rangle"),uM("\\uarr","\\uparrow"),uM("\\uArr","\\Uparrow"),uM("\\Uarr","\\Uparrow"),uM("\\N","\\mathbb{N}"),uM("\\R","\\mathbb{R}"),uM("\\Z","\\mathbb{Z}"),uM("\\alef","\\aleph"),uM("\\alefsym","\\aleph"),uM("\\Alpha","\\mathrm{A}"),uM("\\Beta","\\mathrm{B}"),uM("\\bull","\\bullet"),uM("\\Chi","\\mathrm{X}"),uM("\\clubs","\\clubsuit"),uM("\\cnums","\\mathbb{C}"),uM("\\Complex","\\mathbb{C}"),uM("\\Dagger","\\ddagger"),uM("\\diamonds","\\diamondsuit"),uM("\\empty","\\emptyset"),uM("\\Epsilon","\\mathrm{E}"),uM("\\Eta","\\mathrm{H}"),uM("\\exist","\\exists"),uM("\\harr","\\leftrightarrow"),uM("\\hArr","\\Leftrightarrow"),uM("\\Harr","\\Leftrightarrow"),uM("\\hearts","\\heartsuit"),uM("\\image","\\Im"),uM("\\infin","\\infty"),uM("\\Iota","\\mathrm{I}"),uM("\\isin","\\in"),uM("\\Kappa","\\mathrm{K}"),uM("\\larr","\\leftarrow"),uM("\\lArr","\\Leftarrow"),uM("\\Larr","\\Leftarrow"),uM("\\lrarr","\\leftrightarrow"),uM("\\lrArr","\\Leftrightarrow"),uM("\\Lrarr","\\Leftrightarrow"),uM("\\Mu","\\mathrm{M}"),uM("\\natnums","\\mathbb{N}"),uM("\\Nu","\\mathrm{N}"),uM("\\Omicron","\\mathrm{O}"),uM("\\plusmn","\\pm"),uM("\\rarr","\\rightarrow"),uM("\\rArr","\\Rightarrow"),uM("\\Rarr","\\Rightarrow"),uM("\\real","\\Re"),uM("\\reals","\\mathbb{R}"),uM("\\Reals","\\mathbb{R}"),uM("\\Rho","\\mathrm{P}"),uM("\\sdot","\\cdot"),uM("\\sect","\\S"),uM("\\spades","\\spadesuit"),uM("\\sub","\\subset"),uM("\\sube","\\subseteq"),uM("\\supe","\\supseteq"),uM("\\Tau","\\mathrm{T}"),uM("\\thetasym","\\vartheta"),uM("\\weierp","\\wp"),uM("\\Zeta","\\mathrm{Z}"),uM("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),uM("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),uM("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),uM("\\bra","\\mathinner{\\langle{#1}|}"),uM("\\ket","\\mathinner{|{#1}\\rangle}"),uM("\\braket","\\mathinner{\\langle{#1}\\rangle}"),uM("\\Bra","\\left\\langle#1\\right|"),uM("\\Ket","\\left|#1\\right\\rangle");var cC=e=>t=>{var n=t.consumeArg().tokens,r=t.consumeArg().tokens,i=t.consumeArg().tokens,o=t.consumeArg().tokens,a=t.macros.get("|"),s=t.macros.get("\\|");t.macros.beginGroup();var l=t=>n=>{e&&(n.macros.set("|",a),i.length&&n.macros.set("\\|",s));var o=t;!t&&i.length&&("|"===n.future().text&&(n.popToken(),o=!0));return{tokens:o?i:r,numArgs:0}};t.macros.set("|",l(!1)),i.length&&t.macros.set("\\|",l(!0));var u=t.consumeArg().tokens,c=t.expandTokens([...o,...u,...n]);return t.macros.endGroup(),{tokens:c.reverse(),numArgs:0}};uM("\\bra@ket",cC(!1)),uM("\\bra@set",cC(!0)),uM("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),uM("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),uM("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),uM("\\angln","{\\angl n}"),uM("\\blue","\\textcolor{##6495ed}{#1}"),uM("\\orange","\\textcolor{##ffa500}{#1}"),uM("\\pink","\\textcolor{##ff00af}{#1}"),uM("\\red","\\textcolor{##df0030}{#1}"),uM("\\green","\\textcolor{##28ae7b}{#1}"),uM("\\gray","\\textcolor{gray}{#1}"),uM("\\purple","\\textcolor{##9d38bd}{#1}"),uM("\\blueA","\\textcolor{##ccfaff}{#1}"),uM("\\blueB","\\textcolor{##80f6ff}{#1}"),uM("\\blueC","\\textcolor{##63d9ea}{#1}"),uM("\\blueD","\\textcolor{##11accd}{#1}"),uM("\\blueE","\\textcolor{##0c7f99}{#1}"),uM("\\tealA","\\textcolor{##94fff5}{#1}"),uM("\\tealB","\\textcolor{##26edd5}{#1}"),uM("\\tealC","\\textcolor{##01d1c1}{#1}"),uM("\\tealD","\\textcolor{##01a995}{#1}"),uM("\\tealE","\\textcolor{##208170}{#1}"),uM("\\greenA","\\textcolor{##b6ffb0}{#1}"),uM("\\greenB","\\textcolor{##8af281}{#1}"),uM("\\greenC","\\textcolor{##74cf70}{#1}"),uM("\\greenD","\\textcolor{##1fab54}{#1}"),uM("\\greenE","\\textcolor{##0d923f}{#1}"),uM("\\goldA","\\textcolor{##ffd0a9}{#1}"),uM("\\goldB","\\textcolor{##ffbb71}{#1}"),uM("\\goldC","\\textcolor{##ff9c39}{#1}"),uM("\\goldD","\\textcolor{##e07d10}{#1}"),uM("\\goldE","\\textcolor{##a75a05}{#1}"),uM("\\redA","\\textcolor{##fca9a9}{#1}"),uM("\\redB","\\textcolor{##ff8482}{#1}"),uM("\\redC","\\textcolor{##f9685d}{#1}"),uM("\\redD","\\textcolor{##e84d39}{#1}"),uM("\\redE","\\textcolor{##bc2612}{#1}"),uM("\\maroonA","\\textcolor{##ffbde0}{#1}"),uM("\\maroonB","\\textcolor{##ff92c6}{#1}"),uM("\\maroonC","\\textcolor{##ed5fa6}{#1}"),uM("\\maroonD","\\textcolor{##ca337c}{#1}"),uM("\\maroonE","\\textcolor{##9e034e}{#1}"),uM("\\purpleA","\\textcolor{##ddd7ff}{#1}"),uM("\\purpleB","\\textcolor{##c6b9fc}{#1}"),uM("\\purpleC","\\textcolor{##aa87ff}{#1}"),uM("\\purpleD","\\textcolor{##7854ab}{#1}"),uM("\\purpleE","\\textcolor{##543b78}{#1}"),uM("\\mintA","\\textcolor{##f5f9e8}{#1}"),uM("\\mintB","\\textcolor{##edf2df}{#1}"),uM("\\mintC","\\textcolor{##e0e5cc}{#1}"),uM("\\grayA","\\textcolor{##f6f7f7}{#1}"),uM("\\grayB","\\textcolor{##f0f1f2}{#1}"),uM("\\grayC","\\textcolor{##e3e5e6}{#1}"),uM("\\grayD","\\textcolor{##d6d8da}{#1}"),uM("\\grayE","\\textcolor{##babec2}{#1}"),uM("\\grayF","\\textcolor{##888d93}{#1}"),uM("\\grayG","\\textcolor{##626569}{#1}"),uM("\\grayH","\\textcolor{##3b3e40}{#1}"),uM("\\grayI","\\textcolor{##21242c}{#1}"),uM("\\kaBlue","\\textcolor{##314453}{#1}"),uM("\\kaGreen","\\textcolor{##71B307}{#1}");var hC={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class dC{constructor(e,t,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new rC(iC,t.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new nC(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,n,r;if(e){if(this.consumeSpaces(),"["!==this.future().text)return null;t=this.popToken(),({tokens:r,end:n}=this.consumeArg(["]"]))}else({tokens:r,start:t,end:n}=this.consumeArg());return this.pushToken(new Tk("EOF",n.loc)),this.pushTokens(r),t.range(n,"")}consumeSpaces(){for(;;){if(" "!==this.future().text)break;this.stack.pop()}}consumeArg(e){var t=[],n=e&&e.length>0;n||this.consumeSpaces();var r,i=this.future(),o=0,a=0;do{if(r=this.popToken(),t.push(r),"{"===r.text)++o;else if("}"===r.text){if(-1===--o)throw new _k("Extra }",r)}else if("EOF"===r.text)throw new _k("Unexpected end of input in a macro argument, expected '"+(e&&n?e[a]:"}")+"'",r);if(e&&n)if((0===o||1===o&&"{"===e[a])&&r.text===e[a]){if(++a===e.length){t.splice(-a,a);break}}else a=0}while(0!==o||n);return"{"===i.text&&"}"===t[t.length-1].text&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:r}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new _k("The length of delimiters doesn't match the number of args!");for(var n=t[0],r=0;r<n.length;r++){var i=this.popToken();if(n[r]!==i.text)throw new _k("Use of the macro doesn't match its definition",i)}}for(var o=[],a=0;a<e;a++)o.push(this.consumeArg(t&&t[a+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new _k("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),n=t.text,r=t.noexpand?null:this._getExpansion(n);if(null==r||e&&r.unexpandable){if(e&&null==r&&"\\"===n[0]&&!this.isDefined(n))throw new _k("Undefined control sequence: "+n);return this.pushToken(t),!1}this.countExpansion(1);var i=r.tokens,o=this.consumeArgs(r.numArgs,r.delimiters);if(r.numArgs)for(var a=(i=i.slice()).length-1;a>=0;--a){var s=i[a];if("#"===s.text){if(0===a)throw new _k("Incomplete placeholder at end of macro body",s);if("#"===(s=i[--a]).text)i.splice(a+1,1);else{if(!/^[1-9]$/.test(s.text))throw new _k("Not a valid argument number",s);i.splice(a,2,...o[+s.text-1])}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(!1===this.expandOnce()){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Tk(e)]):void 0}expandTokens(e){var t=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(!1===this.expandOnce(!0)){var r=this.stack.pop();r.treatAsRelax&&(r.noexpand=!1,r.treatAsRelax=!1),t.push(r)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t?t.map(e=>e.text).join(""):t}_getExpansion(e){var t=this.macros.get(e);if(null==t)return t;if(1===e.length){var n=this.lexer.catcodes[e];if(null!=n&&13!==n)return}var r="function"==typeof t?t(this):t;if("string"==typeof r){var i=0;if(-1!==r.indexOf("#"))for(var o=r.replace(/##/g,"");-1!==o.indexOf("#"+(i+1));)++i;for(var a=new nC(r,this.settings),s=[],l=a.lex();"EOF"!==l.text;)s.push(l),l=a.lex();return s.reverse(),{tokens:s,numArgs:i}}return r}isDefined(e){return this.macros.has(e)||KM.hasOwnProperty(e)||kA.math.hasOwnProperty(e)||kA.text.hasOwnProperty(e)||hC.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return null!=t?"string"==typeof t||"function"==typeof t||!t.unexpandable:KM.hasOwnProperty(e)&&!KM[e].primitive}}var fC=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,pC=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g","ʰ":"h","ⁱ":"i","ʲ":"j","ᵏ":"k","ˡ":"l","ᵐ":"m","ⁿ":"n","ᵒ":"o","ᵖ":"p","ʳ":"r","ˢ":"s","ᵗ":"t","ᵘ":"u","ᵛ":"v","ʷ":"w","ˣ":"x","ʸ":"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),gC={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},mC={"á":"á","à":"à","ä":"ä","ǟ":"ǟ","ã":"ã","ā":"ā","ă":"ă","ắ":"ắ","ằ":"ằ","ẵ":"ẵ","ǎ":"ǎ","â":"â","ấ":"ấ","ầ":"ầ","ẫ":"ẫ","ȧ":"ȧ","ǡ":"ǡ","å":"å","ǻ":"ǻ","ḃ":"ḃ","ć":"ć","ḉ":"ḉ","č":"č","ĉ":"ĉ","ċ":"ċ","ç":"ç","ď":"ď","ḋ":"ḋ","ḑ":"ḑ","é":"é","è":"è","ë":"ë","ẽ":"ẽ","ē":"ē","ḗ":"ḗ","ḕ":"ḕ","ĕ":"ĕ","ḝ":"ḝ","ě":"ě","ê":"ê","ế":"ế","ề":"ề","ễ":"ễ","ė":"ė","ȩ":"ȩ","ḟ":"ḟ","ǵ":"ǵ","ḡ":"ḡ","ğ":"ğ","ǧ":"ǧ","ĝ":"ĝ","ġ":"ġ","ģ":"ģ","ḧ":"ḧ","ȟ":"ȟ","ĥ":"ĥ","ḣ":"ḣ","ḩ":"ḩ","í":"í","ì":"ì","ï":"ï","ḯ":"ḯ","ĩ":"ĩ","ī":"ī","ĭ":"ĭ","ǐ":"ǐ","î":"î","ǰ":"ǰ","ĵ":"ĵ","ḱ":"ḱ","ǩ":"ǩ","ķ":"ķ","ĺ":"ĺ","ľ":"ľ","ļ":"ļ","ḿ":"ḿ","ṁ":"ṁ","ń":"ń","ǹ":"ǹ","ñ":"ñ","ň":"ň","ṅ":"ṅ","ņ":"ņ","ó":"ó","ò":"ò","ö":"ö","ȫ":"ȫ","õ":"õ","ṍ":"ṍ","ṏ":"ṏ","ȭ":"ȭ","ō":"ō","ṓ":"ṓ","ṑ":"ṑ","ŏ":"ŏ","ǒ":"ǒ","ô":"ô","ố":"ố","ồ":"ồ","ỗ":"ỗ","ȯ":"ȯ","ȱ":"ȱ","ő":"ő","ṕ":"ṕ","ṗ":"ṗ","ŕ":"ŕ","ř":"ř","ṙ":"ṙ","ŗ":"ŗ","ś":"ś","ṥ":"ṥ","š":"š","ṧ":"ṧ","ŝ":"ŝ","ṡ":"ṡ","ş":"ş","ẗ":"ẗ","ť":"ť","ṫ":"ṫ","ţ":"ţ","ú":"ú","ù":"ù","ü":"ü","ǘ":"ǘ","ǜ":"ǜ","ǖ":"ǖ","ǚ":"ǚ","ũ":"ũ","ṹ":"ṹ","ū":"ū","ṻ":"ṻ","ŭ":"ŭ","ǔ":"ǔ","û":"û","ů":"ů","ű":"ű","ṽ":"ṽ","ẃ":"ẃ","ẁ":"ẁ","ẅ":"ẅ","ŵ":"ŵ","ẇ":"ẇ","ẘ":"ẘ","ẍ":"ẍ","ẋ":"ẋ","ý":"ý","ỳ":"ỳ","ÿ":"ÿ","ỹ":"ỹ","ȳ":"ȳ","ŷ":"ŷ","ẏ":"ẏ","ẙ":"ẙ","ź":"ź","ž":"ž","ẑ":"ẑ","ż":"ż","Á":"Á","À":"À","Ä":"Ä","Ǟ":"Ǟ","Ã":"Ã","Ā":"Ā","Ă":"Ă","Ắ":"Ắ","Ằ":"Ằ","Ẵ":"Ẵ","Ǎ":"Ǎ","Â":"Â","Ấ":"Ấ","Ầ":"Ầ","Ẫ":"Ẫ","Ȧ":"Ȧ","Ǡ":"Ǡ","Å":"Å","Ǻ":"Ǻ","Ḃ":"Ḃ","Ć":"Ć","Ḉ":"Ḉ","Č":"Č","Ĉ":"Ĉ","Ċ":"Ċ","Ç":"Ç","Ď":"Ď","Ḋ":"Ḋ","Ḑ":"Ḑ","É":"É","È":"È","Ë":"Ë","Ẽ":"Ẽ","Ē":"Ē","Ḗ":"Ḗ","Ḕ":"Ḕ","Ĕ":"Ĕ","Ḝ":"Ḝ","Ě":"Ě","Ê":"Ê","Ế":"Ế","Ề":"Ề","Ễ":"Ễ","Ė":"Ė","Ȩ":"Ȩ","Ḟ":"Ḟ","Ǵ":"Ǵ","Ḡ":"Ḡ","Ğ":"Ğ","Ǧ":"Ǧ","Ĝ":"Ĝ","Ġ":"Ġ","Ģ":"Ģ","Ḧ":"Ḧ","Ȟ":"Ȟ","Ĥ":"Ĥ","Ḣ":"Ḣ","Ḩ":"Ḩ","Í":"Í","Ì":"Ì","Ï":"Ï","Ḯ":"Ḯ","Ĩ":"Ĩ","Ī":"Ī","Ĭ":"Ĭ","Ǐ":"Ǐ","Î":"Î","İ":"İ","Ĵ":"Ĵ","Ḱ":"Ḱ","Ǩ":"Ǩ","Ķ":"Ķ","Ĺ":"Ĺ","Ľ":"Ľ","Ļ":"Ļ","Ḿ":"Ḿ","Ṁ":"Ṁ","Ń":"Ń","Ǹ":"Ǹ","Ñ":"Ñ","Ň":"Ň","Ṅ":"Ṅ","Ņ":"Ņ","Ó":"Ó","Ò":"Ò","Ö":"Ö","Ȫ":"Ȫ","Õ":"Õ","Ṍ":"Ṍ","Ṏ":"Ṏ","Ȭ":"Ȭ","Ō":"Ō","Ṓ":"Ṓ","Ṑ":"Ṑ","Ŏ":"Ŏ","Ǒ":"Ǒ","Ô":"Ô","Ố":"Ố","Ồ":"Ồ","Ỗ":"Ỗ","Ȯ":"Ȯ","Ȱ":"Ȱ","Ő":"Ő","Ṕ":"Ṕ","Ṗ":"Ṗ","Ŕ":"Ŕ","Ř":"Ř","Ṙ":"Ṙ","Ŗ":"Ŗ","Ś":"Ś","Ṥ":"Ṥ","Š":"Š","Ṧ":"Ṧ","Ŝ":"Ŝ","Ṡ":"Ṡ","Ş":"Ş","Ť":"Ť","Ṫ":"Ṫ","Ţ":"Ţ","Ú":"Ú","Ù":"Ù","Ü":"Ü","Ǘ":"Ǘ","Ǜ":"Ǜ","Ǖ":"Ǖ","Ǚ":"Ǚ","Ũ":"Ũ","Ṹ":"Ṹ","Ū":"Ū","Ṻ":"Ṻ","Ŭ":"Ŭ","Ǔ":"Ǔ","Û":"Û","Ů":"Ů","Ű":"Ű","Ṽ":"Ṽ","Ẃ":"Ẃ","Ẁ":"Ẁ","Ẅ":"Ẅ","Ŵ":"Ŵ","Ẇ":"Ẇ","Ẍ":"Ẍ","Ẋ":"Ẋ","Ý":"Ý","Ỳ":"Ỳ","Ÿ":"Ÿ","Ỹ":"Ỹ","Ȳ":"Ȳ","Ŷ":"Ŷ","Ẏ":"Ẏ","Ź":"Ź","Ž":"Ž","Ẑ":"Ẑ","Ż":"Ż","ά":"ά","ὰ":"ὰ","ᾱ":"ᾱ","ᾰ":"ᾰ","έ":"έ","ὲ":"ὲ","ή":"ή","ὴ":"ὴ","ί":"ί","ὶ":"ὶ","ϊ":"ϊ","ΐ":"ΐ","ῒ":"ῒ","ῑ":"ῑ","ῐ":"ῐ","ό":"ό","ὸ":"ὸ","ύ":"ύ","ὺ":"ὺ","ϋ":"ϋ","ΰ":"ΰ","ῢ":"ῢ","ῡ":"ῡ","ῠ":"ῠ","ώ":"ώ","ὼ":"ὼ","Ύ":"Ύ","Ὺ":"Ὺ","Ϋ":"Ϋ","Ῡ":"Ῡ","Ῠ":"Ῠ","Ώ":"Ώ","Ὼ":"Ὼ"};let vC=class e{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new dC(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(void 0===t&&(t=!0),this.fetch().text!==e)throw new _k("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new Tk("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,n}parseExpression(t,n){for(var r=[];;){"math"===this.mode&&this.consumeSpaces();var i=this.fetch();if(-1!==e.endOfExpression.indexOf(i.text))break;if(n&&i.text===n)break;if(t&&KM[i.text]&&KM[i.text].infix)break;var o=this.parseAtom(n);if(!o)break;"internal"!==o.type&&r.push(o)}return"text"===this.mode&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var t,n=-1,r=0;r<e.length;r++)if("infix"===e[r].type){if(-1!==n)throw new _k("only one infix operator per group",e[r].token);n=r,t=e[r].replaceWith}if(-1!==n&&t){var i,o,a=e.slice(0,n),s=e.slice(n+1);return i=1===a.length&&"ordgroup"===a[0].type?a[0]:{type:"ordgroup",mode:this.mode,body:a},o=1===s.length&&"ordgroup"===s[0].type?s[0]:{type:"ordgroup",mode:this.mode,body:s},["\\\\abovefrac"===t?this.callFunction(t,[i,e[n],o],[]):this.callFunction(t,[i,o],[])]}return e}handleSupSubscript(e){var t,n=this.fetch(),r=n.text;this.consume(),this.consumeSpaces();do{var i;t=this.parseGroup(e)}while("internal"===(null==(i=t)?void 0:i.type));if(!t)throw new _k("Expected group after '"+r+"'",n);return t}formatUnsupportedCmd(e){for(var t=[],n=0;n<e.length;n++)t.push({type:"textord",mode:"text",text:e[n]});var r={type:"text",mode:this.mode,body:t};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]}}parseAtom(e){var t,n,r=this.parseGroup("atom",e);if("internal"===(null==r?void 0:r.type))return r;if("text"===this.mode)return r;for(;;){this.consumeSpaces();var i=this.fetch();if("\\limits"===i.text||"\\nolimits"===i.text){if(r&&"op"===r.type){var o="\\limits"===i.text;r.limits=o,r.alwaysHandleSupSub=!0}else{if(!r||"operatorname"!==r.type)throw new _k("Limit controls must follow a math operator",i);r.alwaysHandleSupSub&&(r.limits="\\limits"===i.text)}this.consume()}else if("^"===i.text){if(t)throw new _k("Double superscript",i);t=this.handleSupSubscript("superscript")}else if("_"===i.text){if(n)throw new _k("Double subscript",i);n=this.handleSupSubscript("subscript")}else if("'"===i.text){if(t)throw new _k("Double superscript",i);var a={type:"textord",mode:this.mode,text:"\\prime"},s=[a];for(this.consume();"'"===this.fetch().text;)s.push(a),this.consume();"^"===this.fetch().text&&s.push(this.handleSupSubscript("superscript")),t={type:"ordgroup",mode:this.mode,body:s}}else{if(!pC[i.text])break;var l=fC.test(i.text),u=[];for(u.push(new Tk(pC[i.text])),this.consume();;){var c=this.fetch().text;if(!pC[c])break;if(fC.test(c)!==l)break;u.unshift(new Tk(pC[c])),this.consume()}var h=this.subparse(u);l?n={type:"ordgroup",mode:"math",body:h}:t={type:"ordgroup",mode:"math",body:h}}}return t||n?{type:"supsub",mode:this.mode,base:r,sup:t,sub:n}:r}parseFunction(e,t){var n=this.fetch(),r=n.text,i=KM[r];if(!i)return null;if(this.consume(),t&&"atom"!==t&&!i.allowedInArgument)throw new _k("Got function '"+r+"' with no arguments"+(t?" as "+t:""),n);if("text"===this.mode&&!i.allowedInText)throw new _k("Can't use function '"+r+"' in text mode",n);if("math"===this.mode&&!1===i.allowedInMath)throw new _k("Can't use function '"+r+"' in math mode",n);var{args:o,optArgs:a}=this.parseArguments(r,i);return this.callFunction(r,o,a,n,e)}callFunction(e,t,n,r,i){var o={funcName:e,parser:this,token:r,breakOnTokenText:i},a=KM[e];if(a&&a.handler)return a.handler(o,t,n);throw new _k("No function handler for "+e)}parseArguments(e,t){var n=t.numArgs+t.numOptionalArgs;if(0===n)return{args:[],optArgs:[]};for(var r=[],i=[],o=0;o<n;o++){var a=t.argTypes&&t.argTypes[o],s=o<t.numOptionalArgs;(t.primitive&&null==a||"sqrt"===t.type&&1===o&&null==i[0])&&(a="primitive");var l=this.parseGroupOfType("argument to '"+e+"'",a,s);if(s)i.push(l);else{if(null==l)throw new _k("Null argument, please report this as a bug");r.push(l)}}return{args:r,optArgs:i}}parseGroupOfType(e,t,n){switch(t){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,t);case"hbox":var r=this.parseArgumentGroup(n,"text");return null!=r?{type:"styling",mode:r.mode,body:[r],style:"text"}:null;case"raw":var i=this.parseStringGroup("raw",n);return null!=i?{type:"raw",mode:"text",string:i.text}:null;case"primitive":if(n)throw new _k("A primitive argument cannot be optional");var o=this.parseGroup(e);if(null==o)throw new _k("Expected group as "+e,this.fetch());return o;case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new _k("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;" "===this.fetch().text;)this.consume()}parseStringGroup(e,t){var n=this.gullet.scanArgument(t);if(null==n)return null;for(var r,i="";"EOF"!==(r=this.fetch()).text;)i+=r.text,this.consume();return this.consume(),n.text=i,n}parseRegexGroup(e,t){for(var n,r=this.fetch(),i=r,o="";"EOF"!==(n=this.fetch()).text&&e.test(o+n.text);)o+=(i=n).text,this.consume();if(""===o)throw new _k("Invalid "+t+": '"+r.text+"'",r);return r.range(i,o)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(null==t)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!n)throw new _k("Invalid color: '"+t.text+"'",t);var r=n[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}}parseSizeGroup(e){var t,n=!1;if(this.gullet.consumeSpaces(),!(t=e||"{"===this.gullet.future().text?this.parseStringGroup("size",e):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;e||0!==t.text.length||(t.text="0pt",n=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!r)throw new _k("Invalid size: '"+t.text+"'",t);var i={number:+(r[1]+r[2]),unit:r[3]};if(!aA(i))throw new _k("Invalid unit: '"+i.unit+"'",t);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==t)return null;var n=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,t){var n=this.gullet.scanArgument(e);if(null==n)return null;var r=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return t&&this.switchMode(r),o}parseGroup(e,t){var n,r=this.fetch(),i=r.text;if("{"===i||"\\begingroup"===i){this.consume();var o="{"===i?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,o),s=this.fetch();this.expect(o),this.gullet.endGroup(),n={type:"ordgroup",mode:this.mode,loc:Ek.range(r,s),body:a,semisimple:"\\begingroup"===i||void 0}}else if(null==(n=this.parseFunction(t,e)||this.parseSymbol())&&"\\"===i[0]&&!hC.hasOwnProperty(i)){if(this.settings.throwOnError)throw new _k("Undefined control sequence: "+i,r);n=this.formatUnsupportedCmd(i),this.consume()}return n}formLigatures(e){for(var t=e.length-1,n=0;n<t;++n){var r=e[n],i=r.text;"-"===i&&"-"===e[n+1].text&&(n+1<t&&"-"===e[n+2].text?(e.splice(n,3,{type:"textord",mode:"text",loc:Ek.range(r,e[n+2]),text:"---"}),t-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Ek.range(r,e[n+1]),text:"--"}),t-=1)),"'"!==i&&"`"!==i||e[n+1].text!==i||(e.splice(n,2,{type:"textord",mode:"text",loc:Ek.range(r,e[n+1]),text:i+i}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var n=t.slice(5),r="*"===n.charAt(0);if(r&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new _k("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:n=n.slice(1,-1),star:r}}mC.hasOwnProperty(t[0])&&!kA[this.mode][t[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=mC[t[0]]+t.slice(1));var i,o=eC.exec(t);if(o&&("i"===(t=t.substring(0,o.index))?t="ı":"j"===t&&(t="ȷ")),kA[this.mode][t]){this.settings.strict&&"math"===this.mode&&rS.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var a,s=kA[this.mode][t].group,l=Ek.range(e);if(TA.hasOwnProperty(s)){var u=s;a={type:"atom",mode:this.mode,family:u,loc:l,text:t}}else a={type:s,mode:this.mode,loc:l,text:t};i=a}else{if(!(t.charCodeAt(0)>=128))return null;this.settings.strict&&(Hk(t.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'" ('+t.charCodeAt(0)+")",e)),i={type:"textord",mode:"text",loc:Ek.range(e),text:t}}if(this.consume(),o)for(var c=0;c<o[0].length;c++){var h=o[0][c];if(!gC[h])throw new _k("Unknown accent ' "+h+"'",e);var d=gC[h][this.mode]||gC[h].text;if(!d)throw new _k("Accent "+h+" unsupported in "+this.mode+" mode",e);i={type:"accent",mode:this.mode,loc:Ek.range(e),label:d,isStretchy:!1,isShifty:!0,base:i}}return i}};vC.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var yC=function(e,t){if(!("string"==typeof e||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new vC(e,t);delete n.gullet.macros.current["\\df@tag"];var r=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new _k("\\tag works only in display equations");r=[{type:"tag",mode:"text",body:r,tag:n.subparse([new Tk("\\df@tag")])}]}return r},bC=function(e,t,n){t.textContent="";var r=TC(e,n).toNode();t.appendChild(r)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&(bC=function(){throw new _k("KaTeX doesn't work in quirks mode.")});var xC=function(e,t){return TC(e,t).toMarkup()},wC=function(e,t){var n=new Rk(t);return yC(e,n)},EC=function(e,t,n){if(n.throwOnError||!(e instanceof _k))throw e;var r=yS.makeSpan(["katex-error"],[new yA(t)]);return r.setAttribute("title",e.toString()),r.setAttribute("style","color:"+n.errorColor),r},TC=function(e,t){var n=new Rk(t);try{return function(e,t,n){var r,i=rN(n);if("mathml"===n.output)return nN(e,t,i,n.displayMode,!0);if("html"===n.output){var o=HS(e,i);r=yS.makeSpan(["katex"],[o])}else{var a=nN(e,t,i,n.displayMode,!1),s=HS(e,i);r=yS.makeSpan(["katex"],[a,s])}return iN(r,n)}(yC(e,n),e,n)}catch(r){return EC(r,e,n)}},_C=function(e,t){var n=new Rk(t);try{return function(e,t,n){var r=HS(e,rN(n)),i=yS.makeSpan(["katex"],[r]);return iN(i,n)}(yC(e,n),0,n)}catch(r){return EC(r,e,n)}},kC="0.16.22",AC={Span:pA,Anchor:gA,SymbolNode:yA,SvgNode:bA,PathNode:xA,LineNode:wA},SC={version:kC,render:bC,renderToString:xC,ParseError:_k,SETTINGS_SCHEMA:Ck,__parse:wC,__renderToDomTree:TC,__renderToHTMLTree:_C,__setFontMetrics:Zk,__defineSymbol:AA,__defineFunction:SS,__defineMacro:uM,__domTree:AC};const NC=Object.freeze(Object.defineProperty({__proto__:null,ParseError:_k,SETTINGS_SCHEMA:Ck,__defineFunction:SS,__defineMacro:uM,__defineSymbol:AA,__domTree:AC,__parse:wC,__renderToDomTree:TC,__renderToHTMLTree:_C,__setFontMetrics:Zk,default:SC,get render(){return bC},renderToString:xC,version:kC},Symbol.toStringTag,{value:"Module"}));function MC(e){return"symbol"==typeof e||Vx(e)&&"[object Symbol]"==qb(e)}function CC(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var IC=Ub?Ub.prototype:void 0,RC=IC?IC.toString:void 0;function LC(e){if("string"==typeof e)return e;if(Wx(e))return CC(e,LC)+"";if(MC(e))return RC?RC.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var OC=/\s/;var DC=/^\s+/;function PC(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&OC.test(e.charAt(t)););return t}(e)+1).replace(DC,""):e}var BC=/^[-+]0x[0-9a-f]+$/i,FC=/^0b[01]+$/i,zC=/^0o[0-7]+$/i,UC=parseInt;var GC=1/0;function VC(e){return e?(e=function(e){if("number"==typeof e)return e;if(MC(e))return NaN;if(Wb(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Wb(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=PC(e);var n=FC.test(e);return n||zC.test(e)?UC(e.slice(2),n?2:8):BC.test(e)?NaN:+e}(e))===GC||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function jC(e){var t=VC(e),n=t%1;return t==t?n?t-n:t:0}function HC(){}function $C(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function YC(e,t,n,r){for(var i=e.length,o=n+-1;++o<i;)if(t(e[o],o,e))return o;return-1}function qC(e){return e!=e}function WC(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):YC(e,qC,n)}function XC(e,t){return!!(null==e?0:e.length)&&WC(e,t,0)>-1}function KC(e){return Kx(e)?Ew(e):ik(e)}var ZC=Object.prototype.hasOwnProperty,QC=Bw(function(e,t){if(Ux(t)||Kx(t))yw(t,KC(t),e);else for(var n in t)ZC.call(t,n)&&vw(e,n,t[n])}),JC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eI=/^\w*$/;function tI(e,t){if(Wx(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!MC(e))||(eI.test(e)||!JC.test(e)||null!=t&&e in Object(t))}var nI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rI=/\\(\\)?/g,iI=function(e){var t=xx(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(nI,function(e,n,r,i){t.push(r?i.replace(rI,"$1"):n||e)}),t});function oI(e){return null==e?"":LC(e)}function aI(e,t){return Wx(e)?e:tI(e,t)?[e]:iI(oI(e))}function sI(e){if("string"==typeof e||MC(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function lI(e,t){for(var n=0,r=(t=aI(t,e)).length;null!=e&&n<r;)e=e[sI(t[n++])];return n&&n==r?e:void 0}function uI(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var cI=Ub?Ub.isConcatSpreadable:void 0;function hI(e){return Wx(e)||qx(e)||!!(cI&&e&&e[cI])}function dI(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=hI),i||(i=[]);++o<a;){var s=e[o];n(s)?uI(i,s):r||(i[i.length]=s)}return i}function fI(e){return(null==e?0:e.length)?dI(e):[]}function pI(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function gI(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function mI(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function vI(){return[]}var yI=Object.prototype.propertyIsEnumerable,bI=Object.getOwnPropertySymbols,xI=bI?function(e){return null==e?[]:(e=Object(e),mI(bI(e),function(t){return yI.call(e,t)}))}:vI;var wI=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)uI(t,xI(e)),e=Fx(e);return t}:vI;function EI(e,t,n){var r=t(e);return Wx(e)?r:uI(r,n(e))}function TI(e){return EI(e,KC,xI)}function _I(e){return EI(e,kw,wI)}var kI=Object.prototype.hasOwnProperty;var AI=/\w*$/;var SI=Ub?Ub.prototype:void 0,NI=SI?SI.valueOf:void 0;function MI(e,t,n){var r,i,o,a=e.constructor;switch(t){case"[object ArrayBuffer]":return Rx(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return function(e,t){var n=t?Rx(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Lx(e,n);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return(o=new(i=e).constructor(i.source,AI.exec(i))).lastIndex=i.lastIndex,o;case"[object Symbol]":return r=e,NI?Object(NI.call(r)):{}}}var CI=dw&&dw.isMap,II=CI?lw(CI):function(e){return Vx(e)&&"[object Map]"==bk(e)};var RI=dw&&dw.isSet,LI=RI?lw(RI):function(e){return Vx(e)&&"[object Set]"==bk(e)},OI="[object Arguments]",DI="[object Function]",PI="[object Object]",BI={};function FI(e,t,n,r,i,o){var a,s=1&t,l=2&t,u=4&t;if(void 0!==a)return a;if(!Wb(e))return e;var c=Wx(e);if(c){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&kI.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return Ox(e,a)}else{var h=bk(e),d=h==DI||"[object GeneratorFunction]"==h;if(tw(e))return Cx(e,s);if(h==PI||h==OI||d&&!i){if(a=l||d?{}:Gx(e),!s)return l?function(e,t){return yw(e,wI(e),t)}(e,function(e,t){return e&&yw(t,kw(t),e)}(a,e)):function(e,t){return yw(e,xI(e),t)}(e,function(e,t){return e&&yw(t,KC(t),e)}(a,e))}else{if(!BI[h])return i?e:{};a=MI(e,h,s)}}o||(o=new wx);var f=o.get(e);if(f)return f;o.set(e,a),LI(e)?e.forEach(function(r){a.add(FI(r,t,n,r,e,o))}):II(e)&&e.forEach(function(r,i){a.set(i,FI(r,t,n,i,e,o))});var p=c?void 0:(u?l?_I:TI:l?kw:KC)(e);return $C(p||e,function(r,i){p&&(r=e[i=r]),vw(a,i,FI(r,t,n,i,e,o))}),a}BI[OI]=BI["[object Array]"]=BI["[object ArrayBuffer]"]=BI["[object DataView]"]=BI["[object Boolean]"]=BI["[object Date]"]=BI["[object Float32Array]"]=BI["[object Float64Array]"]=BI["[object Int8Array]"]=BI["[object Int16Array]"]=BI["[object Int32Array]"]=BI["[object Map]"]=BI["[object Number]"]=BI[PI]=BI["[object RegExp]"]=BI["[object Set]"]=BI["[object String]"]=BI["[object Symbol]"]=BI["[object Uint8Array]"]=BI["[object Uint8ClampedArray]"]=BI["[object Uint16Array]"]=BI["[object Uint32Array]"]=!0,BI["[object Error]"]=BI[DI]=BI["[object WeakMap]"]=!1;function zI(e){return FI(e,4)}function UI(e){return FI(e,5)}function GI(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}function VI(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new bx;++t<n;)this.add(e[t])}function jI(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function HI(e,t){return e.has(t)}VI.prototype.add=VI.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},VI.prototype.has=function(e){return this.__data__.has(e)};function $I(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var h=-1,d=!0,f=2&n?new VI:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var p=e[h],g=t[h];if(r)var m=a?r(g,p,h,t,e,o):r(p,g,h,e,t,o);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!jI(t,function(e,t){if(!HI(f,t)&&(p===e||i(p,e,n,r,o)))return f.push(t)})){d=!1;break}}else if(p!==g&&!i(p,g,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function YI(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function qI(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var WI=Ub?Ub.prototype:void 0,XI=WI?WI.valueOf:void 0;var KI=Object.prototype.hasOwnProperty;var ZI="[object Arguments]",QI="[object Array]",JI="[object Object]",eR=Object.prototype.hasOwnProperty;function tR(e,t,n,r,i,o){var a=Wx(e),s=Wx(t),l=a?QI:bk(e),u=s?QI:bk(t),c=(l=l==ZI?JI:l)==JI,h=(u=u==ZI?JI:u)==JI,d=l==u;if(d&&tw(e)){if(!tw(t))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new wx),a||pw(e)?$I(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Ix(e),new Ix(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return fx(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=YI;case"[object Set]":var l=1&r;if(s||(s=qI),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=$I(s(e),s(t),r,i,o,a);return a.delete(e),c;case"[object Symbol]":if(XI)return XI.call(e)==XI.call(t)}return!1}(e,t,l,n,r,i,o);if(!(1&n)){var f=c&&eR.call(e,"__wrapped__"),p=h&&eR.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,m=p?t.value():t;return o||(o=new wx),i(g,m,n,r,o)}}return!!d&&(o||(o=new wx),function(e,t,n,r,i,o){var a=1&n,s=TI(e),l=s.length;if(l!=TI(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:KI.call(t,c)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++u<l;){var g=e[c=s[u]],m=t[c];if(r)var v=a?r(m,g,c,t,e,o):r(g,m,c,e,t,o);if(!(void 0===v?g===m||i(g,m,n,r,o):v)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,i,o))}function nR(e,t,n,r,i){return e===t||(null==e||null==t||!Vx(e)&&!Vx(t)?e!=e&&t!=t:tR(e,t,n,r,nR,i))}function rR(e){return e==e&&!Wb(e)}function iR(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function oR(e){var t=function(e){for(var t=KC(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,rR(i)]}return t}(e);return 1==t.length&&t[0][2]?iR(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,o=i;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var s=(a=n[i])[0],l=e[s],u=a[1];if(a[2]){if(void 0===l&&!(s in e))return!1}else if(!nR(u,l,3,r,new wx))return!1}return!0}(n,0,t)}}function aR(e,t){return null!=e&&t in Object(e)}function sR(e,t,n){for(var r=-1,i=(t=aI(t,e)).length,o=!1;++r<i;){var a=sI(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Xx(i)&&xw(a,i)&&(Wx(e)||qx(e))}function lR(e,t){return null!=e&&sR(e,t,aR)}function uR(e,t){return tI(e)&&rR(t)?iR(sI(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:lI(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?lR(n,e):nR(t,r,3)}}function cR(e){return tI(e)?(t=sI(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return lI(t,e)}}(e);var t}function hR(e){return"function"==typeof e?e:null==e?Nw:"object"==typeof e?Wx(e)?uR(e[0],e[1]):oR(e):cR(e)}function dR(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function fR(e,t){return e&&kx(e,t,KC)}var pR,gR=(pR=fR,function(e,t){if(null==e)return e;if(!Kx(e))return pR(e,t);for(var n=e.length,r=-1,i=Object(e);++r<n&&!1!==t(i[r],r,i););return e});function mR(e,t,n,r){return gR(e,function(e,i,o){t(r,e,n(e),o)}),r}var vR=Object.prototype,yR=vR.hasOwnProperty,bR=Dw(function(e,t){e=Object(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&Pw(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=kw(o),s=-1,l=a.length;++s<l;){var u=a[s],c=e[u];(void 0===c||fx(c,vR[u])&&!yR.call(e,u))&&(e[u]=o[u])}return e});var xR=Dw(function(e,t){return Zx(e)?function(e,t,n,r){var i=-1,o=XC,a=!0,s=e.length,l=[],u=t.length;if(!s)return l;t.length>=200&&(o=HI,a=!1,t=new VI(t));e:for(;++i<s;){var c=e[i],h=c;if(c=0!==c?c:0,a&&h==h){for(var d=u;d--;)if(t[d]===h)continue e;l.push(c)}else o(t,h,r)||l.push(c)}return l}(e,dI(t,0,Zx,!0)):[]});function wR(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function ER(e,t,n){var r=null==e?0:e.length;return r?pI(e,(t=void 0===t?1:jC(t))<0?0:t,r):[]}function TR(e,t,n){var r=null==e?0:e.length;return r?pI(e,0,(t=r-(t=void 0===t?1:jC(t)))<0?0:t):[]}function _R(e){return"function"==typeof e?e:Nw}function kR(e,t){return(Wx(e)?$C:gR)(e,_R(t))}function AR(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function SR(e,t){var n=!0;return gR(e,function(e,r,i){return n=!!t(e,r,i)}),n}function NR(e,t,n){return(Wx(e)?AR:SR)(e,hR(t))}function MR(e,t){var n=[];return gR(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function CR(e,t){return(Wx(e)?mI:MR)(e,hR(t))}var IR=Math.max;var RR,LR=(RR=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:jC(n);return i<0&&(i=IR(r+i,0)),YC(e,hR(t),i)},function(e,t,n){var r=Object(e);if(!Kx(e)){var i=hR(t);e=KC(e),t=function(e){return i(r[e],e,r)}}var o=RR(e,t,n);return o>-1?r[i?e[o]:o]:void 0});function OR(e){return e&&e.length?e[0]:void 0}function DR(e,t){var n=-1,r=Kx(e)?Array(e.length):[];return gR(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function PR(e,t){return(Wx(e)?CC:DR)(e,hR(t))}function BR(e,t){return dI(PR(e,t))}var FR,zR,UR=Object.prototype.hasOwnProperty,GR=(FR=function(e,t,n){UR.call(e,n)?e[n].push(t):Tx(e,n,[t])},function(e,t){var n=Wx(e)?dR:mR,r=zR?zR():{};return n(e,FR,hR(t),r)});function VR(e,t){return e>t}var jR=Object.prototype.hasOwnProperty;function HR(e,t){return null!=e&&jR.call(e,t)}function $R(e,t){return null!=e&&sR(e,t,HR)}function YR(e){return"string"==typeof e||!Wx(e)&&Vx(e)&&"[object String]"==qb(e)}function qR(e){return null==e?[]:function(e,t){return CC(t,function(t){return e[t]})}(e,KC(e))}var WR=Math.max;function XR(e,t,n,r){e=Kx(e)?e:qR(e),n=n?jC(n):0;var i=e.length;return n<0&&(n=WR(i+n,0)),YR(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&WC(e,t,n)>-1}function KR(e,t,n){if(!(null==e?0:e.length))return-1;return WC(e,t,0)}var ZR=dw&&dw.isRegExp,QR=ZR?lw(ZR):function(e){return Vx(e)&&"[object RegExp]"==qb(e)};function JR(e){return void 0===e}function eL(e,t){return e<t}function tL(e,t){var n={};return t=hR(t),fR(e,function(e,r,i){Tx(n,r,t(e,r,i))}),n}function nL(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===s?a==a&&!MC(a):n(a,s)))var s=a,l=o}return l}function rL(e){return e&&e.length?nL(e,Nw,VR):void 0}function iL(e){return e&&e.length?nL(e,Nw,eL):void 0}function oL(e,t){return e&&e.length?nL(e,hR(t),eL):void 0}function aL(e,t,n,r){if(!Wb(e))return e;for(var i=-1,o=(t=aI(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=sI(t[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var c=s[l];void 0===(u=void 0)&&(u=Wb(c)?c:xw(t[i+1])?[]:{})}vw(s,l,u),s=s[l]}return e}function sL(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=lI(e,a);n(s,a)&&aL(o,aI(a,e),s)}return o}function lL(e,t){if(null==e)return{};var n=CC(_I(e),function(e){return[e]});return t=hR(t),sL(e,n,function(e,n){return t(e,n[0])})}function uL(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=MC(e),a=void 0!==t,s=null===t,l=t==t,u=MC(t);if(!s&&!u&&!o&&e>t||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function cL(e,t,n){t=t.length?CC(t,function(e){return Wx(e)?function(t){return lI(t,1===e.length?e[0]:e)}:e}):[Nw];var r=-1;return t=CC(t,lw(hR)),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(DR(e,function(e,n,i){return{criteria:CC(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=uL(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}var hL=function(e){return Ow(Cw(e,void 0,fI),e+"")}(function(e,t){return null==e?{}:function(e,t){return sL(e,t,function(t,n){return lR(e,n)})}(e,t)}),dL=Math.ceil,fL=Math.max;var pL=function(e,t,n){return n&&"number"!=typeof n&&Pw(e,t,n)&&(t=n=void 0),e=VC(e),void 0===t?(t=e,e=0):t=VC(t),function(e,t,n){for(var r=-1,i=fL(dL((t-e)/(n||1)),0),o=Array(i);i--;)o[++r]=e,e+=n;return o}(e,t,n=void 0===n?e<t?1:-1:VC(n))};function gL(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function mL(e,t,n){var r=Wx(e)?gI:gL,i=arguments.length<3;return r(e,hR(t),n,i,gR)}function vL(e,t){return(Wx(e)?mI:MR)(e,function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}(hR(t)))}function yL(e,t){var n;return gR(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function bL(e,t,n){return(Wx(e)?jI:yL)(e,hR(t))}var xL=Dw(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Pw(e,t[0],t[1])?t=[]:n>2&&Pw(t[0],t[1],t[2])&&(t=[t[0]]),cL(e,dI(t),[])}),wL=sk&&1/qI(new sk([,-0]))[1]==1/0?function(e){return new sk(e)}:HC;function EL(e,t,n){var r=-1,i=XC,o=e.length,a=!0,s=[],l=s;if(o>=200){var u=t?null:wL(e);if(u)return qI(u);a=!1,i=HI,l=new VI}else l=t?[]:s;e:for(;++r<o;){var c=e[r],h=t?t(c):c;if(c=0!==c?c:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(c)}else i(l,h,n)||(l!==s&&l.push(h),s.push(c))}return s}var TL=Dw(function(e){return EL(dI(e,0,Zx,!0))});function _L(e){return e&&e.length?EL(e):[]}var kL=0;function AL(e){var t=++kL;return oI(e)+t}var SL="\0";class NL{constructor(e={}){this._isDirected=!Object.prototype.hasOwnProperty.call(e,"directed")||e.directed,this._isMultigraph=!!Object.prototype.hasOwnProperty.call(e,"multigraph")&&e.multigraph,this._isCompound=!!Object.prototype.hasOwnProperty.call(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=Iw(void 0),this._defaultEdgeLabelFn=Iw(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[SL]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return Xb(e)||(e=Iw(e)),this._defaultNodeLabelFn=e,this}nodeCount(){return this._nodeCount}nodes(){return KC(this._nodes)}sources(){var e=this;return CR(this.nodes(),function(t){return wk(e._in[t])})}sinks(){var e=this;return CR(this.nodes(),function(t){return wk(e._out[t])})}setNodes(e,t){var n=arguments,r=this;return kR(e,function(e){n.length>1?r.setNode(e,t):r.setNode(e)}),this}setNode(e,t){return Object.prototype.hasOwnProperty.call(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=SL,this._children[e]={},this._children[SL][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return Object.prototype.hasOwnProperty.call(this._nodes,e)}removeNode(e){if(Object.prototype.hasOwnProperty.call(this._nodes,e)){var t=e=>this.removeEdge(this._edgeObjs[e]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],kR(this.children(e),e=>{this.setParent(e)}),delete this._children[e]),kR(KC(this._in[e]),t),delete this._in[e],delete this._preds[e],kR(KC(this._out[e]),t),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(JR(t))t=SL;else{for(var n=t+="";!JR(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var t=this._parent[e];if(t!==SL)return t}}children(e){if(JR(e)&&(e=SL),this._isCompound){var t=this._children[e];if(t)return KC(t)}else{if(e===SL)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var t=this._preds[e];if(t)return KC(t)}successors(e){var t=this._sucs[e];if(t)return KC(t)}neighbors(e){var t=this.predecessors(e);if(t)return TL(t,this.successors(e))}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;kR(this._nodes,function(n,r){e(r)&&t.setNode(r,n)}),kR(this._edgeObjs,function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))});var r={};function i(e){var o=n.parent(e);return void 0===o||t.hasNode(o)?(r[e]=o,o):o in r?r[o]:i(o)}return this._isCompound&&kR(t.nodes(),function(e){t.setParent(e,i(e))}),t}setDefaultEdgeLabel(e){return Xb(e)||(e=Iw(e)),this._defaultEdgeLabelFn=e,this}edgeCount(){return this._edgeCount}edges(){return qR(this._edgeObjs)}setPath(e,t){var n=this,r=arguments;return mL(e,function(e,i){return r.length>1?n.setEdge(e,i,t):n.setEdge(e,i),i}),this}setEdge(){var e,t,n,r,i=!1,o=arguments[0];"object"==typeof o&&null!==o&&"v"in o?(e=o.v,t=o.w,n=o.name,2===arguments.length&&(r=arguments[1],i=!0)):(e=o,t=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),e=""+e,t=""+t,JR(n)||(n=""+n);var a=IL(this._isDirected,e,t,n);if(Object.prototype.hasOwnProperty.call(this._edgeLabels,a))return i&&(this._edgeLabels[a]=r),this;if(!JR(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[a]=i?r:this._defaultEdgeLabelFn(e,t,n);var s=function(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};r&&(s.name=r);return s}(this._isDirected,e,t,n);return e=s.v,t=s.w,Object.freeze(s),this._edgeObjs[a]=s,ML(this._preds[t],e),ML(this._sucs[e],t),this._in[t][a]=s,this._out[e][a]=s,this._edgeCount++,this}edge(e,t,n){var r=1===arguments.length?RL(this._isDirected,arguments[0]):IL(this._isDirected,e,t,n);return this._edgeLabels[r]}hasEdge(e,t,n){var r=1===arguments.length?RL(this._isDirected,arguments[0]):IL(this._isDirected,e,t,n);return Object.prototype.hasOwnProperty.call(this._edgeLabels,r)}removeEdge(e,t,n){var r=1===arguments.length?RL(this._isDirected,arguments[0]):IL(this._isDirected,e,t,n),i=this._edgeObjs[r];return i&&(e=i.v,t=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],CL(this._preds[t],e),CL(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this}inEdges(e,t){var n=this._in[e];if(n){var r=qR(n);return t?CR(r,function(e){return e.v===t}):r}}outEdges(e,t){var n=this._out[e];if(n){var r=qR(n);return t?CR(r,function(e){return e.w===t}):r}}nodeEdges(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}}function ML(e,t){e[t]?e[t]++:e[t]=1}function CL(e,t){--e[t]||delete e[t]}function IL(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}return i+""+o+""+(JR(r)?"\0":r)}function RL(e,t){return IL(e,t.v,t.w,t.name)}NL.prototype._nodeCount=0,NL.prototype._edgeCount=0;class LL{constructor(){var e={};e._next=e._prev=e,this._sentinel=e}dequeue(){var e=this._sentinel,t=e._prev;if(t!==e)return OL(t),t}enqueue(e){var t=this._sentinel;e._prev&&e._next&&OL(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,DL)),n=n._prev;return"["+e.join(", ")+"]"}}function OL(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function DL(e,t){if("_next"!==e&&"_prev"!==e)return t}var PL=Iw(1);function BL(e,t){if(e.nodeCount()<=1)return[];var n=function(e,t){var n=new NL,r=0,i=0;kR(e.nodes(),function(e){n.setNode(e,{v:e,in:0,out:0})}),kR(e.edges(),function(e){var o=n.edge(e.v,e.w)||0,a=t(e),s=o+a;n.setEdge(e.v,e.w,s),i=Math.max(i,n.node(e.v).out+=a),r=Math.max(r,n.node(e.w).in+=a)});var o=pL(i+r+3).map(function(){return new LL}),a=r+1;return kR(n.nodes(),function(e){zL(o,a,n.node(e))}),{graph:n,buckets:o,zeroIdx:a}}(e,t||PL),r=function(e,t,n){var r,i=[],o=t[t.length-1],a=t[0];for(;e.nodeCount();){for(;r=a.dequeue();)FL(e,t,n,r);for(;r=o.dequeue();)FL(e,t,n,r);if(e.nodeCount())for(var s=t.length-2;s>0;--s)if(r=t[s].dequeue()){i=i.concat(FL(e,t,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return fI(PR(r,function(t){return e.outEdges(t.v,t.w)}))}function FL(e,t,n,r,i){var o=i?[]:void 0;return kR(e.inEdges(r.v),function(r){var a=e.edge(r),s=e.node(r.v);i&&o.push({v:r.v,w:r.w}),s.out-=a,zL(t,n,s)}),kR(e.outEdges(r.v),function(r){var i=e.edge(r),o=r.w,a=e.node(o);a.in-=i,zL(t,n,a)}),e.removeNode(r.v),o}function zL(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function UL(e){var t,n="greedy"===e.graph().acyclicer?BL(e,(t=e,function(e){return t.edge(e).weight})):function(e){var t=[],n={},r={};function i(o){Object.prototype.hasOwnProperty.call(r,o)||(r[o]=!0,n[o]=!0,kR(e.outEdges(o),function(e){Object.prototype.hasOwnProperty.call(n,e.w)?t.push(e):i(e.w)}),delete n[o])}return kR(e.nodes(),i),t}(e);kR(n,function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,AL("rev"))})}function GL(e,t,n,r){var i;do{i=AL(r)}while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function VL(e){var t=new NL({multigraph:e.isMultigraph()}).setGraph(e.graph());return kR(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),kR(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function jL(e,t){var n,r,i=e.x,o=e.y,a=t.x-i,s=t.y-o,l=e.width/2,u=e.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*l>Math.abs(a)*u?(s<0&&(u=-u),n=u*a/s,r=u):(a<0&&(l=-l),n=l,r=l*s/a),{x:i+n,y:o+r}}function HL(e){var t=PR(pL(YL(e)+1),function(){return[]});return kR(e.nodes(),function(n){var r=e.node(n),i=r.rank;JR(i)||(t[i][r.order]=n)}),t}function $L(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),GL(e,"border",i,t)}function YL(e){return rL(PR(e.nodes(),function(t){var n=e.node(t).rank;if(!JR(n))return n}))}function qL(e,t){return t()}function WL(e,t,n,r,i,o){var a={width:0,height:0,rank:o,borderType:t},s=i[t][o-1],l=GL(e,"border",a,n);i[t][o]=l,e.setParent(l,r),s&&e.setEdge(s,l,{weight:1})}function XL(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){kR(e.nodes(),function(t){QL(e.node(t))}),kR(e.edges(),function(t){var n=e.edge(t);kR(n.points,QL),Object.prototype.hasOwnProperty.call(n,"y")&&QL(n)})}(e),"lr"!==t&&"rl"!==t||(!function(e){kR(e.nodes(),function(t){JL(e.node(t))}),kR(e.edges(),function(t){var n=e.edge(t);kR(n.points,JL),Object.prototype.hasOwnProperty.call(n,"x")&&JL(n)})}(e),KL(e))}function KL(e){kR(e.nodes(),function(t){ZL(e.node(t))}),kR(e.edges(),function(t){ZL(e.edge(t))})}function ZL(e){var t=e.width;e.width=e.height,e.height=t}function QL(e){e.y=-e.y}function JL(e){var t=e.x;e.x=e.y,e.y=t}function eO(e){e.graph().dummyChains=[],kR(e.edges(),function(t){!function(e,t){var n=t.v,r=e.node(n).rank,i=t.w,o=e.node(i).rank,a=t.name,s=e.edge(t),l=s.labelRank;if(o===r+1)return;e.removeEdge(t);var u,c,h=void 0;for(c=0,++r;r<o;++c,++r)s.points=[],u=GL(e,"edge",h={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},"_d"),r===l&&(h.width=s.width,h.height=s.height,h.dummy="edge-label",h.labelpos=s.labelpos),e.setEdge(n,u,{weight:s.weight},a),0===c&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:s.weight},a)}(e,t)})}function tO(e){var t={};kR(e.sources(),function n(r){var i=e.node(r);if(Object.prototype.hasOwnProperty.call(t,r))return i.rank;t[r]=!0;var o=iL(PR(e.outEdges(r),function(t){return n(t.w)-e.edge(t).minlen}));return o!==Number.POSITIVE_INFINITY&&null!=o||(o=0),i.rank=o})}function nO(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}function rO(e){var t,n,r=new NL({directed:!1}),i=e.nodes()[0],o=e.nodeCount();for(r.setNode(i,{});iO(r,e)<o;)t=oO(r,e),n=r.hasNode(t.v)?nO(e,t):-nO(e,t),aO(r,e,n);return r}function iO(e,t){return kR(e.nodes(),function n(r){kR(t.nodeEdges(r),function(i){var o=i.v,a=r===o?i.w:o;e.hasNode(a)||nO(t,i)||(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})}),e.nodeCount()}function oO(e,t){return oL(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return nO(t,n)})}function aO(e,t,n){kR(e.nodes(),function(e){t.node(e).rank+=n})}function sO(e,t,n){Wx(t)||(t=[t]);var r=(e.isDirected()?e.successors:e.neighbors).bind(e),i=[],o={};return kR(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);lO(e,t,"post"===n,o,r,i)}),i}function lO(e,t,n,r,i,o){Object.prototype.hasOwnProperty.call(r,t)||(r[t]=!0,n||o.push(t),kR(i(t),function(t){lO(e,t,n,r,i,o)}),n&&o.push(t))}function uO(e){e=function(e){var t=(new NL).setGraph(e.graph());return kR(e.nodes(),function(n){t.setNode(n,e.node(n))}),kR(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}(e),tO(e);var t,n=rO(e);for(dO(n),cO(n,e);t=pO(n);)mO(n,e,t,gO(n,e,t))}function cO(e,t){var n=function(e,t){return sO(e,t,"post")}(e,e.nodes());kR(n=n.slice(0,n.length-1),function(n){!function(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=hO(e,t,n)}(e,t,n)})}function hO(e,t,n){var r=e.node(n).parent,i=!0,o=t.edge(n,r),a=0;return o||(i=!1,o=t.edge(r,n)),a=o.weight,kR(t.nodeEdges(n),function(o){var s,l,u=o.v===n,c=u?o.w:o.v;if(c!==r){var h=u===i,d=t.edge(o).weight;if(a+=h?d:-d,s=n,l=c,e.hasEdge(s,l)){var f=e.edge(n,c).cutvalue;a+=h?-f:f}}}),a}function dO(e,t){arguments.length<2&&(t=e.nodes()[0]),fO(e,{},1,t)}function fO(e,t,n,r,i){var o=n,a=e.node(r);return t[r]=!0,kR(e.neighbors(r),function(i){Object.prototype.hasOwnProperty.call(t,i)||(n=fO(e,t,n,i,r))}),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function pO(e){return LR(e.edges(),function(t){return e.edge(t).cutvalue<0})}function gO(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var o=e.node(r),a=e.node(i),s=o,l=!1;return o.lim>a.lim&&(s=a,l=!0),oL(CR(t.edges(),function(t){return l===vO(e,e.node(t.v),s)&&l!==vO(e,e.node(t.w),s)}),function(e){return nO(t,e)})}function mO(e,t,n,r){var i=n.v,o=n.w;e.removeEdge(i,o),e.setEdge(r.v,r.w,{}),dO(e),cO(e,t),function(e,t){var n=LR(e.nodes(),function(e){return!t.node(e).parent}),r=function(e,t){return sO(e,t,"pre")}(e,n);kR(r=r.slice(1),function(n){var r=e.node(n).parent,i=t.edge(n,r),o=!1;i||(i=t.edge(r,n),o=!0),t.node(n).rank=t.node(r).rank+(o?i.minlen:-i.minlen)})}(e,t)}function vO(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}function yO(e){switch(e.graph().ranker){case"network-simplex":default:xO(e);break;case"tight-tree":!function(e){tO(e),rO(e)}(e);break;case"longest-path":bO(e)}}new Error,uO.initLowLimValues=dO,uO.initCutValues=cO,uO.calcCutValue=hO,uO.leaveEdge=pO,uO.enterEdge=gO,uO.exchangeEdges=mO;var bO=tO;function xO(e){uO(e)}function wO(e){var t=GL(e,"root",{},"_root"),n=function(e){var t={};function n(r,i){var o=e.children(r);o&&o.length&&kR(o,function(e){n(e,i+1)}),t[r]=i}return kR(e.children(),function(e){n(e,1)}),t}(e),r=rL(qR(n))-1,i=2*r+1;e.graph().nestingRoot=t,kR(e.edges(),function(t){e.edge(t).minlen*=i});var o=function(e){return mL(e.edges(),function(t,n){return t+e.edge(n).weight},0)}(e)+1;kR(e.children(),function(a){EO(e,t,i,o,r,n,a)}),e.graph().nodeRankFactor=i}function EO(e,t,n,r,i,o,a){var s=e.children(a);if(s.length){var l=$L(e,"_bt"),u=$L(e,"_bb"),c=e.node(a);e.setParent(l,a),c.borderTop=l,e.setParent(u,a),c.borderBottom=u,kR(s,function(s){EO(e,t,n,r,i,o,s);var c=e.node(s),h=c.borderTop?c.borderTop:s,d=c.borderBottom?c.borderBottom:s,f=c.borderTop?r:2*r,p=h!==d?1:i-o[a]+1;e.setEdge(l,h,{weight:f,minlen:p,nestingEdge:!0}),e.setEdge(d,u,{weight:f,minlen:p,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,l,{weight:0,minlen:i+o[a]})}else a!==t&&e.setEdge(t,a,{weight:0,minlen:n})}function TO(e,t,n){var r=function(e){var t;for(;e.hasNode(t=AL("_root")););return t}(e),i=new NL({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(t){return e.node(t)});return kR(e.nodes(),function(o){var a=e.node(o),s=e.parent(o);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||r),kR(e[n](o),function(t){var n=t.v===o?t.w:t.v,r=i.edge(n,o),a=JR(r)?0:r.weight;i.setEdge(n,o,{weight:e.edge(t).weight+a})}),Object.prototype.hasOwnProperty.call(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),i}function _O(e,t){for(var n=0,r=1;r<t.length;++r)n+=kO(e,t[r-1],t[r]);return n}function kO(e,t,n){for(var r,i,o=(r=n,i=PR(n,function(e,t){return t}),function(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a}(r||[],i||[],vw)),a=fI(PR(t,function(t){return xL(PR(e.outEdges(t),function(t){return{pos:o[t.w],weight:e.edge(t).weight}}),"pos")})),s=1;s<n.length;)s<<=1;var l=2*s-1;s-=1;var u=PR(new Array(l),function(){return 0}),c=0;return kR(a.forEach(function(e){var t=e.pos+s;u[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=u[t+1]),u[t=t-1>>1]+=e.weight;c+=e.weight*n})),c}function AO(e,t){var n={};return kR(e,function(e,t){var r=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};JR(e.barycenter)||(r.barycenter=e.barycenter,r.weight=e.weight)}),kR(t.edges(),function(e){var t=n[e.v],r=n[e.w];JR(t)||JR(r)||(r.indegree++,t.out.push(n[e.w]))}),function(e){var t=[];function n(e){return function(t){t.merged||(JR(t.barycenter)||JR(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function r(t){return function(n){n.in.push(t),0===--n.indegree&&e.push(n)}}for(;e.length;){var i=e.pop();t.push(i),kR(i.in.reverse(),n(i)),kR(i.out,r(i))}return PR(CR(t,function(e){return!e.merged}),function(e){return hL(e,["vs","i","barycenter","weight"])})}(CR(n,function(e){return!e.indegree}))}function SO(e,t){var n,r=function(e,t){var n={lhs:[],rhs:[]};return kR(e,function(e){t(e)?n.lhs.push(e):n.rhs.push(e)}),n}(e,function(e){return Object.prototype.hasOwnProperty.call(e,"barycenter")}),i=r.lhs,o=xL(r.rhs,function(e){return-e.i}),a=[],s=0,l=0,u=0;i.sort((n=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:n?t.i-e.i:e.i-t.i})),u=NO(a,o,u),kR(i,function(e){u+=e.vs.length,a.push(e.vs),s+=e.barycenter*e.weight,l+=e.weight,u=NO(a,o,u)});var c={vs:fI(a)};return l&&(c.barycenter=s/l,c.weight=l),c}function NO(e,t,n){for(var r;t.length&&(r=wR(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function MO(e,t,n,r){var i=e.children(t),o=e.node(t),a=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,l={};a&&(i=CR(i,function(e){return e!==a&&e!==s}));var u=function(e,t){return PR(t,function(t){var n=e.inEdges(t);if(n.length){var r=mL(n,function(t,n){var r=e.edge(n),i=e.node(n.v);return{sum:t.sum+r.weight*i.order,weight:t.weight+r.weight}},{sum:0,weight:0});return{v:t,barycenter:r.sum/r.weight,weight:r.weight}}return{v:t}})}(e,i);kR(u,function(t){if(e.children(t.v).length){var i=MO(e,t.v,n,r);l[t.v]=i,Object.prototype.hasOwnProperty.call(i,"barycenter")&&(a=i,JR((o=t).barycenter)?(o.barycenter=a.barycenter,o.weight=a.weight):(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight))}var o,a});var c=AO(u,n);!function(e,t){kR(e,function(e){e.vs=fI(e.vs.map(function(e){return t[e]?t[e].vs:e}))})}(c,l);var h=SO(c,r);if(a&&(h.vs=fI([a,h.vs,s]),e.predecessors(a).length)){var d=e.node(e.predecessors(a)[0]),f=e.node(e.predecessors(s)[0]);Object.prototype.hasOwnProperty.call(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+d.order+f.order)/(h.weight+2),h.weight+=2}return h}function CO(e){var t=YL(e),n=IO(e,pL(1,t+1),"inEdges"),r=IO(e,pL(t-1,-1,-1),"outEdges"),i=function(e){var t={},n=CR(e.nodes(),function(t){return!e.children(t).length}),r=rL(PR(n,function(t){return e.node(t).rank})),i=PR(pL(r+1),function(){return[]});return kR(xL(n,function(t){return e.node(t).rank}),function n(r){if(!$R(t,r)){t[r]=!0;var o=e.node(r);i[o.rank].push(r),kR(e.successors(r),n)}}),i}(e);LO(e,i);for(var o,a=Number.POSITIVE_INFINITY,s=0,l=0;l<4;++s,++l){RO(s%2?n:r,s%4>=2);var u=_O(e,i=HL(e));u<a&&(l=0,o=UI(i),a=u)}LO(e,o)}function IO(e,t,n){return PR(t,function(t){return TO(e,t,n)})}function RO(e,t){var n=new NL;kR(e,function(e){var r=e.graph().root,i=MO(e,r,n,t);kR(i.vs,function(t,n){e.node(t).order=n}),function(e,t,n){var r,i={};kR(n,function(n){for(var o,a,s=e.parent(n);s;){if((o=e.parent(s))?(a=i[o],i[o]=s):(a=r,r=s),a&&a!==s)return void t.setEdge(a,s);s=o}})}(e,n,i.vs)})}function LO(e,t){kR(t,function(t){kR(t,function(t,n){e.node(t).order=n})})}function OO(e){var t=function(e){var t={},n=0;function r(i){var o=n;kR(e.children(i),r),t[i]={low:o,lim:n++}}return kR(e.children(),r),t}(e);kR(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,o=function(e,t,n,r){var i,o,a=[],s=[],l=Math.min(t[n].low,t[r].low),u=Math.max(t[n].lim,t[r].lim);i=n;do{i=e.parent(i),a.push(i)}while(i&&(t[i].low>l||u>t[i].lim));o=i,i=r;for(;(i=e.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(e,t,i.v,i.w),a=o.path,s=o.lca,l=0,u=a[l],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(u=a[l])!==s&&e.node(u).maxRank<r.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<a.length-1&&e.node(u=a[l+1]).minRank<=r.rank;)l++;u=a[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function DO(e,t){var n={};return mL(t,function(t,r){var i=0,o=0,a=t.length,s=wR(r);return kR(r,function(t,l){var u=function(e,t){if(e.node(t).dummy)return LR(e.predecessors(t),function(t){return e.node(t).dummy})}(e,t),c=u?e.node(u).order:a;(u||t===s)&&(kR(r.slice(o,l+1),function(t){kR(e.predecessors(t),function(r){var o=e.node(r),a=o.order;!(a<i||c<a)||o.dummy&&e.node(t).dummy||PO(n,r,t)})}),o=l+1,i=c)}),r}),n}function PO(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function BO(e,t,n){if(t>n){var r=t;t=n,n=r}return!!e[t]&&Object.prototype.hasOwnProperty.call(e[t],n)}function FO(e,t,n,r,i){var o={},a=function(e,t,n,r){var i=new NL,o=e.graph(),a=function(e,t,n){return function(r,i,o){var a,s=r.node(i),l=r.node(o),u=0;if(u+=s.width/2,Object.prototype.hasOwnProperty.call(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(u+=n?a:-a),a=0,u+=(s.dummy?t:e)/2,u+=(l.dummy?t:e)/2,u+=l.width/2,Object.prototype.hasOwnProperty.call(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":a=l.width/2;break;case"r":a=-l.width/2}return a&&(u+=n?a:-a),a=0,u}}(o.nodesep,o.edgesep,r);return kR(t,function(t){var r;kR(t,function(t){var o=n[t];if(i.setNode(o),r){var s=n[r],l=i.edge(s,o);i.setEdge(s,o,Math.max(a(e,t,r),l||0))}r=t})}),i}(e,t,n,i),s=i?"borderLeft":"borderRight";function l(e,t){for(var n=a.nodes(),r=n.pop(),i={};r;)i[r]?e(r):(i[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return l(function(e){o[e]=a.inEdges(e).reduce(function(e,t){return Math.max(e,o[t.v]+a.edge(t))},0)},a.predecessors.bind(a)),l(function(t){var n=a.outEdges(t).reduce(function(e,t){return Math.min(e,o[t.w]-a.edge(t))},Number.POSITIVE_INFINITY),r=e.node(t);n!==Number.POSITIVE_INFINITY&&r.borderType!==s&&(o[t]=Math.max(o[t],n))},a.successors.bind(a)),kR(r,function(e){o[e]=o[n[e]]}),o}function zO(e,t){return oL(qR(t),function(t){var n,r,i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return r=function(t,n){var r=function(e,t){return e.node(t).width}(e,n)/2;i=Math.max(t+r,i),o=Math.min(t-r,o)},null==(n=t)||kx(n,_R(r),kw),i-o})}function UO(e){var t,n=HL(e),r=Fw(DO(e,n),function(e,t){var n={};function r(t,r,i,o,a){var s;kR(pL(r,i),function(r){s=t[r],e.node(s).dummy&&kR(e.predecessors(s),function(t){var r=e.node(t);r.dummy&&(r.order<o||r.order>a)&&PO(n,t,s)})})}return mL(t,function(t,n){var i,o=-1,a=0;return kR(n,function(s,l){if("border"===e.node(s).dummy){var u=e.predecessors(s);u.length&&(i=e.node(u[0]).order,r(n,a,l,o,i),a=l,o=i)}r(n,a,n.length,i,t.length)}),n}),n}(e,n)),i={};kR(["u","d"],function(o){t="u"===o?n:qR(n).reverse(),kR(["l","r"],function(n){"r"===n&&(t=PR(t,function(e){return qR(e).reverse()}));var a=("u"===o?e.predecessors:e.successors).bind(e),s=function(e,t,n,r){var i={},o={},a={};return kR(t,function(e){kR(e,function(e,t){i[e]=e,o[e]=e,a[e]=t})}),kR(t,function(e){var t=-1;kR(e,function(e){var s=r(e);if(s.length)for(var l=((s=xL(s,function(e){return a[e]})).length-1)/2,u=Math.floor(l),c=Math.ceil(l);u<=c;++u){var h=s[u];o[e]===e&&t<a[h]&&!BO(n,e,h)&&(o[h]=e,o[e]=i[e]=i[h],t=a[h])}})}),{root:i,align:o}}(0,t,r,a),l=FO(e,t,s.root,s.align,"r"===n);"r"===n&&(l=tL(l,function(e){return-e})),i[o+n]=l})});var o=zO(e,i);return function(e,t){var n=qR(t),r=iL(n),i=rL(n);kR(["u","d"],function(n){kR(["l","r"],function(o){var a,s=n+o,l=e[s];if(l!==t){var u=qR(l);(a="l"===o?r-iL(u):i-rL(u))&&(e[s]=tL(l,function(e){return e+a}))}})})}(i,o),function(e,t){return tL(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=xL(PR(e,r));return(i[1]+i[2])/2})}(i,e.graph().align)}function GO(e){var t,n;(function(e){var t=HL(e),n=e.graph().ranksep,r=0;kR(t,function(t){var i=rL(PR(t,function(t){return e.node(t).height}));kR(t,function(t){e.node(t).y=r+i/2}),r+=i+n})})(e=VL(e)),t=UO(e),n=function(t,n){e.node(n).x=t},t&&fR(t,_R(n))}function VO(e,t){var n=qL;n("layout",()=>{var t=n("  buildLayoutGraph",()=>function(e){var t=new NL({multigraph:!0,compound:!0}),n=QO(e.graph());return t.setGraph(Fw({},HO,ZO(n,jO),hL(n,$O))),kR(e.nodes(),function(n){var r=QO(e.node(n));t.setNode(n,bR(ZO(r,YO),qO)),t.setParent(n,e.parent(n))}),kR(e.edges(),function(n){var r=QO(e.edge(n));t.setEdge(n,Fw({},XO,ZO(r,WO),hL(r,KO)))}),t}(e));n("  runLayout",()=>function(e,t){t("    makeSpaceForEdgeLabels",()=>function(e){var t=e.graph();t.ranksep/=2,kR(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}(e)),t("    removeSelfEdges",()=>function(e){kR(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}(e)),t("    acyclic",()=>UL(e)),t("    nestingGraph.run",()=>wO(e)),t("    rank",()=>yO(VL(e))),t("    injectEdgeLabelProxies",()=>function(e){kR(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};GL(e,"edge-proxy",i,"_ep")}})}(e)),t("    removeEmptyRanks",()=>function(e){var t=iL(PR(e.nodes(),function(t){return e.node(t).rank})),n=[];kR(e.nodes(),function(r){var i=e.node(r).rank-t;n[i]||(n[i]=[]),n[i].push(r)});var r=0,i=e.graph().nodeRankFactor;kR(n,function(t,n){JR(t)&&n%i!==0?--r:r&&kR(t,function(t){e.node(t).rank+=r})})}(e)),t("    nestingGraph.cleanup",()=>function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,kR(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}(e)),t("    normalizeRanks",()=>function(e){var t=iL(PR(e.nodes(),function(t){return e.node(t).rank}));kR(e.nodes(),function(n){var r=e.node(n);$R(r,"rank")&&(r.rank-=t)})}(e)),t("    assignRankMinMax",()=>function(e){var t=0;kR(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=rL(t,r.maxRank))}),e.graph().maxRank=t}(e)),t("    removeEdgeLabelProxies",()=>function(e){kR(e.nodes(),function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}(e)),t("    normalize.run",()=>eO(e)),t("    parentDummyChains",()=>OO(e)),t("    addBorderSegments",()=>function(e){kR(e.children(),function t(n){var r=e.children(n),i=e.node(n);if(r.length&&kR(r,t),Object.prototype.hasOwnProperty.call(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)WL(e,"borderLeft","_bl",n,i,o),WL(e,"borderRight","_br",n,i,o)}})}(e)),t("    order",()=>CO(e)),t("    insertSelfEdges",()=>function(e){var t=HL(e);kR(t,function(t){var n=0;kR(t,function(t,r){var i=e.node(t);i.order=r+n,kR(i.selfEdges,function(t){GL(e,"selfedge",{width:t.label.width,height:t.label.height,rank:i.rank,order:r+ ++n,e:t.e,label:t.label},"_se")}),delete i.selfEdges})})}(e)),t("    adjustCoordinateSystem",()=>function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||KL(e)}(e)),t("    position",()=>GO(e)),t("    positionSelfEdges",()=>function(e){kR(e.nodes(),function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}(e)),t("    removeBorderNodes",()=>function(e){kR(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),o=e.node(wR(n.borderLeft)),a=e.node(wR(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),kR(e.nodes(),function(t){"border"===e.node(t).dummy&&e.removeNode(t)})}(e)),t("    normalize.undo",()=>function(e){kR(e.graph().dummyChains,function(t){var n,r=e.node(t),i=r.edgeLabel;for(e.setEdge(r.edgeObj,i);r.dummy;)n=e.successors(t)[0],e.removeNode(t),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),t=n,r=e.node(t)})}(e)),t("    fixupEdgeLabelCoords",()=>function(e){kR(e.edges(),function(t){var n=e.edge(t);if(Object.prototype.hasOwnProperty.call(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(e)),t("    undoCoordinateSystem",()=>XL(e)),t("    translateGraph",()=>function(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=e.graph(),a=o.marginx||0,s=o.marginy||0;function l(e){var o=e.x,a=e.y,s=e.width,l=e.height;t=Math.min(t,o-s/2),n=Math.max(n,o+s/2),r=Math.min(r,a-l/2),i=Math.max(i,a+l/2)}kR(e.nodes(),function(t){l(e.node(t))}),kR(e.edges(),function(t){var n=e.edge(t);Object.prototype.hasOwnProperty.call(n,"x")&&l(n)}),t-=a,r-=s,kR(e.nodes(),function(n){var i=e.node(n);i.x-=t,i.y-=r}),kR(e.edges(),function(n){var i=e.edge(n);kR(i.points,function(e){e.x-=t,e.y-=r}),Object.prototype.hasOwnProperty.call(i,"x")&&(i.x-=t),Object.prototype.hasOwnProperty.call(i,"y")&&(i.y-=r)}),o.width=n-t+a,o.height=i-r+s}(e)),t("    assignNodeIntersects",()=>function(e){kR(e.edges(),function(t){var n,r,i=e.edge(t),o=e.node(t.v),a=e.node(t.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(jL(o,n)),i.points.push(jL(a,r))})}(e)),t("    reversePoints",()=>function(e){kR(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}(e)),t("    acyclic.undo",()=>function(e){kR(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}(e))}(t,n)),n("  updateInputGraph",()=>function(e,t){kR(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),kR(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,Object.prototype.hasOwnProperty.call(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t))})}var jO=["nodesep","edgesep","ranksep","marginx","marginy"],HO={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},$O=["acyclicer","ranker","rankdir","align"],YO=["width","height"],qO={width:0,height:0},WO=["minlen","weight","width","height","labeloffset"],XO={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},KO=["labelpos"];function ZO(e,t){return tL(hL(e,t),Number)}function QO(e){var t={};return kR(e,function(e,n){t[n.toLowerCase()]=e}),t}function JO(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:eD(e),edges:tD(e)};return JR(e.graph())||(t.value=zI(e.graph())),t}function eD(e){return PR(e.nodes(),function(t){var n=e.node(t),r=e.parent(t),i={v:t};return JR(n)||(i.value=n),JR(r)||(i.parent=r),i})}function tD(e){return PR(e.edges(),function(t){var n=e.edge(t),r={v:t.v,w:t.w};return JR(t.name)||(r.name=t.name),JR(n)||(r.value=n),r})}function nD(e){return"object"==typeof e&&null!==e&&"string"==typeof e.$type}function rD(e){return"object"==typeof e&&null!==e&&"string"==typeof e.$refText}function iD(e){return"object"==typeof e&&null!==e&&nD(e.container)&&rD(e.reference)&&"string"==typeof e.message}class oD{constructor(){this.subtypes={},this.allSubtypes={}}isInstance(e,t){return nD(e)&&this.isSubtype(e.$type,t)}isSubtype(e,t){if(e===t)return!0;let n=this.subtypes[e];n||(n=this.subtypes[e]={});const r=n[t];if(void 0!==r)return r;{const r=this.computeIsSubtype(e,t);return n[t]=r,r}}getAllSubTypes(e){const t=this.allSubtypes[e];if(t)return t;{const t=this.getAllTypes(),n=[];for(const r of t)this.isSubtype(r,e)&&n.push(r);return this.allSubtypes[e]=n,n}}}function aD(e){return"object"==typeof e&&null!==e&&Array.isArray(e.content)}function sD(e){return"object"==typeof e&&null!==e&&"object"==typeof e.tokenType}function lD(e){return aD(e)&&"string"==typeof e.fullText}class uD{constructor(e,t){this.startFn=e,this.nextFn=t}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){const e=this.iterator();return Boolean(e.next().done)}count(){const e=this.iterator();let t=0,n=e.next();for(;!n.done;)t++,n=e.next();return t}toArray(){const e=[],t=this.iterator();let n;do{n=t.next(),void 0!==n.value&&e.push(n.value)}while(!n.done);return e}toSet(){return new Set(this)}toMap(e,t){const n=this.map(n=>[e?e(n):n,t?t(n):n]);return new Map(n)}toString(){return this.join()}concat(e){return new uD(()=>({first:this.startFn(),firstDone:!1,iterator:e[Symbol.iterator]()}),e=>{let t;if(!e.firstDone){do{if(t=this.nextFn(e.first),!t.done)return t}while(!t.done);e.firstDone=!0}do{if(t=e.iterator.next(),!t.done)return t}while(!t.done);return fD})}join(e=","){const t=this.iterator();let n,r="",i=!1;do{n=t.next(),n.done||(i&&(r+=e),r+=cD(n.value)),i=!0}while(!n.done);return r}indexOf(e,t=0){const n=this.iterator();let r=0,i=n.next();for(;!i.done;){if(r>=t&&i.value===e)return r;i=n.next(),r++}return-1}every(e){const t=this.iterator();let n=t.next();for(;!n.done;){if(!e(n.value))return!1;n=t.next()}return!0}some(e){const t=this.iterator();let n=t.next();for(;!n.done;){if(e(n.value))return!0;n=t.next()}return!1}forEach(e){const t=this.iterator();let n=0,r=t.next();for(;!r.done;)e(r.value,n),r=t.next(),n++}map(e){return new uD(this.startFn,t=>{const{done:n,value:r}=this.nextFn(t);return n?fD:{done:!1,value:e(r)}})}filter(e){return new uD(this.startFn,t=>{let n;do{if(n=this.nextFn(t),!n.done&&e(n.value))return n}while(!n.done);return fD})}nonNullable(){return this.filter(e=>null!=e)}reduce(e,t){const n=this.iterator();let r=t,i=n.next();for(;!i.done;)r=void 0===r?i.value:e(r,i.value),i=n.next();return r}reduceRight(e,t){return this.recursiveReduce(this.iterator(),e,t)}recursiveReduce(e,t,n){const r=e.next();if(r.done)return n;const i=this.recursiveReduce(e,t,n);return void 0===i?r.value:t(i,r.value)}find(e){const t=this.iterator();let n=t.next();for(;!n.done;){if(e(n.value))return n.value;n=t.next()}}findIndex(e){const t=this.iterator();let n=0,r=t.next();for(;!r.done;){if(e(r.value))return n;r=t.next(),n++}return-1}includes(e){const t=this.iterator();let n=t.next();for(;!n.done;){if(n.value===e)return!0;n=t.next()}return!1}flatMap(e){return new uD(()=>({this:this.startFn()}),t=>{do{if(t.iterator){const e=t.iterator.next();if(!e.done)return e;t.iterator=void 0}const{done:n,value:r}=this.nextFn(t.this);if(!n){const n=e(r);if(!hD(n))return{done:!1,value:n};t.iterator=n[Symbol.iterator]()}}while(t.iterator);return fD})}flat(e){if(void 0===e&&(e=1),e<=0)return this;const t=e>1?this.flat(e-1):this;return new uD(()=>({this:t.startFn()}),e=>{do{if(e.iterator){const t=e.iterator.next();if(!t.done)return t;e.iterator=void 0}const{done:n,value:r}=t.nextFn(e.this);if(!n){if(!hD(r))return{done:!1,value:r};e.iterator=r[Symbol.iterator]()}}while(e.iterator);return fD})}head(){const e=this.iterator().next();if(!e.done)return e.value}tail(e=1){return new uD(()=>{const t=this.startFn();for(let n=0;n<e;n++){if(this.nextFn(t).done)return t}return t},this.nextFn)}limit(e){return new uD(()=>({size:0,state:this.startFn()}),t=>(t.size++,t.size>e?fD:this.nextFn(t.state)))}distinct(e){return new uD(()=>({set:new Set,internalState:this.startFn()}),t=>{let n;do{if(n=this.nextFn(t.internalState),!n.done){const r=e?e(n.value):n.value;if(!t.set.has(r))return t.set.add(r),n}}while(!n.done);return fD})}exclude(e,t){const n=new Set;for(const r of e){const e=t?t(r):r;n.add(e)}return this.filter(e=>{const r=t?t(e):e;return!n.has(r)})}}function cD(e){return"string"==typeof e?e:void 0===e?"undefined":"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}function hD(e){return!!e&&"function"==typeof e[Symbol.iterator]}const dD=new uD(()=>{},()=>fD),fD=Object.freeze({done:!0,value:void 0});function pD(...e){if(1===e.length){const t=e[0];if(t instanceof uD)return t;if(hD(t))return new uD(()=>t[Symbol.iterator](),e=>e.next());if("number"==typeof t.length)return new uD(()=>({index:0}),e=>e.index<t.length?{done:!1,value:t[e.index++]}:fD)}return e.length>1?new uD(()=>({collIndex:0,arrIndex:0}),t=>{do{if(t.iterator){const e=t.iterator.next();if(!e.done)return e;t.iterator=void 0}if(t.array){if(t.arrIndex<t.array.length)return{done:!1,value:t.array[t.arrIndex++]};t.array=void 0,t.arrIndex=0}if(t.collIndex<e.length){const n=e[t.collIndex++];hD(n)?t.iterator=n[Symbol.iterator]():n&&"number"==typeof n.length&&(t.array=n)}}while(t.iterator||t.array||t.collIndex<e.length);return fD}):dD}class gD extends uD{constructor(e,t,n){super(()=>({iterators:(null==n?void 0:n.includeRoot)?[[e][Symbol.iterator]()]:[t(e)[Symbol.iterator]()],pruned:!1}),e=>{for(e.pruned&&(e.iterators.pop(),e.pruned=!1);e.iterators.length>0;){const n=e.iterators[e.iterators.length-1].next();if(!n.done)return e.iterators.push(t(n.value)[Symbol.iterator]()),n;e.iterators.pop()}return fD})}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),prune:()=>{e.state.pruned=!0},[Symbol.iterator]:()=>e};return e}}var mD,vD,yD,bD;function xD(e){return new gD(e,e=>aD(e)?e.content:[],{includeRoot:!0})}function wD(e){return{start:{character:e.startColumn-1,line:e.startLine-1},end:{character:e.endColumn,line:e.endLine-1}}}function ED(e){if(!e)return;const{offset:t,end:n,range:r}=e;return{range:r,offset:t,end:n,length:n-t}}function TD(e,t){const n=function(e,t){if(e.end.line<t.start.line||e.end.line===t.start.line&&e.end.character<=t.start.character)return yD.Before;if(e.start.line>t.end.line||e.start.line===t.end.line&&e.start.character>=t.end.character)return yD.After;const n=e.start.line>t.start.line||e.start.line===t.start.line&&e.start.character>=t.start.character,r=e.end.line<t.end.line||e.end.line===t.end.line&&e.end.character<=t.end.character;return n&&r?yD.Inside:n?yD.OverlapBack:r?yD.OverlapFront:yD.Outside}(e,t);return n>yD.After}(vD=mD||(mD={})).sum=function(e){return e.reduce((e,t)=>e+t,0)},vD.product=function(e){return e.reduce((e,t)=>e*t,0)},vD.min=function(e){return e.reduce((e,t)=>Math.min(e,t))},vD.max=function(e){return e.reduce((e,t)=>Math.max(e,t))},(bD=yD||(yD={}))[bD.Before=0]="Before",bD[bD.After=1]="After",bD[bD.OverlapFront=2]="OverlapFront",bD[bD.OverlapBack=3]="OverlapBack",bD[bD.Inside=4]="Inside",bD[bD.Outside=5]="Outside";const _D=/^[\w\p{L}]$/u;function kD(e,t){return sD(e)&&t.includes(e.tokenType.name)}class AD extends Error{constructor(e,t){super(e?`${t} at ${e.range.start.line}:${e.range.start.character}`:t)}}function SD(e){throw new Error("Error! The input value was not handled.")}const ND="AbstractRule",MD="AbstractType",CD="Condition",ID="TypeDefinition",RD="ValueLiteral",LD="AbstractElement";function OD(e){return PP.isInstance(e,LD)}const DD="ArrayLiteral",PD="ArrayType",BD="BooleanLiteral";const FD="Conjunction";const zD="Disjunction";const UD="Grammar",GD="GrammarImport",VD="InferredType";function jD(e){return PP.isInstance(e,VD)}const HD="Interface";function $D(e){return PP.isInstance(e,HD)}const YD="NamedArgument",qD="Negation";const WD="NumberLiteral",XD="Parameter",KD="ParameterReference";const ZD="ParserRule";function QD(e){return PP.isInstance(e,ZD)}const JD="ReferenceType",eP="ReturnType";const tP="SimpleType";function nP(e){return PP.isInstance(e,tP)}const rP="StringLiteral",iP="TerminalRule";function oP(e){return PP.isInstance(e,iP)}const aP="Type";function sP(e){return PP.isInstance(e,aP)}const lP="TypeAttribute",uP="UnionType",cP="Action";function hP(e){return PP.isInstance(e,cP)}const dP="Alternatives";function fP(e){return PP.isInstance(e,dP)}const pP="Assignment";function gP(e){return PP.isInstance(e,pP)}const mP="CharacterRange";const vP="CrossReference";function yP(e){return PP.isInstance(e,vP)}const bP="EndOfFile";const xP="Group";function wP(e){return PP.isInstance(e,xP)}const EP="Keyword";function TP(e){return PP.isInstance(e,EP)}const _P="NegatedToken";const kP="RegexToken";const AP="RuleCall";function SP(e){return PP.isInstance(e,AP)}const NP="TerminalAlternatives";const MP="TerminalGroup";const CP="TerminalRuleCall";const IP="UnorderedGroup";function RP(e){return PP.isInstance(e,IP)}const LP="UntilToken";const OP="Wildcard";class DP extends oD{getAllTypes(){return[LD,ND,MD,cP,dP,DD,PD,pP,BD,mP,CD,FD,vP,zD,bP,UD,GD,xP,VD,HD,EP,YD,_P,qD,WD,XD,KD,ZD,JD,kP,eP,AP,tP,rP,NP,MP,iP,CP,aP,lP,ID,uP,IP,LP,RD,OP]}computeIsSubtype(e,t){switch(e){case cP:case dP:case pP:case mP:case vP:case bP:case xP:case EP:case _P:case kP:case AP:case NP:case MP:case CP:case IP:case LP:case OP:return this.isSubtype(LD,t);case DD:case WD:case rP:return this.isSubtype(RD,t);case PD:case JD:case tP:case uP:return this.isSubtype(ID,t);case BD:return this.isSubtype(CD,t)||this.isSubtype(RD,t);case FD:case zD:case qD:case KD:return this.isSubtype(CD,t);case VD:case HD:case aP:return this.isSubtype(MD,t);case ZD:return this.isSubtype(ND,t)||this.isSubtype(MD,t);case iP:return this.isSubtype(ND,t);default:return!1}}getReferenceType(e){const t=`${e.container.$type}:${e.property}`;switch(t){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return MD;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return ND;case"Grammar:usedGrammars":return UD;case"NamedArgument:parameter":case"ParameterReference:parameter":return XD;case"TerminalRuleCall:rule":return iP;default:throw new Error(`${t} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){case LD:return{name:LD,properties:[{name:"cardinality"},{name:"lookahead"}]};case DD:return{name:DD,properties:[{name:"elements",defaultValue:[]}]};case PD:return{name:PD,properties:[{name:"elementType"}]};case BD:return{name:BD,properties:[{name:"true",defaultValue:!1}]};case FD:return{name:FD,properties:[{name:"left"},{name:"right"}]};case zD:return{name:zD,properties:[{name:"left"},{name:"right"}]};case UD:return{name:UD,properties:[{name:"definesHiddenTokens",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"imports",defaultValue:[]},{name:"interfaces",defaultValue:[]},{name:"isDeclared",defaultValue:!1},{name:"name"},{name:"rules",defaultValue:[]},{name:"types",defaultValue:[]},{name:"usedGrammars",defaultValue:[]}]};case GD:return{name:GD,properties:[{name:"path"}]};case VD:return{name:VD,properties:[{name:"name"}]};case HD:return{name:HD,properties:[{name:"attributes",defaultValue:[]},{name:"name"},{name:"superTypes",defaultValue:[]}]};case YD:return{name:YD,properties:[{name:"calledByName",defaultValue:!1},{name:"parameter"},{name:"value"}]};case qD:return{name:qD,properties:[{name:"value"}]};case WD:return{name:WD,properties:[{name:"value"}]};case XD:return{name:XD,properties:[{name:"name"}]};case KD:return{name:KD,properties:[{name:"parameter"}]};case ZD:return{name:ZD,properties:[{name:"dataType"},{name:"definesHiddenTokens",defaultValue:!1},{name:"definition"},{name:"entry",defaultValue:!1},{name:"fragment",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"inferredType"},{name:"name"},{name:"parameters",defaultValue:[]},{name:"returnType"},{name:"wildcard",defaultValue:!1}]};case JD:return{name:JD,properties:[{name:"referenceType"}]};case eP:return{name:eP,properties:[{name:"name"}]};case tP:return{name:tP,properties:[{name:"primitiveType"},{name:"stringType"},{name:"typeRef"}]};case rP:return{name:rP,properties:[{name:"value"}]};case iP:return{name:iP,properties:[{name:"definition"},{name:"fragment",defaultValue:!1},{name:"hidden",defaultValue:!1},{name:"name"},{name:"type"}]};case aP:return{name:aP,properties:[{name:"name"},{name:"type"}]};case lP:return{name:lP,properties:[{name:"defaultValue"},{name:"isOptional",defaultValue:!1},{name:"name"},{name:"type"}]};case uP:return{name:uP,properties:[{name:"types",defaultValue:[]}]};case cP:return{name:cP,properties:[{name:"cardinality"},{name:"feature"},{name:"inferredType"},{name:"lookahead"},{name:"operator"},{name:"type"}]};case dP:return{name:dP,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case pP:return{name:pP,properties:[{name:"cardinality"},{name:"feature"},{name:"lookahead"},{name:"operator"},{name:"terminal"}]};case mP:return{name:mP,properties:[{name:"cardinality"},{name:"left"},{name:"lookahead"},{name:"right"}]};case vP:return{name:vP,properties:[{name:"cardinality"},{name:"deprecatedSyntax",defaultValue:!1},{name:"lookahead"},{name:"terminal"},{name:"type"}]};case bP:return{name:bP,properties:[{name:"cardinality"},{name:"lookahead"}]};case xP:return{name:xP,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"guardCondition"},{name:"lookahead"}]};case EP:return{name:EP,properties:[{name:"cardinality"},{name:"lookahead"},{name:"value"}]};case _P:return{name:_P,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case kP:return{name:kP,properties:[{name:"cardinality"},{name:"lookahead"},{name:"regex"}]};case AP:return{name:AP,properties:[{name:"arguments",defaultValue:[]},{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case NP:return{name:NP,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case MP:return{name:MP,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case CP:return{name:CP,properties:[{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case IP:return{name:IP,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case LP:return{name:LP,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case OP:return{name:OP,properties:[{name:"cardinality"},{name:"lookahead"}]};default:return{name:e,properties:[]}}}}const PP=new DP;function BP(e,t){let n=e;for(;n;){if(t(n))return n;n=n.$container}}function FP(e){const t=zP(e).$document;if(!t)throw new Error("AST node has no document.");return t}function zP(e){for(;e.$container;)e=e.$container;return e}function UP(e,t){if(!e)throw new Error("Node must be an AstNode.");const n=null==t?void 0:t.range;return new uD(()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0}),t=>{for(;t.keyIndex<t.keys.length;){const r=t.keys[t.keyIndex];if(!r.startsWith("$")){const i=e[r];if(nD(i)){if(t.keyIndex++,jP(i,n))return{done:!1,value:i}}else if(Array.isArray(i)){for(;t.arrayIndex<i.length;){const e=i[t.arrayIndex++];if(nD(e)&&jP(e,n))return{done:!1,value:e}}t.arrayIndex=0}}t.keyIndex++}return fD})}function GP(e,t){if(!e)throw new Error("Root node must be an AstNode.");return new gD(e,e=>UP(e,t))}function VP(e,t){if(!e)throw new Error("Root node must be an AstNode.");return new gD(e,e=>UP(e,t),{includeRoot:!0})}function jP(e,t){var n;if(!t)return!0;const r=null===(n=e.$cstNode)||void 0===n?void 0:n.range;return!!r&&TD(r,t)}function HP(e){return new uD(()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0}),t=>{for(;t.keyIndex<t.keys.length;){const n=t.keys[t.keyIndex];if(!n.startsWith("$")){const r=e[n];if(rD(r))return t.keyIndex++,{done:!1,value:{reference:r,container:e,property:n}};if(Array.isArray(r)){for(;t.arrayIndex<r.length;){const i=t.arrayIndex++,o=r[i];if(rD(o))return{done:!1,value:{reference:o,container:e,property:n,index:i}}}t.arrayIndex=0}}t.keyIndex++}return fD})}function $P(e){return Array.isArray(e)?[...e.map($P)]:e}function YP(e){return e.charCodeAt(0)}function qP(e,t){Array.isArray(e)?e.forEach(function(e){t.push(e)}):t.push(e)}function WP(e,t){if(!0===e[t])throw"duplicate flag "+t;e[t],e[t]=!0}function XP(e){if(void 0===e)throw Error("Internal Error - Should never get here!");return!0}function KP(e){return"Character"===e.type}const ZP=[];for(let R7=YP("0");R7<=YP("9");R7++)ZP.push(R7);const QP=[YP("_")].concat(ZP);for(let R7=YP("a");R7<=YP("z");R7++)QP.push(R7);for(let R7=YP("A");R7<=YP("Z");R7++)QP.push(R7);const JP=[YP(" "),YP("\f"),YP("\n"),YP("\r"),YP("\t"),YP("\v"),YP("\t"),YP(" "),YP(" "),YP(" "),YP(" "),YP(" "),YP(" "),YP(" "),YP(" "),YP(" "),YP(" "),YP(" "),YP(" "),YP(" "),YP("\u2028"),YP("\u2029"),YP(" "),YP(" "),YP("　"),YP("\ufeff")],eB=/[0-9a-fA-F]/,tB=/[0-9]/,nB=/[1-9]/;class rB{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const t=this.disjunction();this.consumeChar("/");const n={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":WP(n,"global");break;case"i":WP(n,"ignoreCase");break;case"m":WP(n,"multiLine");break;case"u":WP(n,"unicode");break;case"y":WP(n,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:t,loc:this.loc(0)}}disjunction(){const e=[],t=this.idx;for(e.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){const e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":let t;switch(this.consumeChar("?"),this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead"}XP(t);const n=this.disjunction();return this.consumeChar(")"),{type:t,value:n,loc:this.loc(e)}}return function(){throw Error("Internal Error - Should never get here!")}()}quantifier(e=!1){let t;const n=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":const n=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:n,atMost:n};break;case",":let e;this.isDigit()?(e=this.integerIncludingZero(),t={atLeast:n,atMost:e}):t={atLeast:n,atMost:1/0},this.consumeChar("}")}if(!0===e&&void 0===t)return;XP(t)}if(!0!==e||void 0!==t)return XP(t)?("?"===this.peekChar(0)?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(n),t):void 0}atom(){let e;const t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group()}if(void 0===e&&this.isPatternCharacter()&&(e=this.patternCharacter()),XP(e))return e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[YP("\n"),YP("\r"),YP("\u2028"),YP("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=ZP;break;case"D":e=ZP,t=!0;break;case"s":e=JP;break;case"S":e=JP,t=!0;break;case"w":e=QP;break;case"W":e=QP,t=!0}if(XP(e))return{type:"Set",value:e,complement:t}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=YP("\f");break;case"n":e=YP("\n");break;case"r":e=YP("\r");break;case"t":e=YP("\t");break;case"v":e=YP("\v")}if(XP(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(!1===/[a-zA-Z]/.test(e))throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:YP("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){return{type:"Character",value:YP(this.popChar())}}classPatternCharacterAtom(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:YP(this.popChar())}}}characterClass(){const e=[];let t=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),t=!0);this.isClassAtom();){const t=this.classAtom();if(t.type,KP(t)&&this.isRangeDash()){this.consumeChar("-");const n=this.classAtom();if(n.type,KP(n)){if(n.value<t.value)throw Error("Range out of order in character class");e.push({from:t.value,to:n.value})}else qP(t.value,e),e.push(YP("-")),qP(n.value,e)}else qP(t.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:YP("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;if(this.consumeChar("("),"?"===this.peekChar(0))this.consumeChar("?"),this.consumeChar(":"),e=!1;else this.groupIdx++;const t=this.disjunction();this.consumeChar(")");const n={type:"Group",capturing:e,value:t};return e&&(n.idx=this.groupIdx),n}positiveInteger(){let e=this.popChar();if(!1===nB.test(e))throw Error("Expecting a positive integer");for(;tB.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(!1===tB.test(e))throw Error("Expecting an integer");for(;tB.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:YP(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return"-"===this.peekChar()&&this.isClassAtom(1)}isDigit(){return tB.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}}isQuantifier(){const e=this.saveState();try{return void 0!==this.quantifier(!0)}catch(LY){return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let n=0;n<e;n++){const e=this.popChar();if(!1===eB.test(e))throw Error("Expecting a HexDecimal digits");t+=e}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(void 0!==e&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class iB{visitChildren(e){for(const t in e){const n=e[t];e.hasOwnProperty(t)&&(void 0!==n.type?this.visit(n):Array.isArray(n)&&n.forEach(e=>{this.visit(e)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e)}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}const oB=/\r?\n/gm,aB=new rB;const sB=new class extends iB{constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(e){this.multiline=!1,this.regex=e,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(e){e.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(e){const t=String.fromCharCode(e.value);if(this.multiline||"\n"!==t||(this.multiline=!0),e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const e=hB(t);this.endRegexpStack.push(e),this.isStarting&&(this.startRegexp+=e)}}visitSet(e){if(!this.multiline){const t=this.regex.substring(e.loc.begin,e.loc.end),n=new RegExp(t);this.multiline=Boolean("\n".match(n))}if(e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const t=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexpStack.push(t),this.isStarting&&(this.startRegexp+=t)}}visitChildren(e){if("Group"===e.type){if(e.quantifier)return}super.visitChildren(e)}};function lB(e){try{return"string"==typeof e&&(e=new RegExp(e)),e=e.toString(),sB.reset(e),sB.visit(aB.pattern(e)),sB.multiline}catch(t){return!1}}const uB="\f\n\r\t\v              \u2028\u2029  　\ufeff".split("");function cB(e){const t="string"==typeof e?new RegExp(e):e;return uB.some(e=>t.test(e))}function hB(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function dB(e,t){const n=function(e){"string"==typeof e&&(e=new RegExp(e));const t=e,n=e.source;let r=0;function i(){let e,o="";function a(e){o+=n.substr(r,e),r+=e}function s(e){o+="(?:"+n.substr(r,e)+"|$)",r+=e}for(;r<n.length;)switch(n[r]){case"\\":switch(n[r+1]){case"c":s(3);break;case"x":s(4);break;case"u":t.unicode?"{"===n[r+2]?s(n.indexOf("}",r)-r+1):s(6):s(2);break;case"p":case"P":t.unicode?s(n.indexOf("}",r)-r+1):s(2);break;case"k":s(n.indexOf(">",r)-r+1);break;default:s(2)}break;case"[":e=/\[(?:\\.|.)*?\]/g,e.lastIndex=r,e=e.exec(n)||[],s(e[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":a(1);break;case"{":e=/\{\d+,?\d*\}/g,e.lastIndex=r,e=e.exec(n),e?a(e[0].length):s(1);break;case"(":if("?"===n[r+1])switch(n[r+2]){case":":o+="(?:",r+=3,o+=i()+"|$)";break;case"=":o+="(?=",r+=3,o+=i()+")";break;case"!":e=r,r+=3,i(),o+=n.substr(e,r-e);break;case"<":switch(n[r+3]){case"=":case"!":e=r,r+=4,i(),o+=n.substr(e,r-e);break;default:a(n.indexOf(">",r)-r+1),o+=i()+"|$)"}}else a(1),o+=i()+"|$)";break;case")":return++r,o;default:s(1)}return o}return new RegExp(i(),e.flags)}(e),r=t.match(n);return!!r&&r[0].length>0}function fB(e,t){const n=new Set,r=function(e){return e.rules.find(e=>QD(e)&&e.entry)}(e);if(!r)return new Set(e.rules);const i=[r].concat(function(e){return e.rules.filter(e=>oP(e)&&e.hidden)}(e));for(const a of i)pB(a,n,t);const o=new Set;for(const a of e.rules)(n.has(a.name)||oP(a)&&a.hidden)&&o.add(a);return o}function pB(e,t,n){t.add(e.name),GP(e).forEach(e=>{if(SP(e)||n){const r=e.rule.ref;r&&!t.has(r.name)&&pB(r,t,n)}})}function gB(e){return e.hidden&&!cB(kB(e))}function mB(e,t,n){if(!e||!t)return;const r=vB(e,t,e.astNode,!0);return 0!==r.length?r[n=void 0!==n?Math.max(0,Math.min(n,r.length-1)):0]:void 0}function vB(e,t,n,r){if(!r){const n=BP(e.grammarSource,gP);if(n&&n.feature===t)return[e]}return aD(e)&&e.astNode===n?e.content.flatMap(e=>vB(e,t,n,!1)):[]}function yB(e,t,n){if(!e)return;const r=function(e,t,n){if(e.astNode!==n)return[];if(TP(e.grammarSource)&&e.grammarSource.value===t)return[e];const r=xD(e).iterator();let i;const o=[];do{if(i=r.next(),!i.done){const e=i.value;e.astNode===n?TP(e.grammarSource)&&e.grammarSource.value===t&&o.push(e):r.prune()}}while(!i.done);return o}(e,t,null==e?void 0:e.astNode);return 0!==r.length?r[n=void 0!==n?Math.max(0,Math.min(n,r.length-1)):0]:void 0}function bB(e){let t=e;return jD(t)&&(hP(t.$container)?t=t.$container.$container:QD(t.$container)?t=t.$container:SD(t.$container)),xB(e,t,new Map)}function xB(e,t,n){var r;function i(t,r){let i;return BP(t,gP)||(i=xB(r,r,n)),n.set(e,i),i}if(n.has(e))return n.get(e);n.set(e,void 0);for(const o of GP(t)){if(gP(o)&&"name"===o.feature.toLowerCase())return n.set(e,o),o;if(SP(o)&&QD(o.rule.ref))return i(o,o.rule.ref);if(nP(o)&&(null===(r=o.typeRef)||void 0===r?void 0:r.ref))return i(o,o.typeRef.ref)}}function wB(e){return EB(e,new Set)}function EB(e,t){if(t.has(e))return!0;t.add(e);for(const n of GP(e))if(SP(n)){if(!n.rule.ref)return!1;if(QD(n.rule.ref)&&!EB(n.rule.ref,t))return!1}else{if(gP(n))return!1;if(hP(n))return!1}return Boolean(e.definition)}function TB(e){if(e.inferredType)return e.inferredType.name;if(e.dataType)return e.dataType;if(e.returnType){const t=e.returnType.ref;if(t){if(QD(t))return t.name;if($D(t)||sP(t))return t.name}}}function _B(e){var t,n;if(QD(e))return wB(e)?e.name:null!==(t=TB(e))&&void 0!==t?t:e.name;if($D(e)||sP(e)||(n=e,PP.isInstance(n,eP)))return e.name;if(hP(e)){const t=function(e){var t;if(e.inferredType)return e.inferredType.name;if(null===(t=e.type)||void 0===t?void 0:t.ref)return _B(e.type.ref);return}(e);if(t)return t}else if(jD(e))return e.name;throw new Error("Cannot get name of Unknown Type")}function kB(e){const t={s:!1,i:!1,u:!1},n=SB(e.definition,t),r=Object.entries(t).filter(([,e])=>e).map(([e])=>e).join("");return new RegExp(n,r)}const AB=/[\s\S]/.source;function SB(e,t){if(a=e,PP.isInstance(a,NP))return MB((o=e).elements.map(e=>SB(e)).join("|"),{cardinality:o.cardinality,lookahead:o.lookahead});if(function(e){return PP.isInstance(e,MP)}(e))return MB((i=e).elements.map(e=>SB(e)).join(""),{cardinality:i.cardinality,lookahead:i.lookahead});if(function(e){return PP.isInstance(e,mP)}(e))return function(e){if(e.right)return MB(`[${NB(e.left)}-${NB(e.right)}]`,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1});return MB(NB(e.left),{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}(e);if(function(e){return PP.isInstance(e,CP)}(e)){const t=e.rule.ref;if(!t)throw new Error("Missing rule reference.");return MB(SB(t.definition),{cardinality:e.cardinality,lookahead:e.lookahead})}if(function(e){return PP.isInstance(e,_P)}(e))return MB(`(?!${SB((r=e).terminal)})${AB}*?`,{cardinality:r.cardinality,lookahead:r.lookahead});if(function(e){return PP.isInstance(e,LP)}(e))return MB(`${AB}*?${SB((n=e).terminal)}`,{cardinality:n.cardinality,lookahead:n.lookahead});if(function(e){return PP.isInstance(e,kP)}(e)){const n=e.regex.lastIndexOf("/"),r=e.regex.substring(1,n),i=e.regex.substring(n+1);return t&&(t.i=i.includes("i"),t.s=i.includes("s"),t.u=i.includes("u")),MB(r,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}if(function(e){return PP.isInstance(e,OP)}(e))return MB(AB,{cardinality:e.cardinality,lookahead:e.lookahead});throw new Error(`Invalid terminal element: ${null==e?void 0:e.$type}`);var n,r,i,o,a}function NB(e){return hB(e.value)}function MB(e,t){var n;return(!1!==t.wrap||t.lookahead)&&(e=`(${null!==(n=t.lookahead)&&void 0!==n?n:""}${e})`),t.cardinality?`${e}${t.cardinality}`:e}function CB(e){console&&console.error}function IB(e){console&&console.warn}function RB(e){const t=(new Date).getTime(),n=e();return{time:(new Date).getTime()-t,value:n}}function LB(e){function t(){}t.prototype=e;const n=new t;function r(){return typeof n.bar}return r(),r(),e}function OB(e){return YR((t=e).LABEL)&&""!==t.LABEL?e.LABEL:e.name;var t}class DB{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),kR(this.definition,t=>{t.accept(e)})}}class PB extends DB{constructor(e){super([]),this.idx=1,QC(this,lL(e,e=>void 0!==e))}set definition(e){}get definition(){return void 0!==this.referencedRule?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class BB extends DB{constructor(e){super(e.definition),this.orgText="",QC(this,lL(e,e=>void 0!==e))}}class FB extends DB{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,QC(this,lL(e,e=>void 0!==e))}}class zB extends DB{constructor(e){super(e.definition),this.idx=1,QC(this,lL(e,e=>void 0!==e))}}class UB extends DB{constructor(e){super(e.definition),this.idx=1,QC(this,lL(e,e=>void 0!==e))}}class GB extends DB{constructor(e){super(e.definition),this.idx=1,QC(this,lL(e,e=>void 0!==e))}}class VB extends DB{constructor(e){super(e.definition),this.idx=1,QC(this,lL(e,e=>void 0!==e))}}class jB extends DB{constructor(e){super(e.definition),this.idx=1,QC(this,lL(e,e=>void 0!==e))}}class HB extends DB{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,QC(this,lL(e,e=>void 0!==e))}}class $B{constructor(e){this.idx=1,QC(this,lL(e,e=>void 0!==e))}accept(e){e.visit(this)}}function YB(e){function t(e){return PR(e,YB)}if(e instanceof PB){const t={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return YR(e.label)&&(t.label=e.label),t}if(e instanceof FB)return{type:"Alternative",definition:t(e.definition)};if(e instanceof zB)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof UB)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof GB)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:YB(new $B({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof jB)return{type:"RepetitionWithSeparator",idx:e.idx,separator:YB(new $B({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof VB)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof HB)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof $B){const t={type:"Terminal",name:e.terminalType.name,label:OB(e.terminalType),idx:e.idx};YR(e.label)&&(t.terminalLabel=e.label);const n=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(t.pattern=QR(n)?n.source:n),t}if(e instanceof BB)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}class qB{visit(e){const t=e;switch(t.constructor){case PB:return this.visitNonTerminal(t);case FB:return this.visitAlternative(t);case zB:return this.visitOption(t);case UB:return this.visitRepetitionMandatory(t);case GB:return this.visitRepetitionMandatoryWithSeparator(t);case jB:return this.visitRepetitionWithSeparator(t);case VB:return this.visitRepetition(t);case HB:return this.visitAlternation(t);case $B:return this.visitTerminal(t);case BB:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function WB(e,t=[]){return!!(e instanceof zB||e instanceof VB||e instanceof jB)||(e instanceof HB?bL(e.definition,e=>WB(e,t)):!(e instanceof PB&&XR(t,e))&&(e instanceof DB&&(e instanceof PB&&t.push(e),NR(e.definition,e=>WB(e,t)))))}function XB(e){if(e instanceof PB)return"SUBRULE";if(e instanceof zB)return"OPTION";if(e instanceof HB)return"OR";if(e instanceof UB)return"AT_LEAST_ONE";if(e instanceof GB)return"AT_LEAST_ONE_SEP";if(e instanceof jB)return"MANY_SEP";if(e instanceof VB)return"MANY";if(e instanceof $B)return"CONSUME";throw Error("non exhaustive match")}class KB{walk(e,t=[]){kR(e.definition,(n,r)=>{const i=ER(e.definition,r+1);if(n instanceof PB)this.walkProdRef(n,i,t);else if(n instanceof $B)this.walkTerminal(n,i,t);else if(n instanceof FB)this.walkFlat(n,i,t);else if(n instanceof zB)this.walkOption(n,i,t);else if(n instanceof UB)this.walkAtLeastOne(n,i,t);else if(n instanceof GB)this.walkAtLeastOneSep(n,i,t);else if(n instanceof jB)this.walkManySep(n,i,t);else if(n instanceof VB)this.walkMany(n,i,t);else{if(!(n instanceof HB))throw Error("non exhaustive match");this.walkOr(n,i,t)}})}walkTerminal(e,t,n){}walkProdRef(e,t,n){}walkFlat(e,t,n){const r=t.concat(n);this.walk(e,r)}walkOption(e,t,n){const r=t.concat(n);this.walk(e,r)}walkAtLeastOne(e,t,n){const r=[new zB({definition:e.definition})].concat(t,n);this.walk(e,r)}walkAtLeastOneSep(e,t,n){const r=ZB(e,t,n);this.walk(e,r)}walkMany(e,t,n){const r=[new zB({definition:e.definition})].concat(t,n);this.walk(e,r)}walkManySep(e,t,n){const r=ZB(e,t,n);this.walk(e,r)}walkOr(e,t,n){const r=t.concat(n);kR(e.definition,e=>{const t=new FB({definition:[e]});this.walk(t,r)})}}function ZB(e,t,n){return[new zB({definition:[new $B({terminalType:e.separator})].concat(e.definition)})].concat(t,n)}function QB(e){if(e instanceof PB)return QB(e.referencedRule);if(e instanceof $B)return[e.terminalType];if(function(e){return e instanceof FB||e instanceof zB||e instanceof VB||e instanceof UB||e instanceof GB||e instanceof jB||e instanceof $B||e instanceof BB}(e))return function(e){let t=[];const n=e.definition;let r,i=0,o=n.length>i,a=!0;for(;o&&a;)r=n[i],a=WB(r),t=t.concat(QB(r)),i+=1,o=n.length>i;return _L(t)}(e);if(function(e){return e instanceof HB}(e))return function(e){const t=PR(e.definition,e=>QB(e));return _L(fI(t))}(e);throw Error("non exhaustive match")}const JB="_~IN~_";class eF extends KB{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,n){}walkProdRef(e,t,n){const r=(i=e.referencedRule,o=e.idx,i.name+o+JB+this.topProd.name);var i,o;const a=t.concat(n),s=QB(new FB({definition:a}));this.follows[r]=s}}let tF={};const nF=new rB;function rF(e){const t=e.toString();if(tF.hasOwnProperty(t))return tF[t];{const e=nF.pattern(t);return tF[t]=e,e}}const iF="Complement Sets are not supported for first char optimization";function oF(e,t=!1){try{const t=rF(e);return aF(t.value,{},t.flags.ignoreCase)}catch(LY){if(LY.message===iF)t&&IB(e.toString());else{let n="";t&&(n="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),CB(e.toString())}}return[]}function aF(e,t,n){switch(e.type){case"Disjunction":for(let i=0;i<e.value.length;i++)aF(e.value[i],t,n);break;case"Alternative":const r=e.value;for(let e=0;e<r.length;e++){const i=r[e];switch(i.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const o=i;switch(o.type){case"Character":sF(o.value,t,n);break;case"Set":if(!0===o.complement)throw Error(iF);kR(o.value,e=>{if("number"==typeof e)sF(e,t,n);else{const r=e;if(!0===n)for(let e=r.from;e<=r.to;e++)sF(e,t,n);else{for(let e=r.from;e<=r.to&&e<MF;e++)sF(e,t,n);if(r.to>=MF){const e=r.from>=MF?r.from:MF,n=r.to,i=IF(e),o=IF(n);for(let r=i;r<=o;r++)t[r]=r}}}});break;case"Group":aF(o.value,t,n);break;default:throw Error("Non Exhaustive Match")}const a=void 0!==o.quantifier&&0===o.quantifier.atLeast;if("Group"===o.type&&!1===uF(o)||"Group"!==o.type&&!1===a)break}break;default:throw Error("non exhaustive match!")}return qR(t)}function sF(e,t,n){const r=IF(e);t[r]=r,!0===n&&function(e,t){const n=String.fromCharCode(e),r=n.toUpperCase();if(r!==n){const e=IF(r.charCodeAt(0));t[e]=e}else{const e=n.toLowerCase();if(e!==n){const n=IF(e.charCodeAt(0));t[n]=n}}}(e,t)}function lF(e,t){return LR(e.value,e=>{if("number"==typeof e)return XR(t,e);{const n=e;return void 0!==LR(t,e=>n.from<=e&&e<=n.to)}})}function uF(e){const t=e.quantifier;return!(!t||0!==t.atLeast)||!!e.value&&(Wx(e.value)?NR(e.value,uF):uF(e.value))}class cF extends iB{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(!0!==this.found){switch(e.type){case"Lookahead":return void this.visitLookahead(e);case"NegativeLookahead":return void this.visitNegativeLookahead(e)}super.visitChildren(e)}}visitCharacter(e){XR(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?void 0===lF(e,this.targetCharCodes)&&(this.found=!0):void 0!==lF(e,this.targetCharCodes)&&(this.found=!0)}}function hF(e,t){if(t instanceof RegExp){const n=rF(t),r=new cF(e);return r.visit(n),r.found}return void 0!==LR(t,t=>XR(e,t.charCodeAt(0)))}const dF="PATTERN",fF="defaultMode",pF="modes";let gF="boolean"==typeof new RegExp("(?:)").sticky;function mF(e,t){const n=(t=bR(t,{useSticky:gF,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:(e,t)=>t()})).tracer;let r;n("initCharCodeToOptimizedIndexMap",()=>{!function(){if(wk(CF)){CF=new Array(65536);for(let e=0;e<65536;e++)CF[e]=e>255?255+~~(e/255):e}}()}),n("Reject Lexer.NA",()=>{r=vL(e,e=>e[dF]===$F.NA)});let i,o,a,s,l,u,c,h,d,f,p,g=!1;n("Transform Patterns",()=>{g=!1,i=PR(r,e=>{const n=e[dF];if(QR(n)){const e=n.source;return 1!==e.length||"^"===e||"$"===e||"."===e||n.ignoreCase?2!==e.length||"\\"!==e[0]||XR(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],e[1])?t.useSticky?wF(n):xF(n):e[1]:e}if(Xb(n))return g=!0,{exec:n};if("object"==typeof n)return g=!0,n;if("string"==typeof n){if(1===n.length)return n;{const e=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),r=new RegExp(e);return t.useSticky?wF(r):xF(r)}}throw Error("non exhaustive match")})}),n("misc mapping",()=>{o=PR(r,e=>e.tokenTypeIdx),a=PR(r,e=>{const t=e.GROUP;if(t!==$F.SKIPPED){if(YR(t))return t;if(JR(t))return!1;throw Error("non exhaustive match")}}),s=PR(r,e=>{const t=e.LONGER_ALT;if(t){return Wx(t)?PR(t,e=>KR(r,e)):[KR(r,t)]}}),l=PR(r,e=>e.PUSH_MODE),u=PR(r,e=>$R(e,"POP_MODE"))}),n("Line Terminator Handling",()=>{const e=SF(t.lineTerminatorCharacters);c=PR(r,e=>!1),"onlyOffset"!==t.positionTracking&&(c=PR(r,t=>$R(t,"LINE_BREAKS")?!!t.LINE_BREAKS:!1===AF(t,e)&&hF(e,t.PATTERN)))}),n("Misc Mapping #2",()=>{h=PR(r,TF),d=PR(i,_F),f=mL(r,(e,t)=>{const n=t.GROUP;return YR(n)&&n!==$F.SKIPPED&&(e[n]=[]),e},{}),p=PR(i,(e,t)=>({pattern:i[t],longerAlt:s[t],canLineTerminator:c[t],isCustom:h[t],short:d[t],group:a[t],push:l[t],pop:u[t],tokenTypeIdx:o[t],tokenType:r[t]}))});let m=!0,v=[];return t.safeMode||n("First Char Optimization",()=>{v=mL(r,(e,n,r)=>{if("string"==typeof n.PATTERN){const t=IF(n.PATTERN.charCodeAt(0));NF(e,t,p[r])}else if(Wx(n.START_CHARS_HINT)){let t;kR(n.START_CHARS_HINT,n=>{const i=IF("string"==typeof n?n.charCodeAt(0):n);t!==i&&(t=i,NF(e,i,p[r]))})}else if(QR(n.PATTERN))if(n.PATTERN.unicode)m=!1,t.ensureOptimizations&&CB(n.PATTERN.toString());else{const i=oF(n.PATTERN,t.ensureOptimizations);wk(i)&&(m=!1),kR(i,t=>{NF(e,t,p[r])})}else t.ensureOptimizations&&CB(n.name),m=!1;return e},[])}),{emptyGroups:f,patternIdxToConfig:p,charCodeToPatternIdxToConfig:v,hasCustom:g,canBeOptimized:m}}function vF(e,t){let n=[];const r=function(e){const t=CR(e,e=>!$R(e,dF)),n=PR(t,e=>({message:"Token Type: ->"+e.name+"<- missing static 'PATTERN' property",type:VF.MISSING_PATTERN,tokenTypes:[e]})),r=xR(e,t);return{errors:n,valid:r}}(e);n=n.concat(r.errors);const i=function(e){const t=CR(e,e=>{const t=e[dF];return!(QR(t)||Xb(t)||$R(t,"exec")||YR(t))}),n=PR(t,e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:VF.INVALID_PATTERN,tokenTypes:[e]})),r=xR(e,t);return{errors:n,valid:r}}(r.valid),o=i.valid;return n=n.concat(i.errors),n=n.concat(function(e){let t=[];const n=CR(e,e=>QR(e[dF]));return t=t.concat(function(e){class t extends iB{constructor(){super(...arguments),this.found=!1}visitEndAnchor(e){this.found=!0}}const n=CR(e,e=>{const n=e.PATTERN;try{const e=rF(n),r=new t;return r.visit(e),r.found}catch(LY){return yF.test(n.source)}}),r=PR(n,e=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:VF.EOI_ANCHOR_FOUND,tokenTypes:[e]}));return r}(n)),t=t.concat(function(e){class t extends iB{constructor(){super(...arguments),this.found=!1}visitStartAnchor(e){this.found=!0}}const n=CR(e,e=>{const n=e.PATTERN;try{const e=rF(n),r=new t;return r.visit(e),r.found}catch(LY){return bF.test(n.source)}}),r=PR(n,e=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:VF.SOI_ANCHOR_FOUND,tokenTypes:[e]}));return r}(n)),t=t.concat(function(e){const t=CR(e,e=>{const t=e[dF];return t instanceof RegExp&&(t.multiline||t.global)}),n=PR(t,e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:VF.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[e]}));return n}(n)),t=t.concat(function(e){const t=[];let n=PR(e,n=>mL(e,(e,r)=>(n.PATTERN.source!==r.PATTERN.source||XR(t,r)||r.PATTERN===$F.NA||(t.push(r),e.push(r)),e),[]));n=GI(n);const r=PR(CR(n,e=>e.length>1),e=>{const t=PR(e,e=>e.name);return{message:`The same RegExp pattern ->${OR(e).PATTERN}<-has been used in all of the following Token Types: ${t.join(", ")} <-`,type:VF.DUPLICATE_PATTERNS_FOUND,tokenTypes:e}});return r}(n)),t=t.concat(function(e){const t=CR(e,e=>e.PATTERN.test("")),n=PR(t,e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' must not match an empty string",type:VF.EMPTY_MATCH_PATTERN,tokenTypes:[e]}));return n}(n)),t}(o)),n=n.concat(function(e){const t=CR(e,e=>{if(!$R(e,"GROUP"))return!1;const t=e.GROUP;return t!==$F.SKIPPED&&t!==$F.NA&&!YR(t)}),n=PR(t,e=>({message:"Token Type: ->"+e.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:VF.INVALID_GROUP_TYPE_FOUND,tokenTypes:[e]}));return n}(o)),n=n.concat(function(e,t){const n=CR(e,e=>void 0!==e.PUSH_MODE&&!XR(t,e.PUSH_MODE)),r=PR(n,e=>({message:`Token Type: ->${e.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${e.PUSH_MODE}<-which does not exist`,type:VF.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[e]}));return r}(o,t)),n=n.concat(function(e){const t=[],n=mL(e,(e,t,n)=>{const r=t.PATTERN;return r===$F.NA||(YR(r)?e.push({str:r,idx:n,tokenType:t}):QR(r)&&(i=r,void 0===LR([".","\\","[","]","|","^","$","(",")","?","*","+","{"],e=>-1!==i.source.indexOf(e)))&&e.push({str:r.source,idx:n,tokenType:t})),e;var i},[]);return kR(e,(e,r)=>{kR(n,({str:n,idx:i,tokenType:o})=>{if(r<i&&function(e,t){if(QR(t)){const n=t.exec(e);return null!==n&&0===n.index}if(Xb(t))return t(e,0,[],{});if($R(t,"exec"))return t.exec(e,0,[],{});if("string"==typeof t)return t===e;throw Error("non exhaustive match")}(n,e.PATTERN)){const n=`Token: ->${o.name}<- can never be matched.\nBecause it appears AFTER the Token Type ->${e.name}<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;t.push({message:n,type:VF.UNREACHABLE_PATTERN,tokenTypes:[e,o]})}})}),t}(o)),n}const yF=/[^\\][$]/;const bF=/[^\\[][\^]|^\^/;function xF(e){const t=e.ignoreCase?"i":"";return new RegExp(`^(?:${e.source})`,t)}function wF(e){const t=e.ignoreCase?"iy":"y";return new RegExp(`${e.source}`,t)}function EF(e,t,n){const r=[];let i=!1;const o=vL(GI(fI(qR(e.modes))),e=>e[dF]===$F.NA),a=SF(n);return t&&kR(o,e=>{const t=AF(e,a);if(!1!==t){const n=function(e,t){if(t.issue===VF.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <${e.name}> Token Type\n\t Root cause: ${t.errMsg}.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(t.issue===VF.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <${e.name}> Token Type\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}(e,t),i={message:n,type:t.issue,tokenType:e};r.push(i)}else $R(e,"LINE_BREAKS")?!0===e.LINE_BREAKS&&(i=!0):hF(a,e.PATTERN)&&(i=!0)}),t&&!i&&r.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:VF.NO_LINE_BREAKS_FLAGS}),r}function TF(e){const t=e.PATTERN;if(QR(t))return!1;if(Xb(t))return!0;if($R(t,"exec"))return!0;if(YR(t))return!1;throw Error("non exhaustive match")}function _F(e){return!(!YR(e)||1!==e.length)&&e.charCodeAt(0)}const kF={test:function(e){const t=e.length;for(let n=this.lastIndex;n<t;n++){const t=e.charCodeAt(n);if(10===t)return this.lastIndex=n+1,!0;if(13===t)return 10===e.charCodeAt(n+1)?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function AF(e,t){if($R(e,"LINE_BREAKS"))return!1;if(QR(e.PATTERN)){try{hF(t,e.PATTERN)}catch(LY){return{issue:VF.IDENTIFY_TERMINATOR,errMsg:LY.message}}return!1}if(YR(e.PATTERN))return!1;if(TF(e))return{issue:VF.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function SF(e){return PR(e,e=>YR(e)?e.charCodeAt(0):e)}function NF(e,t,n){void 0===e[t]?e[t]=[n]:e[t].push(n)}const MF=256;let CF=[];function IF(e){return e<MF?e:CF[e]}function RF(e,t){const n=e.tokenTypeIdx;return n===t.tokenTypeIdx||!0===t.isParent&&!0===t.categoryMatchesMap[n]}function LF(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}let OF=1;const DF={};function PF(e){const t=function(e){let t=zI(e),n=e,r=!0;for(;r;){n=GI(fI(PR(n,e=>e.CATEGORIES)));const e=xR(n,t);t=t.concat(e),wk(e)?r=!1:n=e}return t}(e);!function(e){kR(e,e=>{FF(e)||(DF[OF]=e,e.tokenTypeIdx=OF++),zF(e)&&!Wx(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),zF(e)||(e.CATEGORIES=[]),$R(e,"categoryMatches")||(e.categoryMatches=[]),function(e){return $R(e,"categoryMatchesMap")}(e)||(e.categoryMatchesMap={})})}(t),function(e){kR(e,e=>{BF([],e)})}(t),function(e){kR(e,e=>{e.categoryMatches=[],kR(e.categoryMatchesMap,(t,n)=>{e.categoryMatches.push(DF[n].tokenTypeIdx)})})}(t),kR(t,e=>{e.isParent=e.categoryMatches.length>0})}function BF(e,t){kR(e,e=>{t.categoryMatchesMap[e.tokenTypeIdx]=!0}),kR(t.CATEGORIES,n=>{const r=e.concat(t);XR(r,n)||BF(r,n)})}function FF(e){return $R(e,"tokenTypeIdx")}function zF(e){return $R(e,"CATEGORIES")}function UF(e){return $R(e,"tokenTypeIdx")}const GF={buildUnableToPopLexerModeMessage:e=>`Unable to pop Lexer Mode after encountering Token ->${e.image}<- The Mode Stack is empty`,buildUnexpectedCharactersMessage:(e,t,n,r,i)=>`unexpected character: ->${e.charAt(t)}<- at offset: ${t}, skipped ${n} characters.`};var VF,jF;(jF=VF||(VF={}))[jF.MISSING_PATTERN=0]="MISSING_PATTERN",jF[jF.INVALID_PATTERN=1]="INVALID_PATTERN",jF[jF.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",jF[jF.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",jF[jF.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",jF[jF.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",jF[jF.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",jF[jF.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",jF[jF.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",jF[jF.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",jF[jF.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",jF[jF.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",jF[jF.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",jF[jF.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",jF[jF.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",jF[jF.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",jF[jF.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",jF[jF.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE";const HF={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:GF,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(HF);class $F{constructor(e,t=HF){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(e,t)=>{if(!0===this.traceInitPerf){this.traceInitIndent++;const n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent,this.traceInitMaxIdent;const{time:r,value:i}=RB(t),o=r>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&o(`${n}<-- <${e}> time: ${r}ms`),this.traceInitIndent--,i}return t()},"boolean"==typeof t)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=QC({},HF,t);const n=this.config.traceInitPerf;!0===n?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof n&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let n,r=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===HF.lineTerminatorsPattern)this.config.lineTerminatorsPattern=kF;else if(this.config.lineTerminatorCharacters===HF.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),Wx(e)?n={modes:{defaultMode:zI(e)},defaultMode:fF}:(r=!1,n=zI(e))}),!1===this.config.skipValidations&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(function(e){const t=[];return $R(e,fF)||t.push({message:"A MultiMode Lexer cannot be initialized without a <"+fF+"> property in its definition\n",type:VF.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),$R(e,pF)||t.push({message:"A MultiMode Lexer cannot be initialized without a <modes> property in its definition\n",type:VF.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),$R(e,pF)&&$R(e,fF)&&!$R(e.modes,e.defaultMode)&&t.push({message:`A MultiMode Lexer cannot be initialized with a ${fF}: <${e.defaultMode}>which does not exist\n`,type:VF.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),$R(e,pF)&&kR(e.modes,(e,n)=>{kR(e,(r,i)=>{JR(r)?t.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${n}> at index: <${i}>\n`,type:VF.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED}):$R(r,"LONGER_ALT")&&kR(Wx(r.LONGER_ALT)?r.LONGER_ALT:[r.LONGER_ALT],i=>{JR(i)||XR(e,i)||t.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${i.name}> on token <${r.name}> outside of mode <${n}>\n`,type:VF.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})})}),t}(n,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(EF(n,this.trackStartLines,this.config.lineTerminatorCharacters))})),n.modes=n.modes?n.modes:{},kR(n.modes,(e,t)=>{n.modes[t]=vL(e,e=>JR(e))});const i=KC(n.modes);if(kR(n.modes,(e,n)=>{this.TRACE_INIT(`Mode: <${n}> processing`,()=>{if(this.modes.push(n),!1===this.config.skipValidations&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(vF(e,i))}),wk(this.lexerDefinitionErrors)){let r;PF(e),this.TRACE_INIT("analyzeTokenTypes",()=>{r=mF(e,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[n]=r.patternIdxToConfig,this.charCodeToPatternIdxToConfig[n]=r.charCodeToPatternIdxToConfig,this.emptyGroups=QC({},this.emptyGroups,r.emptyGroups),this.hasCustom=r.hasCustom||this.hasCustom,this.canModeBeOptimized[n]=r.canBeOptimized}})}),this.defaultMode=n.defaultMode,!wk(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const e=PR(this.lexerDefinitionErrors,e=>e.message).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+e)}kR(this.lexerDefinitionWarning,e=>{IB(e.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(gF?(this.chopInput=Nw,this.match=this.matchWithTest):(this.updateLastIndex=HC,this.match=this.matchWithExec),r&&(this.handleModes=HC),!1===this.trackStartLines&&(this.computeNewColumn=Nw),!1===this.trackEndLines&&(this.updateTokenEndLineColumnLocation=HC),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else{if(!/onlyOffset/i.test(this.config.positionTracking))throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.createTokenInstance=this.createOffsetOnlyToken}this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const e=mL(this.canModeBeOptimized,(e,t,n)=>(!1===t&&e.push(n),e),[]);if(t.ensureOptimizations&&!wk(e))throw Error(`Lexer Modes: < ${e.join(", ")} > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{tF={}}),this.TRACE_INIT("toFastProperties",()=>{LB(this)})})}tokenize(e,t=this.defaultMode){if(!wk(this.lexerDefinitionErrors)){const e=PR(this.lexerDefinitionErrors,e=>e.message).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+e)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let n,r,i,o,a,s,l,u,c,h,d,f,p,g,m;const v=e,y=v.length;let b=0,x=0;const w=this.hasCustom?0:Math.floor(e.length/10),E=new Array(w),T=[];let _=this.trackStartLines?1:void 0,k=this.trackStartLines?1:void 0;const A=function(e){const t={};return kR(KC(e),n=>{const r=e[n];if(!Wx(r))throw Error("non exhaustive match");t[n]=[]}),t}(this.emptyGroups),S=this.trackStartLines,N=this.config.lineTerminatorsPattern;let M=0,C=[],I=[];const R=[],L=[];let O;function D(){return C}function P(e){const t=IF(e),n=I[t];return void 0===n?L:n}Object.freeze(L);const B=e=>{if(1===R.length&&void 0===e.tokenType.PUSH_MODE){const t=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(e);T.push({offset:e.startOffset,line:e.startLine,column:e.startColumn,length:e.image.length,message:t})}else{R.pop();const e=wR(R);C=this.patternIdxToConfig[e],I=this.charCodeToPatternIdxToConfig[e],M=C.length;const t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;O=I&&t?P:D}};function F(e){R.push(e),I=this.charCodeToPatternIdxToConfig[e],C=this.patternIdxToConfig[e],M=C.length,M=C.length;const t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;O=I&&t?P:D}let z;F.call(this,t);const U=this.config.recoveryEnabled;for(;b<y;){s=null;const t=v.charCodeAt(b),w=O(t),I=w.length;for(n=0;n<I;n++){z=w[n];const r=z.pattern;l=null;const c=z.short;if(!1!==c?t===c&&(s=r):!0===z.isCustom?(m=r.exec(v,b,E,A),null!==m?(s=m[0],void 0!==m.payload&&(l=m.payload)):s=null):(this.updateLastIndex(r,b),s=this.match(r,e,b)),null!==s){if(a=z.longerAlt,void 0!==a){const t=a.length;for(i=0;i<t;i++){const t=C[a[i]],n=t.pattern;if(u=null,!0===t.isCustom?(m=n.exec(v,b,E,A),null!==m?(o=m[0],void 0!==m.payload&&(u=m.payload)):o=null):(this.updateLastIndex(n,b),o=this.match(n,e,b)),o&&o.length>s.length){s=o,l=u,z=t;break}}}break}}if(null!==s){if(c=s.length,h=z.group,void 0!==h&&(d=z.tokenTypeIdx,f=this.createTokenInstance(s,b,d,z.tokenType,_,k,c),this.handlePayload(f,l),!1===h?x=this.addToken(E,x,f):A[h].push(f)),e=this.chopInput(e,c),b+=c,k=this.computeNewColumn(k,c),!0===S&&!0===z.canLineTerminator){let e,t,n=0;N.lastIndex=0;do{e=N.test(s),!0===e&&(t=N.lastIndex-1,n++)}while(!0===e);0!==n&&(_+=n,k=c-t,this.updateTokenEndLineColumnLocation(f,h,t,n,_,k,c))}this.handleModes(z,B,F,f)}else{const t=b,n=_,i=k;let o=!1===U;for(;!1===o&&b<y;)for(e=this.chopInput(e,1),b++,r=0;r<M;r++){const t=C[r],n=t.pattern,i=t.short;if(!1!==i?v.charCodeAt(b)===i&&(o=!0):!0===t.isCustom?o=null!==n.exec(v,b,E,A):(this.updateLastIndex(n,b),o=null!==n.exec(e)),!0===o)break}if(p=b-t,k=this.computeNewColumn(k,p),g=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(v,t,p,n,i),T.push({offset:t,line:n,column:i,length:p,message:g}),!1===U)break}}return this.hasCustom||(E.length=x),{tokens:E,groups:A,errors:T}}handleModes(e,t,n,r){if(!0===e.pop){const i=e.push;t(r),void 0!==i&&n.call(this,i)}else void 0!==e.push&&n.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,n,r,i,o,a){let s,l;void 0!==t&&(s=n===a-1,l=s?-1:0,1===r&&!0===s||(e.endLine=i+l,e.endColumn=o-1-l))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,n,r){return{image:e,startOffset:t,tokenTypeIdx:n,tokenType:r}}createStartOnlyToken(e,t,n,r,i,o){return{image:e,startOffset:t,startLine:i,startColumn:o,tokenTypeIdx:n,tokenType:r}}createFullToken(e,t,n,r,i,o,a){return{image:e,startOffset:t,endOffset:t+a-1,startLine:i,endLine:i,startColumn:o,endColumn:o+a-1,tokenTypeIdx:n,tokenType:r}}addTokenUsingPush(e,t,n){return e.push(n),t}addTokenUsingMemberAccess(e,t,n){return e[t]=n,++t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){null!==t&&(e.payload=t)}matchWithTest(e,t,n){return!0===e.test(t)?t.substring(n,e.lastIndex):null}matchWithExec(e,t){const n=e.exec(t);return null!==n?n[0]:null}}function YF(e){return qF(e)?e.LABEL:e.name}function qF(e){return YR(e.LABEL)&&""!==e.LABEL}$F.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",$F.NA=/NOT_APPLICABLE/;const WF="parent",XF="categories",KF="label",ZF="group",QF="push_mode",JF="pop_mode",ez="longer_alt",tz="line_breaks",nz="start_chars_hint";function rz(e){return function(e){const t=e.pattern,n={};n.name=e.name,JR(t)||(n.PATTERN=t);if($R(e,WF))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";$R(e,XF)&&(n.CATEGORIES=e[XF]);PF([n]),$R(e,KF)&&(n.LABEL=e[KF]);$R(e,ZF)&&(n.GROUP=e[ZF]);$R(e,JF)&&(n.POP_MODE=e[JF]);$R(e,QF)&&(n.PUSH_MODE=e[QF]);$R(e,ez)&&(n.LONGER_ALT=e[ez]);$R(e,tz)&&(n.LINE_BREAKS=e[tz]);$R(e,nz)&&(n.START_CHARS_HINT=e[nz]);return n}(e)}const iz=rz({name:"EOF",pattern:$F.NA});function oz(e,t,n,r,i,o,a,s){return{image:t,startOffset:n,endOffset:r,startLine:i,endLine:o,startColumn:a,endColumn:s,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function az(e,t){return RF(e,t)}PF([iz]);const sz={buildMismatchTokenMessage:({expected:e,actual:t,previous:n,ruleName:r})=>`Expecting ${qF(e)?`--\x3e ${YF(e)} <--`:`token of type --\x3e ${e.name} <--`} but found --\x3e '${t.image}' <--`,buildNotAllInputParsedMessage:({firstRedundant:e,ruleName:t})=>"Redundant input, expecting EOF but found: "+e.image,buildNoViableAltMessage({expectedPathsPerAlt:e,actual:t,previous:n,customUserDescription:r,ruleName:i}){const o="Expecting: ",a="\nbut found: '"+OR(t).image+"'";if(r)return o+r+a;{const t=PR(mL(e,(e,t)=>e.concat(t),[]),e=>`[${PR(e,e=>YF(e)).join(", ")}]`);return o+`one of these possible Token sequences:\n${PR(t,(e,t)=>`  ${t+1}. ${e}`).join("\n")}`+a}},buildEarlyExitMessage({expectedIterationPaths:e,actual:t,customUserDescription:n,ruleName:r}){const i="Expecting: ",o="\nbut found: '"+OR(t).image+"'";if(n)return i+n+o;return i+`expecting at least one iteration which starts with one of these possible Token sequences::\n  <${PR(e,e=>`[${PR(e,e=>YF(e)).join(",")}]`).join(" ,")}>`+o}};Object.freeze(sz);const lz={buildRuleNotFoundError:(e,t)=>"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\ninside top level rule: ->"+e.name+"<-"},uz={buildDuplicateFoundError(e,t){const n=e.name,r=OR(t),i=r.idx,o=XB(r),a=(s=r)instanceof $B?s.terminalType.name:s instanceof PB?s.nonTerminalName:"";var s;let l=`->${o}${i>0?i:""}<- ${a?`with argument: ->${a}<-`:""}\n                  appears more than once (${t.length} times) in the top level rule: ->${n}<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,"\n"),l},buildNamespaceConflictError:e=>`Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${e.name}>.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter.`,buildAlternationPrefixAmbiguityError(e){const t=PR(e.prefixPath,e=>YF(e)).join(", "),n=0===e.alternation.idx?"":e.alternation.idx;return`Ambiguous alternatives: <${e.ambiguityIndices.join(" ,")}> due to common lookahead prefix\nin <OR${n}> inside <${e.topLevelRule.name}> Rule,\n<${t}> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details.`},buildAlternationAmbiguityError(e){const t=PR(e.prefixPath,e=>YF(e)).join(", "),n=0===e.alternation.idx?"":e.alternation.idx;let r=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${e.topLevelRule.name}> Rule,\n<${t}> may appears as a prefix path in all these alternatives.\n`;return r+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details.",r},buildEmptyRepetitionError(e){let t=XB(e.repetition);0!==e.repetition.idx&&(t+=e.repetition.idx);return`The repetition <${t}> within Rule <${e.topLevelRule.name}> can never consume any tokens.\nThis could lead to an infinite loop.`},buildTokenNameError:e=>"deprecated",buildEmptyAlternationError:e=>`Ambiguous empty alternative: <${e.emptyChoiceIdx+1}> in <OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.\nOnly the last alternative may be an empty alternative.`,buildTooManyAlternativesError:e=>`An Alternation cannot have more than 256 alternatives:\n<OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.\n has ${e.alternation.definition.length+1} alternatives.`,buildLeftRecursionError(e){const t=e.topLevelRule.name;return`Left Recursion found in grammar.\nrule: <${t}> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n ${`${t} --\x3e ${PR(e.leftRecursionPath,e=>e.name).concat([t]).join(" --\x3e ")}`}\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError:e=>"deprecated",buildDuplicateRuleNameError(e){let t;t=e.topLevelRule instanceof BB?e.topLevelRule.name:e.topLevelRule;return`Duplicate definition, rule: ->${t}<- is already defined in the grammar: ->${e.grammarName}<-`}};class cz extends qB{constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){kR(qR(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{const t=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:t,type:OU.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class hz extends KB{constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=zI(this.path.ruleStack).reverse(),this.occurrenceStack=zI(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,n){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const r=t.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,r)}}updateExpectedNext(){wk(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class dz extends hz{constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,n){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const e=t.concat(n),r=new FB({definition:e});this.possibleTokTypes=QB(r),this.found=!0}}}class fz extends KB{constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class pz extends fz{walkMany(e,t,n){if(e.idx===this.occurrence){const e=OR(t.concat(n));this.result.isEndOfRule=void 0===e,e instanceof $B&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkMany(e,t,n)}}class gz extends fz{walkManySep(e,t,n){if(e.idx===this.occurrence){const e=OR(t.concat(n));this.result.isEndOfRule=void 0===e,e instanceof $B&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkManySep(e,t,n)}}class mz extends fz{walkAtLeastOne(e,t,n){if(e.idx===this.occurrence){const e=OR(t.concat(n));this.result.isEndOfRule=void 0===e,e instanceof $B&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkAtLeastOne(e,t,n)}}class vz extends fz{walkAtLeastOneSep(e,t,n){if(e.idx===this.occurrence){const e=OR(t.concat(n));this.result.isEndOfRule=void 0===e,e instanceof $B&&(this.result.token=e.terminalType,this.result.occurrence=e.idx)}else super.walkAtLeastOneSep(e,t,n)}}function yz(e,t,n=[]){n=zI(n);let r=[],i=0;function o(o){const a=yz(o.concat(ER(e,i+1)),t,n);return r.concat(a)}for(;n.length<t&&i<e.length;){const t=e[i];if(t instanceof FB)return o(t.definition);if(t instanceof PB)return o(t.definition);if(t instanceof zB)r=o(t.definition);else{if(t instanceof UB){return o(t.definition.concat([new VB({definition:t.definition})]))}if(t instanceof GB){return o([new FB({definition:t.definition}),new VB({definition:[new $B({terminalType:t.separator})].concat(t.definition)})])}if(t instanceof jB){const e=t.definition.concat([new VB({definition:[new $B({terminalType:t.separator})].concat(t.definition)})]);r=o(e)}else if(t instanceof VB){const e=t.definition.concat([new VB({definition:t.definition})]);r=o(e)}else{if(t instanceof HB)return kR(t.definition,e=>{!1===wk(e.definition)&&(r=o(e.definition))}),r;if(!(t instanceof $B))throw Error("non exhaustive match");n.push(t.terminalType)}}i++}return r.push({partialPath:n,suffixDef:ER(e,i)}),r}function bz(e,t,n,r){const i="EXIT_NONE_TERMINAL",o=[i],a="EXIT_ALTERNATIVE";let s=!1;const l=t.length,u=l-r-1,c=[],h=[];for(h.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!wk(h);){const e=h.pop();if(e===a){s&&wR(h).idx<=u&&h.pop();continue}const r=e.def,d=e.idx,f=e.ruleStack,p=e.occurrenceStack;if(wk(r))continue;const g=r[0];if(g===i){const e={idx:d,def:ER(r),ruleStack:TR(f),occurrenceStack:TR(p)};h.push(e)}else if(g instanceof $B)if(d<l-1){const e=d+1;if(n(t[e],g.terminalType)){const t={idx:e,def:ER(r),ruleStack:f,occurrenceStack:p};h.push(t)}}else{if(d!==l-1)throw Error("non exhaustive match");c.push({nextTokenType:g.terminalType,nextTokenOccurrence:g.idx,ruleStack:f,occurrenceStack:p}),s=!0}else if(g instanceof PB){const e=zI(f);e.push(g.nonTerminalName);const t=zI(p);t.push(g.idx);const n={idx:d,def:g.definition.concat(o,ER(r)),ruleStack:e,occurrenceStack:t};h.push(n)}else if(g instanceof zB){const e={idx:d,def:ER(r),ruleStack:f,occurrenceStack:p};h.push(e),h.push(a);const t={idx:d,def:g.definition.concat(ER(r)),ruleStack:f,occurrenceStack:p};h.push(t)}else if(g instanceof UB){const e=new VB({definition:g.definition,idx:g.idx}),t={idx:d,def:g.definition.concat([e],ER(r)),ruleStack:f,occurrenceStack:p};h.push(t)}else if(g instanceof GB){const e=new $B({terminalType:g.separator}),t=new VB({definition:[e].concat(g.definition),idx:g.idx}),n={idx:d,def:g.definition.concat([t],ER(r)),ruleStack:f,occurrenceStack:p};h.push(n)}else if(g instanceof jB){const e={idx:d,def:ER(r),ruleStack:f,occurrenceStack:p};h.push(e),h.push(a);const t=new $B({terminalType:g.separator}),n=new VB({definition:[t].concat(g.definition),idx:g.idx}),i={idx:d,def:g.definition.concat([n],ER(r)),ruleStack:f,occurrenceStack:p};h.push(i)}else if(g instanceof VB){const e={idx:d,def:ER(r),ruleStack:f,occurrenceStack:p};h.push(e),h.push(a);const t=new VB({definition:g.definition,idx:g.idx}),n={idx:d,def:g.definition.concat([t],ER(r)),ruleStack:f,occurrenceStack:p};h.push(n)}else if(g instanceof HB)for(let t=g.definition.length-1;t>=0;t--){const e={idx:d,def:g.definition[t].definition.concat(ER(r)),ruleStack:f,occurrenceStack:p};h.push(e),h.push(a)}else if(g instanceof FB)h.push({idx:d,def:g.definition.concat(ER(r)),ruleStack:f,occurrenceStack:p});else{if(!(g instanceof BB))throw Error("non exhaustive match");h.push(xz(g,d,f,p))}}return c}function xz(e,t,n,r){const i=zI(n);i.push(e.name);const o=zI(r);return o.push(1),{idx:t,def:e.definition,ruleStack:i,occurrenceStack:o}}var wz,Ez;function Tz(e){if(e instanceof zB||"Option"===e)return wz.OPTION;if(e instanceof VB||"Repetition"===e)return wz.REPETITION;if(e instanceof UB||"RepetitionMandatory"===e)return wz.REPETITION_MANDATORY;if(e instanceof GB||"RepetitionMandatoryWithSeparator"===e)return wz.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof jB||"RepetitionWithSeparator"===e)return wz.REPETITION_WITH_SEPARATOR;if(e instanceof HB||"Alternation"===e)return wz.ALTERNATION;throw Error("non exhaustive match")}function _z(e){const{occurrence:t,rule:n,prodType:r,maxLookahead:i}=e,o=Tz(r);return o===wz.ALTERNATION?Lz(t,n,i):Oz(t,n,o,i)}function kz(e,t,n,r){const i=e.length,o=NR(e,e=>NR(e,e=>1===e.length));if(t)return function(t){const r=PR(t,e=>e.GATE);for(let o=0;o<i;o++){const t=e[o],i=t.length,a=r[o];if(void 0===a||!1!==a.call(this))e:for(let e=0;e<i;e++){const r=t[e],i=r.length;for(let e=0;e<i;e++){const t=this.LA(e+1);if(!1===n(t,r[e]))continue e}return o}}};if(o&&!r){const t=mL(PR(e,e=>fI(e)),(e,t,n)=>(kR(t,t=>{$R(e,t.tokenTypeIdx)||(e[t.tokenTypeIdx]=n),kR(t.categoryMatches,t=>{$R(e,t)||(e[t]=n)})}),e),{});return function(){const e=this.LA(1);return t[e.tokenTypeIdx]}}return function(){for(let t=0;t<i;t++){const r=e[t],i=r.length;e:for(let e=0;e<i;e++){const i=r[e],o=i.length;for(let e=0;e<o;e++){const t=this.LA(e+1);if(!1===n(t,i[e]))continue e}return t}}}}function Az(e,t,n){const r=NR(e,e=>1===e.length),i=e.length;if(r&&!n){const t=fI(e);if(1===t.length&&wk(t[0].categoryMatches)){const e=t[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===e}}{const e=mL(t,(e,t,n)=>(e[t.tokenTypeIdx]=!0,kR(t.categoryMatches,t=>{e[t]=!0}),e),[]);return function(){const t=this.LA(1);return!0===e[t.tokenTypeIdx]}}}return function(){e:for(let n=0;n<i;n++){const r=e[n],i=r.length;for(let e=0;e<i;e++){const n=this.LA(e+1);if(!1===t(n,r[e]))continue e}return!0}return!1}}(Ez=wz||(wz={}))[Ez.OPTION=0]="OPTION",Ez[Ez.REPETITION=1]="REPETITION",Ez[Ez.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",Ez[Ez.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",Ez[Ez.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",Ez[Ez.ALTERNATION=5]="ALTERNATION";class Sz extends KB{constructor(e,t,n){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,n,r){return e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.restDef=n.concat(r),!0)}walkOption(e,t,n){this.checkIsTarget(e,wz.OPTION,t,n)||super.walkOption(e,t,n)}walkAtLeastOne(e,t,n){this.checkIsTarget(e,wz.REPETITION_MANDATORY,t,n)||super.walkOption(e,t,n)}walkAtLeastOneSep(e,t,n){this.checkIsTarget(e,wz.REPETITION_MANDATORY_WITH_SEPARATOR,t,n)||super.walkOption(e,t,n)}walkMany(e,t,n){this.checkIsTarget(e,wz.REPETITION,t,n)||super.walkOption(e,t,n)}walkManySep(e,t,n){this.checkIsTarget(e,wz.REPETITION_WITH_SEPARATOR,t,n)||super.walkOption(e,t,n)}}class Nz extends qB{constructor(e,t,n){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=n,this.result=[]}checkIsTarget(e,t){e.idx!==this.targetOccurrence||this.targetProdType!==t||void 0!==this.targetRef&&e!==this.targetRef||(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,wz.OPTION)}visitRepetition(e){this.checkIsTarget(e,wz.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,wz.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,wz.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,wz.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,wz.ALTERNATION)}}function Mz(e){const t=new Array(e);for(let n=0;n<e;n++)t[n]=[];return t}function Cz(e){let t=[""];for(let n=0;n<e.length;n++){const r=e[n],i=[];for(let e=0;e<t.length;e++){const n=t[e];i.push(n+"_"+r.tokenTypeIdx);for(let e=0;e<r.categoryMatches.length;e++){const t="_"+r.categoryMatches[e];i.push(n+t)}}t=i}return t}function Iz(e,t,n){for(let r=0;r<e.length;r++){if(r===n)continue;const i=e[r];for(let e=0;e<t.length;e++){if(!0===i[t[e]])return!1}}return!0}function Rz(e,t){const n=PR(e,e=>yz([e],1)),r=Mz(n.length),i=PR(n,e=>{const t={};return kR(e,e=>{kR(Cz(e.partialPath),e=>{t[e]=!0})}),t});let o=n;for(let a=1;a<=t;a++){const e=o;o=Mz(e.length);for(let n=0;n<e.length;n++){const s=e[n];for(let e=0;e<s.length;e++){const l=s[e].partialPath,u=s[e].suffixDef,c=Cz(l);if(Iz(i,c,n)||wk(u)||l.length===t){const e=r[n];if(!1===Dz(e,l)){e.push(l);for(let e=0;e<c.length;e++){const t=c[e];i[n][t]=!0}}}else{const e=yz(u,a+1,l);o[n]=o[n].concat(e),kR(e,e=>{kR(Cz(e.partialPath),e=>{i[n][e]=!0})})}}}}return r}function Lz(e,t,n,r){const i=new Nz(e,wz.ALTERNATION,r);return t.accept(i),Rz(i.result,n)}function Oz(e,t,n,r){const i=new Nz(e,n);t.accept(i);const o=i.result,a=new Sz(t,e,n).startWalking();return Rz([new FB({definition:o}),new FB({definition:a})],r)}function Dz(e,t){e:for(let n=0;n<e.length;n++){const r=e[n];if(r.length===t.length){for(let e=0;e<r.length;e++){const n=t[e],i=r[e];if(!1===(n===i||void 0!==i.categoryMatchesMap[n.tokenTypeIdx]))continue e}return!0}}return!1}function Pz(e){return NR(e,e=>NR(e,e=>NR(e,e=>wk(e.categoryMatches))))}function Bz(e,t,n,r){const i=BR(e,e=>function(e,t){const n=new Uz;e.accept(n);const r=n.allProductions,i=GR(r,Fz),o=PR(qR(lL(i,e=>e.length>1)),n=>{const r=OR(n),i=t.buildDuplicateFoundError(e,n),o=XB(r),a={message:i,type:OU.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:o,occurrence:r.idx},s=zz(r);return s&&(a.parameter=s),a});return o}(e,n)),o=function(e,t,n){const r=[],i=PR(t,e=>e.name);return kR(e,e=>{const t=e.name;if(XR(i,t)){const i=n.buildNamespaceConflictError(e);r.push({message:i,type:OU.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:t})}}),r}(e,t,n),a=BR(e,e=>function(e,t){const n=new jz;e.accept(n);const r=BR(n.alternations,n=>n.definition.length>255?[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:n}),type:OU.TOO_MANY_ALTS,ruleName:e.name,occurrence:n.idx}]:[]);return r}(e,n)),s=BR(e,t=>function(e,t,n,r){const i=[],o=mL(t,(t,n)=>n.name===e.name?t+1:t,0);if(o>1){const t=r.buildDuplicateRuleNameError({topLevelRule:e,grammarName:n});i.push({message:t,type:OU.DUPLICATE_RULE_NAME,ruleName:e.name})}return i}(t,e,r,n));return i.concat(o,a,s)}function Fz(e){return`${XB(e)}_#_${e.idx}_#_${zz(e)}`}function zz(e){return e instanceof $B?e.terminalType.name:e instanceof PB?e.nonTerminalName:""}class Uz extends qB{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function Gz(e,t,n,r=[]){const i=[],o=Vz(t.definition);if(wk(o))return[];{const t=e.name;XR(o,e)&&i.push({message:n.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:r}),type:OU.LEFT_RECURSION,ruleName:t});const a=BR(xR(o,r.concat([e])),t=>{const i=zI(r);return i.push(t),Gz(e,t,n,i)});return i.concat(a)}}function Vz(e){let t=[];if(wk(e))return t;const n=OR(e);if(n instanceof PB)t.push(n.referencedRule);else if(n instanceof FB||n instanceof zB||n instanceof UB||n instanceof GB||n instanceof jB||n instanceof VB)t=t.concat(Vz(n.definition));else if(n instanceof HB)t=fI(PR(n.definition,e=>Vz(e.definition)));else if(!(n instanceof $B))throw Error("non exhaustive match");const r=WB(n),i=e.length>1;if(r&&i){const n=ER(e);return t.concat(Vz(n))}return t}class jz extends qB{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function Hz(e,t,n){const r=new jz;e.accept(r);let i=r.alternations;i=vL(i,e=>!0===e.ignoreAmbiguities);const o=BR(i,r=>{const i=r.idx,o=r.maxLookahead||t,a=Lz(i,e,o,r),s=function(e,t,n,r){const i=[],o=mL(e,(n,r,o)=>(!0===t.definition[o].ignoreAmbiguities||kR(r,r=>{const a=[o];kR(e,(e,n)=>{o!==n&&Dz(e,r)&&!0!==t.definition[n].ignoreAmbiguities&&a.push(n)}),a.length>1&&!Dz(i,r)&&(i.push(r),n.push({alts:a,path:r}))}),n),[]),a=PR(o,e=>{const i=PR(e.alts,e=>e+1);return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:OU.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:t.idx,alternatives:e.alts}});return a}(a,r,e,n),l=function(e,t,n,r){const i=mL(e,(e,t,n)=>{const r=PR(t,e=>({idx:n,path:e}));return e.concat(r)},[]),o=GI(BR(i,e=>{if(!0===t.definition[e.idx].ignoreAmbiguities)return[];const o=e.idx,a=e.path;return PR(CR(i,e=>{return!0!==t.definition[e.idx].ignoreAmbiguities&&e.idx<o&&(n=e.path,r=a,n.length<r.length&&NR(n,(e,t)=>{const n=r[t];return e===n||n.categoryMatchesMap[e.tokenTypeIdx]}));var n,r}),e=>{const i=[e.idx+1,o+1],a=0===t.idx?"":t.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:OU.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:a,alternatives:i}})}));return o}(a,r,e,n);return s.concat(l)});return o}class $z extends qB{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function Yz(e){const t=bR(e,{errMsgProvider:lz}),n={};return kR(e.rules,e=>{n[e.name]=e}),function(e,t){const n=new cz(e,t);return n.resolveRefs(),n.errors}(n,t.errMsgProvider)}const qz="MismatchedTokenException",Wz="NoViableAltException",Xz="EarlyExitException",Kz="NotAllInputParsedException",Zz=[qz,Wz,Xz,Kz];function Qz(e){return XR(Zz,e.name)}Object.freeze(Zz);class Jz extends Error{constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class eU extends Jz{constructor(e,t,n){super(e,t),this.previousToken=n,this.name=qz}}class tU extends Jz{constructor(e,t,n){super(e,t),this.previousToken=n,this.name=Wz}}class nU extends Jz{constructor(e,t){super(e,t),this.name=Kz}}class rU extends Jz{constructor(e,t,n){super(e,t),this.previousToken=n,this.name=Xz}}const iU={},oU="InRuleRecoveryException";class aU extends Error{constructor(e){super(e),this.name=oU}}function sU(e,t,n,r,i,o,a){const s=this.getKeyForAutomaticLookahead(r,i);let l=this.firstAfterRepMap[s];if(void 0===l){const e=this.getCurrRuleFullName();l=new o(this.getGAstProductions()[e],i).startWalking(),this.firstAfterRepMap[s]=l}let u=l.token,c=l.occurrence;const h=l.isEndOfRule;1===this.RULE_STACK.length&&h&&void 0===u&&(u=iz,c=1),void 0!==u&&void 0!==c&&this.shouldInRepetitionRecoveryBeTried(u,c,a)&&this.tryInRepetitionRecovery(e,t,n,u)}const lU=1024,uU=1280,cU=1536;function hU(e,t,n){return n|t|e}class dU{constructor(e){var t;this.maxLookahead=null!==(t=null==e?void 0:e.maxLookahead)&&void 0!==t?t:RU.maxLookahead}validate(e){const t=this.validateNoLeftRecursion(e.rules);if(wk(t)){const n=this.validateEmptyOrAlternatives(e.rules),r=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),i=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...n,...r,...i]}return t}validateNoLeftRecursion(e){return BR(e,e=>Gz(e,e,uz))}validateEmptyOrAlternatives(e){return BR(e,e=>function(e,t){const n=new jz;return e.accept(n),BR(n.alternations,n=>BR(TR(n.definition),(r,i)=>wk(bz([r],[],RF,1))?[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:n,emptyChoiceIdx:i}),type:OU.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:n.idx,alternative:i+1}]:[]))}(e,uz))}validateAmbiguousAlternationAlternatives(e,t){return BR(e,e=>Hz(e,t,uz))}validateSomeNonEmptyLookaheadPath(e,t){return function(e,t,n){const r=[];return kR(e,e=>{const i=new $z;e.accept(i),kR(i.allProductions,i=>{const o=Tz(i),a=i.maxLookahead||t;if(wk(fI(Oz(i.idx,e,o,a)[0]))){const t=n.buildEmptyRepetitionError({topLevelRule:e,repetition:i});r.push({message:t,type:OU.NO_NON_EMPTY_LOOKAHEAD,ruleName:e.name})}})}),r}(e,t,uz)}buildLookaheadForAlternation(e){return function(e,t,n,r,i,o){const a=Lz(e,t,n);return o(a,r,Pz(a)?LF:RF,i)}(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,kz)}buildLookaheadForOptional(e){return function(e,t,n,r,i,o){const a=Oz(e,t,i,n),s=Pz(a)?LF:RF;return o(a[0],s,r)}(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Tz(e.prodType),Az)}}const fU=new class extends qB{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}};function pU(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset==!0&&(e.endOffset=t.endOffset)}function gU(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset==!0&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}function mU(e,t){Object.defineProperty(e,"name",{enumerable:!1,configurable:!0,writable:!1,value:t})}function vU(e,t){const n=KC(e),r=n.length;for(let i=0;i<r;i++){const r=e[n[i]],o=r.length;for(let e=0;e<o;e++){const n=r[e];void 0===n.tokenTypeIdx&&this[n.name](n.children,t)}}}function yU(e,t){const n=function(){};mU(n,e+"BaseSemantics");const r={visit:function(e,t){if(Wx(e)&&(e=e[0]),!JR(e))return this[e.name](e.children,t)},validateVisitor:function(){const e=function(e,t){const n=function(e,t){const n=CR(t,t=>!1===Xb(e[t])),r=PR(n,t=>({msg:`Missing visitor method: <${t}> on ${e.constructor.name} CST Visitor.`,type:bU.MISSING_METHOD,methodName:t}));return GI(r)}(e,t);return n}(this,t);if(!wk(e)){const t=PR(e,e=>e.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:\n\t${t.join("\n\n").replace(/\n/g,"\n\t")}`)}}};return(n.prototype=r).constructor=n,n._RULE_NAMES=t,n}var bU,xU;(xU=bU||(bU={}))[xU.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",xU[xU.MISSING_METHOD=1]="MISSING_METHOD";const wU={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(wU);const EU=!0,TU=Math.pow(2,8)-1,_U=rz({name:"RECORDING_PHASE_TOKEN",pattern:$F.NA});PF([_U]);const kU=oz(_U,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(kU);const AU={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}};function SU(e,t,n,r=!1){CU(n);const i=wR(this.recordingProdStack),o=Xb(t)?t:t.DEF,a=new e({definition:[],idx:n});return r&&(a.separator=t.SEP),$R(t,"MAX_LOOKAHEAD")&&(a.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(a),o.call(this),i.definition.push(a),this.recordingProdStack.pop(),wU}function NU(e,t){CU(t);const n=wR(this.recordingProdStack),r=!1===Wx(e),i=!1===r?e:e.DEF,o=new HB({definition:[],idx:t,ignoreAmbiguities:r&&!0===e.IGNORE_AMBIGUITIES});$R(e,"MAX_LOOKAHEAD")&&(o.maxLookahead=e.MAX_LOOKAHEAD);const a=bL(i,e=>Xb(e.GATE));return o.hasPredicates=a,n.definition.push(o),kR(i,e=>{const t=new FB({definition:[]});o.definition.push(t),$R(e,"IGNORE_AMBIGUITIES")?t.ignoreAmbiguities=e.IGNORE_AMBIGUITIES:$R(e,"GATE")&&(t.ignoreAmbiguities=!0),this.recordingProdStack.push(t),e.ALT.call(this),this.recordingProdStack.pop()}),wU}function MU(e){return 0===e?"":`${e}`}function CU(e){if(e<0||e>TU){const t=new Error(`Invalid DSL Method idx value: <${e}>\n\tIdx value must be a none negative value smaller than ${TU+1}`);throw t.KNOWN_RECORDER_ERROR=!0,t}}const IU=oz(iz,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(IU);const RU=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:sz,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),LU=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var OU,DU,PU,BU;function FU(e=void 0){return function(){return e}}(DU=OU||(OU={}))[DU.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",DU[DU.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",DU[DU.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",DU[DU.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",DU[DU.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",DU[DU.LEFT_RECURSION=5]="LEFT_RECURSION",DU[DU.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",DU[DU.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",DU[DU.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",DU[DU.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",DU[DU.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",DU[DU.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",DU[DU.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",DU[DU.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION";class zU{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const t=this.className;this.TRACE_INIT("toFastProps",()=>{LB(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),kR(this.definedRulesNames,e=>{const t=this[e].originalGrammarAction;let n;this.TRACE_INIT(`${e} Rule`,()=>{n=this.topLevelRuleRecord(e,t)}),this.gastProductionsCache[e]=n})}finally{this.disableRecording()}});let n=[];if(this.TRACE_INIT("Grammar Resolving",()=>{n=Yz({rules:qR(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)}),this.TRACE_INIT("Grammar Validations",()=>{if(wk(n)&&!1===this.skipValidations){const n=(e={rules:qR(this.gastProductionsCache),tokenTypes:qR(this.tokensMap),errMsgProvider:uz,grammarName:t},Bz((e=bR(e,{errMsgProvider:uz})).rules,e.tokenTypes,e.errMsgProvider,e.grammarName)),r=function(e){return PR(e.lookaheadStrategy.validate({rules:e.rules,tokenTypes:e.tokenTypes,grammarName:e.grammarName}),e=>Object.assign({type:OU.CUSTOM_LOOKAHEAD_VALIDATION},e))}({lookaheadStrategy:this.lookaheadStrategy,rules:qR(this.gastProductionsCache),tokenTypes:qR(this.tokensMap),grammarName:t});this.definitionErrors=this.definitionErrors.concat(n,r)}var e}),wk(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const e=function(e){const t={};return kR(e,e=>{const n=new eF(e).startWalking();QC(t,n)}),t}(qR(this.gastProductionsCache));this.resyncFollows=e}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var e,t;null===(t=(e=this.lookaheadStrategy).initialize)||void 0===t||t.call(e,{rules:qR(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(qR(this.gastProductionsCache))})),!zU.DEFER_DEFINITION_ERRORS_HANDLING&&!wk(this.definitionErrors))throw e=PR(this.definitionErrors,e=>e.message),new Error(`Parser Definition Errors detected:\n ${e.join("\n-------------------------------\n")}`)})}constructor(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;const n=this;if(n.initErrorHandler(t),n.initLexerAdapter(),n.initLooksAhead(t),n.initRecognizerEngine(e,t),n.initRecoverable(t),n.initTreeBuilder(t),n.initContentAssist(),n.initGastRecorder(t),n.initPerformanceTracer(t),$R(t,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=$R(t,"skipValidations")?t.skipValidations:RU.skipValidations}}zU.DEFER_DEFINITION_ERRORS_HANDLING=!1,PU=zU,BU=[class{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=$R(e,"recoveryEnabled")?e.recoveryEnabled:RU.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=sU)}getTokenToInsert(e){const t=oz(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,n,r){const i=this.findReSyncTokenType(),o=this.exportLexerState(),a=[];let s=!1;const l=this.LA(1);let u=this.LA(1);const c=()=>{const e=this.LA(0),t=this.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:l,previous:e,ruleName:this.getCurrRuleFullName()}),n=new eU(t,l,this.LA(0));n.resyncedTokens=TR(a),this.SAVE_ERROR(n)};for(;!s;){if(this.tokenMatcher(u,r))return void c();if(n.call(this))return c(),void e.apply(this,t);this.tokenMatcher(u,i)?s=!0:(u=this.SKIP_TOKEN(),this.addToResyncTokens(u,a))}this.importLexerState(o)}shouldInRepetitionRecoveryBeTried(e,t,n){return!1!==n&&!this.tokenMatcher(this.LA(1),e)&&!this.isBackTracking()&&!this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t))}getFollowsForInRuleRecovery(e,t){const n=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const e=this.SKIP_TOKEN();return this.consumeToken(),e}throw new aU("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e))return!1;if(wk(t))return!1;const n=this.LA(1);return void 0!==LR(t,e=>this.tokenMatcher(n,e))}canRecoverWithSingleTokenDeletion(e){return!!this.canTokenTypeBeDeletedInRecovery(e)&&this.tokenMatcher(this.LA(2),e)}isInCurrentRuleReSyncSet(e){const t=this.getCurrFollowKey();return XR(this.getFollowSetFromFollowKey(t),e)}findReSyncTokenType(){const e=this.flattenFollowSet();let t=this.LA(1),n=2;for(;;){const r=LR(e,e=>az(t,e));if(void 0!==r)return r;t=this.LA(n),n++}}getCurrFollowKey(){if(1===this.RULE_STACK.length)return iU;const e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return PR(e,(n,r)=>0===r?iU:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:t[r],inRule:this.shortRuleNameToFullName(e[r-1])})}flattenFollowSet(){return fI(PR(this.buildFullFollowKeyStack(),e=>this.getFollowSetFromFollowKey(e)))}getFollowSetFromFollowKey(e){if(e===iU)return[iz];const t=e.ruleName+e.idxInCallingRule+JB+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,iz)||t.push(e),t}reSyncTo(e){const t=[];let n=this.LA(1);for(;!1===this.tokenMatcher(n,e);)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,t);return TR(t)}attemptInRepetitionRecovery(e,t,n,r,i,o,a){}getCurrentGrammarPath(e,t){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:zI(this.RULE_OCCURRENCE_STACK),lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return PR(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}},class{initLooksAhead(e){this.dynamicTokensEnabled=$R(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:RU.dynamicTokensEnabled,this.maxLookahead=$R(e,"maxLookahead")?e.maxLookahead:RU.maxLookahead,this.lookaheadStrategy=$R(e,"lookaheadStrategy")?e.lookaheadStrategy:new dU({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){kR(e,e=>{this.TRACE_INIT(`${e.name} Rule Lookahead`,()=>{const{alternation:t,repetition:n,option:r,repetitionMandatory:i,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:a}=function(e){fU.reset(),e.accept(fU);const t=fU.dslMethods;return fU.reset(),t}(e);kR(t,t=>{const n=0===t.idx?"":t.idx;this.TRACE_INIT(`${XB(t)}${n}`,()=>{const n=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:t.idx,rule:e,maxLookahead:t.maxLookahead||this.maxLookahead,hasPredicates:t.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),r=hU(this.fullRuleNameToShort[e.name],256,t.idx);this.setLaFuncCache(r,n)})}),kR(n,t=>{this.computeLookaheadFunc(e,t.idx,768,"Repetition",t.maxLookahead,XB(t))}),kR(r,t=>{this.computeLookaheadFunc(e,t.idx,512,"Option",t.maxLookahead,XB(t))}),kR(i,t=>{this.computeLookaheadFunc(e,t.idx,lU,"RepetitionMandatory",t.maxLookahead,XB(t))}),kR(o,t=>{this.computeLookaheadFunc(e,t.idx,cU,"RepetitionMandatoryWithSeparator",t.maxLookahead,XB(t))}),kR(a,t=>{this.computeLookaheadFunc(e,t.idx,uU,"RepetitionWithSeparator",t.maxLookahead,XB(t))})})})}computeLookaheadFunc(e,t,n,r,i,o){this.TRACE_INIT(`${o}${0===t?"":t}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:i||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:r}),a=hU(this.fullRuleNameToShort[e.name],n,t);this.setLaFuncCache(a,o)})}getKeyForAutomaticLookahead(e,t){return hU(this.getLastExplicitRuleShortName(),e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}},class{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=$R(e,"nodeLocationTracking")?e.nodeLocationTracking:RU.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=gU,this.setNodeLocationFromNode=gU,this.cstPostRule=HC,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=HC,this.setNodeLocationFromNode=HC,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=pU,this.setNodeLocationFromNode=pU,this.cstPostRule=HC,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=HC,this.setNodeLocationFromNode=HC,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`);this.setNodeLocationFromToken=HC,this.setNodeLocationFromNode=HC,this.cstPostRule=HC,this.setInitialNodeLocation=HC}else this.cstInvocationStateUpdate=HC,this.cstFinallyStateUpdate=HC,this.cstPostTerminal=HC,this.cstPostNonTerminal=HC,this.cstPostRule=HC}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const t=this.LA(0),n=e.location;n.startOffset<=t.startOffset==1?(n.endOffset=t.endOffset,n.endLine=t.endLine,n.endColumn=t.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(e){const t=this.LA(0),n=e.location;n.startOffset<=t.startOffset==1?n.endOffset=t.endOffset:n.startOffset=NaN}cstPostTerminal(e,t){const n=this.CST_STACK[this.CST_STACK.length-1];var r,i,o;i=t,o=e,void 0===(r=n).children[o]?r.children[o]=[i]:r.children[o].push(i),this.setNodeLocationFromToken(n.location,t)}cstPostNonTerminal(e,t){const n=this.CST_STACK[this.CST_STACK.length-1];!function(e,t,n){void 0===e.children[t]?e.children[t]=[n]:e.children[t].push(n)}(n,t,e),this.setNodeLocationFromNode(n.location,e.location)}getBaseCstVisitorConstructor(){if(JR(this.baseCstVisitorConstructor)){const e=yU(this.className,KC(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(JR(this.baseCstVisitorWithDefaultsConstructor)){const e=function(e,t,n){const r=function(){};mU(r,e+"BaseSemanticsWithDefaults");const i=Object.create(n.prototype);return kR(t,e=>{i[e]=vU}),(r.prototype=i).constructor=r,r}(this.className,KC(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}},class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):IU}LA(e){const t=this.currIdx+e;return t<0||this.tokVectorLength<=t?IU:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}},class{initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=LF,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},$R(t,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if(Wx(e)){if(wk(e))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof e[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if(Wx(e))this.tokensMap=mL(e,(e,t)=>(e[t.name]=t,e),{});else if($R(e,"modes")&&NR(fI(qR(e.modes)),UF)){const t=_L(fI(qR(e.modes)));this.tokensMap=mL(t,(e,t)=>(e[t.name]=t,e),{})}else{if(!Wb(e))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=zI(e)}this.tokensMap.EOF=iz;const n=NR($R(e,"modes")?fI(qR(e.modes)):qR(e),e=>wk(e.categoryMatches));this.tokenMatcher=n?LF:RF,PF(qR(this.tokensMap))}defineRule(e,t,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const r=$R(n,"resyncEnabled")?n.resyncEnabled:LU.resyncEnabled,i=$R(n,"recoveryValueFunc")?n.recoveryValueFunc:LU.recoveryValueFunc,o=this.ruleShortNameIdx<<12;let a;return this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=e,this.fullRuleNameToShort[e]=o,a=!0===this.outputCst?function(...n){try{this.ruleInvocationStateUpdate(o,e,this.subruleIdx),t.apply(this,n);const r=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(r),r}catch(LY){return this.invokeRuleCatch(LY,r,i)}finally{this.ruleFinallyStateUpdate()}}:function(...n){try{return this.ruleInvocationStateUpdate(o,e,this.subruleIdx),t.apply(this,n)}catch(LY){return this.invokeRuleCatch(LY,r,i)}finally{this.ruleFinallyStateUpdate()}},Object.assign(a,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,n){const r=1===this.RULE_STACK.length,i=t&&!this.isBackTracking()&&this.recoveryEnabled;if(Qz(e)){const t=e;if(i){const r=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(r)){if(t.resyncedTokens=this.reSyncTo(r),this.outputCst){const e=this.CST_STACK[this.CST_STACK.length-1];return e.recoveredNode=!0,e}return n(e)}if(this.outputCst){const e=this.CST_STACK[this.CST_STACK.length-1];e.recoveredNode=!0,t.partialCstResult=e}throw t}if(r)return this.moveToTerminatedState(),n(e);throw t}throw e}optionInternal(e,t){const n=this.getKeyForAutomaticLookahead(512,t);return this.optionInternalLogic(e,t,n)}optionInternalLogic(e,t,n){let r,i=this.getLaFuncFromCache(n);if("function"!=typeof e){r=e.DEF;const t=e.GATE;if(void 0!==t){const e=i;i=()=>t.call(this)&&e.call(this)}}else r=e;if(!0===i.call(this))return r.call(this)}atLeastOneInternal(e,t){const n=this.getKeyForAutomaticLookahead(lU,e);return this.atLeastOneInternalLogic(e,t,n)}atLeastOneInternalLogic(e,t,n){let r,i=this.getLaFuncFromCache(n);if("function"!=typeof t){r=t.DEF;const e=t.GATE;if(void 0!==e){const t=i;i=()=>e.call(this)&&t.call(this)}}else r=t;if(!0!==i.call(this))throw this.raiseEarlyExitException(e,wz.REPETITION_MANDATORY,t.ERR_MSG);{let e=this.doSingleRepetition(r);for(;!0===i.call(this)&&!0===e;)e=this.doSingleRepetition(r)}this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],i,lU,e,mz)}atLeastOneSepFirstInternal(e,t){const n=this.getKeyForAutomaticLookahead(cU,e);this.atLeastOneSepFirstInternalLogic(e,t,n)}atLeastOneSepFirstInternalLogic(e,t,n){const r=t.DEF,i=t.SEP;if(!0!==this.getLaFuncFromCache(n).call(this))throw this.raiseEarlyExitException(e,wz.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG);{r.call(this);const t=()=>this.tokenMatcher(this.LA(1),i);for(;!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,i,t,r,vz],t,cU,e,vz)}}manyInternal(e,t){const n=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,t,n)}manyInternalLogic(e,t,n){let r,i=this.getLaFuncFromCache(n);if("function"!=typeof t){r=t.DEF;const e=t.GATE;if(void 0!==e){const t=i;i=()=>e.call(this)&&t.call(this)}}else r=t;let o=!0;for(;!0===i.call(this)&&!0===o;)o=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],i,768,e,pz,o)}manySepFirstInternal(e,t){const n=this.getKeyForAutomaticLookahead(uU,e);this.manySepFirstInternalLogic(e,t,n)}manySepFirstInternalLogic(e,t,n){const r=t.DEF,i=t.SEP;if(!0===this.getLaFuncFromCache(n).call(this)){r.call(this);const t=()=>this.tokenMatcher(this.LA(1),i);for(;!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,i,t,r,gz],t,uU,e,gz)}}repetitionSepSecondInternal(e,t,n,r,i){for(;n();)this.CONSUME(t),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,n,r,i],n,cU,e,i)}doSingleRepetition(e){const t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){const n=this.getKeyForAutomaticLookahead(256,t),r=Wx(e)?e:e.DEF,i=this.getLaFuncFromCache(n).call(this,r);if(void 0!==i)return r[i].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){const e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new nU(t,e))}}subruleInternal(e,t,n){let r;try{const i=void 0!==n?n.ARGS:void 0;return this.subruleIdx=t,r=e.apply(this,i),this.cstPostNonTerminal(r,void 0!==n&&void 0!==n.LABEL?n.LABEL:e.ruleName),r}catch(LY){throw this.subruleInternalError(LY,n,e.ruleName)}}subruleInternalError(e,t,n){throw Qz(e)&&void 0!==e.partialCstResult&&(this.cstPostNonTerminal(e.partialCstResult,void 0!==t&&void 0!==t.LABEL?t.LABEL:n),delete e.partialCstResult),e}consumeInternal(e,t,n){let r;try{const t=this.LA(1);!0===this.tokenMatcher(t,e)?(this.consumeToken(),r=t):this.consumeInternalError(e,t,n)}catch(i){r=this.consumeInternalRecovery(e,t,i)}return this.cstPostTerminal(void 0!==n&&void 0!==n.LABEL?n.LABEL:e.name,r),r}consumeInternalError(e,t,n){let r;const i=this.LA(0);throw r=void 0!==n&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new eU(r,t,i))}consumeInternalRecovery(e,t,n){if(!this.recoveryEnabled||"MismatchedTokenException"!==n.name||this.isBackTracking())throw n;{const i=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,i)}catch(r){throw r.name===oU?n:r}}}saveRecogState(){const e=this.errors,t=zI(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return 0!==this.isBackTrackingStack.length}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),iz)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}},class{ACTION(e){return e.call(this)}consume(e,t,n){return this.consumeInternal(t,e,n)}subrule(e,t,n){return this.subruleInternal(t,e,n)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,n=LU){if(XR(this.definedRulesNames,e)){const t={message:uz.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:OU.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(t)}this.definedRulesNames.push(e);const r=this.defineRule(e,t,n);return this[e]=r,r}OVERRIDE_RULE(e,t,n=LU){const r=function(e,t,n){const r=[];let i;return XR(t,e)||(i=`Invalid rule override, rule: ->${e}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,r.push({message:i,type:OU.INVALID_RULE_OVERRIDE,ruleName:e})),r}(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(r);const i=this.defineRule(e,t,n);return this[e]=i,i}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);const n=this.saveRecogState();try{return e.apply(this,t),!0}catch(LY){if(Qz(LY))return!1;throw LY}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return PR(qR(this.gastProductionsCache),YB)}},class{initErrorHandler(e){this._errors=[],this.errorMessageProvider=$R(e,"errorMessageProvider")?e.errorMessageProvider:RU.errorMessageProvider}SAVE_ERROR(e){if(Qz(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:zI(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return zI(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,n){const r=this.getCurrRuleFullName(),i=Oz(e,this.getGAstProductions()[r],t,this.maxLookahead)[0],o=[];for(let s=1;s<=this.maxLookahead;s++)o.push(this.LA(s));const a=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:i,actual:o,previous:this.LA(0),customUserDescription:n,ruleName:r});throw this.SAVE_ERROR(new rU(a,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){const n=this.getCurrRuleFullName(),r=Lz(e,this.getGAstProductions()[n],this.maxLookahead),i=[];for(let s=1;s<=this.maxLookahead;s++)i.push(this.LA(s));const o=this.LA(0),a=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:r,actual:i,previous:o,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new tU(a,this.LA(1),o))}},class{initContentAssist(){}computeContentAssist(e,t){const n=this.gastProductionsCache[e];if(JR(n))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return bz([n],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const t=OR(e.ruleStack),n=this.getGAstProductions()[t];return new dz(n,e).startWalking()}},class{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const t=e>0?e:"";this[`CONSUME${t}`]=function(t,n){return this.consumeInternalRecord(t,e,n)},this[`SUBRULE${t}`]=function(t,n){return this.subruleInternalRecord(t,e,n)},this[`OPTION${t}`]=function(t){return this.optionInternalRecord(t,e)},this[`OR${t}`]=function(t){return this.orInternalRecord(t,e)},this[`MANY${t}`]=function(t){this.manyInternalRecord(e,t)},this[`MANY_SEP${t}`]=function(t){this.manySepFirstInternalRecord(e,t)},this[`AT_LEAST_ONE${t}`]=function(t){this.atLeastOneInternalRecord(e,t)},this[`AT_LEAST_ONE_SEP${t}`]=function(t){this.atLeastOneSepFirstInternalRecord(e,t)}}this.consume=function(e,t,n){return this.consumeInternalRecord(t,e,n)},this.subrule=function(e,t,n){return this.subruleInternalRecord(t,e,n)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let t=0;t<10;t++){const n=t>0?t:"";delete e[`CONSUME${n}`],delete e[`SUBRULE${n}`],delete e[`OPTION${n}`],delete e[`OR${n}`],delete e[`MANY${n}`],delete e[`MANY_SEP${n}`],delete e[`AT_LEAST_ONE${n}`],delete e[`AT_LEAST_ONE_SEP${n}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return IU}topLevelRuleRecord(e,t){try{const n=new BB({definition:[],name:e});return n.name=e,this.recordingProdStack.push(n),t.call(this),this.recordingProdStack.pop(),n}catch(n){if(!0!==n.KNOWN_RECORDER_ERROR)try{n.message=n.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch(r){throw n}throw n}}optionInternalRecord(e,t){return SU.call(this,zB,e,t)}atLeastOneInternalRecord(e,t){SU.call(this,UB,t,e)}atLeastOneSepFirstInternalRecord(e,t){SU.call(this,GB,t,e,EU)}manyInternalRecord(e,t){SU.call(this,VB,t,e)}manySepFirstInternalRecord(e,t){SU.call(this,jB,t,e,EU)}orInternalRecord(e,t){return NU.call(this,e,t)}subruleInternalRecord(e,t,n){if(CU(t),!e||!1===$R(e,"ruleName")){const n=new Error(`<SUBRULE${MU(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw n.KNOWN_RECORDER_ERROR=!0,n}const r=wR(this.recordingProdStack),i=e.ruleName,o=new PB({idx:t,nonTerminalName:i,label:null==n?void 0:n.LABEL,referencedRule:void 0});return r.definition.push(o),this.outputCst?AU:wU}consumeInternalRecord(e,t,n){if(CU(t),!FF(e)){const n=new Error(`<CONSUME${MU(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw n.KNOWN_RECORDER_ERROR=!0,n}const r=wR(this.recordingProdStack),i=new $B({idx:t,terminalType:e,label:null==n?void 0:n.LABEL});return r.definition.push(i),kU}},class{initPerformanceTracer(e){if($R(e,"traceInitPerf")){const t=e.traceInitPerf,n="number"==typeof t;this.traceInitMaxIdent=n?t:1/0,this.traceInitPerf=n?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=RU.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(!0===this.traceInitPerf){this.traceInitIndent++;const n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent,this.traceInitMaxIdent;const{time:r,value:i}=RB(t),o=r>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&o(`${n}<-- <${e}> time: ${r}ms`),this.traceInitIndent--,i}return t()}}],BU.forEach(e=>{const t=e.prototype;Object.getOwnPropertyNames(t).forEach(n=>{if("constructor"===n)return;const r=Object.getOwnPropertyDescriptor(t,n);r&&(r.get||r.set)?Object.defineProperty(PU.prototype,n,r):PU.prototype[n]=e.prototype[n]})});class UU extends zU{constructor(e,t=RU){const n=zI(t);n.outputCst=!1,super(e,n)}}function GU(e,t,n){return`${e.name}_${t}_${n}`}class VU{constructor(e){this.target=e}isEpsilon(){return!1}}class jU extends VU{constructor(e,t){super(e),this.tokenType=t}}class HU extends VU{constructor(e){super(e)}isEpsilon(){return!0}}class $U extends VU{constructor(e,t,n){super(e),this.rule=t,this.followState=n}isEpsilon(){return!0}}function YU(e){const t={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};!function(e,t){const n=t.length;for(let r=0;r<n;r++){const n=t[r],i=nG(e,n,void 0,{type:2}),o=nG(e,n,void 0,{type:7});i.stop=o,e.ruleToStartState.set(n,i),e.ruleToStopState.set(n,o)}}(t,e);const n=e.length;for(let r=0;r<n;r++){const n=e[r],i=WU(t,n,n);void 0!==i&&eG(t,n,i)}return t}function qU(e,t,n){return n instanceof $B?JU(e,t,n.terminalType,n):n instanceof PB?function(e,t,n){const r=n.referencedRule,i=e.ruleToStartState.get(r),o=nG(e,t,n,{type:1}),a=nG(e,t,n,{type:1}),s=new $U(i,r,a);return rG(o,s),{left:o,right:a}}(e,t,n):n instanceof HB?function(e,t,n){const r=nG(e,t,n,{type:1});ZU(e,r);const i=PR(n.definition,n=>qU(e,t,n)),o=QU(e,t,r,n,...i);return o}(e,t,n):n instanceof zB?function(e,t,n){const r=nG(e,t,n,{type:1});ZU(e,r);const i=QU(e,t,r,n,WU(e,t,n));return function(e,t,n,r){const i=r.left,o=r.right;return tG(i,o),e.decisionMap[GU(t,"Option",n.idx)]=i,r}(e,t,n,i)}(e,t,n):n instanceof VB?function(e,t,n){const r=nG(e,t,n,{type:5});ZU(e,r);const i=QU(e,t,r,n,WU(e,t,n));return KU(e,t,n,i)}(e,t,n):n instanceof jB?function(e,t,n){const r=nG(e,t,n,{type:5});ZU(e,r);const i=QU(e,t,r,n,WU(e,t,n)),o=JU(e,t,n.separator,n);return KU(e,t,n,i,o)}(e,t,n):n instanceof UB?function(e,t,n){const r=nG(e,t,n,{type:4});ZU(e,r);const i=QU(e,t,r,n,WU(e,t,n));return XU(e,t,n,i)}(e,t,n):n instanceof GB?function(e,t,n){const r=nG(e,t,n,{type:4});ZU(e,r);const i=QU(e,t,r,n,WU(e,t,n)),o=JU(e,t,n.separator,n);return XU(e,t,n,i,o)}(e,t,n):WU(e,t,n)}function WU(e,t,n){const r=CR(PR(n.definition,n=>qU(e,t,n)),e=>void 0!==e);return 1===r.length?r[0]:0===r.length?void 0:function(e,t){const n=t.length;for(let o=0;o<n-1;o++){const n=t[o];let r;1===n.left.transitions.length&&(r=n.left.transitions[0]);const i=r instanceof $U,a=r,s=t[o+1].left;1===n.left.type&&1===n.right.type&&void 0!==r&&(i&&a.followState===n.right||r.target===n.right)?(i?a.followState=s:r.target=s,iG(e,n.right)):tG(n.right,s)}const r=t[0],i=t[n-1];return{left:r.left,right:i.right}}(e,r)}function XU(e,t,n,r,i){const o=r.left,a=r.right,s=nG(e,t,n,{type:11});ZU(e,s);const l=nG(e,t,n,{type:12});return o.loopback=s,l.loopback=s,e.decisionMap[GU(t,i?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",n.idx)]=s,tG(a,s),void 0===i?(tG(s,o),tG(s,l)):(tG(s,l),tG(s,i.left),tG(i.right,o)),{left:o,right:l}}function KU(e,t,n,r,i){const o=r.left,a=r.right,s=nG(e,t,n,{type:10});ZU(e,s);const l=nG(e,t,n,{type:12}),u=nG(e,t,n,{type:9});return s.loopback=u,l.loopback=u,tG(s,o),tG(s,l),tG(a,u),void 0!==i?(tG(u,l),tG(u,i.left),tG(i.right,o)):tG(u,s),e.decisionMap[GU(t,i?"RepetitionWithSeparator":"Repetition",n.idx)]=s,{left:s,right:l}}function ZU(e,t){return e.decisionStates.push(t),t.decision=e.decisionStates.length-1,t.decision}function QU(e,t,n,r,...i){const o=nG(e,t,r,{type:8,start:n});n.end=o;for(const s of i)void 0!==s?(tG(n,s.left),tG(s.right,o)):tG(n,o);const a={left:n,right:o};return e.decisionMap[GU(t,function(e){if(e instanceof HB)return"Alternation";if(e instanceof zB)return"Option";if(e instanceof VB)return"Repetition";if(e instanceof jB)return"RepetitionWithSeparator";if(e instanceof UB)return"RepetitionMandatory";if(e instanceof GB)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}(r),r.idx)]=n,a}function JU(e,t,n,r){const i=nG(e,t,r,{type:1}),o=nG(e,t,r,{type:1});return rG(i,new jU(o,n)),{left:i,right:o}}function eG(e,t,n){const r=e.ruleToStartState.get(t);tG(r,n.left);const i=e.ruleToStopState.get(t);tG(n.right,i);return{left:r,right:i}}function tG(e,t){rG(e,new HU(t))}function nG(e,t,n,r){const i=Object.assign({atn:e,production:n,epsilonOnlyTransitions:!1,rule:t,transitions:[],nextTokenWithinRule:[],stateNumber:e.states.length},r);return e.states.push(i),i}function rG(e,t){0===e.transitions.length&&(e.epsilonOnlyTransitions=t.isEpsilon()),e.transitions.push(t)}function iG(e,t){e.states.splice(e.states.indexOf(t),1)}const oG={};class aG{constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){const t=sG(e);t in this.map||(this.map[t]=this.configs.length,this.configs.push(e))}get elements(){return this.configs}get alts(){return PR(this.configs,e=>e.alt)}get key(){let e="";for(const t in this.map)e+=t+":";return e}}function sG(e,t=!0){return`${t?`a${e.alt}`:""}s${e.state.stateNumber}:${e.stack.map(e=>e.stateNumber.toString()).join("_")}`}function lG(e,t){const n={};return r=>{const i=r.toString();let o=n[i];return void 0!==o||(o={atnStartState:e,decision:t,states:{}},n[i]=o),o}}class uG{constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,t){this.predicates[e]=t}toString(){let e="";const t=this.predicates.length;for(let n=0;n<t;n++)e+=!0===this.predicates[n]?"1":"0";return e}}const cG=new uG;class hG extends dU{constructor(e){var t;super(),this.logging=null!==(t=null==e?void 0:e.logging)&&void 0!==t?t:e=>{}}initialize(e){this.atn=YU(e.rules),this.dfas=function(e){const t=e.decisionStates.length,n=Array(t);for(let r=0;r<t;r++)n[r]=lG(e.decisionStates[r],r);return n}(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(e){const{prodOccurrence:t,rule:n,hasPredicates:r,dynamicTokensEnabled:i}=e,o=this.dfas,a=this.logging,s=GU(n,"Alternation",t),l=this.atn.decisionMap[s].decision,u=PR(_z({maxLookahead:1,occurrence:t,prodType:"Alternation",rule:n}),e=>PR(e,e=>e[0]));if(dG(u,!1)&&!i){const e=mL(u,(e,t,n)=>(kR(t,t=>{t&&(e[t.tokenTypeIdx]=n,kR(t.categoryMatches,t=>{e[t]=n}))}),e),{});return r?function(t){var n;const r=this.LA(1),i=e[r.tokenTypeIdx];if(void 0!==t&&void 0!==i){const e=null===(n=t[i])||void 0===n?void 0:n.GATE;if(void 0!==e&&!1===e.call(this))return}return i}:function(){const t=this.LA(1);return e[t.tokenTypeIdx]}}return r?function(e){const t=new uG,n=void 0===e?0:e.length;for(let i=0;i<n;i++){const n=null==e?void 0:e[i].GATE;t.set(i,void 0===n||n.call(this))}const r=fG.call(this,o,l,t,a);return"number"==typeof r?r:void 0}:function(){const e=fG.call(this,o,l,cG,a);return"number"==typeof e?e:void 0}}buildLookaheadForOptional(e){const{prodOccurrence:t,rule:n,prodType:r,dynamicTokensEnabled:i}=e,o=this.dfas,a=this.logging,s=GU(n,r,t),l=this.atn.decisionMap[s].decision,u=PR(_z({maxLookahead:1,occurrence:t,prodType:r,rule:n}),e=>PR(e,e=>e[0]));if(dG(u)&&u[0][0]&&!i){const e=fI(u[0]);if(1===e.length&&wk(e[0].categoryMatches)){const t=e[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===t}}{const t=mL(e,(e,t)=>(void 0!==t&&(e[t.tokenTypeIdx]=!0,kR(t.categoryMatches,t=>{e[t]=!0})),e),{});return function(){const e=this.LA(1);return!0===t[e.tokenTypeIdx]}}}return function(){const e=fG.call(this,o,l,cG,a);return"object"!=typeof e&&0===e}}}function dG(e,t=!0){const n=new Set;for(const r of e){const e=new Set;for(const i of r){if(void 0===i){if(t)break;return!1}const r=[i.tokenTypeIdx].concat(i.categoryMatches);for(const t of r)if(n.has(t)){if(!e.has(t))return!1}else n.add(t),e.add(t)}}return!0}function fG(e,t,n,r){const i=e[t](n);let o=i.start;if(void 0===o){const e=function(e){const t=new aG,n=e.transitions.length;for(let r=0;r<n;r++){TG({state:e.transitions[r].target,alt:r,stack:[]},t)}return t}(i.atnStartState);o=EG(i,xG(e)),i.start=o}return pG.apply(this,[i,o,n,r])}function pG(e,t,n,r){let i=t,o=1;const a=[];let s=this.LA(o++);for(;;){let t=yG(i,s);if(void 0===t&&(t=gG.apply(this,[e,i,s,o,n,r])),t===oG)return vG(a,i,s);if(!0===t.isAcceptState)return t.prediction;i=t,a.push(s),s=this.LA(o++)}}function gG(e,t,n,r,i,o){const a=function(e,t,n){const r=new aG,i=[];for(const a of e.elements){if(!1===n.is(a.alt))continue;if(7===a.state.type){i.push(a);continue}const e=a.state.transitions.length;for(let n=0;n<e;n++){const e=bG(a.state.transitions[n],t);void 0!==e&&r.add({state:e,alt:a.alt,stack:a.stack})}}let o;0===i.length&&1===r.size&&(o=r);if(void 0===o){o=new aG;for(const e of r.elements)TG(e,o)}if(i.length>0&&!function(e){for(const t of e.elements)if(7===t.state.type)return!0;return!1}(o))for(const a of i)o.add(a);return o}(t.configs,n,i);if(0===a.size)return wG(e,t,n,oG),oG;let s=xG(a);const l=function(e,t){let n;for(const r of e.elements)if(!0===t.is(r.alt))if(void 0===n)n=r.alt;else if(n!==r.alt)return;return n}(a,i);if(void 0!==l)s.isAcceptState=!0,s.prediction=l,s.configs.uniqueAlt=l;else if(function(e){if(function(e){for(const t of e.elements)if(7!==t.state.type)return!1;return!0}(e))return!0;const t=function(e){const t=new Map;for(const n of e){const e=sG(n,!1);let r=t.get(e);void 0===r&&(r={},t.set(e,r)),r[n.alt]=!0}return t}(e.elements);return function(e){for(const t of Array.from(e.values()))if(Object.keys(t).length>1)return!0;return!1}(t)&&!function(e){for(const t of Array.from(e.values()))if(1===Object.keys(t).length)return!0;return!1}(t)}(a)){const t=iL(a.alts);s.isAcceptState=!0,s.prediction=t,s.configs.uniqueAlt=t,mG.apply(this,[e,r,a.alts,o])}return s=wG(e,t,n,s),s}function mG(e,t,n,r){const i=[];for(let a=1;a<=t;a++)i.push(this.LA(a).tokenType);const o=e.atnStartState;r(function(e){const t=PR(e.prefixPath,e=>YF(e)).join(", "),n=0===e.production.idx?"":e.production.idx;let r=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(", ")}> in <${function(e){if(e instanceof PB)return"SUBRULE";if(e instanceof zB)return"OPTION";if(e instanceof HB)return"OR";if(e instanceof UB)return"AT_LEAST_ONE";if(e instanceof GB)return"AT_LEAST_ONE_SEP";if(e instanceof jB)return"MANY_SEP";if(e instanceof VB)return"MANY";if(e instanceof $B)return"CONSUME";throw Error("non exhaustive match")}(e.production)}${n}> inside <${e.topLevelRule.name}> Rule,\n<${t}> may appears as a prefix path in all these alternatives.\n`;return r+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details.",r}({topLevelRule:o.rule,ambiguityIndices:n,production:o.production,prefixPath:i}))}function vG(e,t,n){const r=BR(t.configs.elements,e=>e.state.transitions);var i,o;return{actualToken:n,possibleTokenTypes:(i=r.filter(e=>e instanceof jU).map(e=>e.tokenType),o=e=>e.tokenTypeIdx,i&&i.length?EL(i,hR(o)):[]),tokenPath:e}}function yG(e,t){return e.edges[t.tokenTypeIdx]}function bG(e,t){if(e instanceof jU&&az(t,e.tokenType))return e.target}function xG(e){return{configs:e,edges:{},isAcceptState:!1,prediction:-1}}function wG(e,t,n,r){return r=EG(e,r),t.edges[n.tokenTypeIdx]=r,r}function EG(e,t){if(t===oG)return t;const n=t.configs.key,r=e.states[n];return void 0!==r?r:(t.configs.finalize(),e.states[n]=t,t)}function TG(e,t){const n=e.state;if(7===n.type){if(e.stack.length>0){const n=[...e.stack];TG({state:n.pop(),alt:e.alt,stack:n},t)}else t.add(e);return}n.epsilonOnlyTransitions||t.add(e);const r=n.transitions.length;for(let i=0;i<r;i++){const r=_G(e,n.transitions[i]);void 0!==r&&TG(r,t)}}function _G(e,t){if(t instanceof HU)return{state:t.target,alt:e.alt,stack:e.stack};if(t instanceof $U){const n=[...e.stack,t.followState];return{state:t.target,alt:e.alt,stack:n}}}var kG,AG,SG,NG,MG,CG,IG,RG,LG,OG,DG,PG,BG,FG,zG,UG,GG,VG,jG,HG,$G,YG,qG,WG,XG,KG,ZG,QG,JG,eV,tV,nV,rV,iV,oV,aV,sV,lV,uV,cV,hV,dV,fV,pV,gV,mV,vV,yV,bV,xV,wV,EV,TV,_V,kV,AV,SV,NV,MV,CV,IV,RV,LV,OV,DV,PV,BV,FV,zV,UV,GV,VV,jV,HV,$V,YV,qV,WV,XV,KV,ZV,QV,JV,ej,tj,nj,rj,ij,oj,aj,sj,lj,uj,cj,hj,dj,fj,pj,gj,mj,vj,yj,bj,xj,wj,Ej,Tj,_j,kj,Aj,Sj,Nj,Mj,Cj,Ij,Rj,Lj,Oj,Dj,Pj,Bj,Fj,zj,Uj,Gj,Vj,jj,Hj,$j,Yj,qj,Wj,Xj;(kG||(kG={})).is=function(e){return"string"==typeof e},(AG||(AG={})).is=function(e){return"string"==typeof e},(NG=SG||(SG={})).MIN_VALUE=-2147483648,NG.MAX_VALUE=2147483647,NG.is=function(e){return"number"==typeof e&&NG.MIN_VALUE<=e&&e<=NG.MAX_VALUE},(CG=MG||(MG={})).MIN_VALUE=0,CG.MAX_VALUE=2147483647,CG.is=function(e){return"number"==typeof e&&CG.MIN_VALUE<=e&&e<=CG.MAX_VALUE},(RG=IG||(IG={})).create=function(e,t){return e===Number.MAX_VALUE&&(e=MG.MAX_VALUE),t===Number.MAX_VALUE&&(t=MG.MAX_VALUE),{line:e,character:t}},RG.is=function(e){let t=e;return Zj.objectLiteral(t)&&Zj.uinteger(t.line)&&Zj.uinteger(t.character)},(OG=LG||(LG={})).create=function(e,t,n,r){if(Zj.uinteger(e)&&Zj.uinteger(t)&&Zj.uinteger(n)&&Zj.uinteger(r))return{start:IG.create(e,t),end:IG.create(n,r)};if(IG.is(e)&&IG.is(t))return{start:e,end:t};throw new Error(`Range#create called with invalid arguments[${e}, ${t}, ${n}, ${r}]`)},OG.is=function(e){let t=e;return Zj.objectLiteral(t)&&IG.is(t.start)&&IG.is(t.end)},(PG=DG||(DG={})).create=function(e,t){return{uri:e,range:t}},PG.is=function(e){let t=e;return Zj.objectLiteral(t)&&LG.is(t.range)&&(Zj.string(t.uri)||Zj.undefined(t.uri))},(FG=BG||(BG={})).create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},FG.is=function(e){let t=e;return Zj.objectLiteral(t)&&LG.is(t.targetRange)&&Zj.string(t.targetUri)&&LG.is(t.targetSelectionRange)&&(LG.is(t.originSelectionRange)||Zj.undefined(t.originSelectionRange))},(UG=zG||(zG={})).create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},UG.is=function(e){const t=e;return Zj.objectLiteral(t)&&Zj.numberRange(t.red,0,1)&&Zj.numberRange(t.green,0,1)&&Zj.numberRange(t.blue,0,1)&&Zj.numberRange(t.alpha,0,1)},(VG=GG||(GG={})).create=function(e,t){return{range:e,color:t}},VG.is=function(e){const t=e;return Zj.objectLiteral(t)&&LG.is(t.range)&&zG.is(t.color)},(HG=jG||(jG={})).create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},HG.is=function(e){const t=e;return Zj.objectLiteral(t)&&Zj.string(t.label)&&(Zj.undefined(t.textEdit)||aV.is(t))&&(Zj.undefined(t.additionalTextEdits)||Zj.typedArray(t.additionalTextEdits,aV.is))},(YG=$G||($G={})).Comment="comment",YG.Imports="imports",YG.Region="region",(WG=qG||(qG={})).create=function(e,t,n,r,i,o){const a={startLine:e,endLine:t};return Zj.defined(n)&&(a.startCharacter=n),Zj.defined(r)&&(a.endCharacter=r),Zj.defined(i)&&(a.kind=i),Zj.defined(o)&&(a.collapsedText=o),a},WG.is=function(e){const t=e;return Zj.objectLiteral(t)&&Zj.uinteger(t.startLine)&&Zj.uinteger(t.startLine)&&(Zj.undefined(t.startCharacter)||Zj.uinteger(t.startCharacter))&&(Zj.undefined(t.endCharacter)||Zj.uinteger(t.endCharacter))&&(Zj.undefined(t.kind)||Zj.string(t.kind))},(KG=XG||(XG={})).create=function(e,t){return{location:e,message:t}},KG.is=function(e){let t=e;return Zj.defined(t)&&DG.is(t.location)&&Zj.string(t.message)},(QG=ZG||(ZG={})).Error=1,QG.Warning=2,QG.Information=3,QG.Hint=4,(eV=JG||(JG={})).Unnecessary=1,eV.Deprecated=2,(tV||(tV={})).is=function(e){const t=e;return Zj.objectLiteral(t)&&Zj.string(t.href)},(rV=nV||(nV={})).create=function(e,t,n,r,i,o){let a={range:e,message:t};return Zj.defined(n)&&(a.severity=n),Zj.defined(r)&&(a.code=r),Zj.defined(i)&&(a.source=i),Zj.defined(o)&&(a.relatedInformation=o),a},rV.is=function(e){var t;let n=e;return Zj.defined(n)&&LG.is(n.range)&&Zj.string(n.message)&&(Zj.number(n.severity)||Zj.undefined(n.severity))&&(Zj.integer(n.code)||Zj.string(n.code)||Zj.undefined(n.code))&&(Zj.undefined(n.codeDescription)||Zj.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(Zj.string(n.source)||Zj.undefined(n.source))&&(Zj.undefined(n.relatedInformation)||Zj.typedArray(n.relatedInformation,XG.is))},(oV=iV||(iV={})).create=function(e,t,...n){let r={title:e,command:t};return Zj.defined(n)&&n.length>0&&(r.arguments=n),r},oV.is=function(e){let t=e;return Zj.defined(t)&&Zj.string(t.title)&&Zj.string(t.command)},(sV=aV||(aV={})).replace=function(e,t){return{range:e,newText:t}},sV.insert=function(e,t){return{range:{start:e,end:e},newText:t}},sV.del=function(e){return{range:e,newText:""}},sV.is=function(e){const t=e;return Zj.objectLiteral(t)&&Zj.string(t.newText)&&LG.is(t.range)},(uV=lV||(lV={})).create=function(e,t,n){const r={label:e};return void 0!==t&&(r.needsConfirmation=t),void 0!==n&&(r.description=n),r},uV.is=function(e){const t=e;return Zj.objectLiteral(t)&&Zj.string(t.label)&&(Zj.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(Zj.string(t.description)||void 0===t.description)},(cV||(cV={})).is=function(e){const t=e;return Zj.string(t)},(dV=hV||(hV={})).replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},dV.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},dV.del=function(e,t){return{range:e,newText:"",annotationId:t}},dV.is=function(e){const t=e;return aV.is(t)&&(lV.is(t.annotationId)||cV.is(t.annotationId))},(pV=fV||(fV={})).create=function(e,t){return{textDocument:e,edits:t}},pV.is=function(e){let t=e;return Zj.defined(t)&&AV.is(t.textDocument)&&Array.isArray(t.edits)},(mV=gV||(gV={})).create=function(e,t,n){let r={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},mV.is=function(e){let t=e;return t&&"create"===t.kind&&Zj.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||Zj.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Zj.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||cV.is(t.annotationId))},(yV=vV||(vV={})).create=function(e,t,n,r){let i={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(i.options=n),void 0!==r&&(i.annotationId=r),i},yV.is=function(e){let t=e;return t&&"rename"===t.kind&&Zj.string(t.oldUri)&&Zj.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||Zj.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Zj.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||cV.is(t.annotationId))},(xV=bV||(bV={})).create=function(e,t,n){let r={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},xV.is=function(e){let t=e;return t&&"delete"===t.kind&&Zj.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||Zj.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||Zj.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||cV.is(t.annotationId))},(wV||(wV={})).is=function(e){let t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every(e=>Zj.string(e.kind)?gV.is(e)||vV.is(e)||bV.is(e):fV.is(e)))},(TV=EV||(EV={})).create=function(e){return{uri:e}},TV.is=function(e){let t=e;return Zj.defined(t)&&Zj.string(t.uri)},(kV=_V||(_V={})).create=function(e,t){return{uri:e,version:t}},kV.is=function(e){let t=e;return Zj.defined(t)&&Zj.string(t.uri)&&Zj.integer(t.version)},(SV=AV||(AV={})).create=function(e,t){return{uri:e,version:t}},SV.is=function(e){let t=e;return Zj.defined(t)&&Zj.string(t.uri)&&(null===t.version||Zj.integer(t.version))},(MV=NV||(NV={})).create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},MV.is=function(e){let t=e;return Zj.defined(t)&&Zj.string(t.uri)&&Zj.string(t.languageId)&&Zj.integer(t.version)&&Zj.string(t.text)},(IV=CV||(CV={})).PlainText="plaintext",IV.Markdown="markdown",IV.is=function(e){const t=e;return t===IV.PlainText||t===IV.Markdown},(RV||(RV={})).is=function(e){const t=e;return Zj.objectLiteral(e)&&CV.is(t.kind)&&Zj.string(t.value)},(OV=LV||(LV={})).Text=1,OV.Method=2,OV.Function=3,OV.Constructor=4,OV.Field=5,OV.Variable=6,OV.Class=7,OV.Interface=8,OV.Module=9,OV.Property=10,OV.Unit=11,OV.Value=12,OV.Enum=13,OV.Keyword=14,OV.Snippet=15,OV.Color=16,OV.File=17,OV.Reference=18,OV.Folder=19,OV.EnumMember=20,OV.Constant=21,OV.Struct=22,OV.Event=23,OV.Operator=24,OV.TypeParameter=25,(PV=DV||(DV={})).PlainText=1,PV.Snippet=2,(BV||(BV={})).Deprecated=1,(zV=FV||(FV={})).create=function(e,t,n){return{newText:e,insert:t,replace:n}},zV.is=function(e){const t=e;return t&&Zj.string(t.newText)&&LG.is(t.insert)&&LG.is(t.replace)},(GV=UV||(UV={})).asIs=1,GV.adjustIndentation=2,(VV||(VV={})).is=function(e){const t=e;return t&&(Zj.string(t.detail)||void 0===t.detail)&&(Zj.string(t.description)||void 0===t.description)},(jV||(jV={})).create=function(e){return{label:e}},(HV||(HV={})).create=function(e,t){return{items:e||[],isIncomplete:!!t}},(YV=$V||($V={})).fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},YV.is=function(e){const t=e;return Zj.string(t)||Zj.objectLiteral(t)&&Zj.string(t.language)&&Zj.string(t.value)},(qV||(qV={})).is=function(e){let t=e;return!!t&&Zj.objectLiteral(t)&&(RV.is(t.contents)||$V.is(t.contents)||Zj.typedArray(t.contents,$V.is))&&(void 0===e.range||LG.is(e.range))},(WV||(WV={})).create=function(e,t){return t?{label:e,documentation:t}:{label:e}},(XV||(XV={})).create=function(e,t,...n){let r={label:e};return Zj.defined(t)&&(r.documentation=t),Zj.defined(n)?r.parameters=n:r.parameters=[],r},(ZV=KV||(KV={})).Text=1,ZV.Read=2,ZV.Write=3,(QV||(QV={})).create=function(e,t){let n={range:e};return Zj.number(t)&&(n.kind=t),n},(ej=JV||(JV={})).File=1,ej.Module=2,ej.Namespace=3,ej.Package=4,ej.Class=5,ej.Method=6,ej.Property=7,ej.Field=8,ej.Constructor=9,ej.Enum=10,ej.Interface=11,ej.Function=12,ej.Variable=13,ej.Constant=14,ej.String=15,ej.Number=16,ej.Boolean=17,ej.Array=18,ej.Object=19,ej.Key=20,ej.Null=21,ej.EnumMember=22,ej.Struct=23,ej.Event=24,ej.Operator=25,ej.TypeParameter=26,(tj||(tj={})).Deprecated=1,(nj||(nj={})).create=function(e,t,n,r,i){let o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o},(rj||(rj={})).create=function(e,t,n,r){return void 0!==r?{name:e,kind:t,location:{uri:n,range:r}}:{name:e,kind:t,location:{uri:n}}},(oj=ij||(ij={})).create=function(e,t,n,r,i,o){let a={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(a.children=o),a},oj.is=function(e){let t=e;return t&&Zj.string(t.name)&&Zj.number(t.kind)&&LG.is(t.range)&&LG.is(t.selectionRange)&&(void 0===t.detail||Zj.string(t.detail))&&(void 0===t.deprecated||Zj.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))},(sj=aj||(aj={})).Empty="",sj.QuickFix="quickfix",sj.Refactor="refactor",sj.RefactorExtract="refactor.extract",sj.RefactorInline="refactor.inline",sj.RefactorRewrite="refactor.rewrite",sj.Source="source",sj.SourceOrganizeImports="source.organizeImports",sj.SourceFixAll="source.fixAll",(uj=lj||(lj={})).Invoked=1,uj.Automatic=2,(hj=cj||(cj={})).create=function(e,t,n){let r={diagnostics:e};return null!=t&&(r.only=t),null!=n&&(r.triggerKind=n),r},hj.is=function(e){let t=e;return Zj.defined(t)&&Zj.typedArray(t.diagnostics,nV.is)&&(void 0===t.only||Zj.typedArray(t.only,Zj.string))&&(void 0===t.triggerKind||t.triggerKind===lj.Invoked||t.triggerKind===lj.Automatic)},(fj=dj||(dj={})).create=function(e,t,n){let r={title:e},i=!0;return"string"==typeof t?(i=!1,r.kind=t):iV.is(t)?r.command=t:r.edit=t,i&&void 0!==n&&(r.kind=n),r},fj.is=function(e){let t=e;return t&&Zj.string(t.title)&&(void 0===t.diagnostics||Zj.typedArray(t.diagnostics,nV.is))&&(void 0===t.kind||Zj.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||iV.is(t.command))&&(void 0===t.isPreferred||Zj.boolean(t.isPreferred))&&(void 0===t.edit||wV.is(t.edit))},(gj=pj||(pj={})).create=function(e,t){let n={range:e};return Zj.defined(t)&&(n.data=t),n},gj.is=function(e){let t=e;return Zj.defined(t)&&LG.is(t.range)&&(Zj.undefined(t.command)||iV.is(t.command))},(vj=mj||(mj={})).create=function(e,t){return{tabSize:e,insertSpaces:t}},vj.is=function(e){let t=e;return Zj.defined(t)&&Zj.uinteger(t.tabSize)&&Zj.boolean(t.insertSpaces)},(bj=yj||(yj={})).create=function(e,t,n){return{range:e,target:t,data:n}},bj.is=function(e){let t=e;return Zj.defined(t)&&LG.is(t.range)&&(Zj.undefined(t.target)||Zj.string(t.target))},(wj=xj||(xj={})).create=function(e,t){return{range:e,parent:t}},wj.is=function(e){let t=e;return Zj.objectLiteral(t)&&LG.is(t.range)&&(void 0===t.parent||wj.is(t.parent))},(Tj=Ej||(Ej={})).namespace="namespace",Tj.type="type",Tj.class="class",Tj.enum="enum",Tj.interface="interface",Tj.struct="struct",Tj.typeParameter="typeParameter",Tj.parameter="parameter",Tj.variable="variable",Tj.property="property",Tj.enumMember="enumMember",Tj.event="event",Tj.function="function",Tj.method="method",Tj.macro="macro",Tj.keyword="keyword",Tj.modifier="modifier",Tj.comment="comment",Tj.string="string",Tj.number="number",Tj.regexp="regexp",Tj.operator="operator",Tj.decorator="decorator",(kj=_j||(_j={})).declaration="declaration",kj.definition="definition",kj.readonly="readonly",kj.static="static",kj.deprecated="deprecated",kj.abstract="abstract",kj.async="async",kj.modification="modification",kj.documentation="documentation",kj.defaultLibrary="defaultLibrary",(Aj||(Aj={})).is=function(e){const t=e;return Zj.objectLiteral(t)&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])},(Nj=Sj||(Sj={})).create=function(e,t){return{range:e,text:t}},Nj.is=function(e){const t=e;return null!=t&&LG.is(t.range)&&Zj.string(t.text)},(Cj=Mj||(Mj={})).create=function(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}},Cj.is=function(e){const t=e;return null!=t&&LG.is(t.range)&&Zj.boolean(t.caseSensitiveLookup)&&(Zj.string(t.variableName)||void 0===t.variableName)},(Rj=Ij||(Ij={})).create=function(e,t){return{range:e,expression:t}},Rj.is=function(e){const t=e;return null!=t&&LG.is(t.range)&&(Zj.string(t.expression)||void 0===t.expression)},(Oj=Lj||(Lj={})).create=function(e,t){return{frameId:e,stoppedLocation:t}},Oj.is=function(e){const t=e;return Zj.defined(t)&&LG.is(e.stoppedLocation)},(Pj=Dj||(Dj={})).Type=1,Pj.Parameter=2,Pj.is=function(e){return 1===e||2===e},(Fj=Bj||(Bj={})).create=function(e){return{value:e}},Fj.is=function(e){const t=e;return Zj.objectLiteral(t)&&(void 0===t.tooltip||Zj.string(t.tooltip)||RV.is(t.tooltip))&&(void 0===t.location||DG.is(t.location))&&(void 0===t.command||iV.is(t.command))},(Uj=zj||(zj={})).create=function(e,t,n){const r={position:e,label:t};return void 0!==n&&(r.kind=n),r},Uj.is=function(e){const t=e;return Zj.objectLiteral(t)&&IG.is(t.position)&&(Zj.string(t.label)||Zj.typedArray(t.label,Bj.is))&&(void 0===t.kind||Dj.is(t.kind))&&void 0===t.textEdits||Zj.typedArray(t.textEdits,aV.is)&&(void 0===t.tooltip||Zj.string(t.tooltip)||RV.is(t.tooltip))&&(void 0===t.paddingLeft||Zj.boolean(t.paddingLeft))&&(void 0===t.paddingRight||Zj.boolean(t.paddingRight))},(Gj||(Gj={})).createSnippet=function(e){return{kind:"snippet",value:e}},(Vj||(Vj={})).create=function(e,t,n,r){return{insertText:e,filterText:t,range:n,command:r}},(jj||(jj={})).create=function(e){return{items:e}},($j=Hj||(Hj={})).Invoked=0,$j.Automatic=1,(Yj||(Yj={})).create=function(e,t){return{range:e,text:t}},(qj||(qj={})).create=function(e,t){return{triggerKind:e,selectedCompletionInfo:t}},(Wj||(Wj={})).is=function(e){const t=e;return Zj.objectLiteral(t)&&AG.is(t.uri)&&Zj.string(t.name)},function(e){function t(e,n){if(e.length<=1)return e;const r=e.length/2|0,i=e.slice(0,r),o=e.slice(r);t(i,n),t(o,n);let a=0,s=0,l=0;for(;a<i.length&&s<o.length;){let t=n(i[a],o[s]);e[l++]=t<=0?i[a++]:o[s++]}for(;a<i.length;)e[l++]=i[a++];for(;s<o.length;)e[l++]=o[s++];return e}e.create=function(e,t,n,r){return new Kj(e,t,n,r)},e.is=function(e){let t=e;return!!(Zj.defined(t)&&Zj.string(t.uri)&&(Zj.undefined(t.languageId)||Zj.string(t.languageId))&&Zj.uinteger(t.lineCount)&&Zj.func(t.getText)&&Zj.func(t.positionAt)&&Zj.func(t.offsetAt))},e.applyEdits=function(e,n){let r=e.getText(),i=t(n,(e,t)=>{let n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}),o=r.length;for(let t=i.length-1;t>=0;t--){let n=i[t],a=e.offsetAt(n.range.start),s=e.offsetAt(n.range.end);if(!(s<=o))throw new Error("Overlapping edit");r=r.substring(0,a)+n.newText+r.substring(s,r.length),o=a}return r}}(Xj||(Xj={}));let Kj=class{constructor(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0}getLineOffsets(){if(void 0===this._lineOffsets){let e=[],t=this._content,n=!0;for(let r=0;r<t.length;r++){n&&(e.push(r),n=!1);let i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return IG.create(0,e);for(;n<r;){let i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}let i=n-1;return IG.create(i,e-t[i])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)}get lineCount(){return this.getLineOffsets().length}};var Zj;!function(e){const t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,r){return"[object Number]"===t.call(e)&&n<=e&&e<=r},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(Zj||(Zj={}));class Qj{constructor(){this.nodeStack=[]}get current(){var e;return null!==(e=this.nodeStack[this.nodeStack.length-1])&&void 0!==e?e:this.rootNode}buildRootNode(e){return this.rootNode=new rH(e),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(e){const t=new tH;return t.grammarSource=e,t.root=this.rootNode,this.current.content.push(t),this.nodeStack.push(t),t}buildLeafNode(e,t){const n=new eH(e.startOffset,e.image.length,wD(e),e.tokenType,!t);return n.grammarSource=t,n.root=this.rootNode,this.current.content.push(n),n}removeNode(e){const t=e.container;if(t){const n=t.content.indexOf(e);n>=0&&t.content.splice(n,1)}}addHiddenNodes(e){const t=[];for(const i of e){const e=new eH(i.startOffset,i.image.length,wD(i),i.tokenType,!0);e.root=this.rootNode,t.push(e)}let n=this.current,r=!1;if(n.content.length>0)n.content.push(...t);else{for(;n.container;){const e=n.container.content.indexOf(n);if(e>0){n.container.content.splice(e,0,...t),r=!0;break}n=n.container}r||this.rootNode.content.unshift(...t)}}construct(e){const t=this.current;"string"==typeof e.$type&&(this.current.astNode=e),e.$cstNode=t;const n=this.nodeStack.pop();0===(null==n?void 0:n.content.length)&&this.removeNode(n)}}class Jj{get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var e,t;const n="string"==typeof(null===(e=this._astNode)||void 0===e?void 0:e.$type)?this._astNode:null===(t=this.container)||void 0===t?void 0:t.astNode;if(!n)throw new Error("This node has no associated AST element");return n}set astNode(e){this._astNode=e}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}}class eH extends Jj{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,t,n,r,i=!1){super(),this._hidden=i,this._offset=e,this._tokenType=r,this._length=t,this._range=n}}class tH extends Jj{constructor(){super(...arguments),this.content=new nH(this)}get children(){return this.content}get offset(){var e,t;return null!==(t=null===(e=this.firstNonHiddenNode)||void 0===e?void 0:e.offset)&&void 0!==t?t:0}get length(){return this.end-this.offset}get end(){var e,t;return null!==(t=null===(e=this.lastNonHiddenNode)||void 0===e?void 0:e.end)&&void 0!==t?t:0}get range(){const e=this.firstNonHiddenNode,t=this.lastNonHiddenNode;if(e&&t){if(void 0===this._rangeCache){const{range:n}=e,{range:r}=t;this._rangeCache={start:n.start,end:r.end.line<n.start.line?n.start:r.end}}return this._rangeCache}return{start:IG.create(0,0),end:IG.create(0,0)}}get firstNonHiddenNode(){for(const e of this.content)if(!e.hidden)return e;return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){const t=this.content[e];if(!t.hidden)return t}return this.content[this.content.length-1]}}class nH extends Array{constructor(e){super(),this.parent=e,Object.setPrototypeOf(this,nH.prototype)}push(...e){return this.addParents(e),super.push(...e)}unshift(...e){return this.addParents(e),super.unshift(...e)}splice(e,t,...n){return this.addParents(n),super.splice(e,t,...n)}addParents(e){for(const t of e)t.container=this.parent}}class rH extends tH{get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super(),this._text="",this._text=null!=e?e:""}}const iH=Symbol("Datatype");function oH(e){return e.$type===iH}const aH=e=>e.endsWith("​")?e:e+"​";class sH{constructor(e){this._unorderedGroups=new Map,this.allRules=new Map,this.lexer=e.parser.Lexer;const t=this.lexer.definition,n="production"===e.LanguageMetaData.mode;this.wrapper=new fH(t,Object.assign(Object.assign({},e.parser.ParserConfig),{skipValidations:n,errorMessageProvider:e.parser.ParserErrorMessageProvider}))}alternatives(e,t){this.wrapper.wrapOr(e,t)}optional(e,t){this.wrapper.wrapOption(e,t)}many(e,t){this.wrapper.wrapMany(e,t)}atLeastOne(e,t){this.wrapper.wrapAtLeastOne(e,t)}getRule(e){return this.allRules.get(e)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}}class lH extends sH{get current(){return this.stack[this.stack.length-1]}constructor(e){super(e),this.nodeBuilder=new Qj,this.stack=[],this.assignmentMap=new Map,this.linker=e.references.Linker,this.converter=e.parser.ValueConverter,this.astReflection=e.shared.AstReflection}rule(e,t){const n=this.computeRuleType(e),r=this.wrapper.DEFINE_RULE(aH(e.name),this.startImplementation(n,t).bind(this));return this.allRules.set(e.name,r),e.entry&&(this.mainRule=r),r}computeRuleType(e){if(!e.fragment){if(wB(e))return iH;{const t=TB(e);return null!=t?t:e.name}}}parse(e,t={}){this.nodeBuilder.buildRootNode(e);const n=this.lexerResult=this.lexer.tokenize(e);this.wrapper.input=n.tokens;const r=t.rule?this.allRules.get(t.rule):this.mainRule;if(!r)throw new Error(t.rule?`No rule found with name '${t.rule}'`:"No main rule available.");const i=r.call(this.wrapper,{});return this.nodeBuilder.addHiddenNodes(n.hidden),this.unorderedGroups.clear(),this.lexerResult=void 0,{value:i,lexerErrors:n.errors,lexerReport:n.report,parserErrors:this.wrapper.errors}}startImplementation(e,t){return n=>{const r=!this.isRecording()&&void 0!==e;if(r){const t={$type:e};this.stack.push(t),e===iH&&(t.value="")}let i;try{i=t(n)}catch(o){i=void 0}return void 0===i&&r&&(i=this.construct()),i}}extractHiddenTokens(e){const t=this.lexerResult.hidden;if(!t.length)return[];const n=e.startOffset;for(let r=0;r<t.length;r++){if(t[r].startOffset>n)return t.splice(0,r)}return t.splice(0,t.length)}consume(e,t,n){const r=this.wrapper.wrapConsume(e,t);if(!this.isRecording()&&this.isValidToken(r)){const e=this.extractHiddenTokens(r);this.nodeBuilder.addHiddenNodes(e);const t=this.nodeBuilder.buildLeafNode(r,n),{assignment:i,isCrossRef:o}=this.getAssignment(n),a=this.current;if(i){const e=TP(n)?r.image:this.converter.convert(r.image,t);this.assign(i.operator,i.feature,e,t,o)}else if(oH(a)){let e=r.image;TP(n)||(e=this.converter.convert(e,t).toString()),a.value+=e}}}isValidToken(e){return!e.isInsertedInRecovery&&!isNaN(e.startOffset)&&"number"==typeof e.endOffset&&!isNaN(e.endOffset)}subrule(e,t,n,r,i){let o;this.isRecording()||n||(o=this.nodeBuilder.buildCompositeNode(r));const a=this.wrapper.wrapSubrule(e,t,i);!this.isRecording()&&o&&o.length>0&&this.performSubruleAssignment(a,r,o)}performSubruleAssignment(e,t,n){const{assignment:r,isCrossRef:i}=this.getAssignment(t);if(r)this.assign(r.operator,r.feature,e,n,i);else if(!r){const t=this.current;if(oH(t))t.value+=e.toString();else if("object"==typeof e&&e){const n=this.assignWithoutOverride(e,t);this.stack.pop(),this.stack.push(n)}}}action(e,t){if(!this.isRecording()){let n=this.current;if(t.feature&&t.operator){n=this.construct(),this.nodeBuilder.removeNode(n.$cstNode);this.nodeBuilder.buildCompositeNode(t).content.push(n.$cstNode);const r={$type:e};this.stack.push(r),this.assign(t.operator,t.feature,n,n.$cstNode,!1)}else n.$type=e}}construct(){if(this.isRecording())return;const e=this.current;return function(e){for(const[t,n]of Object.entries(e))t.startsWith("$")||(Array.isArray(n)?n.forEach((n,r)=>{nD(n)&&(n.$container=e,n.$containerProperty=t,n.$containerIndex=r)}):nD(n)&&(n.$container=e,n.$containerProperty=t))}(e),this.nodeBuilder.construct(e),this.stack.pop(),oH(e)?this.converter.convert(e.value,e.$cstNode):(function(e,t){const n=e.getTypeMetaData(t.$type),r=t;for(const i of n.properties)void 0!==i.defaultValue&&void 0===r[i.name]&&(r[i.name]=$P(i.defaultValue))}(this.astReflection,e),e)}getAssignment(e){if(!this.assignmentMap.has(e)){const t=BP(e,gP);this.assignmentMap.set(e,{assignment:t,isCrossRef:!!t&&yP(t.terminal)})}return this.assignmentMap.get(e)}assign(e,t,n,r,i){const o=this.current;let a;switch(a=i&&"string"==typeof n?this.linker.buildReference(o,t,r,n):n,e){case"=":o[t]=a;break;case"?=":o[t]=!0;break;case"+=":Array.isArray(o[t])||(o[t]=[]),o[t].push(a)}}assignWithoutOverride(e,t){for(const[r,i]of Object.entries(t)){const t=e[r];void 0===t?e[r]=i:Array.isArray(t)&&Array.isArray(i)&&(i.push(...t),e[r]=i)}const n=e.$cstNode;return n&&(n.astNode=void 0,e.$cstNode=void 0),e}get definitionErrors(){return this.wrapper.definitionErrors}}class uH{buildMismatchTokenMessage(e){return sz.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return sz.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return sz.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return sz.buildEarlyExitMessage(e)}}class cH extends uH{buildMismatchTokenMessage({expected:e,actual:t}){return`Expecting ${e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`} but found \`${t.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}}class hH extends sH{constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(e){this.resetState();const t=this.lexer.tokenize(e,{mode:"partial"});return this.tokens=t.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,t){const n=this.wrapper.DEFINE_RULE(aH(e.name),this.startImplementation(t).bind(this));return this.allRules.set(e.name,n),e.entry&&(this.mainRule=n),n}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(e){return t=>{const n=this.keepStackSize();try{e(t)}finally{this.resetStackSize(n)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){const e=this.elementStack.length;return this.stackSize=e,e}resetStackSize(e){this.removeUnexpectedElements(),this.stackSize=e}consume(e,t,n){this.wrapper.wrapConsume(e,t),this.isRecording()||(this.lastElementStack=[...this.elementStack,n],this.nextTokenIndex=this.currIdx+1)}subrule(e,t,n,r,i){this.before(r),this.wrapper.wrapSubrule(e,t,i),this.after(r)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){const t=this.elementStack.lastIndexOf(e);t>=0&&this.elementStack.splice(t)}}get currIdx(){return this.wrapper.currIdx}}const dH={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new cH};class fH extends UU{constructor(e,t){const n=t&&"maxLookahead"in t;super(e,Object.assign(Object.assign(Object.assign({},dH),{lookaheadStrategy:n?new dU({maxLookahead:t.maxLookahead}):new hG({logging:t.skipValidations?()=>{}:void 0})}),t))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,t){return this.RULE(e,t)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,t){return this.consume(e,t)}wrapSubrule(e,t,n){return this.subrule(e,t,{ARGS:[n]})}wrapOr(e,t){this.or(e,t)}wrapOption(e,t){this.option(e,t)}wrapMany(e,t){this.many(e,t)}wrapAtLeastOne(e,t){this.atLeastOne(e,t)}}function pH(e,t,n){return function(e,t){const n=fB(t,!1),r=pD(t.rules).filter(QD).filter(e=>n.has(e));for(const i of r){const t=Object.assign(Object.assign({},e),{consume:1,optional:1,subrule:1,many:1,or:1});e.parser.rule(i,gH(t,i.definition))}}({parser:t,tokens:n,ruleNames:new Map},e),t}function gH(e,t,n=!1){let r;if(TP(t))r=function(e,t){const n=e.consume++,r=e.tokens[t.value];if(!r)throw new Error("Could not find token for keyword: "+t.value);return()=>e.parser.consume(n,r,t)}(e,t);else if(hP(t))r=function(e,t){const n=_B(t);return()=>e.parser.action(n,t)}(e,t);else if(gP(t))r=gH(e,t.terminal);else if(yP(t))r=yH(e,t);else if(SP(t))r=function(e,t){const n=t.rule.ref;if(QD(n)){const r=e.subrule++,i=n.fragment,o=t.arguments.length>0?function(e,t){const n=t.map(e=>mH(e.value));return t=>{const r={};for(let i=0;i<n.length;i++){const o=e.parameters[i],a=n[i];r[o.name]=a(t)}return r}}(n,t.arguments):()=>({});return a=>e.parser.subrule(r,xH(e,n),i,t,o(a))}if(oP(n)){const r=e.consume++,i=wH(e,n.name);return()=>e.parser.consume(r,i,t)}if(!n)throw new AD(t.$cstNode,`Undefined rule: ${t.rule.$refText}`);SD()}(e,t);else if(fP(t))r=function(e,t){if(1===t.elements.length)return gH(e,t.elements[0]);{const n=[];for(const i of t.elements){const t={ALT:gH(e,i,!0)},r=vH(i);r&&(t.GATE=mH(r)),n.push(t)}const r=e.or++;return t=>e.parser.alternatives(r,n.map(e=>{const n={ALT:()=>e.ALT(t)},r=e.GATE;return r&&(n.GATE=()=>r(t)),n}))}}(e,t);else if(RP(t))r=function(e,t){if(1===t.elements.length)return gH(e,t.elements[0]);const n=[];for(const s of t.elements){const t={ALT:gH(e,s,!0)},r=vH(s);r&&(t.GATE=mH(r)),n.push(t)}const r=e.or++,i=(e,t)=>`uGroup_${e}_${t.getRuleStack().join("-")}`,o=t=>e.parser.alternatives(r,n.map((n,o)=>{const a={ALT:()=>!0},s=e.parser;a.ALT=()=>{if(n.ALT(t),!s.isRecording()){const e=i(r,s);s.unorderedGroups.get(e)||s.unorderedGroups.set(e,[]);const t=s.unorderedGroups.get(e);void 0===(null==t?void 0:t[o])&&(t[o]=!0)}};const l=n.GATE;return a.GATE=l?()=>l(t):()=>{const e=s.unorderedGroups.get(i(r,s));return!(null==e?void 0:e[o])},a})),a=bH(e,vH(t),o,"*");return t=>{a(t),e.parser.isRecording()||e.parser.unorderedGroups.delete(i(r,e.parser))}}(e,t);else if(wP(t))r=function(e,t){const n=t.elements.map(t=>gH(e,t));return e=>n.forEach(t=>t(e))}(e,t);else{if(i=t,!PP.isInstance(i,bP))throw new AD(t.$cstNode,`Unexpected element type: ${t.$type}`);{const n=e.consume++;r=()=>e.parser.consume(n,iz,t)}}var i;return bH(e,n?void 0:vH(t),r,t.cardinality)}function mH(e){if(t=e,PP.isInstance(t,zD)){const t=mH(e.left),n=mH(e.right);return e=>t(e)||n(e)}if(function(e){return PP.isInstance(e,FD)}(e)){const t=mH(e.left),n=mH(e.right);return e=>t(e)&&n(e)}if(function(e){return PP.isInstance(e,qD)}(e)){const t=mH(e.value);return e=>!t(e)}if(function(e){return PP.isInstance(e,KD)}(e)){const t=e.parameter.ref.name;return e=>void 0!==e&&!0===e[t]}if(function(e){return PP.isInstance(e,BD)}(e)){const t=Boolean(e.true);return()=>t}var t;SD()}function vH(e){if(wP(e))return e.guardCondition}function yH(e,t,n=t.terminal){if(n){if(SP(n)&&QD(n.rule.ref)){const r=n.rule.ref,i=e.subrule++;return n=>e.parser.subrule(i,xH(e,r),!1,t,n)}if(SP(n)&&oP(n.rule.ref)){const r=e.consume++,i=wH(e,n.rule.ref.name);return()=>e.parser.consume(r,i,t)}if(TP(n)){const r=e.consume++,i=wH(e,n.value);return()=>e.parser.consume(r,i,t)}throw new Error("Could not build cross reference parser")}{if(!t.type.ref)throw new Error("Could not resolve reference to type: "+t.type.$refText);const n=bB(t.type.ref),r=null==n?void 0:n.terminal;if(!r)throw new Error("Could not find name assignment for type: "+_B(t.type.ref));return yH(e,t,r)}}function bH(e,t,n,r){const i=t&&mH(t);if(!r){if(i){const t=e.or++;return r=>e.parser.alternatives(t,[{ALT:()=>n(r),GATE:()=>i(r)},{ALT:FU(),GATE:()=>!i(r)}])}return n}if("*"===r){const t=e.many++;return r=>e.parser.many(t,{DEF:()=>n(r),GATE:i?()=>i(r):void 0})}if("+"===r){const t=e.many++;if(i){const r=e.or++;return o=>e.parser.alternatives(r,[{ALT:()=>e.parser.atLeastOne(t,{DEF:()=>n(o)}),GATE:()=>i(o)},{ALT:FU(),GATE:()=>!i(o)}])}return r=>e.parser.atLeastOne(t,{DEF:()=>n(r)})}if("?"===r){const t=e.optional++;return r=>e.parser.optional(t,{DEF:()=>n(r),GATE:i?()=>i(r):void 0})}SD()}function xH(e,t){const n=function(e,t){if(QD(t))return t.name;if(e.ruleNames.has(t))return e.ruleNames.get(t);{let n=t,r=n.$container,i=t.$type;for(;!QD(r);){if(wP(r)||fP(r)||RP(r)){i=r.elements.indexOf(n).toString()+":"+i}n=r,r=r.$container}return i=r.name+":"+i,e.ruleNames.set(t,i),i}}(e,t),r=e.parser.getRule(n);if(!r)throw new Error(`Rule "${n}" not found."`);return r}function wH(e,t){const n=e.tokens[t];if(!n)throw new Error(`Token "${t}" not found."`);return n}function EH(e){const t=function(e){const t=e.Grammar,n=e.parser.Lexer,r=new lH(e);return pH(t,r,n.definition)}(e);return t.finalize(),t}class TH{constructor(){this.diagnostics=[]}buildTokens(e,t){const n=pD(fB(e,!1)),r=this.buildTerminalTokens(n),i=this.buildKeywordTokens(n,r,t);return r.forEach(e=>{const t=e.PATTERN;"object"==typeof t&&t&&"test"in t&&cB(t)?i.unshift(e):i.push(e)}),i}flushLexingReport(e){return{diagnostics:this.popDiagnostics()}}popDiagnostics(){const e=[...this.diagnostics];return this.diagnostics=[],e}buildTerminalTokens(e){return e.filter(oP).filter(e=>!e.fragment).map(e=>this.buildTerminalToken(e)).toArray()}buildTerminalToken(e){const t=kB(e),n=this.requiresCustomPattern(t)?this.regexPatternFunction(t):t,r={name:e.name,PATTERN:n};return"function"==typeof n&&(r.LINE_BREAKS=!0),e.hidden&&(r.GROUP=cB(t)?$F.SKIPPED:"hidden"),r}requiresCustomPattern(e){return!(!e.flags.includes("u")&&!e.flags.includes("s"))||!(!e.source.includes("?<=")&&!e.source.includes("?<!"))}regexPatternFunction(e){const t=new RegExp(e,e.flags+"y");return(e,n)=>{t.lastIndex=n;return t.exec(e)}}buildKeywordTokens(e,t,n){return e.filter(QD).flatMap(e=>GP(e).filter(TP)).distinct(e=>e.value).toArray().sort((e,t)=>t.value.length-e.value.length).map(e=>this.buildKeywordToken(e,t,Boolean(null==n?void 0:n.caseInsensitive)))}buildKeywordToken(e,t,n){const r=this.buildKeywordPattern(e,n),i={name:e.value,PATTERN:r,LONGER_ALT:this.findLongerAlt(e,t)};return"function"==typeof r&&(i.LINE_BREAKS=!0),i}buildKeywordPattern(e,t){return t?new RegExp(function(e){return Array.prototype.map.call(e,e=>/\w/.test(e)?`[${e.toLowerCase()}${e.toUpperCase()}]`:hB(e)).join("")}(e.value)):e.value}findLongerAlt(e,t){return t.reduce((t,n)=>{const r=null==n?void 0:n.PATTERN;return(null==r?void 0:r.source)&&dB("^"+r.source+"$",e.value)&&t.push(n),t},[])}}class _H{convert(e,t){let n=t.grammarSource;if(yP(n)&&(n=function(e){if(e.terminal)return e.terminal;if(e.type.ref){const t=bB(e.type.ref);return null==t?void 0:t.terminal}}(n)),SP(n)){const r=n.rule.ref;if(!r)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(r,e,t)}return e}runConverter(e,t,n){var r;switch(e.name.toUpperCase()){case"INT":return kH.convertInt(t);case"STRING":return kH.convertString(t);case"ID":return kH.convertID(t)}switch(null===(r=function(e){var t,n,r;return oP(e)?null!==(n=null===(t=e.type)||void 0===t?void 0:t.name)&&void 0!==n?n:"string":null!==(r=TB(e))&&void 0!==r?r:e.name}(e))||void 0===r?void 0:r.toLowerCase()){case"number":return kH.convertNumber(t);case"boolean":return kH.convertBoolean(t);case"bigint":return kH.convertBigint(t);case"date":return kH.convertDate(t);default:return t}}}var kH;!function(e){function t(e){switch(e){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"0":return"\0";default:return e}}e.convertString=function(e){let n="";for(let r=1;r<e.length-1;r++){const i=e.charAt(r);if("\\"===i){n+=t(e.charAt(++r))}else n+=i}return n},e.convertID=function(e){return"^"===e.charAt(0)?e.substring(1):e},e.convertInt=function(e){return parseInt(e)},e.convertBigint=function(e){return BigInt(e)},e.convertDate=function(e){return new Date(e)},e.convertNumber=function(e){return Number(e)},e.convertBoolean=function(e){return"true"===e.toLowerCase()}}(kH||(kH={}));var AH,SH={},NH={};function MH(){if(AH)return NH;let e;function t(){if(void 0===e)throw new Error("No runtime abstraction layer installed");return e}return AH=1,Object.defineProperty(NH,"__esModule",{value:!0}),(t||(t={})).install=function(t){if(void 0===t)throw new Error("No runtime abstraction layer provided");e=t},NH.default=t,NH}var CH,IH={};var RH,LH,OH={};function DH(){if(RH)return OH;RH=1,Object.defineProperty(OH,"__esModule",{value:!0}),OH.Emitter=OH.Event=void 0;const e=MH();var t;!function(e){const t={dispose(){}};e.None=function(){return t}}(t||(OH.Event=t={}));class n{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];const n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=r.length;o<a;o++)try{n.push(r[o].apply(i[o],t))}catch(LY){(0,e.default)().console.error(LY)}return n}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,i)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const o={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),o.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(i)&&i.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}return OH.Emitter=r,r._noop=function(){},OH}var PH=function(){if(LH)return SH;LH=1,Object.defineProperty(SH,"__esModule",{value:!0}),SH.CancellationTokenSource=SH.CancellationToken=void 0;const e=MH(),t=function(){if(CH)return IH;function e(e){return"string"==typeof e||e instanceof String}function t(e){return Array.isArray(e)}return CH=1,Object.defineProperty(IH,"__esModule",{value:!0}),IH.stringArray=IH.array=IH.func=IH.error=IH.number=IH.string=IH.boolean=void 0,IH.boolean=function(e){return!0===e||!1===e},IH.string=e,IH.number=function(e){return"number"==typeof e||e instanceof Number},IH.error=function(e){return e instanceof Error},IH.func=function(e){return"function"==typeof e},IH.array=t,IH.stringArray=function(n){return t(n)&&n.every(t=>e(t))},IH}(),n=DH();var r,i;(i=r||(SH.CancellationToken=r={})).None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:n.Event.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:n.Event.None}),i.is=function(e){const n=e;return n&&(n===i.None||n===i.Cancelled||t.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)};const o=Object.freeze(function(t,n){const r=(0,e.default)().timer.setTimeout(t.bind(n),0);return{dispose(){r.dispose()}}});class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?o:(this._emitter||(this._emitter=new n.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}return SH.CancellationTokenSource=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=r.Cancelled}dispose(){this._token?this._token instanceof a&&this._token.dispose():this._token=r.None}},SH}();let BH=0;const FH=Symbol("OperationCancelled");function zH(e){return e===FH}async function UH(e){if(e===PH.CancellationToken.None)return;const t=performance.now();if(t-BH>=10&&(BH=t,await new Promise(e=>{"undefined"==typeof setImmediate?setTimeout(e,0):setImmediate(e)}),BH=performance.now()),e.isCancellationRequested)throw FH}class GH{constructor(){this.promise=new Promise((e,t)=>{this.resolve=t=>(e(t),this),this.reject=e=>(t(e),this)})}}class VH{constructor(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){const t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content}update(e,t){for(const n of e)if(VH.isIncremental(n)){const e=XH(n.range),t=this.offsetAt(e.start),r=this.offsetAt(e.end);this._content=this._content.substring(0,t)+n.text+this._content.substring(r,this._content.length);const i=Math.max(e.start.line,0),o=Math.max(e.end.line,0);let a=this._lineOffsets;const s=qH(n.text,!1,t);if(o-i===s.length)for(let n=0,u=s.length;n<u;n++)a[n+i+1]=s[n];else s.length<1e4?a.splice(i+1,o-i,...s):this._lineOffsets=a=a.slice(0,i+1).concat(s,a.slice(o+1));const l=n.text.length-(r-t);if(0!==l)for(let n=i+1+s.length,u=a.length;n<u;n++)a[n]=a[n]+l}else{if(!VH.isFull(n))throw new Error("Unknown change event received");this._content=n.text,this._lineOffsets=void 0}this._version=t}getLineOffsets(){return void 0===this._lineOffsets&&(this._lineOffsets=qH(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const t=this.getLineOffsets();let n=0,r=t.length;if(0===r)return{line:0,character:e};for(;n<r;){const i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}const i=n-1;return{line:i,character:(e=this.ensureBeforeEOL(e,t[i]))-t[i]}}offsetAt(e){const t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;const n=t[e.line];if(e.character<=0)return n;const r=e.line+1<t.length?t[e.line+1]:this._content.length,i=Math.min(n+e.character,r);return this.ensureBeforeEOL(i,n)}ensureBeforeEOL(e,t){for(;e>t&&WH(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){const t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)}static isFull(e){const t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength}}var jH,HH,$H;function YH(e,t){if(e.length<=1)return e;const n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);YH(r,t),YH(i,t);let o=0,a=0,s=0;for(;o<r.length&&a<i.length;){const n=t(r[o],i[a]);e[s++]=n<=0?r[o++]:i[a++]}for(;o<r.length;)e[s++]=r[o++];for(;a<i.length;)e[s++]=i[a++];return e}function qH(e,t,n=0){const r=t?[n]:[];for(let i=0;i<e.length;i++){const t=e.charCodeAt(i);WH(t)&&(13===t&&i+1<e.length&&10===e.charCodeAt(i+1)&&i++,r.push(n+i+1))}return r}function WH(e){return 13===e||10===e}function XH(e){const t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function KH(e){const t=XH(e.range);return t!==e.range?{newText:e.newText,range:t}:e}(HH=jH||(jH={})).create=function(e,t,n,r){return new VH(e,t,n,r)},HH.update=function(e,t,n){if(e instanceof VH)return e.update(t,n),e;throw new Error("TextDocument.update: document must be created by TextDocument.create")},HH.applyEdits=function(e,t){const n=e.getText(),r=YH(t.map(KH),(e,t)=>{const n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n});let i=0;const o=[];for(const a of r){const t=e.offsetAt(a.range.start);if(t<i)throw new Error("Overlapping edit");t>i&&o.push(n.substring(i,t)),a.newText.length&&o.push(a.newText),i=e.offsetAt(a.range.end)}return o.push(n.substr(i)),o.join("")},(()=>{var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,r="",i=0,o=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(o===s-1||1===a);else if(o!==s-1&&2===a){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){-1===l?(r="",i=0):i=(r=r.slice(0,l)).length-1-r.lastIndexOf("/"),o=s,a=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=s,a=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,s):r=e.slice(o+1,s),i=s-o-1;o=s,a=0}else 46===n&&-1!==a?++a:a=-1}return r}var r={resolve:function(){for(var e,r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a;o>=0?a=arguments[o]:(void 0===e&&(e=process.cwd()),a=e),t(a),0!==a.length&&(r=a+"/"+r,i=47===a.charCodeAt(0))}return r=n(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!r)).length||r||(e="."),e.length>0&&i&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var i=arguments[n];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":r.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=r.resolve(e))===(n=r.resolve(n)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var o=e.length,a=o-i,s=1;s<n.length&&47===n.charCodeAt(s);++s);for(var l=n.length-s,u=a<l?a:l,c=-1,h=0;h<=u;++h){if(h===u){if(l>u){if(47===n.charCodeAt(s+h))return n.slice(s+h+1);if(0===h)return n.slice(s+h)}else a>u&&(47===e.charCodeAt(i+h)?c=h:0===h&&(c=0));break}var d=e.charCodeAt(i+h);if(d!==n.charCodeAt(s+h))break;47===d&&(c=h)}var f="";for(h=i+c+1;h<=o;++h)h!==o&&47!==e.charCodeAt(h)||(0===f.length?f+="..":f+="/..");return f.length>0?f+n.slice(s+c):(s+=c,47===n.charCodeAt(s)&&++s,n.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),r=47===n,i=-1,o=!0,a=e.length-1;a>=1;--a)if(47===(n=e.charCodeAt(a))){if(!o){i=a;break}}else o=!1;return-1===i?r?"/":".":r&&1===i?"//":e.slice(0,i)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var r,i=0,o=-1,a=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var s=n.length-1,l=-1;for(r=e.length-1;r>=0;--r){var u=e.charCodeAt(r);if(47===u){if(!a){i=r+1;break}}else-1===l&&(a=!1,l=r+1),s>=0&&(u===n.charCodeAt(s)?-1==--s&&(o=r):(s=-1,o=l))}return i===o?o=l:-1===o&&(o=e.length),e.slice(i,o)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!a){i=r+1;break}}else-1===o&&(a=!1,o=r+1);return-1===o?"":e.slice(i,o)},extname:function(e){t(e);for(var n=-1,r=0,i=-1,o=!0,a=0,s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(47!==l)-1===i&&(o=!1,i=s+1),46===l?-1===n?n=s:1!==a&&(a=1):-1!==n&&(a=-1);else if(!o){r=s+1;break}}return-1===n||-1===i||0===a||1===a&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return n=(t=e).dir||t.root,r=t.base||(t.name||"")+(t.ext||""),n?n===t.root?n+r:n+"/"+r:r;var t,n,r},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var r,i=e.charCodeAt(0),o=47===i;o?(n.root="/",r=1):r=0;for(var a=-1,s=0,l=-1,u=!0,c=e.length-1,h=0;c>=r;--c)if(47!==(i=e.charCodeAt(c)))-1===l&&(u=!1,l=c+1),46===i?-1===a?a=c:1!==h&&(h=1):-1!==a&&(h=-1);else if(!u){s=c+1;break}return-1===a||-1===l||0===h||1===h&&a===l-1&&a===s+1?-1!==l&&(n.base=n.name=0===s&&o?e.slice(1,l):e.slice(s,l)):(0===s&&o?(n.name=e.slice(1,a),n.base=e.slice(1,l)):(n.name=e.slice(s,a),n.base=e.slice(s,l)),n.ext=e.slice(a,l)),s>0?n.dir=e.slice(0,s-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{let e;if(n.r(r),n.d(r,{URI:()=>c,Utils:()=>_}),"object"==typeof process)e="win32"===process.platform;else if("object"==typeof navigator){let t=navigator.userAgent;e=t.indexOf("Windows")>=0}const t=/^\w[\w\d+.-]*$/,i=/^\//,o=/^\/\//;function a(e,n){if(!e.scheme&&n)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!t.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!i.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(o.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}const s="",l="/",u=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class c{static isUri(e){return e instanceof c||!!e&&"string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"string"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString}scheme;authority;path;query;fragment;constructor(e,t,n,r,i,o=!1){"object"==typeof e?(this.scheme=e.scheme||s,this.authority=e.authority||s,this.path=e.path||s,this.query=e.query||s,this.fragment=e.fragment||s):(this.scheme=function(e,t){return e||t?e:"file"}(e,o),this.authority=t||s,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==l&&(t=l+t):t=l}return t}(this.scheme,n||s),this.query=r||s,this.fragment=i||s,a(this,o))}get fsPath(){return m(this)}with(e){if(!e)return this;let{scheme:t,authority:n,path:r,query:i,fragment:o}=e;return void 0===t?t=this.scheme:null===t&&(t=s),void 0===n?n=this.authority:null===n&&(n=s),void 0===r?r=this.path:null===r&&(r=s),void 0===i?i=this.query:null===i&&(i=s),void 0===o?o=this.fragment:null===o&&(o=s),t===this.scheme&&n===this.authority&&r===this.path&&i===this.query&&o===this.fragment?this:new d(t,n,r,i,o)}static parse(e,t=!1){const n=u.exec(e);return n?new d(n[2]||s,x(n[4]||s),x(n[5]||s),x(n[7]||s),x(n[9]||s),t):new d(s,s,s,s,s)}static file(t){let n=s;if(e&&(t=t.replace(/\\/g,l)),t[0]===l&&t[1]===l){const e=t.indexOf(l,2);-1===e?(n=t.substring(2),t=l):(n=t.substring(2,e),t=t.substring(e)||l)}return new d("file",n,t,s,s)}static from(e){const t=new d(e.scheme,e.authority,e.path,e.query,e.fragment);return a(t,!0),t}toString(e=!1){return v(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof c)return e;{const t=new d(e);return t._formatted=e.external,t._fsPath=e._sep===h?e.fsPath:null,t}}return e}}const h=e?1:void 0;class d extends c{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=m(this)),this._fsPath}toString(e=!1){return e?v(this,!0):(this._formatted||(this._formatted=v(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=h),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const f={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function p(e,t,n){let r,i=-1;for(let o=0;o<e.length;o++){const a=e.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||45===a||46===a||95===a||126===a||t&&47===a||n&&91===a||n&&93===a||n&&58===a)-1!==i&&(r+=encodeURIComponent(e.substring(i,o)),i=-1),void 0!==r&&(r+=e.charAt(o));else{void 0===r&&(r=e.substr(0,o));const t=f[a];void 0!==t?(-1!==i&&(r+=encodeURIComponent(e.substring(i,o)),i=-1),r+=t):-1===i&&(i=o)}}return-1!==i&&(r+=encodeURIComponent(e.substring(i))),void 0!==r?r:e}function g(e){let t;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);35===r||63===r?(void 0===t&&(t=e.substr(0,n)),t+=f[r]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function m(t,n){let r;return r=t.authority&&t.path.length>1&&"file"===t.scheme?`//${t.authority}${t.path}`:47===t.path.charCodeAt(0)&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&58===t.path.charCodeAt(2)?t.path[1].toLowerCase()+t.path.substr(2):t.path,e&&(r=r.replace(/\//g,"\\")),r}function v(e,t){const n=t?g:p;let r="",{scheme:i,authority:o,path:a,query:s,fragment:u}=e;if(i&&(r+=i,r+=":"),(o||"file"===i)&&(r+=l,r+=l),o){let e=o.indexOf("@");if(-1!==e){const t=o.substr(0,e);o=o.substr(e+1),e=t.lastIndexOf(":"),-1===e?r+=n(t,!1,!1):(r+=n(t.substr(0,e),!1,!1),r+=":",r+=n(t.substr(e+1),!1,!0)),r+="@"}o=o.toLowerCase(),e=o.lastIndexOf(":"),-1===e?r+=n(o,!1,!0):(r+=n(o.substr(0,e),!1,!0),r+=o.substr(e))}if(a){if(a.length>=3&&47===a.charCodeAt(0)&&58===a.charCodeAt(2)){const e=a.charCodeAt(1);e>=65&&e<=90&&(a=`/${String.fromCharCode(e+32)}:${a.substr(3)}`)}else if(a.length>=2&&58===a.charCodeAt(1)){const e=a.charCodeAt(0);e>=65&&e<=90&&(a=`${String.fromCharCode(e+32)}:${a.substr(2)}`)}r+=n(a,!0,!1)}return s&&(r+="?",r+=n(s,!1,!1)),u&&(r+="#",r+=t?u:p(u,!1,!1)),r}function y(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+y(e.substr(3)):e}}const b=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function x(e){return e.match(b)?e.replace(b,e=>y(e)):e}var w=n(470);const E=w.posix||w,T="/";var _,k;(k=_||(_={})).joinPath=function(e,...t){return e.with({path:E.join(e.path,...t)})},k.resolvePath=function(e,...t){let n=e.path,r=!1;n[0]!==T&&(n=T+n,r=!0);let i=E.resolve(n,...t);return r&&i[0]===T&&!e.authority&&(i=i.substring(1)),e.with({path:i})},k.dirname=function(e){if(0===e.path.length||e.path===T)return e;let t=E.dirname(e.path);return 1===t.length&&46===t.charCodeAt(0)&&(t=""),e.with({path:t})},k.basename=function(e){return E.basename(e.path)},k.extname=function(e){return E.extname(e.path)}})(),$H=r})();const{URI:ZH,Utils:QH}=$H;var JH,e$,t$,n$;(e$=JH||(JH={})).basename=QH.basename,e$.dirname=QH.dirname,e$.extname=QH.extname,e$.joinPath=QH.joinPath,e$.resolvePath=QH.resolvePath,e$.equals=function(e,t){return(null==e?void 0:e.toString())===(null==t?void 0:t.toString())},e$.relative=function(e,t){const n="string"==typeof e?e:e.path,r="string"==typeof t?t:t.path,i=n.split("/").filter(e=>e.length>0),o=r.split("/").filter(e=>e.length>0);let a=0;for(;a<i.length&&i[a]===o[a];a++);return"../".repeat(i.length-a)+o.slice(a).join("/")},e$.normalize=function(e){return ZH.parse(e.toString()).toString()},(n$=t$||(t$={}))[n$.Changed=0]="Changed",n$[n$.Parsed=1]="Parsed",n$[n$.IndexedContent=2]="IndexedContent",n$[n$.ComputedScopes=3]="ComputedScopes",n$[n$.Linked=4]="Linked",n$[n$.IndexedReferences=5]="IndexedReferences",n$[n$.Validated=6]="Validated";class r${constructor(e){this.serviceRegistry=e.ServiceRegistry,this.textDocuments=e.workspace.TextDocuments,this.fileSystemProvider=e.workspace.FileSystemProvider}async fromUri(e,t=PH.CancellationToken.None){const n=await this.fileSystemProvider.readFile(e);return this.createAsync(e,n,t)}fromTextDocument(e,t,n){return t=null!=t?t:ZH.parse(e.uri),PH.CancellationToken.is(n)?this.createAsync(t,e,n):this.create(t,e,n)}fromString(e,t,n){return PH.CancellationToken.is(n)?this.createAsync(t,e,n):this.create(t,e,n)}fromModel(e,t){return this.create(t,{$model:e})}create(e,t,n){if("string"==typeof t){const r=this.parse(e,t,n);return this.createLangiumDocument(r,e,void 0,t)}if("$model"in t){const n={value:t.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(n,e)}{const r=this.parse(e,t.getText(),n);return this.createLangiumDocument(r,e,t)}}async createAsync(e,t,n){if("string"==typeof t){const r=await this.parseAsync(e,t,n);return this.createLangiumDocument(r,e,void 0,t)}{const r=await this.parseAsync(e,t.getText(),n);return this.createLangiumDocument(r,e,t)}}createLangiumDocument(e,t,n,r){let i;if(n)i={parseResult:e,uri:t,state:t$.Parsed,references:[],textDocument:n};else{const n=this.createTextDocumentGetter(t,r);i={parseResult:e,uri:t,state:t$.Parsed,references:[],get textDocument(){return n()}}}return e.value.$document=i,i}async update(e,t){var n,r;const i=null===(n=e.parseResult.value.$cstNode)||void 0===n?void 0:n.root.fullText,o=null===(r=this.textDocuments)||void 0===r?void 0:r.get(e.uri.toString()),a=o?o.getText():await this.fileSystemProvider.readFile(e.uri);if(o)Object.defineProperty(e,"textDocument",{value:o});else{const t=this.createTextDocumentGetter(e.uri,a);Object.defineProperty(e,"textDocument",{get:t})}return i!==a&&(e.parseResult=await this.parseAsync(e.uri,a,t),e.parseResult.value.$document=e),e.state=t$.Parsed,e}parse(e,t,n){return this.serviceRegistry.getServices(e).parser.LangiumParser.parse(t,n)}parseAsync(e,t,n){return this.serviceRegistry.getServices(e).parser.AsyncParser.parse(t,n)}createTextDocumentGetter(e,t){const n=this.serviceRegistry;let r;return()=>null!=r?r:r=jH.create(e.toString(),n.getServices(e).LanguageMetaData.languageId,0,null!=t?t:"")}}class i${constructor(e){this.documentMap=new Map,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.serviceRegistry=e.ServiceRegistry}get all(){return pD(this.documentMap.values())}addDocument(e){const t=e.uri.toString();if(this.documentMap.has(t))throw new Error(`A document with the URI '${t}' is already present.`);this.documentMap.set(t,e)}getDocument(e){const t=e.toString();return this.documentMap.get(t)}async getOrCreateDocument(e,t){let n=this.getDocument(e);return n||(n=await this.langiumDocumentFactory.fromUri(e,t),this.addDocument(n),n)}createDocument(e,t,n){if(n)return this.langiumDocumentFactory.fromString(t,e,n).then(e=>(this.addDocument(e),e));{const n=this.langiumDocumentFactory.fromString(t,e);return this.addDocument(n),n}}hasDocument(e){return this.documentMap.has(e.toString())}invalidateDocument(e){const t=e.toString(),n=this.documentMap.get(t);if(n){this.serviceRegistry.getServices(e).references.Linker.unlink(n),n.state=t$.Changed,n.precomputedScopes=void 0,n.diagnostics=void 0}return n}deleteDocument(e){const t=e.toString(),n=this.documentMap.get(t);return n&&(n.state=t$.Changed,this.documentMap.delete(t)),n}}const o$=Symbol("ref_resolving");class a${constructor(e){this.reflection=e.shared.AstReflection,this.langiumDocuments=()=>e.shared.workspace.LangiumDocuments,this.scopeProvider=e.references.ScopeProvider,this.astNodeLocator=e.workspace.AstNodeLocator}async link(e,t=PH.CancellationToken.None){for(const n of VP(e.parseResult.value))await UH(t),HP(n).forEach(t=>this.doLink(t,e))}doLink(e,t){var n;const r=e.reference;if(void 0===r._ref){r._ref=o$;try{const t=this.getCandidate(e);if(iD(t))r._ref=t;else if(r._nodeDescription=t,this.langiumDocuments().hasDocument(t.documentUri)){const n=this.loadAstNode(t);r._ref=null!=n?n:this.createLinkingError(e,t)}else r._ref=void 0}catch(i){const t=null!==(n=i.message)&&void 0!==n?n:String(i);r._ref=Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${r.$refText}': ${t}`})}t.references.push(r)}}unlink(e){for(const t of e.references)delete t._ref,delete t._nodeDescription;e.references=[]}getCandidate(e){const t=this.scopeProvider.getScope(e).getElement(e.reference.$refText);return null!=t?t:this.createLinkingError(e)}buildReference(e,t,n,r){const i=this,o={$refNode:n,$refText:r,get ref(){var n,a;if(nD(this._ref))return this._ref;if("object"==typeof(a=this._nodeDescription)&&null!==a&&"string"==typeof a.name&&"string"==typeof a.type&&"string"==typeof a.path){const n=i.loadAstNode(this._nodeDescription);this._ref=null!=n?n:i.createLinkingError({reference:o,container:e,property:t},this._nodeDescription)}else if(void 0===this._ref){this._ref=o$;const r=zP(e).$document,a=i.getLinkedNode({reference:o,container:e,property:t});if(a.error&&r&&r.state<t$.ComputedScopes)return this._ref=void 0;this._ref=null!==(n=a.node)&&void 0!==n?n:a.error,this._nodeDescription=a.descr,null==r||r.references.push(this)}else if(this._ref===o$)throw new Error(`Cyclic reference resolution detected: ${i.astNodeLocator.getAstNodePath(e)}/${t} (symbol '${r}')`);return nD(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return iD(this._ref)?this._ref:void 0}};return o}getLinkedNode(e){var t;try{const t=this.getCandidate(e);if(iD(t))return{error:t};const n=this.loadAstNode(t);return n?{node:n,descr:t}:{descr:t,error:this.createLinkingError(e,t)}}catch(n){const r=null!==(t=n.message)&&void 0!==t?t:String(n);return{error:Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${e.reference.$refText}': ${r}`})}}}loadAstNode(e){if(e.node)return e.node;const t=this.langiumDocuments().getDocument(e.documentUri);return t?this.astNodeLocator.getAstNode(t.parseResult.value,e.path):void 0}createLinkingError(e,t){const n=zP(e.container).$document;n&&(n.state,t$.ComputedScopes);const r=this.reflection.getReferenceType(e);return Object.assign(Object.assign({},e),{message:`Could not resolve reference to ${r} named '${e.reference.$refText}'.`,targetDescription:t})}}class s${getName(e){if(function(e){return"string"==typeof e.name}(e))return e.name}getNameNode(e){return mB(e.$cstNode,"name")}}class l${constructor(e){this.nameProvider=e.references.NameProvider,this.index=e.shared.workspace.IndexManager,this.nodeLocator=e.workspace.AstNodeLocator}findDeclaration(e){if(e){const t=function(e){var t;const n=e.astNode;for(;n===(null===(t=e.container)||void 0===t?void 0:t.astNode);){const t=BP(e.grammarSource,gP);if(t)return t;e=e.container}}(e),n=e.astNode;if(t&&n){const r=n[t.feature];if(rD(r))return r.ref;if(Array.isArray(r))for(const t of r)if(rD(t)&&t.$refNode&&t.$refNode.offset<=e.offset&&t.$refNode.end>=e.end)return t.ref}if(n){const t=this.nameProvider.getNameNode(n);if(t&&(t===e||function(e,t){for(;e.container;)if((e=e.container)===t)return!0;return!1}(e,t)))return n}}}findDeclarationNode(e){const t=this.findDeclaration(e);if(null==t?void 0:t.$cstNode){const e=this.nameProvider.getNameNode(t);return null!=e?e:t.$cstNode}}findReferences(e,t){const n=[];if(t.includeDeclaration){const t=this.getReferenceToSelf(e);t&&n.push(t)}let r=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));return t.documentUri&&(r=r.filter(e=>JH.equals(e.sourceUri,t.documentUri))),n.push(...r),pD(n)}getReferenceToSelf(e){const t=this.nameProvider.getNameNode(e);if(t){const n=FP(e),r=this.nodeLocator.getAstNodePath(e);return{sourceUri:n.uri,sourcePath:r,targetUri:n.uri,targetPath:r,segment:ED(t),local:!0}}}}class u${constructor(e){if(this.map=new Map,e)for(const[t,n]of e)this.add(t,n)}get size(){return mD.sum(pD(this.map.values()).map(e=>e.length))}clear(){this.map.clear()}delete(e,t){if(void 0===t)return this.map.delete(e);{const n=this.map.get(e);if(n){const r=n.indexOf(t);if(r>=0)return 1===n.length?this.map.delete(e):n.splice(r,1),!0}return!1}}get(e){var t;return null!==(t=this.map.get(e))&&void 0!==t?t:[]}has(e,t){if(void 0===t)return this.map.has(e);{const n=this.map.get(e);return!!n&&n.indexOf(t)>=0}}add(e,t){return this.map.has(e)?this.map.get(e).push(t):this.map.set(e,[t]),this}addAll(e,t){return this.map.has(e)?this.map.get(e).push(...t):this.map.set(e,Array.from(t)),this}forEach(e){this.map.forEach((t,n)=>t.forEach(t=>e(t,n,this)))}[Symbol.iterator](){return this.entries().iterator()}entries(){return pD(this.map.entries()).flatMap(([e,t])=>t.map(t=>[e,t]))}keys(){return pD(this.map.keys())}values(){return pD(this.map.values()).flat()}entriesGroupedByKey(){return pD(this.map.entries())}}class c${get size(){return this.map.size}constructor(e){if(this.map=new Map,this.inverse=new Map,e)for(const[t,n]of e)this.set(t,n)}clear(){this.map.clear(),this.inverse.clear()}set(e,t){return this.map.set(e,t),this.inverse.set(t,e),this}get(e){return this.map.get(e)}getKey(e){return this.inverse.get(e)}delete(e){const t=this.map.get(e);return void 0!==t&&(this.map.delete(e),this.inverse.delete(t),!0)}}class h${constructor(e){this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider}async computeExports(e,t=PH.CancellationToken.None){return this.computeExportsForNode(e.parseResult.value,e,void 0,t)}async computeExportsForNode(e,t,n=UP,r=PH.CancellationToken.None){const i=[];this.exportNode(e,i,t);for(const o of n(e))await UH(r),this.exportNode(o,i,t);return i}exportNode(e,t,n){const r=this.nameProvider.getName(e);r&&t.push(this.descriptions.createDescription(e,r,n))}async computeLocalScopes(e,t=PH.CancellationToken.None){const n=e.parseResult.value,r=new u$;for(const i of GP(n))await UH(t),this.processNode(i,e,r);return r}processNode(e,t,n){const r=e.$container;if(r){const i=this.nameProvider.getName(e);i&&n.add(r,this.descriptions.createDescription(e,i,t))}}}class d${constructor(e,t,n){var r;this.elements=e,this.outerScope=t,this.caseInsensitive=null!==(r=null==n?void 0:n.caseInsensitive)&&void 0!==r&&r}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(e){const t=this.caseInsensitive?this.elements.find(t=>t.name.toLowerCase()===e.toLowerCase()):this.elements.find(t=>t.name===e);return t||(this.outerScope?this.outerScope.getElement(e):void 0)}}class f${constructor(e,t,n){var r;this.elements=new Map,this.caseInsensitive=null!==(r=null==n?void 0:n.caseInsensitive)&&void 0!==r&&r;for(const i of e){const e=this.caseInsensitive?i.name.toLowerCase():i.name;this.elements.set(e,i)}this.outerScope=t}getElement(e){const t=this.caseInsensitive?e.toLowerCase():e,n=this.elements.get(t);return n||(this.outerScope?this.outerScope.getElement(e):void 0)}getAllElements(){let e=pD(this.elements.values());return this.outerScope&&(e=e.concat(this.outerScope.getAllElements())),e}}class p${constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach(e=>e.dispose())}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}}class g$ extends p${constructor(){super(...arguments),this.cache=new Map}has(e){return this.throwIfDisposed(),this.cache.has(e)}set(e,t){this.throwIfDisposed(),this.cache.set(e,t)}get(e,t){if(this.throwIfDisposed(),this.cache.has(e))return this.cache.get(e);if(t){const n=t();return this.cache.set(e,n),n}}delete(e){return this.throwIfDisposed(),this.cache.delete(e)}clear(){this.throwIfDisposed(),this.cache.clear()}}class m$ extends p${constructor(e){super(),this.cache=new Map,this.converter=null!=e?e:e=>e}has(e,t){return this.throwIfDisposed(),this.cacheForContext(e).has(t)}set(e,t,n){this.throwIfDisposed(),this.cacheForContext(e).set(t,n)}get(e,t,n){this.throwIfDisposed();const r=this.cacheForContext(e);if(r.has(t))return r.get(t);if(n){const e=n();return r.set(t,e),e}}delete(e,t){return this.throwIfDisposed(),this.cacheForContext(e).delete(t)}clear(e){if(this.throwIfDisposed(),e){const t=this.converter(e);this.cache.delete(t)}else this.cache.clear()}cacheForContext(e){const t=this.converter(e);let n=this.cache.get(t);return n||(n=new Map,this.cache.set(t,n)),n}}class v$ extends g${constructor(e,t){super(),t?(this.toDispose.push(e.workspace.DocumentBuilder.onBuildPhase(t,()=>{this.clear()})),this.toDispose.push(e.workspace.DocumentBuilder.onUpdate((e,t)=>{t.length>0&&this.clear()}))):this.toDispose.push(e.workspace.DocumentBuilder.onUpdate(()=>{this.clear()}))}}class y${constructor(e){this.reflection=e.shared.AstReflection,this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider,this.indexManager=e.shared.workspace.IndexManager,this.globalScopeCache=new v$(e.shared)}getScope(e){const t=[],n=this.reflection.getReferenceType(e),r=FP(e.container).precomputedScopes;if(r){let i=e.container;do{const e=r.get(i);e.length>0&&t.push(pD(e).filter(e=>this.reflection.isSubtype(e.type,n))),i=i.$container}while(i)}let i=this.getGlobalScope(n,e);for(let o=t.length-1;o>=0;o--)i=this.createScope(t[o],i);return i}createScope(e,t,n){return new d$(pD(e),t,n)}createScopeForNodes(e,t,n){const r=pD(e).map(e=>{const t=this.nameProvider.getName(e);if(t)return this.descriptions.createDescription(e,t)}).nonNullable();return new d$(r,t,n)}getGlobalScope(e,t){return this.globalScopeCache.get(e,()=>new f$(this.indexManager.allElements(e)))}}function b$(e){return"object"==typeof e&&!!e&&("$ref"in e||"$error"in e)}class x${constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=e.shared.workspace.LangiumDocuments,this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider,this.commentProvider=e.documentation.CommentProvider}serialize(e,t){const n=null!=t?t:{},r=null==t?void 0:t.replacer,i=(e,t)=>this.replacer(e,t,n),o=r?(e,t)=>r(e,t,i):i;try{return this.currentDocument=FP(e),JSON.stringify(e,o,null==t?void 0:t.space)}finally{this.currentDocument=void 0}}deserialize(e,t){const n=null!=t?t:{},r=JSON.parse(e);return this.linkNode(r,r,n),r}replacer(e,t,{refText:n,sourceText:r,textRegions:i,comments:o,uriConverter:a}){var s,l,u,c;if(!this.ignoreProperties.has(e)){if(rD(t)){const e=t.ref,r=n?t.$refText:void 0;if(e){const n=FP(e);let i="";this.currentDocument&&this.currentDocument!==n&&(i=a?a(n.uri,t):n.uri.toString());return{$ref:`${i}#${this.astNodeLocator.getAstNodePath(e)}`,$refText:r}}return{$error:null!==(l=null===(s=t.error)||void 0===s?void 0:s.message)&&void 0!==l?l:"Could not resolve reference",$refText:r}}if(nD(t)){let n;if(i&&(n=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},t)),e&&!t.$document||!(null==n?void 0:n.$textRegion)||(n.$textRegion.documentURI=null===(u=this.currentDocument)||void 0===u?void 0:u.uri.toString())),r&&!e&&(null!=n||(n=Object.assign({},t)),n.$sourceText=null===(c=t.$cstNode)||void 0===c?void 0:c.text),o){null!=n||(n=Object.assign({},t));const e=this.commentProvider.getComment(t);e&&(n.$comment=e.replace(/\r/g,""))}return null!=n?n:t}return t}}addAstNodeRegionWithAssignmentsTo(e){const t=e=>({offset:e.offset,end:e.end,length:e.length,range:e.range});if(e.$cstNode){const n=(e.$textRegion=t(e.$cstNode)).assignments={};return Object.keys(e).filter(e=>!e.startsWith("$")).forEach(r=>{const i=function(e,t){return e&&t?vB(e,t,e.astNode,!0):[]}(e.$cstNode,r).map(t);0!==i.length&&(n[r]=i)}),e}}linkNode(e,t,n,r,i,o){for(const[s,l]of Object.entries(e))if(Array.isArray(l))for(let r=0;r<l.length;r++){const i=l[r];b$(i)?l[r]=this.reviveReference(e,s,t,i,n):nD(i)&&this.linkNode(i,t,n,e,s,r)}else b$(l)?e[s]=this.reviveReference(e,s,t,l,n):nD(l)&&this.linkNode(l,t,n,e,s);const a=e;a.$container=r,a.$containerProperty=i,a.$containerIndex=o}reviveReference(e,t,n,r,i){let o=r.$refText,a=r.$error;if(r.$ref){const e=this.getRefNode(n,r.$ref,i.uriConverter);if(nD(e))return o||(o=this.nameProvider.getName(e)),{$refText:null!=o?o:"",ref:e};a=e}if(a){const n={$refText:null!=o?o:""};return n.error={container:e,property:t,message:a,reference:n},n}}getRefNode(e,t,n){try{const r=t.indexOf("#");if(0===r){const n=this.astNodeLocator.getAstNode(e,t.substring(1));return n||"Could not resolve path: "+t}if(r<0){const e=n?n(t):ZH.parse(t),r=this.langiumDocuments.getDocument(e);return r?r.parseResult.value:"Could not find document for URI: "+t}const i=n?n(t.substring(0,r)):ZH.parse(t.substring(0,r)),o=this.langiumDocuments.getDocument(i);if(!o)return"Could not find document for URI: "+t;if(r===t.length-1)return o.parseResult.value;const a=this.astNodeLocator.getAstNode(o.parseResult.value,t.substring(r+1));return a||"Could not resolve URI: "+t}catch(r){return String(r)}}}class w${get map(){return this.fileExtensionMap}constructor(e){this.languageIdMap=new Map,this.fileExtensionMap=new Map,this.textDocuments=null==e?void 0:e.workspace.TextDocuments}register(e){const t=e.LanguageMetaData;for(const n of t.fileExtensions)this.fileExtensionMap.has(n),this.fileExtensionMap.set(n,e);this.languageIdMap.set(t.languageId,e),1===this.languageIdMap.size?this.singleton=e:this.singleton=void 0}getServices(e){var t,n;if(void 0!==this.singleton)return this.singleton;if(0===this.languageIdMap.size)throw new Error("The service registry is empty. Use `register` to register the services of a language.");const r=null===(n=null===(t=this.textDocuments)||void 0===t?void 0:t.get(e))||void 0===n?void 0:n.languageId;if(void 0!==r){const e=this.languageIdMap.get(r);if(e)return e}const i=JH.extname(e),o=this.fileExtensionMap.get(i);if(!o)throw r?new Error(`The service registry contains no services for the extension '${i}' for language '${r}'.`):new Error(`The service registry contains no services for the extension '${i}'.`);return o}hasServices(e){try{return this.getServices(e),!0}catch(t){return!1}}get all(){return Array.from(this.languageIdMap.values())}}function E$(e){return{code:e}}var T$,_$,k$;(T$||(T$={})).all=["fast","slow","built-in"];class A${constructor(e){this.entries=new u$,this.entriesBefore=[],this.entriesAfter=[],this.reflection=e.shared.AstReflection}register(e,t=this,n="fast"){if("built-in"===n)throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");for(const[r,i]of Object.entries(e)){const e=i;if(Array.isArray(e))for(const i of e){const e={check:this.wrapValidationException(i,t),category:n};this.addEntry(r,e)}else if("function"==typeof e){const i={check:this.wrapValidationException(e,t),category:n};this.addEntry(r,i)}else SD()}}wrapValidationException(e,t){return async(n,r,i)=>{await this.handleException(()=>e.call(t,n,r,i),"An error occurred during validation",r,n)}}async handleException(e,t,n,r){try{await e()}catch(i){if(zH(i))throw i;i instanceof Error&&i.stack;n("error",`${t}: ${i instanceof Error?i.message:String(i)}`,{node:r})}}addEntry(e,t){if("AstNode"!==e)for(const n of this.reflection.getAllSubTypes(e))this.entries.add(n,t);else this.entries.add("AstNode",t)}getChecks(e,t){let n=pD(this.entries.get(e)).concat(this.entries.get("AstNode"));return t&&(n=n.filter(e=>t.includes(e.category))),n.map(e=>e.check)}registerBeforeDocument(e,t=this){this.entriesBefore.push(this.wrapPreparationException(e,"An error occurred during set-up of the validation",t))}registerAfterDocument(e,t=this){this.entriesAfter.push(this.wrapPreparationException(e,"An error occurred during tear-down of the validation",t))}wrapPreparationException(e,t,n){return async(r,i,o,a)=>{await this.handleException(()=>e.call(n,r,i,o,a),t,i,r)}}get checksBefore(){return this.entriesBefore}get checksAfter(){return this.entriesAfter}}class S${constructor(e){this.validationRegistry=e.validation.ValidationRegistry,this.metadata=e.LanguageMetaData}async validateDocument(e,t={},n=PH.CancellationToken.None){const r=e.parseResult,i=[];if(await UH(n),!t.categories||t.categories.includes("built-in")){if(this.processLexingErrors(r,i,t),t.stopAfterLexingErrors&&i.some(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.code)===_$.LexingError}))return i;if(this.processParsingErrors(r,i,t),t.stopAfterParsingErrors&&i.some(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.code)===_$.ParsingError}))return i;if(this.processLinkingErrors(e,i,t),t.stopAfterLinkingErrors&&i.some(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.code)===_$.LinkingError}))return i}try{i.push(...await this.validateAst(r.value,t,n))}catch(o){if(zH(o))throw o}return await UH(n),i}processLexingErrors(e,t,n){var r,i,o;const a=[...e.lexerErrors,...null!==(i=null===(r=e.lexerReport)||void 0===r?void 0:r.diagnostics)&&void 0!==i?i:[]];for(const s of a){const e=null!==(o=s.severity)&&void 0!==o?o:"error",n={severity:M$(e),range:{start:{line:s.line-1,character:s.column-1},end:{line:s.line-1,character:s.column+s.length-1}},message:s.message,data:C$(e),source:this.getSource()};t.push(n)}}processParsingErrors(e,t,n){for(const r of e.parserErrors){let e;if(isNaN(r.token.startOffset)){if("previousToken"in r){const t=r.previousToken;if(isNaN(t.startOffset)){const t={line:0,character:0};e={start:t,end:t}}else{const n={line:t.endLine-1,character:t.endColumn};e={start:n,end:n}}}}else e=wD(r.token);if(e){const n={severity:M$("error"),range:e,message:r.message,data:E$(_$.ParsingError),source:this.getSource()};t.push(n)}}}processLinkingErrors(e,t,n){for(const r of e.references){const e=r.error;if(e){const n={node:e.container,property:e.property,index:e.index,data:{code:_$.LinkingError,containerType:e.container.$type,property:e.property,refText:e.reference.$refText}};t.push(this.toDiagnostic("error",e.message,n))}}}async validateAst(e,t,n=PH.CancellationToken.None){const r=[],i=(e,t,n)=>{r.push(this.toDiagnostic(e,t,n))};return await this.validateAstBefore(e,t,i,n),await this.validateAstNodes(e,t,i,n),await this.validateAstAfter(e,t,i,n),r}async validateAstBefore(e,t,n,r=PH.CancellationToken.None){var i;const o=this.validationRegistry.checksBefore;for(const a of o)await UH(r),await a(e,n,null!==(i=t.categories)&&void 0!==i?i:[],r)}async validateAstNodes(e,t,n,r=PH.CancellationToken.None){await Promise.all(VP(e).map(async e=>{await UH(r);const i=this.validationRegistry.getChecks(e.$type,t.categories);for(const t of i)await t(e,n,r)}))}async validateAstAfter(e,t,n,r=PH.CancellationToken.None){var i;const o=this.validationRegistry.checksAfter;for(const a of o)await UH(r),await a(e,n,null!==(i=t.categories)&&void 0!==i?i:[],r)}toDiagnostic(e,t,n){return{message:t,range:N$(n),severity:M$(e),code:n.code,codeDescription:n.codeDescription,tags:n.tags,relatedInformation:n.relatedInformation,data:n.data,source:this.getSource()}}getSource(){return this.metadata.languageId}}function N$(e){if(e.range)return e.range;let t;return"string"==typeof e.property?t=mB(e.node.$cstNode,e.property,e.index):"string"==typeof e.keyword&&(t=yB(e.node.$cstNode,e.keyword,e.index)),null!=t||(t=e.node.$cstNode),t?t.range:{start:{line:0,character:0},end:{line:0,character:0}}}function M$(e){switch(e){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+e)}}function C$(e){switch(e){case"error":return E$(_$.LexingError);case"warning":return E$(_$.LexingWarning);case"info":return E$(_$.LexingInfo);case"hint":return E$(_$.LexingHint);default:throw new Error("Invalid diagnostic severity: "+e)}}(k$=_$||(_$={})).LexingError="lexing-error",k$.LexingWarning="lexing-warning",k$.LexingInfo="lexing-info",k$.LexingHint="lexing-hint",k$.ParsingError="parsing-error",k$.LinkingError="linking-error";class I${constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider}createDescription(e,t,n){const r=null!=n?n:FP(e);null!=t||(t=this.nameProvider.getName(e));const i=this.astNodeLocator.getAstNodePath(e);if(!t)throw new Error(`Node at path ${i} has no name.`);let o;const a=()=>{var t;return null!=o?o:o=ED(null!==(t=this.nameProvider.getNameNode(e))&&void 0!==t?t:e.$cstNode)};return{node:e,name:t,get nameSegment(){return a()},selectionSegment:ED(e.$cstNode),type:e.$type,documentUri:r.uri,path:i}}}class R${constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}async createDescriptions(e,t=PH.CancellationToken.None){const n=[],r=e.parseResult.value;for(const i of VP(r))await UH(t),HP(i).filter(e=>!iD(e)).forEach(e=>{const t=this.createDescription(e);t&&n.push(t)});return n}createDescription(e){const t=e.reference.$nodeDescription,n=e.reference.$refNode;if(!t||!n)return;const r=FP(e.container).uri;return{sourceUri:r,sourcePath:this.nodeLocator.getAstNodePath(e.container),targetUri:t.documentUri,targetPath:t.path,segment:ED(n),local:JH.equals(t.documentUri,r)}}}class L${constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(e){if(e.$container){const t=this.getAstNodePath(e.$container),n=this.getPathSegment(e);return t+this.segmentSeparator+n}return""}getPathSegment({$containerProperty:e,$containerIndex:t}){if(!e)throw new Error("Missing '$containerProperty' in AST node.");return void 0!==t?e+this.indexSeparator+t:e}getAstNode(e,t){return t.split(this.segmentSeparator).reduce((e,t)=>{if(!e||0===t.length)return e;const n=t.indexOf(this.indexSeparator);if(n>0){const r=t.substring(0,n),i=parseInt(t.substring(n+1)),o=e[r];return null==o?void 0:o[i]}return e[t]},e)}}var O$,D$=DH();class P${constructor(e){this._ready=new GH,this.settings={},this.workspaceConfig=!1,this.onConfigurationSectionUpdateEmitter=new D$.Emitter,this.serviceRegistry=e.ServiceRegistry}get ready(){return this._ready.promise}initialize(e){var t,n;this.workspaceConfig=null!==(n=null===(t=e.capabilities.workspace)||void 0===t?void 0:t.configuration)&&void 0!==n&&n}async initialized(e){if(this.workspaceConfig){if(e.register){const t=this.serviceRegistry.all;e.register({section:t.map(e=>this.toSectionName(e.LanguageMetaData.languageId))})}if(e.fetchConfiguration){const t=this.serviceRegistry.all.map(e=>({section:this.toSectionName(e.LanguageMetaData.languageId)})),n=await e.fetchConfiguration(t);t.forEach((e,t)=>{this.updateSectionConfiguration(e.section,n[t])})}}this._ready.resolve()}updateConfiguration(e){e.settings&&Object.keys(e.settings).forEach(t=>{const n=e.settings[t];this.updateSectionConfiguration(t,n),this.onConfigurationSectionUpdateEmitter.fire({section:t,configuration:n})})}updateSectionConfiguration(e,t){this.settings[e]=t}async getConfiguration(e,t){await this.ready;const n=this.toSectionName(e);if(this.settings[n])return this.settings[n][t]}toSectionName(e){return`${e}`}get onConfigurationSectionUpdate(){return this.onConfigurationSectionUpdateEmitter.event}}(O$||(O$={})).create=function(e){return{dispose:async()=>await e()}};class B${constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new u$,this.documentPhaseListeners=new u$,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=t$.Changed,this.langiumDocuments=e.workspace.LangiumDocuments,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.textDocuments=e.workspace.TextDocuments,this.indexManager=e.workspace.IndexManager,this.serviceRegistry=e.ServiceRegistry}async build(e,t={},n=PH.CancellationToken.None){var r,i;for(const o of e){const e=o.uri.toString();if(o.state===t$.Validated){if("boolean"==typeof t.validation&&t.validation)o.state=t$.IndexedReferences,o.diagnostics=void 0,this.buildState.delete(e);else if("object"==typeof t.validation){const n=this.buildState.get(e),a=null===(r=null==n?void 0:n.result)||void 0===r?void 0:r.validationChecks;if(a){const r=(null!==(i=t.validation.categories)&&void 0!==i?i:T$.all).filter(e=>!a.includes(e));r.length>0&&(this.buildState.set(e,{completed:!1,options:{validation:Object.assign(Object.assign({},t.validation),{categories:r})},result:n.result}),o.state=t$.IndexedReferences)}}}else this.buildState.delete(e)}this.currentState=t$.Changed,await this.emitUpdate(e.map(e=>e.uri),[]),await this.buildDocuments(e,t,n)}async update(e,t,n=PH.CancellationToken.None){this.currentState=t$.Changed;for(const o of t)this.langiumDocuments.deleteDocument(o),this.buildState.delete(o.toString()),this.indexManager.remove(o);for(const o of e){if(!this.langiumDocuments.invalidateDocument(o)){const e=this.langiumDocumentFactory.fromModel({$type:"INVALID"},o);e.state=t$.Changed,this.langiumDocuments.addDocument(e)}this.buildState.delete(o.toString())}const r=pD(e).concat(t).map(e=>e.toString()).toSet();this.langiumDocuments.all.filter(e=>!r.has(e.uri.toString())&&this.shouldRelink(e,r)).forEach(e=>{this.serviceRegistry.getServices(e.uri).references.Linker.unlink(e),e.state=Math.min(e.state,t$.ComputedScopes),e.diagnostics=void 0}),await this.emitUpdate(e,t),await UH(n);const i=this.sortDocuments(this.langiumDocuments.all.filter(e=>{var t;return e.state<t$.Linked||!(null===(t=this.buildState.get(e.uri.toString()))||void 0===t?void 0:t.completed)}).toArray());await this.buildDocuments(i,this.updateBuildOptions,n)}async emitUpdate(e,t){await Promise.all(this.updateListeners.map(n=>n(e,t)))}sortDocuments(e){let t=0,n=e.length-1;for(;t<n;){for(;t<e.length&&this.hasTextDocument(e[t]);)t++;for(;n>=0&&!this.hasTextDocument(e[n]);)n--;t<n&&([e[t],e[n]]=[e[n],e[t]])}return e}hasTextDocument(e){var t;return Boolean(null===(t=this.textDocuments)||void 0===t?void 0:t.get(e.uri))}shouldRelink(e,t){return!!e.references.some(e=>void 0!==e.error)||this.indexManager.isAffected(e,t)}onUpdate(e){return this.updateListeners.push(e),O$.create(()=>{const t=this.updateListeners.indexOf(e);t>=0&&this.updateListeners.splice(t,1)})}async buildDocuments(e,t,n){this.prepareBuild(e,t),await this.runCancelable(e,t$.Parsed,n,e=>this.langiumDocumentFactory.update(e,n)),await this.runCancelable(e,t$.IndexedContent,n,e=>this.indexManager.updateContent(e,n)),await this.runCancelable(e,t$.ComputedScopes,n,async e=>{const t=this.serviceRegistry.getServices(e.uri).references.ScopeComputation;e.precomputedScopes=await t.computeLocalScopes(e,n)}),await this.runCancelable(e,t$.Linked,n,e=>this.serviceRegistry.getServices(e.uri).references.Linker.link(e,n)),await this.runCancelable(e,t$.IndexedReferences,n,e=>this.indexManager.updateReferences(e,n));const r=e.filter(e=>this.shouldValidate(e));await this.runCancelable(r,t$.Validated,n,e=>this.validate(e,n));for(const i of e){const e=this.buildState.get(i.uri.toString());e&&(e.completed=!0)}}prepareBuild(e,t){for(const n of e){const e=n.uri.toString(),r=this.buildState.get(e);r&&!r.completed||this.buildState.set(e,{completed:!1,options:t,result:null==r?void 0:r.result})}}async runCancelable(e,t,n,r){const i=e.filter(e=>e.state<t);for(const a of i)await UH(n),await r(a),a.state=t,await this.notifyDocumentPhase(a,t,n);const o=e.filter(e=>e.state===t);await this.notifyBuildPhase(o,t,n),this.currentState=t}onBuildPhase(e,t){return this.buildPhaseListeners.add(e,t),O$.create(()=>{this.buildPhaseListeners.delete(e,t)})}onDocumentPhase(e,t){return this.documentPhaseListeners.add(e,t),O$.create(()=>{this.documentPhaseListeners.delete(e,t)})}waitUntil(e,t,n){let r;if(t&&"path"in t?r=t:n=t,null!=n||(n=PH.CancellationToken.None),r){const t=this.langiumDocuments.getDocument(r);if(t&&t.state>e)return Promise.resolve(r)}return this.currentState>=e?Promise.resolve(void 0):n.isCancellationRequested?Promise.reject(FH):new Promise((t,i)=>{const o=this.onBuildPhase(e,()=>{if(o.dispose(),a.dispose(),r){const e=this.langiumDocuments.getDocument(r);t(null==e?void 0:e.uri)}else t(void 0)}),a=n.onCancellationRequested(()=>{o.dispose(),a.dispose(),i(FH)})})}async notifyDocumentPhase(e,t,n){const r=this.documentPhaseListeners.get(t).slice();for(const o of r)try{await o(e,n)}catch(i){if(!zH(i))throw i}}async notifyBuildPhase(e,t,n){if(0===e.length)return;const r=this.buildPhaseListeners.get(t).slice();for(const i of r)await UH(n),await i(e,n)}shouldValidate(e){return Boolean(this.getBuildOptions(e).validation)}async validate(e,t){var n,r;const i=this.serviceRegistry.getServices(e.uri).validation.DocumentValidator,o=this.getBuildOptions(e).validation,a="object"==typeof o?o:void 0,s=await i.validateDocument(e,a,t);e.diagnostics?e.diagnostics.push(...s):e.diagnostics=s;const l=this.buildState.get(e.uri.toString());if(l){null!==(n=l.result)&&void 0!==n||(l.result={});const e=null!==(r=null==a?void 0:a.categories)&&void 0!==r?r:T$.all;l.result.validationChecks?l.result.validationChecks.push(...e):l.result.validationChecks=[...e]}}getBuildOptions(e){var t,n;return null!==(n=null===(t=this.buildState.get(e.uri.toString()))||void 0===t?void 0:t.options)&&void 0!==n?n:{}}}class F${constructor(e){this.symbolIndex=new Map,this.symbolByTypeIndex=new m$,this.referenceIndex=new Map,this.documents=e.workspace.LangiumDocuments,this.serviceRegistry=e.ServiceRegistry,this.astReflection=e.AstReflection}findAllReferences(e,t){const n=FP(e).uri,r=[];return this.referenceIndex.forEach(e=>{e.forEach(e=>{JH.equals(e.targetUri,n)&&e.targetPath===t&&r.push(e)})}),pD(r)}allElements(e,t){let n=pD(this.symbolIndex.keys());return t&&(n=n.filter(e=>!t||t.has(e))),n.map(t=>this.getFileDescriptions(t,e)).flat()}getFileDescriptions(e,t){var n;if(!t)return null!==(n=this.symbolIndex.get(e))&&void 0!==n?n:[];return this.symbolByTypeIndex.get(e,t,()=>{var n;return(null!==(n=this.symbolIndex.get(e))&&void 0!==n?n:[]).filter(e=>this.astReflection.isSubtype(e.type,t))})}remove(e){const t=e.toString();this.symbolIndex.delete(t),this.symbolByTypeIndex.clear(t),this.referenceIndex.delete(t)}async updateContent(e,t=PH.CancellationToken.None){const n=this.serviceRegistry.getServices(e.uri),r=await n.references.ScopeComputation.computeExports(e,t),i=e.uri.toString();this.symbolIndex.set(i,r),this.symbolByTypeIndex.clear(i)}async updateReferences(e,t=PH.CancellationToken.None){const n=this.serviceRegistry.getServices(e.uri),r=await n.workspace.ReferenceDescriptionProvider.createDescriptions(e,t);this.referenceIndex.set(e.uri.toString(),r)}isAffected(e,t){const n=this.referenceIndex.get(e.uri.toString());return!!n&&n.some(e=>!e.local&&t.has(e.targetUri.toString()))}}class z${constructor(e){this.initialBuildOptions={},this._ready=new GH,this.serviceRegistry=e.ServiceRegistry,this.langiumDocuments=e.workspace.LangiumDocuments,this.documentBuilder=e.workspace.DocumentBuilder,this.fileSystemProvider=e.workspace.FileSystemProvider,this.mutex=e.workspace.WorkspaceLock}get ready(){return this._ready.promise}get workspaceFolders(){return this.folders}initialize(e){var t;this.folders=null!==(t=e.workspaceFolders)&&void 0!==t?t:void 0}initialized(e){return this.mutex.write(e=>{var t;return this.initializeWorkspace(null!==(t=this.folders)&&void 0!==t?t:[],e)})}async initializeWorkspace(e,t=PH.CancellationToken.None){const n=await this.performStartup(e);await UH(t),await this.documentBuilder.build(n,this.initialBuildOptions,t)}async performStartup(e){const t=this.serviceRegistry.all.flatMap(e=>e.LanguageMetaData.fileExtensions),n=[],r=e=>{n.push(e),this.langiumDocuments.hasDocument(e.uri)||this.langiumDocuments.addDocument(e)};return await this.loadAdditionalDocuments(e,r),await Promise.all(e.map(e=>[e,this.getRootFolder(e)]).map(async e=>this.traverseFolder(...e,t,r))),this._ready.resolve(),n}loadAdditionalDocuments(e,t){return Promise.resolve()}getRootFolder(e){return ZH.parse(e.uri)}async traverseFolder(e,t,n,r){const i=await this.fileSystemProvider.readDirectory(t);await Promise.all(i.map(async t=>{if(this.includeEntry(e,t,n))if(t.isDirectory)await this.traverseFolder(e,t.uri,n,r);else if(t.isFile){const e=await this.langiumDocuments.getOrCreateDocument(t.uri);r(e)}}))}includeEntry(e,t,n){const r=JH.basename(t.uri);if(r.startsWith("."))return!1;if(t.isDirectory)return"node_modules"!==r&&"out"!==r;if(t.isFile){const e=JH.extname(t.uri);return n.includes(e)}return!1}}class U${buildUnexpectedCharactersMessage(e,t,n,r,i){return GF.buildUnexpectedCharactersMessage(e,t,n,r,i)}buildUnableToPopLexerModeMessage(e){return GF.buildUnableToPopLexerModeMessage(e)}}const G$={mode:"full"};class V${constructor(e){this.errorMessageProvider=e.parser.LexerErrorMessageProvider,this.tokenBuilder=e.parser.TokenBuilder;const t=this.tokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(t);const n=H$(t)?Object.values(t):t,r="production"===e.LanguageMetaData.mode;this.chevrotainLexer=new $F(n,{positionTracking:"full",skipValidations:r,errorMessageProvider:this.errorMessageProvider})}get definition(){return this.tokenTypes}tokenize(e,t=G$){var n,r,i;const o=this.chevrotainLexer.tokenize(e);return{tokens:o.tokens,errors:o.errors,hidden:null!==(n=o.groups.hidden)&&void 0!==n?n:[],report:null===(i=(r=this.tokenBuilder).flushLexingReport)||void 0===i?void 0:i.call(r,e)}}toTokenTypeDictionary(e){if(H$(e))return e;const t=j$(e)?Object.values(e.modes).flat():e,n={};return t.forEach(e=>n[e.name]=e),n}}function j$(e){return e&&"modes"in e&&"defaultMode"in e}function H$(e){return!function(e){return Array.isArray(e)&&(0===e.length||"name"in e[0])}(e)&&!j$(e)}function $$(e,t,n){let r,i;"string"==typeof e?(i=t,r=n):(i=e.range.start,r=t),i||(i=IG.create(0,0));const o=function(e){var t,n,r;const i=[];let o=e.position.line,a=e.position.character;for(let s=0;s<e.lines.length;s++){const l=0===s,u=s===e.lines.length-1;let c=e.lines[s],h=0;if(l&&e.options.start){const n=null===(t=e.options.start)||void 0===t?void 0:t.exec(c);n&&(h=n.index+n[0].length)}else{const t=null===(n=e.options.line)||void 0===n?void 0:n.exec(c);t&&(h=t.index+t[0].length)}if(u){const t=null===(r=e.options.end)||void 0===r?void 0:r.exec(c);t&&(c=c.substring(0,t.index))}c=c.substring(0,J$(c));if(Q$(c,h)>=c.length){if(i.length>0){const e=IG.create(o,a);i.push({type:"break",content:"",range:LG.create(e,e)})}}else{q$.lastIndex=h;const e=q$.exec(c);if(e){const t=e[0],n=e[1],r=IG.create(o,a+h),s=IG.create(o,a+h+t.length);i.push({type:"tag",content:n,range:LG.create(r,s)}),h+=t.length,h=Q$(c,h)}if(h<c.length){const e=c.substring(h),t=Array.from(e.matchAll(W$));i.push(...X$(t,e,o,a+h))}}o++,a=0}if(i.length>0&&"break"===i[i.length-1].type)return i.slice(0,-1);return i}({lines:Y$(e),position:i,options:oY(r)});return function(e){var t,n,r,i;const o=IG.create(e.position.line,e.position.character);if(0===e.tokens.length)return new sY([],LG.create(o,o));const a=[];for(;e.index<e.tokens.length;){const t=eY(e,a[a.length-1]);t&&a.push(t)}const s=null!==(n=null===(t=a[0])||void 0===t?void 0:t.range.start)&&void 0!==n?n:o,l=null!==(i=null===(r=a[a.length-1])||void 0===r?void 0:r.range.end)&&void 0!==i?i:o;return new sY(a,LG.create(s,l))}({index:0,tokens:o,position:i})}function Y$(e){let t="";t="string"==typeof e?e:e.text;return t.split(oB)}const q$=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,W$=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function X$(e,t,n,r){const i=[];if(0===e.length){const e=IG.create(n,r),o=IG.create(n,r+t.length);i.push({type:"text",content:t,range:LG.create(e,o)})}else{let o=0;for(const s of e){const e=s.index,a=t.substring(o,e);a.length>0&&i.push({type:"text",content:t.substring(o,e),range:LG.create(IG.create(n,o+r),IG.create(n,e+r))});let l=a.length+1;const u=s[1];if(i.push({type:"inline-tag",content:u,range:LG.create(IG.create(n,o+l+r),IG.create(n,o+l+u.length+r))}),l+=u.length,4===s.length){l+=s[2].length;const e=s[3];i.push({type:"text",content:e,range:LG.create(IG.create(n,o+l+r),IG.create(n,o+l+e.length+r))})}else i.push({type:"text",content:"",range:LG.create(IG.create(n,o+l+r),IG.create(n,o+l+r))});o=e+s[0].length}const a=t.substring(o);a.length>0&&i.push({type:"text",content:a,range:LG.create(IG.create(n,o+r),IG.create(n,o+r+a.length))})}return i}const K$=/\S/,Z$=/\s*$/;function Q$(e,t){const n=e.substring(t).match(K$);return n?t+n.index:e.length}function J$(e){const t=e.match(Z$);if(t&&"number"==typeof t.index)return t.index}function eY(e,t){const n=e.tokens[e.index];return"tag"===n.type?rY(e,!1):"text"===n.type||"inline-tag"===n.type?tY(e):(function(e,t){if(t){const n=new cY("",e.range);"inlines"in t?t.inlines.push(n):t.content.inlines.push(n)}}(n,t),void e.index++)}function tY(e){let t=e.tokens[e.index];const n=t;let r=t;const i=[];for(;t&&"break"!==t.type&&"tag"!==t.type;)i.push(nY(e)),r=t,t=e.tokens[e.index];return new uY(i,LG.create(n.range.start,r.range.end))}function nY(e){return"inline-tag"===e.tokens[e.index].type?rY(e,!0):iY(e)}function rY(e,t){const n=e.tokens[e.index++],r=n.content.substring(1),i=e.tokens[e.index];if("text"===(null==i?void 0:i.type)){if(t){const i=iY(e);return new lY(r,new uY([i],i.range),t,LG.create(n.range.start,i.range.end))}{const i=tY(e);return new lY(r,i,t,LG.create(n.range.start,i.range.end))}}{const e=n.range;return new lY(r,new uY([],e),t,e)}}function iY(e){const t=e.tokens[e.index++];return new cY(t.content,t.range)}function oY(e){if(!e)return oY({start:"/**",end:"*/",line:"*"});const{start:t,end:n,line:r}=e;return{start:aY(t,!0),end:aY(n,!1),line:aY(r,!0)}}function aY(e,t){if("string"==typeof e||"object"==typeof e){const n="string"==typeof e?hB(e):e.source;return t?new RegExp(`^\\s*${n}`):new RegExp(`\\s*${n}\\s*$`)}return e}class sY{constructor(e,t){this.elements=e,this.range=t}getTag(e){return this.getAllTags().find(t=>t.name===e)}getTags(e){return this.getAllTags().filter(t=>t.name===e)}getAllTags(){return this.elements.filter(e=>"name"in e)}toString(){let e="";for(const t of this.elements)if(0===e.length)e=t.toString();else{const n=t.toString();e+=hY(e)+n}return e.trim()}toMarkdown(e){let t="";for(const n of this.elements)if(0===t.length)t=n.toMarkdown(e);else{const r=n.toMarkdown(e);t+=hY(t)+r}return t.trim()}}class lY{constructor(e,t,n,r){this.name=e,this.content=t,this.inline=n,this.range=r}toString(){let e=`@${this.name}`;const t=this.content.toString();return 1===this.content.inlines.length?e=`${e} ${t}`:this.content.inlines.length>1&&(e=`${e}\n${t}`),this.inline?`{${e}}`:e}toMarkdown(e){var t,n;return null!==(n=null===(t=null==e?void 0:e.renderTag)||void 0===t?void 0:t.call(e,this))&&void 0!==n?n:this.toMarkdownDefault(e)}toMarkdownDefault(e){const t=this.content.toMarkdown(e);if(this.inline){const n=function(e,t,n){var r,i;if("linkplain"===e||"linkcode"===e||"link"===e){const o=t.indexOf(" ");let a=t;if(o>0){const e=Q$(t,o);a=t.substring(e),t=t.substring(0,o)}("linkcode"===e||"link"===e&&"code"===n.link)&&(a=`\`${a}\``);const s=null!==(i=null===(r=n.renderLink)||void 0===r?void 0:r.call(n,t,a))&&void 0!==i?i:function(e,t){try{return ZH.parse(e,!0),`[${t}](${e})`}catch(r){return e}}(t,a);return s}return}(this.name,t,null!=e?e:{});if("string"==typeof n)return n}let n="";"italic"===(null==e?void 0:e.tag)||void 0===(null==e?void 0:e.tag)?n="*":"bold"===(null==e?void 0:e.tag)?n="**":"bold-italic"===(null==e?void 0:e.tag)&&(n="***");let r=`${n}@${this.name}${n}`;return 1===this.content.inlines.length?r=`${r} — ${t}`:this.content.inlines.length>1&&(r=`${r}\n${t}`),this.inline?`{${r}}`:r}}class uY{constructor(e,t){this.inlines=e,this.range=t}toString(){let e="";for(let t=0;t<this.inlines.length;t++){const n=this.inlines[t],r=this.inlines[t+1];e+=n.toString(),r&&r.range.start.line>n.range.start.line&&(e+="\n")}return e}toMarkdown(e){let t="";for(let n=0;n<this.inlines.length;n++){const r=this.inlines[n],i=this.inlines[n+1];t+=r.toMarkdown(e),i&&i.range.start.line>r.range.start.line&&(t+="\n")}return t}}class cY{constructor(e,t){this.text=e,this.range=t}toString(){return this.text}toMarkdown(){return this.text}}function hY(e){return e.endsWith("\n")?"\n":"\n\n"}class dY{constructor(e){this.indexManager=e.shared.workspace.IndexManager,this.commentProvider=e.documentation.CommentProvider}getDocumentation(e){const t=this.commentProvider.getComment(e);if(t&&function(e,t){const n=oY(t),r=Y$(e);if(0===r.length)return!1;const i=r[0],o=r[r.length-1],a=n.start,s=n.end;return Boolean(null==a?void 0:a.exec(i))&&Boolean(null==s?void 0:s.exec(o))}(t)){return $$(t).toMarkdown({renderLink:(t,n)=>this.documentationLinkRenderer(e,t,n),renderTag:t=>this.documentationTagRenderer(e,t)})}}documentationLinkRenderer(e,t,n){var r;const i=null!==(r=this.findNameInPrecomputedScopes(e,t))&&void 0!==r?r:this.findNameInGlobalScope(e,t);if(i&&i.nameSegment){const e=i.nameSegment.range.start.line+1,t=i.nameSegment.range.start.character+1;return`[${n}](${i.documentUri.with({fragment:`L${e},${t}`}).toString()})`}}documentationTagRenderer(e,t){}findNameInPrecomputedScopes(e,t){const n=FP(e).precomputedScopes;if(!n)return;let r=e;do{const e=n.get(r).find(e=>e.name===t);if(e)return e;r=r.$container}while(r)}findNameInGlobalScope(e,t){return this.indexManager.allElements().find(e=>e.name===t)}}class fY{constructor(e){this.grammarConfig=()=>e.parser.GrammarConfig}getComment(e){var t;return function(e){return"string"==typeof e.$comment}(e)?e.$comment:null===(t=function(e,t){if(e){const n=function(e,t=!0){for(;e.container;){const n=e.container;let r=n.content.indexOf(e);for(;r>0;){r--;const e=n.content[r];if(t||!e.hidden)return e}e=n}}(e,!0);if(n&&kD(n,t))return n;if(lD(e))for(let r=e.content.findIndex(e=>!e.hidden)-1;r>=0;r--){const n=e.content[r];if(kD(n,t))return n}}}(e.$cstNode,this.grammarConfig().multilineCommentRules))||void 0===t?void 0:t.text}}class pY{constructor(e){this.syncParser=e.parser.LangiumParser}parse(e,t){return Promise.resolve(this.syncParser.parse(e))}}class gY{constructor(){this.previousTokenSource=new PH.CancellationTokenSource,this.writeQueue=[],this.readQueue=[],this.done=!0}write(e){this.cancelWrite();const t=(BH=performance.now(),new PH.CancellationTokenSource);return this.previousTokenSource=t,this.enqueue(this.writeQueue,e,t.token)}read(e){return this.enqueue(this.readQueue,e)}enqueue(e,t,n=PH.CancellationToken.None){const r=new GH,i={action:t,deferred:r,cancellationToken:n};return e.push(i),this.performNextOperation(),r.promise}async performNextOperation(){if(!this.done)return;const e=[];if(this.writeQueue.length>0)e.push(this.writeQueue.shift());else{if(!(this.readQueue.length>0))return;e.push(...this.readQueue.splice(0,this.readQueue.length))}this.done=!1,await Promise.all(e.map(async({action:e,deferred:t,cancellationToken:n})=>{try{const r=await Promise.resolve().then(()=>e(n));t.resolve(r)}catch(r){zH(r)?t.resolve(void 0):t.reject(r)}})),this.done=!0,this.performNextOperation()}cancelWrite(){this.previousTokenSource.cancel()}}class mY{constructor(e){this.grammarElementIdMap=new c$,this.tokenTypeIdMap=new c$,this.grammar=e.Grammar,this.lexer=e.parser.Lexer,this.linker=e.references.Linker}dehydrate(e){return{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport?this.dehydrateLexerReport(e.lexerReport):void 0,parserErrors:e.parserErrors.map(e=>Object.assign(Object.assign({},e),{message:e.message})),value:this.dehydrateAstNode(e.value,this.createDehyrationContext(e.value))}}dehydrateLexerReport(e){return e}createDehyrationContext(e){const t=new Map,n=new Map;for(const r of VP(e))t.set(r,{});if(e.$cstNode)for(const r of xD(e.$cstNode))n.set(r,{});return{astNodes:t,cstNodes:n}}dehydrateAstNode(e,t){const n=t.astNodes.get(e);n.$type=e.$type,n.$containerIndex=e.$containerIndex,n.$containerProperty=e.$containerProperty,void 0!==e.$cstNode&&(n.$cstNode=this.dehydrateCstNode(e.$cstNode,t));for(const[r,i]of Object.entries(e))if(!r.startsWith("$"))if(Array.isArray(i)){const e=[];n[r]=e;for(const n of i)nD(n)?e.push(this.dehydrateAstNode(n,t)):rD(n)?e.push(this.dehydrateReference(n,t)):e.push(n)}else nD(i)?n[r]=this.dehydrateAstNode(i,t):rD(i)?n[r]=this.dehydrateReference(i,t):void 0!==i&&(n[r]=i);return n}dehydrateReference(e,t){const n={};return n.$refText=e.$refText,e.$refNode&&(n.$refNode=t.cstNodes.get(e.$refNode)),n}dehydrateCstNode(e,t){const n=t.cstNodes.get(e);return lD(e)?n.fullText=e.fullText:n.grammarSource=this.getGrammarElementId(e.grammarSource),n.hidden=e.hidden,n.astNode=t.astNodes.get(e.astNode),aD(e)?n.content=e.content.map(e=>this.dehydrateCstNode(e,t)):sD(e)&&(n.tokenType=e.tokenType.name,n.offset=e.offset,n.length=e.length,n.startLine=e.range.start.line,n.startColumn=e.range.start.character,n.endLine=e.range.end.line,n.endColumn=e.range.end.character),n}hydrate(e){const t=e.value,n=this.createHydrationContext(t);return"$cstNode"in t&&this.hydrateCstNode(t.$cstNode,n),{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport,parserErrors:e.parserErrors,value:this.hydrateAstNode(t,n)}}createHydrationContext(e){const t=new Map,n=new Map;for(const i of VP(e))t.set(i,{});let r;if(e.$cstNode)for(const i of xD(e.$cstNode)){let e;"fullText"in i?(e=new rH(i.fullText),r=e):"content"in i?e=new tH:"tokenType"in i&&(e=this.hydrateCstLeafNode(i)),e&&(n.set(i,e),e.root=r)}return{astNodes:t,cstNodes:n}}hydrateAstNode(e,t){const n=t.astNodes.get(e);n.$type=e.$type,n.$containerIndex=e.$containerIndex,n.$containerProperty=e.$containerProperty,e.$cstNode&&(n.$cstNode=t.cstNodes.get(e.$cstNode));for(const[r,i]of Object.entries(e))if(!r.startsWith("$"))if(Array.isArray(i)){const e=[];n[r]=e;for(const o of i)nD(o)?e.push(this.setParent(this.hydrateAstNode(o,t),n)):rD(o)?e.push(this.hydrateReference(o,n,r,t)):e.push(o)}else nD(i)?n[r]=this.setParent(this.hydrateAstNode(i,t),n):rD(i)?n[r]=this.hydrateReference(i,n,r,t):void 0!==i&&(n[r]=i);return n}setParent(e,t){return e.$container=t,e}hydrateReference(e,t,n,r){return this.linker.buildReference(t,n,r.cstNodes.get(e.$refNode),e.$refText)}hydrateCstNode(e,t,n=0){const r=t.cstNodes.get(e);if("number"==typeof e.grammarSource&&(r.grammarSource=this.getGrammarElement(e.grammarSource)),r.astNode=t.astNodes.get(e.astNode),aD(r))for(const i of e.content){const e=this.hydrateCstNode(i,t,n++);r.content.push(e)}return r}hydrateCstLeafNode(e){const t=this.getTokenType(e.tokenType),n=e.offset,r=e.length,i=e.startLine,o=e.startColumn,a=e.endLine,s=e.endColumn,l=e.hidden;return new eH(n,r,{start:{line:i,character:o},end:{line:a,character:s}},t,l)}getTokenType(e){return this.lexer.definition[e]}getGrammarElementId(e){if(e)return 0===this.grammarElementIdMap.size&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(e)}getGrammarElement(e){0===this.grammarElementIdMap.size&&this.createGrammarElementIdMap();return this.grammarElementIdMap.getKey(e)}createGrammarElementIdMap(){let e=0;for(const t of VP(this.grammar))OD(t)&&this.grammarElementIdMap.set(t,e++)}}function vY(e){return{documentation:{CommentProvider:e=>new fY(e),DocumentationProvider:e=>new dY(e)},parser:{AsyncParser:e=>new pY(e),GrammarConfig:e=>function(e){const t=[],n=e.Grammar;for(const r of n.rules)oP(r)&&gB(r)&&lB(kB(r))&&t.push(r.name);return{multilineCommentRules:t,nameRegexp:_D}}(e),LangiumParser:e=>EH(e),CompletionParser:e=>function(e){const t=e.Grammar,n=e.parser.Lexer,r=new hH(e);return pH(t,r,n.definition),r.finalize(),r}(e),ValueConverter:()=>new _H,TokenBuilder:()=>new TH,Lexer:e=>new V$(e),ParserErrorMessageProvider:()=>new cH,LexerErrorMessageProvider:()=>new U$},workspace:{AstNodeLocator:()=>new L$,AstNodeDescriptionProvider:e=>new I$(e),ReferenceDescriptionProvider:e=>new R$(e)},references:{Linker:e=>new a$(e),NameProvider:()=>new s$,ScopeProvider:e=>new y$(e),ScopeComputation:e=>new h$(e),References:e=>new l$(e)},serializer:{Hydrator:e=>new mY(e),JsonSerializer:e=>new x$(e)},validation:{DocumentValidator:e=>new S$(e),ValidationRegistry:e=>new A$(e)},shared:()=>e.shared}}function yY(e){return{ServiceRegistry:e=>new w$(e),workspace:{LangiumDocuments:e=>new i$(e),LangiumDocumentFactory:e=>new r$(e),DocumentBuilder:e=>new B$(e),IndexManager:e=>new F$(e),WorkspaceManager:e=>new z$(e),FileSystemProvider:t=>e.fileSystemProvider(t),WorkspaceLock:()=>new gY,ConfigurationProvider:e=>new P$(e)}}}var bY;function xY(e,t,n,r,i,o,a,s,l){return EY([e,t,n,r,i,o,a,s,l].reduce(kY,{}))}(bY||(bY={})).merge=(e,t)=>kY(kY({},e),t);const wY=Symbol("isProxy");function EY(e,t){const n=new Proxy({},{deleteProperty:()=>!1,set:()=>{throw new Error("Cannot set property on injected service container")},get:(r,i)=>i===wY||_Y(r,i,e,t||n),getOwnPropertyDescriptor:(r,i)=>(_Y(r,i,e,t||n),Object.getOwnPropertyDescriptor(r,i)),has:(t,n)=>n in e,ownKeys:()=>[...Object.getOwnPropertyNames(e)]});return n}const TY=Symbol();function _Y(e,t,n,r){if(t in e){if(e[t]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:e[t]});if(e[t]===TY)throw new Error('Cycle detected. Please make "'+String(t)+'" lazy. Visit https://langium.org/docs/reference/configuration-services/#resolving-cyclic-dependencies');return e[t]}if(t in n){const o=n[t];e[t]=TY;try{e[t]="function"==typeof o?o(r):EY(o,r)}catch(i){throw e[t]=i instanceof Error?i:void 0,i}return e[t]}}function kY(e,t){if(t)for(const[n,r]of Object.entries(t))if(void 0!==r){const t=e[n];e[n]=null!==t&&null!==r&&"object"==typeof t&&"object"==typeof r?kY(t,r):r}return e}class AY{readFile(){throw new Error("No file system is available.")}async readDirectory(){return[]}}const SY={fileSystemProvider:()=>new AY},NY={Grammar:()=>{},LanguageMetaData:()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})},MY={AstReflection:()=>new DP};function CY(e){var t;const n=function(){const e=xY(yY(SY),MY),t=xY(vY({shared:e}),NY);return e.ServiceRegistry.register(t),t}(),r=n.serializer.JsonSerializer.deserialize(e);return n.shared.workspace.LangiumDocumentFactory.fromModel(r,ZH.parse(`memory://${null!==(t=r.name)&&void 0!==t?t:"grammar"}.langium`)),r}var IY,RY={exports:{}};var LY,OY=(IY||(IY=1,RY.exports=(LY="day",function(e,t,n){var r=function(e){return e.add(4-e.isoWeekday(),LY)},i=t.prototype;i.isoWeekYear=function(){return r(this).year()},i.isoWeek=function(e){if(!this.$utils().u(e))return this.add(7*(e-this.isoWeek()),LY);var t,i,o,a=r(this),s=(t=this.isoWeekYear(),o=4-(i=(this.$u?n.utc:n)().year(t).startOf("year")).isoWeekday(),i.isoWeekday()>4&&(o+=7),i.add(o,LY));return a.diff(s,"week")+1},i.isoWeekday=function(e){return this.$utils().u(e)?this.day()||7:this.day(this.day()%7?e:e-7)};var o=i.startOf;i.startOf=function(e,t){var n=this.$utils(),r=!!n.u(t)||t;return"isoweek"===n.p(e)?r?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):o.bind(this)(e,t)}})),RY.exports);const DY=Zo(OY);var PY,BY={exports:{}};var FY=(PY||(PY=1,BY.exports=function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d/,r=/\d\d/,i=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},s=function(e){return(e=+e)+(e>68?1900:2e3)},l=function(e){return function(t){this[e]=+t}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],c=function(e){var t=a[e];return t&&(t.indexOf?t:t.s.concat(t.f))},h=function(e,t){var n,r=a.meridiem;if(r){for(var i=1;i<=24;i+=1)if(e.indexOf(r(i,0,t))>-1){n=i>12;break}}else n=e===(t?"pm":"PM");return n},d={A:[o,function(e){this.afternoon=h(e,!1)}],a:[o,function(e){this.afternoon=h(e,!0)}],Q:[n,function(e){this.month=3*(e-1)+1}],S:[n,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[i,l("seconds")],ss:[i,l("seconds")],m:[i,l("minutes")],mm:[i,l("minutes")],H:[i,l("hours")],h:[i,l("hours")],HH:[i,l("hours")],hh:[i,l("hours")],D:[i,l("day")],DD:[r,l("day")],Do:[o,function(e){var t=a.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],w:[i,l("week")],ww:[r,l("week")],M:[i,l("month")],MM:[r,l("month")],MMM:[o,function(e){var t=c("months"),n=(c("monthsShort")||t.map(function(e){return e.slice(0,3)})).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[o,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,l("year")],YY:[r,function(e){this.year=s(e)}],YYYY:[/\d{4}/,l("year")],Z:u,ZZ:u};function f(n){var r,i;r=n,i=a&&a.formats;for(var o=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,n,r){var o=r&&r.toUpperCase();return n||i[r]||e[r]||i[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,n){return t||n.slice(1)})})).match(t),s=o.length,l=0;l<s;l+=1){var u=o[l],c=d[u],h=c&&c[0],f=c&&c[1];o[l]=f?{regex:h,parser:f}:u.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,r=0;n<s;n+=1){var i=o[n];if("string"==typeof i)r+=i.length;else{var a=i.regex,l=i.parser,u=e.slice(r),c=a.exec(u)[0];l.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(s=e.parseTwoDigitYear);var r=t.prototype,i=r.parse;r.parse=function(e){var t=e.date,r=e.utc,o=e.args;this.$u=r;var s=o[1];if("string"==typeof s){var l=!0===o[2],u=!0===o[3],c=l||u,h=o[2];u&&(h=o[2]),a=this.$locale(),!l&&h&&(a=n.Ls[h]),this.$d=function(e,t,n,r){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var i=f(t)(e),o=i.year,a=i.month,s=i.day,l=i.hours,u=i.minutes,c=i.seconds,h=i.milliseconds,d=i.zone,p=i.week,g=new Date,m=s||(o||a?1:g.getDate()),v=o||g.getFullYear(),y=0;o&&!a||(y=a>0?a-1:g.getMonth());var b,x=l||0,w=u||0,E=c||0,T=h||0;return d?new Date(Date.UTC(v,y,m,x,w,E,T+60*d.offset*1e3)):n?new Date(Date.UTC(v,y,m,x,w,E,T)):(b=new Date(v,y,m,x,w,E,T),p&&(b=r(b).week(p).toDate()),b)}catch(_){return new Date("")}}(t,s,r,n),this.init(),h&&!0!==h&&(this.$L=this.locale(h).$L),c&&t!=this.format(s)&&(this.$d=new Date("")),a={}}else if(s instanceof Array)for(var d=s.length,p=1;p<=d;p+=1){o[1]=s[p-1];var g=n.apply(this,o);if(g.isValid()){this.$d=g.$d,this.$L=g.$L,this.init();break}p===d&&(this.$d=new Date(""))}else i.call(this,e)}}}()),BY.exports);const zY=Zo(FY);var UY,GY={exports:{}};const VY=Zo(UY?GY.exports:(UY=1,GY.exports=function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return r.bind(this)(e);var i=this.$utils(),o=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return n.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return n.ordinal(t.week(),"W");case"w":case"ww":return i.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return i.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return i.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}});return r.bind(this)(o)}}));function jY(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function HY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $Y(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,KY(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function YY(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=QY(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function qY(e,t,n){return(t=KY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||QY(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XY(e){return function(e){if(Array.isArray(e))return jY(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||QY(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KY(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function ZY(e){return(ZY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QY(e,t){if(e){if("string"==typeof e)return jY(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jY(e,t):void 0}}var JY="undefined"==typeof window?null:window,eq=JY?JY.navigator:null;JY&&JY.document;var tq,nq,rq,iq,oq,aq,sq,lq,uq,cq,hq,dq,fq,pq,gq,mq,vq,yq,bq,xq,wq,Eq,Tq,_q,kq,Aq,Sq,Nq,Mq=ZY(""),Cq=ZY({}),Iq=ZY(function(){}),Rq="undefined"==typeof HTMLElement?"undefined":ZY(HTMLElement),Lq=function(e){return e&&e.instanceString&&Dq(e.instanceString)?e.instanceString():null},Oq=function(e){return null!=e&&ZY(e)==Mq},Dq=function(e){return null!=e&&ZY(e)===Iq},Pq=function(e){return!Uq(e)&&(Array.isArray?Array.isArray(e):null!=e&&e instanceof Array)},Bq=function(e){return null!=e&&ZY(e)===Cq&&!Pq(e)&&e.constructor===Object},Fq=function(e){return null!=e&&ZY(e)===ZY(1)&&!isNaN(e)},zq=function(e){return"undefined"===Rq?void 0:null!=e&&e instanceof HTMLElement},Uq=function(e){return Gq(e)||Vq(e)},Gq=function(e){return"collection"===Lq(e)&&e._private.single},Vq=function(e){return"collection"===Lq(e)&&!e._private.single},jq=function(e){return"core"===Lq(e)},Hq=function(e){return"stylesheet"===Lq(e)},$q=function(e){return null==e||!(""!==e&&!e.match(/^\s+$/))},Yq=function(e){return function(e){return null!=e&&ZY(e)===Cq}(e)&&Dq(e.then)},qq=function(e,t){t||(t=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var n=function(){var r,i=arguments,o=t.apply(this,i),a=n.cache;return(r=a[o])||(r=a[o]=e.apply(this,i)),r};return n.cache={},n},Wq=qq(function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Xq=qq(function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Kq=qq(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),Zq=function(e){return $q(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Qq=function(e,t){return e.slice(-1*t.length)===t},Jq="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",eW="rgb[a]?\\(("+Jq+"[%]?)\\s*,\\s*("+Jq+"[%]?)\\s*,\\s*("+Jq+"[%]?)(?:\\s*,\\s*("+Jq+"))?\\)",tW="rgb[a]?\\((?:"+Jq+"[%]?)\\s*,\\s*(?:"+Jq+"[%]?)\\s*,\\s*(?:"+Jq+"[%]?)(?:\\s*,\\s*(?:"+Jq+"))?\\)",nW="hsl[a]?\\(("+Jq+")\\s*,\\s*("+Jq+"[%])\\s*,\\s*("+Jq+"[%])(?:\\s*,\\s*("+Jq+"))?\\)",rW="hsl[a]?\\((?:"+Jq+")\\s*,\\s*(?:"+Jq+"[%])\\s*,\\s*(?:"+Jq+"[%])(?:\\s*,\\s*(?:"+Jq+"))?\\)",iW=function(e,t){return e<t?-1:e>t?1:0},oW=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];if(null!=r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];e[a]=r[a]}}return e},aW=function(e){return(Pq(e)?e:null)||function(e){return sW[e.toLowerCase()]}(e)||function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,n,r,i=16;return 4===e.length?(t=parseInt(e[1]+e[1],i),n=parseInt(e[2]+e[2],i),r=parseInt(e[3]+e[3],i)):(t=parseInt(e[1]+e[2],i),n=parseInt(e[3]+e[4],i),r=parseInt(e[5]+e[6],i)),[t,n,r]}}(e)||function(e){var t,n=new RegExp("^"+eW+"$").exec(e);if(n){t=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var a=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(a&&!s)return;var l=n[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;t.push(l)}}return t}(e)||function(e){var t,n,r,i,o,a,s,l;function u(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var c=new RegExp("^"+nW+"$").exec(e);if(c){if((n=parseInt(c[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(r=parseFloat(c[2]))<0||r>100)return;if(r/=100,(i=parseFloat(c[3]))<0||i>100)return;if(i/=100,void 0!==(o=c[4])&&((o=parseFloat(o))<0||o>1))return;if(0===r)a=s=l=Math.round(255*i);else{var h=i<.5?i*(1+r):i+r-i*r,d=2*i-h;a=Math.round(255*u(d,h,n+1/3)),s=Math.round(255*u(d,h,n)),l=Math.round(255*u(d,h,n-1/3))}t=[a,s,l,o]}return t}(e)},sW={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},lW=function(e){for(var t=e.map,n=e.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(Bq(o))throw Error("Tried to set map with object key");i<n.length-1?(null==t[o]&&(t[o]={}),t=t[o]):t[o]=e.value}},uW=function(e){for(var t=e.map,n=e.keys,r=n.length,i=0;i<r;i++){var o=n[i];if(Bq(o))throw Error("Tried to get map with object key");if(null==(t=t[o]))return t}return t},cW="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function hW(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function dW(){if(nq)return tq;return nq=1,tq=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}function fW(){if(aq)return oq;aq=1;var e=function(){if(iq)return rq;iq=1;var e="object"==typeof cW&&cW&&cW.Object===Object&&cW;return rq=e}(),t="object"==typeof self&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return oq=n}function pW(){if(dq)return hq;dq=1;var e=function(){if(cq)return uq;cq=1;var e=/\s/;return uq=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}}(),t=/^\s+/;return hq=function(n){return n?n.slice(0,e(n)+1).replace(t,""):n}}function gW(){if(pq)return fq;pq=1;var e=fW().Symbol;return fq=e}function mW(){if(xq)return bq;xq=1;var e=gW(),t=function(){if(mq)return gq;mq=1;var e=gW(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;return gq=function(e){var t=n.call(e,i),o=e[i];try{e[i]=void 0;var a=!0}catch(LY){}var s=r.call(e);return a&&(t?e[i]=o:delete e[i]),s}}(),n=function(){if(yq)return vq;yq=1;var e=Object.prototype.toString;return vq=function(t){return e.call(t)}}(),r=e?e.toStringTag:void 0;return bq=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?t(e):n(e)}}function vW(){if(_q)return Tq;_q=1;var e=mW(),t=Eq?wq:(Eq=1,wq=function(e){return null!=e&&"object"==typeof e});return Tq=function(n){return"symbol"==typeof n||t(n)&&"[object Symbol]"==e(n)}}var yW=function(){if(Nq)return Sq;Nq=1;var e=dW(),t=function(){if(lq)return sq;lq=1;var e=fW();return sq=function(){return e.Date.now()}}(),n=function(){if(Aq)return kq;Aq=1;var e=pW(),t=dW(),n=vW(),r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;return kq=function(s){if("number"==typeof s)return s;if(n(s))return NaN;if(t(s)){var l="function"==typeof s.valueOf?s.valueOf():s;s=t(l)?l+"":l}if("string"!=typeof s)return 0===s?s:+s;s=e(s);var u=i.test(s);return u||o.test(s)?a(s.slice(2),u?2:8):r.test(s)?NaN:+s}}(),r=Math.max,i=Math.min;return Sq=function(o,a,s){var l,u,c,h,d,f,p=0,g=!1,m=!1,v=!0;if("function"!=typeof o)throw new TypeError("Expected a function");function y(e){var t=l,n=u;return l=u=void 0,p=e,h=o.apply(n,t)}function b(e){var t=e-f;return void 0===f||t>=a||t<0||m&&e-p>=c}function x(){var e=t();if(b(e))return w(e);d=setTimeout(x,function(e){var t=a-(e-f);return m?i(t,c-(e-p)):t}(e))}function w(e){return d=void 0,v&&l?y(e):(l=u=void 0,h)}function E(){var e=t(),n=b(e);if(l=arguments,u=this,f=e,n){if(void 0===d)return function(e){return p=e,d=setTimeout(x,a),g?y(e):h}(f);if(m)return clearTimeout(d),d=setTimeout(x,a),y(f)}return void 0===d&&(d=setTimeout(x,a)),h}return a=n(a)||0,e(s)&&(g=!!s.leading,c=(m="maxWait"in s)?r(n(s.maxWait)||0,a):c,v="trailing"in s?!!s.trailing:v),E.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=f=u=d=void 0},E.flush=function(){return void 0===d?h:w(t())},E},Sq}(),bW=hW(yW),xW=JY?JY.performance:null,wW=xW&&xW.now?function(){return xW.now()}:function(){return Date.now()},EW=function(){if(JY){if(JY.requestAnimationFrame)return function(e){JY.requestAnimationFrame(e)};if(JY.mozRequestAnimationFrame)return function(e){JY.mozRequestAnimationFrame(e)};if(JY.webkitRequestAnimationFrame)return function(e){JY.webkitRequestAnimationFrame(e)};if(JY.msRequestAnimationFrame)return function(e){JY.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(wW())},1e3/60)}}(),TW=function(e){return EW(e)},_W=wW,kW=9261,AW=5381,SW=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kW;!(t=e.next()).done;)n=65599*n+t.value|0;return n},NW=function(e){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:kW)+e|0},MW=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:AW;return(t<<5)+t+e|0},CW=function(e){return 2097152*e[0]+e[1]},IW=function(e,t){return[NW(e[0],t[0]),MW(e[1],t[1])]},RW=function(e,t){var n={value:0,done:!1},r=0,i=e.length;return SW({next:function(){return r<i?n.value=e[r++]:n.done=!0,n}},t)},LW=function(e,t){var n={value:0,done:!1},r=0,i=e.length;return SW({next:function(){return r<i?n.value=e.charCodeAt(r++):n.done=!0,n}},t)},OW=function(){return DW(arguments)},DW=function(e){for(var t,n=0;n<e.length;n++){var r=e[n];t=0===n?LW(r):LW(r,t)}return t};function PW(e,t,n){if(0===n)return e;var r=(t.x1+t.x2)/2,i=(t.y1+t.y2)/2,o=t.w/t.h,a=1/o,s=function(e,t,n,r,i){var o=i*Math.PI/180;return{x:Math.cos(o)*(e-n)-Math.sin(o)*(t-r)+n,y:Math.sin(o)*(e-n)+Math.cos(o)*(t-r)+r}}(e.x,e.y,r,i,n),l=function(e,t,n,r,i,o){return{x:(e-n)*i+n,y:(t-r)*o+r}}(s.x,s.y,r,i,o,a);return{x:l.x,y:l.y}}var BW=!0,FW=(console.warn,console.trace,Number.MAX_SAFE_INTEGER||9007199254740991),zW=function(){return!0},UW=function(){return!1},GW=function(){return 0},VW=function(){},jW=function(e){throw new Error(e)},HW=function(e){if(void 0===e)return BW;BW=!!e},$W=function(e){HW()},YW=function(e){return null==e?e:Pq(e)?e.slice():Bq(e)?function(e){return oW({},e)}(e):e},qW=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},WW={},XW=function(){return WW},KW=function(e){var t=Object.keys(e);return function(n){for(var r={},i=0;i<t.length;i++){var o=t[i],a=null==n?void 0:n[o];r[o]=void 0===a?e[o]:a}return r}},ZW=function(e,t,n){for(var r=e.length-1;r>=0;r--)e[r]===t&&e.splice(r,1)},QW=function(e){e.splice(0,e.length)},JW=function(e,t,n){return n&&(t=Kq(n,t)),e[t]},eX=function(e,t,n,r){n&&(t=Kq(n,t)),e[t]=r},tX="undefined"!=typeof Map?Map:function(){return $Y(function e(){HY(this,e),this._obj={}},[{key:"set",value:function(e,t){return this._obj[e]=t,this}},{key:"delete",value:function(e){return this._obj[e]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(e){return void 0!==this._obj[e]}},{key:"get",value:function(e){return this._obj[e]}}])}(),nX=function(){return $Y(function e(t){if(HY(this,e),this._obj=Object.create(null),this.size=0,null!=t){var n;n=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var r=0;r<n.length;r++)this.add(n[r])}},[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}},{key:"delete",value:function(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter(function(t){return e.has(t)})}},{key:"forEach",value:function(e,t){return this.toArray().forEach(e,t)}}])}(),rX="undefined"!==("undefined"==typeof Set?"undefined":ZY(Set))?Set:nX,iX=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e&&void 0!==t&&jq(e)){var r=t.group;if(null==r&&(r=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"===r||"edges"===r){this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===r:!!t.pannable,active:!1,classes:new rX,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),t.renderedPosition){var o=t.renderedPosition,a=e.pan(),s=e.zoom();i.position={x:(o.x-a.x)/s,y:(o.y-a.y)/s}}var l=[];Pq(t.classes)?l=t.classes:Oq(t.classes)&&(l=t.classes.split(/\s+/));for(var u=0,c=l.length;u<c;u++){var h=l[u];h&&""!==h&&i.classes.add(h)}this.createEmitter(),(void 0===n||n)&&this.restore();var d=t.style||t.css;d&&($W(),this.style(d))}else jW("An element must be of type `nodes` or `edges`; you specified `"+r+"`")}else jW("An element must have a core reference and parameters set")},oX=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,n,r){var i;Bq(t)&&!Uq(t)&&(t=(i=t).roots||i.root,n=i.visit,r=i.directed),r=2!==arguments.length||Dq(n)?r:n,n=Dq(n)?n:function(){};for(var o,a=this._private.cy,s=t=Oq(t)?this.filter(t):t,l=[],u=[],c={},h={},d={},f=0,p=this.byGroup(),g=p.nodes,m=p.edges,v=0;v<s.length;v++){var y=s[v],b=y.id();y.isNode()&&(l.unshift(y),e.bfs&&(d[b]=!0,u.push(y)),h[b]=0)}for(var x,w=function(){var t=e.bfs?l.shift():l.pop(),i=t.id();if(e.dfs){if(d[i])return 0;d[i]=!0,u.push(t)}var a,s=h[i],p=c[i],v=null!=p?p.source():null,y=null!=p?p.target():null,b=null==p?void 0:t.same(v)?y[0]:v[0];if(!0===(a=n(t,p,b,f++,s)))return o=t,1;if(!1===a)return 1;for(var x=t.connectedEdges().filter(function(e){return(!r||e.source().same(t))&&m.has(e)}),w=0;w<x.length;w++){var E=x[w],T=E.connectedNodes().filter(function(e){return!e.same(t)&&g.has(e)}),_=T.id();0===T.length||d[_]||(T=T[0],l.push(T),e.bfs&&(d[_]=!0,u.push(T)),c[_]=E,h[_]=h[i]+1)}};0!==l.length&&(0===(x=w())||1!==x););for(var E=a.collection(),T=0;T<u.length;T++){var _=u[T],k=c[_.id()];null!=k&&E.push(k),E.push(_)}return{path:a.collection(E),found:a.collection(o)}}},aX={breadthFirstSearch:oX({bfs:!0}),depthFirstSearch:oX({dfs:!0})};aX.bfs=aX.breadthFirstSearch,aX.dfs=aX.depthFirstSearch;var sX,lX,uX,cX={exports:{}},hX=cX.exports;function dX(){return sX||(sX=1,e=cX,function(){var t,n,r,i,o,a,s,l,u,c,h,d,f,p,g;r=Math.floor,c=Math.min,n=function(e,t){return e<t?-1:e>t?1:0},u=function(e,t,i,o,a){var s;if(null==i&&(i=0),null==a&&(a=n),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=e.length);i<o;)a(t,e[s=r((i+o)/2)])<0?o=s:i=s+1;return[].splice.apply(e,[i,i-i].concat(t)),t},a=function(e,t,r){return null==r&&(r=n),e.push(t),p(e,0,e.length-1,r)},o=function(e,t){var r,i;return null==t&&(t=n),r=e.pop(),e.length?(i=e[0],e[0]=r,g(e,0,t)):i=r,i},l=function(e,t,r){var i;return null==r&&(r=n),i=e[0],e[0]=t,g(e,0,r),i},s=function(e,t,r){var i;return null==r&&(r=n),e.length&&r(e[0],t)<0&&(t=(i=[e[0],t])[0],e[0]=i[1],g(e,0,r)),t},i=function(e,t){var i,o,a,s,l,u;for(null==t&&(t=n),l=[],o=0,a=(s=function(){u=[];for(var t=0,n=r(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)u.push(t);return u}.apply(this).reverse()).length;o<a;o++)i=s[o],l.push(g(e,i,t));return l},f=function(e,t,r){var i;if(null==r&&(r=n),-1!==(i=e.indexOf(t)))return p(e,0,i,r),g(e,i,r)},h=function(e,t,r){var o,a,l,u,c;if(null==r&&(r=n),!(a=e.slice(0,t)).length)return a;for(i(a,r),l=0,u=(c=e.slice(t)).length;l<u;l++)o=c[l],s(a,o,r);return a.sort(r).reverse()},d=function(e,t,r){var a,s,l,h,d,f,p,g,m;if(null==r&&(r=n),10*t<=e.length){if(!(l=e.slice(0,t).sort(r)).length)return l;for(s=l[l.length-1],h=0,f=(p=e.slice(t)).length;h<f;h++)r(a=p[h],s)<0&&(u(l,a,0,null,r),l.pop(),s=l[l.length-1]);return l}for(i(e,r),m=[],d=0,g=c(t,e.length);0<=g?d<g:d>g;0<=g?++d:--d)m.push(o(e,r));return m},p=function(e,t,r,i){var o,a,s;for(null==i&&(i=n),o=e[r];r>t&&i(o,a=e[s=r-1>>1])<0;)e[r]=a,r=s;return e[r]=o},g=function(e,t,r){var i,o,a,s,l;for(null==r&&(r=n),o=e.length,l=t,a=e[t],i=2*t+1;i<o;)(s=i+1)<o&&!(r(e[i],e[s])<0)&&(i=s),e[t]=e[i],i=2*(t=i)+1;return e[t]=a,p(e,l,t,r)},t=function(){function e(e){this.cmp=null!=e?e:n,this.nodes=[]}return e.push=a,e.pop=o,e.replace=l,e.pushpop=s,e.heapify=i,e.updateItem=f,e.nlargest=h,e.nsmallest=d,e.prototype.push=function(e){return a(this.nodes,e,this.cmp)},e.prototype.pop=function(){return o(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return s(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return i(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return f(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),e.exports=t}.call(hX)),cX.exports;var e}var fX,pX=hW(uX?lX:(uX=1,lX=dX())),gX=KW({root:null,weight:function(e){return 1},directed:!1}),mX={dijkstra:function(e){if(!Bq(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=gX(e),r=n.root,i=n.weight,o=n.directed,a=this,s=i,l=Oq(r)?this.filter(r)[0]:r[0],u={},c={},h={},d=this.byGroup(),f=d.nodes,p=d.edges;p.unmergeBy(function(e){return e.isLoop()});for(var g=function(e){return u[e.id()]},m=function(e,t){u[e.id()]=t,v.updateItem(e)},v=new pX(function(e,t){return g(e)-g(t)}),y=0;y<f.length;y++){var b=f[y];u[b.id()]=b.same(l)?0:1/0,v.push(b)}for(var x=function(e,t){for(var n,r=(o?e.edgesTo(t):e.edgesWith(t)).intersect(p),i=1/0,a=0;a<r.length;a++){var l=r[a],u=s(l);(u<i||!n)&&(i=u,n=l)}return{edge:n,dist:i}};v.size()>0;){var w=v.pop(),E=g(w),T=w.id();if(h[T]=E,E!==1/0)for(var _=w.neighborhood().intersect(f),k=0;k<_.length;k++){var A=_[k],S=A.id(),N=x(w,A),M=E+N.dist;M<g(A)&&(m(A,M),c[S]={node:w,edge:N.edge})}}return{distanceTo:function(e){var t=Oq(e)?f.filter(e)[0]:e[0];return h[t.id()]},pathTo:function(e){var t=Oq(e)?f.filter(e)[0]:e[0],n=[],r=t,i=r.id();if(t.length>0)for(n.unshift(t);c[i];){var o=c[i];n.unshift(o.edge),n.unshift(o.node),i=(r=o.node).id()}return a.spawn(n)}}}},vX={kruskal:function(e){e=e||function(e){return 1};for(var t=this.byGroup(),n=t.nodes,r=t.edges,i=n.length,o=new Array(i),a=n,s=function(e){for(var t=0;t<o.length;t++){if(o[t].has(e))return t}},l=0;l<i;l++)o[l]=this.spawn(n[l]);for(var u=r.sort(function(t,n){return e(t)-e(n)}),c=0;c<u.length;c++){var h=u[c],d=h.source()[0],f=h.target()[0],p=s(d),g=s(f),m=o[p],v=o[g];p!==g&&(a.merge(h),m.merge(v),o.splice(g,1))}return a}},yX=KW({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),bX={aStar:function(e){var t=this.cy(),n=yX(e),r=n.root,i=n.goal,o=n.heuristic,a=n.directed,s=n.weight;r=t.collection(r)[0],i=t.collection(i)[0];var l,u,c=r.id(),h=i.id(),d={},f={},p={},g=new pX(function(e,t){return f[e.id()]-f[t.id()]}),m=new rX,v={},y={},b=function(e,t){g.push(e),m.add(t)},x=function(){l=g.pop(),u=l.id(),m.delete(u)},w=function(e){return m.has(e)};b(r,c),d[c]=0,f[c]=o(r);for(var E=0;g.size()>0;){if(x(),E++,u===h){for(var T=[],_=i,k=h,A=y[k];T.unshift(_),null!=A&&T.unshift(A),null!=(_=v[k]);)A=y[k=_.id()];return{found:!0,distance:d[u],path:this.spawn(T),steps:E}}p[u]=!0;for(var S=l._private.edges,N=0;N<S.length;N++){var M=S[N];if(this.hasElementWithId(M.id())&&(!a||M.data("source")===u)){var C=M.source(),I=M.target(),R=C.id()!==u?C:I,L=R.id();if(this.hasElementWithId(L)&&!p[L]){var O=d[u]+s(M);w(L)?O<d[L]&&(d[L]=O,f[L]=O+o(R),v[L]=l,y[L]=M):(d[L]=O,f[L]=O+o(R),b(R,L),v[L]=l,y[L]=M)}}}}return{found:!1,distance:void 0,path:void 0,steps:E}}},xX=KW({weight:function(e){return 1},directed:!1}),wX={floydWarshall:function(e){for(var t=this.cy(),n=xX(e),r=n.weight,i=n.directed,o=r,a=this.byGroup(),s=a.nodes,l=a.edges,u=s.length,c=u*u,h=function(e){return s.indexOf(e)},d=function(e){return s[e]},f=new Array(c),p=0;p<c;p++){var g=p%u,m=(p-g)/u;f[p]=m===g?0:1/0}for(var v=new Array(c),y=new Array(c),b=0;b<l.length;b++){var x=l[b],w=x.source()[0],E=x.target()[0];if(w!==E){var T=h(w),_=h(E),k=T*u+_,A=o(x);if(f[k]>A&&(f[k]=A,v[k]=_,y[k]=x),!i){var S=_*u+T;!i&&f[S]>A&&(f[S]=A,v[S]=T,y[S]=x)}}}for(var N=0;N<u;N++)for(var M=0;M<u;M++)for(var C=M*u+N,I=0;I<u;I++){var R=M*u+I,L=N*u+I;f[C]+f[L]<f[R]&&(f[R]=f[C]+f[L],v[R]=v[C])}var O=function(e){return h(function(e){return(Oq(e)?t.filter(e):e)[0]}(e))};return{distance:function(e,t){var n=O(e),r=O(t);return f[n*u+r]},path:function(e,n){var r=O(e),i=O(n),o=d(r);if(r===i)return o.collection();if(null==v[r*u+i])return t.collection();var a,s=t.collection(),l=r;for(s.merge(o);r!==i;)l=r,r=v[r*u+i],a=y[l*u+r],s.merge(a),s.merge(d(r));return s}}}},EX=KW({weight:function(e){return 1},directed:!1,root:null}),TX={bellmanFord:function(e){var t=this,n=EX(e),r=n.weight,i=n.directed,o=n.root,a=r,s=this,l=this.cy(),u=this.byGroup(),c=u.edges,h=u.nodes,d=h.length,f=new tX,p=!1,g=[];o=l.collection(o)[0],c.unmergeBy(function(e){return e.isLoop()});for(var m=c.length,v=function(e){var t=f.get(e.id());return t||(t={},f.set(e.id(),t)),t},y=function(e){return(Oq(e)?l.$(e):e)[0]},b=0;b<d;b++){var x=h[b],w=v(x);x.same(o)?w.dist=0:w.dist=1/0,w.pred=null,w.edge=null}for(var E=!1,T=function(e,t,n,r,i,o){var a=r.dist+o;a<i.dist&&!n.same(r.edge)&&(i.dist=a,i.pred=e,i.edge=n,E=!0)},_=1;_<d;_++){E=!1;for(var k=0;k<m;k++){var A=c[k],S=A.source(),N=A.target(),M=a(A),C=v(S),I=v(N);T(S,0,A,C,I,M),i||T(N,0,A,I,C,M)}if(!E)break}if(E)for(var R=[],L=0;L<m;L++){var O=c[L],D=O.source(),P=O.target(),B=a(O),F=v(D).dist,z=v(P).dist;if(F+B<z||!i&&z+B<F){if(p||($W(),p=!0),!1===e.findNegativeWeightCycles)break;var U=[];F+B<z&&U.push(D),!i&&z+B<F&&U.push(P);for(var G=U.length,V=0;V<G;V++){var j=U[V],H=[j];H.push(v(j).edge);for(var $=v(j).pred;-1===H.indexOf($);)H.push($),H.push(v($).edge),$=v($).pred;for(var Y=(H=H.slice(H.indexOf($)))[0].id(),q=0,W=2;W<H.length;W+=2)H[W].id()<Y&&(Y=H[W].id(),q=W);(H=H.slice(q).concat(H.slice(0,q))).push(H[0]);var X=H.map(function(e){return e.id()}).join(",");-1===R.indexOf(X)&&(g.push(s.spawn(H)),R.push(X))}}}return{distanceTo:function(e){return v(y(e)).dist},pathTo:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r=[],i=y(e);;){if(null==i)return t.spawn();var a=v(i),l=a.edge,u=a.pred;if(r.unshift(i[0]),i.same(n)&&r.length>0)break;null!=l&&r.unshift(l),i=u}return s.spawn(r)},hasNegativeWeightCycle:p,negativeWeightCycles:g}}},_X=Math.sqrt(2),kX=function(e,t,n){0===n.length&&jW("Karger-Stein must be run on a connected (sub)graph");for(var r=n[e],i=r[1],o=r[2],a=t[i],s=t[o],l=n,u=l.length-1;u>=0;u--){var c=l[u],h=c[1],d=c[2];(t[h]===a&&t[d]===s||t[h]===s&&t[d]===a)&&l.splice(u,1)}for(var f=0;f<l.length;f++){var p=l[f];p[1]===s?(l[f]=p.slice(),l[f][1]=a):p[2]===s&&(l[f]=p.slice(),l[f][2]=a)}for(var g=0;g<t.length;g++)t[g]===s&&(t[g]=a);return l},AX=function(e,t,n,r){for(;n>r;){var i=Math.floor(Math.random()*t.length);t=kX(i,e,t),n--}return t},SX={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,r=t.edges;r.unmergeBy(function(e){return e.isLoop()});var i=n.length,o=r.length,a=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),s=Math.floor(i/_X);if(!(i<2)){for(var l=[],u=0;u<o;u++){var c=r[u];l.push([u,n.indexOf(c.source()),n.indexOf(c.target())])}for(var h=1/0,d=[],f=new Array(i),p=new Array(i),g=new Array(i),m=function(e,t){for(var n=0;n<i;n++)t[n]=e[n]},v=0;v<=a;v++){for(var y=0;y<i;y++)p[y]=y;var b=AX(p,l.slice(),i,s),x=b.slice();m(p,g);var w=AX(p,b,s,2),E=AX(g,x,s,2);w.length<=E.length&&w.length<h?(h=w.length,d=w,m(p,f)):E.length<=w.length&&E.length<h&&(h=E.length,d=E,m(g,f))}for(var T=this.spawn(d.map(function(e){return r[e[0]]})),_=this.spawn(),k=this.spawn(),A=f[0],S=0;S<f.length;S++){var N=f[S],M=n[S];N===A?_.merge(M):k.merge(M)}var C=function(t){var n=e.spawn();return t.forEach(function(t){n.merge(t),t.connectedEdges().forEach(function(t){e.contains(t)&&!T.contains(t)&&n.merge(t)})}),n},I=[C(_),C(k)];return{cut:T,components:I,partition1:_,partition2:k}}jW("At least 2 nodes are required for Karger-Stein algorithm")}},NX=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},MX=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},CX=function(e){return{x:e[0],y:e[1]}},IX=function(e,t){return Math.atan2(t,e)-Math.PI/2},RX=Math.log2||function(e){return Math.log(e)/Math.log(2)},LX=function(e){return e>0?1:e<0?-1:0},OX=function(e,t){return Math.sqrt(DX(e,t))},DX=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},PX=function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=e[r];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},BX=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},FX=function(e,t,n,r){return{x:BX(e.x,t.x,n.x,r),y:BX(e.y,t.y,n.y,r)}},zX=function(e,t,n){return Math.max(e,Math.min(n,t))},UX=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},GX=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},VX=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},jX=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},HX=function(e){var t,n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===o.length)t=n=r=i=o[0];else if(2===o.length)t=r=o[0],i=n=o[1];else if(4===o.length){var a=WY(o,4);t=a[0],n=a[1],r=a[2],i=a[3]}return e.x1-=i,e.x2+=n,e.y1-=t,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},$X=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},YX=function(e,t){return!(e.x1>t.x2)&&(!(t.x1>e.x2)&&(!(e.x2<t.x1)&&(!(t.x2<e.x1)&&(!(e.y2<t.y1)&&(!(t.y2<e.y1)&&(!(e.y1>t.y2)&&!(t.y1>e.y2)))))))},qX=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},WX=function(e,t){return qX(e,t.x,t.y)},XX=function(e,t){return qX(e,t.x1,t.y1)&&qX(e,t.x2,t.y2)},KX=null!==(fX=Math.hypot)&&void 0!==fX?fX:function(e,t){return Math.sqrt(e*e+t*t)};function ZX(e,t,n,r,i,o){var a=function(e,t){if(e.length<3)throw new Error("Need at least 3 vertices");var n=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},r=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},i=function(e,t){return{x:e.x*t,y:e.y*t}},o=function(e,t){return e.x*t.y-e.y*t.x},a=function(e){var t=KX(e.x,e.y);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},s=function(e,t,a,s){var l=r(t,e),u=r(s,a),c=o(l,u);if(Math.abs(c)<1e-9)return n(e,i(l,.5));var h=o(r(a,e),u)/c;return n(e,i(l,h))},l=e.map(function(e){return{x:e.x,y:e.y}});(function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n],i=e[(n+1)%e.length];t+=r.x*i.y-i.x*r.y}return t/2})(l)<0&&l.reverse();for(var u=l.length,c=[],h=0;h<u;h++){var d=l[h],f=l[(h+1)%u],p=r(f,d),g=a({x:p.y,y:-p.x});c.push(g)}for(var m=c.map(function(e,r){return{p1:n(l[r],i(e,t)),p2:n(l[(r+1)%u],i(e,t))}}),v=[],y=0;y<u;y++){var b=m[(y-1+u)%u],x=m[y],w=s(b.p1,b.p2,x.p1,x.p2);v.push(w)}return v}(hK(e,t,n,r,i),o),s=UX();return a.forEach(function(e){return VX(s,e.x,e.y)}),s}var QX=function(e,t,n,r,i,o,a){var s,l,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"auto",c="auto"===u?vK(i,o):u,h=i/2,d=o/2,f=(c=Math.min(c,h,d))!==h,p=c!==d;if(f){var g=r-d-a;if((s=cK(e,t,n,r,n-h+c-a,g,n+h-c+a,g,!1)).length>0)return s}if(p){var m=n+h+a;if((s=cK(e,t,n,r,m,r-d+c-a,m,r+d-c+a,!1)).length>0)return s}if(f){var v=r+d+a;if((s=cK(e,t,n,r,n-h+c-a,v,n+h-c+a,v,!1)).length>0)return s}if(p){var y=n-h-a;if((s=cK(e,t,n,r,y,r-d+c-a,y,r+d-c+a,!1)).length>0)return s}var b=n-h+c,x=r-d+c;if((l=lK(e,t,n,r,b,x,c+a)).length>0&&l[0]<=b&&l[1]<=x)return[l[0],l[1]];var w=n+h-c,E=r-d+c;if((l=lK(e,t,n,r,w,E,c+a)).length>0&&l[0]>=w&&l[1]<=E)return[l[0],l[1]];var T=n+h-c,_=r+d-c;if((l=lK(e,t,n,r,T,_,c+a)).length>0&&l[0]>=T&&l[1]>=_)return[l[0],l[1]];var k=n-h+c,A=r+d-c;return(l=lK(e,t,n,r,k,A,c+a)).length>0&&l[0]<=k&&l[1]>=A?[l[0],l[1]]:[]},JX=function(e,t,n,r,i,o,a){var s=a,l=Math.min(n,i),u=Math.max(n,i),c=Math.min(r,o),h=Math.max(r,o);return l-s<=e&&e<=u+s&&c-s<=t&&t<=h+s},eK=function(e,t,n,r,i,o,a,s,l){var u=Math.min(n,a,i)-l,c=Math.max(n,a,i)+l,h=Math.min(r,s,o)-l,d=Math.max(r,s,o)+l;return!(e<u||e>c||t<h||t>d)},tK=function(e,t,n,r,i,o,a,s){var l=[];!function(e,t,n,r,i){var o,a,s,l,u,c,h,d;0===e&&(e=1e-5),s=-27*(r/=e)+(t/=e)*(9*(n/=e)-t*t*2),o=(a=(3*n-t*t)/9)*a*a+(s/=54)*s,i[1]=0,h=t/3,o>0?(u=(u=s+Math.sqrt(o))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),c=(c=s-Math.sqrt(o))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+u+c,h+=(u+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+u)/2,i[3]=h,i[5]=-h):(i[5]=i[3]=0,0===o?(d=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=2*d-h,i[4]=i[2]=-(d+h)):(l=(a=-a)*a*a,l=Math.acos(s/Math.sqrt(l)),d=2*Math.sqrt(a),i[0]=-h+d*Math.cos(l/3),i[2]=-h+d*Math.cos((l+2*Math.PI)/3),i[4]=-h+d*Math.cos((l+4*Math.PI)/3)))}(1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,3*n*n-6*n*i+n*a-n*e+2*i*i+2*i*e-a*e+3*r*r-6*r*o+r*s-r*t+2*o*o+2*o*t-s*t,1*n*i-n*n+n*e-i*e+r*o-r*r+r*t-o*t,l);for(var u=[],c=0;c<6;c+=2)Math.abs(l[c+1])<1e-7&&l[c]>=0&&l[c]<=1&&u.push(l[c]);u.push(1),u.push(0);for(var h,d,f,p=-1,g=0;g<u.length;g++)h=Math.pow(1-u[g],2)*n+2*(1-u[g])*u[g]*i+u[g]*u[g]*a,d=Math.pow(1-u[g],2)*r+2*(1-u[g])*u[g]*o+u[g]*u[g]*s,f=Math.pow(h-e,2)+Math.pow(d-t,2),p>=0?f<p&&(p=f):p=f;return p},nK=function(e,t,n,r,i,o){var a=[e-n,t-r],s=[i-n,o-r],l=s[0]*s[0]+s[1]*s[1],u=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/l;return c<0?u:h>l?(e-i)*(e-i)+(t-o)*(t-o):u-h},rK=function(e,t,n){for(var r,i,o,a,s=0,l=0;l<n.length/2;l++)if(r=n[2*l],i=n[2*l+1],l+1<n.length/2?(o=n[2*(l+1)],a=n[2*(l+1)+1]):(o=n[2*(l+1-n.length/2)],a=n[2*(l+1-n.length/2)+1]),r==e&&o==e);else{if(!(r>=e&&e>=o||r<=e&&e<=o))continue;(e-r)/(o-r)*(a-i)+i>t&&s++}return s%2!=0},iK=function(e,t,n,r,i,o,a,s,l){var u,c=new Array(n.length);null!=s[0]?(u=Math.atan(s[1]/s[0]),s[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=s;for(var h,d=Math.cos(-u),f=Math.sin(-u),p=0;p<c.length/2;p++)c[2*p]=o/2*(n[2*p]*d-n[2*p+1]*f),c[2*p+1]=a/2*(n[2*p+1]*d+n[2*p]*f),c[2*p]+=r,c[2*p+1]+=i;if(l>0){var g=aK(c,-l);h=oK(g)}else h=c;return rK(e,t,h)},oK=function(e){for(var t,n,r,i,o,a,s,l,u=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],n=e[4*c+1],r=e[4*c+2],i=e[4*c+3],c<e.length/4-1?(o=e[4*(c+1)],a=e[4*(c+1)+1],s=e[4*(c+1)+2],l=e[4*(c+1)+3]):(o=e[0],a=e[1],s=e[2],l=e[3]);var h=cK(t,n,r,i,o,a,s,l,!0);u[2*c]=h[0],u[2*c+1]=h[1]}return u},aK=function(e,t){for(var n,r,i,o,a=new Array(2*e.length),s=0;s<e.length/2;s++){n=e[2*s],r=e[2*s+1],s<e.length/2-1?(i=e[2*(s+1)],o=e[2*(s+1)+1]):(i=e[0],o=e[1]);var l=o-r,u=-(i-n),c=Math.sqrt(l*l+u*u),h=l/c,d=u/c;a[4*s]=n+h*t,a[4*s+1]=r+d*t,a[4*s+2]=i+h*t,a[4*s+3]=o+d*t}return a},sK=function(e,t,n,r,i,o,a){return e-=i,t-=o,(e/=n/2+a)*e+(t/=r/2+a)*t<=1},lK=function(e,t,n,r,i,o,a){var s=[n-e,r-t],l=[e-i,t-o],u=s[0]*s[0]+s[1]*s[1],c=2*(l[0]*s[0]+l[1]*s[1]),h=c*c-4*u*(l[0]*l[0]+l[1]*l[1]-a*a);if(h<0)return[];var d=(-c+Math.sqrt(h))/(2*u),f=(-c-Math.sqrt(h))/(2*u),p=Math.min(d,f),g=Math.max(d,f),m=[];if(p>=0&&p<=1&&m.push(p),g>=0&&g<=1&&m.push(g),0===m.length)return[];var v=m[0]*s[0]+e,y=m[0]*s[1]+t;return m.length>1?m[0]==m[1]?[v,y]:[v,y,m[1]*s[0]+e,m[1]*s[1]+t]:[v,y]},uK=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},cK=function(e,t,n,r,i,o,a,s,l){var u=e-i,c=n-e,h=a-i,d=t-o,f=r-t,p=s-o,g=h*d-p*u,m=c*d-f*u,v=p*c-h*f;if(0!==v){var y=g/v,b=m/v,x=-.001;return x<=y&&y<=1.001&&x<=b&&b<=1.001||l?[e+y*c,t+y*f]:[]}return 0===g||0===m?uK(e,n,a)===a?[a,s]:uK(e,n,i)===i?[i,o]:uK(i,a,n)===n?[n,r]:[]:[]},hK=function(e,t,n,r,i){var o=[],a=r/2,s=i/2,l=t,u=n;o.push({x:l+a*e[0],y:u+s*e[1]});for(var c=1;c<e.length/2;c++)o.push({x:l+a*e[2*c],y:u+s*e[2*c+1]});return o},dK=function(e,t,n,r,i,o,a,s){var l,u,c,h,d,f,p=[],g=new Array(n.length),m=!0;if(null==o&&(m=!1),m){for(var v=0;v<g.length/2;v++)g[2*v]=n[2*v]*o+r,g[2*v+1]=n[2*v+1]*a+i;if(s>0){var y=aK(g,-s);u=oK(y)}else u=g}else u=n;for(var b=0;b<u.length/2;b++)c=u[2*b],h=u[2*b+1],b<u.length/2-1?(d=u[2*(b+1)],f=u[2*(b+1)+1]):(d=u[0],f=u[1]),0!==(l=cK(e,t,r,i,c,h,d,f)).length&&p.push(l[0],l[1]);return p},fK=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[t[0]+o*r[0],t[1]+o*r[1]]},pK=function(e,t){var n=mK(e,t);return n=gK(n)},gK=function(e){for(var t,n,r=e.length/2,i=1/0,o=1/0,a=-1/0,s=-1/0,l=0;l<r;l++)t=e[2*l],n=e[2*l+1],i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),s=Math.max(s,n);for(var u=2/(a-i),c=2/(s-o),h=0;h<r;h++)t=e[2*h]=e[2*h]*u,n=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),s=Math.max(s,n);if(o<-1)for(var d=0;d<r;d++)n=e[2*d+1]=e[2*d+1]+(-1-o);return e},mK=function(e,t){var n=1/e*2*Math.PI,r=e%2==0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var i,o=new Array(2*e),a=0;a<e;a++)i=a*n+r,o[2*a]=Math.cos(i),o[2*a+1]=Math.sin(-i);return o},vK=function(e,t){return Math.min(e/4,t/4,8)},yK=function(e,t){return Math.min(e/10,t/10,8)},bK=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function xK(e,t){function n(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=e[(n+1)%e.length],o={x:i.x-r.x,y:i.y-r.y},a={x:-o.y,y:o.x},s=Math.sqrt(a.x*a.x+a.y*a.y);t.push({x:a.x/s,y:a.y/s})}return t}function r(e,t){var n,r=1/0,i=-1/0,o=YY(e);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a.x*t.x+a.y*t.y;r=Math.min(r,s),i=Math.max(i,s)}}catch(l){o.e(l)}finally{o.f()}return{min:r,max:i}}function i(e,t){return!(e.max<t.min||t.max<e.min)}var o,a=YY([].concat(XY(n(e)),XY(n(t))));try{for(a.s();!(o=a.n()).done;){var s=o.value;if(!i(r(e,s),r(t,s)))return!1}}catch(l){a.e(l)}finally{a.f()}return!0}var wK=KW({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),EK={pageRank:function(e){for(var t=wK(e),n=t.dampingFactor,r=t.precision,i=t.iterations,o=t.weight,a=this._private.cy,s=this.byGroup(),l=s.nodes,u=s.edges,c=l.length,h=c*c,d=u.length,f=new Array(h),p=new Array(c),g=(1-n)/c,m=0;m<c;m++){for(var v=0;v<c;v++){f[m*c+v]=0}p[m]=0}for(var y=0;y<d;y++){var b=u[y],x=b.data("source"),w=b.data("target");if(x!==w){var E=l.indexOfId(x),T=l.indexOfId(w),_=o(b);f[T*c+E]+=_,p[E]+=_}}for(var k=1/c+g,A=0;A<c;A++)if(0===p[A])for(var S=0;S<c;S++){f[S*c+A]=k}else for(var N=0;N<c;N++){var M=N*c+A;f[M]=f[M]/p[A]+g}for(var C,I=new Array(c),R=new Array(c),L=0;L<c;L++)I[L]=1;for(var O=0;O<i;O++){for(var D=0;D<c;D++)R[D]=0;for(var P=0;P<c;P++)for(var B=0;B<c;B++){var F=P*c+B;R[P]+=f[F]*I[B]}PX(R),C=I,I=R,R=C;for(var z=0,U=0;U<c;U++){var G=C[U]-I[U];z+=G*G}if(z<r)break}return{rank:function(e){return e=a.collection(e)[0],I[l.indexOf(e)]}}}},TK=KW({root:null,weight:function(e){return 1},directed:!1,alpha:0}),_K={degreeCentralityNormalized:function(e){e=TK(e);var t=this.cy(),n=this.nodes(),r=n.length;if(e.directed){for(var i={},o={},a=0,s=0,l=0;l<r;l++){var u=n[l],c=u.id();e.root=u;var h=this.degreeCentrality(e);a<h.indegree&&(a=h.indegree),s<h.outdegree&&(s=h.outdegree),i[c]=h.indegree,o[c]=h.outdegree}return{indegree:function(e){return 0==a?0:(Oq(e)&&(e=t.filter(e)),i[e.id()]/a)},outdegree:function(e){return 0===s?0:(Oq(e)&&(e=t.filter(e)),o[e.id()]/s)}}}for(var d={},f=0,p=0;p<r;p++){var g=n[p];e.root=g;var m=this.degreeCentrality(e);f<m.degree&&(f=m.degree),d[g.id()]=m.degree}return{degree:function(e){return 0===f?0:(Oq(e)&&(e=t.filter(e)),d[e.id()]/f)}}},degreeCentrality:function(e){e=TK(e);var t=this.cy(),n=this,r=e,i=r.root,o=r.weight,a=r.directed,s=r.alpha;if(i=t.collection(i)[0],a){for(var l=i.connectedEdges(),u=l.filter(function(e){return e.target().same(i)&&n.has(e)}),c=l.filter(function(e){return e.source().same(i)&&n.has(e)}),h=u.length,d=c.length,f=0,p=0,g=0;g<u.length;g++)f+=o(u[g]);for(var m=0;m<c.length;m++)p+=o(c[m]);return{indegree:Math.pow(h,1-s)*Math.pow(f,s),outdegree:Math.pow(d,1-s)*Math.pow(p,s)}}for(var v=i.connectedEdges().intersection(n),y=v.length,b=0,x=0;x<v.length;x++)b+=o(v[x]);return{degree:Math.pow(y,1-s)*Math.pow(b,s)}}};_K.dc=_K.degreeCentrality,_K.dcn=_K.degreeCentralityNormalised=_K.degreeCentralityNormalized;var kK=KW({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),AK={closenessCentralityNormalized:function(e){for(var t=kK(e),n=t.harmonic,r=t.weight,i=t.directed,o=this.cy(),a={},s=0,l=this.nodes(),u=this.floydWarshall({weight:r,directed:i}),c=0;c<l.length;c++){for(var h=0,d=l[c],f=0;f<l.length;f++)if(c!==f){var p=u.distance(d,l[f]);h+=n?1/p:p}n||(h=1/h),s<h&&(s=h),a[d.id()]=h}return{closeness:function(e){return 0==s?0:(e=Oq(e)?o.filter(e)[0].id():e.id(),a[e]/s)}}},closenessCentrality:function(e){var t=kK(e),n=t.root,r=t.weight,i=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var a=this.dijkstra({root:n,weight:r,directed:i}),s=0,l=this.nodes(),u=0;u<l.length;u++){var c=l[u];if(!c.same(n)){var h=a.distanceTo(c);s+=o?1/h:h}}return o?s:1/s}};AK.cc=AK.closenessCentrality,AK.ccn=AK.closenessCentralityNormalised=AK.closenessCentralityNormalized;var SK=KW({weight:null,directed:!1}),NK={betweennessCentrality:function(e){for(var t=SK(e),n=t.directed,r=t.weight,i=null!=r,o=this.cy(),a=this.nodes(),s={},l={},u=0,c=function(e,t){l[e]=t,t>u&&(u=t)},h=function(e){return l[e]},d=0;d<a.length;d++){var f=a[d],p=f.id();s[p]=n?f.outgoers().nodes():f.openNeighborhood().nodes(),c(p,0)}for(var g=function(){for(var e=a[m].id(),t=[],n={},l={},u={},d=new pX(function(e,t){return u[e]-u[t]}),f=0;f<a.length;f++){var p=a[f].id();n[p]=[],l[p]=0,u[p]=1/0}for(l[e]=1,u[e]=0,d.push(e);!d.empty();){var g=d.pop();if(t.push(g),i)for(var v=0;v<s[g].length;v++){var y=s[g][v],b=o.getElementById(g),x=void 0;x=b.edgesTo(y).length>0?b.edgesTo(y)[0]:y.edgesTo(b)[0];var w=r(x);y=y.id(),u[y]>u[g]+w&&(u[y]=u[g]+w,d.nodes.indexOf(y)<0?d.push(y):d.updateItem(y),l[y]=0,n[y]=[]),u[y]==u[g]+w&&(l[y]=l[y]+l[g],n[y].push(g))}else for(var E=0;E<s[g].length;E++){var T=s[g][E].id();u[T]==1/0&&(d.push(T),u[T]=u[g]+1),u[T]==u[g]+1&&(l[T]=l[T]+l[g],n[T].push(g))}}for(var _={},k=0;k<a.length;k++)_[a[k].id()]=0;for(;t.length>0;){for(var A=t.pop(),S=0;S<n[A].length;S++){var N=n[A][S];_[N]=_[N]+l[N]/l[A]*(1+_[A])}A!=a[m].id()&&c(A,h(A)+_[A])}},m=0;m<a.length;m++)g();var v={betweenness:function(e){var t=o.collection(e).id();return h(t)},betweennessNormalized:function(e){if(0==u)return 0;var t=o.collection(e).id();return h(t)/u}};return v.betweennessNormalised=v.betweennessNormalized,v}};NK.bc=NK.betweennessCentrality;var MK=KW({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),CK=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r](e);return n},IK=function(e,t){for(var n,r=0;r<t;r++){n=0;for(var i=0;i<t;i++)n+=e[i*t+r];for(var o=0;o<t;o++)e[o*t+r]=e[o*t+r]/n}},RK=function(e,t,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)r[i*n+o]=0;for(var a=0;a<n;a++)for(var s=0;s<n;s++)r[i*n+s]+=e[i*n+a]*t[a*n+s]}return r},LK=function(e,t,n){for(var r=e.slice(0),i=1;i<n;i++)e=RK(e,r,t);return e},OK=function(e,t,n){for(var r=new Array(t*t),i=0;i<t*t;i++)r[i]=Math.pow(e[i],n);return IK(r,t),r},DK=function(e,t,n,r){for(var i=0;i<n;i++){if(Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r)!==Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r))return!1}return!0},PK=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},BK=function(e){for(var t=this.nodes(),n=this.edges(),r=this.cy(),i=function(e){return MK(e)}(e),o={},a=0;a<t.length;a++)o[t[a].id()]=a;for(var s,l=t.length,u=l*l,c=new Array(u),h=0;h<u;h++)c[h]=0;for(var d=0;d<n.length;d++){var f=n[d],p=o[f.source().id()],g=o[f.target().id()],m=CK(f,i.attributes);c[p*l+g]+=m,c[g*l+p]+=m}!function(e,t,n){for(var r=0;r<t;r++)e[r*t+r]=n}(c,l,i.multFactor),IK(c,l);for(var v=!0,y=0;v&&y<i.maxIterations;)v=!1,s=LK(c,l,i.expandFactor),c=OK(s,l,i.inflateFactor),DK(c,s,u,4)||(v=!0),y++;var b=function(e,t,n,r){for(var i=[],o=0;o<t;o++){for(var a=[],s=0;s<t;s++)Math.round(1e3*e[o*t+s])/1e3>0&&a.push(n[s]);0!==a.length&&i.push(r.collection(a))}return i}(c,l,t,r);return b=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&PK(e[t],e[n])&&e.splice(n,1);return e}(b),b},FK={markovClustering:BK,mcl:BK},zK=function(e){return e},UK=function(e,t){return Math.abs(t-e)},GK=function(e,t,n){return e+UK(t,n)},VK=function(e,t,n){return e+Math.pow(n-t,2)},jK=function(e){return Math.sqrt(e)},HK=function(e,t,n){return Math.max(e,UK(t,n))},$K=function(e,t,n,r,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:zK,a=r,s=0;s<e;s++)a=i(a,t(s),n(s));return o(a)},YK={euclidean:function(e,t,n){return e>=2?$K(e,t,n,0,VK,jK):$K(e,t,n,0,GK)},squaredEuclidean:function(e,t,n){return $K(e,t,n,0,VK)},manhattan:function(e,t,n){return $K(e,t,n,0,GK)},max:function(e,t,n){return $K(e,t,n,-1/0,HK)}};function qK(e,t,n,r,i,o){var a;return a=Dq(e)?e:YK[e]||YK.euclidean,0===t&&Dq(e)?a(i,o):a(t,n,r,i,o)}YK["squared-euclidean"]=YK.squaredEuclidean,YK.squaredeuclidean=YK.squaredEuclidean;var WK=KW({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),XK=function(e){return WK(e)},KK=function(e,t,n,r,i){var o="kMedoids"!==i?function(e){return n[e]}:function(e){return r[e](n)},a=n,s=t;return qK(e,r.length,o,function(e){return r[e](t)},a,s)},ZK=function(e,t,n){for(var r=n.length,i=new Array(r),o=new Array(r),a=new Array(t),s=null,l=0;l<r;l++)i[l]=e.min(n[l]).value,o[l]=e.max(n[l]).value;for(var u=0;u<t;u++){s=[];for(var c=0;c<r;c++)s[c]=Math.random()*(o[c]-i[c])+i[c];a[u]=s}return a},QK=function(e,t,n,r,i){for(var o=1/0,a=0,s=0;s<t.length;s++){var l=KK(n,e,t[s],r,i);l<o&&(o=l,a=s)}return a},JK=function(e,t,n){for(var r=[],i=null,o=0;o<t.length;o++)n[(i=t[o]).id()]===e&&r.push(i);return r},eZ=function(e,t,n){return Math.abs(t-e)<=n},tZ=function(e,t,n){for(var r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++){if(Math.abs(e[r][i]-t[r][i])>n)return!1}return!0},nZ=function(e,t,n){for(var r=0;r<n;r++)if(e===t[r])return!0;return!1},rZ=function(e,t){var n=new Array(t);if(e.length<50)for(var r=0;r<t;r++){for(var i=e[Math.floor(Math.random()*e.length)];nZ(i,n,r);)i=e[Math.floor(Math.random()*e.length)];n[r]=i}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},iZ=function(e,t,n){for(var r=0,i=0;i<t.length;i++)r+=KK("manhattan",t[i],e,n,"kMedoids");return r},oZ=function(e,t,n,r,i){for(var o,a,s=0;s<t.length;s++)for(var l=0;l<e.length;l++)r[s][l]=Math.pow(n[s][l],i.m);for(var u=0;u<e.length;u++)for(var c=0;c<i.attributes.length;c++){o=0,a=0;for(var h=0;h<t.length;h++)o+=r[h][u]*i.attributes[c](t[h]),a+=r[h][u];e[u][c]=o/a}},aZ=function(e,t,n,r,i){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var a,s,l,u=2/(i.m-1),c=0;c<n.length;c++)for(var h=0;h<r.length;h++){a=0;for(var d=0;d<n.length;d++)s=KK(i.distance,r[h],n[c],i.attributes,"cmeans"),l=KK(i.distance,r[h],n[d],i.attributes,"cmeans"),a+=Math.pow(s/l,u);e[h][c]=1/a}},sZ=function(e){var t,n,r,i,o,a=this.cy(),s=this.nodes(),l=XK(e);i=new Array(s.length);for(var u=0;u<s.length;u++)i[u]=new Array(l.k);r=new Array(s.length);for(var c=0;c<s.length;c++)r[c]=new Array(l.k);for(var h=0;h<s.length;h++){for(var d=0,f=0;f<l.k;f++)r[h][f]=Math.random(),d+=r[h][f];for(var p=0;p<l.k;p++)r[h][p]=r[h][p]/d}n=new Array(l.k);for(var g=0;g<l.k;g++)n[g]=new Array(l.attributes.length);o=new Array(s.length);for(var m=0;m<s.length;m++)o[m]=new Array(l.k);for(var v=!0,y=0;v&&y<l.maxIterations;)v=!1,oZ(n,s,r,o,l),aZ(r,i,n,s,l),tZ(r,i,l.sensitivityThreshold)||(v=!0),y++;return t=function(e,t,n,r){for(var i,o,a=new Array(n.k),s=0;s<a.length;s++)a[s]=[];for(var l=0;l<t.length;l++){i=-1/0,o=-1;for(var u=0;u<t[0].length;u++)t[l][u]>i&&(i=t[l][u],o=u);a[o].push(e[l])}for(var c=0;c<a.length;c++)a[c]=r.collection(a[c]);return a}(s,r,l,a),{clusters:t,degreeOfMembership:r}},lZ={kMeans:function(e){var t,n=this.cy(),r=this.nodes(),i=null,o=XK(e),a=new Array(o.k),s={};o.testMode?"number"==typeof o.testCentroids?(o.testCentroids,t=ZK(r,o.k,o.attributes)):t="object"===ZY(o.testCentroids)?o.testCentroids:ZK(r,o.k,o.attributes):t=ZK(r,o.k,o.attributes);for(var l=!0,u=0;l&&u<o.maxIterations;){for(var c=0;c<r.length;c++)s[(i=r[c]).id()]=QK(i,t,o.distance,o.attributes,"kMeans");l=!1;for(var h=0;h<o.k;h++){var d=JK(h,r,s);if(0!==d.length){for(var f=o.attributes.length,p=t[h],g=new Array(f),m=new Array(f),v=0;v<f;v++){m[v]=0;for(var y=0;y<d.length;y++)i=d[y],m[v]+=o.attributes[v](i);g[v]=m[v]/d.length,eZ(g[v],p[v],o.sensitivityThreshold)||(l=!0)}t[h]=g,a[h]=n.collection(d)}}u++}return a},kMedoids:function(e){var t,n,r=this.cy(),i=this.nodes(),o=null,a=XK(e),s=new Array(a.k),l={},u=new Array(a.k);a.testMode?"number"==typeof a.testCentroids||(t="object"===ZY(a.testCentroids)?a.testCentroids:rZ(i,a.k)):t=rZ(i,a.k);for(var c=!0,h=0;c&&h<a.maxIterations;){for(var d=0;d<i.length;d++)l[(o=i[d]).id()]=QK(o,t,a.distance,a.attributes,"kMedoids");c=!1;for(var f=0;f<t.length;f++){var p=JK(f,i,l);if(0!==p.length){u[f]=iZ(t[f],p,a.attributes);for(var g=0;g<p.length;g++)(n=iZ(p[g],p,a.attributes))<u[f]&&(u[f]=n,t[f]=p[g],c=!0);s[f]=r.collection(p)}}h++}return s},fuzzyCMeans:sZ,fcm:sZ},uZ=KW({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),cZ={single:"min",complete:"max"},hZ=function(e,t,n,r,i){for(var o,a=0,s=1/0,l=i.attributes,u=function(e,t){return qK(i.distance,l.length,function(t){return l[t](e)},function(e){return l[e](t)},e,t)},c=0;c<e.length;c++){var h=e[c].key,d=n[h][r[h]];d<s&&(a=h,s=d)}if("threshold"===i.mode&&s>=i.threshold||"dendrogram"===i.mode&&1===e.length)return!1;var f,p=t[a],g=t[r[a]];f="dendrogram"===i.mode?{left:p,right:g,key:p.key}:{value:p.value.concat(g.value),key:p.key},e[p.index]=f,e.splice(g.index,1),t[p.key]=f;for(var m=0;m<e.length;m++){var v=e[m];p.key===v.key?o=1/0:"min"===i.linkage?(o=n[p.key][v.key],n[p.key][v.key]>n[g.key][v.key]&&(o=n[g.key][v.key])):"max"===i.linkage?(o=n[p.key][v.key],n[p.key][v.key]<n[g.key][v.key]&&(o=n[g.key][v.key])):o="mean"===i.linkage?(n[p.key][v.key]*p.size+n[g.key][v.key]*g.size)/(p.size+g.size):"dendrogram"===i.mode?u(v.value,p.value):u(v.value[0],p.value[0]),n[p.key][v.key]=n[v.key][p.key]=o}for(var y=0;y<e.length;y++){var b=e[y].key;if(r[b]===p.key||r[b]===g.key){for(var x=b,w=0;w<e.length;w++){var E=e[w].key;n[b][E]<n[b][x]&&(x=E)}r[b]=x}e[y].index=y}return p.key=g.key=p.index=g.index=null,!0},dZ=function(e,t,n){e&&(e.value?t.push(e.value):(e.left&&dZ(e.left,t),e.right&&dZ(e.right,t)))},fZ=function(e,t){if(!e)return"";if(e.left&&e.right){var n=fZ(e.left,t),r=fZ(e.right,t),i=t.add({group:"nodes",data:{id:n+","+r}});return t.add({group:"edges",data:{source:n,target:i.id()}}),t.add({group:"edges",data:{source:r,target:i.id()}}),i.id()}return e.value?e.value.id():void 0},pZ=function(e,t,n){if(!e)return[];var r=[],i=[],o=[];return 0===t?(e.left&&dZ(e.left,r),e.right&&dZ(e.right,i),o=r.concat(i),[n.collection(o)]):1===t?e.value?[n.collection(e.value)]:(e.left&&dZ(e.left,r),e.right&&dZ(e.right,i),[n.collection(r),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(r=pZ(e.left,t-1,n)),e.right&&(i=pZ(e.right,t-1,n)),r.concat(i))},gZ=function(e){for(var t=this.cy(),n=this.nodes(),r=function(e){var t=uZ(e),n=cZ[t.linkage];return null!=n&&(t.linkage=n),t}(e),i=r.attributes,o=function(e,t){return qK(r.distance,i.length,function(t){return i[t](e)},function(e){return i[e](t)},e,t)},a=[],s=[],l=[],u=[],c=0;c<n.length;c++){var h={value:"dendrogram"===r.mode?n[c]:[n[c]],key:c,index:c};a[c]=h,u[c]=h,s[c]=[],l[c]=0}for(var d=0;d<a.length;d++)for(var f=0;f<=d;f++){var p=void 0;p="dendrogram"===r.mode?d===f?1/0:o(a[d].value,a[f].value):d===f?1/0:o(a[d].value[0],a[f].value[0]),s[d][f]=p,s[f][d]=p,p<s[d][l[d]]&&(l[d]=f)}for(var g,m=hZ(a,u,s,l,r);m;)m=hZ(a,u,s,l,r);return"dendrogram"===r.mode?(g=pZ(a[0],r.dendrogramDepth,t),r.addDendrogram&&fZ(a[0],t)):(g=new Array(a.length),a.forEach(function(e,n){e.key=e.index=null,g[n]=t.collection(e.value)})),g},mZ={hierarchicalClustering:gZ,hca:gZ},vZ=KW({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),yZ=function(e,t,n,r){var i=function(e,t){return r[t](e)};return-qK(e,r.length,function(e){return i(t,e)},function(e){return i(n,e)},t,n)},bZ=function(e,t){var n=null;return n="median"===t?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t)):e=e.slice(t,n);for(var o=0,a=e.length-1;a>=0;a--){var s=e[a];i?isFinite(s)||(e[a]=-1/0,o++):e.splice(a,1)}r&&e.sort(function(e,t){return e-t});var l=e.length,u=Math.floor(l/2);return l%2!=0?e[u+1+o]:(e[u-1+o]+e[u+o])/2}(e):"mean"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=0,i=0,o=t;o<n;o++){var a=e[o];isFinite(a)&&(r+=a,i++)}return r/i}(e):"min"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(r=Math.min(o,r))}return r}(e):"max"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=-1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(r=Math.max(o,r))}return r}(e):t,n},xZ=function(e,t,n){for(var r=[],i=0;i<e;i++){for(var o=-1,a=-1/0,s=0;s<n.length;s++){var l=n[s];t[i*e+l]>a&&(o=l,a=t[i*e+l])}o>0&&r.push(o)}for(var u=0;u<n.length;u++)r[n[u]]=n[u];return r},wZ=function(e){for(var t,n,r,i,o,a,s=this.cy(),l=this.nodes(),u=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||jW("Damping must range on [0.5, 1).  Got: ".concat(t));var r=["median","mean","min","max"];return r.some(function(e){return e===n})||Fq(n)||jW("Preference must be one of [".concat(r.map(function(e){return"'".concat(e,"'")}).join(", "),"] or a number.  Got: ").concat(n)),vZ(e)}(e),c={},h=0;h<l.length;h++)c[l[h].id()]=h;n=(t=l.length)*t,r=new Array(n);for(var d=0;d<n;d++)r[d]=-1/0;for(var f=0;f<t;f++)for(var p=0;p<t;p++)f!==p&&(r[f*t+p]=yZ(u.distance,l[f],l[p],u.attributes));i=bZ(r,u.preference);for(var g=0;g<t;g++)r[g*t+g]=i;o=new Array(n);for(var m=0;m<n;m++)o[m]=0;a=new Array(n);for(var v=0;v<n;v++)a[v]=0;for(var y=new Array(t),b=new Array(t),x=new Array(t),w=0;w<t;w++)y[w]=0,b[w]=0,x[w]=0;for(var E,T=new Array(t*u.minIterations),_=0;_<T.length;_++)T[_]=0;for(E=0;E<u.maxIterations;E++){for(var k=0;k<t;k++){for(var A=-1/0,S=-1/0,N=-1,M=0,C=0;C<t;C++)y[C]=o[k*t+C],(M=a[k*t+C]+r[k*t+C])>=A?(S=A,A=M,N=C):M>S&&(S=M);for(var I=0;I<t;I++)o[k*t+I]=(1-u.damping)*(r[k*t+I]-A)+u.damping*y[I];o[k*t+N]=(1-u.damping)*(r[k*t+N]-S)+u.damping*y[N]}for(var R=0;R<t;R++){for(var L=0,O=0;O<t;O++)y[O]=a[O*t+R],b[O]=Math.max(0,o[O*t+R]),L+=b[O];L-=b[R],b[R]=o[R*t+R],L+=b[R];for(var D=0;D<t;D++)a[D*t+R]=(1-u.damping)*Math.min(0,L-b[D])+u.damping*y[D];a[R*t+R]=(1-u.damping)*(L-b[R])+u.damping*y[R]}for(var P=0,B=0;B<t;B++){var F=a[B*t+B]+o[B*t+B]>0?1:0;T[E%u.minIterations*t+B]=F,P+=F}if(P>0&&(E>=u.minIterations-1||E==u.maxIterations-1)){for(var z=0,U=0;U<t;U++){x[U]=0;for(var G=0;G<u.minIterations;G++)x[U]+=T[G*t+U];0!==x[U]&&x[U]!==u.minIterations||z++}if(z===t)break}}for(var V=function(e,t,n){for(var r=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&r.push(i);return r}(t,o,a),j=function(e,t,n){for(var r=xZ(e,t,n),i=0;i<n.length;i++){for(var o=[],a=0;a<r.length;a++)r[a]===n[i]&&o.push(a);for(var s=-1,l=-1/0,u=0;u<o.length;u++){for(var c=0,h=0;h<o.length;h++)c+=t[o[h]*e+o[u]];c>l&&(s=u,l=c)}n[i]=o[s]}return xZ(e,t,n)}(t,r,V),H={},$=0;$<V.length;$++)H[V[$]]=[];for(var Y=0;Y<l.length;Y++){var q=j[c[l[Y].id()]];null!=q&&H[q].push(l[Y])}for(var W=new Array(V.length),X=0;X<V.length;X++)W[X]=s.collection(H[V[X]]);return W},EZ={affinityPropagation:wZ,ap:wZ},TZ=KW({root:void 0,directed:!1}),_Z={hierholzer:function(e){if(!Bq(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n,r,i,o=TZ(e),a=o.root,s=o.directed,l=this,u=!1;a&&(i=Oq(a)?this.filter(a)[0].id():a[0].id());var c={},h={};s?l.forEach(function(e){var t=e.id();if(e.isNode()){var i=e.indegree(!0),o=e.outdegree(!0),a=i-o,s=o-i;1==a?n?u=!0:n=t:1==s?r?u=!0:r=t:(s>1||a>1)&&(u=!0),c[t]=[],e.outgoers().forEach(function(e){e.isEdge()&&c[t].push(e.id())})}else h[t]=[void 0,e.target().id()]}):l.forEach(function(e){var t=e.id();e.isNode()?(e.degree(!0)%2&&(n?r?u=!0:r=t:n=t),c[t]=[],e.connectedEdges().forEach(function(e){return c[t].push(e.id())})):h[t]=[e.source().id(),e.target().id()]});var d={found:!1,trail:void 0};if(u)return d;if(r&&n)if(s){if(i&&r!=i)return d;i=r}else{if(i&&r!=i&&n!=i)return d;i||(i=r)}else i||(i=l[0].id());var f=function(e){for(var t,n,r,i=e,o=[e];c[i].length;)t=c[i].shift(),n=h[t][0],i!=(r=h[t][1])?(c[r]=c[r].filter(function(e){return e!=t}),i=r):s||i==n||(c[n]=c[n].filter(function(e){return e!=t}),i=n),o.unshift(t),o.unshift(i);return o},p=[],g=[];for(g=f(i);1!=g.length;)0==c[g[0]].length?(p.unshift(l.getElementById(g.shift())),p.unshift(l.getElementById(g.shift()))):g=f(g.shift()).concat(g);for(var m in p.unshift(l.getElementById(g.shift())),c)if(c[m].length)return d;return d.found=!0,d.trail=this.spawn(p,!0),d}},kZ=function(){var e=this,t={},n=0,r=0,i=[],o=[],a={},s=function(l,u,c){l===c&&(r+=1),t[u]={id:n,low:n++,cutVertex:!1};var h,d,f,p,g=e.getElementById(u).connectedEdges().intersection(e);0===g.size()?i.push(e.spawn(e.getElementById(u))):g.forEach(function(n){h=n.source().id(),d=n.target().id(),(f=h===u?d:h)!==c&&(p=n.id(),a[p]||(a[p]=!0,o.push({x:u,y:f,edge:n})),f in t?t[u].low=Math.min(t[u].low,t[f].id):(s(l,f,u),t[u].low=Math.min(t[u].low,t[f].low),t[u].id<=t[f].low&&(t[u].cutVertex=!0,function(n,r){for(var a=o.length-1,s=[],l=e.spawn();o[a].x!=n||o[a].y!=r;)s.push(o.pop().edge),a--;s.push(o.pop().edge),s.forEach(function(n){var r=n.connectedNodes().intersection(e);l.merge(n),r.forEach(function(n){var r=n.id(),i=n.connectedEdges().intersection(e);l.merge(n),t[r].cutVertex?l.merge(i.filter(function(e){return e.isLoop()})):l.merge(i)})}),i.push(l)}(u,f))))})};e.forEach(function(e){if(e.isNode()){var n=e.id();n in t||(r=0,s(n,n),t[n].cutVertex=r>1)}});var l=Object.keys(t).filter(function(e){return t[e].cutVertex}).map(function(t){return e.getElementById(t)});return{cut:e.spawn(l),components:i}},AZ=function(){var e=this,t={},n=0,r=[],i=[],o=e.spawn(e),a=function(s){if(i.push(s),t[s]={index:n,low:n++,explored:!1},e.getElementById(s).connectedEdges().intersection(e).forEach(function(e){var n=e.target().id();n!==s&&(n in t||a(n),t[n].explored||(t[s].low=Math.min(t[s].low,t[n].low)))}),t[s].index===t[s].low){for(var l=e.spawn();;){var u=i.pop();if(l.merge(e.getElementById(u)),t[u].low=t[s].index,t[u].explored=!0,u===s)break}var c=l.edgesWith(l),h=l.merge(c);r.push(h),o=o.difference(h)}};return e.forEach(function(e){if(e.isNode()){var n=e.id();n in t||a(n)}}),{cut:o,components:r}},SZ={};[aX,mX,vX,bX,wX,TX,SX,EK,_K,AK,NK,FK,lZ,mZ,EZ,_Z,{hopcroftTarjanBiconnected:kZ,htbc:kZ,htb:kZ,hopcroftTarjanBiconnectedComponents:kZ},{tarjanStronglyConnected:AZ,tsc:AZ,tscc:AZ,tarjanStronglyConnectedComponents:AZ}].forEach(function(e){oW(SZ,e)});
/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/
var NZ=function(e){if(!(this instanceof NZ))return new NZ(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};NZ.prototype={fulfill:function(e){return MZ(this,1,"fulfillValue",e)},reject:function(e){return MZ(this,2,"rejectReason",e)},then:function(e,t){var n=this,r=new NZ;return n.onFulfilled.push(RZ(e,r,"fulfill")),n.onRejected.push(RZ(t,r,"reject")),CZ(n),r.proxy}};var MZ=function(e,t,n,r){return 0===e.state&&(e.state=t,e[n]=r,CZ(e)),e},CZ=function(e){1===e.state?IZ(e,"onFulfilled",e.fulfillValue):2===e.state&&IZ(e,"onRejected",e.rejectReason)},IZ=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var i=function(){for(var e=0;e<r.length;e++)r[e](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},RZ=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var i;try{i=e(r)}catch(LY){return void t.reject(LY)}LZ(t,i)}}},LZ=function(e,t){if(e!==t&&e.proxy!==t){var n;if("object"===ZY(t)&&null!==t||"function"==typeof t)try{n=t.then}catch(LY){return void e.reject(LY)}if("function"!=typeof n)e.fulfill(t);else{var r=!1;try{n.call(t,function(n){r||(r=!0,n===t?e.reject(new TypeError("circular thenable chain")):LZ(e,n))},function(t){r||(r=!0,e.reject(t))})}catch(LY){r||e.reject(LY)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};NZ.all=function(e){return new NZ(function(t,n){for(var r=new Array(e.length),i=0,o=function(n,o){r[n]=o,++i===e.length&&t(r)},a=0;a<e.length;a++)(function(t){var r=e[t];null!=r&&null!=r.then?r.then(function(e){o(t,e)},function(e){n(e)}):o(t,r)})(a)})},NZ.resolve=function(e){return new NZ(function(t,n){t(e)})},NZ.reject=function(e){return new NZ(function(t,n){n(e)})};var OZ="undefined"!=typeof Promise?Promise:NZ,DZ=function(e,t,n){var r=jq(e),i=!r,o=this._private=oW({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&Dq(o.complete)&&o.completes.push(o.complete),i){var a=e.position();o.startPosition=o.startPosition||{x:a.x,y:a.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(r){var s=e.pan();o.startPan={x:s.x,y:s.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},PZ=DZ.prototype;oW(PZ,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),Uq(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return void 0===e?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(t,n){var r=e[t];null!=r&&(e[t]=e[n],e[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var r=0;r<e.style.length;r++){var i=e.style[r],o=i.name,a=e.startStyle[o];e.startStyle[o]=i,e.style[r]=a}return t&&this.play(),this},promise:function(e){var t,n=this._private;if("frame"===e)t=n.frames;else t=n.completes;return new OZ(function(e,n){t.push(function(){e()})})}}),PZ.complete=PZ.completed,PZ.run=PZ.play,PZ.running=PZ.playing;var BZ,FZ,zZ,UZ,GZ,VZ,jZ,HZ,$Z,YZ,qZ,WZ,XZ,KZ,ZZ,QZ,JZ,eQ,tQ,nQ,rQ,iQ,oQ,aQ,sQ,lQ,uQ,cQ,hQ,dQ,fQ,pQ,gQ,mQ,vQ,yQ,bQ,xQ,wQ,EQ,TQ,_Q,kQ,AQ,SQ,NQ,MQ,CQ,IQ,RQ,LQ,OQ,DQ,PQ,BQ,FQ,zQ,UQ,GQ,VQ,jQ,HQ,$Q,YQ,qQ,WQ,XQ,KQ,ZQ,QQ,JQ,eJ,tJ,nJ,rJ,iJ,oJ,aJ,sJ,lJ,uJ,cJ,hJ,dJ,fJ,pJ,gJ={animated:function(){return function(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return!1;var n=t[0];return n?n._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return this;for(var n=0;n<t.length;n++){t[n]._private.animation.queue=[]}return this}},delay:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this,a=!r,s=!a;if(!o.styleEnabled())return this;var l=o.style();if(e=oW({},e,t),0===Object.keys(e).length)return new DZ(i[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(s&&(e.style=l.getPropsList(e.style||e.css),e.css=void 0),s&&null!=e.renderedPosition){var u=e.renderedPosition,c=o.pan(),h=o.zoom();e.position=MX(u,h,c)}if(a&&null!=e.panBy){var d=e.panBy,f=o.pan();e.pan={x:f.x+d.x,y:f.y+d.y}}var p=e.center||e.centre;if(a&&null!=p){var g=o.getCenterPan(p.eles,e.zoom);null!=g&&(e.pan=g)}if(a&&null!=e.fit){var m=e.fit,v=o.getFitViewport(m.eles||m.boundingBox,m.padding);null!=v&&(e.pan=v.pan,e.zoom=v.zoom)}if(a&&Bq(e.zoom)){var y=o.getZoomedViewport(e.zoom);null!=y?(y.zoomed&&(e.zoom=y.zoom),y.panned&&(e.pan=y.pan)):e.zoom=null}return new DZ(i[0],e)}},animate:function(){return function(e,t){var n=this,r=void 0!==n.length?n:[n];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=oW({},e,t));for(var i=0;i<r.length;i++){var o=r[i],a=o.animated()&&(void 0===e.queue||e.queue);o.animation(e,a?{queue:!0}:void 0).play()}return this}},stop:function(){return function(e,t){var n=this,r=void 0!==n.length?n:[n],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<r.length;o++){for(var a=r[o]._private,s=a.animation.current,l=0;l<s.length;l++){var u=s[l]._private;t&&(u.duration=0)}e&&(a.animation.queue=[]),t||(a.animation.current=[])}return i.notify("draw"),this}}};function mJ(){if(FZ)return BZ;FZ=1;var e=Array.isArray;return BZ=e}function vJ(){if(YZ)return $Z;YZ=1;var e=function(){if(HZ)return jZ;HZ=1;var e=fW()["__core-js_shared__"];return jZ=e}(),t=function(){var t=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();return $Z=function(e){return!!t&&t in e},$Z}function yJ(){if(KZ)return XZ;KZ=1;var e=function(){if(VZ)return GZ;VZ=1;var e=mW(),t=dW();return GZ=function(n){if(!t(n))return!1;var r=e(n);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}}(),t=vJ(),n=dW(),r=function(){if(WZ)return qZ;WZ=1;var e=Function.prototype.toString;return qZ=function(t){if(null!=t){try{return e.call(t)}catch(LY){}try{return t+""}catch(LY){}}return""},qZ}(),i=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,s=o.toString,l=a.hasOwnProperty,u=RegExp("^"+s.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return XZ=function(o){return!(!n(o)||t(o))&&(e(o)?u:i).test(r(o))}}function bJ(){if(eQ)return JZ;eQ=1;var e=yJ(),t=QZ?ZZ:(QZ=1,ZZ=function(e,t){return null==e?void 0:e[t]});return JZ=function(n,r){var i=t(n,r);return e(i)?i:void 0}}function xJ(){if(nQ)return tQ;nQ=1;var e=bJ()(Object,"create");return tQ=e}function wJ(){if(pQ)return fQ;pQ=1;var e=function(){if(iQ)return rQ;iQ=1;var e=xJ();return rQ=function(){this.__data__=e?e(null):{},this.size=0}}(),t=aQ?oQ:(aQ=1,oQ=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}),n=function(){if(lQ)return sQ;lQ=1;var e=xJ(),t=Object.prototype.hasOwnProperty;return sQ=function(n){var r=this.__data__;if(e){var i=r[n];return"__lodash_hash_undefined__"===i?void 0:i}return t.call(r,n)?r[n]:void 0}}(),r=function(){if(cQ)return uQ;cQ=1;var e=xJ(),t=Object.prototype.hasOwnProperty;return uQ=function(n){var r=this.__data__;return e?void 0!==r[n]:t.call(r,n)}}(),i=function(){if(dQ)return hQ;dQ=1;var e=xJ();return hQ=function(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=e&&void 0===n?"__lodash_hash_undefined__":n,this}}();function o(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,fQ=o}function EJ(){if(yQ)return vQ;return yQ=1,vQ=function(e,t){return e===t||e!=e&&t!=t}}function TJ(){if(xQ)return bQ;xQ=1;var e=EJ();return bQ=function(t,n){for(var r=t.length;r--;)if(e(t[r][0],n))return r;return-1}}function _J(){if(CQ)return MQ;CQ=1;var e=mQ?gQ:(mQ=1,gQ=function(){this.__data__=[],this.size=0}),t=function(){if(EQ)return wQ;EQ=1;var e=TJ(),t=Array.prototype.splice;return wQ=function(n){var r=this.__data__,i=e(r,n);return!(i<0||(i==r.length-1?r.pop():t.call(r,i,1),--this.size,0))}}(),n=function(){if(_Q)return TQ;_Q=1;var e=TJ();return TQ=function(t){var n=this.__data__,r=e(n,t);return r<0?void 0:n[r][1]}}(),r=function(){if(AQ)return kQ;AQ=1;var e=TJ();return kQ=function(t){return e(this.__data__,t)>-1}}(),i=function(){if(NQ)return SQ;NQ=1;var e=TJ();return SQ=function(t,n){var r=this.__data__,i=e(r,t);return i<0?(++this.size,r.push([t,n])):r[i][1]=n,this}}();function o(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,MQ=o}function kJ(){if(OQ)return LQ;OQ=1;var e=wJ(),t=_J(),n=function(){if(RQ)return IQ;RQ=1;var e=bJ()(fW(),"Map");return IQ=e}();return LQ=function(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}}function AJ(){if(FQ)return BQ;FQ=1;var e=PQ?DQ:(PQ=1,DQ=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e});return BQ=function(t,n){var r=t.__data__;return e(n)?r["string"==typeof n?"string":"hash"]:r.map}}function SJ(){if(WQ)return qQ;WQ=1;var e=kJ(),t=function(){if(UQ)return zQ;UQ=1;var e=AJ();return zQ=function(t){var n=e(this,t).delete(t);return this.size-=n?1:0,n}}(),n=function(){if(VQ)return GQ;VQ=1;var e=AJ();return GQ=function(t){return e(this,t).get(t)}}(),r=function(){if(HQ)return jQ;HQ=1;var e=AJ();return jQ=function(t){return e(this,t).has(t)}}(),i=function(){if(YQ)return $Q;YQ=1;var e=AJ();return $Q=function(t,n){var r=e(this,t),i=r.size;return r.set(t,n),this.size+=r.size==i?0:1,this}}();function o(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,qQ=o}function NJ(){if(QQ)return ZQ;QQ=1;var e=function(){if(KQ)return XQ;KQ=1;var e=SJ();function t(n,r){if("function"!=typeof n||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var i=function(){var e=arguments,t=r?r.apply(this,e):e[0],o=i.cache;if(o.has(t))return o.get(t);var a=n.apply(this,e);return i.cache=o.set(t,a)||o,a};return i.cache=new(t.Cache||e),i}return t.Cache=e,XQ=t}();return ZQ=function(t){var n=e(t,function(e){return 500===r.size&&r.clear(),e}),r=n.cache;return n},ZQ}function MJ(){if(eJ)return JQ;eJ=1;var e=NJ(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(t,function(e,t,i,o){r.push(i?o.replace(n,"$1"):t||e)}),r});return JQ=r}function CJ(){if(nJ)return tJ;return nJ=1,tJ=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}}function IJ(){if(aJ)return oJ;aJ=1;var e=function(){if(iJ)return rJ;iJ=1;var e=gW(),t=CJ(),n=mJ(),r=vW(),i=e?e.prototype:void 0,o=i?i.toString:void 0;return rJ=function e(i){if("string"==typeof i)return i;if(n(i))return t(i,e)+"";if(r(i))return o?o.call(i):"";var a=i+"";return"0"==a&&1/i==-1/0?"-0":a},rJ}();return oJ=function(t){return null==t?"":e(t)}}function RJ(){if(lJ)return sJ;lJ=1;var e=mJ(),t=function(){if(UZ)return zZ;UZ=1;var e=mJ(),t=vW(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;return zZ=function(i,o){if(e(i))return!1;var a=typeof i;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=i&&!t(i))||r.test(i)||!n.test(i)||null!=o&&i in Object(o)}}(),n=MJ(),r=IJ();return sJ=function(i,o){return e(i)?i:t(i,o)?[i]:n(r(i))}}function LJ(){if(cJ)return uJ;cJ=1;var e=vW();return uJ=function(t){if("string"==typeof t||e(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}}var OJ,DJ,PJ,BJ,FJ,zJ,UJ,GJ,VJ,jJ,HJ,$J,YJ=hW(function(){if(pJ)return fJ;pJ=1;var e=function(){if(dJ)return hJ;dJ=1;var e=RJ(),t=LJ();return hJ=function(n,r){for(var i=0,o=(r=e(r,n)).length;null!=n&&i<o;)n=n[t(r[i++])];return i&&i==o?n:void 0}}();return fJ=function(t,n,r){var i=null==t?void 0:e(t,n);return void 0===i?r:i}}());function qJ(){if(BJ)return PJ;BJ=1;var e=function(){if(DJ)return OJ;DJ=1;var e=bJ(),t=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(LY){}}();return OJ=t}();return PJ=function(t,n,r){"__proto__"==n&&e?e(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}}function WJ(){if(jJ)return VJ;jJ=1;var e=function(){if(zJ)return FJ;zJ=1;var e=qJ(),t=EJ(),n=Object.prototype.hasOwnProperty;return FJ=function(r,i,o){var a=r[i];n.call(r,i)&&t(a,o)&&(void 0!==o||i in r)||e(r,i,o)}}(),t=RJ(),n=function(){if(GJ)return UJ;GJ=1;var e=/^(?:0|[1-9]\d*)$/;return UJ=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}}(),r=dW(),i=LJ();return VJ=function(o,a,s,l){if(!r(o))return o;for(var u=-1,c=(a=t(a,o)).length,h=c-1,d=o;null!=d&&++u<c;){var f=i(a[u]),p=s;if("__proto__"===f||"constructor"===f||"prototype"===f)return o;if(u!=h){var g=d[f];void 0===(p=l?l(g,f,d):void 0)&&(p=r(g)?g:n(a[u+1])?[]:{})}e(d,f,p),d=d[f]}return o}}var XJ,KJ,ZJ,QJ,JJ=hW(function(){if($J)return HJ;$J=1;var e=WJ();return HJ=function(t,n,r){return null==t?t:e(t,n,r)}}());var e0=hW(function(){if(QJ)return ZJ;QJ=1;var e=CJ(),t=KJ?XJ:(KJ=1,XJ=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}),n=mJ(),r=vW(),i=MJ(),o=LJ(),a=IJ();return ZJ=function(s){return n(s)?e(s,o):r(s)?[s]:t(i(a(s)))}}()),t0={data:function(e){return e=oW({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,t){},onSet:function(e){},canSet:function(e){return!0}},e),function(t,n){var r=e,i=this,o=void 0!==i.length,a=o?i:[i],s=o?i[0]:i;if(Oq(t)){var l,u=-1!==t.indexOf(".")&&e0(t);if(r.allowGetting&&void 0===n)return s&&(r.beforeGet(s),l=u&&void 0===s._private[r.field][t]?YJ(s._private[r.field],u):s._private[r.field][t]),l;if(r.allowSetting&&void 0!==n&&!r.immutableKeys[t]){var c=qY({},t,n);r.beforeSet(i,c);for(var h=0,d=a.length;h<d;h++){var f=a[h];r.canSet(f)&&(u&&void 0===s._private[r.field][t]?JJ(f._private[r.field],u,n):f._private[r.field][t]=n)}r.updateStyle&&i.updateStyle(),r.onSet(i),r.settingTriggersEvent&&i[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&Bq(t)){var p,g,m=t,v=Object.keys(m);r.beforeSet(i,m);for(var y=0;y<v.length;y++){if(g=m[p=v[y]],!r.immutableKeys[p])for(var b=0;b<a.length;b++){var x=a[b];r.canSet(x)&&(x._private[r.field][p]=g)}}r.updateStyle&&i.updateStyle(),r.onSet(i),r.settingTriggersEvent&&i[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&Dq(t)){var w=t;i.on(r.bindingEvent,w)}else if(r.allowGetting&&void 0===t){var E;return s&&(r.beforeGet(s),E=s._private[r.field]),E}return i}},removeData:function(e){return e=oW({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(t){var n=e,r=this,i=void 0!==r.length?r:[r];if(Oq(t)){for(var o=t.split(/\s+/),a=o.length,s=0;s<a;s++){var l=o[s];if(!$q(l))if(!n.immutableKeys[l])for(var u=0,c=i.length;u<c;u++)i[u]._private[n.field][l]=void 0}n.triggerEvent&&r[n.triggerFnName](n.event)}else if(void 0===t){for(var h=0,d=i.length;h<d;h++)for(var f=i[h]._private[n.field],p=Object.keys(f),g=0;g<p.length;g++){var m=p[g];!n.immutableKeys[m]&&(f[m]=void 0)}n.triggerEvent&&r[n.triggerFnName](n.event)}return r}}},n0={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(e,t){var n=this,r=Array.prototype.slice.call(arguments,0);return new OZ(function(e,t){var i=r.concat([function(t){n.off.apply(n,o),e(t)}]),o=i.concat([]);n.on.apply(n,i)})}}},r0={};[gJ,t0,n0].forEach(function(e){oW(r0,e)});var i0={animate:r0.animate(),animation:r0.animation(),animated:r0.animated(),clearQueue:r0.clearQueue(),delay:r0.delay(),delayAnimation:r0.delayAnimation(),stop:r0.stop()},o0={classes:function(e){var t=this;if(void 0===e){var n=[];return t[0]._private.classes.forEach(function(e){return n.push(e)}),n}Pq(e)||(e=(e||"").match(/\S+/g)||[]);for(var r=[],i=new rX(e),o=0;o<t.length;o++){for(var a=t[o],s=a._private,l=s.classes,u=!1,c=0;c<e.length;c++){var h=e[c];if(!l.has(h)){u=!0;break}}u||(u=l.size!==e.length),u&&(s.classes=i,r.push(a))}return r.length>0&&this.spawn(r).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){Pq(e)||(e=e.match(/\S+/g)||[]);for(var n=this,r=void 0===t,i=[],o=0,a=n.length;o<a;o++)for(var s=n[o],l=s._private.classes,u=!1,c=0;c<e.length;c++){var h=e[c],d=l.has(h),f=!1;t||r&&!d?(l.add(h),f=!0):(!t||r&&d)&&(l.delete(h),f=!0),!u&&f&&(i.push(s),u=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};o0.className=o0.classNames=o0.classes;var a0={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:Jq,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};a0.variable="(?:[\\w-.]|(?:\\\\"+a0.metaChar+"))+",a0.className="(?:[\\w-]|(?:\\\\"+a0.metaChar+"))+",a0.value=a0.string+"|"+a0.number,a0.id=a0.variable,function(){var e,t,n;for(e=a0.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],a0.comparatorOp+="|@"+t;for(e=a0.comparatorOp.split("|"),n=0;n<e.length;n++)(t=e[n]).indexOf("!")>=0||"="!==t&&(a0.comparatorOp+="|\\!"+t)}();var s0=0,l0=1,u0=2,c0=3,h0=4,d0=5,f0=6,p0=7,g0=8,m0=9,v0=10,y0=11,b0=12,x0=13,w0=14,E0=15,T0=16,_0=17,k0=18,A0=19,S0=20,N0=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(e,t){return function(e,t){return-1*iW(e,t)}(e.selector,t.selector)}),M0=function(){for(var e,t={},n=0;n<N0.length;n++)t[(e=N0[n]).selector]=e.matches;return t}(),C0="("+N0.map(function(e){return e.selector}).join("|")+")",I0=function(e){return e.replace(new RegExp("\\\\("+a0.metaChar+")","g"),function(e,t){return t})},R0=function(e,t,n){e[e.length-1]=n},L0=[{name:"group",query:!0,regex:"("+a0.group+")",populate:function(e,t,n){var r=WY(n,1)[0];t.checks.push({type:s0,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:C0,populate:function(e,t,n){var r=WY(n,1)[0];t.checks.push({type:p0,value:r})}},{name:"id",query:!0,regex:"\\#("+a0.id+")",populate:function(e,t,n){var r=WY(n,1)[0];t.checks.push({type:g0,value:I0(r)})}},{name:"className",query:!0,regex:"\\.("+a0.className+")",populate:function(e,t,n){var r=WY(n,1)[0];t.checks.push({type:m0,value:I0(r)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+a0.variable+")\\s*\\]",populate:function(e,t,n){var r=WY(n,1)[0];t.checks.push({type:h0,field:I0(r)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+a0.variable+")\\s*("+a0.comparatorOp+")\\s*("+a0.value+")\\s*\\]",populate:function(e,t,n){var r=WY(n,3),i=r[0],o=r[1],a=r[2];a=null!=new RegExp("^"+a0.string+"$").exec(a)?a.substring(1,a.length-1):parseFloat(a),t.checks.push({type:c0,field:I0(i),operator:o,value:a})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+a0.boolOp+")\\s*("+a0.variable+")\\s*\\]",populate:function(e,t,n){var r=WY(n,2),i=r[0],o=r[1];t.checks.push({type:d0,field:I0(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+a0.meta+")\\s*("+a0.comparatorOp+")\\s*("+a0.number+")\\s*\\]\\]",populate:function(e,t,n){var r=WY(n,3),i=r[0],o=r[1],a=r[2];t.checks.push({type:f0,field:I0(i),operator:o,value:parseFloat(a)})}},{name:"nextQuery",separator:!0,regex:a0.separator,populate:function(e,t){var n=e.currentSubject,r=e.edgeCount,i=e.compoundCount,o=e[e.length-1];return null!=n&&(o.subject=n,e.currentSubject=null),o.edgeCount=r,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0,e[e.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:a0.directedEdge,populate:function(e,t){if(null==e.currentSubject){var n={checks:[]},r=t,i={checks:[]};return n.checks.push({type:y0,source:r,target:i}),R0(e,0,n),e.edgeCount++,i}var o={checks:[]},a=t,s={checks:[]};return o.checks.push({type:b0,source:a,target:s}),R0(e,0,o),e.edgeCount++,s}},{name:"undirectedEdge",separator:!0,regex:a0.undirectedEdge,populate:function(e,t){if(null==e.currentSubject){var n={checks:[]},r=t,i={checks:[]};return n.checks.push({type:v0,nodes:[r,i]}),R0(e,0,n),e.edgeCount++,i}var o={checks:[]},a=t,s={checks:[]};return o.checks.push({type:w0,node:a,neighbor:s}),R0(e,0,o),s}},{name:"child",separator:!0,regex:a0.child,populate:function(e,t){if(null==e.currentSubject){var n={checks:[]},r={checks:[]},i=e[e.length-1];return n.checks.push({type:E0,parent:i,child:r}),R0(e,0,n),e.compoundCount++,r}if(e.currentSubject===t){var o={checks:[]},a=e[e.length-1],s={checks:[]},l={checks:[]},u={checks:[]},c={checks:[]};return o.checks.push({type:A0,left:a,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:S0}],c.checks.push({type:S0}),s.checks.push({type:_0,parent:c,child:u}),R0(e,0,o),e.currentSubject=l,e.compoundCount++,u}var h={checks:[]},d={checks:[]},f=[{type:_0,parent:h,child:d}];return h.checks=t.checks,t.checks=f,e.compoundCount++,d}},{name:"descendant",separator:!0,regex:a0.descendant,populate:function(e,t){if(null==e.currentSubject){var n={checks:[]},r={checks:[]},i=e[e.length-1];return n.checks.push({type:T0,ancestor:i,descendant:r}),R0(e,0,n),e.compoundCount++,r}if(e.currentSubject===t){var o={checks:[]},a=e[e.length-1],s={checks:[]},l={checks:[]},u={checks:[]},c={checks:[]};return o.checks.push({type:A0,left:a,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:S0}],c.checks.push({type:S0}),s.checks.push({type:k0,ancestor:c,descendant:u}),R0(e,0,o),e.currentSubject=l,e.compoundCount++,u}var h={checks:[]},d={checks:[]},f=[{type:k0,ancestor:h,descendant:d}];return h.checks=t.checks,t.checks=f,e.compoundCount++,d}},{name:"subject",modifier:!0,regex:a0.subject,populate:function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return $W(e.toString()),!1;e.currentSubject=t;var n=e[e.length-1].checks[0],r=null==n?null:n.type;r===y0?n.type=x0:r===v0&&(n.type=w0,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];L0.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var O0=function(e){for(var t,n,r,i=0;i<L0.length;i++){var o=L0[i],a=o.name,s=e.match(o.regexObj);if(null!=s){n=s,t=o,r=a;var l=s[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:r,remaining:e}},D0={parse:function(e){var t=this,n=t.inputText=e,r=t[0]={checks:[]};for(t.length=1,n=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e}(n);;){var i=O0(n);if(null==i.expr)return $W(),!1;var o=i.match.slice(1),a=i.expr.populate(t,r,o);if(!1===a)return!1;if(null!=a&&(r=a),(n=i.remaining).match(/^\s*$/))break}var s=t[t.length-1];null!=t.currentSubject&&(s.subject=t.currentSubject),s.edgeCount=t.edgeCount,s.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var u=t[l];if(u.compoundCount>0&&u.edgeCount>0)return $W(),!1;if(u.edgeCount>1)return $W(),!1;1===u.edgeCount&&$W()}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(e){return null==e?"":e},t=function(t){return Oq(t)?'"'+t+'"':e(t)},n=function(e){return" "+e+" "},r=function(i,o){return i.checks.reduce(function(a,s,l){return a+(o===i&&0===l?"$":"")+function(i,o){var a=i.type,s=i.value;switch(a){case s0:var l=e(s);return l.substring(0,l.length-1);case c0:var u=i.field,c=i.operator;return"["+u+n(e(c))+t(s)+"]";case d0:var h=i.operator,d=i.field;return"["+e(h)+d+"]";case h0:return"["+i.field+"]";case f0:var f=i.operator;return"[["+i.field+n(e(f))+t(s)+"]]";case p0:return s;case g0:return"#"+s;case m0:return"."+s;case _0:case E0:return r(i.parent,o)+n(">")+r(i.child,o);case k0:case T0:return r(i.ancestor,o)+" "+r(i.descendant,o);case A0:var p=r(i.left,o),g=r(i.subject,o),m=r(i.right,o);return p+(p.length>0?" ":"")+g+m;case S0:return""}}(s,o)},"")},i="",o=0;o<this.length;o++){var a=this[o];i+=r(a,a.subject),this.length>1&&o<this.length-1&&(i+=", ")}return this.toStringCache=i,i}},P0=function(e,t,n){var r,i,o,a=Oq(e),s=Fq(e),l=Oq(n),u=!1,c=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),u=!0),(a||l||u)&&(i=a||s?""+e:"",o=""+n),u&&(e=i=i.toLowerCase(),n=o=o.toLowerCase()),t){case"*=":r=i.indexOf(o)>=0;break;case"$=":r=i.indexOf(o,i.length-o.length)>=0;break;case"^=":r=0===i.indexOf(o);break;case"=":r=e===n;break;case">":h=!0,r=e>n;break;case">=":h=!0,r=e>=n;break;case"<":h=!0,r=e<n;break;case"<=":h=!0,r=e<=n;break;default:r=!1}return!c||null==e&&h||(r=!r),r},B0=function(e,t){return e.data(t)},F0=[],z0=function(e,t){return e.checks.every(function(e){return F0[e.type](e,t)})};F0[s0]=function(e,t){var n=e.value;return"*"===n||n===t.group()},F0[p0]=function(e,t){return function(e,t){return M0[e](t)}(e.value,t)},F0[g0]=function(e,t){var n=e.value;return t.id()===n},F0[m0]=function(e,t){var n=e.value;return t.hasClass(n)},F0[f0]=function(e,t){var n=e.field,r=e.operator,i=e.value;return P0(function(e,t){return e[t]()}(t,n),r,i)},F0[c0]=function(e,t){var n=e.field,r=e.operator,i=e.value;return P0(B0(t,n),r,i)},F0[d0]=function(e,t){var n=e.field,r=e.operator;return function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}}(B0(t,n),r)},F0[h0]=function(e,t){var n=e.field;return e.operator,void 0!==B0(t,n)},F0[v0]=function(e,t){var n=e.nodes[0],r=e.nodes[1],i=t.source(),o=t.target();return z0(n,i)&&z0(r,o)||z0(r,i)&&z0(n,o)},F0[w0]=function(e,t){return z0(e.node,t)&&t.neighborhood().some(function(t){return t.isNode()&&z0(e.neighbor,t)})},F0[y0]=function(e,t){return z0(e.source,t.source())&&z0(e.target,t.target())},F0[b0]=function(e,t){return z0(e.source,t)&&t.outgoers().some(function(t){return t.isNode()&&z0(e.target,t)})},F0[x0]=function(e,t){return z0(e.target,t)&&t.incomers().some(function(t){return t.isNode()&&z0(e.source,t)})},F0[E0]=function(e,t){return z0(e.child,t)&&z0(e.parent,t.parent())},F0[_0]=function(e,t){return z0(e.parent,t)&&t.children().some(function(t){return z0(e.child,t)})},F0[T0]=function(e,t){return z0(e.descendant,t)&&t.ancestors().some(function(t){return z0(e.ancestor,t)})},F0[k0]=function(e,t){return z0(e.ancestor,t)&&t.descendants().some(function(t){return z0(e.descendant,t)})},F0[A0]=function(e,t){return z0(e.subject,t)&&z0(e.left,t)&&z0(e.right,t)},F0[S0]=function(){return!0},F0[l0]=function(e,t){return e.value.has(t)},F0[u0]=function(e,t){return(0,e.value)(t)};var U0=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||Oq(e)&&e.match(/^\s*$/)||(Uq(e)?this.addQuery({checks:[{type:l0,value:e.collection()}]}):Dq(e)?this.addQuery({checks:[{type:u0,value:e}]}):Oq(e)?this.parse(e)||(this.invalid=!0):jW("A selector must be created from a string; found "))},G0=U0.prototype;[D0,{matches:function(e){for(var t=0;t<this.length;t++){var n=this[t];if(z0(n,e))return!0}return!1},filter:function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&t[0].checks[0].type===g0)return e.getElementById(t[0].checks[0].value).collection();var n=function(e){for(var n=0;n<t.length;n++){var r=t[n];if(z0(r,e))return!0}return!1};return null==t.text()&&(n=function(){return!0}),e.filter(n)}}].forEach(function(e){return oW(G0,e)}),G0.text=function(){return this.inputText},G0.size=function(){return this.length},G0.eq=function(e){return this[e]},G0.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},G0.addQuery=function(e){this[this.length++]=e},G0.selector=G0.toString;var V0={allAre:function(e){var t=new U0(e);return this.every(function(e){return t.matches(e)})},is:function(e){var t=new U0(e);return this.some(function(e){return t.matches(e)})},some:function(e,t){for(var n=0;n<this.length;n++){if(t?e.apply(t,[this[n],n,this]):e(this[n],n,this))return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){if(!(t?e.apply(t,[this[n],n,this]):e(this[n],n,this)))return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every(function(t){return e.hasElementWithId(t.id())}))},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(e){return t.hasElementWithId(e.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(e){return t.hasElementWithId(e.id())})}};V0.allAreNeighbours=V0.allAreNeighbors,V0.has=V0.contains,V0.equal=V0.equals=V0.same;var j0,H0,$0=function(e,t){return function(n,r,i,o){var a,s=n,l=this;if(null==s?a="":Uq(s)&&1===s.length&&(a=s.id()),1===l.length&&a){var u=l[0]._private,c=u.traversalCache=u.traversalCache||{},h=c[t]=c[t]||[],d=LW(a),f=h[d];return f||(h[d]=e.call(l,n,r,i,o))}return e.call(l,n,r,i,o)}},Y0={parent:function(e){var t=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&t.push(i)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];t.push(i)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var r=this[n].parents();t=(t=t||r).intersect(r)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isChild()}).filter(e)},children:$0(function(e){for(var t=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,i=0;i<r.length;i++)t.push(r[i]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var t=[];return function e(n){for(var r=0;r<n.length;r++){var i=n[r];t.push(i),i.children().nonempty()&&e(i.children())}}(this.children()),this.spawn(t,!0).filter(e)}};function q0(e,t,n,r){for(var i=[],o=new rX,a=e.cy().hasCompoundNodes(),s=0;s<e.length;s++){var l=e[s];n?i.push(l):a&&r(i,o,l)}for(;i.length>0;){var u=i.shift();t(u),o.add(u.id()),a&&r(i,o,u)}return e}function W0(e,t,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];t.has(o.id())||e.push(o)}}function X0(e,t,n){if(n.isChild()){var r=n._private.parent;t.has(r.id())||e.push(r)}}function K0(e,t,n){X0(e,t,n),W0(e,t,n)}Y0.forEachDown=function(e){return q0(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],W0)},Y0.forEachUp=function(e){return q0(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],X0)},Y0.forEachUpAndDown=function(e){return q0(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],K0)},Y0.ancestors=Y0.parents,(j0=H0={data:r0.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:r0.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:r0.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:r0.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:r0.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:r0.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}}).attr=j0.data,j0.removeAttr=j0.removeData;var Z0,Q0,J0=H0,e1={};function t1(e){return function(t){var n=this;if(void 0===t&&(t=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!t&&s.isLoop()||(r+=e(i,s))}return r}}}function n1(e,t){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o][e](n);void 0===a||void 0!==r&&!t(a,r)||(r=a)}return r}}oW(e1,{degree:t1(function(e,t){return t.source().same(t.target())?2:1}),indegree:t1(function(e,t){return t.target().same(e)?1:0}),outdegree:t1(function(e,t){return t.source().same(e)?1:0})}),oW(e1,{minDegree:n1("degree",function(e,t){return e<t}),maxDegree:n1("degree",function(e,t){return e>t}),minIndegree:n1("indegree",function(e,t){return e<t}),maxIndegree:n1("indegree",function(e,t){return e>t}),minOutdegree:n1("outdegree",function(e,t){return e<t}),maxOutdegree:n1("outdegree",function(e,t){return e>t})}),oW(e1,{totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}});var r1=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(!i.locked()){var o=i._private.position,a={x:null!=t.x?t.x-o.x:0,y:null!=t.y?t.y-o.y:0};!i.isParent()||0===a.x&&0===a.y||i.children().shift(a,n),i.dirtyBoundingBoxCache()}}},i1={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){r1(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Z0=Q0={position:r0.data(i1),silentPosition:r0.data(oW({},i1,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){r1(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(Bq(e))t?this.silentPosition(e):this.position(e);else if(Dq(e)){var n=e,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var o,a=this[i];(o=n(a,i))&&(t?a.silentPosition(o):a.position(o))}r.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var r;if(Bq(e)?(r={x:Fq(e.x)?e.x:0,y:Fq(e.y)?e.y:0},n=t):Oq(e)&&Fq(t)&&((r={x:0,y:0})[e]=t),null!=r){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o];if(!(i.hasCompoundNodes()&&a.isChild()&&a.ancestors().anySame(this))){var s=a.position(),l={x:s.x+r.x,y:s.y+r.y};n?a.silentPosition(l):a.position(l)}}i.endBatch()}return this},silentShift:function(e,t){return Bq(e)?this.shift(e,!0):Oq(e)&&Fq(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],r=this.cy(),i=r.zoom(),o=r.pan(),a=Bq(e)?e:void 0,s=void 0!==a||void 0!==t&&Oq(e);if(n&&n.isNode()){if(!s){var l=n.position();return a=NX(l,i,o),void 0===e?a:a[e]}for(var u=0;u<this.length;u++){var c=this[u];void 0!==t?c.position(e,(t-o[e])/i):void 0!==a&&c.position(MX(a,i,o))}}else if(!s)return;return this},relativePosition:function(e,t){var n=this[0],r=this.cy(),i=Bq(e)?e:void 0,o=void 0!==i||void 0!==t&&Oq(e),a=r.hasCompoundNodes();if(n&&n.isNode()){if(!o){var s=n.position(),l=a?n.parent():null,u=l&&l.length>0,c=u;u&&(l=l[0]);var h=c?l.position():{x:0,y:0};return i={x:s.x-h.x,y:s.y-h.y},void 0===e?i:i[e]}for(var d=0;d<this.length;d++){var f=this[d],p=a?f.parent():null,g=p&&p.length>0,m=g;g&&(p=p[0]);var v=m?p.position():{x:0,y:0};void 0!==t?f.position(e,t+v[e]):void 0!==i&&f.position({x:i.x+v.x,y:i.y+v.y})}}else if(!o)return;return this}},Z0.modelPosition=Z0.point=Z0.position,Z0.modelPositions=Z0.points=Z0.positions,Z0.renderedPoint=Z0.renderedPosition,Z0.relativePoint=Z0.relativePosition;var o1,a1,s1=Q0;o1=a1={},a1.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),i=n.pan(),o=t.x1*r+i.x,a=t.x2*r+i.x,s=t.y1*r+i.y,l=t.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:l,w:a-o,h:l-s}},a1.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,e||t.emitAndNotify("bounds")}}),this):this},a1.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function n(e){if(e.isParent()){var t=e._private,n=e.children(),r="include"===e.pstyle("compound-sizing-wrt-labels").value,i={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},o=n.boundingBox({includeLabels:r,includeOverlays:!1,useCache:!1}),a=t.position;0!==o.w&&0!==o.h||((o={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=a.x-o.w/2,o.x2=a.x+o.w/2,o.y1=a.y-o.h/2,o.y2=a.y+o.h/2);var s=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(s=100*s/i.width.val);var l=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(l=100*l/i.width.val);var u=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(u=100*u/i.height.val);var c=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(c=100*c/i.height.val);var h=v(i.width.val-o.w,s,l),d=h.biasDiff,f=h.biasComplementDiff,p=v(i.height.val-o.h,u,c),g=p.biasDiff,m=p.biasComplementDiff;t.autoPadding=function(e,t,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return e>0?n.pfValue*e:0;case"height":return t>0?n.pfValue*t:0;case"average":return e>0&&t>0?n.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?n.pfValue*t:n.pfValue*e:0;case"max":return e>0&&t>0?e>t?n.pfValue*e:n.pfValue*t:0;default:return 0}}(o.w,o.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),t.autoWidth=Math.max(o.w,i.width.val),a.x=(-d+o.x1+o.x2+f)/2,t.autoHeight=Math.max(o.h,i.height.val),a.y=(-g+o.y1+o.y2+m)/2}function v(e,t,n){var r=0,i=0,o=t+n;return e>0&&o>0&&(r=t/o*e,i=n/o*e),{biasDiff:r,biasComplementDiff:i}}}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;o.compoundBoundsClean&&!e||(n(i),t.batching()||(o.compoundBoundsClean=!0))}return this};var l1=function(e){return e===1/0||e===-1/0?0:e},u1=function(e,t,n,r,i){r-t!==0&&i-n!==0&&null!=t&&null!=n&&null!=r&&null!=i&&(e.x1=t<e.x1?t:e.x1,e.x2=r>e.x2?r:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},c1=function(e,t){return null==t?e:u1(e,t.x1,t.y1,t.x2,t.y2)},h1=function(e,t,n){return JW(e,t,n)},d1=function(e,t,n){if(!t.cy().headless()){var r,i,o=t._private,a=o.rstyle,s=a.arrowWidth/2;if("none"!==t.pstyle(n+"-arrow-shape").value){"source"===n?(r=a.srcX,i=a.srcY):"target"===n?(r=a.tgtX,i=a.tgtY):(r=a.midX,i=a.midY);var l=o.arrowBounds=o.arrowBounds||{},u=l[n]=l[n]||{};u.x1=r-s,u.y1=i-s,u.x2=r+s,u.y2=i+s,u.w=u.x2-u.x1,u.h=u.y2-u.y1,jX(u,1),u1(e,u.x1,u.y1,u.x2,u.y2)}}},f1=function(e,t,n){if(!t.cy().headless()){var r;r=n?n+"-":"";var i=t._private,o=i.rstyle;if(t.pstyle(r+"label").strValue){var a,s,l,u,c=t.pstyle("text-halign"),h=t.pstyle("text-valign"),d=h1(o,"labelWidth",n),f=h1(o,"labelHeight",n),p=h1(o,"labelX",n),g=h1(o,"labelY",n),m=t.pstyle(r+"text-margin-x").pfValue,v=t.pstyle(r+"text-margin-y").pfValue,y=t.isEdge(),b=t.pstyle(r+"text-rotation"),x=t.pstyle("text-outline-width").pfValue,w=t.pstyle("text-border-width").pfValue/2,E=t.pstyle("text-background-padding").pfValue,T=f,_=d,k=_/2,A=T/2;if(y)a=p-k,s=p+k,l=g-A,u=g+A;else{switch(c.value){case"left":a=p-_,s=p;break;case"center":a=p-k,s=p+k;break;case"right":a=p,s=p+_}switch(h.value){case"top":l=g-T,u=g;break;case"center":l=g-A,u=g+A;break;case"bottom":l=g,u=g+T}}var S=m-Math.max(x,w)-E-2,N=m+Math.max(x,w)+E+2,M=v-Math.max(x,w)-E-2,C=v+Math.max(x,w)+E+2;a+=S,s+=N,l+=M,u+=C;var I=n||"main",R=i.labelBounds,L=R[I]=R[I]||{};L.x1=a,L.y1=l,L.x2=s,L.y2=u,L.w=s-a,L.h=u-l,L.leftPad=S,L.rightPad=N,L.topPad=M,L.botPad=C;var O=y&&"autorotate"===b.strValue,D=null!=b.pfValue&&0!==b.pfValue;if(O||D){var P=O?h1(i.rstyle,"labelAngle",n):b.pfValue,B=Math.cos(P),F=Math.sin(P),z=(a+s)/2,U=(l+u)/2;if(!y){switch(c.value){case"left":z=s;break;case"right":z=a}switch(h.value){case"top":U=u;break;case"bottom":U=l}}var G=function(e,t){return{x:(e-=z)*B-(t-=U)*F+z,y:e*F+t*B+U}},V=G(a,l),j=G(a,u),H=G(s,l),$=G(s,u);a=Math.min(V.x,j.x,H.x,$.x),s=Math.max(V.x,j.x,H.x,$.x),l=Math.min(V.y,j.y,H.y,$.y),u=Math.max(V.y,j.y,H.y,$.y)}var Y=I+"Rot",q=R[Y]=R[Y]||{};q.x1=a,q.y1=l,q.x2=s,q.y2=u,q.w=s-a,q.h=u-l,u1(e,a,l,s,u),u1(i.labelBounds.all,a,l,s,u)}return e}},p1=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,r=t.pstyle("outline-width").value+t.pstyle("outline-offset").value;g1(e,t,n,r,"outside",r/2)}},g1=function(e,t,n,r,i,o){if(!(0===n||r<=0||"inside"===i)){var a=t.cy(),s=t.pstyle("shape").value,l=a.renderer().nodeShapes[s],u=t.position(),c=u.x,h=u.y,d=t.width(),f=t.height();if(l.hasMiterBounds){"center"===i&&(r/=2);var p=l.miterBounds(c,h,d,f,r);c1(e,p)}else null!=o&&o>0&&HX(e,[o,o,o,o])}},m1=function(e,t){var n,r,i,o,a,s,l,u=e._private.cy,c=u.styleEnabled(),h=u.headless(),d=UX(),f=e._private,p=e.isNode(),g=e.isEdge(),m=f.rstyle,v=p&&c?e.pstyle("bounds-expansion").pfValue:[0],y=function(e){return"none"!==e.pstyle("display").value},b=!c||y(e)&&(!g||y(e.source())&&y(e.target()));if(b){var x=0;c&&t.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(x=e.pstyle("overlay-padding").value);var w=0;c&&t.includeUnderlays&&0!==e.pstyle("underlay-opacity").value&&(w=e.pstyle("underlay-padding").value);var E=Math.max(x,w),T=0;if(c&&(T=e.pstyle("width").pfValue/2),p&&t.includeNodes){var _=e.position();a=_.x,s=_.y;var k=e.outerWidth()/2,A=e.outerHeight()/2;u1(d,n=a-k,i=s-A,r=a+k,o=s+A),c&&p1(d,e),c&&t.includeOutlines&&!h&&p1(d,e),c&&function(e,t){if(!t.cy().headless()){var n=t.pstyle("border-opacity").value,r=t.pstyle("border-width").pfValue,i=t.pstyle("border-position").value;g1(e,t,n,r,i)}}(d,e)}else if(g&&t.includeEdges)if(c&&!h){var S=e.pstyle("curve-style").strValue;if(n=Math.min(m.srcX,m.midX,m.tgtX),r=Math.max(m.srcX,m.midX,m.tgtX),i=Math.min(m.srcY,m.midY,m.tgtY),o=Math.max(m.srcY,m.midY,m.tgtY),u1(d,n-=T,i-=T,r+=T,o+=T),"haystack"===S){var N=m.haystackPts;if(N&&2===N.length){if(n=N[0].x,i=N[0].y,n>(r=N[1].x)){var M=n;n=r,r=M}if(i>(o=N[1].y)){var C=i;i=o,o=C}u1(d,n-T,i-T,r+T,o+T)}}else if("bezier"===S||"unbundled-bezier"===S||Qq(S,"segments")||Qq(S,"taxi")){var I;switch(S){case"bezier":case"unbundled-bezier":I=m.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":I=m.linePts}if(null!=I)for(var R=0;R<I.length;R++){var L=I[R];n=L.x-T,r=L.x+T,i=L.y-T,o=L.y+T,u1(d,n,i,r,o)}}}else{var O=e.source().position(),D=e.target().position();if((n=O.x)>(r=D.x)){var P=n;n=r,r=P}if((i=O.y)>(o=D.y)){var B=i;i=o,o=B}u1(d,n-=T,i-=T,r+=T,o+=T)}if(c&&t.includeEdges&&g&&(d1(d,e,"mid-source"),d1(d,e,"mid-target"),d1(d,e,"source"),d1(d,e,"target")),c)if("yes"===e.pstyle("ghost").value){var F=e.pstyle("ghost-offset-x").pfValue,z=e.pstyle("ghost-offset-y").pfValue;u1(d,d.x1+F,d.y1+z,d.x2+F,d.y2+z)}var U=f.bodyBounds=f.bodyBounds||{};$X(U,d),HX(U,v),jX(U,1),c&&(n=d.x1,r=d.x2,i=d.y1,o=d.y2,u1(d,n-E,i-E,r+E,o+E));var G=f.overlayBounds=f.overlayBounds||{};$X(G,d),HX(G,v),jX(G,1);var V=f.labelBounds=f.labelBounds||{};null!=V.all?((l=V.all).x1=1/0,l.y1=1/0,l.x2=-1/0,l.y2=-1/0,l.w=0,l.h=0):V.all=UX(),c&&t.includeLabels&&(t.includeMainLabels&&f1(d,e,null),g&&(t.includeSourceLabels&&f1(d,e,"source"),t.includeTargetLabels&&f1(d,e,"target")))}return d.x1=l1(d.x1),d.y1=l1(d.y1),d.x2=l1(d.x2),d.y2=l1(d.y2),d.w=l1(d.x2-d.x1),d.h=l1(d.y2-d.y1),d.w>0&&d.h>0&&b&&(HX(d,v),jX(d,1)),d},v1=function(e){var t=0,n=function(e){return(e?1:0)<<t++},r=0;return r+=n(e.incudeNodes),r+=n(e.includeEdges),r+=n(e.includeLabels),r+=n(e.includeMainLabels),r+=n(e.includeSourceLabels),r+=n(e.includeTargetLabels),r+=n(e.includeOverlays),r+=n(e.includeOutlines)},y1=function(e){var t=function(e){return Math.round(e)};if(e.isEdge()){var n=e.source().position(),r=e.target().position();return RW([t(n.x),t(n.y),t(r.x),t(r.y)])}var i=e.position();return RW([t(i.x),t(i.y)])},b1=function(e,t){var n,r=e._private,i=e.isEdge(),o=(null==t?w1:v1(t))===w1;if(null==r.bbCache?(n=m1(e,x1),r.bbCache=n,r.bbCachePosKey=y1(e)):n=r.bbCache,!o){var a=e.isNode();n=UX(),(t.includeNodes&&a||t.includeEdges&&!a)&&(t.includeOverlays?c1(n,r.overlayBounds):c1(n,r.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?c1(n,r.labelBounds.all):(t.includeMainLabels&&c1(n,r.labelBounds.mainRot),t.includeSourceLabels&&c1(n,r.labelBounds.sourceRot),t.includeTargetLabels&&c1(n,r.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},x1={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},w1=v1(x1),E1=KW(x1);a1.boundingBox=function(e){var t,n=void 0===e||void 0===e.useCache||!0===e.useCache,r=qq(function(e){var t=e._private;return null==t.bbCache||t.styleDirty||t.bbCachePosKey!==y1(e)},function(e){return e.id()});if(n&&1===this.length&&!r(this[0]))e=void 0===e?x1:E1(e),t=b1(this[0],e);else{t=UX();var i=E1(e=e||x1),o=this,a=o.cy().styleEnabled();this.edges().forEach(r),this.nodes().forEach(r),a&&this.recalculateRenderedStyle(n),this.updateCompoundBounds(!n);for(var s=0;s<o.length;s++){var l=o[s];r(l)&&l.dirtyBoundingBoxCache(),c1(t,b1(l,i))}}return t.x1=l1(t.x1),t.y1=l1(t.y1),t.x2=l1(t.x2),t.y2=l1(t.y2),t.w=l1(t.x2-t.x1),t.h=l1(t.y2-t.y1),t},a1.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},a1.boundingBoxAt=function(e){var t=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),i=n.collection();if(r&&(i=t.filter(function(e){return e.isParent()}),t=t.not(i)),Bq(e)){var o=e;e=function(){return o}}n.startBatch(),t.forEach(function(t,n){return t._private.bbAtOldPos=e(t,n)}).silentPositions(e),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var a=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}}(this.boundingBox({useCache:!1}));return t.silentPositions(function(e){return e._private.bbAtOldPos}),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),n.endBatch(),a},o1.boundingbox=o1.bb=o1.boundingBox,o1.renderedBoundingbox=o1.renderedBoundingBox;var T1,_1,k1=a1;T1=_1={};var A1=function(e){e.uppercaseName=Zq(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Zq(e.outerName),T1[e.name]=function(){var t=this[0],n=t._private,r=n.cy._private.styleEnabled;if(t){if(r){if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var i=t.pstyle(e.name);return"label"===i.strValue?(t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0):i.pfValue}return 1}},T1["outer"+e.uppercaseName]=function(){var t=this[0],n=t._private.cy._private.styleEnabled;if(t){if(n){var r=t[e.name](),i=t.pstyle("border-position").value;return r+("center"===i?t.pstyle("border-width").pfValue:"outside"===i?2*t.pstyle("border-width").pfValue:0)+2*t.padding()}return 1}},T1["rendered"+e.uppercaseName]=function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()},T1["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}};A1({name:"width"}),A1({name:"height"}),_1.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},_1.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},_1.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var S1=_1,N1={controlPoints:{get:function(e){return e.renderer().getControlPoints(e)},mult:!0},segmentPoints:{get:function(e){return e.renderer().getSegmentPoints(e)},mult:!0},sourceEndpoint:{get:function(e){return e.renderer().getSourceEndpoint(e)}},targetEndpoint:{get:function(e){return e.renderer().getTargetEndpoint(e)}},midpoint:{get:function(e){return e.renderer().getEdgeMidpoint(e)}}},M1=Object.keys(N1).reduce(function(e,t){var n=N1[t],r=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)}(t);return e[t]=function(){return function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)}(this,n.get)},n.mult?e[r]=function(){return function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),r=n.pan(),i=n.zoom();return t(e).map(function(e){return NX(e,i,r)})}}(this,n.get)}:e[r]=function(){return function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return NX(t(e),n.zoom(),n.pan())}}(this,n.get)},e},{}),C1=oW({},s1,k1,S1,M1),I1=function(e,t){this.recycle(e,t)};function R1(){return!1}function L1(){return!0}I1.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=R1,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?L1:R1):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=L1;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=L1;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=L1,this.stopPropagation()},isDefaultPrevented:R1,isPropagationStopped:R1,isImmediatePropagationStopped:R1};var O1=/^([^.]+)(\.(?:[^.]+))?$/,D1={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},P1=Object.keys(D1),B1={};function F1(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B1,t=arguments.length>1?arguments[1]:void 0,n=0;n<P1.length;n++){var r=P1[n];this[r]=e[r]||D1[r]}this.context=t||this.context,this.listeners=[],this.emitting=0}var z1=F1.prototype,U1=function(e,t,n,r,i,o,a){Dq(r)&&(i=r,r=null),a&&(o=null==o?a:oW({},o,a));for(var s=Pq(n)?n:n.split(/\s+/),l=0;l<s.length;l++){var u=s[l];if(!$q(u)){var c=u.match(O1);if(c)if(!1===t(e,u,c[1],c[2]?c[2]:null,r,i,o))break}}},G1=function(e,t){return e.addEventFields(e.context,t),new I1(t.type,t)},V1=function(e,t,n){if("event"!==Lq(n))if(Bq(n))t(e,G1(e,n));else for(var r=Pq(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var o=r[i];if(!$q(o)){var a=o.match(O1);if(a){var s=a[1],l=a[2]?a[2]:null;t(e,G1(e,{type:s,namespace:l,target:e.context}))}}}else t(e,n)};z1.on=z1.addListener=function(e,t,n,r,i){return U1(this,function(e,t,n,r,i,o,a){Dq(o)&&e.listeners.push({event:t,callback:o,type:n,namespace:r,qualifier:i,conf:a})},e,t,n,r,i),this},z1.one=function(e,t,n,r){return this.on(e,t,n,r,{one:!0})},z1.removeListener=z1.off=function(e,t,n,r){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var o=this.listeners,a=function(a){var s=o[a];U1(i,function(t,n,r,i,l,u){if((s.type===r||"*"===e)&&(!i&&".*"!==s.namespace||s.namespace===i)&&(!l||t.qualifierCompare(s.qualifier,l))&&(!u||s.callback===u))return o.splice(a,1),!1},e,t,n,r)},s=o.length-1;s>=0;s--)a(s);return this},z1.removeAllListeners=function(){return this.removeListener("*")},z1.emit=z1.trigger=function(e,t,n){var r=this.listeners,i=r.length;return this.emitting++,Pq(t)||(t=[t]),V1(this,function(e,o){null!=n&&(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}],i=r.length);for(var a=function(){var n=r[s];if(n.type===o.type&&(!n.namespace||n.namespace===o.namespace||".*"===n.namespace)&&e.eventMatches(e.context,n,o)){var i=[o];null!=t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}}(i,t),e.beforeEmit(e.context,n,o),n.conf&&n.conf.one&&(e.listeners=e.listeners.filter(function(e){return e!==n}));var a=e.callbackContext(e.context,n,o),l=n.callback.apply(a,i);e.afterEmit(e.context,n,o),!1===l&&(o.stopPropagation(),o.preventDefault())}},s=0;s<i;s++)a();e.bubble(e.context)&&!o.isPropagationStopped()&&e.parent(e.context).emit(o,t)},e),this.emitting--,this};var j1={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&Gq(n.target)&&r.matches(n.target)},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},H1=function(e){return Oq(e)?new U0(e):e},$1={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new F1(j1,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var r=H1(t),i=0;i<this.length;i++){this[i].emitter().on(e,r,n)}return this},removeListener:function(e,t,n){for(var r=H1(t),i=0;i<this.length;i++){this[i].emitter().removeListener(e,r,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){this[e].emitter().removeAllListeners()}return this},one:function(e,t,n){for(var r=H1(t),i=0;i<this.length;i++){this[i].emitter().one(e,r,n)}return this},once:function(e,t,n){for(var r=H1(t),i=0;i<this.length;i++){this[i].emitter().on(e,r,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){this[n].emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}};r0.eventAliasesOn($1);var Y1={nodes:function(e){return this.filter(function(e){return e.isNode()}).filter(e)},edges:function(e){return this.filter(function(e){return e.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?e.push(r):t.push(r)}return{nodes:e,edges:t}},filter:function(e,t){if(void 0===e)return this;if(Oq(e)||Uq(e))return new U0(e).filter(this);if(Dq(e)){for(var n=this.spawn(),r=this,i=0;i<r.length;i++){var o=r[i];(t?e.apply(t,[o,i,r]):e(o,i,r))&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Oq(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var r=this[n];e.has(r)||t.push(r)}return t}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(Oq(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),r=e,i=this.length<e.length,o=i?this:r,a=i?r:this,s=0;s<o.length;s++){var l=o[s];a.has(l)&&n.push(l)}return n},xor:function(e){var t=this._private.cy;Oq(e)&&(e=t.$(e));var n=this.spawn(),r=e,i=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],o=i._private.data.id;t.hasElementWithId(o)||n.push(i)}};return i(this,r),i(r,this),n},diff:function(e){var t=this._private.cy;Oq(e)&&(e=t.$(e));var n=this.spawn(),r=this.spawn(),i=this.spawn(),o=e,a=function(e,t,n){for(var r=0;r<e.length;r++){var o=e[r],a=o._private.data.id;t.hasElementWithId(a)?i.merge(o):n.push(o)}};return a(this,o,n),a(o,this,r),{left:n,right:r,both:i}},add:function(e){var t=this._private.cy;if(!e)return this;if(Oq(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i];!this.has(o)&&r.push(o)}return r},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&Oq(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=t.map,o=0;o<e.length;o++){var a=e[o],s=a._private.data.id;if(!i.has(s)){var l=this.length++;this[l]=a,i.set(s,{ele:a,index:l})}}return this},unmergeAt:function(e){var t=this[e].id(),n=this._private.map;this[e]=void 0,n.delete(t);var r=e===this.length-1;if(this.length>1&&!r){var i=this.length-1,o=this[i],a=o._private.data.id;this[i]=void 0,this[e]=o,n.set(a,{ele:o,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,r=t.map.get(n);if(!r)return this;var i=r.index;return this.unmergeAt(i),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&Oq(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=0;r<e.length;r++)this.unmergeOne(e[r]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){e(this[t])&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i],a=t?e.apply(t,[o,i,r]):e(o,i,r);n.push(a)}return n},reduce:function(e,t){for(var n=t,r=this,i=0;i<r.length;i++)n=e(n,r[i],i,r);return n},max:function(e,t){for(var n,r=-1/0,i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);s>r&&(r=s,n=a)}return{value:r,ele:n}},min:function(e,t){for(var n,r=1/0,i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);s<r&&(r=s,n=a)}return{value:r,ele:n}}},q1=Y1;q1.u=q1["|"]=q1["+"]=q1.union=q1.or=q1.add,q1["\\"]=q1["!"]=q1["-"]=q1.difference=q1.relativeComplement=q1.subtract=q1.not,q1.n=q1["&"]=q1["."]=q1.and=q1.intersection=q1.intersect,q1["^"]=q1["(+)"]=q1["(-)"]=q1.symmetricDifference=q1.symdiff=q1.xor,q1.fnFilter=q1.filterFn=q1.stdFilter=q1.filter,q1.complement=q1.abscomp=q1.absoluteComplement;var W1=function(e,t){var n=e.cy().hasCompoundNodes();function r(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?n?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?FW:0}var i=r(e)-r(t);if(0!==i)return i;function o(e){return"auto"===e.pstyle("z-index-compare").value&&e.isNode()?1:0}var a=o(e)-o(t);if(0!==a)return a;var s=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==s?s:e.poolIndex()-t.poolIndex()},X1={forEach:function(e,t){if(Dq(e))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(t?e.apply(t,[i,r,this]):e(i,r,this)))break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],r=this.length;null==t&&(t=r),null==e&&(e=0),e<0&&(e=r+e),t<0&&(t=r+t);for(var i=e;i>=0&&i<t&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!Dq(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(W1)},zDepth:function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var n=t.data.parent?e.parents().size():0;return e.isParent()?n:FW-1}var r=t.source,i=t.target,o=r.zDepth(),a=i.zDepth();return Math.max(o,a,0)}}};X1.each=X1.forEach;var K1;K1="undefined",("undefined"==typeof Symbol?"undefined":ZY(Symbol))!=K1&&ZY(Symbol.iterator)!=K1&&(X1[Symbol.iterator]=function(){var e=this,t={value:void 0,done:!1},n=0,r=this.length;return qY({next:function(){return n<r?t.value=e[n++]:(t.value=void 0,t.done=!0),t}},Symbol.iterator,function(){return this})});var Z1=KW({nodeDimensionsIncludeLabels:!1}),Q1={layoutDimensions:function(e){var t;if(e=Z1(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};else t={w:0,h:0};return 0!==t.w&&0!==t.h||(t.w=t.h=1),t},layoutPositions:function(e,t,n){var r=this.nodes().filter(function(e){return!e.isParent()}),i=this.cy(),o=t.eles,a=function(e){return e.id()},s=qq(n,a);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=t.spacingFactor&&1!==t.spacingFactor,u=function(){if(!l)return null;for(var e=UX(),t=0;t<r.length;t++){var n=r[t],i=s(n,t);VX(e,i.x,i.y)}return e}(),c=qq(function(e,n){var r=s(e,n);l&&(r=function(e,t,n){var r=t.x1+t.w/2,i=t.y1+t.h/2;return{x:r+(n.x-r)*e,y:i+(n.y-i)*e}}(Math.abs(t.spacingFactor),u,r));return null!=t.transform&&(r=t.transform(e,r)),r},a);if(t.animate){for(var h=0;h<r.length;h++){var d=r[h],f=c(d,h);if(null==t.animateFilter||t.animateFilter(d,h)){var p=d.animation({position:f,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(p)}else d.position(f)}if(t.fit){var g=i.animation({fit:{boundingBox:o.boundingBoxAt(c),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(g)}else if(void 0!==t.zoom&&void 0!==t.pan){var m=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}e.animations.forEach(function(e){return e.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),OZ.all(e.animations.map(function(e){return e.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else r.positions(c),t.fit&&i.fit(t.eles,t.padding),null!=t.zoom&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(oW({},e,{eles:this}))}};function J1(e,t,n){var r,i=n._private,o=i.styleCache=i.styleCache||[];return null!=(r=o[e])?r:r=o[e]=t(n)}function e2(e,t){return e=LW(e),function(n){return J1(e,t,n)}}function t2(e,t){e=LW(e);var n=function(e){return t.call(e)};return function(){var t=this[0];if(t)return J1(e,n,t)}}Q1.createLayout=Q1.makeLayout=Q1.layout;var n2={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),r=t.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e,t=this.cy(),n=function(e){return e._private.styleCache=null};t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(n)):this.forEach(function(e){n(e),e.connectedEdges().forEach(n)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var n=this;e=!(!e&&void 0!==e),t.hasCompoundNodes()&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var r=n;return e?r.emitAndNotify("style"):r.emit("style"),n.forEach(function(e){return e._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,r.style().apply(n));var i=n._private.style[e];return null!=i?i:t?r.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled())return t?t.pstyle(e).units:void 0},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];return n?t.style().getRenderedStyle(n,e):void 0},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,i=n.style();if(Bq(e)){var o=e;i.applyBypass(this,o,r),this.emitAndNotify("style")}else if(Oq(e)){if(void 0===t){var a=this[0];return a?i.getStylePropertyValue(a,e):void 0}i.applyBypass(this,e,t,r),this.emitAndNotify("style")}else if(void 0===e){var s=this[0];return s?i.getRawStyle(s):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,r=t.style(),i=this;if(void 0===e)for(var o=0;o<i.length;o++){var a=i[o];r.removeAllBypasses(a,n)}else{e=e.split(/\s+/);for(var s=0;s<i.length;s++){var l=i[s];r.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!t)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++){i*=o[a].pstyle("opacity").value}return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function r2(e,t){var n=e._private.data.parent?e.parents():null;if(n)for(var r=0;r<n.length;r++){if(!t(n[r]))return!1}return!0}function i2(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,r=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var i=this[0],o=e.hasCompoundNodes();if(i){var a=i._private;if(!t(i))return!1;if(i.isNode())return!o||r2(i,r);var s=a.source,l=a.target;return n(s)&&(!o||r2(s,n))&&(s===l||n(l)&&(!o||r2(l,n)))}}}var o2=e2("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});n2.takesUpSpace=t2("takesUpSpace",i2({ok:o2}));var a2=e2("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&o2(e)}),s2=e2("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&o2(e)});n2.interactive=t2("interactive",i2({ok:a2,parentOk:s2,edgeOkViaNode:o2})),n2.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var l2=e2("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&o2(e)}),u2=o2;n2.visible=t2("visible",i2({ok:l2,edgeOkViaNode:u2})),n2.hidden=function(){var e=this[0];if(e)return!e.visible()},n2.isBundledBezier=t2("isBundledBezier",function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())}),n2.bypass=n2.css=n2.style,n2.renderedCss=n2.renderedStyle,n2.removeBypass=n2.removeCss=n2.removeStyle,n2.pstyle=n2.parsedStyle;var c2={};function h2(e){return function(){var t=arguments,n=[];if(2===t.length){var r=t[0],i=t[1];this.on(e.event,r,i)}else if(1===t.length&&Dq(t[0])){var o=t[0];this.on(e.event,o)}else if(0===t.length||1===t.length&&Pq(t[0])){for(var a=1===t.length?t[0]:null,s=0;s<this.length;s++){var l=this[s],u=!e.ableField||l._private[e.ableField],c=l._private[e.field]!=e.value;if(e.overrideAble){var h=e.overrideAble(l);if(void 0!==h&&(u=h,!h))return this}u&&(l._private[e.field]=e.value,c&&n.push(l))}var d=this.spawn(n);d.updateStyle(),d.emit(e.event),a&&d.emit(a)}return this}}function d2(e){c2[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(void 0!==n)return n}return t._private[e.field]}},c2[e.on]=h2({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),c2[e.off]=h2({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}d2({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),d2({field:"grabbable",overrideField:function(e){return!e.cy().autoungrabify()&&!e.pannable()&&void 0},on:"grabify",off:"ungrabify"}),d2({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),d2({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),c2.deselect=c2.unselect,c2.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},d2({field:"active",on:"activate",off:"unactivate"}),d2({field:"pannable",on:"panify",off:"unpanify"}),c2.inactive=function(){var e=this[0];if(e)return!e._private.active};var f2={},p2=function(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var o=!1,a=i.connectedEdges(),s=0;s<a.length;s++){var l=a[s],u=l.source(),c=l.target();if(e.noIncomingEdges&&c===i&&u!==i||e.noOutgoingEdges&&u===i&&c!==i){o=!0;break}}o||n.push(i)}}return this.spawn(n,!0).filter(t)}},g2=function(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),u=s.target();e.outgoing&&l===i?(n.push(s),n.push(u)):e.incoming&&u===i&&(n.push(s),n.push(l))}}return this.spawn(n,!0).filter(t)}},m2=function(e){return function(t){for(var n=this,r=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var l=o[s],u=l.id();i[u]||(i[u]=!0,r.push(l),a=!0)}if(!a)break;n=o}return this.spawn(r,!0).filter(t)}};function v2(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[e.attr];i&&n.push(i)}return this.spawn(n,!0).filter(t)}}function y2(e){return function(t){var n=[],r=this._private.cy,i=e||{};Oq(t)&&(t=r.$(t));for(var o=0;o<t.length;o++)for(var a=t[o]._private.edges,s=0;s<a.length;s++){var l=a[s],u=l._private.data,c=this.hasElementWithId(u.source)&&t.hasElementWithId(u.target),h=t.hasElementWithId(u.source)&&this.hasElementWithId(u.target);if(c||h){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!c)continue;if(i.thisIsTgt&&!h)continue}n.push(l)}}return this.spawn(n,!0)}}function b2(e){return e=oW({},{codirected:!1},e),function(t){for(var n=[],r=this.edges(),i=e,o=0;o<r.length;o++)for(var a=r[o]._private,s=a.source,l=s._private.data.id,u=a.data.target,c=s._private.edges,h=0;h<c.length;h++){var d=c[h],f=d._private.data,p=f.target,g=f.source,m=p===u&&g===l,v=l===p&&u===g;(i.codirected&&m||!i.codirected&&(m||v))&&n.push(d)}return this.spawn(n,!0).filter(t)}}f2.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},oW(f2,{roots:p2({noIncomingEdges:!0}),leaves:p2({noOutgoingEdges:!0}),outgoers:$0(g2({outgoing:!0}),"outgoers"),successors:m2({outgoing:!0}),incomers:$0(g2({incoming:!0}),"incomers"),predecessors:m2({})}),oW(f2,{neighborhood:$0(function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),u=s.target(),c=i===l?u:l;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),f2.neighbourhood=f2.neighborhood,f2.closedNeighbourhood=f2.closedNeighborhood,f2.openNeighbourhood=f2.openNeighborhood,oW(f2,{source:$0(function(e){var t,n=this[0];return n&&(t=n._private.source||n.cy().collection()),t&&e?t.filter(e):t},"source"),target:$0(function(e){var t,n=this[0];return n&&(t=n._private.target||n.cy().collection()),t&&e?t.filter(e):t},"target"),sources:v2({attr:"source"}),targets:v2({attr:"target"})}),oW(f2,{edgesWith:$0(y2(),"edgesWith"),edgesTo:$0(y2({thisIsSrc:!0}),"edgesTo")}),oW(f2,{connectedEdges:$0(function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,o=0;o<i.length;o++){var a=i[o];t.push(a)}}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:$0(function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(t.push(r.source()[0]),t.push(r.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:$0(b2(),"parallelEdges"),codirectedEdges:$0(b2({codirected:!0}),"codirectedEdges")}),oW(f2,{components:function(e){var t=this,n=t.cy(),r=n.collection(),i=null==e?t.nodes():e.nodes(),o=[];null!=e&&i.empty()&&(i=e.sources());var a=function(e,t){r.merge(e),i.unmerge(e),t.merge(e)};if(i.empty())return t.spawn();var s=function(){var e=n.collection();o.push(e);var r=i[0];a(r,e),t.bfs({directed:!1,roots:r,visit:function(t){return a(t,e)}}),e.forEach(function(n){n.connectedEdges().forEach(function(n){t.has(n)&&e.has(n.source())&&e.has(n.target())&&e.merge(n)})})};do{s()}while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),f2.componentsOf=f2.components;var x2=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==e){var i=new tX,o=!1;if(t){if(t.length>0&&Bq(t[0])&&!Gq(t[0])){o=!0;for(var a=[],s=new rX,l=0,u=t.length;l<u;l++){var c=t[l];null==c.data&&(c.data={});var h=c.data;if(null==h.id)h.id=qW();else if(e.hasElementWithId(h.id)||s.has(h.id))continue;var d=new iX(e,c,!1);a.push(d),s.add(h.id)}t=a}}else t=[];this.length=0;for(var f=0,p=t.length;f<p;f++){var g=t[f][0];if(null!=g){var m=g._private.data.id;n&&i.has(m)||(n&&i.set(m,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:e,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(e){this.lazyMap=e},rebuildMap:function(){for(var e=this.lazyMap=new tX,t=this.eles,n=0;n<t.length;n++){var r=t[n];e.set(r.id(),{index:n,ele:r})}}},n&&(this._private.map=i),o&&!r&&this.restore()}else jW("A collection must have a reference to the core")},w2=iX.prototype=x2.prototype=Object.create(Array.prototype);w2.instanceString=function(){return"collection"},w2.spawn=function(e,t){return new x2(this.cy(),e,t)},w2.spawnSelf=function(){return this.spawn(this)},w2.cy=function(){return this._private.cy},w2.renderer=function(){return this._private.cy.renderer()},w2.element=function(){return this[0]},w2.collection=function(){return Vq(this)?this:new x2(this._private.cy,[this])},w2.unique=function(){return new x2(this._private.cy,this,!0)},w2.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},w2.getElementById=function(e){e=""+e;var t=this._private.cy,n=this._private.map.get(e);return n?n.ele:new x2(t)},w2.$id=w2.getElementById,w2.poolIndex=function(){var e=this._private.cy._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},w2.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},w2.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},w2.json=function(e){var t=this.element(),n=this.cy();if(null==t&&e)return this;if(null!=t){var r=t._private;if(Bq(e)){if(n.startBatch(),e.data){t.data(e.data);var i=r.data;if(t.isEdge()){var o=!1,a={},s=e.data.source,l=e.data.target;null!=s&&s!=i.source&&(a.source=""+s,o=!0),null!=l&&l!=i.target&&(a.target=""+l,o=!0),o&&(t=t.move(a))}else{var u="parent"in e.data,c=e.data.parent;!u||null==c&&null==i.parent||c==i.parent||(void 0===c&&(c=null),null!=c&&(c=""+c),t=t.move({parent:c}))}}e.position&&t.position(e.position);var h=function(n,i,o){var a=e[n];null!=a&&a!==r[n]&&(a?t[i]():t[o]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),n.endBatch(),this}if(void 0===e){var d={data:YW(r.data),position:YW(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};d.classes="";var f=0;return r.classes.forEach(function(e){return d.classes+=0===f++?e:" "+e}),d}}},w2.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t].json();e.push(n)}return e},w2.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=this[n].json(),i=new iX(e,r,!1);t.push(i)}return new x2(e,t)},w2.copy=w2.clone,w2.restore=function(){for(var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,o=i.cy(),a=o._private,s=[],l=[],u=0,c=i.length;u<c;u++){var h=i[u];r&&!h.removed()||(h.isNode()?s.push(h):l.push(h))}e=s.concat(l);var d=function(){e.splice(t,1),t--};for(t=0;t<e.length;t++){var f=e[t],p=f._private,g=p.data;if(f.clearTraversalCache(),r||p.removed)if(void 0===g.id)g.id=qW();else if(Fq(g.id))g.id=""+g.id;else{if($q(g.id)||!Oq(g.id)){jW("Can not create element with invalid string ID `"+g.id+"`"),d();continue}if(o.hasElementWithId(g.id)){jW("Can not create second element with ID `"+g.id+"`"),d();continue}}else;var m=g.id;if(f.isNode()){var v=p.position;null==v.x&&(v.x=0),null==v.y&&(v.y=0)}if(f.isEdge()){for(var y=f,b=["source","target"],x=b.length,w=!1,E=0;E<x;E++){var T=b[E],_=g[T];Fq(_)&&(_=g[T]=""+g[T]),null==_||""===_?(jW("Can not create edge `"+m+"` with unspecified "+T),w=!0):o.hasElementWithId(_)||(jW("Can not create edge `"+m+"` with nonexistant "+T+" `"+_+"`"),w=!0)}if(w){d();continue}var k=o.getElementById(g.source),A=o.getElementById(g.target);k.same(A)?k._private.edges.push(y):(k._private.edges.push(y),A._private.edges.push(y)),y._private.source=k,y._private.target=A}p.map=new tX,p.map.set(m,{ele:f,index:0}),p.removed=!1,r&&o.addToPool(f)}for(var S=0;S<s.length;S++){var N=s[S],M=N._private.data;Fq(M.parent)&&(M.parent=""+M.parent);var C=M.parent;if(null!=C||N._private.parent){var I=N._private.parent?o.collection().merge(N._private.parent):o.getElementById(C);if(I.empty())M.parent=void 0;else if(I[0].removed())$W(),M.parent=void 0,N._private.parent=null;else{for(var R=!1,L=I;!L.empty();){if(N.same(L)){R=!0,M.parent=void 0;break}L=L.parent()}R||(I[0]._private.children.push(N),N._private.parent=I[0],a.hasCompoundNodes=!0)}}}if(e.length>0){for(var O=e.length===i.length?i:new x2(o,e),D=0;D<O.length;D++){var P=O[D];P.isNode()||(P.parallelEdges().clearTraversalCache(),P.source().clearTraversalCache(),P.target().clearTraversalCache())}(a.hasCompoundNodes?o.collection().merge(O).merge(O.connectedNodes()).merge(O.parent()):O).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?O.emitAndNotify("add"):r&&O.emit("add")}return i},w2.removed=function(){var e=this[0];return e&&e._private.removed},w2.inside=function(){var e=this[0];return e&&!e._private.removed},w2.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=[],i={},o=n._private.cy;function a(e){var n=i[e.id()];t&&e.removed()||n||(i[e.id()]=!0,e.isNode()?(r.push(e),function(e){for(var t=e._private.edges,n=0;n<t.length;n++)a(t[n])}(e),function(e){for(var t=e._private.children,n=0;n<t.length;n++)a(t[n])}(e)):r.unshift(e))}for(var s=0,l=n.length;s<l;s++){a(n[s])}function u(e,t){var n=e._private.edges;ZW(n,t),e.clearTraversalCache()}function c(e){e.clearTraversalCache()}var h=[];function d(e,t){t=t[0];var n=(e=e[0])._private.children,r=e.id();ZW(n,t),t._private.parent=null,h.ids[r]||(h.ids[r]=!0,h.push(e))}h.ids={},n.dirtyCompoundBoundsCache(),t&&o.removeFromPool(r);for(var f=0;f<r.length;f++){var p=r[f];if(p.isEdge()){var g=p.source()[0],m=p.target()[0];u(g,p),u(m,p);for(var v=p.parallelEdges(),y=0;y<v.length;y++){var b=v[y];c(b),b.isBundledBezier()&&b.dirtyBoundingBoxCache()}}else{var x=p.parent();0!==x.length&&d(x,p)}t&&(p._private.removed=!0)}var w=o._private.elements;o._private.hasCompoundNodes=!1;for(var E=0;E<w.length;E++){if(w[E].isParent()){o._private.hasCompoundNodes=!0;break}}var T=new x2(this.cy(),r);T.size()>0&&(e?T.emitAndNotify("remove"):t&&T.emit("remove"));for(var _=0;_<h.length;_++){var k=h[_];t&&k.removed()||k.updateStyle()}return T},w2.move=function(e){var t=this._private.cy,n=this,r=!1,i=!1,o=function(e){return null==e?e:""+e};if(void 0!==e.source||void 0!==e.target){var a=o(e.source),s=o(e.target),l=null!=a&&t.hasElementWithId(a),u=null!=s&&t.hasElementWithId(s);(l||u)&&(t.batch(function(){n.remove(r,i),n.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var t=n[e],o=t._private.data;t.isEdge()&&(l&&(o.source=a),u&&(o.target=s))}n.restore(r,i)}),n.emitAndNotify("move"))}else if(void 0!==e.parent){var c=o(e.parent);if(null===c||t.hasElementWithId(c)){var h=null===c?void 0:c;t.batch(function(){var e=n.remove(r,i);e.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var o=n[t],a=o._private.data;o.isNode()&&(a.parent=h)}e.restore(r,i)}),n.emitAndNotify("move")}}return this},[SZ,i0,o0,V0,Y0,J0,e1,C1,$1,Y1,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},X1,Q1,n2,c2,f2].forEach(function(e){oW(w2,e)});var E2={add:function(e){var t,n=this;if(Uq(e)){var r=e;if(r._private.cy===n)t=r.restore();else{for(var i=[],o=0;o<r.length;o++){var a=r[o];i.push(a.json())}t=new x2(n,i)}}else if(Pq(e)){t=new x2(n,e)}else if(Bq(e)&&(Pq(e.nodes)||Pq(e.edges))){for(var s=e,l=[],u=["nodes","edges"],c=0,h=u.length;c<h;c++){var d=u[c],f=s[d];if(Pq(f))for(var p=0,g=f.length;p<g;p++){var m=oW({group:d},f[p]);l.push(m)}}t=new x2(n,l)}else{t=new iX(n,e).collection()}return t},remove:function(e){if(Uq(e));else if(Oq(e)){var t=e;e=this.$(t)}return e.remove()}};
/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function T2(e,t,n,r){var i=.1,o="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var a=0;a<4;++a)if("number"!=typeof arguments[a]||isNaN(arguments[a])||!isFinite(arguments[a]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var s=o?new Float32Array(11):new Array(11);function l(e,t){return 1-3*t+3*e}function u(e,t){return 3*t-6*e}function c(e){return 3*e}function h(e,t,n){return((l(t,n)*e+u(t,n))*e+c(t))*e}function d(e,t,n){return 3*l(t,n)*e*e+2*u(t,n)*e+c(t)}function f(t){for(var r=0,o=1;10!==o&&s[o]<=t;++o)r+=i;--o;var a=r+(t-s[o])/(s[o+1]-s[o])*i,l=d(a,e,n);return l>=.001?function(t,r){for(var i=0;i<4;++i){var o=d(r,e,n);if(0===o)return r;r-=(h(r,e,n)-t)/o}return r}(t,a):0===l?a:function(t,r,i){var o,a,s=0;do{(o=h(a=r+(i-r)/2,e,n)-t)>0?i=a:r=a}while(Math.abs(o)>1e-7&&++s<10);return a}(t,r,r+i)}var p=!1;function g(){p=!0,e===t&&n===r||function(){for(var t=0;t<11;++t)s[t]=h(t*i,e,n)}()}var m=function(i){return p||g(),e===t&&n===r?i:0===i?0:1===i?1:h(f(i),t,r)};m.getControlPoints=function(){return[{x:e,y:t},{x:n,y:r}]};var v="generateBezier("+[e,t,n,r]+")";return m.toString=function(){return v},m}
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var _2=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function n(n,r){var i={dx:n.v,dv:e(n)},o=t(n,.5*r,i),a=t(n,.5*r,o),s=t(n,r,a),l=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),u=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+l*r,n.v=n.v+u*r,n}return function e(t,r,i){var o,a,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,h=1e-4;for(t=parseFloat(t)||500,r=parseFloat(r)||20,i=i||null,l.tension=t,l.friction=r,a=(o=null!==i)?(c=e(t,r))/i*.016:.016;s=n(s||l,a),u.push(1+s.x),c+=16,Math.abs(s.x)>h&&Math.abs(s.v)>h;);return o?function(e){return u[e*(u.length-1)|0]}:c}}(),k2=function(e,t,n,r){var i=T2(e,t,n,r);return function(e,t,n){return e+(t-e)*i(n)}},A2={linear:function(e,t,n){return e+(t-e)*n},ease:k2(.25,.1,.25,1),"ease-in":k2(.42,0,1,1),"ease-out":k2(0,0,.58,1),"ease-in-out":k2(.42,0,.58,1),"ease-in-sine":k2(.47,0,.745,.715),"ease-out-sine":k2(.39,.575,.565,1),"ease-in-out-sine":k2(.445,.05,.55,.95),"ease-in-quad":k2(.55,.085,.68,.53),"ease-out-quad":k2(.25,.46,.45,.94),"ease-in-out-quad":k2(.455,.03,.515,.955),"ease-in-cubic":k2(.55,.055,.675,.19),"ease-out-cubic":k2(.215,.61,.355,1),"ease-in-out-cubic":k2(.645,.045,.355,1),"ease-in-quart":k2(.895,.03,.685,.22),"ease-out-quart":k2(.165,.84,.44,1),"ease-in-out-quart":k2(.77,0,.175,1),"ease-in-quint":k2(.755,.05,.855,.06),"ease-out-quint":k2(.23,1,.32,1),"ease-in-out-quint":k2(.86,0,.07,1),"ease-in-expo":k2(.95,.05,.795,.035),"ease-out-expo":k2(.19,1,.22,1),"ease-in-out-expo":k2(1,0,0,1),"ease-in-circ":k2(.6,.04,.98,.335),"ease-out-circ":k2(.075,.82,.165,1),"ease-in-out-circ":k2(.785,.135,.15,.86),spring:function(e,t,n){if(0===n)return A2.linear;var r=_2(e,t,n);return function(e,t,n){return e+(t-e)*r(n)}},"cubic-bezier":k2};function S2(e,t,n,r,i){if(1===r)return n;if(t===n)return n;var o=i(t,n,r);return null==e||((e.roundValue||e.color)&&(o=Math.round(o)),void 0!==e.min&&(o=Math.max(o,e.min)),void 0!==e.max&&(o=Math.min(o,e.max))),o}function N2(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function M2(e,t,n,r,i){var o=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var a=N2(e,i),s=N2(t,i);if(Fq(a)&&Fq(s))return S2(o,a,s,n,r);if(Pq(a)&&Pq(s)){for(var l=[],u=0;u<s.length;u++){var c=a[u],h=s[u];if(null!=c&&null!=h){var d=S2(o,c,h,n,r);l.push(d)}else l.push(h)}return l}}function C2(e,t,n,r){var i=!r,o=e._private,a=t._private,s=a.easing,l=a.startTime,u=(r?e:e.cy()).style();if(!a.easingImpl)if(null==s)a.easingImpl=A2.linear;else{var c,h,d;if(Oq(s))c=u.parse("transition-timing-function",s).value;else c=s;Oq(c)?(h=c,d=[]):(h=c[1],d=c.slice(2).map(function(e){return+e})),d.length>0?("spring"===h&&d.push(a.duration),a.easingImpl=A2[h].apply(null,d)):a.easingImpl=A2[h]}var f,p=a.easingImpl;if(f=0===a.duration?1:(n-l)/a.duration,a.applying&&(f=a.progress),f<0?f=0:f>1&&(f=1),null==a.delay){var g=a.startPosition,m=a.position;if(m&&i&&!e.locked()){var v={};I2(g.x,m.x)&&(v.x=M2(g.x,m.x,f,p)),I2(g.y,m.y)&&(v.y=M2(g.y,m.y,f,p)),e.position(v)}var y=a.startPan,b=a.pan,x=o.pan,w=null!=b&&r;w&&(I2(y.x,b.x)&&(x.x=M2(y.x,b.x,f,p)),I2(y.y,b.y)&&(x.y=M2(y.y,b.y,f,p)),e.emit("pan"));var E=a.startZoom,T=a.zoom,_=null!=T&&r;_&&(I2(E,T)&&(o.zoom=zX(o.minZoom,M2(E,T,f,p),o.maxZoom)),e.emit("zoom")),(w||_)&&e.emit("viewport");var k=a.style;if(k&&k.length>0&&i){for(var A=0;A<k.length;A++){var S=k[A],N=S.name,M=S,C=a.startStyle[N],I=M2(C,M,f,p,u.properties[C.name]);u.overrideBypass(e,N,I)}e.emit("style")}}return a.progress=f,f}function I2(e,t){return null!=e&&null!=t&&(!(!Fq(e)||!Fq(t))||!(!e||!t))}function R2(e,t,n,r){var i=t._private;i.started=!0,i.startTime=n-i.progress*i.duration}function L2(e,t){var n=t._private.aniEles,r=[];function i(t,n){var i=t._private,o=i.animation.current,a=i.animation.queue,s=!1;if(0===o.length){var l=a.shift();l&&o.push(l)}for(var u=function(e){for(var t=e.length-1;t>=0;t--){(0,e[t])()}e.splice(0,e.length)},c=o.length-1;c>=0;c--){var h=o[c],d=h._private;d.stopped?(o.splice(c,1),d.hooked=!1,d.playing=!1,d.started=!1,u(d.frames)):(d.playing||d.applying)&&(d.playing&&d.applying&&(d.applying=!1),d.started||R2(0,h,e),C2(t,h,e,n),d.applying&&(d.applying=!1),u(d.frames),null!=d.step&&d.step(e),h.completed()&&(o.splice(c,1),d.hooked=!1,d.playing=!1,d.started=!1,u(d.completes)),s=!0)}return n||0!==o.length||0!==a.length||r.push(t),s}for(var o=!1,a=0;a<n.length;a++){var s=i(n[a]);o=o||s}var l=i(t,!0);(o||l)&&(n.length>0?t.notify("draw",n):t.notify("draw")),n.unmerge(r),t.emit("step")}var O2={animate:r0.animate(),animation:r0.animation(),animated:r0.animated(),clearQueue:r0.clearQueue(),delay:r0.delay(),delayAnimation:r0.delayAnimation(),stop:r0.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var t=e.renderer();t&&t.beforeRender?t.beforeRender(function(t,n){L2(n,e)},t.beforeRenderPriorities.animations):function t(){e._private.animationsRunning&&TW(function(n){L2(n,e),t()})}()}}},D2={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&Gq(n.target)&&r.matches(n.target)},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e}},P2=function(e){return Oq(e)?new U0(e):e},B2={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new F1(D2,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,P2(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,P2(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,P2(t),n),this},once:function(e,t,n){return this.emitter().one(e,P2(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};r0.eventAliasesOn(B2);var F2={png:function(e){return e=e||{},this._private.renderer.png(e)},jpg:function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}};F2.jpeg=F2.jpg;var z2={layout:function(e){var t=this;if(null!=e)if(null!=e.name){var n,r=e.name,i=t.extension("layout",r);if(null!=i)return n=Oq(e.eles)?t.$(e.eles):null!=e.eles?e.eles:t.$(),new i(oW({},e,{cy:t,eles:n}));jW("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else jW("A `name` must be specified to make a layout");else jW("Layout options must be specified to make a layout")}};z2.createLayout=z2.makeLayout=z2.layout;var U2={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();null!=t&&r.merge(t)}else if(n.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(e,t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var r=e.batchNotifications[n];r.empty()?t.notify(n):t.notify(n,r)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i];t.getElementById(i).data(o)}})}},G2=KW({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),V2={renderTo:function(e,t,n,r){return this._private.renderer.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(null!=n){void 0!==e.wheelSensitivity&&$W();var r=G2(e);r.cy=t,t._private.renderer=new n(r),this.notify("init")}else jW("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};V2.invalidateDimensions=V2.resize;var j2={collection:function(e,t){return Oq(e)?this.$(e):Uq(e)?e.collection():Pq(e)?(t||(t={}),new x2(this,e,t.unique,t.removed)):new x2(this)},nodes:function(e){var t=this.$(function(e){return e.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(e){return e.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};j2.elements=j2.filter=j2.$;var H2={},$2="t";H2.apply=function(e){for(var t=this,n=t._private.cy.collection(),r=0;r<e.length;r++){var i=e[r],o=t.getContextMeta(i);if(!o.empty){var a=t.getContextStyle(o),s=t.applyContextStyle(o,a,i);i._private.appliedInitStyle?t.updateTransitions(i,s.diffProps):i._private.appliedInitStyle=!0,t.updateStyleHints(i)&&n.push(i)}}return n},H2.getPropertiesDiff=function(e,t){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=e+"-"+t,o=r[i];if(o)return o;for(var a=[],s={},l=0;l<n.length;l++){var u=n[l],c=e[l]===$2,h=t[l]===$2,d=c!==h,f=u.mappedProperties.length>0;if(d||h&&f){var p=void 0;d&&f||d?p=u.properties:f&&(p=u.mappedProperties);for(var g=0;g<p.length;g++){for(var m=p[g],v=m.name,y=!1,b=l+1;b<n.length;b++){var x=n[b];if(t[b]===$2&&(y=null!=x.properties[m.name]))break}s[v]||y||(s[v]=!0,a.push(v))}}}return r[i]=a,a},H2.getContextMeta=function(e){for(var t,n=this,r="",i=e._private.styleCxtKey||"",o=0;o<n.length;o++){var a=n[o];r+=a.selector&&a.selector.matches(e)?$2:"f"}return t=n.getPropertiesDiff(i,r),e._private.styleCxtKey=r,{key:r,diffPropNames:t,empty:0===t.length}},H2.getContextStyle=function(e){var t=e.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[t])return n[t];for(var r={_private:{key:t}},i=0;i<this.length;i++){var o=this[i];if(t[i]===$2)for(var a=0;a<o.properties.length;a++){var s=o.properties[a];r[s.name]=s}}return n[t]=r,r},H2.applyContextStyle=function(e,t,n){for(var r=e.diffPropNames,i={},o=this.types,a=0;a<r.length;a++){var s=r[a],l=t[s],u=n.pstyle(s);if(!l){if(!u)continue;l=u.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(u!==l){if(l.mapped===o.fn&&null!=u&&null!=u.mapping&&u.mapping.value===l.value){var c=u.mapping;if((c.fnValue=l.value(n))===c.prevFnValue)continue}var h=i[s]={prev:u};this.applyParsedProperty(n,l),h.next=n.pstyle(s),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}},H2.updateStyleHints=function(e){var t=e._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,o=function(e,t,r){return n.getPropertiesHash(e,t,r)},a=t.styleKey;if(e.removed())return!1;var s="nodes"===t.group,l=e._private.style;r=Object.keys(l);for(var u=0;u<i.length;u++){var c=i[u];t.styleKeys[c]=[kW,AW]}for(var h=function(e,n){return t.styleKeys[n][0]=NW(e,t.styleKeys[n][0])},d=function(e,n){return t.styleKeys[n][1]=MW(e,t.styleKeys[n][1])},f=function(e,t){h(e,t),d(e,t)},p=function(e,t){for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);h(r,t),d(r,t)}},g=function(e){return-128<e&&e<128&&Math.floor(e)!==e?2e9-(1024*e|0):e},m=0;m<r.length;m++){var v=r[m],y=l[v];if(null!=y){var b=this.properties[v],x=b.type,w=b.groupKey,E=void 0;null!=b.hashOverride?E=b.hashOverride(e,y):null!=y.pfValue&&(E=y.pfValue);var T=null==b.enums?y.value:null,_=null!=E,k=_||null!=T,A=y.units;if(x.number&&k&&!x.multiple)f(g(_?E:T),w),_||null==A||p(A,w);else p(y.strValue,w)}}for(var S=[kW,AW],N=0;N<i.length;N++){var M=i[N],C=t.styleKeys[M];S[0]=NW(C[0],S[0]),S[1]=MW(C[1],S[1])}t.styleKey=function(e,t){return 2097152*e+t}(S[0],S[1]);var I=t.styleKeys;t.labelDimsKey=CW(I.labelDimensions);var R=o(e,["label"],I.labelDimensions);if(t.labelKey=CW(R),t.labelStyleKey=CW(IW(I.commonLabel,R)),!s){var L=o(e,["source-label"],I.labelDimensions);t.sourceLabelKey=CW(L),t.sourceLabelStyleKey=CW(IW(I.commonLabel,L));var O=o(e,["target-label"],I.labelDimensions);t.targetLabelKey=CW(O),t.targetLabelStyleKey=CW(IW(I.commonLabel,O))}if(s){var D=t.styleKeys,P=D.nodeBody,B=D.nodeBorder,F=D.nodeOutline,z=D.backgroundImage,U=D.compound,G=D.pie,V=D.stripe,j=[P,B,F,z,U,G,V].filter(function(e){return null!=e}).reduce(IW,[kW,AW]);t.nodeKey=CW(j),t.hasPie=null!=G&&G[0]!==kW&&G[1]!==AW,t.hasStripe=null!=V&&V[0]!==kW&&V[1]!==AW}return a!==t.styleKey},H2.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null,t.hasStripe=null},H2.applyParsedProperty=function(e,t){var n,r=this,i=t,o=e._private.style,a=r.types,s=r.properties[i.name].type,l=i.bypass,u=o[i.name],c=u&&u.bypass,h=e._private,d="mapping",f=function(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value},p=function(){var t=f(u),n=f(i);r.checkTriggers(e,i.name,t,n)};if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(i=t=this.parse(t.name,"bezier",l)),i.delete)return o[i.name]=void 0,p(),!0;if(i.deleteBypassed)return u?!!u.bypass&&(u.bypassed=void 0,p(),!0):(p(),!0);if(i.deleteBypass)return u?!!u.bypass&&(o[i.name]=u.bypassed,p(),!0):(p(),!0);var g=function(){$W((e.id(),i.name,i.field,i.field,i.field))};switch(i.mapped){case a.mapData:for(var m,v=i.field.split("."),y=h.data,b=0;b<v.length&&y;b++){y=y[v[b]]}if(null==y)return g(),!1;if(!Fq(y))return $W((i.field,e.id())),!1;var x=i.fieldMax-i.fieldMin;if((m=0===x?0:(y-i.fieldMin)/x)<0?m=0:m>1&&(m=1),s.color){var w=i.valueMin[0],E=i.valueMax[0],T=i.valueMin[1],_=i.valueMax[1],k=i.valueMin[2],A=i.valueMax[2],S=null==i.valueMin[3]?1:i.valueMin[3],N=null==i.valueMax[3]?1:i.valueMax[3],M=[Math.round(w+(E-w)*m),Math.round(T+(_-T)*m),Math.round(k+(A-k)*m),Math.round(S+(N-S)*m)];n={bypass:i.bypass,name:i.name,value:M,strValue:"rgb("+M[0]+", "+M[1]+", "+M[2]+")"}}else{if(!s.number)return!1;var C=i.valueMin+(i.valueMax-i.valueMin)*m;n=this.parse(i.name,C,i.bypass,d)}if(!n)return g(),!1;n.mapping=i,i=n;break;case a.data:for(var I=i.field.split("."),R=h.data,L=0;L<I.length&&R;L++){R=R[I[L]]}if(null!=R&&(n=this.parse(i.name,R,i.bypass,d)),!n)return g(),!1;n.mapping=i,i=n;break;case a.fn:var O=i.value,D=null!=i.fnValue?i.fnValue:O(e);if(i.prevFnValue=D,null==D)return $W((i.name,e.id())),!1;if(!(n=this.parse(i.name,D,i.bypass,d)))return $W((i.name,e.id())),!1;n.mapping=YW(i),i=n;break;case void 0:break;default:return!1}return l?(i.bypassed=c?u.bypassed:u,o[i.name]=i):c?u.bypassed=i:o[i.name]=i,p(),!0},H2.cleanElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),t)for(var i=r._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],l=i[s];null!=l&&(l.bypass?l.bypassed=null:i[s]=null)}else r._private.style={}}},H2.update=function(){this._private.cy.mutableElements().updateStyle()},H2.updateTransitions=function(e,t){var n=this,r=e._private,i=e.pstyle("transition-property").value,o=e.pstyle("transition-duration").pfValue,a=e.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},l=!1,u=0;u<i.length;u++){var c=i[u],h=e.pstyle(c),d=t[c];if(d){var f=d.prev,p=null!=d.next?d.next:h,g=!1,m=void 0,v=1e-6;f&&(Fq(f.pfValue)&&Fq(p.pfValue)?(g=p.pfValue-f.pfValue,m=f.pfValue+v*g):Fq(f.value)&&Fq(p.value)?(g=p.value-f.value,m=f.value+v*g):Pq(f.value)&&Pq(p.value)&&(g=f.value[0]!==p.value[0]||f.value[1]!==p.value[1]||f.value[2]!==p.value[2],m=f.strValue),g&&(s[c]=p.strValue,this.applyBypass(e,c,m),l=!0))}}if(!l)return;r.transitioning=!0,new OZ(function(t){a>0?e.delayAnimation(a).play().promise().then(t):t()}).then(function(){return e.animation({style:s,duration:o,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(e,i),e.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),r.transitioning=!1)},H2.checkTrigger=function(e,t,n,r,i,o){var a=this.properties[t],s=i(a);e.removed()||null!=s&&s(n,r,e)&&o(a)},H2.checkZOrderTrigger=function(e,t,n,r){var i=this;this.checkTrigger(e,t,n,r,function(e){return e.triggersZOrder},function(){i._private.cy.notify("zorder",e)})},H2.checkBoundsTrigger=function(e,t,n,r){this.checkTrigger(e,t,n,r,function(e){return e.triggersBounds},function(t){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache()})},H2.checkConnectedEdgesBoundsTrigger=function(e,t,n,r){this.checkTrigger(e,t,n,r,function(e){return e.triggersBoundsOfConnectedEdges},function(t){e.connectedEdges().forEach(function(e){e.dirtyBoundingBoxCache()})})},H2.checkParallelEdgesBoundsTrigger=function(e,t,n,r){this.checkTrigger(e,t,n,r,function(e){return e.triggersBoundsOfParallelEdges},function(t){e.parallelEdges().forEach(function(e){e.dirtyBoundingBoxCache()})})},H2.checkTriggers=function(e,t,n,r){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,n,r),this.checkBoundsTrigger(e,t,n,r),this.checkConnectedEdgesBoundsTrigger(e,t,n,r),this.checkParallelEdgesBoundsTrigger(e,t,n,r)};var Y2={applyBypass:function(e,t,n,r){var i=[];if("*"===t||"**"===t){if(void 0!==n)for(var o=0;o<this.properties.length;o++){var a=this.properties[o].name,s=this.parse(a,n,!0);s&&i.push(s)}}else if(Oq(t)){var l=this.parse(t,n,!0);l&&i.push(l)}else{if(!Bq(t))return!1;var u=t;r=n;for(var c=Object.keys(u),h=0;h<c.length;h++){var d=c[h],f=u[d];if(void 0===f&&(f=u[Xq(d)]),void 0!==f){var p=this.parse(d,f,!0);p&&i.push(p)}}}if(0===i.length)return!1;for(var g=!1,m=0;m<e.length;m++){for(var v=e[m],y={},b=void 0,x=0;x<i.length;x++){var w=i[x];if(r){var E=v.pstyle(w.name);b=y[w.name]={prev:E}}g=this.applyParsedProperty(v,YW(w))||g,r&&(b.next=v.pstyle(w.name))}g&&this.updateStyleHints(v),r&&this.updateTransitions(v,y,true)}return g},overrideBypass:function(e,t,n){t=Wq(t);for(var r=0;r<e.length;r++){var i=e[r],o=i._private.style[t],a=this.properties[t].type,s=a.color,l=a.mutiple,u=o?null!=o.pfValue?o.pfValue:o.value:null;o&&o.bypass?(o.value=n,null!=o.pfValue&&(o.pfValue=n),o.strValue=s?"rgb("+n.join(",")+")":l?n.join(" "):""+n,this.updateStyleHints(i)):this.applyBypass(i,t,n),this.checkTriggers(i,t,u,n)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,n){for(var r=0;r<e.length;r++){for(var i=e[r],o={},a=0;a<t.length;a++){var s=t[a],l=this.properties[s],u=i.pstyle(l.name);if(u&&u.bypass){var c=this.parse(s,"",!0),h=o[l.name]={prev:u};this.applyParsedProperty(i,c),h.next=i.pstyle(l.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,o,true)}}},q2={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy,n=t.container(),r=t.window();if(r&&n&&r.getComputedStyle)return r.getComputedStyle(n).getPropertyValue(e)}},W2={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){var n=this;if(e=e[0]){for(var r={},i=0;i<n.properties.length;i++){var o=n.properties[i],a=n.getStylePropertyValue(e,o.name,t);null!=a&&(r[o.name]=a,r[Xq(o.name)]=a)}return r}},getIndexedStyle:function(e,t,n,r){var i=e.pstyle(t)[n][r];return null!=i?i:e.cy().style().getDefaultProperty(t)[n][0]},getStylePropertyValue:function(e,t,n){if(e=e[0]){var r=this.properties[t];r.alias&&(r=r.pointsTo);var i=r.type,o=e.pstyle(r.name);if(o){var a=o.value,s=o.units,l=o.strValue;if(n&&i.number&&null!=a&&Fq(a)){var u=e.cy().zoom(),c=function(e){return e*u},h=function(e,t){return c(e)+t},d=Pq(a);return(d?s.every(function(e){return null!=e}):null!=s)?d?a.map(function(e,t){return h(e,s[t])}).join(" "):h(a,s):d?a.map(function(e){return Oq(e)?e:""+c(e)}).join(" "):""+c(a)}if(null!=l)return l}return null}},getAnimationStartStyle:function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r].name,o=e.pstyle(i);void 0!==o&&(o=Bq(o)?this.parse(i,o.strValue):this.parse(i,o)),o&&(n[i]=o)}return n},getPropsList:function(e){var t=[],n=e,r=this.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var a=i[o],s=n[a],l=r[a]||r[Wq(a)],u=this.parse(l.name,s);u&&t.push(u)}return t},getNonDefaultPropertiesHash:function(e,t,n){var r,i,o,a,s,l,u=n.slice();for(s=0;s<t.length;s++)if(r=t[s],null!=(i=e.pstyle(r,!1)))if(null!=i.pfValue)u[0]=NW(a,u[0]),u[1]=MW(a,u[1]);else for(o=i.strValue,l=0;l<o.length;l++)a=o.charCodeAt(l),u[0]=NW(a,u[0]),u[1]=MW(a,u[1]);return u}};W2.getPropertiesHash=W2.getNonDefaultPropertiesHash;var X2={appendFromJson:function(e){for(var t=this,n=0;n<e.length;n++){var r=e[n],i=r.selector,o=r.style||r.css,a=Object.keys(o);t.selector(i);for(var s=0;s<a.length;s++){var l=a[s],u=o[l];t.css(l,u)}}return t},fromJson:function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}e.push({selector:r?r.toString():"core",style:o})}return e}},K2={appendFromString:function(e){var t,n,r,i=this,o=""+e;function a(){o=o.length>t.length?o.substr(t.length):""}function s(){n=n.length>r.length?n.substr(r.length):""}for(o=o.replace(/[/][*](\s|.)+?[*][/]/g,"");;){if(o.match(/^\s*$/))break;var l=o.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!l){$W();break}t=l[0];var u=l[1];if("core"!==u)if(new U0(u).invalid){$W(),a();continue}var c=l[2],h=!1;n=c;for(var d=[];;){if(n.match(/^\s*$/))break;var f=n.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!f){$W(),h=!0;break}r=f[0];var p=f[1],g=f[2];if(this.properties[p])i.parse(p,g)?(d.push({name:p,val:g}),s()):($W(),s());else $W(),s()}if(h){a();break}i.selector(u);for(var m=0;m<d.length;m++){var v=d[m];i.css(v.name,v.val)}a()}return i},fromString:function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t}},Z2={};!function(){var e=Jq,t=tW,n=rW,r=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},i=function(r){var i=e+"|\\w+|"+t+"|"+n+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+r+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"},o=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Z2.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:r("data")},layoutData:{mapping:!0,regex:r("layoutData")},scratch:{mapping:!0,regex:r("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return Oq(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(e){var t=e.length;return 1===t||2===t||4===t}}};var a={zeroNonZero:function(e,t){return(null==e||null==t)&&e!==t||(0==e&&0!=t||0!=e&&0==t)},any:function(e,t){return e!=t},emptyNonEmpty:function(e,t){var n=$q(e),r=$q(t);return n&&!r||!n&&r}},s=Z2.types,l=[{name:"label",type:s.text,triggersBounds:a.any,triggersZOrder:a.emptyNonEmpty},{name:"text-rotation",type:s.textRotation,triggersBounds:a.any},{name:"text-margin-x",type:s.bidirectionalSize,triggersBounds:a.any},{name:"text-margin-y",type:s.bidirectionalSize,triggersBounds:a.any}],u=[{name:"source-label",type:s.text,triggersBounds:a.any},{name:"source-text-rotation",type:s.textRotation,triggersBounds:a.any},{name:"source-text-margin-x",type:s.bidirectionalSize,triggersBounds:a.any},{name:"source-text-margin-y",type:s.bidirectionalSize,triggersBounds:a.any},{name:"source-text-offset",type:s.size,triggersBounds:a.any}],c=[{name:"target-label",type:s.text,triggersBounds:a.any},{name:"target-text-rotation",type:s.textRotation,triggersBounds:a.any},{name:"target-text-margin-x",type:s.bidirectionalSize,triggersBounds:a.any},{name:"target-text-margin-y",type:s.bidirectionalSize,triggersBounds:a.any},{name:"target-text-offset",type:s.size,triggersBounds:a.any}],h=[{name:"font-family",type:s.fontFamily,triggersBounds:a.any},{name:"font-style",type:s.fontStyle,triggersBounds:a.any},{name:"font-weight",type:s.fontWeight,triggersBounds:a.any},{name:"font-size",type:s.size,triggersBounds:a.any},{name:"text-transform",type:s.textTransform,triggersBounds:a.any},{name:"text-wrap",type:s.textWrap,triggersBounds:a.any},{name:"text-overflow-wrap",type:s.textOverflowWrap,triggersBounds:a.any},{name:"text-max-width",type:s.size,triggersBounds:a.any},{name:"text-outline-width",type:s.size,triggersBounds:a.any},{name:"line-height",type:s.positiveNumber,triggersBounds:a.any}],d=[{name:"text-valign",type:s.valign,triggersBounds:a.any},{name:"text-halign",type:s.halign,triggersBounds:a.any},{name:"color",type:s.color},{name:"text-outline-color",type:s.color},{name:"text-outline-opacity",type:s.zeroOneNumber},{name:"text-background-color",type:s.color},{name:"text-background-opacity",type:s.zeroOneNumber},{name:"text-background-padding",type:s.size,triggersBounds:a.any},{name:"text-border-opacity",type:s.zeroOneNumber},{name:"text-border-color",type:s.color},{name:"text-border-width",type:s.size,triggersBounds:a.any},{name:"text-border-style",type:s.borderStyle,triggersBounds:a.any},{name:"text-background-shape",type:s.textBackgroundShape,triggersBounds:a.any},{name:"text-justification",type:s.justification},{name:"box-select-labels",type:s.bool,triggersBounds:a.any}],f=[{name:"events",type:s.bool,triggersZOrder:a.any},{name:"text-events",type:s.bool,triggersZOrder:a.any},{name:"box-selection",type:s.boxSelection,triggersZOrder:a.any}],p=[{name:"display",type:s.display,triggersZOrder:a.any,triggersBounds:a.any,triggersBoundsOfConnectedEdges:a.any,triggersBoundsOfParallelEdges:function(e,t,n){return e!==t&&"bezier"===n.pstyle("curve-style").value}},{name:"visibility",type:s.visibility,triggersZOrder:a.any},{name:"opacity",type:s.zeroOneNumber,triggersZOrder:a.zeroNonZero},{name:"text-opacity",type:s.zeroOneNumber},{name:"min-zoomed-font-size",type:s.size},{name:"z-compound-depth",type:s.zCompoundDepth,triggersZOrder:a.any},{name:"z-index-compare",type:s.zIndexCompare,triggersZOrder:a.any},{name:"z-index",type:s.number,triggersZOrder:a.any}],g=[{name:"overlay-padding",type:s.size,triggersBounds:a.any},{name:"overlay-color",type:s.color},{name:"overlay-opacity",type:s.zeroOneNumber,triggersBounds:a.zeroNonZero},{name:"overlay-shape",type:s.overlayShape,triggersBounds:a.any},{name:"overlay-corner-radius",type:s.cornerRadius}],m=[{name:"underlay-padding",type:s.size,triggersBounds:a.any},{name:"underlay-color",type:s.color},{name:"underlay-opacity",type:s.zeroOneNumber,triggersBounds:a.zeroNonZero},{name:"underlay-shape",type:s.overlayShape,triggersBounds:a.any},{name:"underlay-corner-radius",type:s.cornerRadius}],v=[{name:"transition-property",type:s.propList},{name:"transition-duration",type:s.time},{name:"transition-delay",type:s.time},{name:"transition-timing-function",type:s.easing}],y=function(e,t){return"label"===t.value?-e.poolIndex():t.pfValue},b=[{name:"height",type:s.nodeSize,triggersBounds:a.any,hashOverride:y},{name:"width",type:s.nodeSize,triggersBounds:a.any,hashOverride:y},{name:"shape",type:s.nodeShape,triggersBounds:a.any},{name:"shape-polygon-points",type:s.polygonPointList,triggersBounds:a.any},{name:"corner-radius",type:s.cornerRadius},{name:"background-color",type:s.color},{name:"background-fill",type:s.fill},{name:"background-opacity",type:s.zeroOneNumber},{name:"background-blacken",type:s.nOneOneNumber},{name:"background-gradient-stop-colors",type:s.colors},{name:"background-gradient-stop-positions",type:s.percentages},{name:"background-gradient-direction",type:s.gradientDirection},{name:"padding",type:s.sizeMaybePercent,triggersBounds:a.any},{name:"padding-relative-to",type:s.paddingRelativeTo,triggersBounds:a.any},{name:"bounds-expansion",type:s.boundsExpansion,triggersBounds:a.any}],x=[{name:"border-color",type:s.color},{name:"border-opacity",type:s.zeroOneNumber},{name:"border-width",type:s.size,triggersBounds:a.any},{name:"border-style",type:s.borderStyle},{name:"border-cap",type:s.lineCap},{name:"border-join",type:s.lineJoin},{name:"border-dash-pattern",type:s.numbers},{name:"border-dash-offset",type:s.number},{name:"border-position",type:s.linePosition}],w=[{name:"outline-color",type:s.color},{name:"outline-opacity",type:s.zeroOneNumber},{name:"outline-width",type:s.size,triggersBounds:a.any},{name:"outline-style",type:s.borderStyle},{name:"outline-offset",type:s.size,triggersBounds:a.any}],E=[{name:"background-image",type:s.urls},{name:"background-image-crossorigin",type:s.bgCrossOrigin},{name:"background-image-opacity",type:s.zeroOneNumbers},{name:"background-image-containment",type:s.bgContainment},{name:"background-image-smoothing",type:s.bools},{name:"background-position-x",type:s.bgPos},{name:"background-position-y",type:s.bgPos},{name:"background-width-relative-to",type:s.bgRelativeTo},{name:"background-height-relative-to",type:s.bgRelativeTo},{name:"background-repeat",type:s.bgRepeat},{name:"background-fit",type:s.bgFit},{name:"background-clip",type:s.bgClip},{name:"background-width",type:s.bgWH},{name:"background-height",type:s.bgWH},{name:"background-offset-x",type:s.bgPos},{name:"background-offset-y",type:s.bgPos}],T=[{name:"position",type:s.position,triggersBounds:a.any},{name:"compound-sizing-wrt-labels",type:s.compoundIncludeLabels,triggersBounds:a.any},{name:"min-width",type:s.size,triggersBounds:a.any},{name:"min-width-bias-left",type:s.sizeMaybePercent,triggersBounds:a.any},{name:"min-width-bias-right",type:s.sizeMaybePercent,triggersBounds:a.any},{name:"min-height",type:s.size,triggersBounds:a.any},{name:"min-height-bias-top",type:s.sizeMaybePercent,triggersBounds:a.any},{name:"min-height-bias-bottom",type:s.sizeMaybePercent,triggersBounds:a.any}],_=[{name:"line-style",type:s.lineStyle},{name:"line-color",type:s.color},{name:"line-fill",type:s.fill},{name:"line-cap",type:s.lineCap},{name:"line-opacity",type:s.zeroOneNumber},{name:"line-dash-pattern",type:s.numbers},{name:"line-dash-offset",type:s.number},{name:"line-outline-width",type:s.size},{name:"line-outline-color",type:s.color},{name:"line-gradient-stop-colors",type:s.colors},{name:"line-gradient-stop-positions",type:s.percentages},{name:"curve-style",type:s.curveStyle,triggersBounds:a.any,triggersBoundsOfParallelEdges:function(e,t){return e!==t&&("bezier"===e||"bezier"===t)}},{name:"haystack-radius",type:s.zeroOneNumber,triggersBounds:a.any},{name:"source-endpoint",type:s.edgeEndpoint,triggersBounds:a.any},{name:"target-endpoint",type:s.edgeEndpoint,triggersBounds:a.any},{name:"control-point-step-size",type:s.size,triggersBounds:a.any},{name:"control-point-distances",type:s.bidirectionalSizes,triggersBounds:a.any},{name:"control-point-weights",type:s.numbers,triggersBounds:a.any},{name:"segment-distances",type:s.bidirectionalSizes,triggersBounds:a.any},{name:"segment-weights",type:s.numbers,triggersBounds:a.any},{name:"segment-radii",type:s.numbers,triggersBounds:a.any},{name:"radius-type",type:s.radiusType,triggersBounds:a.any},{name:"taxi-turn",type:s.bidirectionalSizeMaybePercent,triggersBounds:a.any},{name:"taxi-turn-min-distance",type:s.size,triggersBounds:a.any},{name:"taxi-direction",type:s.axisDirection,triggersBounds:a.any},{name:"taxi-radius",type:s.number,triggersBounds:a.any},{name:"edge-distances",type:s.edgeDistances,triggersBounds:a.any},{name:"arrow-scale",type:s.positiveNumber,triggersBounds:a.any},{name:"loop-direction",type:s.angle,triggersBounds:a.any},{name:"loop-sweep",type:s.angle,triggersBounds:a.any},{name:"source-distance-from-node",type:s.size,triggersBounds:a.any},{name:"target-distance-from-node",type:s.size,triggersBounds:a.any}],k=[{name:"ghost",type:s.bool,triggersBounds:a.any},{name:"ghost-offset-x",type:s.bidirectionalSize,triggersBounds:a.any},{name:"ghost-offset-y",type:s.bidirectionalSize,triggersBounds:a.any},{name:"ghost-opacity",type:s.zeroOneNumber}],A=[{name:"selection-box-color",type:s.color},{name:"selection-box-opacity",type:s.zeroOneNumber},{name:"selection-box-border-color",type:s.color},{name:"selection-box-border-width",type:s.size},{name:"active-bg-color",type:s.color},{name:"active-bg-opacity",type:s.zeroOneNumber},{name:"active-bg-size",type:s.size},{name:"outside-texture-bg-color",type:s.color},{name:"outside-texture-bg-opacity",type:s.zeroOneNumber}],S=[];Z2.pieBackgroundN=16,S.push({name:"pie-size",type:s.sizeMaybePercent}),S.push({name:"pie-hole",type:s.sizeMaybePercent}),S.push({name:"pie-start-angle",type:s.angle});for(var N=1;N<=Z2.pieBackgroundN;N++)S.push({name:"pie-"+N+"-background-color",type:s.color}),S.push({name:"pie-"+N+"-background-size",type:s.percent}),S.push({name:"pie-"+N+"-background-opacity",type:s.zeroOneNumber});var M=[];Z2.stripeBackgroundN=16,M.push({name:"stripe-size",type:s.sizeMaybePercent}),M.push({name:"stripe-direction",type:s.axisDirectionPrimary});for(var C=1;C<=Z2.stripeBackgroundN;C++)M.push({name:"stripe-"+C+"-background-color",type:s.color}),M.push({name:"stripe-"+C+"-background-size",type:s.percent}),M.push({name:"stripe-"+C+"-background-opacity",type:s.zeroOneNumber});var I=[],R=Z2.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:s.arrowShape,triggersBounds:a.any},{name:"arrow-color",type:s.color},{name:"arrow-fill",type:s.arrowFill},{name:"arrow-width",type:s.arrowWidth}].forEach(function(e){R.forEach(function(t){var n=t+"-"+e.name,r=e.type,i=e.triggersBounds;I.push({name:n,type:r,triggersBounds:i})})},{});var L=Z2.properties=[].concat(f,v,p,g,m,k,d,h,l,u,c,b,x,w,E,S,M,T,_,I,A),O=Z2.propertyGroups={behavior:f,transition:v,visibility:p,overlay:g,underlay:m,ghost:k,commonLabel:d,labelDimensions:h,mainLabel:l,sourceLabel:u,targetLabel:c,nodeBody:b,nodeBorder:x,nodeOutline:w,backgroundImage:E,pie:S,stripe:M,compound:T,edgeLine:_,edgeArrow:I,core:A},D=Z2.propertyGroupNames={};(Z2.propertyGroupKeys=Object.keys(O)).forEach(function(e){D[e]=O[e].map(function(e){return e.name}),O[e].forEach(function(t){return t.groupKey=e})});var P=Z2.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Z2.propertyNames=L.map(function(e){return e.name});for(var B=0;B<L.length;B++){var F=L[B];L[F.name]=F}for(var z=0;z<P.length;z++){var U=P[z],G=L[U.pointsTo],V={name:U.name,alias:!0,pointsTo:G};L.push(V),L[U.name]=V}}(),Z2.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},Z2.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=oW({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var n=1;n<=Z2.pieBackgroundN;n++){var r=t.name.replace("{{i}}",n),i=t.value;e[r]=i}return e},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var n=1;n<=Z2.stripeBackgroundN;n++){var r=t.name.replace("{{i}}",n),i=t.value;e[r]=i}return e},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(e,t){return Z2.arrowPrefixes.forEach(function(n){var r=n+"-"+t.name,i=t.value;e[r]=i}),e},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var o=i.name,a=t[o],s=this.parse(o,a);n[o]=s}}return e.defaultProperties=n,e.defaultProperties},Z2.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Q2={parse:function(e,t,n,r){var i=this;if(Dq(t))return i.parseImplWarn(e,t,n,r);var o,a=OW(e,""+t,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),s=i.propCache=i.propCache||[];return(o=s[a])||(o=s[a]=i.parseImplWarn(e,t,n,r)),(n||"mapping"===r)&&(o=YW(o))&&(o.value=YW(o.value)),o},parseImplWarn:function(e,t,n,r){var i=this.parseImpl(e,t,n,r);return i||null==t||$W("The style property `".concat(e,": ").concat(t,"` is invalid")),!i||"width"!==i.name&&"height"!==i.name||"label"!==t||$W(i.name),i}};Q2.parseImpl=function(e,t,n,r){var i=this;e=Wq(e);var o=i.properties[e],a=t,s=i.types;if(!o)return null;if(void 0===t)return null;o.alias&&(o=o.pointsTo,e=o.name);var l=Oq(t);l&&(t=t.trim());var u,c,h=o.type;if(!h)return null;if(n&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(Dq(t))return{name:e,value:t,strValue:"fn",mapped:s.fn,bypass:n};if(!l||r||t.length<7||"a"!==t[1]);else{if(t.length>=7&&"d"===t[0]&&(u=new RegExp(s.data.regex).exec(t))){if(n)return!1;var d=s.data;return{name:e,value:u,strValue:""+t,mapped:d,field:u[1],bypass:n}}if(t.length>=10&&"m"===t[0]&&(c=new RegExp(s.mapData.regex).exec(t))){if(n)return!1;if(h.multiple)return!1;var f=s.mapData;if(!h.color&&!h.number)return!1;var p=this.parse(e,c[4]);if(!p||p.mapped)return!1;var g=this.parse(e,c[5]);if(!g||g.mapped)return!1;if(p.pfValue===g.pfValue||p.strValue===g.strValue)return $W(p.strValue),this.parse(e,p.strValue);if(h.color){var m=p.value,v=g.value;if(!(m[0]!==v[0]||m[1]!==v[1]||m[2]!==v[2]||m[3]!==v[3]&&(null!=m[3]&&1!==m[3]||null!=v[3]&&1!==v[3])))return!1}return{name:e,value:c,strValue:""+t,mapped:f,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:p.value,valueMax:g.value,bypass:n}}}if(h.multiple&&"multiple"!==r){var y;if(y=l?t.split(/\s+/):Pq(t)?t:[t],h.evenMultiple&&y.length%2!=0)return null;for(var b=[],x=[],w=[],E="",T=!1,_=0;_<y.length;_++){var k=i.parse(e,y[_],n,"multiple");T=T||Oq(k.value),b.push(k.value),w.push(null!=k.pfValue?k.pfValue:k.value),x.push(k.units),E+=(_>0?" ":"")+k.strValue}return h.validate&&!h.validate(b,x)?null:h.singleEnum&&T?1===b.length&&Oq(b[0])?{name:e,value:b[0],strValue:b[0],bypass:n}:null:{name:e,value:b,pfValue:w,strValue:E,bypass:n,units:x}}var A,S,N=function(){for(var r=0;r<h.enums.length;r++){if(h.enums[r]===t)return{name:e,value:t,strValue:""+t,bypass:n}}return null};if(h.number){var M,C="px";if(h.units&&(M=h.units),h.implicitUnits&&(C=h.implicitUnits),!h.unitless)if(l){var I="px|em"+(h.allowPercent?"|\\%":"");M&&(I=M);var R=t.match("^("+Jq+")("+I+")?$");R&&(t=R[1],M=R[2]||C)}else M&&!h.implicitUnits||(M=C);if(t=parseFloat(t),isNaN(t)&&void 0===h.enums)return null;if(isNaN(t)&&void 0!==h.enums)return t=a,N();if(h.integer&&(!Fq(S=t)||Math.floor(S)!==S))return null;if(void 0!==h.min&&(t<h.min||h.strictMin&&t===h.min)||void 0!==h.max&&(t>h.max||h.strictMax&&t===h.max))return null;var L={name:e,value:t,strValue:""+t+(M||""),units:M,bypass:n};return h.unitless||"px"!==M&&"em"!==M?L.pfValue=t:L.pfValue="px"!==M&&M?this.getEmSizeInPixels()*t:t,"ms"!==M&&"s"!==M||(L.pfValue="ms"===M?t:1e3*t),"deg"!==M&&"rad"!==M||(L.pfValue="rad"===M?t:(A=t,Math.PI*A/180)),"%"===M&&(L.pfValue=t/100),L}if(h.propList){var O=[],D=""+t;if("none"===D);else{for(var P=D.split(/\s*,\s*|\s+/),B=0;B<P.length;B++){var F=P[B].trim();i.properties[F]?O.push(F):$W()}if(0===O.length)return null}return{name:e,value:O,strValue:0===O.length?"none":O.join(" "),bypass:n}}if(h.color){var z=aW(t);return z?{name:e,value:z,pfValue:z,strValue:"rgb("+z[0]+","+z[1]+","+z[2]+")",bypass:n}:null}if(h.regex||h.regexes){if(h.enums){var U=N();if(U)return U}for(var G=h.regexes?h.regexes:[h.regex],V=0;V<G.length;V++){var j=new RegExp(G[V]).exec(t);if(j)return{name:e,value:h.singleRegexMatchValue?j[1]:j,strValue:""+t,bypass:n}}return null}return h.string?{name:e,value:""+t,strValue:""+t,bypass:n}:h.enums?N():null};var J2=function(e){if(!(this instanceof J2))return new J2(e);jq(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):jW("A style must have a core reference")},e4=J2.prototype;e4.instanceString=function(){return"style"},e4.clear=function(){for(var e=this._private,t=e.cy.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0),t.forEach(function(e){var t=e[0]._private;t.styleDirty=!0,t.appliedInitStyle=!1}),this},e4.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},e4.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},e4.selector=function(e){var t="core"===e?null:new U0(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this},e4.css=function(){var e=arguments;if(1===e.length)for(var t=e[0],n=0;n<this.properties.length;n++){var r=this.properties[n],i=t[r.name];void 0===i&&(i=t[Xq(r.name)]),void 0!==i&&this.cssRule(r.name,i)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},e4.style=e4.css,e4.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.name.match(/stripe-(\d+)-background-size/)&&n.value&&(this._private.hasStripe=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},e4.append=function(e){return Hq(e)?e.appendToStyle(this):Pq(e)?this.appendFromJson(e):Oq(e)&&this.appendFromString(e),this},J2.fromJson=function(e,t){var n=new J2(e);return n.fromJson(t),n},J2.fromString=function(e,t){return new J2(e).fromString(t)},[H2,Y2,q2,W2,X2,K2,Z2,Q2].forEach(function(e){oW(e4,e)}),J2.types=e4.types,J2.properties=e4.properties,J2.propertyGroups=e4.propertyGroups,J2.propertyGroupNames=e4.propertyGroupNames,J2.propertyGroupKeys=e4.propertyGroupKeys;var t4={style:function(e){e&&this.setStyle(e).update();return this._private.style},setStyle:function(e){var t=this._private;return Hq(e)?t.style=e.generateStyle(this):Pq(e)?t.style=J2.fromJson(this,e):Oq(e)?t.style=J2.fromString(this,e):t.style=J2(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},n4={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var t=this._private;return null==t.selectionType&&(t.selectionType="single"),void 0===e?t.selectionType:("additive"!==e&&"single"!==e||(t.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var e,t,n,r,i,o=arguments,a=this._private.pan;switch(o.length){case 0:return a;case 1:if(Oq(o[0]))return a[e=o[0]];if(Bq(o[0])){if(!this._private.panningEnabled)return this;r=(n=o[0]).x,i=n.y,Fq(r)&&(a.x=r),Fq(i)&&(a.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=o[1],"x"!==(e=o[0])&&"y"!==e||!Fq(t)||(a[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,t){var n,r,i,o,a,s=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:Bq(e)&&(o=(i=s[0]).x,a=i.y,Fq(o)&&(l.x+=o),Fq(a)&&(l.y+=a),this.emit("pan viewport"));break;case 2:r=t,"x"!==(n=e)&&"y"!==n||!Fq(r)||(l[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(Fq(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n,r;if(Oq(e)){var i=e;e=this.$(i)}else if(Bq(r=e)&&Fq(r.x1)&&Fq(r.x2)&&Fq(r.y1)&&Fq(r.y2)){var o=e;(n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1}else Uq(e)||(e=this.mutableElements());if(!Uq(e)||!e.empty()){n=n||e.boundingBox();var a,s=this.width(),l=this.height();if(t=Fq(t)?t:0,!isNaN(s)&&!isNaN(l)&&s>0&&l>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:a=(a=(a=Math.min((s-2*t)/n.w,(l-2*t)/n.h))>this._private.maxZoom?this._private.maxZoom:a)<this._private.minZoom?this._private.minZoom:a,pan:{x:(s-a*(n.x1+n.x2))/2,y:(l-a*(n.y1+n.y2))/2}}}}},zoomRange:function(e,t){var n=this._private;if(null==t){var r=e;e=r.min,t=r.max}return Fq(e)&&Fq(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):Fq(e)&&void 0===t&&e<=n.maxZoom?n.minZoom=e:Fq(t)&&void 0===e&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t,n,r=this._private,i=r.pan,o=r.zoom,a=!1;if(r.zoomingEnabled||(a=!0),Fq(e)?n=e:Bq(e)&&(n=e.level,null!=e.position?t=NX(e.position,o,i):null!=e.renderedPosition&&(t=e.renderedPosition),null==t||r.panningEnabled||(a=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,a||!Fq(n)||n===o||null!=t&&(!Fq(t.x)||!Fq(t.y)))return null;if(null!=t){var s=i,l=o,u=n;return{zoomed:!0,panned:!0,zoom:u,pan:{x:-u/l*(t.x-s.x)+t.x,y:-u/l*(t.y-s.y)+t.y}}}return{zoomed:!0,panned:!1,zoom:n,pan:i}},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return null!=t&&t.zoomed?(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(e){var t=this._private,n=!0,r=!0,i=[],o=!1,a=!1;if(!e)return this;if(Fq(e.zoom)||(n=!1),Bq(e.pan)||(r=!1),!n&&!r)return this;if(n){var s=e.zoom;s<t.minZoom||s>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=s,i.push("zoom"))}if(r&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;Fq(l.x)&&(t.pan.x=l.x,a=!1),Fq(l.y)&&(t.pan.y=l.y,a=!1),a||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(Oq(e)){var n=e;e=this.mutableElements().filter(n)}else Uq(e)||(e=this.mutableElements());if(0!==e.length){var r=e.boundingBox(),i=this.width(),o=this.height();return{x:(i-(t=void 0===t?this._private.zoom:t)*(r.x1+r.x2))/2,y:(o-t*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e,t,n=this._private,r=n.container,i=this;return n.sizeCache=n.sizeCache||(r?(e=i.window().getComputedStyle(r),t=function(t){return parseFloat(e.getPropertyValue(t))},{width:r.clientWidth-t("padding-left")-t("padding-right"),height:r.clientHeight-t("padding-top")-t("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){return e?(this._private.multiClickDebounceTime=e,this):this._private.multiClickDebounceTime}};n4.centre=n4.center,n4.autolockNodes=n4.autolock,n4.autoungrabifyNodes=n4.autoungrabify;var r4={data:r0.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:r0.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:r0.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:r0.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};r4.attr=r4.data,r4.removeAttr=r4.removeData;var i4=function(e){var t=this,n=(e=oW({},e)).container;n&&!zq(n)&&zq(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{})&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=t;var o=void 0!==JY&&void 0!==n&&!e.headless,a=e;a.layout=oW({name:o?"grid":"null"},a.layout),a.renderer=oW({name:o?"canvas":"null"},a.renderer);var s=function(e,t,n){return void 0!==t?t:void 0!==n?n:e},l=this._private={container:n,ready:!1,options:a,elements:new x2(this),listeners:[],aniEles:new x2(this),data:a.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:s(!0,a.zoomingEnabled),userZoomingEnabled:s(!0,a.userZoomingEnabled),panningEnabled:s(!0,a.panningEnabled),userPanningEnabled:s(!0,a.userPanningEnabled),boxSelectionEnabled:s(!0,a.boxSelectionEnabled),autolock:s(!1,a.autolock,a.autolockNodes),autoungrabify:s(!1,a.autoungrabify,a.autoungrabifyNodes),autounselectify:s(!1,a.autounselectify),styleEnabled:void 0===a.styleEnabled?o:a.styleEnabled,zoom:Fq(a.zoom)?a.zoom:1,pan:{x:Bq(a.pan)&&Fq(a.pan.x)?a.pan.x:0,y:Bq(a.pan)&&Fq(a.pan.y)?a.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:s(250,a.multiClickDebounceTime)};this.createEmitter(),this.selectionType(a.selectionType),this.zoomRange({min:a.minZoom,max:a.maxZoom});l.styleEnabled&&t.setStyle([]);var u=oW({},a,a.renderer);t.initRenderer(u);!function(e,t){if(e.some(Yq))return OZ.all(e).then(t);t(e)}([a.style,a.elements],function(e){var n=e[0],o=e[1];l.styleEnabled&&t.style().append(n),function(e,n,r){t.notifications(!1);var i=t.mutableElements();i.length>0&&i.remove(),null!=e&&(Bq(e)||Pq(e))&&t.add(e),t.one("layoutready",function(e){t.notifications(!0),t.emit(e),t.one("load",n),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",r),t.emit("done")});var o=oW({},t._private.options.layout);o.eles=t.elements(),t.layout(o).run()}(o,function(){t.startAnimationLoop(),l.ready=!0,Dq(a.ready)&&t.on("ready",a.ready);for(var e=0;e<i.length;e++){var n=i[e];t.on("ready",n)}r&&(r.readies=[]),t.emit("ready")},a.done)})},o4=i4.prototype;oW(o4,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){if(null==this._private.container)return JY;var e=this._private.container.ownerDocument;return void 0===e||null==e?JY:e.defaultView||JY},mount:function(e){if(null!=e){var t=this,n=t._private,r=n.options;return!zq(e)&&zq(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(oW({},r,r.renderer,{name:"null"===r.renderer.name?"canvas":r.renderer.name})),t.startAnimationLoop(),t.style(r.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return YW(this._private.options)},json:function(e){var t=this,n=t._private,r=t.mutableElements();if(Bq(e)){if(t.startBatch(),e.elements){var i={},o=function(e,n){for(var r=[],o=[],a=0;a<e.length;a++){var s=e[a];if(s.data.id){var l=""+s.data.id,u=t.getElementById(l);i[l]=!0,0!==u.length?o.push({ele:u,json:s}):n?(s.group=n,r.push(s)):r.push(s)}else $W()}t.add(r);for(var c=0;c<o.length;c++){var h=o[c],d=h.ele,f=h.json;d.json(f)}};if(Pq(e.elements))o(e.elements);else for(var a=["nodes","edges"],s=0;s<a.length;s++){var l=a[s],u=e.elements[l];Pq(u)&&o(u,l)}var c=t.collection();r.filter(function(e){return!i[e.id()]}).forEach(function(e){e.isParent()?c.merge(e):e.remove()}),c.forEach(function(e){return e.children().move({parent:null})}),c.forEach(function(e){return function(e){return t.getElementById(e.id())}(e).remove()})}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x===n.pan.x&&e.pan.y===n.pan.y||t.pan(e.pan)),e.data&&t.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],d=0;d<h.length;d++){var f=h[d];null!=e[f]&&t[f](e[f])}return t.endBatch(),this}var p={};!!e?p.elements=this.elements().map(function(e){return e.json()}):(p.elements={},r.forEach(function(e){var t=e.group();p.elements[t]||(p.elements[t]=[]),p.elements[t].push(e.json())})),this._private.styleEnabled&&(p.style=t.style().json()),p.data=YW(t.data());var g=n.options;return p.zoomingEnabled=n.zoomingEnabled,p.userZoomingEnabled=n.userZoomingEnabled,p.zoom=n.zoom,p.minZoom=n.minZoom,p.maxZoom=n.maxZoom,p.panningEnabled=n.panningEnabled,p.userPanningEnabled=n.userPanningEnabled,p.pan=YW(n.pan),p.boxSelectionEnabled=n.boxSelectionEnabled,p.renderer=YW(g.renderer),p.hideEdgesOnViewport=g.hideEdgesOnViewport,p.textureOnViewport=g.textureOnViewport,p.wheelSensitivity=g.wheelSensitivity,p.motionBlur=g.motionBlur,p.multiClickDebounceTime=g.multiClickDebounceTime,p}}),o4.$id=o4.getElementById,[E2,O2,B2,F2,z2,U2,V2,j2,t4,n4,r4].forEach(function(e){oW(o4,e)});var a4={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},s4={maximal:!1,acyclic:!1},l4=function(e){return e.scratch("breadthfirst")},u4=function(e,t){return e.scratch("breadthfirst",t)};function c4(e){this.options=oW({},a4,s4,e)}c4.prototype.run=function(){var e,t=this.options,n=t.cy,r=t.eles,i=r.nodes().filter(function(e){return e.isChildless()}),o=r,a=t.directed,s=t.acyclic||t.maximal||t.maximalAdjustments>0,l=!!t.boundingBox,u=UX(l?t.boundingBox:structuredClone(n.extent()));if(Uq(t.roots))e=t.roots;else if(Pq(t.roots)){for(var c=[],h=0;h<t.roots.length;h++){var d=t.roots[h],f=n.getElementById(d);c.push(f)}e=n.collection(c)}else if(Oq(t.roots))e=n.$(t.roots);else if(a)e=i.roots();else{var p=r.components();e=n.collection();for(var g=function(){var t=p[m],n=t.maxDegree(!1),r=t.filter(function(e){return e.degree(!1)===n});e=e.add(r)},m=0;m<p.length;m++)g()}var v=[],y={},b=function(e,t){null==v[t]&&(v[t]=[]);var n=v[t].length;v[t].push(e),u4(e,{index:n,depth:t})};o.bfs({roots:e,directed:t.directed,visit:function(e,t,n,r,i){var o=e[0],a=o.id();o.isChildless()&&b(o,i),y[a]=!0}});for(var x=[],w=0;w<i.length;w++){var E=i[w];y[E.id()]||x.push(E)}var T=function(e){for(var t=v[e],n=0;n<t.length;n++){var r=t[n];null!=r?u4(r,{depth:e,index:n}):(t.splice(n,1),n--)}},_=function(e,n){for(var i=l4(e),o=e.incomers().filter(function(e){return e.isNode()&&r.has(e)}),a=-1,s=e.id(),l=0;l<o.length;l++){var u=o[l],c=l4(u);a=Math.max(a,c.depth)}if(i.depth<=a){if(!t.acyclic&&n[s])return null;var h=a+1;return function(e,t){var n=l4(e),r=n.depth,i=n.index;v[r][i]=null,e.isChildless()&&b(e,t)}(e,h),n[s]=h,!0}return!1};if(a&&s){var k=[],A={},S=function(e){return k.push(e)},N=function(){return k.shift()};for(i.forEach(function(e){return k.push(e)});k.length>0;){var M=N(),C=_(M,A);if(C)M.outgoers().filter(function(e){return e.isNode()&&r.has(e)}).forEach(S);else if(null===C){$W(M.id());break}}}var I=0;if(t.avoidOverlap)for(var R=0;R<i.length;R++){var L=i[R].layoutDimensions(t),O=L.w,D=L.h;I=Math.max(I,O,D)}var P={},B=function(e){if(P[e.id()])return P[e.id()];for(var t=l4(e).depth,n=e.neighborhood(),r=0,o=0,a=0;a<n.length;a++){var s=n[a];if(!s.isEdge()&&!s.isParent()&&i.has(s)){var l=l4(s);if(null!=l){var u=l.index,c=l.depth;if(null!=u&&null!=c){var h=v[c].length;c<t&&(r+=u/h,o++)}}}}return r/=o=Math.max(1,o),0===o&&(r=0),P[e.id()]=r,r},F=function(e,t){var n=B(e)-B(t);return 0===n?iW(e.id(),t.id()):n};void 0!==t.depthSort&&(F=t.depthSort);for(var z=v.length,U=0;U<z;U++)v[U].sort(F),T(U);for(var G=[],V=0;V<x.length;V++)G.push(x[V]);G.length&&(v.unshift(G),z=v.length,function(){for(var e=0;e<z;e++)T(e)}());for(var j=0,H=0;H<z;H++)j=Math.max(v[H].length,j);var $=u.x1+u.w/2,Y=u.y1+u.h/2,q=i.reduce(function(e,n){return r=n.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}),{w:-1===e.w?r.w:(e.w+r.w)/2,h:-1===e.h?r.h:(e.h+r.h)/2};var r},{w:-1,h:-1}),W=Math.max(1===z?0:l?(u.h-2*t.padding-q.h)/(z-1):(u.h-2*t.padding-q.h)/(z+1),I),X=v.reduce(function(e,t){return Math.max(e,t.length)},0),K={downward:0,leftward:90,upward:180,rightward:-90};-1===Object.keys(K).indexOf(t.direction)&&jW("Invalid direction '".concat(t.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(K).join(", ")));return r.nodes().layoutPositions(this,t,function(e){return PW(function(e){var n=l4(e),r=n.depth,i=n.index;if(t.circle){var o=Math.min(u.w/2/z,u.h/2/z),a=(o=Math.max(o,I))*r+o-(z>0&&v[0].length<=3?o/2:0),s=2*Math.PI/v[r].length*i;return 0===r&&1===v[0].length&&(a=1),{x:$+a*Math.cos(s),y:Y+a*Math.sin(s)}}var c=v[r].length,h=Math.max(1===c?0:l?(u.w-2*t.padding-q.w)/((t.grid?X:c)-1):(u.w-2*t.padding-q.w)/((t.grid?X:c)+1),I);return{x:$+(i+1-(c+1)/2)*h,y:Y+(r+1-(z+1)/2)*W}}(e),u,K[t.direction])}),this};var h4={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function d4(e){this.options=oW({},h4,e)}d4.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,o=r.nodes().not(":parent");t.sort&&(o=o.sort(t.sort));for(var a,s=UX(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l=s.x1+s.w/2,u=s.y1+s.h/2,c=(void 0===t.sweep?2*Math.PI-2*Math.PI/o.length:t.sweep)/Math.max(1,o.length-1),h=0,d=0;d<o.length;d++){var f=o[d].layoutDimensions(t),p=f.w,g=f.h;h=Math.max(h,p,g)}if(a=Fq(t.radius)?t.radius:o.length<=1?0:Math.min(s.h,s.w)/2-h,o.length>1&&t.avoidOverlap){h*=1.75;var m=Math.cos(c)-Math.cos(0),v=Math.sin(c)-Math.sin(0),y=Math.sqrt(h*h/(m*m+v*v));a=Math.max(y,a)}return r.nodes().layoutPositions(this,t,function(e,n){var r=t.startAngle+n*c*(i?1:-1),o=a*Math.cos(r),s=a*Math.sin(r);return{x:l+o,y:u+s}}),this};var f4,p4={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function g4(e){this.options=oW({},p4,e)}g4.prototype.run=function(){for(var e=this.options,t=e,n=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,r=e.cy,i=t.eles,o=i.nodes().not(":parent"),a=UX(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s=a.x1+a.w/2,l=a.y1+a.h/2,u=[],c=0,h=0;h<o.length;h++){var d,f=o[h];d=t.concentric(f),u.push({value:d,node:f}),f._private.scratch.concentric=d}o.updateStyle();for(var p=0;p<o.length;p++){var g=o[p].layoutDimensions(t);c=Math.max(c,g.w,g.h)}u.sort(function(e,t){return t.value-e.value});for(var m=t.levelWidth(o),v=[[]],y=v[0],b=0;b<u.length;b++){var x=u[b];if(y.length>0)Math.abs(y[0].value-x.value)>=m&&(y=[],v.push(y));y.push(x)}var w=c+t.minNodeSpacing;if(!t.avoidOverlap){var E=v.length>0&&v[0].length>1,T=(Math.min(a.w,a.h)/2-w)/(v.length+E?1:0);w=Math.min(w,T)}for(var _=0,k=0;k<v.length;k++){var A=v[k],S=void 0===t.sweep?2*Math.PI-2*Math.PI/A.length:t.sweep,N=A.dTheta=S/Math.max(1,A.length-1);if(A.length>1&&t.avoidOverlap){var M=Math.cos(N)-Math.cos(0),C=Math.sin(N)-Math.sin(0),I=Math.sqrt(w*w/(M*M+C*C));_=Math.max(I,_)}A.r=_,_+=w}if(t.equidistant){for(var R=0,L=0,O=0;O<v.length;O++){var D=v[O].r-L;R=Math.max(R,D)}L=0;for(var P=0;P<v.length;P++){var B=v[P];0===P&&(L=B.r),B.r=L,L+=R}}for(var F={},z=0;z<v.length;z++)for(var U=v[z],G=U.dTheta,V=U.r,j=0;j<U.length;j++){var H=U[j],$=t.startAngle+(n?1:-1)*G*j,Y={x:s+V*Math.cos($),y:l+V*Math.sin($)};F[H.node.id()]=Y}return i.nodes().layoutPositions(this,t,function(e){var t=e.id();return F[t]}),this};var m4={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function v4(e){this.options=oW({},m4,e),this.options.layout=this;var t=this.options.eles.nodes(),n=this.options.eles.edges().filter(function(e){var n=e.source().data("id"),r=e.target().data("id"),i=t.some(function(e){return e.data("id")===n}),o=t.some(function(e){return e.data("id")===r});return!i||!o});this.options.eles=this.options.eles.not(n)}v4.prototype.run=function(){var e=this.options,t=e.cy,n=this;n.stopped=!1,!0!==e.animate&&!1!==e.animate||n.emit({type:"layoutstart",layout:n}),f4=!0===e.debug;var r=y4(t,n,e);f4&&undefined(r),e.randomize&&w4(r);var i=_W(),o=function(){T4(r,t,e),!0===e.fit&&t.fit(e.padding)},a=function(t){return!(n.stopped||t>=e.numIter)&&(_4(r,e),r.temperature=r.temperature*e.coolingFactor,!(r.temperature<e.minTemp))},s=function(){if(!0===e.animate||!1===e.animate)o(),n.one("layoutstop",e.stop),n.emit({type:"layoutstop",layout:n});else{var t=e.eles.nodes(),i=E4(r,e,t);t.layoutPositions(n,e,i)}},l=0,u=!0;if(!0===e.animate){var c=function(){for(var t=0;u&&t<e.refresh;)u=a(l),l++,t++;u?(_W()-i>=e.animationThreshold&&o(),TW(c)):(P4(r,e),s())};c()}else{for(;u;)u=a(l),l++;P4(r,e),s()}return this},v4.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},v4.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var y4=function(e,t,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o=UX(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},s=n.eles.components(),l={},u=0;u<s.length;u++)for(var c=s[u],h=0;h<c.length;h++){l[c[h].id()]=u}for(u=0;u<a.nodeSize;u++){var d=(v=i[u]).layoutDimensions(n);(L={}).isLocked=v.locked(),L.id=v.data("id"),L.parentId=v.data("parent"),L.cmptId=l[v.id()],L.children=[],L.positionX=v.position("x"),L.positionY=v.position("y"),L.offsetX=0,L.offsetY=0,L.height=d.w,L.width=d.h,L.maxX=L.positionX+L.width/2,L.minX=L.positionX-L.width/2,L.maxY=L.positionY+L.height/2,L.minY=L.positionY-L.height/2,L.padLeft=parseFloat(v.style("padding")),L.padRight=parseFloat(v.style("padding")),L.padTop=parseFloat(v.style("padding")),L.padBottom=parseFloat(v.style("padding")),L.nodeRepulsion=Dq(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,a.layoutNodes.push(L),a.idToIndex[L.id]=u}var f=[],p=0,g=-1,m=[];for(u=0;u<a.nodeSize;u++){var v,y=(v=a.layoutNodes[u]).parentId;null!=y?a.layoutNodes[a.idToIndex[y]].children.push(v.id):(f[++g]=v.id,m.push(v.id))}for(a.graphSet.push(m);p<=g;){var b=f[p++],x=a.idToIndex[b],w=a.layoutNodes[x].children;if(w.length>0){a.graphSet.push(w);for(u=0;u<w.length;u++)f[++g]=w[u]}}for(u=0;u<a.graphSet.length;u++){var E=a.graphSet[u];for(h=0;h<E.length;h++){var T=a.idToIndex[E[h]];a.indexToGraph[T]=u}}for(u=0;u<a.edgeSize;u++){var _=r[u],k={};k.id=_.data("id"),k.sourceId=_.data("source"),k.targetId=_.data("target");var A=Dq(n.idealEdgeLength)?n.idealEdgeLength(_):n.idealEdgeLength,S=Dq(n.edgeElasticity)?n.edgeElasticity(_):n.edgeElasticity,N=a.idToIndex[k.sourceId],M=a.idToIndex[k.targetId];if(a.indexToGraph[N]!=a.indexToGraph[M]){for(var C=b4(k.sourceId,k.targetId,a),I=a.graphSet[C],R=0,L=a.layoutNodes[N];-1===I.indexOf(L.id);)L=a.layoutNodes[a.idToIndex[L.parentId]],R++;for(L=a.layoutNodes[M];-1===I.indexOf(L.id);)L=a.layoutNodes[a.idToIndex[L.parentId]],R++;A*=R*n.nestingFactor}k.idealLength=A,k.elasticity=S,a.layoutEdges.push(k)}return a},b4=function(e,t,n){var r=x4(e,t,0,n);return 2>r.count?0:r.graph},x4=function(e,t,n,r){var i=r.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var o=0,a=0;a<i.length;a++){var s=i[a],l=r.idToIndex[s],u=r.layoutNodes[l].children;if(0!==u.length){var c=r.indexToGraph[r.idToIndex[u[0]]],h=x4(e,t,c,r);if(0!==h.count){if(1!==h.count)return h;if(2===++o)break}}}return{count:o,graph:n}},w4=function(e,t){for(var n=e.clientWidth,r=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},E4=function(e,t,n){var r=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(t){var n=e.layoutNodes[e.idToIndex[t.data("id")]];i.x1=Math.min(i.x1,n.positionX),i.x2=Math.max(i.x2,n.positionX),i.y1=Math.min(i.y1,n.positionY),i.y2=Math.max(i.y2,n.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(n,o){var a=e.layoutNodes[e.idToIndex[n.data("id")]];if(t.boundingBox){var s=0===i.w?.5:(a.positionX-i.x1)/i.w,l=0===i.h?.5:(a.positionY-i.y1)/i.h;return{x:r.x1+s*r.w,y:r.y1+l*r.h}}return{x:a.positionX,y:a.positionY}}},T4=function(e,t,n){var r=n.layout,i=n.eles.nodes(),o=E4(e,n,i);i.positions(o),!0!==e.ready&&(e.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},_4=function(e,t,n){k4(e,t),C4(e),I4(e,t),R4(e),L4(e)},k4=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],i=r.length,o=0;o<i;o++)for(var a=e.layoutNodes[e.idToIndex[r[o]]],s=o+1;s<i;s++){var l=e.layoutNodes[e.idToIndex[r[s]]];S4(a,l,e,t)}},A4=function(e){return 2*e*Math.random()-1},S4=function(e,t,n,r){if(e.cmptId===t.cmptId||n.isCompound){var i=t.positionX-e.positionX,o=t.positionY-e.positionY;0===i&&0===o&&(i=A4(1),o=A4(1));var a=N4(e,t,i,o);if(a>0)var s=(u=r.nodeOverlap*a)*i/(g=Math.sqrt(i*i+o*o)),l=u*o/g;else{var u,c=M4(e,i,o),h=M4(t,-1*i,-1*o),d=h.x-c.x,f=h.y-c.y,p=d*d+f*f,g=Math.sqrt(p);s=(u=(e.nodeRepulsion+t.nodeRepulsion)/p)*d/g,l=u*f/g}e.isLocked||(e.offsetX-=s,e.offsetY-=l),t.isLocked||(t.offsetX+=s,t.offsetY+=l)}},N4=function(e,t,n,r){if(n>0)var i=e.maxX-t.minX;else i=t.maxX-e.minX;if(r>0)var o=e.maxY-t.minY;else o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},M4=function(e,t,n){var r=e.positionX,i=e.positionY,o=e.height||1,a=e.width||1,s=n/t,l=o/a,u={};return 0===t&&0<n||0===t&&0>n?(u.x=r,u.y=i+o/2,u):0<t&&-1*l<=s&&s<=l?(u.x=r+a/2,u.y=i+a*n/2/t,u):0>t&&-1*l<=s&&s<=l?(u.x=r-a/2,u.y=i-a*n/2/t,u):0<n&&(s<=-1*l||s>=l)?(u.x=r+o*t/2/n,u.y=i+o/2,u):0>n&&(s<=-1*l||s>=l)?(u.x=r-o*t/2/n,u.y=i-o/2,u):u},C4=function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],i=e.idToIndex[r.sourceId],o=e.layoutNodes[i],a=e.idToIndex[r.targetId],s=e.layoutNodes[a],l=s.positionX-o.positionX,u=s.positionY-o.positionY;if(0!==l||0!==u){var c=M4(o,l,u),h=M4(s,-1*l,-1*u),d=h.x-c.x,f=h.y-c.y,p=Math.sqrt(d*d+f*f),g=Math.pow(r.idealLength-p,2)/r.elasticity;if(0!==p)var m=g*d/p,v=g*f/p;else m=0,v=0;o.isLocked||(o.offsetX+=m,o.offsetY+=v),s.isLocked||(s.offsetX-=m,s.offsetY-=v)}}},I4=function(e,t){if(0!==t.gravity)for(var n=0;n<e.graphSet.length;n++){var r=e.graphSet[n],i=r.length;if(0===n)var o=e.clientHeight/2,a=e.clientWidth/2;else{var s=e.layoutNodes[e.idToIndex[r[0]]],l=e.layoutNodes[e.idToIndex[s.parentId]];o=l.positionX,a=l.positionY}for(var u=0;u<i;u++){var c=e.layoutNodes[e.idToIndex[r[u]]];if(!c.isLocked){var h=o-c.positionX,d=a-c.positionY,f=Math.sqrt(h*h+d*d);if(f>1){var p=t.gravity*h/f,g=t.gravity*d/f;c.offsetX+=p,c.offsetY+=g}}}}},R4=function(e,t){var n=[],r=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;r<=i;){var o=n[r++],a=e.idToIndex[o],s=e.layoutNodes[a],l=s.children;if(0<l.length&&!s.isLocked){for(var u=s.offsetX,c=s.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=u,d.offsetY+=c,n[++i]=l[h]}s.offsetX=0,s.offsetY=0}}},L4=function(e,t){for(var n=0;n<e.nodeSize;n++){0<(i=e.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(n=0;n<e.nodeSize;n++){if(!(0<(i=e.layoutNodes[n]).children.length||i.isLocked)){var r=O4(i.offsetX,i.offsetY,e.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,D4(i,e)}}for(n=0;n<e.nodeSize;n++){var i;0<(i=e.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},O4=function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var i={x:n*e/r,y:n*t/r};else i={x:e,y:t};return i},D4=function(e,t){var n=e.parentId;if(null!=n){var r=t.layoutNodes[t.idToIndex[n]],i=!1;return(null==r.maxX||e.maxX+r.padRight>r.maxX)&&(r.maxX=e.maxX+r.padRight,i=!0),(null==r.minX||e.minX-r.padLeft<r.minX)&&(r.minX=e.minX-r.padLeft,i=!0),(null==r.maxY||e.maxY+r.padBottom>r.maxY)&&(r.maxY=e.maxY+r.padBottom,i=!0),(null==r.minY||e.minY-r.padTop<r.minY)&&(r.minY=e.minY-r.padTop,i=!0),i?D4(r,t):void 0}},P4=function(e,t){for(var n=e.layoutNodes,r=[],i=0;i<n.length;i++){var o=n[i],a=o.cmptId;(r[a]=r[a]||[]).push(o)}var s=0;for(i=0;i<r.length;i++){if(g=r[i]){g.x1=1/0,g.x2=-1/0,g.y1=1/0,g.y2=-1/0;for(var l=0;l<g.length;l++){var u=g[l];g.x1=Math.min(g.x1,u.positionX-u.width/2),g.x2=Math.max(g.x2,u.positionX+u.width/2),g.y1=Math.min(g.y1,u.positionY-u.height/2),g.y2=Math.max(g.y2,u.positionY+u.height/2)}g.w=g.x2-g.x1,g.h=g.y2-g.y1,s+=g.w*g.h}}r.sort(function(e,t){return t.w*t.h-e.w*e.h});var c=0,h=0,d=0,f=0,p=Math.sqrt(s)*e.clientWidth/e.clientHeight;for(i=0;i<r.length;i++){var g;if(g=r[i]){for(l=0;l<g.length;l++){(u=g[l]).isLocked||(u.positionX+=c-g.x1,u.positionY+=h-g.y1)}c+=g.w+t.componentSpacing,d+=g.w+t.componentSpacing,f=Math.max(f,g.h),d>p&&(h+=f+t.componentSpacing,c=0,d=0,f=0)}}},B4={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function F4(e){this.options=oW({},B4,e)}F4.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=r.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var o=UX(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===o.h||0===o.w)r.nodes().layoutPositions(this,t,function(e){return{x:o.x1,y:o.y1}});else{var a=i.size(),s=Math.sqrt(a*o.h/o.w),l=Math.round(s),u=Math.round(o.w/o.h*s),c=function(e){if(null==e)return Math.min(l,u);Math.min(l,u)==l?l=e:u=e},h=function(e){if(null==e)return Math.max(l,u);Math.max(l,u)==l?l=e:u=e},d=t.rows,f=null!=t.cols?t.cols:t.columns;if(null!=d&&null!=f)l=d,u=f;else if(null!=d&&null==f)l=d,u=Math.ceil(a/l);else if(null==d&&null!=f)u=f,l=Math.ceil(a/u);else if(u*l>a){var p=c(),g=h();(p-1)*g>=a?c(p-1):(g-1)*p>=a&&h(g-1)}else for(;u*l<a;){var m=c(),v=h();(v+1)*m>=a?h(v+1):c(m+1)}var y=o.w/u,b=o.h/l;if(t.condense&&(y=0,b=0),t.avoidOverlap)for(var x=0;x<i.length;x++){var w=i[x],E=w._private.position;null!=E.x&&null!=E.y||(E.x=0,E.y=0);var T=w.layoutDimensions(t),_=t.avoidOverlapPadding,k=T.w+_,A=T.h+_;y=Math.max(y,k),b=Math.max(b,A)}for(var S={},N=function(e,t){return!!S["c-"+e+"-"+t]},M=function(e,t){S["c-"+e+"-"+t]=!0},C=0,I=0,R=function(){++I>=u&&(I=0,C++)},L={},O=0;O<i.length;O++){var D=i[O],P=t.position(D);if(P&&(void 0!==P.row||void 0!==P.col)){var B={row:P.row,col:P.col};if(void 0===B.col)for(B.col=0;N(B.row,B.col);)B.col++;else if(void 0===B.row)for(B.row=0;N(B.row,B.col);)B.row++;L[D.id()]=B,M(B.row,B.col)}}i.layoutPositions(this,t,function(e,t){var n,r;if(e.locked()||e.isParent())return!1;var i=L[e.id()];if(i)n=i.col*y+y/2+o.x1,r=i.row*b+b/2+o.y1;else{for(;N(C,I);)R();n=I*y+y/2+o.x1,r=C*b+b/2+o.y1,M(C,I),R()}return{x:n,y:r}})}return this};var z4={ready:function(){},stop:function(){}};function U4(e){this.options=oW({},z4,e)}U4.prototype.run=function(){var e=this.options,t=e.eles,n=this;return e.cy,n.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",e.ready),n.emit("layoutready"),n.one("layoutstop",e.stop),n.emit("layoutstop"),this},U4.prototype.stop=function(){return this};var G4={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function V4(e){this.options=oW({},G4,e)}V4.prototype.run=function(){var e=this.options,t=e.eles.nodes(),n=Dq(e.positions);return t.layoutPositions(this,e,function(t,r){var i=function(t){if(null==e.positions)return{x:(r=t.position()).x,y:r.y};var r;if(n)return e.positions(t);var i=e.positions[t._private.data.id];return null==i?null:i}(t);return!t.locked()&&null!=i&&i}),this};var j4={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function H4(e){this.options=oW({},j4,e)}H4.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=UX(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return n.nodes().layoutPositions(this,e,function(e,t){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}}),this};var $4=[{name:"breadthfirst",impl:c4},{name:"circle",impl:d4},{name:"concentric",impl:g4},{name:"cose",impl:v4},{name:"grid",impl:F4},{name:"null",impl:U4},{name:"preset",impl:V4},{name:"random",impl:H4}];function Y4(e){this.options=e,this.notifications=0}var q4=function(){},W4=function(){throw new Error("A headless instance can not render images")};Y4.prototype={recalculateRenderedStyle:q4,notify:function(){this.notifications++},init:q4,isHeadless:function(){return!0},png:W4,jpg:W4};var X4={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,n=function(e,t,n,r,i,o,a){var s=i.x-n/2-a,l=i.x+n/2+a,u=i.y-n/2-a,c=i.y+n/2+a;return s<=e&&e<=l&&u<=t&&t<=c},r=function(e,t,n,r,i){var o=e*Math.cos(r)-t*Math.sin(r),a=(e*Math.sin(r)+t*Math.cos(r))*n;return{x:o*n+i.x,y:a+i.y}},i=function(e,t,n,i){for(var o=[],a=0;a<e.length;a+=2){var s=e[a],l=e[a+1];o.push(r(s,l,t,n,i))}return o},o=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.x,r.y)}return t},a=function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},s=function(r,s){Oq(s)&&(s=e[s]),e[r]=oW({name:r,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,n,r,a,s){var l=o(i(this.points,n+2*s,r,a));return rK(e,t,l)},roughCollide:n,draw:function(e,n,r,o){var a=i(this.points,n,r,o);t.arrowShapeImpl("polygon")(e,a)},spacing:function(e){return 0},gap:a},s)};s("none",{collide:UW,roughCollide:UW,draw:VW,spacing:GW,gap:GW}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(e,n,o,a,s){var l=i(this.points,n,o,a),u=this.controlPoint,c=r(u[0],u[1],n,o,a);t.arrowShapeImpl(this.name)(e,l,c)},gap:function(e){return.8*a(e)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,n,r,a,s,l){var u=o(i(this.points,n+2*l,r,a)),c=o(i(this.pointsTee,n+2*l,r,a));return rK(e,t,u)||rK(e,t,c)},draw:function(e,n,r,o,a){var s=i(this.points,n,r,o),l=i(this.pointsTee,n,r,o);t.arrowShapeImpl(this.name)(e,s,l)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(e,t,n,r,a,s,l){var u=a,c=Math.pow(u.x-e,2)+Math.pow(u.y-t,2)<=Math.pow((n+2*l)*this.radius,2),h=o(i(this.points,n+2*l,r,a));return rK(e,t,h)||c},draw:function(e,n,r,o,a){var s=i(this.pointsTr,n,r,o);t.arrowShapeImpl(this.name)(e,s,o.x,o.y,this.radius*n)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(e,t){var n=this.baseCrossLinePts.slice(),r=t/e;return n[3]=n[3]-r,n[5]=n[5]-r,n},collide:function(e,t,n,r,a,s,l){var u=o(i(this.points,n+2*l,r,a)),c=o(i(this.crossLinePts(n,s),n+2*l,r,a));return rK(e,t,u)||rK(e,t,c)},draw:function(e,n,r,o,a){var s=i(this.points,n,r,o),l=i(this.crossLinePts(n,a),n,r,o);t.arrowShapeImpl(this.name)(e,s,l)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return.525*a(e)}}),s("circle",{radius:.15,collide:function(e,t,n,r,i,o,a){var s=i;return Math.pow(s.x-e,2)+Math.pow(s.y-t,2)<=Math.pow((n+2*a)*this.radius,2)},draw:function(e,n,r,i,o){t.arrowShapeImpl(this.name)(e,i.x,i.y,this.radius*n)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(e){return 1},gap:function(e){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(e){return.95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})}},K4={projectIntoViewport:function(e,t){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),l=n.zoom();return[((e-i)/a-s.x)/l,((t-o)/a-s.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=this.cy.window().getComputedStyle(e),r=function(e){return parseFloat(n.getPropertyValue(e))},i=r("padding-left"),o=r("padding-right"),a=r("padding-top"),s=r("padding-bottom"),l=r("border-left-width"),u=r("border-right-width"),c=r("border-top-width"),h=(r("border-bottom-width"),e.clientWidth),d=e.clientHeight,f=i+o,p=a+s,g=l+u,m=t.width/(h+g),v=h-f,y=d-p,b=t.left+i+l,x=t.top+a+c;return this.containerBB=[b,x,v,y,m]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,n,r){return this.findNearestElements(e,t,n,r)[0]},findNearestElements:function(e,t,n,r){var i,o,a=this,s=this,l=s.getCachedZSortedEles(),u=[],c=s.cy.zoom(),h=s.cy.hasCompoundNodes(),d=(r?24:8)/c,f=(r?8:2)/c,p=(r?8:2)/c,g=1/0;function m(e,t){if(e.isNode()){if(o)return;o=e,u.push(e)}if(e.isEdge()&&(null==t||t<g))if(i){if(i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value)for(var n=0;n<u.length;n++)if(u[n].isEdge()){u[n]=e,i=e,g=null!=t?t:g;break}}else u.push(e),i=e,g=null!=t?t:g}function v(n){var r=n.outerWidth()+2*f,i=n.outerHeight()+2*f,o=r/2,l=i/2,u=n.position(),c="auto"===n.pstyle("corner-radius").value?"auto":n.pstyle("corner-radius").pfValue,h=n._private.rscratch;if(u.x-o<=e&&e<=u.x+o&&u.y-l<=t&&t<=u.y+l&&s.nodeShapes[a.getNodeShape(n)].checkPoint(e,t,0,r,i,u.x,u.y,c,h))return m(n,0),!0}function y(n){var r,i=n._private,o=i.rscratch,l=n.pstyle("width").pfValue,c=n.pstyle("arrow-scale").value,f=l/2+d,p=f*f,g=2*f,y=i.source,b=i.target;if("segments"===o.edgeType||"straight"===o.edgeType||"haystack"===o.edgeType){for(var x=o.allpts,w=0;w+3<x.length;w+=2)if(JX(e,t,x[w],x[w+1],x[w+2],x[w+3],g)&&p>(r=nK(e,t,x[w],x[w+1],x[w+2],x[w+3])))return m(n,r),!0}else if("bezier"===o.edgeType||"multibezier"===o.edgeType||"self"===o.edgeType||"compound"===o.edgeType)for(x=o.allpts,w=0;w+5<o.allpts.length;w+=4)if(eK(e,t,x[w],x[w+1],x[w+2],x[w+3],x[w+4],x[w+5],g)&&p>(r=tK(e,t,x[w],x[w+1],x[w+2],x[w+3],x[w+4],x[w+5])))return m(n,r),!0;y=y||i.source,b=b||i.target;var E=a.getArrowWidth(l,c),T=[{name:"source",x:o.arrowStartX,y:o.arrowStartY,angle:o.srcArrowAngle},{name:"target",x:o.arrowEndX,y:o.arrowEndY,angle:o.tgtArrowAngle},{name:"mid-source",x:o.midX,y:o.midY,angle:o.midsrcArrowAngle},{name:"mid-target",x:o.midX,y:o.midY,angle:o.midtgtArrowAngle}];for(w=0;w<T.length;w++){var _=T[w],k=s.arrowShapes[n.pstyle(_.name+"-arrow-shape").value],A=n.pstyle("width").pfValue;if(k.roughCollide(e,t,E,_.angle,{x:_.x,y:_.y},A,d)&&k.collide(e,t,E,_.angle,{x:_.x,y:_.y},A,d))return m(n),!0}h&&u.length>0&&(v(y),v(b))}function b(e,t,n){return JW(e,t,n)}function x(n,r){var i,o=n._private,a=p;i=r?r+"-":"",n.boundingBox();var s=o.labelBounds[r||"main"],l=n.pstyle(i+"label").value;if("yes"===n.pstyle("text-events").strValue&&l){var u=b(o.rscratch,"labelX",r),c=b(o.rscratch,"labelY",r),h=b(o.rscratch,"labelAngle",r),d=n.pstyle(i+"text-margin-x").pfValue,f=n.pstyle(i+"text-margin-y").pfValue,g=s.x1-a-d,v=s.x2+a-d,y=s.y1-a-f,x=s.y2+a-f;if(h){var w=Math.cos(h),E=Math.sin(h),T=function(e,t){return{x:(e-=u)*w-(t-=c)*E+u,y:e*E+t*w+c}},_=T(g,y),k=T(g,x),A=T(v,y),S=T(v,x),N=[_.x+d,_.y+f,A.x+d,A.y+f,S.x+d,S.y+f,k.x+d,k.y+f];if(rK(e,t,N))return m(n),!0}else if(qX(s,e,t))return m(n),!0}}n&&(l=l.interactive);for(var w=l.length-1;w>=0;w--){var E=l[w];E.isNode()?v(E)||x(E):y(E)||x(E)||x(E,"source")||x(E,"target")}return u},getAllInBox:function(e,t,n,r){var i=this.getCachedZSortedEles().interactive,o=2/this.cy.zoom(),a=[],s=Math.min(e,n),l=Math.max(e,n),u=Math.min(t,r),c=Math.max(t,r),h=UX({x1:e=s,y1:t=u,x2:n=l,y2:r=c}),d=[{x:h.x1,y:h.y1},{x:h.x2,y:h.y1},{x:h.x2,y:h.y2},{x:h.x1,y:h.y2}],f=[[d[0],d[1]],[d[1],d[2]],[d[2],d[3]],[d[3],d[0]]];function p(e,t,n){return JW(e,t,n)}function g(e,t){var n=e._private,r=o;e.boundingBox();var i=n.labelBounds.main;if(!i)return null;var a=p(n.rscratch,"labelX",t),s=p(n.rscratch,"labelY",t),l=p(n.rscratch,"labelAngle",t),u=e.pstyle("text-margin-x").pfValue,c=e.pstyle("text-margin-y").pfValue,h=i.x1-r-u,d=i.x2+r-u,f=i.y1-r-c,g=i.y2+r-c;if(l){var m=Math.cos(l),v=Math.sin(l),y=function(e,t){return{x:(e-=a)*m-(t-=s)*v+a,y:e*v+t*m+s}};return[y(h,f),y(d,f),y(d,g),y(h,g)]}return[{x:h,y:f},{x:d,y:f},{x:d,y:g},{x:h,y:g}]}function m(e,t,n,r){function i(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}return i(e,n,r)!==i(t,n,r)&&i(e,t,n)!==i(e,t,r)}for(var v=0;v<i.length;v++){var y=i[v];if(y.isNode()){var b=y,x="yes"===b.pstyle("text-events").strValue,w=b.pstyle("box-selection").strValue,E="yes"===b.pstyle("box-select-labels").strValue;if("none"===w)continue;var T=("overlap"===w||E)&&x,_=b.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:T});if("contain"===w){var k=!1;if(E&&x){var A=g(b);A&&xK(A,d)&&(a.push(b),k=!0)}!k&&XX(h,_)&&a.push(b)}else if("overlap"===w&&YX(h,_)){var S=b.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1});if(xK([{x:S.x1,y:S.y1},{x:S.x2,y:S.y1},{x:S.x2,y:S.y2},{x:S.x1,y:S.y2}],d))a.push(b);else{var N=g(b);N&&xK(N,d)&&a.push(b)}}}else{var M=y,C=M._private,I=C.rscratch,R=M.pstyle("box-selection").strValue;if("none"===R)continue;if("contain"===R){if(null!=I.startX&&null!=I.startY&&!qX(h,I.startX,I.startY))continue;if(null!=I.endX&&null!=I.endY&&!qX(h,I.endX,I.endY))continue;if("bezier"===I.edgeType||"multibezier"===I.edgeType||"self"===I.edgeType||"compound"===I.edgeType||"segments"===I.edgeType||"haystack"===I.edgeType){for(var L=C.rstyle.bezierPts||C.rstyle.linePts||C.rstyle.haystackPts,O=!0,D=0;D<L.length;D++)if(!WX(h,L[D])){O=!1;break}O&&a.push(M)}else"straight"===I.edgeType&&a.push(M)}else if("overlap"===R){var P=!1;if(null!=I.startX&&null!=I.startY&&null!=I.endX&&null!=I.endY&&(qX(h,I.startX,I.startY)||qX(h,I.endX,I.endY)))a.push(M),P=!0;else if(!P&&"haystack"===I.edgeType)for(var B=C.rstyle.haystackPts,F=0;F<B.length;F++)if(WX(h,B[F])){a.push(M),P=!0;break}if(!P){var z=C.rstyle.bezierPts||C.rstyle.linePts||C.rstyle.haystackPts;if((!z||z.length<2)&&"straight"===I.edgeType&&null!=I.startX&&null!=I.startY&&null!=I.endX&&null!=I.endY&&(z=[{x:I.startX,y:I.startY},{x:I.endX,y:I.endY}]),!z||z.length<2)continue;for(var U=0;U<z.length-1;U++){for(var G=z[U],V=z[U+1],j=0;j<f.length;j++){var H=WY(f[j],2);if(m(G,V,H[0],H[1])){a.push(M),P=!0;break}}if(P)break}}}}}return a}},Z4={calculateArrowAngles:function(e){var t,n,r,i,o,a,s=e._private.rscratch,l="haystack"===s.edgeType,u="bezier"===s.edgeType,c="multibezier"===s.edgeType,h="segments"===s.edgeType,d="compound"===s.edgeType,f="self"===s.edgeType;if(l?(r=s.haystackPts[0],i=s.haystackPts[1],o=s.haystackPts[2],a=s.haystackPts[3]):(r=s.arrowStartX,i=s.arrowStartY,o=s.arrowEndX,a=s.arrowEndY),g=s.midX,m=s.midY,h)t=r-s.segpts[0],n=i-s.segpts[1];else if(c||d||f||u){var p=s.allpts;t=r-BX(p[0],p[2],p[4],.1),n=i-BX(p[1],p[3],p[5],.1)}else t=r-g,n=i-m;s.srcArrowAngle=IX(t,n);var g=s.midX,m=s.midY;if(l&&(g=(r+o)/2,m=(i+a)/2),t=o-r,n=a-i,h)if((p=s.allpts).length/2%2==0){var v=(k=p.length/2)-2;t=p[k]-p[v],n=p[k+1]-p[v+1]}else if(s.isRound)t=s.midVector[1],n=-s.midVector[0];else{v=(k=p.length/2-1)-2;t=p[k]-p[v],n=p[k+1]-p[v+1]}else if(c||d||f){var y,b,x,w,p=s.allpts;if(s.ctrlpts.length/2%2==0){var E=(T=(_=p.length/2-1)+2)+2;y=BX(p[_],p[T],p[E],0),b=BX(p[_+1],p[T+1],p[E+1],0),x=BX(p[_],p[T],p[E],1e-4),w=BX(p[_+1],p[T+1],p[E+1],1e-4)}else{var T,_;E=(T=p.length/2-1)+2;y=BX(p[_=T-2],p[T],p[E],.4999),b=BX(p[_+1],p[T+1],p[E+1],.4999),x=BX(p[_],p[T],p[E],.5),w=BX(p[_+1],p[T+1],p[E+1],.5)}t=x-y,n=w-b}if(s.midtgtArrowAngle=IX(t,n),s.midDispX=t,s.midDispY=n,t*=-1,n*=-1,h)if((p=s.allpts).length/2%2==0);else if(!s.isRound){var k,A=(k=p.length/2-1)+2;t=-(p[A]-p[k]),n=-(p[A+1]-p[k+1])}if(s.midsrcArrowAngle=IX(t,n),h)t=o-s.segpts[s.segpts.length-2],n=a-s.segpts[s.segpts.length-1];else if(c||d||f||u){var S=(p=s.allpts).length;t=o-BX(p[S-6],p[S-4],p[S-2],.9),n=a-BX(p[S-5],p[S-3],p[S-1],.9)}else t=o-g,n=a-m;s.tgtArrowAngle=IX(t,n)}};Z4.getArrowWidth=Z4.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[e+", "+t];return r||(r=Math.max(Math.pow(13.37*e,.9),29)*t,n[e+", "+t]=r,r)};var Q4,J4,e5,t5,n5,r5,i5,o5,a5,s5,l5,u5,c5,h5,d5,f5,p5,g5={},m5={},v5=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},y5=function(e,t,n,r,i){var o,a;if(e!==p5?v5(t,e,g5):((a=g5).x=-1*(o=m5).x,a.y=-1*o.y,a.nx=-1*o.nx,a.ny=-1*o.ny,a.ang=o.ang>0?-(Math.PI-o.ang):Math.PI+o.ang),v5(t,n,m5),e5=g5.nx*m5.ny-g5.ny*m5.nx,t5=g5.nx*m5.nx-g5.ny*-m5.ny,i5=Math.asin(Math.max(-1,Math.min(1,e5))),Math.abs(i5)<1e-6)return Q4=t.x,J4=t.y,void(a5=l5=0);n5=1,r5=!1,t5<0?i5<0?i5=Math.PI+i5:(i5=Math.PI-i5,n5=-1,r5=!0):i5>0&&(n5=-1,r5=!0),l5=void 0!==t.radius?t.radius:r,o5=i5/2,u5=Math.min(g5.len/2,m5.len/2),i?(s5=Math.abs(Math.cos(o5)*l5/Math.sin(o5)))>u5?(s5=u5,a5=Math.abs(s5*Math.sin(o5)/Math.cos(o5))):a5=l5:(s5=Math.min(u5,l5),a5=Math.abs(s5*Math.sin(o5)/Math.cos(o5))),d5=t.x+m5.nx*s5,f5=t.y+m5.ny*s5,Q4=d5-m5.ny*a5*n5,J4=f5+m5.nx*a5*n5,c5=t.x+g5.nx*s5,h5=t.y+g5.ny*s5,p5=t};function b5(e,t){0===t.radius?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function x5(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return 0===r||0===t.radius?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(y5(e,t,n,r,i),{cx:Q4,cy:J4,radius:a5,startX:c5,startY:h5,stopX:d5,stopY:f5,startAngle:g5.ang+Math.PI/2*n5,endAngle:m5.ang-Math.PI/2*n5,counterClockwise:r5})}var w5=.01,E5=Math.sqrt(.02),T5={};function _5(e){var t=[];if(null!=e){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t.push({x:r,y:i})}return t}}T5.findMidptPtsEtc=function(e,t){var n,r,i,o,a=t.posPts,s=t.intersectionPts,l=t.vectorNormInverse,u=e.pstyle("source-endpoint"),c=e.pstyle("target-endpoint"),h=null!=u.units&&null!=c.units;switch(e.pstyle("edge-distances").value){case"node-position":n=a;break;case"intersection":n=s;break;case"endpoints":if(h){var d=WY(this.manualEndptToPx(e.source()[0],u),2),f=d[0],p=d[1],g=WY(this.manualEndptToPx(e.target()[0],c),2),m=g[0],v=g[1],y={x1:f,y1:p,x2:m,y2:v};r=v-p,i=m-f,o=Math.sqrt(i*i+r*r),l={x:-r/o,y:i/o},n=y}else $W("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),n=s}return{midptPts:n,vectorNormInverse:l}},T5.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n._private,i=r.rscratch;if(!i.haystack){var o=2*Math.random()*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=2*Math.random()*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=r.source,s=r.target,l=a.position(),u=s.position(),c=a.width(),h=s.width(),d=a.height(),f=s.height(),p=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*p+l.x,i.source.y*d*p+l.y,i.target.x*h*p+u.x,i.target.y*f*p+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},T5.findSegmentsPoints=function(e,t){var n=e._private.rscratch,r=e.pstyle("segment-weights"),i=e.pstyle("segment-distances"),o=e.pstyle("segment-radii"),a=e.pstyle("radius-type"),s=Math.min(r.pfValue.length,i.pfValue.length),l=o.pfValue[o.pfValue.length-1],u=a.pfValue[a.pfValue.length-1];n.edgeType="segments",n.segpts=[],n.radii=[],n.isArcRadius=[];for(var c=0;c<s;c++){var h=r.pfValue[c],d=i.pfValue[c],f=1-h,p=h,g=this.findMidptPtsEtc(e,t),m=g.midptPts,v=g.vectorNormInverse,y={x:m.x1*f+m.x2*p,y:m.y1*f+m.y2*p};n.segpts.push(y.x+v.x*d,y.y+v.y*d),n.radii.push(void 0!==o.pfValue[c]?o.pfValue[c]:l),n.isArcRadius.push("arc-radius"===(void 0!==a.pfValue[c]?a.pfValue[c]:u))}},T5.findLoopPoints=function(e,t,n,r){var i=e._private.rscratch,o=t.dirCounts,a=t.srcPos,s=e.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,h=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=n,f=h;r&&(d=0,f=l);var p=u-Math.PI/2,g=p-c/2,m=p+c/2,v=String(u+"_"+c);d=void 0===o[v]?o[v]=0:++o[v],i.ctrlpts=[a.x+1.4*Math.cos(g)*f*(d/3+1),a.y+1.4*Math.sin(g)*f*(d/3+1),a.x+1.4*Math.cos(m)*f*(d/3+1),a.y+1.4*Math.sin(m)*f*(d/3+1)]},T5.findCompoundLoopPoints=function(e,t,n,r){var i=e._private.rscratch;i.edgeType="compound";var o=t.srcPos,a=t.tgtPos,s=t.srcW,l=t.srcH,u=t.tgtW,c=t.tgtH,h=e.pstyle("control-point-step-size").pfValue,d=e.pstyle("control-point-distances"),f=d?d.pfValue[0]:void 0,p=n,g=h;r&&(p=0,g=f);var m={x:o.x-s/2,y:o.y-l/2},v={x:a.x-u/2,y:a.y-c/2},y={x:Math.min(m.x,v.x),y:Math.min(m.y,v.y)},b=Math.max(.5,Math.log(s*w5)),x=Math.max(.5,Math.log(u*w5));i.ctrlpts=[y.x,y.y-(1+Math.pow(50,1.12)/100)*g*(p/3+1)*b,y.x-(1+Math.pow(50,1.12)/100)*g*(p/3+1)*x,y.y]},T5.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},T5.findBezierPoints=function(e,t,n,r,i){var o=e._private.rscratch,a=e.pstyle("control-point-step-size").pfValue,s=e.pstyle("control-point-distances"),l=e.pstyle("control-point-weights"),u=s&&l?Math.min(s.value.length,l.value.length):1,c=s?s.pfValue[0]:void 0,h=l.value[0],d=r;o.edgeType=d?"multibezier":"bezier",o.ctrlpts=[];for(var f=0;f<u;f++){var p=(.5-t.eles.length/2+n)*a*(i?-1:1),g=void 0,m=LX(p);d&&(c=s?s.pfValue[f]:a,h=l.value[f]);var v=void 0!==(g=r?c:void 0!==c?m*c:void 0)?g:p,y=1-h,b=h,x=this.findMidptPtsEtc(e,t),w=x.midptPts,E=x.vectorNormInverse,T={x:w.x1*y+w.x2*b,y:w.y1*y+w.y2*b};o.ctrlpts.push(T.x+E.x*v,T.y+E.y*v)}},T5.findTaxiPoints=function(e,t){var n=e._private.rscratch;n.edgeType="segments";var r="vertical",i="horizontal",o="leftward",a="rightward",s="downward",l="upward",u=t.posPts,c=t.srcW,h=t.srcH,d=t.tgtW,f=t.tgtH,p="node-position"!==e.pstyle("edge-distances").value,g=e.pstyle("taxi-direction").value,m=g,v=e.pstyle("taxi-turn"),y="%"===v.units,b=v.pfValue,x=b<0,w=e.pstyle("taxi-turn-min-distance").pfValue,E=p?(c+d)/2:0,T=p?(h+f)/2:0,_=u.x2-u.x1,k=u.y2-u.y1,A=function(e,t){return e>0?Math.max(e-t,0):Math.min(e+t,0)},S=A(_,E),N=A(k,T),M=!1;"auto"===m?g=Math.abs(S)>Math.abs(N)?i:r:m===l||m===s?(g=r,M=!0):m!==o&&m!==a||(g=i,M=!0);var C,I=g===r,R=I?N:S,L=I?k:_,O=LX(L),D=!1;(M&&(y||x)||!(m===s&&L<0||m===l&&L>0||m===o&&L>0||m===a&&L<0)||(R=(O*=-1)*Math.abs(R),D=!0),y)?C=(b<0?1+b:b)*R:C=(b<0?R:0)+b*O;var P=function(e){return Math.abs(e)<w||Math.abs(e)>=Math.abs(R)},B=P(C),F=P(Math.abs(R)-Math.abs(C));if((B||F)&&!D)if(I){var z=Math.abs(L)<=h/2,U=Math.abs(_)<=d/2;if(z){var G=(u.x1+u.x2)/2,V=u.y1,j=u.y2;n.segpts=[G,V,G,j]}else if(U){var H=(u.y1+u.y2)/2,$=u.x1,Y=u.x2;n.segpts=[$,H,Y,H]}else n.segpts=[u.x1,u.y2]}else{var q=Math.abs(L)<=c/2,W=Math.abs(k)<=f/2;if(q){var X=(u.y1+u.y2)/2,K=u.x1,Z=u.x2;n.segpts=[K,X,Z,X]}else if(W){var Q=(u.x1+u.x2)/2,J=u.y1,ee=u.y2;n.segpts=[Q,J,Q,ee]}else n.segpts=[u.x2,u.y1]}else if(I){var te=u.y1+C+(p?h/2*O:0),ne=u.x1,re=u.x2;n.segpts=[ne,te,re,te]}else{var ie=u.x1+C+(p?c/2*O:0),oe=u.y1,ae=u.y2;n.segpts=[ie,oe,ie,ae]}if(n.isRound){var se=e.pstyle("taxi-radius").value,le="arc-radius"===e.pstyle("radius-type").value[0];n.radii=new Array(n.segpts.length/2).fill(se),n.isArcRadius=new Array(n.segpts.length/2).fill(le)}},T5.tryToCorrectInvalidPoints=function(e,t){var n=e._private.rscratch;if("bezier"===n.edgeType){var r=t.srcPos,i=t.tgtPos,o=t.srcW,a=t.srcH,s=t.tgtW,l=t.tgtH,u=t.srcShape,c=t.tgtShape,h=t.srcCornerRadius,d=t.tgtCornerRadius,f=t.srcRs,p=t.tgtRs,g=!Fq(n.startX)||!Fq(n.startY),m=!Fq(n.arrowStartX)||!Fq(n.arrowStartY),v=!Fq(n.endX)||!Fq(n.endY),y=!Fq(n.arrowEndX)||!Fq(n.arrowEndY),b=3*(this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth),x=OX({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),w=x<b,E=OX({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),T=E<b,_=!1;if(g||m||w){_=!0;var k={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},A=Math.sqrt(k.x*k.x+k.y*k.y),S={x:k.x/A,y:k.y/A},N=Math.max(o,a),M={x:n.ctrlpts[0]+2*S.x*N,y:n.ctrlpts[1]+2*S.y*N},C=u.intersectLine(r.x,r.y,o,a,M.x,M.y,0,h,f);w?(n.ctrlpts[0]=n.ctrlpts[0]+S.x*(b-x),n.ctrlpts[1]=n.ctrlpts[1]+S.y*(b-x)):(n.ctrlpts[0]=C[0]+S.x*b,n.ctrlpts[1]=C[1]+S.y*b)}if(v||y||T){_=!0;var I={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},R=Math.sqrt(I.x*I.x+I.y*I.y),L={x:I.x/R,y:I.y/R},O=Math.max(o,a),D={x:n.ctrlpts[0]+2*L.x*O,y:n.ctrlpts[1]+2*L.y*O},P=c.intersectLine(i.x,i.y,s,l,D.x,D.y,0,d,p);T?(n.ctrlpts[0]=n.ctrlpts[0]+L.x*(b-E),n.ctrlpts[1]=n.ctrlpts[1]+L.y*(b-E)):(n.ctrlpts[0]=P[0]+L.x*b,n.ctrlpts[1]=P[1]+L.y*b)}_&&this.findEndpoints(e)}},T5.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var n=0;n+1<t.ctrlpts.length;n+=2)t.allpts.push(t.ctrlpts[n],t.ctrlpts[n+1]),n+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[n]+t.ctrlpts[n+2])/2,(t.ctrlpts[n+1]+t.ctrlpts[n+3])/2);var r;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(r=t.allpts.length/2-1,t.midX=t.allpts[r],t.midY=t.allpts[r+1]):(r=t.allpts.length/2-3,t.midX=BX(t.allpts[r],t.allpts[r+2],t.allpts[r+4],.5),t.midY=BX(t.allpts[r+1],t.allpts[r+3],t.allpts[r+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var i=2;i+3<t.allpts.length;i+=2){var o=t.radii[i/2-1],a=t.isArcRadius[i/2-1];t.roundCorners.push(x5({x:t.allpts[i-2],y:t.allpts[i-1]},{x:t.allpts[i],y:t.allpts[i+1],radius:o},{x:t.allpts[i+2],y:t.allpts[i+3]},o,a))}}if(t.segpts.length%4==0){var s=t.segpts.length/2,l=s-2;t.midX=(t.segpts[l]+t.segpts[s])/2,t.midY=(t.segpts[l+1]+t.segpts[s+1])/2}else{var u=t.segpts.length/2-1;if(t.isRound){var c={x:t.segpts[u],y:t.segpts[u+1]},h=t.roundCorners[u/2];if(0===h.radius){var d={x:t.segpts[u+2],y:t.segpts[u+3]};t.midX=c.x,t.midY=c.y,t.midVector=[c.y-d.y,d.x-c.x]}else{var f=[c.x-h.cx,c.y-h.cy],p=h.radius/Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2));f=f.map(function(e){return e*p}),t.midX=h.cx+f[0],t.midY=h.cy+f[1],t.midVector=f}}else t.midX=t.segpts[u],t.midY=t.segpts[u+1]}}},T5.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||Fq(t.startX)&&Fq(t.startY)&&Fq(t.endX)&&Fq(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,$W(e.id()))},T5.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var n=this,r=n.cy.hasCompoundNodes(),i=new tX,o=function(e,t){return[].concat(XY(e),[t?1:0]).join("-")},a=[],s=[],l=0;l<e.length;l++){var u=e[l],c=u._private,h=u.pstyle("curve-style").value;if(!u.removed()&&u.takesUpSpace())if("haystack"!==h){var d="unbundled-bezier"===h||Qq(h,"segments")||"straight"===h||"straight-triangle"===h||Qq(h,"taxi"),f="unbundled-bezier"===h||"bezier"===h,p=c.source,g=c.target,m=[p.poolIndex(),g.poolIndex()].sort(),v=o(m,d),y=i.get(v);null==y&&(y={eles:[]},a.push({pairId:m,edgeIsUnbundled:d}),i.set(v,y)),y.eles.push(u),d&&(y.hasUnbundled=!0),f&&(y.hasBezier=!0)}else s.push(u)}for(var b=function(){var e,s=a[x],l=s.pairId,u=s.edgeIsUnbundled,c=o(l,u),h=i.get(c);if(!h.hasUnbundled){var d=h.eles[0].parallelEdges().filter(function(e){return e.isBundledBezier()});QW(h.eles),d.forEach(function(e){return h.eles.push(e)}),h.eles.sort(function(e,t){return e.poolIndex()-t.poolIndex()})}var f=h.eles[0],p=f.source(),g=f.target();if(p.poolIndex()>g.poolIndex()){var m=p;p=g,g=m}var v=h.srcPos=p.position(),y=h.tgtPos=g.position(),b=h.srcW=p.outerWidth(),w=h.srcH=p.outerHeight(),E=h.tgtW=g.outerWidth(),T=h.tgtH=g.outerHeight(),_=h.srcShape=n.nodeShapes[t.getNodeShape(p)],k=h.tgtShape=n.nodeShapes[t.getNodeShape(g)],A=h.srcCornerRadius="auto"===p.pstyle("corner-radius").value?"auto":p.pstyle("corner-radius").pfValue,S=h.tgtCornerRadius="auto"===g.pstyle("corner-radius").value?"auto":g.pstyle("corner-radius").pfValue,N=h.tgtRs=g._private.rscratch,M=h.srcRs=p._private.rscratch;h.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var C=0;C<h.eles.length;C++){var I=h.eles[C],R=I[0]._private.rscratch,L=I.pstyle("curve-style").value,O="unbundled-bezier"===L||Qq(L,"segments")||Qq(L,"taxi"),D=!p.same(I.source());if(!h.calculatedIntersection&&p!==g&&(h.hasBezier||h.hasUnbundled)){h.calculatedIntersection=!0;var P=_.intersectLine(v.x,v.y,b,w,y.x,y.y,0,A,M),B=h.srcIntn=P,F=k.intersectLine(y.x,y.y,E,T,v.x,v.y,0,S,N),z=h.tgtIntn=F,U=h.intersectionPts={x1:P[0],x2:F[0],y1:P[1],y2:F[1]},G=h.posPts={x1:v.x,x2:y.x,y1:v.y,y2:y.y},V=F[1]-P[1],j=F[0]-P[0],H=Math.sqrt(j*j+V*V);Fq(H)&&H>=E5||(H=Math.sqrt(Math.max(j*j,w5)+Math.max(V*V,w5)));var $=h.vector={x:j,y:V},Y=h.vectorNorm={x:$.x/H,y:$.y/H},q={x:-Y.y,y:Y.x};h.nodesOverlap=!Fq(H)||k.checkPoint(P[0],P[1],0,E,T,y.x,y.y,S,N)||_.checkPoint(F[0],F[1],0,b,w,v.x,v.y,A,M),h.vectorNormInverse=q,e={nodesOverlap:h.nodesOverlap,dirCounts:h.dirCounts,calculatedIntersection:!0,hasBezier:h.hasBezier,hasUnbundled:h.hasUnbundled,eles:h.eles,srcPos:y,srcRs:N,tgtPos:v,tgtRs:M,srcW:E,srcH:T,tgtW:b,tgtH:w,srcIntn:z,tgtIntn:B,srcShape:k,tgtShape:_,posPts:{x1:G.x2,y1:G.y2,x2:G.x1,y2:G.y1},intersectionPts:{x1:U.x2,y1:U.y2,x2:U.x1,y2:U.y1},vector:{x:-$.x,y:-$.y},vectorNorm:{x:-Y.x,y:-Y.y},vectorNormInverse:{x:-q.x,y:-q.y}}}var W=D?e:h;R.nodesOverlap=W.nodesOverlap,R.srcIntn=W.srcIntn,R.tgtIntn=W.tgtIntn,R.isRound=L.startsWith("round"),r&&(p.isParent()||p.isChild()||g.isParent()||g.isChild())&&(p.parents().anySame(g)||g.parents().anySame(p)||p.same(g)&&p.isParent())?t.findCompoundLoopPoints(I,W,C,O):p===g?t.findLoopPoints(I,W,C,O):L.endsWith("segments")?t.findSegmentsPoints(I,W):L.endsWith("taxi")?t.findTaxiPoints(I,W):"straight"===L||!O&&h.eles.length%2==1&&C===Math.floor(h.eles.length/2)?t.findStraightEdgePoints(I):t.findBezierPoints(I,W,C,O,D),t.findEndpoints(I),t.tryToCorrectInvalidPoints(I,W),t.checkForInvalidEdgeWarning(I),t.storeAllpts(I),t.storeEdgeProjections(I),t.calculateArrowAngles(I),t.recalculateEdgeLabelProjections(I),t.calculateLabelAngles(I)}},x=0;x<a.length;x++)b();this.findHaystackPoints(s)}},T5.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if(this.recalculateRenderedStyle(e),"segments"===t.edgeType)return _5(t.segpts)},T5.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var n=t.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return _5(t.ctrlpts)},T5.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var k5={manualEndptToPx:function(e,t){var n=e.position(),r=e.outerWidth(),i=e.outerHeight(),o=e._private.rscratch;if(2===t.value.length){var a=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(a[0]=a[0]*r),"%"===t.units[1]&&(a[1]=a[1]*i),a[0]+=n.x,a[1]+=n.y,a}var s=t.pfValue[0];s=-Math.PI/2+s;var l=2*Math.max(r,i),u=[n.x+Math.cos(s)*l,n.y+Math.sin(s)*l];return this.nodeShapes[this.getNodeShape(e)].intersectLine(n.x,n.y,r,i,u[0],u[1],0,"auto"===e.pstyle("corner-radius").value?"auto":e.pstyle("corner-radius").pfValue,o)},findEndpoints:function(e){var t,n,r,i,o,a,s,l,u,c=this,h=e.source()[0],d=e.target()[0],f=h.position(),p=d.position(),g=e.pstyle("target-arrow-shape").value,m=e.pstyle("source-arrow-shape").value,v=e.pstyle("target-distance-from-node").pfValue,y=e.pstyle("source-distance-from-node").pfValue,b=h._private.rscratch,x=d._private.rscratch,w=e.pstyle("curve-style").value,E=e._private.rscratch,T=E.edgeType,_=Qq(w,"taxi"),k="self"===T||"compound"===T,A="bezier"===T||"multibezier"===T||k,S="bezier"!==T,N="straight"===T||"segments"===T,M="segments"===T,C=A||S||N,I=k||_,R=e.pstyle("source-endpoint"),L=I?"outside-to-node":R.value,O="auto"===h.pstyle("corner-radius").value?"auto":h.pstyle("corner-radius").pfValue,D=e.pstyle("target-endpoint"),P=I?"outside-to-node":D.value,B="auto"===d.pstyle("corner-radius").value?"auto":d.pstyle("corner-radius").pfValue;E.srcManEndpt=R,E.tgtManEndpt=D;var F=null!==(t=2===(null==D||null===(n=D.pfValue)||void 0===n?void 0:n.length)?D.pfValue:null)&&void 0!==t?t:[0,0],z=null!==(r=2===(null==R||null===(i=R.pfValue)||void 0===i?void 0:i.length)?R.pfValue:null)&&void 0!==r?r:[0,0];if(A){var U=[E.ctrlpts[0],E.ctrlpts[1]];a=S?[E.ctrlpts[E.ctrlpts.length-2],E.ctrlpts[E.ctrlpts.length-1]]:U,s=U}else if(N){var G=M?E.segpts.slice(0,2):[p.x+F[0],p.y+F[1]];a=M?E.segpts.slice(E.segpts.length-2):[f.x+z[0],f.y+z[1]],s=G}if("inside-to-node"===P)o=[p.x,p.y];else if(D.units)o=this.manualEndptToPx(d,D);else if("outside-to-line"===P)o=E.tgtIntn;else if("outside-to-node"===P||"outside-to-node-or-label"===P?l=a:"outside-to-line"!==P&&"outside-to-line-or-label"!==P||(l=[f.x,f.y]),o=c.nodeShapes[this.getNodeShape(d)].intersectLine(p.x,p.y,d.outerWidth(),d.outerHeight(),l[0],l[1],0,B,x),"outside-to-node-or-label"===P||"outside-to-line-or-label"===P){var V=d._private.rscratch,j=V.labelWidth,H=V.labelHeight,$=V.labelX,Y=V.labelY,q=j/2,W=H/2,X=d.pstyle("text-valign").value;"top"===X?Y-=W:"bottom"===X&&(Y+=W);var K=d.pstyle("text-halign").value;"left"===K?$-=q:"right"===K&&($+=q);var Z=dK(l[0],l[1],[$-q,Y-W,$+q,Y-W,$+q,Y+W,$-q,Y+W],p.x,p.y);if(Z.length>0){var Q=f,J=DX(Q,CX(o)),ee=DX(Q,CX(Z)),te=J;if(ee<J&&(o=Z,te=ee),Z.length>2)DX(Q,{x:Z[2],y:Z[3]})<te&&(o=[Z[2],Z[3]])}}var ne=fK(o,a,c.arrowShapes[g].spacing(e)+v),re=fK(o,a,c.arrowShapes[g].gap(e)+v);if(E.endX=re[0],E.endY=re[1],E.arrowEndX=ne[0],E.arrowEndY=ne[1],"inside-to-node"===L)o=[f.x,f.y];else if(R.units)o=this.manualEndptToPx(h,R);else if("outside-to-line"===L)o=E.srcIntn;else if("outside-to-node"===L||"outside-to-node-or-label"===L?u=s:"outside-to-line"!==L&&"outside-to-line-or-label"!==L||(u=[p.x,p.y]),o=c.nodeShapes[this.getNodeShape(h)].intersectLine(f.x,f.y,h.outerWidth(),h.outerHeight(),u[0],u[1],0,O,b),"outside-to-node-or-label"===L||"outside-to-line-or-label"===L){var ie=h._private.rscratch,oe=ie.labelWidth,ae=ie.labelHeight,se=ie.labelX,le=ie.labelY,ue=oe/2,ce=ae/2,he=h.pstyle("text-valign").value;"top"===he?le-=ce:"bottom"===he&&(le+=ce);var de=h.pstyle("text-halign").value;"left"===de?se-=ue:"right"===de&&(se+=ue);var fe=dK(u[0],u[1],[se-ue,le-ce,se+ue,le-ce,se+ue,le+ce,se-ue,le+ce],f.x,f.y);if(fe.length>0){var pe=p,ge=DX(pe,CX(o)),me=DX(pe,CX(fe)),ve=ge;if(me<ge&&(o=[fe[0],fe[1]],ve=me),fe.length>2)DX(pe,{x:fe[2],y:fe[3]})<ve&&(o=[fe[2],fe[3]])}}var ye=fK(o,s,c.arrowShapes[m].spacing(e)+y),be=fK(o,s,c.arrowShapes[m].gap(e)+y);E.startX=be[0],E.startY=be[1],E.arrowStartX=ye[0],E.arrowStartY=ye[1],C&&(Fq(E.startX)&&Fq(E.startY)&&Fq(E.endX)&&Fq(E.endY)?E.badLine=!1:E.badLine=!0)},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),"haystack"===t.edgeType?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),"haystack"===t.edgeType?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}}},A5={};function S5(e,t,n){for(var r=function(e,t,n,r){return BX(e,t,n,r)},i=t._private.rstyle.bezierPts,o=0;o<e.bezierProjPcts.length;o++){var a=e.bezierProjPcts[o];i.push({x:r(n[0],n[2],n[4],a),y:r(n[1],n[3],n[5],a)})}}A5.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,r=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){t.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)S5(this,e,n.allpts.slice(i,i+6))}else if("segments"===r){var o=t.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)o.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var a=n.haystackPts;t.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},A5.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var N5={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!$q(t)){var n,r,i=e._private,o=e.width(),a=e.height(),s=e.padding(),l=e.position(),u=e.pstyle("text-halign").strValue,c=e.pstyle("text-valign").strValue,h=i.rscratch,d=i.rstyle;switch(u){case"left":n=l.x-o/2-s;break;case"right":n=l.x+o/2+s;break;default:n=l.x}switch(c){case"top":r=l.y-a/2-s;break;case"bottom":r=l.y+a/2+s;break;default:r=l.y}h.labelX=n,h.labelY=r,d.labelX=n,d.labelY=r,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}}},M5=function(e,t){var n=Math.atan(t/e);return 0===e&&n<0&&(n*=-1),n},C5=function(e,t){var n=t.x-e.x,r=t.y-e.y;return M5(n,r)};N5.recalculateEdgeLabelProjections=function(e){var t,n=e._private,r=n.rscratch,i=this,o={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(o.mid||o.source||o.target){t={x:r.midX,y:r.midY};var a=function(e,t,r){eX(n.rscratch,e,t,r),eX(n.rstyle,e,t,r)};a("labelX",null,t.x),a("labelY",null,t.y);var s=M5(r.midDispX,r.midDispY);a("labelAutoAngle",null,s);var l=function(){if(l.cache)return l.cache;for(var e=[],t=0;t+5<r.allpts.length;t+=4){var o={x:r.allpts[t],y:r.allpts[t+1]},a={x:r.allpts[t+2],y:r.allpts[t+3]},s={x:r.allpts[t+4],y:r.allpts[t+5]};e.push({p0:o,p1:a,p2:s,startDist:0,length:0,segments:[]})}var u=n.rstyle.bezierPts,c=i.bezierProjPcts.length;function h(e,t,n,r,i){var o=OX(t,n),a=e.segments[e.segments.length-1],s={p0:t,p1:n,t0:r,t1:i,startDist:a?a.startDist+a.length:0,length:o};e.segments.push(s),e.length+=o}for(var d=0;d<e.length;d++){var f=e[d],p=e[d-1];p&&(f.startDist=p.startDist+p.length),h(f,f.p0,u[d*c],0,i.bezierProjPcts[0]);for(var g=0;g<c-1;g++)h(f,u[d*c+g],u[d*c+g+1],i.bezierProjPcts[g],i.bezierProjPcts[g+1]);h(f,u[d*c+c-1],f.p2,i.bezierProjPcts[c-1],1)}return l.cache=e},u=function(n){var i,s="source"===n;if(o[n]){var u=e.pstyle(n+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var c,h=l(),d=0,f=0,p=0;p<h.length;p++){for(var g=h[s?p:h.length-1-p],m=0;m<g.segments.length;m++){var v=g.segments[s?m:g.segments.length-1-m],y=p===h.length-1&&m===g.segments.length-1;if(d=f,(f+=v.length)>=u||y){c={cp:g,segment:v};break}}if(c)break}var b=c.cp,x=c.segment,w=(u-d)/x.length,E=x.t1-x.t0,T=s?x.t0+E*w:x.t1-E*w;T=zX(0,T,1),t=FX(b.p0,b.p1,b.p2,T),i=function(e,t,n,r){var i=zX(0,r-.001,1),o=zX(0,r+.001,1),a=FX(e,t,n,i),s=FX(e,t,n,o);return C5(a,s)}(b.p0,b.p1,b.p2,T);break;case"straight":case"segments":case"haystack":for(var _,k,A,S,N=0,M=r.allpts.length,C=0;C+3<M&&(s?(A={x:r.allpts[C],y:r.allpts[C+1]},S={x:r.allpts[C+2],y:r.allpts[C+3]}):(A={x:r.allpts[M-2-C],y:r.allpts[M-1-C]},S={x:r.allpts[M-4-C],y:r.allpts[M-3-C]}),k=N,!((N+=_=OX(A,S))>=u));C+=2);var I=(u-k)/_;I=zX(0,I,1),t=function(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=OX(e,t),s=i/a,l=o/a;return n=null==n?0:n,r=null!=r?r:n*a,{x:e.x+s*r,y:e.y+l*r}}(A,S,I),i=C5(A,S)}a("labelX",n,t.x),a("labelY",n,t.y),a("labelAutoAngle",n,i)}};u("source"),u("target"),this.applyLabelDimensions(e)}},N5.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},N5.applyPrefixedLabelDimensions=function(e,t){var n=e._private,r=this.getLabelText(e,t),i=LW(r,e._private.labelDimsKey);if(JW(n.rscratch,"prefixedLabelDimsKey",t)!==i){eX(n.rscratch,"prefixedLabelDimsKey",t,i);var o=this.calculateLabelDimensions(e,r),a=e.pstyle("line-height").pfValue,s=e.pstyle("text-wrap").strValue,l=JW(n.rscratch,"labelWrapCachedLines",t)||[],u="wrap"!==s?1:Math.max(l.length,1),c=o.height/u,h=c*a,d=o.width,f=o.height+(u-1)*(a-1)*c;eX(n.rstyle,"labelWidth",t,d),eX(n.rscratch,"labelWidth",t,d),eX(n.rstyle,"labelHeight",t,f),eX(n.rscratch,"labelHeight",t,f),eX(n.rscratch,"labelLineHeight",t,h)}},N5.getLabelText=function(e,t){var n=e._private,r=t?t+"-":"",i=e.pstyle(r+"label").strValue,o=e.pstyle("text-transform").value,a=function(e,r){return r?(eX(n.rscratch,e,t,r),r):JW(n.rscratch,e,t)};if(!i)return"";"none"==o||("uppercase"==o?i=i.toUpperCase():"lowercase"==o&&(i=i.toLowerCase()));var s=e.pstyle("text-wrap").value;if("wrap"===s){var l=a("labelKey");if(null!=l&&a("labelWrapKey")===l)return a("labelWrapCachedText");for(var u=i.split("\n"),c=e.pstyle("text-max-width").pfValue,h="anywhere"===e.pstyle("text-overflow-wrap").value,d=[],f=/[\s\u200b]+|$/g,p=0;p<u.length;p++){var g=u[p],m=this.calculateLabelDimensions(e,g).width;if(h){var v=g.split("").join("​");g=v}if(m>c){var y,b="",x=0,w=YY(g.matchAll(f));try{for(w.s();!(y=w.n()).done;){var E=y.value,T=E[0],_=g.substring(x,E.index);x=E.index+T.length;var k=0===b.length?_:b+_+T;this.calculateLabelDimensions(e,k).width<=c?b+=_+T:(b&&d.push(b),b=_+T)}}catch(C){w.e(C)}finally{w.f()}b.match(/^[\s\u200b]+$/)||d.push(b)}else d.push(g)}a("labelWrapCachedLines",d),i=a("labelWrapCachedText",d.join("\n")),a("labelWrapKey",l)}else if("ellipsis"===s){var A=e.pstyle("text-max-width").pfValue,S="",N=!1;if(this.calculateLabelDimensions(e,i).width<A)return i;for(var M=0;M<i.length;M++){if(this.calculateLabelDimensions(e,S+i[M]+"…").width>A)break;S+=i[M],M===i.length-1&&(N=!0)}return N||(S+="…"),S}return i},N5.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,n=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},N5.calculateLabelDimensions=function(e,t){var n=this.cy.window().document,r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue,o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=this.labelCalcCanvas,l=this.labelCalcCanvasContext;if(!s){s=this.labelCalcCanvas=n.createElement("canvas"),l=this.labelCalcCanvasContext=s.getContext("2d");var u=s.style;u.position="absolute",u.left="-9999px",u.top="-9999px",u.zIndex="-1",u.visibility="hidden",u.pointerEvents="none"}l.font="".concat(r," ").concat(a," ").concat(i,"px ").concat(o);for(var c=0,h=0,d=t.split("\n"),f=0;f<d.length;f++){var p=d[f],g=l.measureText(p),m=Math.ceil(g.width),v=i;c=Math.max(m,c),h+=v}return{width:c+=0,height:h+=0}},N5.calculateLabelAngle=function(e,t){var n=e._private.rscratch,r=e.isEdge(),i=t?t+"-":"",o=e.pstyle(i+"text-rotation"),a=o.strValue;return"none"===a?0:r&&"autorotate"===a?n.labelAutoAngle:"autorotate"===a?0:o.pfValue},N5.calculateLabelAngles=function(e){var t=this,n=e.isEdge(),r=e._private.rscratch;r.labelAngle=t.calculateLabelAngle(e),n&&(r.sourceLabelAngle=t.calculateLabelAngle(e,"source"),r.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var I5={},R5=!1;I5.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(e.width()<28||e.height()<28))return R5||($W(),R5=!0),"rectangle";if(e.isParent())return"rectangle"===t||"roundrectangle"===t||"round-rectangle"===t||"cutrectangle"===t||"cut-rectangle"===t||"barrel"===t?t:"rectangle";if("polygon"===t){var n=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return t};var L5={registerCalculationListeners:function(){var e=this.cy,t=e.collection(),n=this,r=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(e),n)for(var r=0;r<e.length;r++){var i=e[r]._private.rstyle;i.clean=!1,i.cleanConnected=!1}};n.binder(e).on("bounds.* dirty.*",function(e){var t=e.target;r(t)}).on("style.* background.*",function(e){var t=e.target;r(t,!1)});var i=function(i){if(i){var o=n.onUpdateEleCalcsFns;t.cleanStyle();for(var a=0;a<t.length;a++){var s=t[a],l=s._private.rstyle;s.isNode()&&!l.cleanConnected&&(r(s.connectedEdges()),l.cleanConnected=!0)}if(o)for(var u=0;u<o.length;u++){(0,o[u])(i,t)}n.recalculateRenderedStyle(t),t=e.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var n=function(e){return e._private.rstyle.cleanConnected};if(0!==e.length){var r=[],i=[];if(!this.destroyed){void 0===t&&(t=!0);for(var o=0;o<e.length;o++){var a=e[o],s=a._private,l=s.rstyle;!a.isEdge()||n(a.source())&&n(a.target())||(l.clean=!1),a.isEdge()&&a.isBundledBezier()&&a.parallelEdges().some(function(e){return!e._private.rstyle.clean&&e.isBundledBezier()})&&(l.clean=!1),t&&l.clean||a.removed()||"none"!==a.pstyle("display").value&&("nodes"===s.group?i.push(a):r.push(a),l.clean=!0)}for(var u=0;u<i.length;u++){var c=i[u],h=c._private.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var f=0;f<r.length;f++){var p=r[f]._private,g=p.rstyle,m=p.rscratch;g.srcX=m.arrowStartX,g.srcY=m.arrowStartY,g.tgtX=m.arrowEndX,g.tgtY=m.arrowEndY,g.midX=m.midX,g.midY=m.midY,g.labelAngle=m.labelAngle,g.sourceLabelAngle=m.sourceLabelAngle,g.targetLabelAngle=m.targetLabelAngle}}}}},O5={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var r=(i=e[n])._private.rscratch;i.grabbed()&&!i.isParent()?t.push(i):r.inDragLayer?e.drag.push(i):e.nondrag.push(i)}for(n=0;n<t.length;n++){var i=t[n];e.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(W1),t.interactive=t.filter(function(e){return e.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},D5={};[K4,Z4,T5,k5,A5,N5,I5,L5,O5].forEach(function(e){oW(D5,e)});var P5={getCachedImage:function(e,t,n){var r=this.imageCache=this.imageCache||{},i=r[e];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var o=(i=r[e]=r[e]||{}).image=new Image;o.addEventListener("load",n),o.addEventListener("error",function(){o.error=!0});var a="data:";return e.substring(0,5).toLowerCase()===a||(t="null"===t?null:t,o.crossOrigin=t),o.src=e,o}},B5={registerBinding:function(e,t,n,r){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var o=[],a=0;a<e.length;a++){var s=e[a];if(void 0!==s){var l=this.binder(s);o.push(l.on.apply(l,i))}}return o}return(l=this.binder(e)).on.apply(l,i)}};B5.binder=function(e){var t,n=this,r=n.cy.window(),i=e===r||e===r.document||e===r.document.body||(t=e,"undefined"!=typeof HTMLElement&&t instanceof HTMLElement);if(null==n.supportsPassiveEvents){var o=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return o=!0,!0}});r.addEventListener("test",null,a)}catch(l){}n.supportsPassiveEvents=o}var s=function(t,r,o){var a=Array.prototype.slice.call(arguments);return i&&n.supportsPassiveEvents&&(a[2]={capture:null!=o&&o,passive:!1,once:!1}),n.bindings.push({target:e,args:a}),(e.addEventListener||e.on).apply(e,a),this};return{on:s,addEventListener:s,addListener:s,bind:s}},B5.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},B5.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()},B5.load=function(){var e=this,t=e.cy.window(),n=function(e){return e.selected()},r=function(t,n,r,i){null==t&&(t=e.cy);for(var o=0;o<n.length;o++){var a=n[o];t.emit({originalEvent:r,type:a,position:i})}},i=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},o=function(t,n){var r=!0;if(e.cy.hasCompoundNodes()&&t&&t.pannable())for(var i=0;n&&i<n.length;i++){if((t=n[i]).isNode()&&t.isParent()&&!t.pannable()){r=!1;break}}else r=!0;return r},a=function(e){e[0]._private.rscratch.inDragLayer=!0},s=function(e){e[0]._private.rscratch.isGrabTarget=!0},l=function(e,t){var n=t.addToList;n.has(e)||!e.grabbable()||e.locked()||(n.merge(e),function(e){e[0]._private.grabbed=!0}(e))},u=function(t,n){n=n||{};var r=t.cy().hasCompoundNodes();n.inDragLayer&&(t.forEach(a),t.neighborhood().stdFilter(function(e){return!r||e.isEdge()}).forEach(a)),n.addToList&&t.forEach(function(e){l(e,n)}),function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var n=e.descendants();t.inDragLayer&&(n.forEach(a),n.connectedEdges().forEach(a)),t.addToList&&l(n,t)}}(t,n),d(t,{inDragLayer:n.inDragLayer}),e.updateCachedGrabbedEles()},c=u,h=function(t){t&&(e.getCachedZSortedEles().forEach(function(e){!function(e){e[0]._private.grabbed=!1}(e),function(e){e[0]._private.rscratch.inDragLayer=!1}(e),function(e){e[0]._private.rscratch.isGrabTarget=!1}(e)}),e.updateCachedGrabbedEles())},d=function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var n=e.ancestors().orphans();if(!n.same(e)){var r=n.descendants().spawnSelf().merge(n).unmerge(e).unmerge(e.descendants()),i=r.connectedEdges();t.inDragLayer&&(i.forEach(a),r.forEach(a)),t.addToList&&r.forEach(function(e){l(e,t)})}}},f=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},p="undefined"!=typeof MutationObserver,g="undefined"!=typeof ResizeObserver;p?(e.removeObserver=new MutationObserver(function(t){for(var n=0;n<t.length;n++){var r=t[n].removedNodes;if(r)for(var i=0;i<r.length;i++){if(r[i]===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(t){e.destroy()});var m=bW(function(){e.cy.resize()},100);p&&(e.styleObserver=new MutationObserver(m),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",m),g&&(e.resizeObserver=new ResizeObserver(m),e.resizeObserver.observe(e.container));var v=function(){e.invalidateContainerClientCoordsCache()};!function(e,t){for(;null!=e;)t(e),e=e.parentNode}(e.container,function(t){e.registerBinding(t,"transitionend",v),e.registerBinding(t,"animationend",v),e.registerBinding(t,"scroll",v)}),e.registerBinding(e.container,"contextmenu",function(e){e.preventDefault()});var y=function(t){for(var n=e.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],a=n[3],s=t.touches?t.touches:[t],l=!1,u=0;u<s.length;u++){var c=s[u];if(r<=c.clientX&&c.clientX<=r+o&&i<=c.clientY&&c.clientY<=i+a){l=!0;break}}if(!l)return!1;for(var h=e.container,d=t.target.parentNode,f=!1;d;){if(d===h){f=!0;break}d=d.parentNode}return!!f};e.registerBinding(e.container,"mousedown",function(t){if(y(t)&&(1!==e.hoverData.which||1===t.which)){t.preventDefault(),f(),e.hoverData.capture=!0,e.hoverData.which=t.which;var n=e.cy,i=[t.clientX,t.clientY],o=e.projectIntoViewport(i[0],i[1]),a=e.selection,l=e.findNearestElements(o[0],o[1],!0,!1),h=l[0],d=e.dragData.possibleDragElements;e.hoverData.mdownPos=o,e.hoverData.mdownGPos=i;var p=function(e){return{originalEvent:t,type:e,position:{x:o[0],y:o[1]}}};if(3==t.which){e.hoverData.cxtStarted=!0;var g={originalEvent:t,type:"cxttapstart",position:{x:o[0],y:o[1]}};h?(h.activate(),h.emit(g),e.hoverData.down=h):n.emit(g),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==t.which){if(h&&h.activate(),null!=h&&e.nodeIsGrabbable(h)){if(s(h),h.selected()){d=e.dragData.possibleDragElements=n.collection();var m=n.$(function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)});u(m,{addToList:d}),h.emit(p("grabon")),m.forEach(function(e){e.emit(p("grab"))})}else d=e.dragData.possibleDragElements=n.collection(),c(h,{addToList:d}),h.emit(p("grabon")).emit(p("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=h,e.hoverData.downs=l,e.hoverData.downTime=(new Date).getTime(),r(h,["mousedown","tapstart","vmousedown"],t,{x:o[0],y:o[1]}),null==h?(a[4]=1,e.data.bgActivePosistion={x:o[0],y:o[1]},e.redrawHint("select",!0),e.redraw()):h.pannable()&&(a[4]=1),e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var t=e.hoverData.down;t?t.emit(p("taphold")):n.emit(p("taphold"))}},e.tapholdDuration)}a[0]=a[2]=o[0],a[1]=a[3]=o[1]}},!1);var b,x,w,E=function(e){var t=e.getRootNode();if(t&&11===t.nodeType&&void 0!==t.host)return t}(e.container);e.registerBinding([t,E],"mousemove",function(t){if(e.hoverData.capture||y(t)){var n=!1,a=e.cy,s=a.zoom(),l=[t.clientX,t.clientY],c=e.projectIntoViewport(l[0],l[1]),d=e.hoverData.mdownPos,f=e.hoverData.mdownGPos,p=e.selection,g=null;e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.selecting||(g=e.findNearestElement(c[0],c[1],!0,!1));var m,v=e.hoverData.last,b=e.hoverData.down,x=[c[0]-p[2],c[1]-p[3]],w=e.dragData.possibleDragElements;if(f){var E=l[0]-f[0],T=E*E,_=l[1]-f[1],k=T+_*_;e.hoverData.isOverThresholdDrag=m=k>=e.desktopTapThreshold2}var A=i(t);m&&(e.hoverData.tapholdCancelled=!0);n=!0,r(g,["mousemove","vmousemove","tapdrag"],t,{x:c[0],y:c[1]});var S,N=function(e){return{originalEvent:t,type:e,position:{x:c[0],y:c[1]}}},M=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||a.emit(N("boxstart")),p[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(m){var C=N("cxtdrag");b?b.emit(C):a.emit(C),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&g===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit(N("cxtdragout")),e.hoverData.cxtOver=g,g&&g.emit(N("cxtdragover")))}}else if(e.hoverData.dragging){if(n=!0,a.panningEnabled()&&a.userPanningEnabled()){var I;if(e.hoverData.justStartedPan){var R=e.hoverData.mdownPos;I={x:(c[0]-R[0])*s,y:(c[1]-R[1])*s},e.hoverData.justStartedPan=!1}else I={x:x[0]*s,y:x[1]*s};a.panBy(I),a.emit(N("dragpan")),e.hoverData.dragged=!0}c=e.projectIntoViewport(t.clientX,t.clientY)}else if(1!=p[4]||null!=b&&!b.pannable()){if(b&&b.pannable()&&b.active()&&b.unactivate(),b&&b.grabbed()||g==v||(v&&r(v,["mouseout","tapdragout"],t,{x:c[0],y:c[1]}),g&&r(g,["mouseover","tapdragover"],t,{x:c[0],y:c[1]}),e.hoverData.last=g),b)if(m){if(a.boxSelectionEnabled()&&A)b&&b.grabbed()&&(h(w),b.emit(N("freeon")),w.emit(N("free")),e.dragData.didDrag&&(b.emit(N("dragfreeon")),w.emit(N("dragfree")))),M();else if(b&&b.grabbed()&&e.nodeIsDraggable(b)){var L=!e.dragData.didDrag;L&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||u(w,{inDragLayer:!0});var O={x:0,y:0};if(Fq(x[0])&&Fq(x[1])&&(O.x+=x[0],O.y+=x[1],L)){var D=e.hoverData.dragDelta;D&&Fq(D[0])&&Fq(D[1])&&(O.x+=D[0],O.y+=D[1])}e.hoverData.draggingEles=!0,w.silentShift(O).emit(N("position")).emit(N("drag")),e.redrawHint("drag",!0),e.redraw()}}else 0===(S=e.hoverData.dragDelta=e.hoverData.dragDelta||[]).length?(S.push(x[0]),S.push(x[1])):(S[0]+=x[0],S[1]+=x[1]);n=!0}else if(m){if(e.hoverData.dragging||!a.boxSelectionEnabled()||!A&&a.panningEnabled()&&a.userPanningEnabled()){if(!e.hoverData.selecting&&a.panningEnabled()&&a.userPanningEnabled()){o(b,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,p[4]=0,e.data.bgActivePosistion=CX(d),e.redrawHint("select",!0),e.redraw())}}else M();b&&b.pannable()&&b.active()&&b.unactivate()}return p[2]=c[0],p[3]=c[1],n?(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1):void 0}},!1),e.registerBinding(t,"mouseup",function(t){if((1!==e.hoverData.which||1===t.which||!e.hoverData.capture)&&e.hoverData.capture){e.hoverData.capture=!1;var o=e.cy,a=e.projectIntoViewport(t.clientX,t.clientY),s=e.selection,l=e.findNearestElement(a[0],a[1],!0,!1),u=e.dragData.possibleDragElements,c=e.hoverData.down,d=i(t);e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,c&&c.unactivate();var f=function(e){return{originalEvent:t,type:e,position:{x:a[0],y:a[1]}}};if(3===e.hoverData.which){var p=f("cxttapend");if(c?c.emit(p):o.emit(p),!e.hoverData.cxtDragged){var g=f("cxttap");c?c.emit(g):o.emit(g)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(r(l,["mouseup","tapend","vmouseup"],t,{x:a[0],y:a[1]}),e.dragData.didDrag||e.hoverData.dragged||e.hoverData.selecting||e.hoverData.isOverThresholdDrag||(r(c,["click","tap","vclick"],t,{x:a[0],y:a[1]}),x=!1,t.timeStamp-w<=o.multiClickDebounceTime()?(b&&clearTimeout(b),x=!0,w=null,r(c,["dblclick","dbltap","vdblclick"],t,{x:a[0],y:a[1]})):(b=setTimeout(function(){x||r(c,["oneclick","onetap","voneclick"],t,{x:a[0],y:a[1]})},o.multiClickDebounceTime()),w=t.timeStamp)),null!=c||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||i(t)||(o.$(n).unselect(["tapunselect"]),u.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=u=o.collection()),l!=c||e.dragData.didDrag||e.hoverData.selecting||null!=l&&l._private.selectable&&(e.hoverData.dragging||("additive"===o.selectionType()||d?l.selected()?l.unselect(["tapunselect"]):l.select(["tapselect"]):d||(o.$(n).unmerge(l).unselect(["tapunselect"]),l.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var m=o.collection(e.getAllInBox(s[0],s[1],s[2],s[3]));e.redrawHint("select",!0),m.length>0&&e.redrawHint("eles",!0),o.emit(f("boxend"));var v=function(e){return e.selectable()&&!e.selected()};"additive"===o.selectionType()||d||o.$(n).unmerge(m).unselect(),m.emit(f("box")).stdFilter(v).select().emit(f("boxselect")),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!s[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var y=c&&c.grabbed();h(u),y&&(c.emit(f("freeon")),u.emit(f("free")),e.dragData.didDrag&&(c.emit(f("dragfreeon")),u.emit(f("dragfree"))))}}s[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}},!1);var T,_,k,A,S,N,M,C,I,R,L,O,D,P,B=[],F=1e5,z=function(t){var n=!1,r=t.deltaY;if(null==r&&(null!=t.wheelDeltaY?r=t.wheelDeltaY/4:null!=t.wheelDelta&&(r=t.wheelDelta/4)),0!==r){if(null==T)if(B.length>=4){var i=B;if(T=function(e,t){for(var n=0;n<e.length;n++)if(e[n]%t!==0)return!1;return!0}(i,5),!T){var o=Math.abs(i[0]);T=function(e){for(var t=Math.abs(e[0]),n=1;n<e.length;n++)if(Math.abs(e[n])!==t)return!1;return!0}(i)&&o>5}if(T)for(var a=0;a<i.length;a++)F=Math.min(Math.abs(i[a]),F)}else B.push(r),n=!0;else T&&(F=Math.min(Math.abs(r),F));if(!e.scrollingPage){var s=e.cy,l=s.zoom(),u=s.pan(),c=e.projectIntoViewport(t.clientX,t.clientY),h=[c[0]*l+u.x,c[1]*l+u.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||0!==e.selection[4])t.preventDefault();else if(s.panningEnabled()&&s.userPanningEnabled()&&s.zoomingEnabled()&&s.userZoomingEnabled()){var d;t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150),n&&Math.abs(r)>5&&(r=5*LX(r)),d=r/-250,T&&(d/=F,d*=3),d*=e.wheelSensitivity,1===t.deltaMode&&(d*=33);var f=s.zoom()*Math.pow(10,d);"gesturechange"===t.type&&(f=e.gestureStartZoom*t.scale),s.zoom({level:f,renderedPosition:{x:h[0],y:h[1]}}),s.emit({type:"gesturechange"===t.type?"pinchzoom":"scrollzoom",originalEvent:t,position:{x:c[0],y:c[1]}})}}}};e.registerBinding(e.container,"wheel",z,!0),e.registerBinding(t,"scroll",function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"gesturestart",function(t){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||t.preventDefault()},!0),e.registerBinding(e.container,"gesturechange",function(t){e.hasTouchStarted||z(t)},!0),e.registerBinding(e.container,"mouseout",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseout",position:{x:n[0],y:n[1]}})},!1),e.registerBinding(e.container,"mouseover",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseover",position:{x:n[0],y:n[1]}})},!1);var U,G,V,j,H,$,Y,q=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},W=function(e,t,n,r){return(n-e)*(n-e)+(r-t)*(r-t)};if(e.registerBinding(e.container,"touchstart",U=function(t){if(e.hasTouchStarted=!0,y(t)){f(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var n=e.cy,i=e.touchData.now,o=e.touchData.earlier;if(t.touches[0]){var a=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);i[0]=a[0],i[1]=a[1]}if(t.touches[1]){a=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);i[2]=a[0],i[3]=a[1]}if(t.touches[2]){a=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);i[4]=a[0],i[5]=a[1]}var l=function(e){return{originalEvent:t,type:e,position:{x:i[0],y:i[1]}}};if(t.touches[1]){e.touchData.singleTouchMoved=!0,h(e.dragData.touchDragEles);var d=e.findContainerClientCoords();R=d[0],L=d[1],O=d[2],D=d[3],_=t.touches[0].clientX-R,k=t.touches[0].clientY-L,A=t.touches[1].clientX-R,S=t.touches[1].clientY-L,P=0<=_&&_<=O&&0<=A&&A<=O&&0<=k&&k<=D&&0<=S&&S<=D;var p=n.pan(),g=n.zoom();N=q(_,k,A,S),M=W(_,k,A,S),I=[((C=[(_+A)/2,(k+S)/2])[0]-p.x)/g,(C[1]-p.y)/g];if(M<4e4&&!t.touches[2]){var m=e.findNearestElement(i[0],i[1],!0,!0),v=e.findNearestElement(i[2],i[3],!0,!0);return m&&m.isNode()?(m.activate().emit(l("cxttapstart")),e.touchData.start=m):v&&v.isNode()?(v.activate().emit(l("cxttapstart")),e.touchData.start=v):n.emit(l("cxttapstart")),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(t.touches[2])n.boxSelectionEnabled()&&t.preventDefault();else if(t.touches[1]);else if(t.touches[0]){var b=e.findNearestElements(i[0],i[1],!0,!0),x=b[0];if(null!=x&&(x.activate(),e.touchData.start=x,e.touchData.starts=b,e.nodeIsGrabbable(x))){var w=e.dragData.touchDragEles=n.collection(),E=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),x.selected()?(E=n.$(function(t){return t.selected()&&e.nodeIsGrabbable(t)}),u(E,{addToList:w})):c(x,{addToList:w}),s(x),x.emit(l("grabon")),E?E.forEach(function(e){e.emit(l("grab"))}):x.emit(l("grab"))}r(x,["touchstart","tapstart","vmousedown"],t,{x:i[0],y:i[1]}),null==x&&(e.data.bgActivePosistion={x:a[0],y:a[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){!1!==e.touchData.singleTouchMoved||e.pinching||e.touchData.selecting||r(e.touchData.start,["taphold"],t,{x:i[0],y:i[1]})},e.tapholdDuration)}if(t.touches.length>=1){for(var T=e.touchData.startPosition=[null,null,null,null,null,null],B=0;B<i.length;B++)T[B]=o[B]=i[B];var F=t.touches[0];e.touchData.startGPosition=[F.clientX,F.clientY]}}},!1),e.registerBinding(t,"touchmove",G=function(t){var n=e.touchData.capture;if(n||y(t)){var i=e.selection,a=e.cy,s=e.touchData.now,l=e.touchData.earlier,c=a.zoom();if(t.touches[0]){var d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=d[0],s[1]=d[1]}if(t.touches[1]){d=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=d[0],s[3]=d[1]}if(t.touches[2]){d=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=d[0],s[5]=d[1]}var f,p=function(e){return{originalEvent:t,type:e,position:{x:s[0],y:s[1]}}},g=e.touchData.startGPosition;if(n&&t.touches[0]&&g){for(var m=[],v=0;v<s.length;v++)m[v]=s[v]-l[v];var b=t.touches[0].clientX-g[0],x=b*b,w=t.touches[0].clientY-g[1];f=x+w*w>=e.touchTapThreshold2}if(n&&e.touchData.cxt){t.preventDefault();var E=t.touches[0].clientX-R,T=t.touches[0].clientY-L,C=t.touches[1].clientX-R,O=t.touches[1].clientY-L,D=W(E,T,C,O);if(D/M>=2.25||D>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var B=p("cxttapend");e.touchData.start?(e.touchData.start.unactivate().emit(B),e.touchData.start=null):a.emit(B)}}if(n&&e.touchData.cxt){B=p("cxtdrag");e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(B):a.emit(B),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var F=e.findNearestElement(s[0],s[1],!0,!0);e.touchData.cxtOver&&F===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.emit(p("cxtdragout")),e.touchData.cxtOver=F,F&&F.emit(p("cxtdragover")))}else if(n&&t.touches[2]&&a.boxSelectionEnabled())t.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||a.emit(p("boxstart")),e.touchData.selecting=!0,e.touchData.didSelect=!0,i[4]=1,i&&0!==i.length&&void 0!==i[0]?(i[2]=(s[0]+s[2]+s[4])/3,i[3]=(s[1]+s[3]+s[5])/3):(i[0]=(s[0]+s[2]+s[4])/3,i[1]=(s[1]+s[3]+s[5])/3,i[2]=(s[0]+s[2]+s[4])/3+1,i[3]=(s[1]+s[3]+s[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(n&&t.touches[1]&&!e.touchData.didSelect&&a.zoomingEnabled()&&a.panningEnabled()&&a.userZoomingEnabled()&&a.userPanningEnabled()){if(t.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),ee=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var z=0;z<ee.length;z++){var U=ee[z]._private;U.grabbed=!1,U.rscratch.inDragLayer=!1}}var G=e.touchData.start,V=(E=t.touches[0].clientX-R,T=t.touches[0].clientY-L,C=t.touches[1].clientX-R,O=t.touches[1].clientY-L,q(E,T,C,O)),j=V/N;if(P){var H=(E-_+(C-A))/2,$=(T-k+(O-S))/2,Y=a.zoom(),X=Y*j,K=a.pan(),Z=I[0]*Y+K.x,Q=I[1]*Y+K.y,J={x:-X/Y*(Z-K.x-H)+Z,y:-X/Y*(Q-K.y-$)+Q};if(G&&G.active()){var ee=e.dragData.touchDragEles;h(ee),e.redrawHint("drag",!0),e.redrawHint("eles",!0),G.unactivate().emit(p("freeon")),ee.emit(p("free")),e.dragData.didDrag&&(G.emit(p("dragfreeon")),ee.emit(p("dragfree")))}a.viewport({zoom:X,pan:J,cancelOnFailedZoom:!0}),a.emit(p("pinchzoom")),N=V,_=E,k=T,A=C,S=O,e.pinching=!0}if(t.touches[0]){d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=d[0],s[1]=d[1]}if(t.touches[1]){d=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=d[0],s[3]=d[1]}if(t.touches[2]){d=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=d[0],s[5]=d[1]}}else if(t.touches[0]&&!e.touchData.didSelect){var te=e.touchData.start,ne=e.touchData.last;if(e.hoverData.draggingEles||e.swipePanning||(F=e.findNearestElement(s[0],s[1],!0,!0)),n&&null!=te&&t.preventDefault(),n&&null!=te&&e.nodeIsDraggable(te))if(f){ee=e.dragData.touchDragEles;var re=!e.dragData.didDrag;re&&u(ee,{inDragLayer:!0}),e.dragData.didDrag=!0;var ie={x:0,y:0};if(Fq(m[0])&&Fq(m[1]))if(ie.x+=m[0],ie.y+=m[1],re)e.redrawHint("eles",!0),(oe=e.touchData.dragDelta)&&Fq(oe[0])&&Fq(oe[1])&&(ie.x+=oe[0],ie.y+=oe[1]);e.hoverData.draggingEles=!0,ee.silentShift(ie).emit(p("position")).emit(p("drag")),e.redrawHint("drag",!0),e.touchData.startPosition[0]==l[0]&&e.touchData.startPosition[1]==l[1]&&e.redrawHint("eles",!0),e.redraw()}else{var oe;0===(oe=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(oe.push(m[0]),oe.push(m[1])):(oe[0]+=m[0],oe[1]+=m[1])}if(r(te||F,["touchmove","tapdrag","vmousemove"],t,{x:s[0],y:s[1]}),te&&te.grabbed()||F==ne||(ne&&ne.emit(p("tapdragout")),F&&F.emit(p("tapdragover"))),e.touchData.last=F,n)for(z=0;z<s.length;z++)s[z]&&e.touchData.startPosition[z]&&f&&(e.touchData.singleTouchMoved=!0);if(n&&(null==te||te.pannable())&&a.panningEnabled()&&a.userPanningEnabled()){o(te,e.touchData.starts)&&(t.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=CX(e.touchData.startPosition)),e.swipePanning?(a.panBy({x:m[0]*c,y:m[1]*c}),a.emit(p("dragpan"))):f&&(e.swipePanning=!0,a.panBy({x:b*c,y:w*c}),a.emit(p("dragpan")),te&&(te.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=d[0],s[1]=d[1]}}for(v=0;v<s.length;v++)l[v]=s[v];n&&t.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1),e.registerBinding(t,"touchcancel",V=function(t){var n=e.touchData.start;e.touchData.capture=!1,n&&n.unactivate()}),e.registerBinding(t,"touchend",j=function(t){var i=e.touchData.start;if(e.touchData.capture){0===t.touches.length&&(e.touchData.capture=!1),t.preventDefault();var o=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var a=e.cy,s=a.zoom(),l=e.touchData.now,u=e.touchData.earlier;if(t.touches[0]){var c=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);l[0]=c[0],l[1]=c[1]}if(t.touches[1]){c=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);l[2]=c[0],l[3]=c[1]}if(t.touches[2]){c=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);l[4]=c[0],l[5]=c[1]}var d,f=function(e){return{originalEvent:t,type:e,position:{x:l[0],y:l[1]}}};if(i&&i.unactivate(),e.touchData.cxt){if(d=f("cxttapend"),i?i.emit(d):a.emit(d),!e.touchData.cxtDragged){var p=f("cxttap");i?i.emit(p):a.emit(p)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!t.touches[2]&&a.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var g=a.collection(e.getAllInBox(o[0],o[1],o[2],o[3]));o[0]=void 0,o[1]=void 0,o[2]=void 0,o[3]=void 0,o[4]=0,e.redrawHint("select",!0),a.emit(f("boxend"));g.emit(f("box")).stdFilter(function(e){return e.selectable()&&!e.selected()}).select().emit(f("boxselect")),g.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(null!=i&&i.unactivate(),t.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(t.touches[1]);else if(t.touches[0]);else if(!t.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var m=e.dragData.touchDragEles;if(null!=i){var v=i._private.grabbed;h(m),e.redrawHint("drag",!0),e.redrawHint("eles",!0),v&&(i.emit(f("freeon")),m.emit(f("free")),e.dragData.didDrag&&(i.emit(f("dragfreeon")),m.emit(f("dragfree")))),r(i,["touchend","tapend","vmouseup","tapdragout"],t,{x:l[0],y:l[1]}),i.unactivate(),e.touchData.start=null}else{var y=e.findNearestElement(l[0],l[1],!0,!0);r(y,["touchend","tapend","vmouseup","tapdragout"],t,{x:l[0],y:l[1]})}var b=e.touchData.startPosition[0]-l[0],x=b*b,w=e.touchData.startPosition[1]-l[1],E=(x+w*w)*s*s;e.touchData.singleTouchMoved||(i||a.$(":selected").unselect(["tapunselect"]),r(i,["tap","vclick"],t,{x:l[0],y:l[1]}),H=!1,t.timeStamp-Y<=a.multiClickDebounceTime()?($&&clearTimeout($),H=!0,Y=null,r(i,["dbltap","vdblclick"],t,{x:l[0],y:l[1]})):($=setTimeout(function(){H||r(i,["onetap","voneclick"],t,{x:l[0],y:l[1]})},a.multiClickDebounceTime()),Y=t.timeStamp)),null!=i&&!e.dragData.didDrag&&i._private.selectable&&E<e.touchTapThreshold2&&!e.pinching&&("single"===a.selectionType()?(a.$(n).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"])):i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var T=0;T<l.length;T++)u[T]=l[T];e.dragData.didDrag=!1,0===t.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),t.touches.length<2&&(1===t.touches.length&&(e.touchData.startGPosition=[t.touches[0].clientX,t.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var X=[],K=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},Z=function(e){X.push(function(e){return{event:e,touch:K(e)}}(e))},Q=function(e){for(var t=0;t<X.length;t++){if(X[t].event.pointerId===e.pointerId)return void X.splice(t,1)}},J=function(e){e.touches=X.map(function(e){return e.touch})},ee=function(e){return"mouse"===e.pointerType||4===e.pointerType};e.registerBinding(e.container,"pointerdown",function(e){ee(e)||(e.preventDefault(),Z(e),J(e),U(e))}),e.registerBinding(e.container,"pointerup",function(e){ee(e)||(Q(e),J(e),j(e))}),e.registerBinding(e.container,"pointercancel",function(e){ee(e)||(Q(e),J(e),V())}),e.registerBinding(e.container,"pointermove",function(e){ee(e)||(e.preventDefault(),function(e){var t=X.filter(function(t){return t.event.pointerId===e.pointerId})[0];t.event=e,t.touch=K(e)}(e),J(e),G(e))})}};var F5={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(e,t,n,r,i,o){this.renderer.nodeShapeImpl("polygon",e,t,n,r,i,this.points)},intersectLine:function(e,t,n,r,i,o,a,s){return dK(i,o,this.points,e,t,n/2,r/2,a)},checkPoint:function(e,t,n,r,i,o,a,s){return iK(e,t,this.points,o,a,r,i,[0,-1],n)},hasMiterBounds:"rectangle"!==e,miterBounds:function(e,t,n,r,i,o){return ZX(this.points,e,t,n,r,i)}}}};F5.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,r,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,o,a,s){return function(e,t,n,r,i,o){var a=n-e,s=r-t;a/=i,s/=o;var l=Math.sqrt(a*a+s*s),u=l-1;if(u<0)return[];var c=u/l;return[(n-e)*c+e,(r-t)*c+t]}(i,o,e,t,n/2+a,r/2+a)},checkPoint:function(e,t,n,r,i,o,a,s){return sK(e,t,r,i,o,a,n)}}},F5.generateRoundPolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function(e,n,r,i,o,a,s){if(void 0!==a[s]&&a[s+"-cx"]===e&&a[s+"-cy"]===n)return a[s];a[s]=new Array(t.length/2),a[s+"-cx"]=e,a[s+"-cy"]=n;var l=r/2,u=i/2;o="auto"===o?yK(r,i):o;for(var c=new Array(t.length/2),h=0;h<t.length/2;h++)c[h]={x:e+l*t[2*h],y:n+u*t[2*h+1]};var d,f,p,g,m=c.length;for(f=c[m-1],d=0;d<m;d++)p=c[d%m],g=c[(d+1)%m],a[s][d]=x5(f,p,g,o),f=p,p=g;return a[s]},draw:function(e,t,n,r,i,o,a){this.renderer.nodeShapeImpl("round-polygon",e,t,n,r,i,this.points,this.getOrCreateCorners(t,n,r,i,o,a,"drawCorners"))},intersectLine:function(e,t,n,r,i,o,a,s,l){return function(e,t,n,r,i,o,a,s,l){var u,c=[],h=new Array(2*n.length);l.forEach(function(n,o){0===o?(h[h.length-2]=n.startX,h[h.length-1]=n.startY):(h[4*o-2]=n.startX,h[4*o-1]=n.startY),h[4*o]=n.stopX,h[4*o+1]=n.stopY,0!==(u=lK(e,t,r,i,n.cx,n.cy,n.radius)).length&&c.push(u[0],u[1])});for(var d=0;d<h.length/4;d++)0!==(u=cK(e,t,r,i,h[4*d],h[4*d+1],h[4*d+2],h[4*d+3],!1)).length&&c.push(u[0],u[1]);if(c.length>2){for(var f=[c[0],c[1]],p=Math.pow(f[0]-e,2)+Math.pow(f[1]-t,2),g=1;g<c.length/2;g++){var m=Math.pow(c[2*g]-e,2)+Math.pow(c[2*g+1]-t,2);m<=p&&(f[0]=c[2*g],f[1]=c[2*g+1],p=m)}return f}return c}(i,o,this.points,e,t,0,0,0,this.getOrCreateCorners(e,t,n,r,s,l,"corners"))},checkPoint:function(e,t,n,r,i,o,a,s,l){return function(e,t,n,r,i,o,a,s){for(var l=new Array(2*n.length),u=0;u<s.length;u++){var c=s[u];if(l[4*u+0]=c.startX,l[4*u+1]=c.startY,l[4*u+2]=c.stopX,l[4*u+3]=c.stopY,Math.pow(c.cx-e,2)+Math.pow(c.cy-t,2)<=Math.pow(c.radius,2))return!0}return rK(e,t,l)}(e,t,this.points,0,0,0,0,this.getOrCreateCorners(o,a,r,i,s,l,"corners"))}}},F5.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:pK(4,0),draw:function(e,t,n,r,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i,this.points,o)},intersectLine:function(e,t,n,r,i,o,a,s){return QX(i,o,e,t,n,r,a,s)},checkPoint:function(e,t,n,r,i,o,a,s){var l=r/2,u=i/2;s="auto"===s?vK(r,i):s;var c=2*(s=Math.min(l,u,s));return!!iK(e,t,this.points,o,a,r,i-c,[0,-1],n)||(!!iK(e,t,this.points,o,a,r-c,i,[0,-1],n)||(!!sK(e,t,c,c,o-l+s,a-u+s,n)||(!!sK(e,t,c,c,o+l-s,a-u+s,n)||(!!sK(e,t,c,c,o+l-s,a+u-s,n)||!!sK(e,t,c,c,o-l+s,a+u-s,n)))))}}},F5.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:pK(4,0),draw:function(e,t,n,r,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i,null,o)},generateCutTrianglePts:function(e,t,n,r,i){var o="auto"===i?this.cornerLength:i,a=t/2,s=e/2,l=n-s,u=n+s,c=r-a,h=r+a;return{topLeft:[l,c+o,l+o,c,l+o,c+o],topRight:[u-o,c,u,c+o,u-o,c+o],bottomRight:[u,h-o,u-o,h,u-o,h-o],bottomLeft:[l+o,h,l,h-o,l+o,h-o]}},intersectLine:function(e,t,n,r,i,o,a,s){var l=this.generateCutTrianglePts(n+2*a,r+2*a,e,t,s),u=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return dK(i,o,u,e,t)},checkPoint:function(e,t,n,r,i,o,a,s){var l="auto"===s?this.cornerLength:s;if(iK(e,t,this.points,o,a,r,i-2*l,[0,-1],n))return!0;if(iK(e,t,this.points,o,a,r-2*l,i,[0,-1],n))return!0;var u=this.generateCutTrianglePts(r,i,o,a);return rK(e,t,u.topLeft)||rK(e,t,u.topRight)||rK(e,t,u.bottomRight)||rK(e,t,u.bottomLeft)}}},F5.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:pK(4,0),draw:function(e,t,n,r,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,o,a,s){var l=this.generateBarrelBezierPts(n+2*a,r+2*a,e,t),u=function(e){var t=FX({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),n=FX({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),r=FX({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,n.x,n.y,r.x,r.y,e[4],e[5]]},c=[].concat(u(l.topLeft),u(l.topRight),u(l.bottomRight),u(l.bottomLeft));return dK(i,o,c,e,t)},generateBarrelBezierPts:function(e,t,n,r){var i=t/2,o=e/2,a=n-o,s=n+o,l=r-i,u=r+i,c=bK(e,t),h=c.heightOffset,d=c.widthOffset,f=c.ctrlPtOffsetPct*e,p={topLeft:[a,l+h,a+f,l,a+d,l],topRight:[s-d,l,s-f,l,s,l+h],bottomRight:[s,u-h,s-f,u,s-d,u],bottomLeft:[a+d,u,a+f,u,a,u-h]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,t,n,r,i,o,a,s){var l=bK(r,i),u=l.heightOffset,c=l.widthOffset;if(iK(e,t,this.points,o,a,r,i-2*u,[0,-1],n))return!0;if(iK(e,t,this.points,o,a,r-2*c,i,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(r,i,o,a),d=function(e,t,n){var r,i,o=n[4],a=n[2],s=n[0],l=n[5],u=n[1],c=Math.min(o,s),h=Math.max(o,s),d=Math.min(l,u),f=Math.max(l,u);if(c<=e&&e<=h&&d<=t&&t<=f){var p=[(r=o)-2*(i=a)+s,2*(i-r),r],g=function(e,t,n,r){var i=t*t-4*e*(n-=r);if(i<0)return[];var o=Math.sqrt(i),a=2*e;return[(-t+o)/a,(-t-o)/a]}(p[0],p[1],p[2],e).filter(function(e){return 0<=e&&e<=1});if(g.length>0)return g[0]}return null},f=Object.keys(h),p=0;p<f.length;p++){var g=h[f[p]],m=d(e,t,g);if(null!=m){var v=g[5],y=g[3],b=g[1],x=BX(v,y,b,m);if(g.isTop&&x<=t)return!0;if(g.isBottom&&t<=x)return!0}}return!1}}},F5.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:pK(4,0),draw:function(e,t,n,r,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i,this.points,o)},intersectLine:function(e,t,n,r,i,o,a,s){var l=t-(r/2+a),u=cK(i,o,e,t,e-(n/2+a),l,e+(n/2+a),l,!1);return u.length>0?u:QX(i,o,e,t,n,r,a,s)},checkPoint:function(e,t,n,r,i,o,a,s){var l=2*(s="auto"===s?vK(r,i):s);if(iK(e,t,this.points,o,a,r,i-l,[0,-1],n))return!0;if(iK(e,t,this.points,o,a,r-l,i,[0,-1],n))return!0;var u=r/2+2*n,c=i/2+2*n;return!!rK(e,t,[o-u,a-c,o-u,a,o+u,a,o+u,a-c])||(!!sK(e,t,l,l,o+r/2-s,a+i/2-s,n)||!!sK(e,t,l,l,o-r/2+s,a+i/2-s,n))}}},F5.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",pK(3,0)),this.generateRoundPolygon("round-triangle",pK(3,0)),this.generatePolygon("rectangle",pK(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",pK(5,0)),this.generateRoundPolygon("round-pentagon",pK(5,0)),this.generatePolygon("hexagon",pK(6,0)),this.generateRoundPolygon("round-hexagon",pK(6,0)),this.generatePolygon("heptagon",pK(7,0)),this.generateRoundPolygon("round-heptagon",pK(7,0)),this.generatePolygon("octagon",pK(8,0)),this.generateRoundPolygon("round-octagon",pK(8,0));var r=new Array(20),i=mK(5,0),o=mK(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[2*s]*=a,o[2*s+1]*=a;for(s=0;s<5;s++)r[4*s]=i[2*s],r[4*s+1]=i[2*s+1],r[4*s+2]=o[2*s],r[4*s+3]=o[2*s+1];r=gK(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),e.makePolygon=function(e){var n,r="polygon-"+e.join("$");return(n=this[r])?n:t.generatePolygon(r,e)}};var z5={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||XW();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&jW("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort(function(e,t){return t.priority-e.priority})}}},U5=function(e,t,n){for(var r=e.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(t,n)};z5.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var n=function(r){if(!e.destroyed){if(t.batching());else if(e.requestedFrame&&!e.skipFrame){U5(e,!0,r);var i=_W();e.render(e.renderOptions);var o=e.lastDrawTime=_W();void 0===e.averageRedrawTime&&(e.averageRedrawTime=o-i),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var a=o-i;e.redrawTotalTime+=a,e.lastRedrawTime=a,e.averageRedrawTime=e.averageRedrawTime/2+a/2,e.requestedFrame=!1}else U5(e,!1,r);e.skipFrame=!1,TW(n)}};TW(n)}};var G5=function(e){this.init(e)},V5=G5.prototype;V5.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],V5.init=function(e){var t=this;t.options=e,t.cy=e.cy;var n=t.container=e.cy.container(),r=t.cy.window();if(r){var i=r.document,o=i.head,a="__________cytoscape_stylesheet",s="__________cytoscape_container",l=null!=i.getElementById(a);if(n.className.indexOf(s)<0&&(n.className=(n.className||"")+" "+s),!l){var u=i.createElement("style");u.id=a,u.textContent="."+s+" { position: relative; }",o.insertBefore(u,o.children[0])}"static"===r.getComputedStyle(n).getPropertyValue("position")&&$W()}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.webgl=e.webgl,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=Fq(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},V5.notify=function(e,t){var n=this,r=n.cy;this.destroyed||("init"!==e?"destroy"!==e?(("add"===e||"remove"===e||"move"===e&&r.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&n.invalidateCachedZSortedEles(),"viewport"===e&&n.redrawHint("select",!0),"gc"===e&&n.redrawHint("gc",!0),"load"!==e&&"resize"!==e&&"mount"!==e||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},V5.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch(LY){}},V5.isHeadless=function(){return!1},[X4,D5,P5,B5,F5,z5].forEach(function(e){oW(V5,e)});var j5=1e3/60,H5=function(e){return function(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var r=bW(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),i=e.priority||VW;n.beforeRender(function(i,o){var a=_W(),s=n.averageRedrawTime,l=n.lastRedrawTime,u=[],c=n.cy.extent(),h=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var d=_W(),f=d-a,p=d-o;if(l<j5){var g=j5-(i?s:0);if(p>=e.deqFastCost*g)break}else if(i){if(f>=e.deqCost*l||f>=e.deqAvgCost*s)break}else if(p>=e.deqNoDrawCost*j5)break;var m=e.deq(t,h,c);if(!(m.length>0))break;for(var v=0;v<m.length;v++)u.push(m[v])}u.length>0&&(e.onDeqd(t,u),!i&&e.shouldRedraw(t,u,h,c)&&r())},i(t))}}},$5=function(){return $Y(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:UW;HY(this,e),this.idsByKey=new tX,this.keyForId=new tX,this.cachesByLvl=new tX,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=n},[{key:"getIdsFor",value:function(e){null==e&&jW("Can not get id list for null key");var t=this.idsByKey,n=this.idsByKey.get(e);return n||(n=new rX,t.set(e,n)),n}},{key:"addIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).add(t)}},{key:"deleteIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).delete(t)}},{key:"getNumberOfIdsForKey",value:function(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function(e){var t=e.id(),n=this.keyForId.get(t),r=this.getKey(e);this.deleteIdForKey(n,t),this.addIdForKey(r,t),this.keyForId.set(t,r)}},{key:"deleteKeyMappingFor",value:function(e){var t=e.id(),n=this.keyForId.get(t);this.deleteIdForKey(n,t),this.keyForId.delete(t)}},{key:"keyHasChangedFor",value:function(e){var t=e.id();return this.keyForId.get(t)!==this.getKey(e)}},{key:"isInvalid",value:function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function(e){var t=this.cachesByLvl,n=this.lvls,r=t.get(e);return r||(r=new tX,t.set(e,r),n.push(e)),r}},{key:"getCache",value:function(e,t){return this.getCachesAt(t).get(e)}},{key:"get",value:function(e,t){var n=this.getKey(e),r=this.getCache(n,t);return null!=r&&this.updateKeyMappingFor(e),r}},{key:"getForCachedKey",value:function(e,t){var n=this.keyForId.get(e.id());return this.getCache(n,t)}},{key:"hasCache",value:function(e,t){return this.getCachesAt(t).has(e)}},{key:"has",value:function(e,t){var n=this.getKey(e);return this.hasCache(n,t)}},{key:"setCache",value:function(e,t,n){n.key=e,this.getCachesAt(t).set(e,n)}},{key:"set",value:function(e,t,n){var r=this.getKey(e);this.setCache(r,t,n),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function(e,t){this.getCachesAt(t).delete(e)}},{key:"delete",value:function(e,t){var n=this.getKey(e);this.deleteCache(n,t)}},{key:"invalidateKey",value:function(e){var t=this;this.lvls.forEach(function(n){return t.deleteCache(e,n)})}},{key:"invalidate",value:function(e){var t=e.id(),n=this.keyForId.get(t);this.deleteKeyMappingFor(e);var r=this.doesEleInvalidateKey(e);return r&&this.invalidateKey(n),r||0===this.getNumberOfIdsForKey(n)}}])}(),Y5=7.99,q5={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},W5=KW({getKey:null,doesEleInvalidateKey:UW,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:zW,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),X5=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var r=W5(t);oW(n,r),n.lookup=new $5(r.getKey,r.doesEleInvalidateKey),n.setupDequeueing()},K5=X5.prototype;K5.reasons=q5,K5.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]},K5.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},K5.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new pX(function(e,t){return t.reqs-e.reqs})},K5.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},K5.getElement=function(e,t,n,r,i){var o=this,a=this.renderer,s=a.cy.zoom(),l=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed())return null;if(!o.allowEdgeTxrCaching&&e.isEdge()||!o.allowParentTxrCaching&&e.isParent())return null;if(null==r&&(r=Math.ceil(RX(s*n))),r<-4)r=-4;else if(s>=7.99||r>3)return null;var u=Math.pow(2,r),c=t.h*u,h=t.w*u,d=a.eleTextBiggerThanMin(e,u);if(!this.isVisible(e,d))return null;var f,p=l.get(e,r);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;if(f=c<=25?25:c<=50?50:50*Math.ceil(c/50),c>1024||h>1024)return null;var g=o.getTextureQueue(f),m=g[g.length-2],v=function(){return o.recycleTexture(f,h)||o.addTexture(f,h)};m||(m=g[g.length-1]),m||(m=v()),m.width-m.usedWidth<h&&(m=v());for(var y,b=function(e){return e&&e.scaledLabelShown===d},x=i&&i===q5.dequeue,w=i&&i===q5.highQuality,E=i&&i===q5.downscale,T=r+1;T<=3;T++){var _=l.get(e,T);if(_){y=_;break}}var k=y&&y.level===r+1?y:null,A=function(){m.context.drawImage(k.texture.canvas,k.x,0,k.width,k.height,m.usedWidth,0,h,c)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,h,f),b(k))A();else if(b(y)){if(!w)return o.queueElement(e,y.level-1),y;for(var S=y.level;S>r;S--)k=o.getElement(e,t,n,S,q5.downscale);A()}else{var N;if(!x&&!w&&!E)for(var M=r-1;M>=-4;M--){var C=l.get(e,M);if(C){N=C;break}}if(b(N))return o.queueElement(e,r),N;m.context.translate(m.usedWidth,0),m.context.scale(u,u),this.drawElement(m.context,e,t,d,!1),m.context.scale(1/u,1/u),m.context.translate(-m.usedWidth,0)}return p={x:m.usedWidth,texture:m,level:r,scale:u,width:h,height:c,scaledLabelShown:d},m.usedWidth+=Math.ceil(h+8),m.eleCaches.push(p),l.set(e,r,p),o.checkTextureFullness(m),p},K5.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},K5.invalidateElement=function(e){var t=this,n=t.lookup,r=[];if(n.isInvalid(e)){for(var i=-4;i<=3;i++){var o=n.getForCachedKey(e,i);o&&r.push(o)}if(n.invalidate(e))for(var a=0;a<r.length;a++){var s=r[a],l=s.texture;l.invalidatedWidth+=s.width,s.invalidated=!0,t.checkTextureUtility(l)}t.removeFromQueue(e)}},K5.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},K5.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?ZW(t,e):e.fullnessChecks++},K5.retireTexture=function(e){var t=e.height,n=this.getTextureQueue(t),r=this.lookup;ZW(n,e),e.retired=!0;for(var i=e.eleCaches,o=0;o<i.length;o++){var a=i[o];r.deleteCache(a.key,a.level)}QW(i),this.getRetiredTextureQueue(t).push(e)},K5.addTexture=function(e,t){var n={};return this.getTextureQueue(e).push(n),n.eleCaches=[],n.height=e,n.width=Math.max(1024,t),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},K5.recycleTexture=function(e,t){for(var n=this.getTextureQueue(e),r=this.getRetiredTextureQueue(e),i=0;i<r.length;i++){var o=r[i];if(o.width>=t)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,QW(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),ZW(r,o),n.push(o),o}},K5.queueElement=function(e,t){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),i=this.getKey(e),o=r[i];if(o)o.level=Math.max(o.level,t),o.eles.merge(e),o.reqs++,n.updateItem(o);else{var a={eles:e.spawn().merge(e),level:t,reqs:1,key:i};n.push(a),r[i]=a}},K5.dequeue=function(e){for(var t=this,n=t.getElementQueue(),r=t.getElementKeyToQueue(),i=[],o=t.lookup,a=0;a<1&&n.size()>0;a++){var s=n.pop(),l=s.key,u=s.eles[0],c=o.hasCache(u,s.level);if(r[l]=null,!c){i.push(s);var h=t.getBoundingBox(u);t.getElement(u,h,e,s.level,q5.dequeue)}}return i},K5.removeFromQueue=function(e){var t=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(e),i=n[r];null!=i&&(1===i.eles.length?(i.reqs=FW,t.updateItem(i),t.pop(),n[r]=null):i.eles.unmerge(e))},K5.onDequeue=function(e){this.onDequeues.push(e)},K5.offDequeue=function(e){ZW(this.onDequeues,e)},K5.setupDequeueing=H5({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){(0,e.onDequeues[n])(t)}},shouldRedraw:function(e,t,n,r){for(var i=0;i<t.length;i++)for(var o=t[i].eles,a=0;a<o.length;a++){var s=o[a].boundingBox();if(YX(s,r))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var Z5=function(e){var t=this,n=t.renderer=e,r=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=_W()-500,t.skipping=!1,t.eleTxrDeqs=r.collection(),t.scheduleElementRefinement=bW(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},50),n.beforeRender(function(e,n){n-t.lastInvalidationTime<=250?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);t.layersQueue=new pX(function(e,t){return t.reqs-e.reqs}),t.setupDequeueing()},Q5=Z5.prototype,J5=0,e3=Math.pow(2,53)-1;Q5.makeLayer=function(e,t){var n=Math.pow(2,t),r=Math.ceil(e.w*n),i=Math.ceil(e.h*n),o=this.renderer.makeOffscreenCanvas(r,i),a={id:J5=++J5%e3,bb:e,level:t,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,l=-a.bb.x1,u=-a.bb.y1;return s.scale(n,n),s.translate(l,u),a},Q5.getLayers=function(e,t,n){var r=this,i=r.renderer.cy.zoom(),o=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(RX(i*t)))<-4)n=-4;else if(i>=3.99||n>2)return null;r.validateLayersElesOrdering(n,e);var a,s,l=r.layersByLevel,u=Math.pow(2,n),c=l[n]=l[n]||[];if(r.levelIsComplete(n,e))return c;!function(){var t=function(t){if(r.validateLayersElesOrdering(t,e),r.levelIsComplete(t,e))return s=l[t],!0},i=function(e){if(!s)for(var r=n+e;-4<=r&&r<=2&&!t(r);r+=e);};i(1),i(-1);for(var o=c.length-1;o>=0;o--){var a=c[o];a.invalid&&ZW(c,a)}}();var h=function(t){var i=(t=t||{}).after;!function(){if(!a){a=UX();for(var t=0;t<e.length;t++)GX(a,e[t].boundingBox())}}();var o=Math.ceil(a.w*u),s=Math.ceil(a.h*u);if(o>32767||s>32767)return null;if(o*s>16e6)return null;var l=r.makeLayer(a,n);if(null!=i){var h=c.indexOf(i)+1;c.splice(h,0,l)}else(void 0===t.insert||t.insert)&&c.unshift(l);return l};if(r.skipping&&!o)return null;for(var d=null,f=e.length/1,p=!o,g=0;g<e.length;g++){var m=e[g],v=m._private.rscratch,y=v.imgLayerCaches=v.imgLayerCaches||{},b=y[n];if(b)d=b;else{if((!d||d.eles.length>=f||!XX(d.bb,m.boundingBox()))&&!(d=h({insert:!0,after:d})))return null;s||p?r.queueLayer(d,m):r.drawEleInLayer(d,m,n,t),d.eles.push(m),y[n]=d}}return s||(p?null:c)},Q5.getEleLevelForLayerLevel=function(e,t){return e},Q5.drawEleInLayer=function(e,t,n,r){var i=this.renderer,o=e.context,a=t.boundingBox();0!==a.w&&0!==a.h&&t.visible()&&(n=this.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(o,!1),i.drawCachedElement(o,t,null,null,n,true),i.setImgSmoothing(o,!0))},Q5.levelIsComplete=function(e,t){var n=this.layersByLevel[e];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0)return!1;if(o.invalid)return!1;r+=o.eles.length}return r===t.length},Q5.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<t.length;a++)if(i.eles[0]===t[a]){o=a;break}if(o<0)this.invalidateLayer(i);else{var s=o;for(a=0;a<i.eles.length;a++)if(i.eles[a]!==t[s+a]){this.invalidateLayer(i);break}}}},Q5.updateElementsInLayers=function(e,t){for(var n=Gq(e[0]),r=0;r<e.length;r++)for(var i=n?null:e[r],o=n?e[r]:e[r].ele,a=o._private.rscratch,s=a.imgLayerCaches=a.imgLayerCaches||{},l=-4;l<=2;l++){var u=s[l];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||t(u,o,i))}},Q5.haveLayers=function(){for(var e=!1,t=-4;t<=2;t++){var n=this.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e},Q5.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=_W(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,function(e,n,r){t.invalidateLayer(e)}))},Q5.invalidateLayer=function(e){if(this.lastInvalidationTime=_W(),!e.invalid){var t=e.level,n=e.eles,r=this.layersByLevel[t];ZW(r,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var i=0;i<n.length;i++){var o=n[i]._private.rscratch.imgLayerCaches;o&&(o[t]=null)}}},Q5.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(e,n,r){var i=e.replacement;if(i||((i=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,i.eles=e.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)t.queueLayer(i,i.eles[o])})},Q5.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},Q5.queueLayer=function(e,t){var n=this.layersQueue,r=e.elesQueue,i=r.hasId=r.hasId||{};if(!e.replacement){if(t){if(i[t.id()])return;r.push(t),i[t.id()]=!0}e.reqs?(e.reqs++,n.updateItem(e)):(e.reqs=1,n.push(e))}},Q5.dequeue=function(e){for(var t=this,n=t.layersQueue,r=[],i=0;i<1&&0!==n.size();){var o=n.peek();if(o.replacement)n.pop();else if(o.replaces&&o!==o.replaces.replacement)n.pop();else if(o.invalid)n.pop();else{var a=o.elesQueue.shift();a&&(t.drawEleInLayer(o,a,o.level,e),i++),0===r.length&&r.push(!0),0===o.elesQueue.length&&(n.pop(),o.reqs=0,o.replaces&&t.applyLayerReplacement(o),t.requestRedraw())}}return r},Q5.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],n=e.replaces,r=t.indexOf(n);if(!(r<0||n.invalid)){t[r]=e;for(var i=0;i<e.eles.length;i++){var o=e.eles[i]._private,a=o.imgLayerCaches=o.imgLayerCaches||{};a&&(a[e.level]=e)}this.requestRedraw()}},Q5.requestRedraw=bW(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),Q5.setupDequeueing=H5({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t){return e.dequeue(t)},onDeqd:VW,shouldRedraw:zW,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var t3,n3={};function r3(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}}function i3(e,t,n){for(var r,i=0;i<t.length;i++){var o=t[i];0===i&&(r=o),e.lineTo(o.x,o.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)}function o3(e,t,n){e.beginPath&&e.beginPath();for(var r=t,i=0;i<r.length;i++){var o=r[i];e.lineTo(o.x,o.y)}var a=n,s=n[0];e.moveTo(s.x,s.y);for(i=1;i<a.length;i++){o=a[i];e.lineTo(o.x,o.y)}e.closePath&&e.closePath()}function a3(e,t,n,r,i){e.beginPath&&e.beginPath(),e.arc(n,r,i,0,2*Math.PI,!1);var o=t,a=o[0];e.moveTo(a.x,a.y);for(var s=0;s<o.length;s++){var l=o[s];e.lineTo(l.x,l.y)}e.closePath&&e.closePath()}function s3(e,t,n,r){e.arc(t,n,r,0,2*Math.PI,!1)}n3.arrowShapeImpl=function(e){return(t3||(t3={polygon:r3,"triangle-backcurve":i3,"triangle-tee":o3,"circle-triangle":a3,"triangle-cross":o3,circle:s3}))[e]};var l3={drawElement:function(e,t,n,r,i,o){t.isNode()?this.drawNode(e,t,n,r,i,o):this.drawEdge(e,t,n,r,i,o)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawElementUnderlay:function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},drawCachedElementPortion:function(e,t,n,r,i,o,a,s){var l=this,u=n.getBoundingBox(t);if(0!==u.w&&0!==u.h){var c=n.getElement(t,u,r,i,o);if(null!=c){var h=s(l,t);if(0===h)return;var d,f,p,g,m,v,y=a(l,t),b=u.x1,x=u.y1,w=u.w,E=u.h;if(0!==y){var T=n.getRotationPoint(t);p=T.x,g=T.y,e.translate(p,g),e.rotate(y),(m=l.getImgSmoothing(e))||l.setImgSmoothing(e,!0);var _=n.getRotationOffset(t);d=_.x,f=_.y}else d=b,f=x;1!==h&&(v=e.globalAlpha,e.globalAlpha=v*h),e.drawImage(c.texture.canvas,c.x,0,c.width,c.height,d,f,w,E),1!==h&&(e.globalAlpha=v),0!==y&&(e.rotate(-y),e.translate(-p,-g),m||l.setImgSmoothing(e,!1))}else n.drawElement(e,t)}}},u3=function(){return 0},c3=function(e,t){return e.getTextAngle(t,null)},h3=function(e,t){return e.getTextAngle(t,"source")},d3=function(e,t){return e.getTextAngle(t,"target")},f3=function(e,t){return t.effectiveOpacity()},p3=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};l3.drawCachedElement=function(e,t,n,r,i,o){var a=this,s=a.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,h=s.tlbTxrCache,d=t.boundingBox(),f=!0===o?l.reasons.highQuality:null;if(0!==d.w&&0!==d.h&&t.visible()&&(!r||YX(d,r))){var p=t.isEdge(),g=t.element()._private.rscratch.badLine;a.drawElementUnderlay(e,t),a.drawCachedElementPortion(e,t,l,n,i,f,u3,f3),p&&g||a.drawCachedElementPortion(e,t,u,n,i,f,c3,p3),p&&!g&&(a.drawCachedElementPortion(e,t,c,n,i,f,h3,p3),a.drawCachedElementPortion(e,t,h,n,i,f,d3,p3)),a.drawElementOverlay(e,t)}},l3.drawElements=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];this.drawElement(e,r)}},l3.drawCachedElements=function(e,t,n,r){for(var i=0;i<t.length;i++){var o=t[i];this.drawCachedElement(e,o,n,r)}},l3.drawCachedNodes=function(e,t,n,r){for(var i=0;i<t.length;i++){var o=t[i];o.isNode()&&this.drawCachedElement(e,o,n,r)}},l3.drawLayeredElements=function(e,t,n,r){var i=this.data.lyrTxrCache.getLayers(t,n);if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a.bb;0!==s.w&&0!==s.h&&e.drawImage(a.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(e,t,n,r)};var g3={drawEdge:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this,s=t._private.rscratch;if((!o||t.visible())&&!s.badLine&&null!=s.allpts&&!isNaN(s.allpts[0])){var l;n&&(l=n,e.translate(-l.x1,-l.y1));var u=o?t.pstyle("opacity").value:1,c=o?t.pstyle("line-opacity").value:1,h=t.pstyle("curve-style").value,d=t.pstyle("line-style").value,f=t.pstyle("width").pfValue,p=t.pstyle("line-cap").value,g=t.pstyle("line-outline-width").value,m=t.pstyle("line-outline-color").value,v=u*c,y=u*c,b=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;"straight-triangle"===h?(a.eleStrokeStyle(e,t,n),a.drawEdgeTrianglePath(t,e,s.allpts)):(e.lineWidth=f,e.lineCap=p,a.eleStrokeStyle(e,t,n),a.drawEdgePath(t,e,s.allpts,d),e.lineCap="butt")},x=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;a.drawArrowheads(e,t,n)};if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var w=t.pstyle("ghost-offset-x").pfValue,E=t.pstyle("ghost-offset-y").pfValue,T=t.pstyle("ghost-opacity").value,_=v*T;e.translate(w,E),b(_),x(_),e.translate(-w,-E)}else!function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;e.lineWidth=f+g,e.lineCap=p,g>0?(a.colorStrokeStyle(e,m[0],m[1],m[2],n),"straight-triangle"===h?a.drawEdgeTrianglePath(t,e,s.allpts):(a.drawEdgePath(t,e,s.allpts,d),e.lineCap="butt")):e.lineCap="butt"}();i&&a.drawEdgeUnderlay(e,t),b(),x(),i&&a.drawEdgeOverlay(e,t),a.drawElementText(e,t,null,r),n&&e.translate(l.x1,l.y1)}}},m3=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var r=n.pstyle("".concat(e,"-opacity")).value;if(0!==r){var i=this,o=i.usePaths(),a=n._private.rscratch,s=2*n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-color")).value;t.lineWidth=s,"self"!==a.edgeType||o?t.lineCap="round":t.lineCap="butt",i.colorStrokeStyle(t,l[0],l[1],l[2],r),i.drawEdgePath(n,t,a.allpts,"solid")}}}};g3.drawEdgeOverlay=m3("overlay"),g3.drawEdgeUnderlay=m3("underlay"),g3.drawEdgePath=function(e,t,n,r){var i,o=e._private.rscratch,a=t,s=!1,l=this.usePaths(),u=e.pstyle("line-dash-pattern").pfValue,c=e.pstyle("line-dash-offset").pfValue;if(l){var h=n.join("$");o.pathCacheKey&&o.pathCacheKey===h?(i=t=o.pathCache,s=!0):(i=t=new Path2D,o.pathCacheKey=h,o.pathCache=i)}if(a.setLineDash)switch(r){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(u),a.lineDashOffset=c;break;case"solid":a.setLineDash([])}if(!s&&!o.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),o.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<n.length;d+=4)t.quadraticCurveTo(n[d],n[d+1],n[d+2],n[d+3]);break;case"straight":case"haystack":for(var f=2;f+1<n.length;f+=2)t.lineTo(n[f],n[f+1]);break;case"segments":if(o.isRound){var p,g=YY(o.roundCorners);try{for(g.s();!(p=g.n()).done;){b5(t,p.value)}}catch(v){g.e(v)}finally{g.f()}t.lineTo(n[n.length-2],n[n.length-1])}else for(var m=2;m+1<n.length;m+=2)t.lineTo(n[m],n[m+1])}t=a,l?t.stroke(i):t.stroke(),t.setLineDash&&t.setLineDash([])},g3.drawEdgeTrianglePath=function(e,t,n){t.fillStyle=t.strokeStyle;for(var r=e.pstyle("width").pfValue,i=0;i+1<n.length;i+=2){var o=[n[i+2]-n[i],n[i+3]-n[i+1]],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s=[o[1]/a,-o[0]/a],l=[s[0]*r/2,s[1]*r/2];t.beginPath(),t.moveTo(n[i]-l[0],n[i+1]-l[1]),t.lineTo(n[i]+l[0],n[i+1]+l[1]),t.lineTo(n[i+2],n[i+3]),t.closePath(),t.fill()}},g3.drawArrowheads=function(e,t,n){var r=t._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},g3.drawArrowhead=function(e,t,n,r,i,o,a){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var s=this,l=t.pstyle(n+"-arrow-shape").value;if("none"!==l){var u="hollow"===t.pstyle(n+"-arrow-fill").value?"both":"filled",c=t.pstyle(n+"-arrow-fill").value,h=t.pstyle("width").pfValue,d=t.pstyle(n+"-arrow-width"),f="match-line"===d.value?h:d.pfValue;"%"===d.units&&(f*=h);var p=t.pstyle("opacity").value;void 0===a&&(a=p);var g=e.globalCompositeOperation;1===a&&"hollow"!==c||(e.globalCompositeOperation="destination-out",s.colorFillStyle(e,255,255,255,1),s.colorStrokeStyle(e,255,255,255,1),s.drawArrowShape(t,e,u,h,l,f,r,i,o),e.globalCompositeOperation=g);var m=t.pstyle(n+"-arrow-color").value;s.colorFillStyle(e,m[0],m[1],m[2],a),s.colorStrokeStyle(e,m[0],m[1],m[2],a),s.drawArrowShape(t,e,c,h,l,f,r,i,o)}}},g3.drawArrowShape=function(e,t,n,r,i,o,a,s,l){var u,c=this,h=this.usePaths()&&"triangle-cross"!==i,d=!1,f=t,p={x:a,y:s},g=e.pstyle("arrow-scale").value,m=this.getArrowWidth(r,g),v=c.arrowShapes[i];if(h){var y=c.arrowPathCache=c.arrowPathCache||[],b=LW(i),x=y[b];null!=x?(u=t=x,d=!0):(u=t=new Path2D,y[b]=u)}d||(t.beginPath&&t.beginPath(),h?v.draw(t,1,0,{x:0,y:0},1):v.draw(t,m,l,p,r),t.closePath&&t.closePath()),t=f,h&&(t.translate(a,s),t.rotate(l),t.scale(m,m)),"filled"!==n&&"both"!==n||(h?t.fill(u):t.fill()),"hollow"!==n&&"both"!==n||(t.lineWidth=o/(h?m:1),t.lineJoin="miter",h?t.stroke(u):t.stroke()),h&&(t.scale(1/m,1/m),t.rotate(-l),t.translate(-a,-s))};var v3={safeDrawImage:function(e,t,n,r,i,o,a,s,l,u){if(!(i<=0||o<=0||l<=0||u<=0))try{e.drawImage(t,n,r,i,o,a,s,l,u)}catch(LY){$W()}},drawInscribedImage:function(e,t,n,r,i){var o=this,a=n.position(),s=a.x,l=a.y,u=n.cy().style(),c=u.getIndexedStyle.bind(u),h=c(n,"background-fit","value",r),d=c(n,"background-repeat","value",r),f=n.width(),p=n.height(),g=2*n.padding(),m=f+("inner"===c(n,"background-width-relative-to","value",r)?0:g),v=p+("inner"===c(n,"background-height-relative-to","value",r)?0:g),y=n._private.rscratch,b="node"===c(n,"background-clip","value",r),x=c(n,"background-image-opacity","value",r)*i,w=c(n,"background-image-smoothing","value",r),E=n.pstyle("corner-radius").value;"auto"!==E&&(E=n.pstyle("corner-radius").pfValue);var T=t.width||t.cachedW,_=t.height||t.cachedH;null!=T&&null!=_||(document.body.appendChild(t),T=t.cachedW=t.width||t.offsetWidth,_=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var k=T,A=_;if("auto"!==c(n,"background-width","value",r)&&(k="%"===c(n,"background-width","units",r)?c(n,"background-width","pfValue",r)*m:c(n,"background-width","pfValue",r)),"auto"!==c(n,"background-height","value",r)&&(A="%"===c(n,"background-height","units",r)?c(n,"background-height","pfValue",r)*v:c(n,"background-height","pfValue",r)),0!==k&&0!==A){if("contain"===h)k*=S=Math.min(m/k,v/A),A*=S;else if("cover"===h){var S;k*=S=Math.max(m/k,v/A),A*=S}var N=s-m/2,M=c(n,"background-position-x","units",r),C=c(n,"background-position-x","pfValue",r);N+="%"===M?(m-k)*C:C;var I=c(n,"background-offset-x","units",r),R=c(n,"background-offset-x","pfValue",r);N+="%"===I?(m-k)*R:R;var L=l-v/2,O=c(n,"background-position-y","units",r),D=c(n,"background-position-y","pfValue",r);L+="%"===O?(v-A)*D:D;var P=c(n,"background-offset-y","units",r),B=c(n,"background-offset-y","pfValue",r);L+="%"===P?(v-A)*B:B,y.pathCache&&(N-=s,L-=l,s=0,l=0);var F=e.globalAlpha;e.globalAlpha=x;var z=o.getImgSmoothing(e),U=!1;if("no"===w&&z?(o.setImgSmoothing(e,!1),U=!0):"yes"!==w||z||(o.setImgSmoothing(e,!0),U=!0),"no-repeat"===d)b&&(e.save(),y.pathCache?e.clip(y.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(e,s,l,m,v,E,y),e.clip())),o.safeDrawImage(e,t,0,0,T,_,N,L,k,A),b&&e.restore();else{var G=e.createPattern(t,d);e.fillStyle=G,o.nodeShapes[o.getNodeShape(n)].draw(e,s,l,m,v,E,y),e.translate(N,L),e.fill(),e.translate(-N,-L)}e.globalAlpha=F,U&&o.setImgSmoothing(e,z)}}},y3={};function b3(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,a=Math.min(o,r/2,i/2);e.beginPath(),e.moveTo(t+a,n),e.lineTo(t+r-a,n),e.quadraticCurveTo(t+r,n,t+r,n+a),e.lineTo(t+r,n+i-a),e.quadraticCurveTo(t+r,n+i,t+r-a,n+i),e.lineTo(t+a,n+i),e.quadraticCurveTo(t,n+i,t,n+i-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+a,n),e.closePath()}y3.eleTextBiggerThanMin=function(e,t){if(!t){var n=e.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(RX(n*r));t=Math.pow(2,i)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},y3.drawElementText=function(e,t,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this;if(null==r){if(o&&!a.eleTextBiggerThanMin(t))return}else if(!1===r)return;if(t.isNode()){var s=t.pstyle("label");if(!s||!s.value)return;var l=a.getLabelJustification(t);e.textAlign=l,e.textBaseline="bottom"}else{var u=t.element()._private.rscratch.badLine,c=t.pstyle("label"),h=t.pstyle("source-label"),d=t.pstyle("target-label");if(u||(!c||!c.value)&&(!h||!h.value)&&(!d||!d.value))return;e.textAlign="center",e.textBaseline="bottom"}var f,p=!n;n&&(f=n,e.translate(-f.x1,-f.y1)),null==i?(a.drawText(e,t,null,p,o),t.isEdge()&&(a.drawText(e,t,"source",p,o),a.drawText(e,t,"target",p,o))):a.drawText(e,t,i,p,o),n&&e.translate(f.x1,f.y1)},y3.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((t=this.fontCaches[n]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},y3.setupTextStyle=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",o=t.pstyle("font-family").strValue,a=t.pstyle("font-weight").strValue,s=n?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*s,u=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=r+" "+a+" "+i+" "+o,e.lineJoin="round",this.colorFillStyle(e,u[0],u[1],u[2],s),this.colorStrokeStyle(e,c[0],c[1],c[2],l)},y3.getTextAngle=function(e,t){var n,r=e._private.rscratch,i=t?t+"-":"",o=e.pstyle(i+"text-rotation");if("autorotate"===o.strValue){var a=JW(r,"labelAngle",t);n=e.isEdge()?a:0}else n="none"===o.strValue?0:o.pfValue;return n},y3.drawText=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=t._private.rscratch,a=i?t.effectiveOpacity():1;if(!i||0!==a&&0!==t.pstyle("text-opacity").value){"main"===n&&(n=null);var s,l,u,c,h,d,f,p,g,m,v=JW(o,"labelX",n),y=JW(o,"labelY",n),b=this.getLabelText(t,n);if(null!=b&&""!==b&&!isNaN(v)&&!isNaN(y)){this.setupTextStyle(e,t,i);var x,w=n?n+"-":"",E=JW(o,"labelWidth",n),T=JW(o,"labelHeight",n),_=t.pstyle(w+"text-margin-x").pfValue,k=t.pstyle(w+"text-margin-y").pfValue,A=t.isEdge(),S=t.pstyle("text-halign").value,N=t.pstyle("text-valign").value;switch(A&&(S="center",N="center"),v+=_,y+=k,0!==(x=r?this.getTextAngle(t,n):0)&&(s=v,l=y,e.translate(s,l),e.rotate(x),v=0,y=0),N){case"top":break;case"center":y+=T/2;break;case"bottom":y+=T}var M=t.pstyle("text-background-opacity").value,C=t.pstyle("text-border-opacity").value,I=t.pstyle("text-border-width").pfValue,R=t.pstyle("text-background-padding").pfValue,L=t.pstyle("text-background-shape").strValue,O="round-rectangle"===L||"roundrectangle"===L,D="circle"===L;if(M>0||I>0&&C>0){var P=e.fillStyle,B=e.strokeStyle,F=e.lineWidth,z=t.pstyle("text-background-color").value,U=t.pstyle("text-border-color").value,G=t.pstyle("text-border-style").value,V=M>0,j=I>0&&C>0,H=v-R;switch(S){case"left":H-=E;break;case"center":H-=E/2}var $=y-T-R,Y=E+2*R,q=T+2*R;if(V&&(e.fillStyle="rgba(".concat(z[0],",").concat(z[1],",").concat(z[2],",").concat(M*a,")")),j&&(e.strokeStyle="rgba(".concat(U[0],",").concat(U[1],",").concat(U[2],",").concat(C*a,")"),e.lineWidth=I,e.setLineDash))switch(G){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=I/4,e.setLineDash([]);break;default:e.setLineDash([])}if(O?(e.beginPath(),b3(e,H,$,Y,q,2)):D?(e.beginPath(),u=e,c=H,h=$,d=Y,f=q,p=Math.min(d,f)/2,g=c+d/2,m=h+f/2,u.beginPath(),u.arc(g,m,p,0,2*Math.PI),u.closePath()):(e.beginPath(),e.rect(H,$,Y,q)),V&&e.fill(),j&&e.stroke(),j&&"double"===G){var W=I/2;e.beginPath(),O?b3(e,H+W,$+W,Y-2*W,q-2*W,2):e.rect(H+W,$+W,Y-2*W,q-2*W),e.stroke()}e.fillStyle=P,e.strokeStyle=B,e.lineWidth=F,e.setLineDash&&e.setLineDash([])}var X=2*t.pstyle("text-outline-width").pfValue;if(X>0&&(e.lineWidth=X),"wrap"===t.pstyle("text-wrap").value){var K=JW(o,"labelWrapCachedLines",n),Z=JW(o,"labelLineHeight",n),Q=E/2,J=this.getLabelJustification(t);switch("auto"===J||("left"===S?"left"===J?v+=-E:"center"===J&&(v+=-Q):"center"===S?"left"===J?v+=-Q:"right"===J&&(v+=Q):"right"===S&&("center"===J?v+=Q:"right"===J&&(v+=E))),N){case"top":case"center":case"bottom":y-=(K.length-1)*Z}for(var ee=0;ee<K.length;ee++)X>0&&e.strokeText(K[ee],v,y),e.fillText(K[ee],v,y),y+=Z}else X>0&&e.strokeText(b,v,y),e.fillText(b,v,y);0!==x&&(e.rotate(-x),e.translate(-s,-l))}}};var x3={drawNode:function(e,t,n){var r,i,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this,u=t._private,c=u.rscratch,h=t.position();if(Fq(h.x)&&Fq(h.y)&&(!s||t.visible())){var d,f,p=s?t.effectiveOpacity():1,g=l.usePaths(),m=!1,v=t.padding();r=t.width()+2*v,i=t.height()+2*v,n&&(f=n,e.translate(-f.x1,-f.y1));for(var y=t.pstyle("background-image").value,b=new Array(y.length),x=new Array(y.length),w=0,E=0;E<y.length;E++){var T=y[E];if(b[E]=null!=T&&"none"!==T){var _=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",E);w++,x[E]=l.getCachedImage(T,_,function(){u.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var k=t.pstyle("background-blacken").value,A=t.pstyle("border-width").pfValue,S=t.pstyle("background-opacity").value*p,N=t.pstyle("border-color").value,M=t.pstyle("border-style").value,C=t.pstyle("border-join").value,I=t.pstyle("border-cap").value,R=t.pstyle("border-position").value,L=t.pstyle("border-dash-pattern").pfValue,O=t.pstyle("border-dash-offset").pfValue,D=t.pstyle("border-opacity").value*p,P=t.pstyle("outline-width").pfValue,B=t.pstyle("outline-color").value,F=t.pstyle("outline-style").value,z=t.pstyle("outline-opacity").value*p,U=t.pstyle("outline-offset").value,G=t.pstyle("corner-radius").value;"auto"!==G&&(G=t.pstyle("corner-radius").pfValue);var V=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;l.eleFillStyle(e,t,n)},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;l.colorStrokeStyle(e,N[0],N[1],N[2],t)},H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;l.colorStrokeStyle(e,B[0],B[1],B[2],t)},$=function(e,t,n,r){var i,o=l.nodePathCache=l.nodePathCache||[],a=OW("polygon"===n?n+","+r.join(","):n,""+t,""+e,""+G),s=o[a],u=!1;return null!=s?(i=s,u=!0,c.pathCache=i):(i=new Path2D,o[a]=c.pathCache=i),{path:i,cacheHit:u}},Y=t.pstyle("shape").strValue,q=t.pstyle("shape-polygon-points").pfValue;if(g){e.translate(h.x,h.y);var W=$(r,i,Y,q);d=W.path,m=W.cacheHit}var X=function(){if(!m){var n=h;g&&(n={x:0,y:0}),l.nodeShapes[l.getNodeShape(t)].draw(d||e,n.x,n.y,r,i,G,c)}g?e.fill(d):e.fill()},K=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=u.backgrounding,o=0,a=0;a<x.length;a++){var s=t.cy().style().getIndexedStyle(t,"background-image-containment","value",a);r&&"over"===s||!r&&"inside"===s?o++:b[a]&&x[a].complete&&!x[a].error&&(o++,l.drawInscribedImage(e,x[a],t,a,n))}u.backgrounding=!(o===w),i!==u.backgrounding&&t.updateStyle(!1)},Z=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;l.hasPie(t)&&(l.drawPie(e,t,o),n&&(g||l.nodeShapes[l.getNodeShape(t)].draw(e,h.x,h.y,r,i,G,c)))},Q=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;l.hasStripe(t)&&(e.save(),g?e.clip(c.pathCache):(l.nodeShapes[l.getNodeShape(t)].draw(e,h.x,h.y,r,i,G,c),e.clip()),l.drawStripe(e,t,o),e.restore(),n&&(g||l.nodeShapes[l.getNodeShape(t)].draw(e,h.x,h.y,r,i,G,c)))},J=function(){var t=(k>0?k:-k)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p),n=k>0?0:255;0!==k&&(l.colorFillStyle(e,n,n,n,t),g?e.fill(d):e.fill())},ee=function(){if(A>0){if(e.lineWidth=A,e.lineCap=I,e.lineJoin=C,e.setLineDash)switch(M){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(L),e.lineDashOffset=O;break;case"solid":case"double":e.setLineDash([])}if("center"!==R){if(e.save(),e.lineWidth*=2,"inside"===R)g?e.clip(d):e.clip();else{var t=new Path2D;t.rect(-r/2-A,-i/2-A,r+2*A,i+2*A),t.addPath(d),e.clip(t,"evenodd")}g?e.stroke(d):e.stroke(),e.restore()}else g?e.stroke(d):e.stroke();if("double"===M){e.lineWidth=A/3;var n=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",g?e.stroke(d):e.stroke(),e.globalCompositeOperation=n}e.setLineDash&&e.setLineDash([])}},te=function(){if(P>0){if(e.lineWidth=P,e.lineCap="butt",e.setLineDash)switch(F){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var n=h;g&&(n={x:0,y:0});var o=l.getNodeShape(t),a=A;"inside"===R&&(a=0),"outside"===R&&(a*=2);var s,u=(r+a+(P+U))/r,c=(i+a+(P+U))/i,d=r*u,f=i*c,p=l.nodeShapes[o].points;if(g)s=$(d,f,o,p).path;if("ellipse"===o)l.drawEllipsePath(s||e,n.x,n.y,d,f);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(o)){var m=0,v=0,y=0;"round-diamond"===o?m=1.4*(a+U+P):"round-heptagon"===o?(m=1.075*(a+U+P),y=-(a/2+U+P)/35):"round-hexagon"===o?m=1.12*(a+U+P):"round-pentagon"===o?(m=1.13*(a+U+P),y=-(a/2+U+P)/15):"round-tag"===o?(m=1.12*(a+U+P),v=.07*(a/2+P+U)):"round-triangle"===o&&(m=(a+U+P)*(Math.PI/2),y=-(a+U/2+P)/Math.PI),0!==m&&(d=r*(u=(r+m)/r),["round-hexagon","round-tag"].includes(o)||(f=i*(c=(i+m)/i)));for(var b=d/2,x=f/2,w=(G="auto"===G?yK(d,f):G)+(a+P+U)/2,E=new Array(p.length/2),T=new Array(p.length/2),_=0;_<p.length/2;_++)E[_]={x:n.x+v+b*p[2*_],y:n.y+y+x*p[2*_+1]};var k,S,N,M,C=E.length;for(S=E[C-1],k=0;k<C;k++)N=E[k%C],M=E[(k+1)%C],T[k]=x5(S,N,M,w),S=N,N=M;l.drawRoundPolygonPath(s||e,n.x+v,n.y+y,r*u,i*c,p,T)}else if(["roundrectangle","round-rectangle"].includes(o))G="auto"===G?vK(d,f):G,l.drawRoundRectanglePath(s||e,n.x,n.y,d,f,G+(a+P+U)/2);else if(["cutrectangle","cut-rectangle"].includes(o))G="auto"===G?8:G,l.drawCutRectanglePath(s||e,n.x,n.y,d,f,null,G+(a+P+U)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(o))G="auto"===G?vK(d,f):G,l.drawBottomRoundRectanglePath(s||e,n.x,n.y,d,f,G+(a+P+U)/2);else if("barrel"===o)l.drawBarrelPath(s||e,n.x,n.y,d,f);else if(o.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(o)){p=oK(aK(p,(a+P+U)/r)),l.drawPolygonPath(s||e,n.x,n.y,r,i,p)}else{p=oK(aK(p,-((a+P+U)/r))),l.drawPolygonPath(s||e,n.x,n.y,r,i,p)}if(g?e.stroke(s):e.stroke(),"double"===F){e.lineWidth=a/3;var I=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",g?e.stroke(s):e.stroke(),e.globalCompositeOperation=I}e.setLineDash&&e.setLineDash([])}};if("yes"===t.pstyle("ghost").value){var ne=t.pstyle("ghost-offset-x").pfValue,re=t.pstyle("ghost-offset-y").pfValue,ie=t.pstyle("ghost-opacity").value,oe=ie*p;e.translate(ne,re),H(),te(),V(ie*S),X(),K(oe,!0),j(ie*D),ee(),Z(0!==k||0!==A),Q(0!==k||0!==A),K(oe,!1),J(oe),e.translate(-ne,-re)}g&&e.translate(-h.x,-h.y),a&&l.drawNodeUnderlay(e,t,h,r,i),g&&e.translate(h.x,h.y),H(),te(),V(),X(),K(p,!0),j(),ee(),Z(0!==k||0!==A),Q(0!==k||0!==A),K(p,!1),J(),g&&e.translate(-h.x,-h.y),l.drawElementText(e,t,null,o),a&&l.drawNodeOverlay(e,t,h,r,i),n&&e.translate(f.x1,f.y1)}}},w3=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,r,i,o){if(n.visible()){var a=n.pstyle("".concat(e,"-padding")).pfValue,s=n.pstyle("".concat(e,"-opacity")).value,l=n.pstyle("".concat(e,"-color")).value,u=n.pstyle("".concat(e,"-shape")).value,c=n.pstyle("".concat(e,"-corner-radius")).value;if(s>0){if(r=r||n.position(),null==i||null==o){var h=n.padding();i=n.width()+2*h,o=n.height()+2*h}this.colorFillStyle(t,l[0],l[1],l[2],s),this.nodeShapes[u].draw(t,r.x,r.y,i+2*a,o+2*a,c),t.fill()}}}};x3.drawNodeOverlay=w3("overlay"),x3.drawNodeUnderlay=w3("underlay"),x3.hasPie=function(e){return(e=e[0])._private.hasPie},x3.hasStripe=function(e){return(e=e[0])._private.hasStripe},x3.drawPie=function(e,t,n,r){t=t[0],r=r||t.position();var i,o=t.cy().style(),a=t.pstyle("pie-size"),s=t.pstyle("pie-hole"),l=t.pstyle("pie-start-angle").pfValue,u=r.x,c=r.y,h=t.width(),d=t.height(),f=Math.min(h,d)/2,p=0;if(this.usePaths()&&(u=0,c=0),"%"===a.units?f*=a.pfValue:void 0!==a.pfValue&&(f=a.pfValue/2),"%"===s.units?i=f*s.pfValue:void 0!==s.pfValue&&(i=s.pfValue/2),!(i>=f))for(var g=1;g<=o.pieBackgroundN;g++){var m=t.pstyle("pie-"+g+"-background-size").value,v=t.pstyle("pie-"+g+"-background-color").value,y=t.pstyle("pie-"+g+"-background-opacity").value*n,b=m/100;b+p>1&&(b=1-p);var x=1.5*Math.PI+2*Math.PI*p,w=(x+=l)+2*Math.PI*b;0===m||p>=1||p+b>1||(0===i?(e.beginPath(),e.moveTo(u,c),e.arc(u,c,f,x,w),e.closePath()):(e.beginPath(),e.arc(u,c,f,x,w),e.arc(u,c,i,w,x,!0),e.closePath()),this.colorFillStyle(e,v[0],v[1],v[2],y),e.fill(),p+=b)}},x3.drawStripe=function(e,t,n,r){t=t[0],r=r||t.position();var i=t.cy().style(),o=r.x,a=r.y,s=t.width(),l=t.height(),u=0,c=this.usePaths();e.save();var h=t.pstyle("stripe-direction").value,d=t.pstyle("stripe-size");switch(h){case"vertical":break;case"righward":e.rotate(-Math.PI/2)}var f=s,p=l;"%"===d.units?(f*=d.pfValue,p*=d.pfValue):void 0!==d.pfValue&&(f=d.pfValue,p=d.pfValue),c&&(o=0,a=0),a-=f/2,o-=p/2;for(var g=1;g<=i.stripeBackgroundN;g++){var m=t.pstyle("stripe-"+g+"-background-size").value,v=t.pstyle("stripe-"+g+"-background-color").value,y=t.pstyle("stripe-"+g+"-background-opacity").value*n,b=m/100;b+u>1&&(b=1-u),0===m||u>=1||u+b>1||(e.beginPath(),e.rect(o,a+p*u,f,p*b),e.closePath(),this.colorFillStyle(e,v[0],v[1],v[2],y),e.fill(),u+=b)}e.restore()};var E3,T3={};function _3(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(r));return r}function k3(e,t,n){void 0===n&&(n=t);var r=e.makeOffscreenCanvas(t,n),i=r.context=r.getContext("2d");return r.clear=function(){return i.clearRect(0,0,r.width,r.height)},r.clear(),r}function A3(e){var t=e.pixelRatio,n=e.cy.zoom(),r=e.cy.pan();return{zoom:n*t,pan:{x:r.x*t,y:r.y*t}}}function S3(e){return"solid"===e.pstyle("background-fill").value&&("none"===e.pstyle("background-image").strValue&&(0===e.pstyle("border-width").value||(0===e.pstyle("border-opacity").value||"solid"===e.pstyle("border-style").value)))}function N3(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function M3(e,t,n){var r=e[0]/255,i=e[1]/255,o=e[2]/255,a=t,s=n||new Array(4);return s[0]=r*a,s[1]=i*a,s[2]=o*a,s[3]=a,s}function C3(e,t){var n=t||new Array(4);return n[0]=(255&e)/255,n[1]=(e>>8&255)/255,n[2]=(e>>16&255)/255,n[3]=(e>>24&255)/255,n}function I3(e){return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}function R3(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}function L3(e,t,n){switch(t){case e.FLOAT:return new Float32Array(n);case e.INT:return new Int32Array(n)}}function O3(e,t,n,r,i,o){switch(t){case e.FLOAT:return new Float32Array(n.buffer,o*r,i);case e.INT:return new Int32Array(n.buffer,o*r,i)}}function D3(e,t,n,r){var i=WY(R3(e,n),3),o=i[0],a=i[1],s=i[2],l=L3(e,a,t*o),u=o*s,c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,t*u,e.DYNAMIC_DRAW),e.enableVertexAttribArray(r),a===e.FLOAT?e.vertexAttribPointer(r,o,a,!1,u,0):a===e.INT&&e.vertexAttribIPointer(r,o,a,u,0),e.vertexAttribDivisor(r,1),e.bindBuffer(e.ARRAY_BUFFER,null);for(var h=new Array(t),d=0;d<t;d++)h[d]=O3(e,a,l,u,o,d);return c.dataArray=l,c.stride=u,c.size=o,c.getView=function(e){return h[e]},c.setPoint=function(e,t,n){var r=h[e];r[0]=t,r[1]=n},c.bufferSubData=function(t){e.bindBuffer(e.ARRAY_BUFFER,c),t?e.bufferSubData(e.ARRAY_BUFFER,0,l,0,t*o):e.bufferSubData(e.ARRAY_BUFFER,0,l)},c}T3.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=this.cy.window(),n=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/n},T3.paintCache=function(e){for(var t,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((t=n[i]).context===e){r=!1;break}return r&&(t={context:e},n.push(t)),t},T3.createGradientStyleFor=function(e,t,n,r,i){var o,a=this.usePaths(),s=n.pstyle(t+"-gradient-stop-colors").value,l=n.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var u=n.sourceEndpoint(),c=n.targetEndpoint(),h=n.midpoint(),d=OX(u,h),f=OX(c,h);o=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(d,f))}else{var p=a?{x:0,y:0}:n.position(),g=n.paddedWidth(),m=n.paddedHeight();o=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(g,m))}else if(n.isEdge()){var v=n.sourceEndpoint(),y=n.targetEndpoint();o=e.createLinearGradient(v.x,v.y,y.x,y.y)}else{var b=a?{x:0,y:0}:n.position(),x=n.paddedWidth()/2,w=n.paddedHeight()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":o=e.createLinearGradient(b.x,b.y-w,b.x,b.y+w);break;case"to-top":o=e.createLinearGradient(b.x,b.y+w,b.x,b.y-w);break;case"to-left":o=e.createLinearGradient(b.x+x,b.y,b.x-x,b.y);break;case"to-right":o=e.createLinearGradient(b.x-x,b.y,b.x+x,b.y);break;case"to-bottom-right":case"to-right-bottom":o=e.createLinearGradient(b.x-x,b.y-w,b.x+x,b.y+w);break;case"to-top-right":case"to-right-top":o=e.createLinearGradient(b.x-x,b.y+w,b.x+x,b.y-w);break;case"to-bottom-left":case"to-left-bottom":o=e.createLinearGradient(b.x+x,b.y-w,b.x-x,b.y+w);break;case"to-top-left":case"to-left-top":o=e.createLinearGradient(b.x+x,b.y+w,b.x-x,b.y-w)}}if(!o)return null;for(var E=l.length===s.length,T=s.length,_=0;_<T;_++)o.addColorStop(E?l[_]:_/(T-1),"rgba("+s[_][0]+","+s[_][1]+","+s[_][2]+","+i+")");return o},T3.gradientFillStyle=function(e,t,n,r){var i=this.createGradientStyleFor(e,"background",t,n,r);if(!i)return null;e.fillStyle=i},T3.colorFillStyle=function(e,t,n,r,i){e.fillStyle="rgba("+t+","+n+","+r+","+i+")"},T3.eleFillStyle=function(e,t,n){var r=t.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(e,t,r,n);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],n)}},T3.gradientStrokeStyle=function(e,t,n,r){var i=this.createGradientStyleFor(e,"line",t,n,r);if(!i)return null;e.strokeStyle=i},T3.colorStrokeStyle=function(e,t,n,r,i){e.strokeStyle="rgba("+t+","+n+","+r+","+i+")"},T3.eleStrokeStyle=function(e,t,n){var r=t.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(e,t,r,n);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],n)}},T3.matchCanvasSize=function(e){var t=this,n=t.data,r=t.findContainerClientCoords(),i=r[2],o=r[3],a=t.getPixelRatio(),s=t.motionBlurPxRatio;e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]&&e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]||(a=s);var l,u=i*a,c=o*a;if(u!==t.canvasWidth||c!==t.canvasHeight){t.fontCaches=null;var h=n.canvasContainer;h.style.width=i+"px",h.style.height=o+"px";for(var d=0;d<t.CANVAS_LAYERS;d++)(l=n.canvases[d]).width=u,l.height=c,l.style.width=i+"px",l.style.height=o+"px";for(d=0;d<t.BUFFER_COUNT;d++)(l=n.bufferCanvases[d]).width=u,l.height=c,l.style.width=i+"px",l.style.height=o+"px";t.textureMult=1,a<=1&&(l=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,l.width=u*t.textureMult,l.height=c*t.textureMult),t.canvasWidth=u,t.canvasHeight=c,t.pixelRatio=a}},T3.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},T3.clearCanvas=function(){var e=this,t=e.data;function n(t){t.clearRect(0,0,e.canvasWidth,e.canvasHeight)}n(t.contexts[e.NODE]),n(t.contexts[e.DRAG])},T3.render=function(e){var t=this;e=e||XW();var n=t.cy,r=e.forcedContext,i=e.drawAllLayers,o=e.drawOnlyNodeLayer,a=e.forcedZoom,s=e.forcedPan,l=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,u=t.data,c=u.canvasNeedsRedraw,h=t.textureOnViewport&&!r&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),d=void 0!==e.motionBlur?e.motionBlur:t.motionBlur,f=t.motionBlurPxRatio,p=n.hasCompoundNodes(),g=t.hoverData.draggingEles,m=!(!t.hoverData.selecting&&!t.touchData.selecting),v=d=d&&!r&&t.motionBlurEnabled&&!m;r||(t.prevPxRatio!==l&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=l),!r&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout),d&&(null==t.mbFrames&&(t.mbFrames=0),t.mbFrames++,t.mbFrames<3&&(v=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry)),t.clearingMotionBlur&&(t.motionBlurPxRatio=1),t.textureDrawLastFrame&&!h&&(c[t.NODE]=!0,c[t.SELECT_BOX]=!0);var y=n.style(),b=n.zoom(),x=void 0!==a?a:b,w=n.pan(),E={x:w.x,y:w.y},T={zoom:b,pan:{x:w.x,y:w.y}},_=t.prevViewport;void 0===_||T.zoom!==_.zoom||T.pan.x!==_.pan.x||T.pan.y!==_.pan.y||g&&!p||(t.motionBlurPxRatio=1),s&&(E=s),x*=l,E.x*=l,E.y*=l;var k=t.getCachedZSortedEles();function A(e,n,r,i,o){var a=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",t.colorFillStyle(e,255,255,255,t.motionBlurTransparency),e.fillRect(n,r,i,o),e.globalCompositeOperation=a}function S(e,n){var o,l,c,h;t.clearingMotionBlur||e!==u.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]&&e!==u.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]?(o=E,l=x,c=t.canvasWidth,h=t.canvasHeight):(o={x:w.x*f,y:w.y*f},l=b*f,c=t.canvasWidth*f,h=t.canvasHeight*f),e.setTransform(1,0,0,1,0,0),"motionBlur"===n?A(e,0,0,c,h):r||void 0!==n&&!n||e.clearRect(0,0,c,h),i||(e.translate(o.x,o.y),e.scale(l,l)),s&&e.translate(s.x,s.y),a&&e.scale(a,a)}if(h||(t.textureDrawLastFrame=!1),h){if(t.textureDrawLastFrame=!0,!t.textureCache){t.textureCache={},t.textureCache.bb=n.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var N=t.data.bufferContexts[t.TEXTURE_BUFFER];N.setTransform(1,0,0,1,0,0),N.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:N,drawOnlyNodeLayer:!0,forcedPxRatio:l*t.textureMult}),(T=t.textureCache.viewport={zoom:n.zoom(),pan:n.pan(),width:t.canvasWidth,height:t.canvasHeight}).mpan={x:(0-T.pan.x)/T.zoom,y:(0-T.pan.y)/T.zoom}}c[t.DRAG]=!1,c[t.NODE]=!1;var M=u.contexts[t.NODE],C=t.textureCache.texture;T=t.textureCache.viewport;M.setTransform(1,0,0,1,0,0),d?A(M,0,0,T.width,T.height):M.clearRect(0,0,T.width,T.height);var I=y.core("outside-texture-bg-color").value,R=y.core("outside-texture-bg-opacity").value;t.colorFillStyle(M,I[0],I[1],I[2],R),M.fillRect(0,0,T.width,T.height);b=n.zoom();S(M,!1),M.clearRect(T.mpan.x,T.mpan.y,T.width/T.zoom/l,T.height/T.zoom/l),M.drawImage(C,T.mpan.x,T.mpan.y,T.width/T.zoom/l,T.height/T.zoom/l)}else t.textureOnViewport&&!r&&(t.textureCache=null);var L=n.extent(),O=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated(),D=t.hideEdgesOnViewport&&O,P=[];if(P[t.NODE]=!c[t.NODE]&&d&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,P[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),P[t.DRAG]=!c[t.DRAG]&&d&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,P[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),c[t.NODE]||i||o||P[t.NODE]){var B=d&&!P[t.NODE]&&1!==f;S(M=r||(B?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:u.contexts[t.NODE]),d&&!B?"motionBlur":void 0),D?t.drawCachedNodes(M,k.nondrag,l,L):t.drawLayeredElements(M,k.nondrag,l,L),t.debug&&t.drawDebugPoints(M,k.nondrag),i||d||(c[t.NODE]=!1)}if(!o&&(c[t.DRAG]||i||P[t.DRAG])){B=d&&!P[t.DRAG]&&1!==f;S(M=r||(B?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:u.contexts[t.DRAG]),d&&!B?"motionBlur":void 0),D?t.drawCachedNodes(M,k.drag,l,L):t.drawCachedElements(M,k.drag,l,L),t.debug&&t.drawDebugPoints(M,k.drag),i||d||(c[t.DRAG]=!1)}if(this.drawSelectionRectangle(e,S),d&&1!==f){var F=u.contexts[t.NODE],z=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],U=u.contexts[t.DRAG],G=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],V=function(e,n,r){e.setTransform(1,0,0,1,0,0),r||!v?e.clearRect(0,0,t.canvasWidth,t.canvasHeight):A(e,0,0,t.canvasWidth,t.canvasHeight);var i=f;e.drawImage(n,0,0,t.canvasWidth*i,t.canvasHeight*i,0,0,t.canvasWidth,t.canvasHeight)};(c[t.NODE]||P[t.NODE])&&(V(F,z,P[t.NODE]),c[t.NODE]=!1),(c[t.DRAG]||P[t.DRAG])&&(V(U,G,P[t.DRAG]),c[t.DRAG]=!1)}t.prevViewport=T,t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0),d&&(t.motionBlurTimeout=setTimeout(function(){t.motionBlurTimeout=null,t.clearedForMotionBlur[t.NODE]=!1,t.clearedForMotionBlur[t.DRAG]=!1,t.motionBlur=!1,t.clearingMotionBlur=!h,t.mbFrames=0,c[t.NODE]=!0,c[t.DRAG]=!0,t.redraw()},100)),r||n.emit("render")},T3.drawSelectionRectangle=function(e,t){var n=this,r=n.cy,i=n.data,o=r.style(),a=e.drawOnlyNodeLayer,s=e.drawAllLayers,l=i.canvasNeedsRedraw,u=e.forcedContext;if(n.showFps||!a&&l[n.SELECT_BOX]&&!s){var c=u||i.contexts[n.SELECT_BOX];if(t(c),1==n.selection[4]&&(n.hoverData.selecting||n.touchData.selecting)){var h=n.cy.zoom(),d=o.core("selection-box-border-width").value/h;c.lineWidth=d,c.fillStyle="rgba("+o.core("selection-box-color").value[0]+","+o.core("selection-box-color").value[1]+","+o.core("selection-box-color").value[2]+","+o.core("selection-box-opacity").value+")",c.fillRect(n.selection[0],n.selection[1],n.selection[2]-n.selection[0],n.selection[3]-n.selection[1]),d>0&&(c.strokeStyle="rgba("+o.core("selection-box-border-color").value[0]+","+o.core("selection-box-border-color").value[1]+","+o.core("selection-box-border-color").value[2]+","+o.core("selection-box-opacity").value+")",c.strokeRect(n.selection[0],n.selection[1],n.selection[2]-n.selection[0],n.selection[3]-n.selection[1]))}if(i.bgActivePosistion&&!n.hoverData.selecting){h=n.cy.zoom();var f=i.bgActivePosistion;c.fillStyle="rgba("+o.core("active-bg-color").value[0]+","+o.core("active-bg-color").value[1]+","+o.core("active-bg-color").value[2]+","+o.core("active-bg-opacity").value+")",c.beginPath(),c.arc(f.x,f.y,o.core("active-bg-size").pfValue/h,0,2*Math.PI),c.fill()}var p=n.lastRedrawTime;if(n.showFps&&p){p=Math.round(p);var g=Math.round(1e3/p),m="1 frame = "+p+" ms = "+g+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!E3){var v=c.measureText(m);E3=v.actualBoundingBoxAscent}c.fillText(m,0,E3);c.strokeRect(0,E3+10,250,20),c.fillRect(0,E3+10,250*Math.min(g/60,1),20)}s||(l[n.SELECT_BOX]=!1)}};var P3="undefined"!=typeof Float32Array?Float32Array:Array;function B3(){var e=new P3(9);return P3!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function F3(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function z3(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=n[0],f=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=d*r+f*a+u,e[7]=d*i+f*s+c,e[8]=d*o+f*l+h,e}function U3(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=Math.sin(n),f=Math.cos(n);return e[0]=f*r+d*a,e[1]=f*i+d*s,e[2]=f*o+d*l,e[3]=f*a-d*r,e[4]=f*s-d*i,e[5]=f*l-d*o,e[6]=u,e[7]=c,e[8]=h,e}function G3(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var V3=function(){return $Y(function e(t,n,r,i){HY(this,e),this.debugID=Math.floor(1e4*Math.random()),this.r=t,this.texSize=n,this.texRows=r,this.texHeight=Math.floor(n/r),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(t,n,n),this.scratch=i(t,n,this.texHeight,"scratch")},[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(e){var t=e.w,n=e.h,r=this.texHeight,i=this.texSize,o=r/n,a=t*o,s=n*o;return a>i&&(a=t*(o=i/t),s=n*o),{scale:o,texW:a,texH:s}}},{key:"draw",value:function(e,t,n){var r=this;if(this.locked)throw new Error("can't draw, atlas is locked");var i=this.texSize,o=this.texRows,a=this.texHeight,s=this.getScale(t),l=s.scale,u=s.texW,c=s.texH,h=function(e,r){if(n&&r){var i=r.context,o=e.x,s=e.row,u=o,c=a*s;i.save(),i.translate(u,c),i.scale(l,l),n(i,t),i.restore()}},d=[null,null],f=function(){h(r.freePointer,r.canvas),d[0]={x:r.freePointer.x,y:r.freePointer.row*a,w:u,h:c},d[1]={x:r.freePointer.x+u,y:r.freePointer.row*a,w:0,h:c},r.freePointer.x+=u,r.freePointer.x==i&&(r.freePointer.x=0,r.freePointer.row++)},p=function(){r.freePointer.x=0,r.freePointer.row++};if(this.freePointer.x+u<=i)f();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===i?(p(),f()):this.enableWrapping?function(){var e=r.scratch,t=r.canvas;e.clear(),h({x:0,row:0},e);var n=i-r.freePointer.x,o=u-n,s=a,l=r.freePointer.x,f=r.freePointer.row*a,p=n;t.context.drawImage(e,0,0,p,s,l,f,p,s),d[0]={x:l,y:f,w:p,h:c};var g=n,m=(r.freePointer.row+1)*a,v=o;t&&t.context.drawImage(e,g,0,v,s,0,m,v,s),d[1]={x:0,y:m,w:v,h:c},r.freePointer.x=o,r.freePointer.row++}():(p(),f())}return this.keyToLocation.set(e,d),this.needsBuffer=!0,d}},{key:"getOffsets",value:function(e){return this.keyToLocation.get(e)}},{key:"isEmpty",value:function(){return 0===this.freePointer.x&&0===this.freePointer.row}},{key:"canFit",value:function(e){if(this.locked)return!1;var t=this.texSize,n=this.texRows,r=this.getScale(e).texW;return!(this.freePointer.x+r>t)||this.freePointer.row<n-1}},{key:"bufferIfNeeded",value:function(e){this.texture||(this.texture=function(e){var t=e.createTexture();return t.buffer=function(n){e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},t.deleteTexture=function(){e.deleteTexture(t)},t}(e,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),j3=function(){return $Y(function e(t,n,r,i){HY(this,e),this.r=t,this.texSize=n,this.texRows=r,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set},[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var e=this.r,t=this.texSize,n=this.texRows,r=this.createTextureCanvas;return new V3(e,t,n,r)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var e=this.r,t=this.texSize,n=this.texRows,r=this.createTextureCanvas,i=Math.floor(t/n);this.scratch=r(e,t,i,"scratch")}return this.scratch}},{key:"draw",value:function(e,t,n){var r=this.styleKeyToAtlas.get(e);return r||((r=this.atlases[this.atlases.length-1])&&r.canFit(t)||(r&&r.lock(),r=this._createAtlas(),this.atlases.push(r)),r.draw(e,t,n),this.styleKeyToAtlas.set(e,r)),r}},{key:"getAtlas",value:function(e){return this.styleKeyToAtlas.get(e)}},{key:"hasAtlas",value:function(e){return this.styleKeyToAtlas.has(e)}},{key:"markKeyForGC",value:function(e){this.markedKeys.add(e)}},{key:"gc",value:function(){var e=this,t=this.markedKeys;if(0!==t.size){var n,r=[],i=new Map,o=null,a=YY(this.atlases);try{var s=function(){var a,s,l=n.value,u=l.getKeys(),c=(s=u,(a=t).intersection?a.intersection(s):new Set(XY(a).filter(function(e){return s.has(e)})));if(0===c.size)return r.push(l),u.forEach(function(e){return i.set(e,l)}),1;o||(o=e._createAtlas(),r.push(o));var h,d=YY(u);try{for(d.s();!(h=d.n()).done;){var f=h.value;if(!c.has(f)){var p=WY(l.getOffsets(f),2),g=p[0],m=p[1];o.canFit({w:g.w+m.w,h:g.h})||(o.lock(),o=e._createAtlas(),r.push(o)),l.canvas&&(e._copyTextureToNewAtlas(f,l,o),i.set(f,o))}}}catch(v){d.e(v)}finally{d.f()}l.dispose()};for(a.s();!(n=a.n()).done;)s()}catch(l){a.e(l)}finally{a.f()}this.atlases=r,this.styleKeyToAtlas=i,this.markedKeys=new Set}}},{key:"_copyTextureToNewAtlas",value:function(e,t,n){var r=WY(t.getOffsets(e),2),i=r[0],o=r[1];if(0===o.w)n.draw(e,i,function(e){e.drawImage(t.canvas,i.x,i.y,i.w,i.h,0,0,i.w,i.h)});else{var a=this._getScratchCanvas();a.clear(),a.context.drawImage(t.canvas,i.x,i.y,i.w,i.h,0,0,i.w,i.h),a.context.drawImage(t.canvas,o.x,o.y,o.w,o.h,i.w,0,o.w,o.h);var s=i.w+o.w,l=i.h;n.draw(e,{w:s,h:l},function(e){e.drawImage(a,0,0,s,l,0,0,s,l)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();var H3=function(){return $Y(function e(t,n){HY(this,e),this.r=t,this.globalOptions=n,this.atlasSize=n.webglTexSize,this.maxAtlasesPerBatch=n.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map},[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(e,t){var n=this.globalOptions,r=n.webglTexSize,i=n.createTextureCanvas,o=t.texRows,a=this._cacheScratchCanvas(i),s=new j3(this.r,r,o,a);this.collections.set(e,s)}},{key:"addRenderType",value:function(e,t){var n=t.collection;if(!this.collections.has(n))throw new Error("invalid atlas collection name '".concat(n,"'"));var r=this.collections.get(n),i=oW({type:e,atlasCollection:r},t);this.renderTypes.set(e,i)}},{key:"getRenderTypeOpts",value:function(e){return this.renderTypes.get(e)}},{key:"getAtlasCollection",value:function(e){return this.collections.get(e)}},{key:"_cacheScratchCanvas",value:function(e){var t=-1,n=-1,r=null;return function(i,o,a,s){return s?(r&&o==t&&a==n||(t=o,n=a,r=e(i,o,a)),r):e(i,o,a)}}},{key:"_key",value:function(e,t){return"".concat(e,"-").concat(t)}},{key:"invalidate",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.forceRedraw,o=void 0!==i&&i,a=r.filterEle,s=void 0===a?function(){return!0}:a,l=r.filterType,u=void 0===l?function(){return!0}:l,c=!1,h=!1,d=YY(e);try{for(d.s();!(t=d.n()).done;){var f=t.value;if(s(f)){var p,g=YY(this.renderTypes.values());try{var m=function(){var e=p.value,t=e.type;if(u(t)){var r=n.collections.get(e.collection),i=e.getKey(f),a=Array.isArray(i)?i:[i];if(o)a.forEach(function(e){return r.markKeyForGC(e)}),h=!0;else{var s=e.getID?e.getID(f):f.id(),l=n._key(t,s),d=n.typeAndIdToKey.get(l);void 0===d||N3(a,d)||(c=!0,n.typeAndIdToKey.delete(l),d.forEach(function(e){return r.markKeyForGC(e)}))}}};for(g.s();!(p=g.n()).done;)m()}catch(v){g.e(v)}finally{g.f()}}}}catch(v){d.e(v)}finally{d.f()}return h&&(this.gc(),c=!1),c}},{key:"gc",value:function(){var e,t=YY(this.collections.values());try{for(t.s();!(e=t.n()).done;){e.value.gc()}}catch(n){t.e(n)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(e,t,n,r){var i=this.renderTypes.get(t),o=this.collections.get(i.collection),a=!1,s=o.draw(r,n,function(t){i.drawClipped?(t.save(),t.beginPath(),t.rect(0,0,n.w,n.h),t.clip(),i.drawElement(t,e,n,!0,!0),t.restore()):i.drawElement(t,e,n,!0,!0),a=!0});if(a){var l=i.getID?i.getID(e):e.id(),u=this._key(t,l);this.typeAndIdToKey.has(u)?this.typeAndIdToKey.get(u).push(r):this.typeAndIdToKey.set(u,[r])}return s}},{key:"getAtlasInfo",value:function(e,t){var n=this,r=this.renderTypes.get(t),i=r.getKey(e);return(Array.isArray(i)?i:[i]).map(function(i){var o=r.getBoundingBox(e,i),a=n.getOrCreateAtlas(e,t,o,i),s=WY(a.getOffsets(i),2),l=s[0];return{atlas:a,tex:l,tex1:l,tex2:s[1],bb:o}})}},{key:"getDebugInfo",value:function(){var e,t=[],n=YY(this.collections);try{for(n.s();!(e=n.n()).done;){var r=WY(e.value,2),i=r[0],o=r[1].getCounts(),a=o.keyCount,s=o.atlasCount;t.push({type:i,keyCount:a,atlasCount:s})}}catch(l){n.e(l)}finally{n.f()}return t}}])}(),$3=function(){return $Y(function e(t){HY(this,e),this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.batchAtlases=[]},[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(e,t){return t})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(e){return this.batchAtlases.length!==this.maxAtlasesPerBatch||this.batchAtlases.includes(e)}},{key:"getAtlasIndexForBatch",value:function(e){var t=this.batchAtlases.indexOf(e);if(t<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(e),t=this.batchAtlases.length-1}return t}}])}(),Y3={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},q3=1,W3=2,X3=function(){return $Y(function e(t,n,r){HY(this,e),this.r=t,this.gl=n,this.maxInstances=r.webglBatchSize,this.atlasSize=r.webglTexSize,this.bgColor=r.bgColor,this.debug=r.webglDebug,this.batchDebugInfo=[],r.enableWrapping=!0,r.createTextureCanvas=k3,this.atlasManager=new H3(t,r),this.batchManager=new $3(r),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Y3.SCREEN),this.pickingProgram=this._createShaderProgram(Y3.PICKING),this.vao=this._createVAO()},[{key:"addAtlasCollection",value:function(e,t){this.atlasManager.addAtlasCollection(e,t)}},{key:"addTextureAtlasRenderType",value:function(e,t){this.atlasManager.addRenderType(e,t)}},{key:"addSimpleShapeRenderType",value:function(e,t){this.simpleShapeOptions.set(e,t)}},{key:"invalidate",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,n=this.atlasManager;return t?n.invalidate(e,{filterType:function(e){return e===t},forceRedraw:!0}):n.invalidate(e)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(e){var t=this.gl,n="#version 300 es\n      precision highp float;\n\n      uniform mat3 uPanZoomMatrix;\n      uniform int  uAtlasSize;\n      \n      // instanced\n      in vec2 aPosition; // a vertex from the unit square\n      \n      in mat3 aTransform; // used to transform verticies, eg into a bounding box\n      in int aVertType; // the type of thing we are rendering\n\n      // the z-index that is output when using picking mode\n      in vec4 aIndex;\n      \n      // For textures\n      in int aAtlasId; // which shader unit/atlas to use\n      in vec4 aTex; // x/y/w/h of texture in atlas\n\n      // for edges\n      in vec4 aPointAPointB;\n      in vec4 aPointCPointD;\n      in vec2 aLineWidth; // also used for node border width\n\n      // simple shapes\n      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]\n      in vec4 aColor; // also used for edges\n      in vec4 aBorderColor; // aLineWidth is used for border width\n\n      // output values passed to the fragment shader\n      out vec2 vTexCoord;\n      out vec4 vColor;\n      out vec2 vPosition;\n      // flat values are not interpolated\n      flat out int vAtlasId; \n      flat out int vVertType;\n      flat out vec2 vTopRight;\n      flat out vec2 vBotLeft;\n      flat out vec4 vCornerRadius;\n      flat out vec4 vBorderColor;\n      flat out vec2 vBorderWidth;\n      flat out vec4 vIndex;\n      \n      void main(void) {\n        int vid = gl_VertexID;\n        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below\n\n        if(aVertType == ".concat(0,") {\n          float texX = aTex.x; // texture coordinates\n          float texY = aTex.y;\n          float texW = aTex.z;\n          float texH = aTex.w;\n\n          if(vid == 1 || vid == 2 || vid == 4) {\n            texX += texW;\n          }\n          if(vid == 2 || vid == 4 || vid == 5) {\n            texY += texH;\n          }\n\n          float d = float(uAtlasSize);\n          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(4," || aVertType == ").concat(7," \n             || aVertType == ").concat(5," || aVertType == ").concat(6,") { // simple shapes\n\n          // the bounding box is needed by the fragment shader\n          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat\n          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat\n          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated\n\n          // calculations are done in the fragment shader, just pass these along\n          vColor = aColor;\n          vCornerRadius = aCornerRadius;\n          vBorderColor = aBorderColor;\n          vBorderWidth = aLineWidth;\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(1,") {\n          vec2 source = aPointAPointB.xy;\n          vec2 target = aPointAPointB.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          // stretch the unit square into a long skinny rectangle\n          vec2 xBasis = target - source;\n          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;\n\n          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(2,") {\n          vec2 pointA = aPointAPointB.xy;\n          vec2 pointB = aPointAPointB.zw;\n          vec2 pointC = aPointCPointD.xy;\n          vec2 pointD = aPointCPointD.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          vec2 p0, p1, p2, pos;\n          if(position.x == 0.0) { // The left side of the unit square\n            p0 = pointA;\n            p1 = pointB;\n            p2 = pointC;\n            pos = position;\n          } else { // The right side of the unit square, use same approach but flip the geometry upside down\n            p0 = pointD;\n            p1 = pointC;\n            p2 = pointB;\n            pos = vec2(0.0, -position.y);\n          }\n\n          vec2 p01 = p1 - p0;\n          vec2 p12 = p2 - p1;\n          vec2 p21 = p1 - p2;\n\n          // Find the normal vector.\n          vec2 tangent = normalize(normalize(p12) + normalize(p01));\n          vec2 normal = vec2(-tangent.y, tangent.x);\n\n          // Find the vector perpendicular to p0 -> p1.\n          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));\n\n          // Determine the bend direction.\n          float sigma = sign(dot(p01 + p21, normal));\n          float width = aLineWidth[0];\n\n          if(sign(pos.y) == -sigma) {\n            // This is an intersecting vertex. Adjust the position so that there's no overlap.\n            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          } else {\n            // This is a non-intersecting vertex. Treat it like a mitre join.\n            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          }\n\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(3," && vid < 3) {\n          // massage the first triangle into an edge arrow\n          if(vid == 0)\n            position = vec2(-0.15, -0.3);\n          if(vid == 1)\n            position = vec2(  0.0,  0.0);\n          if(vid == 2)\n            position = vec2( 0.15, -0.3);\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n          vColor = aColor;\n        }\n        else {\n          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space\n        }\n\n        vAtlasId = aAtlasId;\n        vVertType = aVertType;\n        vIndex = aIndex;\n      }\n    "),r=this.batchManager.getIndexArray(),i=function(e,t,n){var r=_3(e,e.VERTEX_SHADER,t),i=_3(e,e.FRAGMENT_SHADER,n),o=e.createProgram();if(e.attachShader(o,r),e.attachShader(o,i),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw new Error("Could not initialize shaders");return o}(t,n,"#version 300 es\n      precision highp float;\n\n      // declare texture unit for each texture atlas in the batch\n      ".concat(r.map(function(e){return"uniform sampler2D uTexture".concat(e,";")}).join("\n\t"),"\n\n      uniform vec4 uBGColor;\n      uniform float uZoom;\n\n      in vec2 vTexCoord;\n      in vec4 vColor;\n      in vec2 vPosition; // model coordinates\n\n      flat in int vAtlasId;\n      flat in vec4 vIndex;\n      flat in int vVertType;\n      flat in vec2 vTopRight;\n      flat in vec2 vBotLeft;\n      flat in vec4 vCornerRadius;\n      flat in vec4 vBorderColor;\n      flat in vec2 vBorderWidth;\n\n      out vec4 outColor;\n\n      ").concat("\n  float circleSD(vec2 p, float r) {\n    return distance(vec2(0), p) - r; // signed distance\n  }\n","\n      ").concat("\n  float rectangleSD(vec2 p, vec2 b) {\n    vec2 d = abs(p)-b;\n    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);\n  }\n","\n      ").concat("\n  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {\n    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;\n    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;\n    vec2 q = abs(p) - b + cr.x;\n    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;\n  }\n","\n      ").concat("\n  float ellipseSD(vec2 p, vec2 ab) {\n    p = abs( p ); // symmetry\n\n    // find root with Newton solver\n    vec2 q = ab*(p-ab);\n    float w = (q.x<q.y)? 1.570796327 : 0.0;\n    for( int i=0; i<5; i++ ) {\n      vec2 cs = vec2(cos(w),sin(w));\n      vec2 u = ab*vec2( cs.x,cs.y);\n      vec2 v = ab*vec2(-cs.y,cs.x);\n      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));\n    }\n    \n    // compute final point and distance\n    float d = length(p-ab*vec2(cos(w),sin(w)));\n    \n    // return signed distance\n    return (dot(p/ab,p/ab)>1.0) ? d : -d;\n  }\n","\n\n      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha\n        return vec4( \n          top.rgb + (bot.rgb * (1.0 - top.a)),\n          top.a   + (bot.a   * (1.0 - top.a)) \n        );\n      }\n\n      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance\n        // scale to the zoom level so that borders don't look blurry when zoomed in\n        // note 1.5 is an aribitrary value chosen because it looks good\n        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); \n      }\n\n      void main(void) {\n        if(vVertType == ").concat(0,") {\n          // look up the texel from the texture unit\n          ").concat(r.map(function(e){return"if(vAtlasId == ".concat(e,") outColor = texture(uTexture").concat(e,", vTexCoord);")}).join("\n\telse "),"\n        } \n        else if(vVertType == ").concat(3,") {\n          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';\n          outColor = blend(vColor, uBGColor);\n          outColor.a = 1.0; // make opaque, masks out line under arrow\n        }\n        else if(vVertType == ").concat(4," && vBorderWidth == vec2(0.0)) { // simple rectangle with no border\n          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done\n        }\n        else if(vVertType == ").concat(4," || vVertType == ").concat(7," \n          || vVertType == ").concat(5," || vVertType == ").concat(6,") { // use SDF\n\n          float outerBorder = vBorderWidth[0];\n          float innerBorder = vBorderWidth[1];\n          float borderPadding = outerBorder * 2.0;\n          float w = vTopRight.x - vBotLeft.x - borderPadding;\n          float h = vTopRight.y - vBotLeft.y - borderPadding;\n          vec2 b = vec2(w/2.0, h/2.0); // half width, half height\n          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center\n\n          float d; // signed distance\n          if(vVertType == ").concat(4,") {\n            d = rectangleSD(p, b);\n          } else if(vVertType == ").concat(7," && w == h) {\n            d = circleSD(p, b.x); // faster than ellipse\n          } else if(vVertType == ").concat(7,") {\n            d = ellipseSD(p, b);\n          } else {\n            d = roundRectangleSD(p, b, vCornerRadius.wzyx);\n          }\n\n          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling\n          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box\n          if(d > 0.0) {\n            if(d > outerBorder) {\n              discard;\n            } else {\n              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);\n            }\n          } else {\n            if(d > innerBorder) {\n              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;\n              vec4 innerBorderColor = blend(vBorderColor, vColor);\n              outColor = distInterp(innerBorderColor, outerColor, d);\n            } \n            else {\n              vec4 outerColor;\n              if(innerBorder == 0.0 && outerBorder == 0.0) {\n                outerColor = vec4(0);\n              } else if(innerBorder == 0.0) {\n                outerColor = vBorderColor;\n              } else {\n                outerColor = blend(vBorderColor, vColor);\n              }\n              outColor = distInterp(vColor, outerColor, d - innerBorder);\n            }\n          }\n        }\n        else {\n          outColor = vColor;\n        }\n\n        ").concat(e.picking?"if(outColor.a == 0.0) discard;\n             else outColor = vIndex;":"","\n      }\n    "));i.aPosition=t.getAttribLocation(i,"aPosition"),i.aIndex=t.getAttribLocation(i,"aIndex"),i.aVertType=t.getAttribLocation(i,"aVertType"),i.aTransform=t.getAttribLocation(i,"aTransform"),i.aAtlasId=t.getAttribLocation(i,"aAtlasId"),i.aTex=t.getAttribLocation(i,"aTex"),i.aPointAPointB=t.getAttribLocation(i,"aPointAPointB"),i.aPointCPointD=t.getAttribLocation(i,"aPointCPointD"),i.aLineWidth=t.getAttribLocation(i,"aLineWidth"),i.aColor=t.getAttribLocation(i,"aColor"),i.aCornerRadius=t.getAttribLocation(i,"aCornerRadius"),i.aBorderColor=t.getAttribLocation(i,"aBorderColor"),i.uPanZoomMatrix=t.getUniformLocation(i,"uPanZoomMatrix"),i.uAtlasSize=t.getUniformLocation(i,"uAtlasSize"),i.uBGColor=t.getUniformLocation(i,"uBGColor"),i.uZoom=t.getUniformLocation(i,"uZoom"),i.uTextures=[];for(var o=0;o<this.batchManager.getMaxAtlasesPerBatch();o++)i.uTextures.push(t.getUniformLocation(i,"uTexture".concat(o)));return i}},{key:"_createVAO",value:function(){var e=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=e.length/2;var t=this.maxInstances,n=this.gl,r=this.program,i=n.createVertexArray();return n.bindVertexArray(i),function(e,t,n,r){var i=WY(R3(e,t),2),o=i[0],a=i[1],s=L3(e,a,r),l=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),a===e.FLOAT?e.vertexAttribPointer(n,o,a,!1,0,0):a===e.INT&&e.vertexAttribIPointer(n,o,a,0,0),e.enableVertexAttribArray(n),e.bindBuffer(e.ARRAY_BUFFER,null)}(n,"vec2",r.aPosition,e),this.transformBuffer=function(e,t,n){for(var r=new Float32Array(9*t),i=new Array(t),o=0;o<t;o++){var a=9*o*4;i[o]=new Float32Array(r.buffer,a,9)}var s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,r.byteLength,e.DYNAMIC_DRAW);for(var l=0;l<3;l++){var u=n+l;e.enableVertexAttribArray(u),e.vertexAttribPointer(u,3,e.FLOAT,!1,36,12*l),e.vertexAttribDivisor(u,1)}return e.bindBuffer(e.ARRAY_BUFFER,null),s.getMatrixView=function(e){return i[e]},s.setData=function(e,t){i[t].set(e,0)},s.bufferSubData=function(){e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferSubData(e.ARRAY_BUFFER,0,r)},s}(n,t,r.aTransform),this.indexBuffer=D3(n,t,"vec4",r.aIndex),this.vertTypeBuffer=D3(n,t,"int",r.aVertType),this.atlasIdBuffer=D3(n,t,"int",r.aAtlasId),this.texBuffer=D3(n,t,"vec4",r.aTex),this.pointAPointBBuffer=D3(n,t,"vec4",r.aPointAPointB),this.pointCPointDBuffer=D3(n,t,"vec4",r.aPointCPointD),this.lineWidthBuffer=D3(n,t,"vec2",r.aLineWidth),this.colorBuffer=D3(n,t,"vec4",r.aColor),this.cornerRadiusBuffer=D3(n,t,"vec4",r.aCornerRadius),this.borderColorBuffer=D3(n,t,"vec4",r.aBorderColor),n.bindVertexArray(null),i}},{key:"buffers",get:function(){var e=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(e){return Qq(e,"Buffer")}).map(function(t){return e[t]})),this._buffers}},{key:"startFrame",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y3.SCREEN;this.panZoomMatrix=e,this.renderTarget=t,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(e,t){return!!e.visible()&&(!t||!t.isVisible||t.isVisible(e))}},{key:"drawTexture",value:function(e,t,n){var r=this.atlasManager,i=this.batchManager,o=r.getRenderTypeOpts(n);if(this._isVisible(e,o)&&(!e.isEdge()||this._isValidEdge(e))){if(this.renderTarget.picking&&o.getTexPickingMode){var a=o.getTexPickingMode(e);if(a===q3)return;if(a==W3)return void this.drawPickingRectangle(e,t,n)}var s,l=YY(r.getAtlasInfo(e,n));try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.atlas,h=u.tex1,d=u.tex2;i.canAddToCurrentBatch(c)||this.endBatch();for(var f=i.getAtlasIndexForBatch(c),p=0,g=[[h,!0],[d,!1]];p<g.length;p++){var m=WY(g[p],2),v=m[0],y=m[1];if(0!=v.w){var b=this.instanceCount;this.vertTypeBuffer.getView(b)[0]=0,C3(t,this.indexBuffer.getView(b)),this.atlasIdBuffer.getView(b)[0]=f;var x=this.texBuffer.getView(b);x[0]=v.x,x[1]=v.y,x[2]=v.w,x[3]=v.h;var w=this.transformBuffer.getMatrixView(b);this.setTransformMatrix(e,w,o,u,y),this.instanceCount++,y||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(E){l.e(E)}finally{l.f()}}}},{key:"setTransformMatrix",value:function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=0;if(n.shapeProps&&n.shapeProps.padding&&(o=e.pstyle(n.shapeProps.padding).pfValue),r){var a=r.bb,s=r.tex1,l=r.tex2,u=s.w/(s.w+l.w);i||(u=1-u);var c=this._getAdjustedBB(a,o,i,u);this._applyTransformMatrix(t,c,n,e)}else{var h=n.getBoundingBox(e),d=this._getAdjustedBB(h,o,!0,1);this._applyTransformMatrix(t,d,n,e)}}},{key:"_applyTransformMatrix",value:function(e,t,n,r){var i,o;F3(e);var a=n.getRotation?n.getRotation(r):0;if(0!==a){var s=n.getRotationPoint(r);z3(e,e,[s.x,s.y]),U3(e,e,a);var l=n.getRotationOffset(r);i=l.x+(t.xOffset||0),o=l.y+(t.yOffset||0)}else i=t.x1,o=t.y1;z3(e,e,[i,o]),G3(e,e,[t.w,t.h])}},{key:"_getAdjustedBB",value:function(e,t,n,r){var i=e.x1,o=e.y1,a=e.w,s=e.h;t&&(i-=t,o-=t,a+=2*t,s+=2*t);var l=0,u=a*r;return n&&r<1?a=u:!n&&r<1&&(i+=l=a-u,a=u),{x1:i,y1:o,w:a,h:s,xOffset:l,yOffset:e.yOffset}}},{key:"drawPickingRectangle",value:function(e,t,n){var r=this.atlasManager.getRenderTypeOpts(n),i=this.instanceCount;this.vertTypeBuffer.getView(i)[0]=4,C3(t,this.indexBuffer.getView(i)),M3([0,0,0],1,this.colorBuffer.getView(i));var o=this.transformBuffer.getMatrixView(i);this.setTransformMatrix(e,o,r),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(e,t,n){var r=this.simpleShapeOptions.get(n);if(this._isVisible(e,r)){var i=r.shapeProps,o=this._getVertTypeForShape(e,i.shape);if(void 0===o||r.isSimple&&!r.isSimple(e))this.drawTexture(e,t,n);else{var a=this.instanceCount;if(this.vertTypeBuffer.getView(a)[0]=o,5===o||6===o){var s=r.getBoundingBox(e),l=this._getCornerRadius(e,i.radius,s),u=this.cornerRadiusBuffer.getView(a);u[0]=l,u[1]=l,u[2]=l,u[3]=l,6===o&&(u[0]=0,u[2]=0)}C3(t,this.indexBuffer.getView(a)),M3(e.pstyle(i.color).value,e.pstyle(i.opacity).value,this.colorBuffer.getView(a));var c=this.lineWidthBuffer.getView(a);if(c[0]=0,c[1]=0,i.border){var h=e.pstyle("border-width").value;if(h>0){M3(e.pstyle("border-color").value,e.pstyle("border-opacity").value,this.borderColorBuffer.getView(a));var d=e.pstyle("border-position").value;if("inside"===d)c[0]=0,c[1]=-h;else if("outside"===d)c[0]=h,c[1]=0;else{var f=h/2;c[0]=f,c[1]=-f}}}var p=this.transformBuffer.getMatrixView(a);this.setTransformMatrix(e,p,r),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"_getVertTypeForShape",value:function(e,t){switch(e.pstyle(t).value){case"rectangle":return 4;case"ellipse":return 7;case"roundrectangle":case"round-rectangle":return 5;case"bottom-round-rectangle":return 6;default:return}}},{key:"_getCornerRadius",value:function(e,t,n){var r=n.w,i=n.h;if("auto"===e.pstyle(t).value)return vK(r,i);var o=e.pstyle(t).pfValue,a=r/2,s=i/2;return Math.min(o,s,a)}},{key:"drawEdgeArrow",value:function(e,t,n){if(e.visible()){var r,i,o,a=e._private.rscratch;if("source"===n?(r=a.arrowStartX,i=a.arrowStartY,o=a.srcArrowAngle):(r=a.arrowEndX,i=a.arrowEndY,o=a.tgtArrowAngle),!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o))if("none"!==e.pstyle(n+"-arrow-shape").value){var s=e.pstyle(n+"-arrow-color").value,l=e.pstyle("opacity").value*e.pstyle("line-opacity").value,u=e.pstyle("width").pfValue,c=e.pstyle("arrow-scale").value,h=this.r.getArrowWidth(u,c),d=this.instanceCount,f=this.transformBuffer.getMatrixView(d);F3(f),z3(f,f,[r,i]),G3(f,f,[h,h]),U3(f,f,o),this.vertTypeBuffer.getView(d)[0]=3,C3(t,this.indexBuffer.getView(d)),M3(s,l,this.colorBuffer.getView(d)),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"drawEdgeLine",value:function(e,t){if(e.visible()){var n=this._getEdgePoints(e);if(n){var r=e.pstyle("opacity").value,i=e.pstyle("line-opacity").value,o=e.pstyle("width").pfValue,a=e.pstyle("line-color").value,s=r*i;if(n.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),4==n.length){var l=this.instanceCount;this.vertTypeBuffer.getView(l)[0]=1,C3(t,this.indexBuffer.getView(l)),M3(a,s,this.colorBuffer.getView(l)),this.lineWidthBuffer.getView(l)[0]=o;var u=this.pointAPointBBuffer.getView(l);u[0]=n[0],u[1]=n[1],u[2]=n[2],u[3]=n[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var c=0;c<n.length-2;c+=2){var h=this.instanceCount;this.vertTypeBuffer.getView(h)[0]=2,C3(t,this.indexBuffer.getView(h)),M3(a,s,this.colorBuffer.getView(h)),this.lineWidthBuffer.getView(h)[0]=o;var d=n[c-2],f=n[c-1],p=n[c],g=n[c+1],m=n[c+2],v=n[c+3],y=n[c+4],b=n[c+5];0==c&&(d=2*p-m+.001,f=2*g-v+.001),c==n.length-4&&(y=2*m-p+.001,b=2*v-g+.001);var x=this.pointAPointBBuffer.getView(h);x[0]=d,x[1]=f,x[2]=p,x[3]=g;var w=this.pointCPointDBuffer.getView(h);w[0]=m,w[1]=v,w[2]=y,w[3]=b,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(e){var t=e._private.rscratch;return!t.badLine&&null!=t.allpts&&!isNaN(t.allpts[0])}},{key:"_getEdgePoints",value:function(e){var t=e._private.rscratch;if(this._isValidEdge(e)){var n=t.allpts;if(4==n.length)return n;var r=this._getNumSegments(e);return this._getCurveSegmentPoints(n,r)}}},{key:"_getNumSegments",value:function(e){return Math.min(Math.max(15,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(e,t){if(4==e.length)return e;for(var n=Array(2*(t+1)),r=0;r<=t;r++)if(0==r)n[0]=e[0],n[1]=e[1];else if(r==t)n[2*r]=e[e.length-2],n[2*r+1]=e[e.length-1];else{var i=r/t;this._setCurvePoint(e,i,n,2*r)}return n}},{key:"_setCurvePoint",value:function(e,t,n,r){if(!(e.length<=2)){for(var i=Array(e.length-2),o=0;o<i.length;o+=2){var a=(1-t)*e[o]+t*e[o+2],s=(1-t)*e[o+1]+t*e[o+3];i[o]=a,i[o+1]=s}return this._setCurvePoint(i,t,n,r)}n[r]=e[0],n[r+1]=e[1]}},{key:"endBatch",value:function(){var e=this.gl,t=this.vao,n=this.vertexCount,r=this.instanceCount;if(0!==r){var i=this.renderTarget.picking?this.pickingProgram:this.program;e.useProgram(i),e.bindVertexArray(t);var o,a=YY(this.buffers);try{for(a.s();!(o=a.n()).done;){o.value.bufferSubData(r)}}catch(f){a.e(f)}finally{a.f()}for(var s,l,u=this.batchManager.getAtlases(),c=0;c<u.length;c++)u[c].bufferIfNeeded(e);for(var h=0;h<u.length;h++)e.activeTexture(e.TEXTURE0+h),e.bindTexture(e.TEXTURE_2D,u[h].texture),e.uniform1i(i.uTextures[h],h);e.uniform1f(i.uZoom,(s=this.r,l=s.pixelRatio,s.cy.zoom()*l)),e.uniformMatrix3fv(i.uPanZoomMatrix,!1,this.panZoomMatrix),e.uniform1i(i.uAtlasSize,this.batchManager.getAtlasSize());var d=M3(this.bgColor,1);e.uniform4fv(i.uBGColor,d),e.drawArraysInstanced(e.TRIANGLES,0,n,r),e.bindVertexArray(null),e.bindTexture(e.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:r,atlasCount:u.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var e=this.atlasManager.getDebugInfo(),t=e.reduce(function(e,t){return e+t.atlasCount},0),n=this.batchDebugInfo,r=n.reduce(function(e,t){return e+t.count},0);return{atlasInfo:e,totalAtlases:t,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:n.length,batchInfo:n,totalInstances:r}}}])}(),K3={};function Z3(e,t){var n=e._private.rscratch;return JW(n,"labelWrapCachedLines",t)||[]}K3.initWebgl=function(e,t){var n=this,r=n.data.contexts[n.WEBGL];e.bgColor=function(e){var t=e.cy.container(),n=t&&t.style&&t.style.backgroundColor||"white";return aW(n)}(n),e.webglTexSize=Math.min(e.webglTexSize,r.getParameter(r.MAX_TEXTURE_SIZE)),e.webglTexRows=Math.min(e.webglTexRows,54),e.webglTexRowsNodes=Math.min(e.webglTexRowsNodes,54),e.webglBatchSize=Math.min(e.webglBatchSize,16384),e.webglTexPerBatch=Math.min(e.webglTexPerBatch,r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)),n.webglDebug=e.webglDebug,n.webglDebugShowAtlases=e.webglDebugShowAtlases,n.pickingFrameBuffer=function(e){var t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var n=e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.bindFramebuffer(e.FRAMEBUFFER,null),t.setFramebufferAttachmentSizes=function(t,r){e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null)},t}(r),n.pickingFrameBuffer.needsDraw=!0,n.drawing=new X3(n,r,e);var i=function(e){return function(t){return n.getTextAngle(t,e)}},o=function(e){return function(t){var n=t.pstyle(e);return n&&n.value}},a=function(e){return function(t){return t.pstyle("".concat(e,"-opacity")).value>0}},s=function(e){return"yes"===e.pstyle("text-events").strValue?W3:q3},l=function(e){var t=e.position(),n=t.x,r=t.y,i=e.outerWidth(),o=e.outerHeight();return{w:i,h:o,x1:n-i/2,y1:r-o/2}};n.drawing.addAtlasCollection("node",{texRows:e.webglTexRowsNodes}),n.drawing.addAtlasCollection("label",{texRows:e.webglTexRows}),n.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement}),n.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:l,isSimple:S3,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),n.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:l,isVisible:a("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),n.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:l,isVisible:a("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),n.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:Q3(t.getLabelKey,null),getBoundingBox:J3(t.getLabelBox,null),drawClipped:!0,drawElement:t.drawLabel,getRotation:i(null),getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:o("label")}),n.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:Q3(t.getSourceLabelKey,"source"),getBoundingBox:J3(t.getSourceLabelBox,"source"),drawClipped:!0,drawElement:t.drawSourceLabel,getRotation:i("source"),getRotationPoint:t.getSourceLabelRotationPoint,getRotationOffset:t.getSourceLabelRotationOffset,isVisible:o("source-label")}),n.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:Q3(t.getTargetLabelKey,"target"),getBoundingBox:J3(t.getTargetLabelBox,"target"),drawClipped:!0,drawElement:t.drawTargetLabel,getRotation:i("target"),getRotationPoint:t.getTargetLabelRotationPoint,getRotationOffset:t.getTargetLabelRotationOffset,isVisible:o("target-label")});var u=bW(function(){n.data.gc=!0},1e4);n.onUpdateEleCalcs(function(e,t){var r=!1;t&&t.length>0&&(r|=n.drawing.invalidate(t)),r&&u()}),function(e){var t=e.render;e.render=function(n){n=n||{};var r=e.cy;e.webgl&&(r.zoom()>Y5?(!function(e){var t=e.data.contexts[e.WEBGL];t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}(e),t.call(e,n)):(!function(e){var t=function(t){t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.canvasWidth,e.canvasHeight),t.restore()};t(e.data.contexts[e.NODE]),t(e.data.contexts[e.DRAG])}(e),n6(e,n,Y3.SCREEN)))};var n=e.matchCanvasSize;e.matchCanvasSize=function(t){n.call(e,t),e.pickingFrameBuffer.setFramebufferAttachmentSizes(e.canvasWidth,e.canvasHeight),e.pickingFrameBuffer.needsDraw=!0},e.findNearestElements=function(t,n,r,i){return function(e,t,n){var r,i,o,a=function(e,t,n){var r,i,o,a,s=A3(e),l=s.pan,u=s.zoom,c=function(e,t,n,r,i){var o=r*n+t.x,a=i*n+t.y;return[o,a=Math.round(e.canvasHeight-a)]}(e,l,u,t,n),h=WY(c,2),d=h[0],f=h[1],p=6;if(r=d-p/2,i=f-p/2,a=p,0===(o=p)||0===a)return[];var g=e.data.contexts[e.WEBGL];g.bindFramebuffer(g.FRAMEBUFFER,e.pickingFrameBuffer),e.pickingFrameBuffer.needsDraw&&(g.viewport(0,0,g.canvas.width,g.canvas.height),n6(e,null,Y3.PICKING),e.pickingFrameBuffer.needsDraw=!1);var m=o*a,v=new Uint8Array(4*m);g.readPixels(r,i,o,a,g.RGBA,g.UNSIGNED_BYTE,v),g.bindFramebuffer(g.FRAMEBUFFER,null);for(var y=new Set,b=0;b<m;b++){var x=I3(v.slice(4*b,4*b+4))-1;x>=0&&y.add(x)}return y}(e,t,n),s=e.getCachedZSortedEles(),l=YY(a);try{for(l.s();!(o=l.n()).done;){var u=s[o.value];if(!r&&u.isNode()&&(r=u),!i&&u.isEdge()&&(i=u),r&&i)break}}catch(c){l.e(c)}finally{l.f()}return[r,i].filter(Boolean)}(e,t,n)};var r=e.invalidateCachedZSortedEles;e.invalidateCachedZSortedEles=function(){r.call(e),e.pickingFrameBuffer.needsDraw=!0};var i=e.notify;e.notify=function(t,n){i.call(e,t,n),"viewport"===t||"bounds"===t?e.pickingFrameBuffer.needsDraw=!0:"background"===t&&e.drawing.invalidate(n,{type:"node-body"})}}(n)};var Q3=function(e,t){return function(n){var r=e(n),i=Z3(n,t);return i.length>1?i.map(function(e,t){return"".concat(r,"_").concat(t)}):r}},J3=function(e,t){return function(n,r){var i=e(n);if("string"==typeof r){var o=r.indexOf("_");if(o>0){var a=Number(r.substring(o+1)),s=Z3(n,t),l=i.h/s.length,u=l*a,c=i.y1+u;return{x1:i.x1,w:i.w,y1:c,h:l,yOffset:u}}}return i}};function e6(e,t){var n=e.canvasWidth,r=e.canvasHeight,i=A3(e),o=i.pan,a=i.zoom;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,n,r),t.translate(o.x,o.y),t.scale(a,a)}function t6(e,t,n){var r=e.drawing;t+=1,n.isNode()?(r.drawNode(n,t,"node-underlay"),r.drawNode(n,t,"node-body"),r.drawTexture(n,t,"label"),r.drawNode(n,t,"node-overlay")):(r.drawEdgeLine(n,t),r.drawEdgeArrow(n,t,"source"),r.drawEdgeArrow(n,t,"target"),r.drawTexture(n,t,"label"),r.drawTexture(n,t,"edge-source-label"),r.drawTexture(n,t,"edge-target-label"))}function n6(e,t,n){var r;e.webglDebug&&(r=performance.now());var i=e.drawing,o=0;if(n.screen&&e.data.canvasNeedsRedraw[e.SELECT_BOX]&&function(e,t){e.drawSelectionRectangle(t,function(t){return e6(e,t)})}(e,t),e.data.canvasNeedsRedraw[e.NODE]||n.picking){var a=e.data.contexts[e.WEBGL];n.screen?(a.clearColor(0,0,0,0),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA)):a.disable(a.BLEND),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.viewport(0,0,a.canvas.width,a.canvas.height);var s=function(e){var t=e.canvasWidth,n=e.canvasHeight,r=A3(e),i=r.pan,o=r.zoom,a=B3();z3(a,a,[i.x,i.y]),G3(a,a,[o,o]);var s=B3();!function(e,t,n){e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1}(s,t,n);var l,u,c,h,d,f,p,g,m,v,y,b,x,w,E,T,_,k,A,S,N,M=B3();return l=M,c=a,h=(u=s)[0],d=u[1],f=u[2],p=u[3],g=u[4],m=u[5],v=u[6],y=u[7],b=u[8],x=c[0],w=c[1],E=c[2],T=c[3],_=c[4],k=c[5],A=c[6],S=c[7],N=c[8],l[0]=x*h+w*p+E*v,l[1]=x*d+w*g+E*y,l[2]=x*f+w*m+E*b,l[3]=T*h+_*p+k*v,l[4]=T*d+_*g+k*y,l[5]=T*f+_*m+k*b,l[6]=A*h+S*p+N*v,l[7]=A*d+S*g+N*y,l[8]=A*f+S*m+N*b,M}(e),l=e.getCachedZSortedEles();if(o=l.length,i.startFrame(s,n),n.screen){for(var u=0;u<l.nondrag.length;u++)t6(e,u,l.nondrag[u]);for(var c=0;c<l.drag.length;c++)t6(e,c,l.drag[c])}else if(n.picking)for(var h=0;h<l.length;h++)t6(e,h,l[h]);i.endFrame(),n.screen&&e.webglDebugShowAtlases&&(function(e){var t=e.data.contexts[e.NODE];t.save(),e6(e,t),t.strokeStyle="rgba(0, 0, 0, 0.3)",t.beginPath(),t.moveTo(-1e3,0),t.lineTo(1e3,0),t.stroke(),t.beginPath(),t.moveTo(0,-1e3),t.lineTo(0,1e3),t.stroke(),t.restore()}(e),function(e){var t=function(t,n,r){for(var i=t.atlasManager.getAtlasCollection(n),o=e.data.contexts[e.NODE],a=i.atlases,s=0;s<a.length;s++){var l=a[s].canvas;if(l){var u=l.width,c=l.height,h=u*s,d=l.height*r;o.save(),o.scale(.4,.4),o.drawImage(l,h,d),o.strokeStyle="black",o.rect(h,d,u,c),o.stroke(),o.restore()}}},n=0;t(e.drawing,"node",n++),t(e.drawing,"label",n++)}(e)),e.data.canvasNeedsRedraw[e.NODE]=!1,e.data.canvasNeedsRedraw[e.DRAG]=!1}if(e.webglDebug){var d,f=performance.now(),p=(Math.ceil(f-r),i.getDebugInfo()),g=(["".concat(o," elements"),"".concat(p.totalInstances," instances"),"".concat(p.batchCount," batches"),"".concat(p.totalAtlases," atlases"),"".concat(p.wrappedCount," wrapped textures"),"".concat(p.simpleCount," simple shapes")].join(", "),YY(p.atlasInfo));try{for(g.s();!(d=g.n()).done;)d.value}catch(m){g.e(m)}finally{g.f()}}e.data.gc&&(e.data.gc=!1,i.gc())}for(var r6={drawPolygonPath:function(e,t,n,r,i,o){var a=r/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+a*o[0],n+s*o[1]);for(var l=1;l<o.length/2;l++)e.lineTo(t+a*o[2*l],n+s*o[2*l+1]);e.closePath()},drawRoundPolygonPath:function(e,t,n,r,i,o,a){a.forEach(function(t){return b5(e,t)}),e.closePath()},drawRoundRectanglePath:function(e,t,n,r,i,o){var a=r/2,s=i/2,l="auto"===o?vK(r,i):Math.min(o,s,a);e.beginPath&&e.beginPath(),e.moveTo(t,n-s),e.arcTo(t+a,n-s,t+a,n,l),e.arcTo(t+a,n+s,t,n+s,l),e.arcTo(t-a,n+s,t-a,n,l),e.arcTo(t-a,n-s,t,n-s,l),e.lineTo(t,n-s),e.closePath()},drawBottomRoundRectanglePath:function(e,t,n,r,i,o){var a=r/2,s=i/2,l="auto"===o?vK(r,i):o;e.beginPath&&e.beginPath(),e.moveTo(t,n-s),e.lineTo(t+a,n-s),e.lineTo(t+a,n),e.arcTo(t+a,n+s,t,n+s,l),e.arcTo(t-a,n+s,t-a,n,l),e.lineTo(t-a,n-s),e.lineTo(t,n-s),e.closePath()},drawCutRectanglePath:function(e,t,n,r,i,o,a){var s=r/2,l=i/2,u="auto"===a?8:a;e.beginPath&&e.beginPath(),e.moveTo(t-s+u,n-l),e.lineTo(t+s-u,n-l),e.lineTo(t+s,n-l+u),e.lineTo(t+s,n+l-u),e.lineTo(t+s-u,n+l),e.lineTo(t-s+u,n+l),e.lineTo(t-s,n+l-u),e.lineTo(t-s,n-l+u),e.closePath()},drawBarrelPath:function(e,t,n,r,i){var o=r/2,a=i/2,s=t-o,l=t+o,u=n-a,c=n+a,h=bK(r,i),d=h.widthOffset,f=h.heightOffset,p=h.ctrlPtOffsetPct*d;e.beginPath&&e.beginPath(),e.moveTo(s,u+f),e.lineTo(s,c-f),e.quadraticCurveTo(s+p,c,s+d,c),e.lineTo(l-d,c),e.quadraticCurveTo(l-p,c,l,c-f),e.lineTo(l,u+f),e.quadraticCurveTo(l-p,u,l-d,u),e.lineTo(s+d,u),e.quadraticCurveTo(s+p,u,s,u+f),e.closePath()}},i6=Math.sin(0),o6=Math.cos(0),a6={},s6={},l6=Math.PI/40,u6=0*Math.PI;u6<2*Math.PI;u6+=l6)a6[u6]=Math.sin(u6),s6[u6]=Math.cos(u6);r6.drawEllipsePath=function(e,t,n,r,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,i/2,0,0,2*Math.PI);else for(var o,a,s=r/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=l6)o=t-s*a6[u]*i6+s*s6[u]*o6,a=n+l*s6[u]*i6+l*a6[u]*o6,0===u?e.moveTo(o,a):e.lineTo(o,a);e.closePath()};var c6={};function h6(e){var t=e.indexOf(",");return e.substr(t+1)}function d6(e,t,n){var r=function(){return t.toDataURL(n,e.quality)};switch(e.output){case"blob-promise":return new OZ(function(r,i){try{t.toBlob(function(e){null!=e?r(e):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,e.quality)}catch(o){i(o)}});case"blob":return function(e,t){for(var n=atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:t})}(h6(r()),n);case"base64":return h6(r());default:return r()}}c6.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},c6.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=e.full?Math.ceil(n.w):r[2],o=e.full?Math.ceil(n.h):r[3],a=Fq(e.maxWidth)||Fq(e.maxHeight),s=this.getPixelRatio(),l=1;if(void 0!==e.scale)i*=e.scale,o*=e.scale,l=e.scale;else if(a){var u=1/0,c=1/0;Fq(e.maxWidth)&&(u=l*e.maxWidth/i),Fq(e.maxHeight)&&(c=l*e.maxHeight/o),i*=l=Math.min(u,c),o*=l}a||(i*=s,o*=s,l*=s);var h=document.createElement("canvas");h.width=i,h.height=o,h.style.width=i+"px",h.style.height=o+"px";var d=h.getContext("2d");if(i>0&&o>0){d.clearRect(0,0,i,o),d.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(e.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,f),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var p=t.pan(),g={x:p.x*l,y:p.y*l};l*=t.zoom(),d.translate(g.x,g.y),d.scale(l,l),this.drawElements(d,f),d.scale(1/l,1/l),d.translate(-g.x,-g.y)}e.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=e.bg,d.rect(0,0,i,o),d.fill())}return h},c6.png=function(e){return d6(e,this.bufferCanvasImage(e),"image/png")},c6.jpg=function(e){return d6(e,this.bufferCanvasImage(e),"image/jpeg")};var f6={nodeShapeImpl:function(e,t,n,r,i,o,a,s){switch(e){case"ellipse":return this.drawEllipsePath(t,n,r,i,o);case"polygon":return this.drawPolygonPath(t,n,r,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(t,n,r,i,o,a,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,n,r,i,o,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,n,r,i,o,a,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,n,r,i,o,s);case"barrel":return this.drawBarrelPath(t,n,r,i,o)}}},p6=m6,g6=m6.prototype;function m6(e){var t=this,n=t.cy.window().document;e.webgl&&(g6.CANVAS_LAYERS=t.CANVAS_LAYERS=4),t.data={canvases:new Array(g6.CANVAS_LAYERS),contexts:new Array(g6.CANVAS_LAYERS),canvasNeedsRedraw:new Array(g6.CANVAS_LAYERS),bufferCanvases:new Array(g6.BUFFER_COUNT),bufferContexts:new Array(g6.CANVAS_LAYERS)};var r="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";t.data.canvasContainer=n.createElement("div");var o=t.data.canvasContainer.style;t.data.canvasContainer.style[r]=i,o.position="relative",o.zIndex="0",o.overflow="hidden";var a=e.cy.container();a.appendChild(t.data.canvasContainer),a.style[r]=i;var s={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};eq&&eq.userAgent.match(/msie|trident|edge/i)&&(s["-ms-touch-action"]="none",s["touch-action"]="none");for(var l=0;l<g6.CANVAS_LAYERS;l++){var u=t.data.canvases[l]=n.createElement("canvas"),c=g6.CANVAS_TYPES[l];t.data.contexts[l]=u.getContext(c),t.data.contexts[l]||jW("Could not create canvas of type "+c),Object.keys(s).forEach(function(e){u.style[e]=s[e]}),u.style.position="absolute",u.setAttribute("data-id","layer"+l),u.style.zIndex=String(g6.CANVAS_LAYERS-l),t.data.canvasContainer.appendChild(u),t.data.canvasNeedsRedraw[l]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[g6.NODE].setAttribute("data-id","layer"+g6.NODE+"-node"),t.data.canvases[g6.SELECT_BOX].setAttribute("data-id","layer"+g6.SELECT_BOX+"-selectbox"),t.data.canvases[g6.DRAG].setAttribute("data-id","layer"+g6.DRAG+"-drag"),t.data.canvases[g6.WEBGL]&&t.data.canvases[g6.WEBGL].setAttribute("data-id","layer"+g6.WEBGL+"-webgl");for(l=0;l<g6.BUFFER_COUNT;l++)t.data.bufferCanvases[l]=n.createElement("canvas"),t.data.bufferContexts[l]=t.data.bufferCanvases[l].getContext("2d"),t.data.bufferCanvases[l].style.position="absolute",t.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),t.data.bufferCanvases[l].style.zIndex=String(-l-1),t.data.bufferCanvases[l].style.visibility="hidden";t.pathsEnabled=!0;var h=UX(),d=function(e){return{x:-e.w/2,y:-e.h/2}},f=function(e){return e[0]._private.nodeKey},p=function(e){return e[0]._private.labelStyleKey},g=function(e){return e[0]._private.sourceLabelStyleKey},m=function(e){return e[0]._private.targetLabelStyleKey},v=function(e,n,r,i,o){return t.drawElement(e,n,r,!1,!1,o)},y=function(e,n,r,i,o){return t.drawElementText(e,n,r,i,"main",o)},b=function(e,n,r,i,o){return t.drawElementText(e,n,r,i,"source",o)},x=function(e,n,r,i,o){return t.drawElementText(e,n,r,i,"target",o)},w=function(e){return e.boundingBox(),e[0]._private.bodyBounds},E=function(e){return e.boundingBox(),e[0]._private.labelBounds.main||h},T=function(e){return e.boundingBox(),e[0]._private.labelBounds.source||h},_=function(e){return e.boundingBox(),e[0]._private.labelBounds.target||h},k=function(e,t){return t},A=function(e){return{x:((t=w(e)).x1+t.x2)/2,y:(t.y1+t.y2)/2};var t},S=function(e,t,n){var r=e?e+"-":"";return{x:t.x+n.pstyle(r+"text-margin-x").pfValue,y:t.y+n.pstyle(r+"text-margin-y").pfValue}},N=function(e,t,n){var r=e[0]._private.rscratch;return{x:r[t],y:r[n]}},M=function(e){return S("",N(e,"labelX","labelY"),e)},C=function(e){return S("source",N(e,"sourceLabelX","sourceLabelY"),e)},I=function(e){return S("target",N(e,"targetLabelX","targetLabelY"),e)},R=function(e){return d(w(e))},L=function(e){return d(T(e))},O=function(e){return d(_(e))},D=function(e){var t=E(e),n=d(E(e));if(e.isNode()){switch(e.pstyle("text-halign").value){case"left":n.x=-t.w-(t.leftPad||0);break;case"right":n.x=-(t.rightPad||0)}switch(e.pstyle("text-valign").value){case"top":n.y=-t.h-(t.topPad||0);break;case"bottom":n.y=-(t.botPad||0)}}return n},P=t.data.eleTxrCache=new X5(t,{getKey:f,doesEleInvalidateKey:function(e){var t=e[0]._private;return!(t.oldBackgroundTimestamp===t.backgroundTimestamp)},drawElement:v,getBoundingBox:w,getRotationPoint:A,getRotationOffset:R,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),B=t.data.lblTxrCache=new X5(t,{getKey:p,drawElement:y,getBoundingBox:E,getRotationPoint:M,getRotationOffset:D,isVisible:k}),F=t.data.slbTxrCache=new X5(t,{getKey:g,drawElement:b,getBoundingBox:T,getRotationPoint:C,getRotationOffset:L,isVisible:k}),z=t.data.tlbTxrCache=new X5(t,{getKey:m,drawElement:x,getBoundingBox:_,getRotationPoint:I,getRotationOffset:O,isVisible:k}),U=t.data.lyrTxrCache=new Z5(t);t.onUpdateEleCalcs(function(e,t){P.invalidateElements(t),B.invalidateElements(t),F.invalidateElements(t),z.invalidateElements(t),U.invalidateElements(t);for(var n=0;n<t.length;n++){var r=t[n]._private;r.oldBackgroundTimestamp=r.backgroundTimestamp}});var G=function(e){for(var t=0;t<e.length;t++)U.enqueueElementRefinement(e[t].ele)};P.onDequeue(G),B.onDequeue(G),F.onDequeue(G),z.onDequeue(G),e.webgl&&t.initWebgl(e,{getStyleKey:f,getLabelKey:p,getSourceLabelKey:g,getTargetLabelKey:m,drawElement:v,drawLabel:y,drawSourceLabel:b,drawTargetLabel:x,getElementBox:w,getLabelBox:E,getSourceLabelBox:T,getTargetLabelBox:_,getElementRotationPoint:A,getElementRotationOffset:R,getLabelRotationPoint:M,getSourceLabelRotationPoint:C,getTargetLabelRotationPoint:I,getLabelRotationOffset:D,getSourceLabelRotationOffset:L,getTargetLabelRotationOffset:O})}g6.CANVAS_LAYERS=3,g6.SELECT_BOX=0,g6.DRAG=1,g6.NODE=2,g6.WEBGL=3,g6.CANVAS_TYPES=["2d","2d","2d","webgl2"],g6.BUFFER_COUNT=3,g6.TEXTURE_BUFFER=0,g6.MOTIONBLUR_BUFFER_NODE=1,g6.MOTIONBLUR_BUFFER_DRAG=2,g6.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[g6.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[g6.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[g6.SELECT_BOX]=t;break;case"gc":n.data.gc=!0}};var v6="undefined"!=typeof Path2D;g6.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},g6.usePaths=function(){return v6&&this.pathsEnabled},g6.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},g6.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},g6.makeOffscreenCanvas=function(e,t){var n;"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":ZY(OffscreenCanvas))?n=new OffscreenCanvas(e,t):((n=this.cy.window().document.createElement("canvas")).width=e,n.height=t);return n},[n3,l3,g3,v3,y3,x3,T3,K3,r6,c6,f6].forEach(function(e){oW(g6,e)});var y6=[{type:"layout",extensions:$4},{type:"renderer",extensions:[{name:"null",impl:Y4},{name:"base",impl:G5},{name:"canvas",impl:p6}]}],b6={},x6={};function w6(e,t,n){var r=n,i=function(e){$W()};if("core"===e){if(i4.prototype[t])return i();i4.prototype[t]=n}else if("collection"===e){if(x2.prototype[t])return i();x2.prototype[t]=n}else if("layout"===e){for(var o=function(e){this.options=e,n.call(this,e),Bq(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(n.prototype),s=[],l=0;l<s.length;l++){var u=s[l];a[u]=a[u]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=n.prototype.stop;a.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var n=0;n<t.length;n++)t[n].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var h=function(e){return e._private.cy},d={addEventFields:function(e,t){t.layout=e,t.cy=h(e),t.target=e},bubble:function(){return!0},parent:function(e){return h(e)}};oW(a,{createEmitter:function(){return this._private.emitter=new F1(d,this),this},emitter:function(){return this._private.emitter},on:function(e,t){return this.emitter().on(e,t),this},one:function(e,t){return this.emitter().one(e,t),this},once:function(e,t){return this.emitter().one(e,t),this},removeListener:function(e,t){return this.emitter().removeListener(e,t),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(e,t){return this.emitter().emit(e,t),this}}),r0.eventAliasesOn(a),r=o}else if("renderer"===e&&"null"!==t&&"base"!==t){var f=E6("renderer","base"),p=f.prototype,g=n,m=n.prototype,v=function(){f.apply(this,arguments),g.apply(this,arguments)},y=v.prototype;for(var b in p){var x=p[b];if(null!=m[b])return i();y[b]=x}for(var w in m)y[w]=m[w];p.clientFunctions.forEach(function(e){y[e]=y[e]||function(){jW("Renderer does not implement `renderer."+e+"()` on its prototype")}}),r=v}else if("__proto__"===e||"constructor"===e||"prototype"===e)return jW(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return lW({map:b6,keys:[e,t],value:r})}function E6(e,t){return uW({map:b6,keys:[e,t]})}function T6(e,t,n,r,i){return lW({map:x6,keys:[e,t,n,r],value:i})}function _6(e,t,n,r){return uW({map:x6,keys:[e,t,n,r]})}var k6=function(){return 2===arguments.length?E6.apply(null,arguments):3===arguments.length?w6.apply(null,arguments):4===arguments.length?_6.apply(null,arguments):5===arguments.length?T6.apply(null,arguments):void jW("Invalid extension access syntax")};i4.prototype.extension=k6,y6.forEach(function(e){e.extensions.forEach(function(t){w6(e.type,t.name,t.impl)})});var A6=function(){if(!(this instanceof A6))return new A6;this.length=0},S6=A6.prototype;S6.instanceString=function(){return"stylesheet"},S6.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},S6.css=function(e,t){var n=this.length-1;if(Oq(e))this[n].properties.push({name:e,value:t});else if(Bq(e))for(var r=e,i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],s=r[a];if(null!=s){var l=J2.properties[a]||J2.properties[Xq(a)];if(null!=l){var u=l.name,c=s;this[n].properties.push({name:u,value:c})}}}return this},S6.style=S6.css,S6.generateStyle=function(e){var t=new J2(e);return this.appendToStyle(t)},S6.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],r=n.selector,i=n.properties;e.selector(r);for(var o=0;o<i.length;o++){var a=i[o];e.css(a.name,a.value)}}return e};var N6=function(e){return void 0===e&&(e={}),Bq(e)?new i4(e):Oq(e)?k6.apply(k6,arguments):void 0};N6.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(N6),e.apply(null,t),this},N6.warnings=function(e){return HW(e)},N6.version="3.33.1",N6.stylesheet=N6.Stylesheet=A6;var M6,C6={exports:{}},I6={exports:{}},R6={exports:{}};function L6(){return M6?R6.exports:(M6=1,e=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t,n){function r(){}r.QUALITY=1,r.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,r.DEFAULT_INCREMENTAL=!1,r.DEFAULT_ANIMATION_ON_LAYOUT=!0,r.DEFAULT_ANIMATION_DURING_LAYOUT=!1,r.DEFAULT_ANIMATION_PERIOD=50,r.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,r.DEFAULT_GRAPH_MARGIN=15,r.NODE_DIMENSIONS_INCLUDE_LABELS=!1,r.SIMPLE_NODE_SIZE=40,r.SIMPLE_NODE_HALF_SIZE=r.SIMPLE_NODE_SIZE/2,r.EMPTY_COMPOUND_NODE_SIZE=40,r.MIN_EDGE_LENGTH=1,r.WORLD_BOUNDARY=1e6,r.INITIAL_WORLD_BOUNDARY=r.WORLD_BOUNDARY/1e3,r.WORLD_CENTER_X=1200,r.WORLD_CENTER_Y=900,e.exports=r},function(e,t,n){var r=n(2),i=n(8),o=n(9);function a(e,t,n){r.call(this,n),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=n,this.bendpoints=[],this.source=e,this.target=t}for(var s in a.prototype=Object.create(r.prototype),r)a[s]=r[s];a.prototype.getSource=function(){return this.source},a.prototype.getTarget=function(){return this.target},a.prototype.isInterGraph=function(){return this.isInterGraph},a.prototype.getLength=function(){return this.length},a.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},a.prototype.getBendpoints=function(){return this.bendpoints},a.prototype.getLca=function(){return this.lca},a.prototype.getSourceInLca=function(){return this.sourceInLca},a.prototype.getTargetInLca=function(){return this.targetInLca},a.prototype.getOtherEnd=function(e){if(this.source===e)return this.target;if(this.target===e)return this.source;throw"Node is not incident with this edge"},a.prototype.getOtherEndInGraph=function(e,t){for(var n=this.getOtherEnd(e),r=t.getGraphManager().getRoot();;){if(n.getOwner()==t)return n;if(n.getOwner()==r)break;n=n.getOwner().getParent()}return null},a.prototype.updateLength=function(){var e=new Array(4);this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),e),this.isOverlapingSourceAndTarget||(this.lengthX=e[0]-e[2],this.lengthY=e[1]-e[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},a.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=a},function(e,t,n){e.exports=function(e){this.vGraphObject=e}},function(e,t,n){var r=n(2),i=n(10),o=n(13),a=n(0),s=n(16),l=n(4);function u(e,t,n,a){null==n&&null==a&&(a=t),r.call(this,a),null!=e.graphManager&&(e=e.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=a,this.edges=[],this.graphManager=e,this.rect=null!=n&&null!=t?new o(t.x,t.y,n.width,n.height):new o}for(var c in u.prototype=Object.create(r.prototype),r)u[c]=r[c];u.prototype.getEdges=function(){return this.edges},u.prototype.getChild=function(){return this.child},u.prototype.getOwner=function(){return this.owner},u.prototype.getWidth=function(){return this.rect.width},u.prototype.setWidth=function(e){this.rect.width=e},u.prototype.getHeight=function(){return this.rect.height},u.prototype.setHeight=function(e){this.rect.height=e},u.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},u.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},u.prototype.getCenter=function(){return new l(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},u.prototype.getLocation=function(){return new l(this.rect.x,this.rect.y)},u.prototype.getRect=function(){return this.rect},u.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},u.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},u.prototype.setRect=function(e,t){this.rect.x=e.x,this.rect.y=e.y,this.rect.width=t.width,this.rect.height=t.height},u.prototype.setCenter=function(e,t){this.rect.x=e-this.rect.width/2,this.rect.y=t-this.rect.height/2},u.prototype.setLocation=function(e,t){this.rect.x=e,this.rect.y=t},u.prototype.moveBy=function(e,t){this.rect.x+=e,this.rect.y+=t},u.prototype.getEdgeListToNode=function(e){var t=[],n=this;return n.edges.forEach(function(r){if(r.target==e){if(r.source!=n)throw"Incorrect edge source!";t.push(r)}}),t},u.prototype.getEdgesBetween=function(e){var t=[],n=this;return n.edges.forEach(function(r){if(r.source!=n&&r.target!=n)throw"Incorrect edge source and/or target";r.target!=e&&r.source!=e||t.push(r)}),t},u.prototype.getNeighborsList=function(){var e=new Set,t=this;return t.edges.forEach(function(n){if(n.source==t)e.add(n.target);else{if(n.target!=t)throw"Incorrect incidency!";e.add(n.source)}}),e},u.prototype.withChildren=function(){var e=new Set;if(e.add(this),null!=this.child)for(var t=this.child.getNodes(),n=0;n<t.length;n++)t[n].withChildren().forEach(function(t){e.add(t)});return e},u.prototype.getNoOfChildren=function(){var e=0;if(null==this.child)e=1;else for(var t=this.child.getNodes(),n=0;n<t.length;n++)e+=t[n].getNoOfChildren();return 0==e&&(e=1),e},u.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},u.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},u.prototype.scatter=function(){var e,t,n=-a.INITIAL_WORLD_BOUNDARY,r=a.INITIAL_WORLD_BOUNDARY;e=a.WORLD_CENTER_X+s.nextDouble()*(r-n)+n;var i=-a.INITIAL_WORLD_BOUNDARY,o=a.INITIAL_WORLD_BOUNDARY;t=a.WORLD_CENTER_Y+s.nextDouble()*(o-i)+i,this.rect.x=e,this.rect.y=t},u.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var e=this.getChild();if(e.updateBounds(!0),this.rect.x=e.getLeft(),this.rect.y=e.getTop(),this.setWidth(e.getRight()-e.getLeft()),this.setHeight(e.getBottom()-e.getTop()),a.NODE_DIMENSIONS_INCLUDE_LABELS){var t=e.getRight()-e.getLeft(),n=e.getBottom()-e.getTop();this.labelWidth>t&&(this.rect.x-=(this.labelWidth-t)/2,this.setWidth(this.labelWidth)),this.labelHeight>n&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-n)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-n),this.setHeight(this.labelHeight))}}},u.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},u.prototype.transform=function(e){var t=this.rect.x;t>a.WORLD_BOUNDARY?t=a.WORLD_BOUNDARY:t<-a.WORLD_BOUNDARY&&(t=-a.WORLD_BOUNDARY);var n=this.rect.y;n>a.WORLD_BOUNDARY?n=a.WORLD_BOUNDARY:n<-a.WORLD_BOUNDARY&&(n=-a.WORLD_BOUNDARY);var r=new l(t,n),i=e.inverseTransformPoint(r);this.setLocation(i.x,i.y)},u.prototype.getLeft=function(){return this.rect.x},u.prototype.getRight=function(){return this.rect.x+this.rect.width},u.prototype.getTop=function(){return this.rect.y},u.prototype.getBottom=function(){return this.rect.y+this.rect.height},u.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=u},function(e,t,n){function r(e,t){null==e&&null==t?(this.x=0,this.y=0):(this.x=e,this.y=t)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.setX=function(e){this.x=e},r.prototype.setY=function(e){this.y=e},r.prototype.getDifference=function(e){return new DimensionD(this.x-e.x,this.y-e.y)},r.prototype.getCopy=function(){return new r(this.x,this.y)},r.prototype.translate=function(e){return this.x+=e.width,this.y+=e.height,this},e.exports=r},function(e,t,n){var r=n(2),i=n(10),o=n(0),a=n(6),s=n(3),l=n(1),u=n(13),c=n(12),h=n(11);function d(e,t,n){r.call(this,n),this.estimatedSize=i.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=e,null!=t&&t instanceof a?this.graphManager=t:null!=t&&t instanceof Layout&&(this.graphManager=t.graphManager)}for(var f in d.prototype=Object.create(r.prototype),r)d[f]=r[f];d.prototype.getNodes=function(){return this.nodes},d.prototype.getEdges=function(){return this.edges},d.prototype.getGraphManager=function(){return this.graphManager},d.prototype.getParent=function(){return this.parent},d.prototype.getLeft=function(){return this.left},d.prototype.getRight=function(){return this.right},d.prototype.getTop=function(){return this.top},d.prototype.getBottom=function(){return this.bottom},d.prototype.isConnected=function(){return this.isConnected},d.prototype.add=function(e,t,n){if(null==t&&null==n){var r=e;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(r)>-1)throw"Node already in graph!";return r.owner=this,this.getNodes().push(r),r}var i=e;if(!(this.getNodes().indexOf(t)>-1&&this.getNodes().indexOf(n)>-1))throw"Source or target not in graph!";if(t.owner!=n.owner||t.owner!=this)throw"Both owners must be this graph!";return t.owner!=n.owner?null:(i.source=t,i.target=n,i.isInterGraph=!1,this.getEdges().push(i),t.edges.push(i),n!=t&&n.edges.push(i),i)},d.prototype.remove=function(e){var t=e;if(e instanceof s){if(null==t)throw"Node is null!";if(null==t.owner||t.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var n=t.edges.slice(),r=n.length,i=0;i<r;i++)(o=n[i]).isInterGraph?this.graphManager.remove(o):o.source.owner.remove(o);if(-1==(a=this.nodes.indexOf(t)))throw"Node not in owner node list!";this.nodes.splice(a,1)}else if(e instanceof l){var o;if(null==(o=e))throw"Edge is null!";if(null==o.source||null==o.target)throw"Source and/or target is null!";if(null==o.source.owner||null==o.target.owner||o.source.owner!=this||o.target.owner!=this)throw"Source and/or target owner is invalid!";var a,u=o.source.edges.indexOf(o),c=o.target.edges.indexOf(o);if(!(u>-1&&c>-1))throw"Source and/or target doesn't know this edge!";if(o.source.edges.splice(u,1),o.target!=o.source&&o.target.edges.splice(c,1),-1==(a=o.source.owner.getEdges().indexOf(o)))throw"Not in owner's edge list!";o.source.owner.getEdges().splice(a,1)}},d.prototype.updateLeftTop=function(){for(var e,t,n,r=i.MAX_VALUE,o=i.MAX_VALUE,a=this.getNodes(),s=a.length,l=0;l<s;l++){var u=a[l];r>(e=u.getTop())&&(r=e),o>(t=u.getLeft())&&(o=t)}return r==i.MAX_VALUE?null:(n=null!=a[0].getParent().paddingLeft?a[0].getParent().paddingLeft:this.margin,this.left=o-n,this.top=r-n,new c(this.left,this.top))},d.prototype.updateBounds=function(e){for(var t,n,r,o,a,s=i.MAX_VALUE,l=-i.MAX_VALUE,c=i.MAX_VALUE,h=-i.MAX_VALUE,d=this.nodes,f=d.length,p=0;p<f;p++){var g=d[p];e&&null!=g.child&&g.updateBounds(),s>(t=g.getLeft())&&(s=t),l<(n=g.getRight())&&(l=n),c>(r=g.getTop())&&(c=r),h<(o=g.getBottom())&&(h=o)}var m=new u(s,c,l-s,h-c);s==i.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),a=null!=d[0].getParent().paddingLeft?d[0].getParent().paddingLeft:this.margin,this.left=m.x-a,this.right=m.x+m.width+a,this.top=m.y-a,this.bottom=m.y+m.height+a},d.calculateBounds=function(e){for(var t,n,r,o,a=i.MAX_VALUE,s=-i.MAX_VALUE,l=i.MAX_VALUE,c=-i.MAX_VALUE,h=e.length,d=0;d<h;d++){var f=e[d];a>(t=f.getLeft())&&(a=t),s<(n=f.getRight())&&(s=n),l>(r=f.getTop())&&(l=r),c<(o=f.getBottom())&&(c=o)}return new u(a,l,s-a,c-l)},d.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},d.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},d.prototype.calcEstimatedSize=function(){for(var e=0,t=this.nodes,n=t.length,r=0;r<n;r++)e+=t[r].calcEstimatedSize();return this.estimatedSize=0==e?o.EMPTY_COMPOUND_NODE_SIZE:e/Math.sqrt(this.nodes.length),this.estimatedSize},d.prototype.updateConnected=function(){var e=this;if(0!=this.nodes.length){var t,n,r=new h,i=new Set,o=this.nodes[0];for(o.withChildren().forEach(function(e){r.push(e),i.add(e)});0!==r.length;)for(var a=(t=(o=r.shift()).getEdges()).length,s=0;s<a;s++)null==(n=t[s].getOtherEndInGraph(o,this))||i.has(n)||n.withChildren().forEach(function(e){r.push(e),i.add(e)});if(this.isConnected=!1,i.size>=this.nodes.length){var l=0;i.forEach(function(t){t.owner==e&&l++}),l==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},e.exports=d},function(e,t,n){var r,i=n(1);function o(e){r=n(5),this.layout=e,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var e=this.layout.newGraph(),t=this.layout.newNode(null),n=this.add(e,t);return this.setRootGraph(n),this.rootGraph},o.prototype.add=function(e,t,n,r,i){if(null==n&&null==r&&null==i){if(null==e)throw"Graph is null!";if(null==t)throw"Parent node is null!";if(this.graphs.indexOf(e)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(e),null!=e.parent)throw"Already has a parent!";if(null!=t.child)throw"Already has a child!";return e.parent=t,t.child=e,e}i=n,n=e;var o=(r=t).getOwner(),a=i.getOwner();if(null==o||o.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==a||a.getGraphManager()!=this)throw"Target not in this graph mgr!";if(o==a)return n.isInterGraph=!1,o.add(n,r,i);if(n.isInterGraph=!0,n.source=r,n.target=i,this.edges.indexOf(n)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(n),null==n.source||null==n.target)throw"Edge source and/or target is null!";if(-1!=n.source.edges.indexOf(n)||-1!=n.target.edges.indexOf(n))throw"Edge already in source and/or target incidency list!";return n.source.edges.push(n),n.target.edges.push(n),n},o.prototype.remove=function(e){if(e instanceof r){var t=e;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(t!=this.rootGraph&&(null==t.parent||t.parent.graphManager!=this))throw"Invalid parent node!";for(var n,o=[],a=(o=o.concat(t.getEdges())).length,s=0;s<a;s++)n=o[s],t.remove(n);var l,u=[];for(a=(u=u.concat(t.getNodes())).length,s=0;s<a;s++)l=u[s],t.remove(l);t==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(t);this.graphs.splice(c,1),t.parent=null}else if(e instanceof i){if(null==(n=e))throw"Edge is null!";if(!n.isInterGraph)throw"Not an inter-graph edge!";if(null==n.source||null==n.target)throw"Source and/or target is null!";if(-1==n.source.edges.indexOf(n)||-1==n.target.edges.indexOf(n))throw"Source and/or target doesn't know this edge!";if(c=n.source.edges.indexOf(n),n.source.edges.splice(c,1),c=n.target.edges.indexOf(n),n.target.edges.splice(c,1),null==n.source.owner||null==n.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==n.source.owner.getGraphManager().edges.indexOf(n))throw"Not in owner graph manager's edge list!";c=n.source.owner.getGraphManager().edges.indexOf(n),n.source.owner.getGraphManager().edges.splice(c,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(null==this.allNodes){for(var e=[],t=this.getGraphs(),n=t.length,r=0;r<n;r++)e=e.concat(t[r].getNodes());this.allNodes=e}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(null==this.allEdges){var e=[],t=this.getGraphs();t.length;for(var n=0;n<t.length;n++)e=e.concat(t[n].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(e){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=e},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=e,null==e.parent&&(e.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(e,t){if(null==e||null==t)throw"assert failed";if(e==t)return!0;for(var n,r=e.getOwner();null!=(n=r.getParent());){if(n==t)return!0;if(null==(r=n.getOwner()))break}for(r=t.getOwner();null!=(n=r.getParent());){if(n==e)return!0;if(null==(r=n.getOwner()))break}return!1},o.prototype.calcLowestCommonAncestors=function(){for(var e,t,n,r,i,o=this.getAllEdges(),a=o.length,s=0;s<a;s++)if(t=(e=o[s]).source,n=e.target,e.lca=null,e.sourceInLca=t,e.targetInLca=n,t!=n){for(r=t.getOwner();null==e.lca;){for(e.targetInLca=n,i=n.getOwner();null==e.lca;){if(i==r){e.lca=i;break}if(i==this.rootGraph)break;if(null!=e.lca)throw"assert failed";e.targetInLca=i.getParent(),i=e.targetInLca.getOwner()}if(r==this.rootGraph)break;null==e.lca&&(e.sourceInLca=r.getParent(),r=e.sourceInLca.getOwner())}if(null==e.lca)throw"assert failed"}else e.lca=t.getOwner()},o.prototype.calcLowestCommonAncestor=function(e,t){if(e==t)return e.getOwner();for(var n=e.getOwner();null!=n;){for(var r=t.getOwner();null!=r;){if(r==n)return r;r=r.getParent().getOwner()}n=n.getParent().getOwner()}return n},o.prototype.calcInclusionTreeDepths=function(e,t){var n;null==e&&null==t&&(e=this.rootGraph,t=1);for(var r=e.getNodes(),i=r.length,o=0;o<i;o++)(n=r[o]).inclusionTreeDepth=t,null!=n.child&&this.calcInclusionTreeDepths(n.child,t+1)},o.prototype.includesInvalidEdge=function(){for(var e,t=this.edges.length,n=0;n<t;n++)if(e=this.edges[n],this.isOneAncestorOfOther(e.source,e.target))return!0;return!1},e.exports=o},function(e,t,n){var r=n(0);function i(){}for(var o in r)i[o]=r[o];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=3*i.MAX_NODE_DISPLACEMENT_INCREMENTAL,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=i},function(e,t,n){var r=n(12);function i(){}i.calcSeparationAmount=function(e,t,n,r){if(!e.intersects(t))throw"assert failed";var i=new Array(2);this.decideDirectionsForOverlappingNodes(e,t,i),n[0]=Math.min(e.getRight(),t.getRight())-Math.max(e.x,t.x),n[1]=Math.min(e.getBottom(),t.getBottom())-Math.max(e.y,t.y),e.getX()<=t.getX()&&e.getRight()>=t.getRight()?n[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight()):t.getX()<=e.getX()&&t.getRight()>=e.getRight()&&(n[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight())),e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()?n[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()):t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()&&(n[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()));var o=Math.abs((t.getCenterY()-e.getCenterY())/(t.getCenterX()-e.getCenterX()));t.getCenterY()===e.getCenterY()&&t.getCenterX()===e.getCenterX()&&(o=1);var a=o*n[0],s=n[1]/o;n[0]<s?s=n[0]:a=n[1],n[0]=-1*i[0]*(s/2+r),n[1]=-1*i[1]*(a/2+r)},i.decideDirectionsForOverlappingNodes=function(e,t,n){e.getCenterX()<t.getCenterX()?n[0]=-1:n[0]=1,e.getCenterY()<t.getCenterY()?n[1]=-1:n[1]=1},i.getIntersection2=function(e,t,n){var r=e.getCenterX(),i=e.getCenterY(),o=t.getCenterX(),a=t.getCenterY();if(e.intersects(t))return n[0]=r,n[1]=i,n[2]=o,n[3]=a,!0;var s=e.getX(),l=e.getY(),u=e.getRight(),c=e.getX(),h=e.getBottom(),d=e.getRight(),f=e.getWidthHalf(),p=e.getHeightHalf(),g=t.getX(),m=t.getY(),v=t.getRight(),y=t.getX(),b=t.getBottom(),x=t.getRight(),w=t.getWidthHalf(),E=t.getHeightHalf(),T=!1,_=!1;if(r===o){if(i>a)return n[0]=r,n[1]=l,n[2]=o,n[3]=b,!1;if(i<a)return n[0]=r,n[1]=h,n[2]=o,n[3]=m,!1}else if(i===a){if(r>o)return n[0]=s,n[1]=i,n[2]=v,n[3]=a,!1;if(r<o)return n[0]=u,n[1]=i,n[2]=g,n[3]=a,!1}else{var k=e.height/e.width,A=t.height/t.width,S=(a-i)/(o-r),N=void 0,M=void 0,C=void 0,I=void 0,R=void 0,L=void 0;if(-k===S?r>o?(n[0]=c,n[1]=h,T=!0):(n[0]=u,n[1]=l,T=!0):k===S&&(r>o?(n[0]=s,n[1]=l,T=!0):(n[0]=d,n[1]=h,T=!0)),-A===S?o>r?(n[2]=y,n[3]=b,_=!0):(n[2]=v,n[3]=m,_=!0):A===S&&(o>r?(n[2]=g,n[3]=m,_=!0):(n[2]=x,n[3]=b,_=!0)),T&&_)return!1;if(r>o?i>a?(N=this.getCardinalDirection(k,S,4),M=this.getCardinalDirection(A,S,2)):(N=this.getCardinalDirection(-k,S,3),M=this.getCardinalDirection(-A,S,1)):i>a?(N=this.getCardinalDirection(-k,S,1),M=this.getCardinalDirection(-A,S,3)):(N=this.getCardinalDirection(k,S,2),M=this.getCardinalDirection(A,S,4)),!T)switch(N){case 1:I=l,C=r+-p/S,n[0]=C,n[1]=I;break;case 2:C=d,I=i+f*S,n[0]=C,n[1]=I;break;case 3:I=h,C=r+p/S,n[0]=C,n[1]=I;break;case 4:C=c,I=i+-f*S,n[0]=C,n[1]=I}if(!_)switch(M){case 1:L=m,R=o+-E/S,n[2]=R,n[3]=L;break;case 2:R=x,L=a+w*S,n[2]=R,n[3]=L;break;case 3:L=b,R=o+E/S,n[2]=R,n[3]=L;break;case 4:R=y,L=a+-w*S,n[2]=R,n[3]=L}}return!1},i.getCardinalDirection=function(e,t,n){return e>t?n:1+n%4},i.getIntersection=function(e,t,n,i){if(null==i)return this.getIntersection2(e,t,n);var o,a,s,l,u,c,h,d=e.x,f=e.y,p=t.x,g=t.y,m=n.x,v=n.y,y=i.x,b=i.y;return 0===(h=(o=g-f)*(l=m-y)-(a=b-v)*(s=d-p))?null:new r((s*(c=y*v-m*b)-l*(u=p*f-d*g))/h,(a*u-o*c)/h)},i.angleOfVector=function(e,t,n,r){var i=void 0;return e!==n?(i=Math.atan((r-t)/(n-e)),n<e?i+=Math.PI:r<t&&(i+=this.TWO_PI)):i=r<t?this.ONE_AND_HALF_PI:this.HALF_PI,i},i.doIntersect=function(e,t,n,r){var i=e.x,o=e.y,a=t.x,s=t.y,l=n.x,u=n.y,c=r.x,h=r.y,d=(a-i)*(h-u)-(c-l)*(s-o);if(0===d)return!1;var f=((h-u)*(c-i)+(l-c)*(h-o))/d,p=((o-s)*(c-i)+(a-i)*(h-o))/d;return 0<f&&f<1&&0<p&&p<1},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,e.exports=i},function(e,t,n){function r(){}r.sign=function(e){return e>0?1:e<0?-1:0},r.floor=function(e){return e<0?Math.ceil(e):Math.floor(e)},r.ceil=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.exports=r},function(e,t,n){function r(){}r.MAX_VALUE=2147483647,r.MIN_VALUE=-2147483648,e.exports=r},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return{value:e,next:null,prev:null}},o=function(e,t,n,r){return null!==e?e.next=t:r.head=t,null!==n?n.prev=t:r.tail=t,t.prev=e,t.next=n,r.length++,t},a=function(e,t){var n=e.prev,r=e.next;return null!==n?n.next=r:t.head=r,null!==r?r.prev=n:t.tail=n,e.prev=e.next=null,t.length--,e},s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.length=0,this.head=null,this.tail=null,null!=t&&t.forEach(function(e){return n.push(e)})}return r(e,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(e,t){return o(t.prev,i(e),t,this)}},{key:"insertAfter",value:function(e,t){return o(t,i(e),t.next,this)}},{key:"insertNodeBefore",value:function(e,t){return o(t.prev,e,t,this)}},{key:"insertNodeAfter",value:function(e,t){return o(t,e,t.next,this)}},{key:"push",value:function(e){return o(this.tail,i(e),null,this)}},{key:"unshift",value:function(e){return o(null,i(e),this.head,this)}},{key:"remove",value:function(e){return a(e,this)}},{key:"pop",value:function(){return a(this.tail,this).value}},{key:"popNode",value:function(){return a(this.tail,this)}},{key:"shift",value:function(){return a(this.head,this).value}},{key:"shiftNode",value:function(){return a(this.head,this)}},{key:"get_object_at",value:function(e){if(e<=this.length()){for(var t=1,n=this.head;t<e;)n=n.next,t++;return n.value}}},{key:"set_object_at",value:function(e,t){if(e<=this.length()){for(var n=1,r=this.head;n<e;)r=r.next,n++;r.value=t}}}]),e}();e.exports=s},function(e,t,n){function r(e,t,n){this.x=null,this.y=null,null==e&&null==t&&null==n?(this.x=0,this.y=0):"number"==typeof e&&"number"==typeof t&&null==n?(this.x=e,this.y=t):"Point"==e.constructor.name&&null==t&&null==n&&(n=e,this.x=n.x,this.y=n.y)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.getLocation=function(){return new r(this.x,this.y)},r.prototype.setLocation=function(e,t,n){"Point"==e.constructor.name&&null==t&&null==n?(n=e,this.setLocation(n.x,n.y)):"number"==typeof e&&"number"==typeof t&&null==n&&(parseInt(e)==e&&parseInt(t)==t?this.move(e,t):(this.x=Math.floor(e+.5),this.y=Math.floor(t+.5)))},r.prototype.move=function(e,t){this.x=e,this.y=t},r.prototype.translate=function(e,t){this.x+=e,this.y+=t},r.prototype.equals=function(e){if("Point"==e.constructor.name){var t=e;return this.x==t.x&&this.y==t.y}return this==e},r.prototype.toString=function(){return(new r).constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=r},function(e,t,n){function r(e,t,n,r){this.x=0,this.y=0,this.width=0,this.height=0,null!=e&&null!=t&&null!=n&&null!=r&&(this.x=e,this.y=t,this.width=n,this.height=r)}r.prototype.getX=function(){return this.x},r.prototype.setX=function(e){this.x=e},r.prototype.getY=function(){return this.y},r.prototype.setY=function(e){this.y=e},r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(e){this.width=e},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(e){this.height=e},r.prototype.getRight=function(){return this.x+this.width},r.prototype.getBottom=function(){return this.y+this.height},r.prototype.intersects=function(e){return!(this.getRight()<e.x||this.getBottom()<e.y||e.getRight()<this.x||e.getBottom()<this.y)},r.prototype.getCenterX=function(){return this.x+this.width/2},r.prototype.getMinX=function(){return this.getX()},r.prototype.getMaxX=function(){return this.getX()+this.width},r.prototype.getCenterY=function(){return this.y+this.height/2},r.prototype.getMinY=function(){return this.getY()},r.prototype.getMaxY=function(){return this.getY()+this.height},r.prototype.getWidthHalf=function(){return this.width/2},r.prototype.getHeightHalf=function(){return this.height/2},e.exports=r},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){}i.lastID=0,i.createID=function(e){return i.isPrimitive(e)?e:(null!=e.uniqueID||(e.uniqueID=i.getString(),i.lastID++),e.uniqueID)},i.getString=function(e){return null==e&&(e=i.lastID),"Object#"+e},i.isPrimitive=function(e){var t=void 0===e?"undefined":r(e);return null==e||"object"!=t&&"function"!=t},e.exports=i},function(e,t,n){function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=n(0),o=n(6),a=n(3),s=n(1),l=n(5),u=n(4),c=n(17),h=n(27);function d(e){h.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=e&&(this.isRemoteUse=e)}d.RANDOM_SEED=1,d.prototype=Object.create(h.prototype),d.prototype.getGraphManager=function(){return this.graphManager},d.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},d.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},d.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},d.prototype.newGraphManager=function(){var e=new o(this);return this.graphManager=e,e},d.prototype.newGraph=function(e){return new l(null,this.graphManager,e)},d.prototype.newNode=function(e){return new a(this.graphManager,e)},d.prototype.newEdge=function(e){return new s(null,null,e)},d.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},d.prototype.runLayout=function(){var e;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),e=!this.checkLayoutSuccess()&&this.layout(),"during"!==i.ANIMATE&&(e&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,e)},d.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},d.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var e=this.graphManager.getAllEdges(),t=0;t<e.length;t++)e[t];var n=this.graphManager.getRoot().getNodes();for(t=0;t<n.length;t++)n[t];this.update(this.graphManager.getRoot())}},d.prototype.update=function(e){if(null==e)this.update2();else if(e instanceof a){var t=e;if(null!=t.getChild())for(var n=t.getChild().getNodes(),r=0;r<n.length;r++)update(n[r]);null!=t.vGraphObject&&t.vGraphObject.update(t)}else if(e instanceof s){var i=e;null!=i.vGraphObject&&i.vGraphObject.update(i)}else if(e instanceof l){var o=e;null!=o.vGraphObject&&o.vGraphObject.update(o)}},d.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},d.prototype.transform=function(e){if(null==e)this.transform(new u(0,0));else{var t=new c,n=this.graphManager.getRoot().updateLeftTop();if(null!=n){t.setWorldOrgX(e.x),t.setWorldOrgY(e.y),t.setDeviceOrgX(n.x),t.setDeviceOrgY(n.y);for(var r=this.getAllNodes(),i=0;i<r.length;i++)r[i].transform(t)}}},d.prototype.positionNodesRandomly=function(e){if(null==e)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var t,n,r=e.getNodes(),i=0;i<r.length;i++)null==(n=(t=r[i]).getChild())||0==n.getNodes().length?t.scatter():(this.positionNodesRandomly(n),t.updateBounds())},d.prototype.getFlatForest=function(){for(var e=[],t=!0,n=this.graphManager.getRoot().getNodes(),i=!0,o=0;o<n.length;o++)null!=n[o].getChild()&&(i=!1);if(!i)return e;var a=new Set,s=[],l=new Map,u=[];for(u=u.concat(n);u.length>0&&t;){for(s.push(u[0]);s.length>0&&t;){var c=s[0];s.splice(0,1),a.add(c);var h=c.getEdges();for(o=0;o<h.length;o++){var d=h[o].getOtherEnd(c);if(l.get(c)!=d){if(a.has(d)){t=!1;break}s.push(d),l.set(d,c)}}}if(t){var f=[].concat(r(a));for(e.push(f),o=0;o<f.length;o++){var p=f[o],g=u.indexOf(p);g>-1&&u.splice(g,1)}a=new Set,l=new Map}else e=[]}return e},d.prototype.createDummyNodesForBendpoints=function(e){for(var t=[],n=e.source,r=this.graphManager.calcLowestCommonAncestor(e.source,e.target),i=0;i<e.bendpoints.length;i++){var o=this.newNode(null);o.setRect(new Point(0,0),new Dimension(1,1)),r.add(o);var a=this.newEdge(null);this.graphManager.add(a,n,o),t.add(o),n=o}return a=this.newEdge(null),this.graphManager.add(a,n,e.target),this.edgeToDummyNodes.set(e,t),e.isInterGraph()?this.graphManager.remove(e):r.remove(e),t},d.prototype.createBendpointsFromDummyNodes=function(){var e=[];e=e.concat(this.graphManager.getAllEdges()),e=[].concat(r(this.edgeToDummyNodes.keys())).concat(e);for(var t=0;t<e.length;t++){var n=e[t];if(n.bendpoints.length>0){for(var i=this.edgeToDummyNodes.get(n),o=0;o<i.length;o++){var a=i[o],s=new u(a.getCenterX(),a.getCenterY()),l=n.bendpoints.get(o);l.x=s.x,l.y=s.y,a.getOwner().remove(a)}this.graphManager.add(n,n.source,n.target)}}},d.transform=function(e,t,n,r){if(null!=n&&null!=r){var i=t;return e<=50?i-=(t-t/n)/50*(50-e):i+=(t*r-t)/50*(e-50),i}var o,a;return e<=50?(o=9*t/500,a=t/10):(o=9*t/50,a=-8*t),o*e+a},d.findCenterOfTree=function(e){var t=[];t=t.concat(e);var n=[],r=new Map,i=!1,o=null;1!=t.length&&2!=t.length||(i=!0,o=t[0]);for(var a=0;a<t.length;a++){var s=(c=t[a]).getNeighborsList().size;r.set(c,c.getNeighborsList().size),1==s&&n.push(c)}var l=[];for(l=l.concat(n);!i;){var u=[];for(u=u.concat(l),l=[],a=0;a<t.length;a++){var c=t[a],h=t.indexOf(c);h>=0&&t.splice(h,1),c.getNeighborsList().forEach(function(e){if(n.indexOf(e)<0){var t=r.get(e)-1;1==t&&l.push(e),r.set(e,t)}})}n=n.concat(l),1!=t.length&&2!=t.length||(i=!0,o=t[0])}return o},d.prototype.setGraphManager=function(e){this.graphManager=e},e.exports=d},function(e,t,n){function r(){}r.seed=1,r.x=0,r.nextDouble=function(){return r.x=1e4*Math.sin(r.seed++),r.x-Math.floor(r.x)},e.exports=r},function(e,t,n){var r=n(4);function i(e,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(e){this.lworldOrgX=e},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(e){this.lworldOrgY=e},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(e){this.lworldExtX=e},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(e){this.lworldExtY=e},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(e){this.ldeviceOrgX=e},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(e){this.ldeviceOrgY=e},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(e){this.ldeviceExtX=e},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(e){this.ldeviceExtY=e},i.prototype.transformX=function(e){var t=0,n=this.lworldExtX;return 0!=n&&(t=this.ldeviceOrgX+(e-this.lworldOrgX)*this.ldeviceExtX/n),t},i.prototype.transformY=function(e){var t=0,n=this.lworldExtY;return 0!=n&&(t=this.ldeviceOrgY+(e-this.lworldOrgY)*this.ldeviceExtY/n),t},i.prototype.inverseTransformX=function(e){var t=0,n=this.ldeviceExtX;return 0!=n&&(t=this.lworldOrgX+(e-this.ldeviceOrgX)*this.lworldExtX/n),t},i.prototype.inverseTransformY=function(e){var t=0,n=this.ldeviceExtY;return 0!=n&&(t=this.lworldOrgY+(e-this.ldeviceOrgY)*this.lworldExtY/n),t},i.prototype.inverseTransformPoint=function(e){return new r(this.inverseTransformX(e.x),this.inverseTransformY(e.y))},e.exports=i},function(e,t,n){var r=n(15),i=n(7),o=n(0),a=n(8),s=n(9);function l(){r.call(this),this.useSmartIdealEdgeLengthCalculation=i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=i.DEFAULT_EDGE_LENGTH,this.springConstant=i.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=i.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=i.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=i.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=i.MAX_ITERATIONS}for(var u in l.prototype=Object.create(r.prototype),r)l[u]=r[u];l.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},l.prototype.calcIdealEdgeLengths=function(){for(var e,t,n,r,a,s,l=this.getGraphManager().getAllEdges(),u=0;u<l.length;u++)(e=l[u]).idealLength=this.idealEdgeLength,e.isInterGraph&&(n=e.getSource(),r=e.getTarget(),a=e.getSourceInLca().getEstimatedSize(),s=e.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(e.idealLength+=a+s-2*o.SIMPLE_NODE_SIZE),t=e.getLca().getInclusionTreeDepth(),e.idealLength+=i.DEFAULT_EDGE_LENGTH*i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(n.getInclusionTreeDepth()+r.getInclusionTreeDepth()-2*t))},l.prototype.initSpringEmbedder=function(){var e=this.getAllNodes().length;this.incremental?(e>i.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*i.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(e-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-i.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT_INCREMENTAL):(e>i.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(i.COOLING_ADAPTATION_FACTOR,1-(e-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*(1-i.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},l.prototype.calcSpringForces=function(){for(var e,t=this.getAllEdges(),n=0;n<t.length;n++)e=t[n],this.calcSpringForce(e,e.idealLength)},l.prototype.calcRepulsionForces=function(){var e,t,n,r,o,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&a&&this.updateGrid(),o=new Set,e=0;e<l.length;e++)n=l[e],this.calculateRepulsionForceOfANode(n,o,a,s),o.add(n);else for(e=0;e<l.length;e++)for(n=l[e],t=e+1;t<l.length;t++)r=l[t],n.getOwner()==r.getOwner()&&this.calcRepulsionForce(n,r)},l.prototype.calcGravitationalForces=function(){for(var e,t=this.getAllNodesToApplyGravitation(),n=0;n<t.length;n++)e=t[n],this.calcGravitationalForce(e)},l.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].move()},l.prototype.calcSpringForce=function(e,t){var n,r,i,o,a=e.getSource(),s=e.getTarget();if(this.uniformLeafNodeSizes&&null==a.getChild()&&null==s.getChild())e.updateLengthSimple();else if(e.updateLength(),e.isOverlapingSourceAndTarget)return;0!=(n=e.getLength())&&(i=(r=this.springConstant*(n-t))*(e.lengthX/n),o=r*(e.lengthY/n),a.springForceX+=i,a.springForceY+=o,s.springForceX-=i,s.springForceY-=o)},l.prototype.calcRepulsionForce=function(e,t){var n,r,o,l,u,c,h,d=e.getRect(),f=t.getRect(),p=new Array(2),g=new Array(4);if(d.intersects(f)){a.calcSeparationAmount(d,f,p,i.DEFAULT_EDGE_LENGTH/2),c=2*p[0],h=2*p[1];var m=e.noOfChildren*t.noOfChildren/(e.noOfChildren+t.noOfChildren);e.repulsionForceX-=m*c,e.repulsionForceY-=m*h,t.repulsionForceX+=m*c,t.repulsionForceY+=m*h}else this.uniformLeafNodeSizes&&null==e.getChild()&&null==t.getChild()?(n=f.getCenterX()-d.getCenterX(),r=f.getCenterY()-d.getCenterY()):(a.getIntersection(d,f,g),n=g[2]-g[0],r=g[3]-g[1]),Math.abs(n)<i.MIN_REPULSION_DIST&&(n=s.sign(n)*i.MIN_REPULSION_DIST),Math.abs(r)<i.MIN_REPULSION_DIST&&(r=s.sign(r)*i.MIN_REPULSION_DIST),o=n*n+r*r,l=Math.sqrt(o),c=(u=this.repulsionConstant*e.noOfChildren*t.noOfChildren/o)*n/l,h=u*r/l,e.repulsionForceX-=c,e.repulsionForceY-=h,t.repulsionForceX+=c,t.repulsionForceY+=h},l.prototype.calcGravitationalForce=function(e){var t,n,r,i,o,a,s,l;n=((t=e.getOwner()).getRight()+t.getLeft())/2,r=(t.getTop()+t.getBottom())/2,i=e.getCenterX()-n,o=e.getCenterY()-r,a=Math.abs(i)+e.getWidth()/2,s=Math.abs(o)+e.getHeight()/2,e.getOwner()==this.graphManager.getRoot()?(a>(l=t.getEstimatedSize()*this.gravityRangeFactor)||s>l)&&(e.gravitationForceX=-this.gravityConstant*i,e.gravitationForceY=-this.gravityConstant*o):(a>(l=t.getEstimatedSize()*this.compoundGravityRangeFactor)||s>l)&&(e.gravitationForceX=-this.gravityConstant*i*this.compoundGravityConstant,e.gravitationForceY=-this.gravityConstant*o*this.compoundGravityConstant)},l.prototype.isConverged=function(){var e,t=!1;return this.totalIterations>this.maxIterations/3&&(t=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),e=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,e||t},l.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},l.prototype.calcNoOfChildrenForAllNodes=function(){for(var e,t=this.graphManager.getAllNodes(),n=0;n<t.length;n++)(e=t[n]).noOfChildren=e.getNoOfChildren()},l.prototype.calcGrid=function(e){var t,n;t=parseInt(Math.ceil((e.getRight()-e.getLeft())/this.repulsionRange)),n=parseInt(Math.ceil((e.getBottom()-e.getTop())/this.repulsionRange));for(var r=new Array(t),i=0;i<t;i++)r[i]=new Array(n);for(i=0;i<t;i++)for(var o=0;o<n;o++)r[i][o]=new Array;return r},l.prototype.addNodeToGrid=function(e,t,n){var r,i,o,a;r=parseInt(Math.floor((e.getRect().x-t)/this.repulsionRange)),i=parseInt(Math.floor((e.getRect().width+e.getRect().x-t)/this.repulsionRange)),o=parseInt(Math.floor((e.getRect().y-n)/this.repulsionRange)),a=parseInt(Math.floor((e.getRect().height+e.getRect().y-n)/this.repulsionRange));for(var s=r;s<=i;s++)for(var l=o;l<=a;l++)this.grid[s][l].push(e),e.setGridCoordinates(r,i,o,a)},l.prototype.updateGrid=function(){var e,t,n=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),e=0;e<n.length;e++)t=n[e],this.addNodeToGrid(t,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},l.prototype.calculateRepulsionForceOfANode=function(e,t,n,r){if(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&n||r){var o,a=new Set;e.surrounding=new Array;for(var s=this.grid,l=e.startX-1;l<e.finishX+2;l++)for(var u=e.startY-1;u<e.finishY+2;u++)if(!(l<0||u<0||l>=s.length||u>=s[0].length))for(var c=0;c<s[l][u].length;c++)if(o=s[l][u][c],e.getOwner()==o.getOwner()&&e!=o&&!t.has(o)&&!a.has(o)){var h=Math.abs(e.getCenterX()-o.getCenterX())-(e.getWidth()/2+o.getWidth()/2),d=Math.abs(e.getCenterY()-o.getCenterY())-(e.getHeight()/2+o.getHeight()/2);h<=this.repulsionRange&&d<=this.repulsionRange&&a.add(o)}e.surrounding=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a))}for(l=0;l<e.surrounding.length;l++)this.calcRepulsionForce(e,e.surrounding[l])},l.prototype.calcRepulsionRange=function(){return 0},e.exports=l},function(e,t,n){var r=n(1),i=n(7);function o(e,t,n){r.call(this,e,t,n),this.idealLength=i.DEFAULT_EDGE_LENGTH}for(var a in o.prototype=Object.create(r.prototype),r)o[a]=r[a];e.exports=o},function(e,t,n){var r=n(3);function i(e,t,n,i){r.call(this,e,t,n,i),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];i.prototype.setGridCoordinates=function(e,t,n,r){this.startX=e,this.finishX=t,this.startY=n,this.finishY=r},e.exports=i},function(e,t,n){function r(e,t){this.width=0,this.height=0,null!==e&&null!==t&&(this.height=t,this.width=e)}r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(e){this.width=e},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(e){this.height=e},e.exports=r},function(e,t,n){var r=n(14);function i(){this.map={},this.keys=[]}i.prototype.put=function(e,t){var n=r.createID(e);this.contains(n)||(this.map[n]=t,this.keys.push(e))},i.prototype.contains=function(e){return r.createID(e),null!=this.map[e]},i.prototype.get=function(e){var t=r.createID(e);return this.map[t]},i.prototype.keySet=function(){return this.keys},e.exports=i},function(e,t,n){var r=n(14);function i(){this.set={}}i.prototype.add=function(e){var t=r.createID(e);this.contains(t)||(this.set[t]=e)},i.prototype.remove=function(e){delete this.set[r.createID(e)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(e){return this.set[r.createID(e)]==e},i.prototype.isEmpty=function(){return 0===this.size()},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(e){for(var t=Object.keys(this.set),n=t.length,r=0;r<n;r++)e.push(this.set[t[r]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(e){for(var t=e.length,n=0;n<t;n++){var r=e[n];this.add(r)}},e.exports=i},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null===n&&void 0===n||(this.compareFunction=this._defaultCompareFunction);var r=void 0;r=t instanceof i?t.size():t.length,this._quicksort(t,0,r-1)}return r(e,[{key:"_quicksort",value:function(e,t,n){if(t<n){var r=this._partition(e,t,n);this._quicksort(e,t,r),this._quicksort(e,r+1,n)}}},{key:"_partition",value:function(e,t,n){for(var r=this._get(e,t),i=t,o=n;;){for(;this.compareFunction(r,this._get(e,o));)o--;for(;this.compareFunction(this._get(e,i),r);)i++;if(!(i<o))return o;this._swap(e,i,o),i++,o--}}},{key:"_get",value:function(e,t){return e instanceof i?e.get_object_at(t):e[t]}},{key:"_set",value:function(e,t,n){e instanceof i?e.set_object_at(t,n):e[t]=n}},{key:"_swap",value:function(e,t,n){var r=this._get(e,t);this._set(e,t,this._get(e,n)),this._set(e,n,r)}},{key:"_defaultCompareFunction",value:function(e,t){return t>e}}]),e}();e.exports=o},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sequence1=t,this.sequence2=n,this.match_score=r,this.mismatch_penalty=i,this.gap_penalty=o,this.iMax=t.length+1,this.jMax=n.length+1,this.grid=new Array(this.iMax);for(var a=0;a<this.iMax;a++){this.grid[a]=new Array(this.jMax);for(var s=0;s<this.jMax;s++)this.grid[a][s]=0}this.tracebackGrid=new Array(this.iMax);for(var l=0;l<this.iMax;l++){this.tracebackGrid[l]=new Array(this.jMax);for(var u=0;u<this.jMax;u++)this.tracebackGrid[l][u]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return r(e,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var n=1;n<this.iMax;n++)for(var r=1;r<this.jMax;r++){var i=[this.sequence1[n-1]===this.sequence2[r-1]?this.grid[n-1][r-1]+this.match_score:this.grid[n-1][r-1]+this.mismatch_penalty,this.grid[n-1][r]+this.gap_penalty,this.grid[n][r-1]+this.gap_penalty],o=this.arrayAllMaxIndexes(i);this.grid[n][r]=i[o[0]],this.tracebackGrid[n][r]=[o.includes(0),o.includes(1),o.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var t=e[0],n=this.tracebackGrid[t.pos[0]][t.pos[1]];n[0]&&e.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),n[1]&&e.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),n[2]&&e.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),0===t.pos[0]&&0===t.pos[1]&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),e.shift()}return this.alignments}},{key:"getAllIndexes",value:function(e,t){for(var n=[],r=-1;-1!==(r=e.indexOf(t,r+1));)n.push(r);return n}},{key:"arrayAllMaxIndexes",value:function(e){return this.getAllIndexes(e,Math.max.apply(null,e))}}]),e}();e.exports=i},function(e,t,n){var r=function(){};r.FDLayout=n(18),r.FDLayoutConstants=n(7),r.FDLayoutEdge=n(19),r.FDLayoutNode=n(20),r.DimensionD=n(21),r.HashMap=n(22),r.HashSet=n(23),r.IGeometry=n(8),r.IMath=n(9),r.Integer=n(10),r.Point=n(12),r.PointD=n(4),r.RandomSeed=n(16),r.RectangleD=n(13),r.Transform=n(17),r.UniqueIDGeneretor=n(14),r.Quicksort=n(24),r.LinkedList=n(11),r.LGraphObject=n(2),r.LGraph=n(5),r.LEdge=n(1),r.LGraphManager=n(6),r.LNode=n(3),r.Layout=n(15),r.LayoutConstants=n(0),r.NeedlemanWunsch=n(25),e.exports=r},function(e,t,n){function r(){this.listeners=[]}var i=r.prototype;i.addListener=function(e,t){this.listeners.push({event:e,callback:t})},i.removeListener=function(e,t){for(var n=this.listeners.length;n>=0;n--){var r=this.listeners[n];r.event===e&&r.callback===t&&this.listeners.splice(n,1)}},i.emit=function(e,t){for(var n=0;n<this.listeners.length;n++){var r=this.listeners[n];e===r.event&&r.callback(t)}},e.exports=r}])},R6.exports=e());var e}var O6;var D6;var P6,B6=(D6||(D6=1,P6=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(t,n){t.exports=e},function(e,t,n){var r=n(0).layoutBase.LayoutConstants,i=n(0).layoutBase.FDLayoutConstants,o=n(0).CoSEConstants,a=n(0).CoSELayout,s=n(0).CoSENode,l=n(0).layoutBase.PointD,u=n(0).layoutBase.DimensionD,c={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function h(e){this.options=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}(c,e),d(this.options)}var d=function(e){null!=e.nodeRepulsion&&(o.DEFAULT_REPULSION_STRENGTH=i.DEFAULT_REPULSION_STRENGTH=e.nodeRepulsion),null!=e.idealEdgeLength&&(o.DEFAULT_EDGE_LENGTH=i.DEFAULT_EDGE_LENGTH=e.idealEdgeLength),null!=e.edgeElasticity&&(o.DEFAULT_SPRING_STRENGTH=i.DEFAULT_SPRING_STRENGTH=e.edgeElasticity),null!=e.nestingFactor&&(o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.nestingFactor),null!=e.gravity&&(o.DEFAULT_GRAVITY_STRENGTH=i.DEFAULT_GRAVITY_STRENGTH=e.gravity),null!=e.numIter&&(o.MAX_ITERATIONS=i.MAX_ITERATIONS=e.numIter),null!=e.gravityRange&&(o.DEFAULT_GRAVITY_RANGE_FACTOR=i.DEFAULT_GRAVITY_RANGE_FACTOR=e.gravityRange),null!=e.gravityCompound&&(o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=e.gravityCompound),null!=e.gravityRangeCompound&&(o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=e.gravityRangeCompound),null!=e.initialEnergyOnIncremental&&(o.DEFAULT_COOLING_FACTOR_INCREMENTAL=i.DEFAULT_COOLING_FACTOR_INCREMENTAL=e.initialEnergyOnIncremental),"draft"==e.quality?r.QUALITY=0:"proof"==e.quality?r.QUALITY=2:r.QUALITY=1,o.NODE_DIMENSIONS_INCLUDE_LABELS=i.NODE_DIMENSIONS_INCLUDE_LABELS=r.NODE_DIMENSIONS_INCLUDE_LABELS=e.nodeDimensionsIncludeLabels,o.DEFAULT_INCREMENTAL=i.DEFAULT_INCREMENTAL=r.DEFAULT_INCREMENTAL=!e.randomize,o.ANIMATE=i.ANIMATE=r.ANIMATE=e.animate,o.TILE=e.tile,o.TILING_PADDING_VERTICAL="function"==typeof e.tilingPaddingVertical?e.tilingPaddingVertical.call():e.tilingPaddingVertical,o.TILING_PADDING_HORIZONTAL="function"==typeof e.tilingPaddingHorizontal?e.tilingPaddingHorizontal.call():e.tilingPaddingHorizontal};h.prototype.run=function(){var e,t,n=this.options;this.idToLNode={};var r=this.layout=new a,i=this;i.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var o=r.newGraphManager();this.gm=o;var s=this.options.eles.nodes(),l=this.options.eles.edges();this.root=o.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(s),r);for(var u=0;u<l.length;u++){var c=l[u],h=this.idToLNode[c.data("source")],d=this.idToLNode[c.data("target")];h!==d&&0==h.getEdgesBetween(d).length&&(o.add(r.newEdge(),h,d).id=c.id())}var f=function(e,t){"number"==typeof e&&(e=t);var n=e.data("id"),r=i.idToLNode[n];return{x:r.getRect().getCenterX(),y:r.getRect().getCenterY()}},p=function o(){for(var a,s=function(){n.fit&&n.cy.fit(n.eles,n.padding),e||(e=!0,i.cy.one("layoutready",n.ready),i.cy.trigger({type:"layoutready",layout:i}))},l=i.options.refresh,u=0;u<l&&!a;u++)a=i.stopped||i.layout.tick();if(a)return r.checkLayoutSuccess()&&!r.isSubLayout&&r.doPostLayout(),r.tilingPostLayout&&r.tilingPostLayout(),r.isLayoutFinished=!0,i.options.eles.nodes().positions(f),s(),i.cy.one("layoutstop",i.options.stop),i.cy.trigger({type:"layoutstop",layout:i}),t&&cancelAnimationFrame(t),void(e=!1);var c=i.layout.getPositionsData();n.eles.nodes().positions(function(e,t){if("number"==typeof e&&(e=t),!e.isParent()){for(var n=e.id(),r=c[n],i=e;null==r&&(r=c[i.data("parent")]||c["DummyCompound_"+i.data("parent")],c[n]=r,null!=(i=i.parent()[0])););return null!=r?{x:r.x,y:r.y}:{x:e.position("x"),y:e.position("y")}}}),s(),t=requestAnimationFrame(o)};return r.addListener("layoutstarted",function(){"during"===i.options.animate&&(t=requestAnimationFrame(p))}),r.runLayout(),"during"!==this.options.animate&&(i.options.eles.nodes().not(":parent").layoutPositions(i,i.options,f),e=!1),this},h.prototype.getTopMostNodes=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].id()]=!0;return e.filter(function(e,n){"number"==typeof e&&(e=n);for(var r=e.parent()[0];null!=r;){if(t[r.id()])return!1;r=r.parent()[0]}return!0})},h.prototype.processChildrenList=function(e,t,n){for(var r=t.length,i=0;i<r;i++){var o,a,c=t[i],h=c.children(),d=c.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((o=null!=c.outerWidth()&&null!=c.outerHeight()?e.add(new s(n.graphManager,new l(c.position("x")-d.w/2,c.position("y")-d.h/2),new u(parseFloat(d.w),parseFloat(d.h)))):e.add(new s(this.graphManager))).id=c.data("id"),o.paddingLeft=parseInt(c.css("padding")),o.paddingTop=parseInt(c.css("padding")),o.paddingRight=parseInt(c.css("padding")),o.paddingBottom=parseInt(c.css("padding")),this.options.nodeDimensionsIncludeLabels&&c.isParent()){var f=c.boundingBox({includeLabels:!0,includeNodes:!1}).w,p=c.boundingBox({includeLabels:!0,includeNodes:!1}).h,g=c.css("text-halign");o.labelWidth=f,o.labelHeight=p,o.labelPos=g}this.idToLNode[c.data("id")]=o,isNaN(o.rect.x)&&(o.rect.x=0),isNaN(o.rect.y)&&(o.rect.y=0),null!=h&&h.length>0&&(a=n.getGraphManager().add(n.newGraph(),o),this.processChildrenList(a,h,n))}},h.prototype.stop=function(){return this.stopped=!0,this};var f=function(e){e("layout","cose-bilkent",h)};"undefined"!=typeof cytoscape&&f(cytoscape),e.exports=f}])},C6.exports=P6(function(){return O6?I6.exports:(O6=1,e=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(t,n){t.exports=e},function(e,t,n){var r=n(0).FDLayoutConstants;function i(){}for(var o in r)i[o]=r[o];i.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,i.DEFAULT_RADIAL_SEPARATION=r.DEFAULT_EDGE_LENGTH,i.DEFAULT_COMPONENT_SEPERATION=60,i.TILE=!0,i.TILING_PADDING_VERTICAL=10,i.TILING_PADDING_HORIZONTAL=10,i.TREE_REDUCTION_ON_INCREMENTAL=!1,e.exports=i},function(e,t,n){var r=n(0).FDLayoutEdge;function i(e,t,n){r.call(this,e,t,n)}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];e.exports=i},function(e,t,n){var r=n(0).LGraph;function i(e,t,n){r.call(this,e,t,n)}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];e.exports=i},function(e,t,n){var r=n(0).LGraphManager;function i(e){r.call(this,e)}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];e.exports=i},function(e,t,n){var r=n(0).FDLayoutNode,i=n(0).IMath;function o(e,t,n,i){r.call(this,e,t,n,i)}for(var a in o.prototype=Object.create(r.prototype),r)o[a]=r[a];o.prototype.move=function(){var e=this.graphManager.getLayout();this.displacementX=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementY)),null==this.child||0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},o.prototype.propogateDisplacementToChildren=function(e,t){for(var n,r=this.getChild().getNodes(),i=0;i<r.length;i++)null==(n=r[i]).getChild()?(n.moveBy(e,t),n.displacementX+=e,n.displacementY+=t):n.propogateDisplacementToChildren(e,t)},o.prototype.setPred1=function(e){this.pred1=e},o.prototype.getPred1=function(){return pred1},o.prototype.getPred2=function(){return pred2},o.prototype.setNext=function(e){this.next=e},o.prototype.getNext=function(){return next},o.prototype.setProcessed=function(e){this.processed=e},o.prototype.isProcessed=function(){return processed},e.exports=o},function(e,t,n){var r=n(0).FDLayout,i=n(4),o=n(3),a=n(5),s=n(2),l=n(1),u=n(0).FDLayoutConstants,c=n(0).LayoutConstants,h=n(0).Point,d=n(0).PointD,f=n(0).Layout,p=n(0).Integer,g=n(0).IGeometry,m=n(0).LGraph,v=n(0).Transform;function y(){r.call(this),this.toBeTiled={}}for(var b in y.prototype=Object.create(r.prototype),r)y[b]=r[b];y.prototype.newGraphManager=function(){var e=new i(this);return this.graphManager=e,e},y.prototype.newGraph=function(e){return new o(null,this.graphManager,e)},y.prototype.newNode=function(e){return new a(this.graphManager,e)},y.prototype.newEdge=function(e){return new s(null,null,e)},y.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.isSubLayout||(l.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=l.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=l.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=u.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=u.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=u.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=u.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=u.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/u.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=u.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},y.prototype.layout=function(){return c.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},y.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental)l.TREE_REDUCTION_ON_INCREMENTAL&&(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),t=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter(function(e){return t.has(e)}),this.graphManager.setAllNodesToApplyGravitation(n));else{var e=this.getFlatForest();if(e.length>0)this.positionNodesRadially(e);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter(function(e){return t.has(e)});this.graphManager.setAllNodesToApplyGravitation(n),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},y.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%u.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter(function(t){return e.has(t)});this.graphManager.setAllNodesToApplyGravitation(t),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=u.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=u.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var n=!this.isTreeGrowing&&!this.isGrowthFinished,r=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(n,r),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},y.prototype.getPositionsData=function(){for(var e=this.graphManager.getAllNodes(),t={},n=0;n<e.length;n++){var r=e[n].rect,i=e[n].id;t[i]={id:i,x:r.getCenterX(),y:r.getCenterY(),w:r.width,h:r.height}}return t},y.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var e=!1;if("during"===u.ANIMATE)this.emit("layoutstarted");else{for(;!e;)e=this.tick();this.graphManager.updateBounds()}},y.prototype.calculateNodesToApplyGravitationTo=function(){var e,t,n=[],r=this.graphManager.getGraphs(),i=r.length;for(t=0;t<i;t++)(e=r[t]).updateConnected(),e.isConnected||(n=n.concat(e.getNodes()));return n},y.prototype.createBendpoints=function(){var e=[];e=e.concat(this.graphManager.getAllEdges());var t,n=new Set;for(t=0;t<e.length;t++){var r=e[t];if(!n.has(r)){var i=r.getSource(),o=r.getTarget();if(i==o)r.getBendpoints().push(new d),r.getBendpoints().push(new d),this.createDummyNodesForBendpoints(r),n.add(r);else{var a=[];if(a=(a=a.concat(i.getEdgeListToNode(o))).concat(o.getEdgeListToNode(i)),!n.has(a[0])){var s;if(a.length>1)for(s=0;s<a.length;s++){var l=a[s];l.getBendpoints().push(new d),this.createDummyNodesForBendpoints(l)}a.forEach(function(e){n.add(e)})}}}if(n.size==e.length)break}},y.prototype.positionNodesRadially=function(e){for(var t=new h(0,0),n=Math.ceil(Math.sqrt(e.length)),r=0,i=0,o=0,a=new d(0,0),s=0;s<e.length;s++){s%n==0&&(o=0,i=r,0!=s&&(i+=l.DEFAULT_COMPONENT_SEPERATION),r=0);var u=e[s],p=f.findCenterOfTree(u);t.x=o,t.y=i,(a=y.radialLayout(u,p,t)).y>r&&(r=Math.floor(a.y)),o=Math.floor(a.x+l.DEFAULT_COMPONENT_SEPERATION)}this.transform(new d(c.WORLD_CENTER_X-a.x/2,c.WORLD_CENTER_Y-a.y/2))},y.radialLayout=function(e,t,n){var r=Math.max(this.maxDiagonalInTree(e),l.DEFAULT_RADIAL_SEPARATION);y.branchRadialLayout(t,null,0,359,0,r);var i=m.calculateBounds(e),o=new v;o.setDeviceOrgX(i.getMinX()),o.setDeviceOrgY(i.getMinY()),o.setWorldOrgX(n.x),o.setWorldOrgY(n.y);for(var a=0;a<e.length;a++)e[a].transform(o);var s=new d(i.getMaxX(),i.getMaxY());return o.inverseTransformPoint(s)},y.branchRadialLayout=function(e,t,n,r,i,o){var a=(r-n+1)/2;a<0&&(a+=180);var s=(a+n)%360*g.TWO_PI/360,l=i*Math.cos(s),u=i*Math.sin(s);e.setCenter(l,u);var c=[],h=(c=c.concat(e.getEdges())).length;null!=t&&h--;for(var d,f=0,p=c.length,m=e.getEdgesBetween(t);m.length>1;){var v=m[0];m.splice(0,1);var b=c.indexOf(v);b>=0&&c.splice(b,1),p--,h--}d=null!=t?(c.indexOf(m[0])+1)%p:0;for(var x=Math.abs(r-n)/h,w=d;f!=h;w=++w%p){var E=c[w].getOtherEnd(e);if(E!=t){var T=(n+f*x)%360,_=(T+x)%360;y.branchRadialLayout(E,e,T,_,i+o,o),f++}}},y.maxDiagonalInTree=function(e){for(var t=p.MIN_VALUE,n=0;n<e.length;n++){var r=e[n].getDiagonal();r>t&&(t=r)}return t},y.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},y.prototype.groupZeroDegreeMembers=function(){var e=this,t={};this.memberGroups={},this.idToDummyNode={};for(var n=[],r=this.graphManager.getAllNodes(),i=0;i<r.length;i++){var o=(s=r[i]).getParent();0!==this.getNodeDegreeWithChildren(s)||null!=o.id&&this.getToBeTiled(o)||n.push(s)}for(i=0;i<n.length;i++){var s,l=(s=n[i]).getParent().id;void 0===t[l]&&(t[l]=[]),t[l]=t[l].concat(s)}Object.keys(t).forEach(function(n){if(t[n].length>1){var r="DummyCompound_"+n;e.memberGroups[r]=t[n];var i=t[n][0].getParent(),o=new a(e.graphManager);o.id=r,o.paddingLeft=i.paddingLeft||0,o.paddingRight=i.paddingRight||0,o.paddingBottom=i.paddingBottom||0,o.paddingTop=i.paddingTop||0,e.idToDummyNode[r]=o;var s=e.getGraphManager().add(e.newGraph(),o),l=i.getChild();l.add(o);for(var u=0;u<t[n].length;u++){var c=t[n][u];l.remove(c),s.add(c)}}})},y.prototype.clearCompounds=function(){var e={},t={};this.performDFSOnCompounds();for(var n=0;n<this.compoundOrder.length;n++)t[this.compoundOrder[n].id]=this.compoundOrder[n],e[this.compoundOrder[n].id]=[].concat(this.compoundOrder[n].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[n].getChild()),this.compoundOrder[n].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(e,t)},y.prototype.clearZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(n){var r=e.idToDummyNode[n];t[n]=e.tileNodes(e.memberGroups[n],r.paddingLeft+r.paddingRight),r.rect.width=t[n].width,r.rect.height=t[n].height})},y.prototype.repopulateCompounds=function(){for(var e=this.compoundOrder.length-1;e>=0;e--){var t=this.compoundOrder[e],n=t.id,r=t.paddingLeft,i=t.paddingTop;this.adjustLocations(this.tiledMemberPack[n],t.rect.x,t.rect.y,r,i)}},y.prototype.repopulateZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack;Object.keys(t).forEach(function(n){var r=e.idToDummyNode[n],i=r.paddingLeft,o=r.paddingTop;e.adjustLocations(t[n],r.rect.x,r.rect.y,i,o)})},y.prototype.getToBeTiled=function(e){var t=e.id;if(null!=this.toBeTiled[t])return this.toBeTiled[t];var n=e.getChild();if(null==n)return this.toBeTiled[t]=!1,!1;for(var r=n.getNodes(),i=0;i<r.length;i++){var o=r[i];if(this.getNodeDegree(o)>0)return this.toBeTiled[t]=!1,!1;if(null!=o.getChild()){if(!this.getToBeTiled(o))return this.toBeTiled[t]=!1,!1}else this.toBeTiled[o.id]=!1}return this.toBeTiled[t]=!0,!0},y.prototype.getNodeDegree=function(e){e.id;for(var t=e.getEdges(),n=0,r=0;r<t.length;r++){var i=t[r];i.getSource().id!==i.getTarget().id&&(n+=1)}return n},y.prototype.getNodeDegreeWithChildren=function(e){var t=this.getNodeDegree(e);if(null==e.getChild())return t;for(var n=e.getChild().getNodes(),r=0;r<n.length;r++){var i=n[r];t+=this.getNodeDegreeWithChildren(i)}return t},y.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},y.prototype.fillCompexOrderByDFS=function(e){for(var t=0;t<e.length;t++){var n=e[t];null!=n.getChild()&&this.fillCompexOrderByDFS(n.getChild().getNodes()),this.getToBeTiled(n)&&this.compoundOrder.push(n)}},y.prototype.adjustLocations=function(e,t,n,r,i){n+=i;for(var o=t+=r,a=0;a<e.rows.length;a++){var s=e.rows[a];t=o;for(var l=0,u=0;u<s.length;u++){var c=s[u];c.rect.x=t,c.rect.y=n,t+=c.rect.width+e.horizontalPadding,c.rect.height>l&&(l=c.rect.height)}n+=l+e.verticalPadding}},y.prototype.tileCompoundMembers=function(e,t){var n=this;this.tiledMemberPack=[],Object.keys(e).forEach(function(r){var i=t[r];n.tiledMemberPack[r]=n.tileNodes(e[r],i.paddingLeft+i.paddingRight),i.rect.width=n.tiledMemberPack[r].width,i.rect.height=n.tiledMemberPack[r].height})},y.prototype.tileNodes=function(e,t){var n={rows:[],rowWidth:[],rowHeight:[],width:0,height:t,verticalPadding:l.TILING_PADDING_VERTICAL,horizontalPadding:l.TILING_PADDING_HORIZONTAL};e.sort(function(e,t){return e.rect.width*e.rect.height>t.rect.width*t.rect.height?-1:e.rect.width*e.rect.height<t.rect.width*t.rect.height?1:0});for(var r=0;r<e.length;r++){var i=e[r];0==n.rows.length?this.insertNodeToRow(n,i,0,t):this.canAddHorizontal(n,i.rect.width,i.rect.height)?this.insertNodeToRow(n,i,this.getShortestRowIndex(n),t):this.insertNodeToRow(n,i,n.rows.length,t),this.shiftToLastRow(n)}return n},y.prototype.insertNodeToRow=function(e,t,n,r){var i=r;n==e.rows.length&&(e.rows.push([]),e.rowWidth.push(i),e.rowHeight.push(0));var o=e.rowWidth[n]+t.rect.width;e.rows[n].length>0&&(o+=e.horizontalPadding),e.rowWidth[n]=o,e.width<o&&(e.width=o);var a=t.rect.height;n>0&&(a+=e.verticalPadding);var s=0;a>e.rowHeight[n]&&(s=e.rowHeight[n],e.rowHeight[n]=a,s=e.rowHeight[n]-s),e.height+=s,e.rows[n].push(t)},y.prototype.getShortestRowIndex=function(e){for(var t=-1,n=Number.MAX_VALUE,r=0;r<e.rows.length;r++)e.rowWidth[r]<n&&(t=r,n=e.rowWidth[r]);return t},y.prototype.getLongestRowIndex=function(e){for(var t=-1,n=Number.MIN_VALUE,r=0;r<e.rows.length;r++)e.rowWidth[r]>n&&(t=r,n=e.rowWidth[r]);return t},y.prototype.canAddHorizontal=function(e,t,n){var r=this.getShortestRowIndex(e);if(r<0)return!0;var i=e.rowWidth[r];if(i+e.horizontalPadding+t<=e.width)return!0;var o,a,s=0;return e.rowHeight[r]<n&&r>0&&(s=n+e.verticalPadding-e.rowHeight[r]),o=e.width-i>=t+e.horizontalPadding?(e.height+s)/(i+t+e.horizontalPadding):(e.height+s)/e.width,s=n+e.verticalPadding,(a=e.width<t?(e.height+s)/t:(e.height+s)/e.width)<1&&(a=1/a),o<1&&(o=1/o),o<a},y.prototype.shiftToLastRow=function(e){var t=this.getLongestRowIndex(e),n=e.rowWidth.length-1,r=e.rows[t],i=r[r.length-1],o=i.width+e.horizontalPadding;if(e.width-e.rowWidth[n]>o&&t!=n){r.splice(-1,1),e.rows[n].push(i),e.rowWidth[t]=e.rowWidth[t]-o,e.rowWidth[n]=e.rowWidth[n]+o,e.width=e.rowWidth[instance.getLongestRowIndex(e)];for(var a=Number.MIN_VALUE,s=0;s<r.length;s++)r[s].height>a&&(a=r[s].height);t>0&&(a+=e.verticalPadding);var l=e.rowHeight[t]+e.rowHeight[n];e.rowHeight[t]=a,e.rowHeight[n]<i.height+e.verticalPadding&&(e.rowHeight[n]=i.height+e.verticalPadding);var u=e.rowHeight[t]+e.rowHeight[n];e.height+=u-l,this.shiftToLastRow(e)}},y.prototype.tilingPreLayout=function(){l.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},y.prototype.tilingPostLayout=function(){l.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},y.prototype.reduceTrees=function(){for(var e,t=[],n=!0;n;){var r=this.graphManager.getAllNodes(),i=[];n=!1;for(var o=0;o<r.length;o++)1!=(e=r[o]).getEdges().length||e.getEdges()[0].isInterGraph||null!=e.getChild()||(i.push([e,e.getEdges()[0],e.getOwner()]),n=!0);if(1==n){for(var a=[],s=0;s<i.length;s++)1==i[s][0].getEdges().length&&(a.push(i[s]),i[s][0].getOwner().remove(i[s][0]));t.push(a),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=t},y.prototype.growTree=function(e){for(var t,n=e[e.length-1],r=0;r<n.length;r++)t=n[r],this.findPlaceforPrunedNode(t),t[2].add(t[0]),t[2].add(t[1],t[1].source,t[1].target);e.splice(e.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},y.prototype.findPlaceforPrunedNode=function(e){var t,n,r=e[0],i=(n=r==e[1].source?e[1].target:e[1].source).startX,o=n.finishX,a=n.startY,s=n.finishY,l=[0,0,0,0];if(a>0)for(var c=i;c<=o;c++)l[0]+=this.grid[c][a-1].length+this.grid[c][a].length-1;if(o<this.grid.length-1)for(c=a;c<=s;c++)l[1]+=this.grid[o+1][c].length+this.grid[o][c].length-1;if(s<this.grid[0].length-1)for(c=i;c<=o;c++)l[2]+=this.grid[c][s+1].length+this.grid[c][s].length-1;if(i>0)for(c=a;c<=s;c++)l[3]+=this.grid[i-1][c].length+this.grid[i][c].length-1;for(var h,d,f=p.MAX_VALUE,g=0;g<l.length;g++)l[g]<f?(f=l[g],h=1,d=g):l[g]==f&&h++;if(3==h&&0==f)0==l[0]&&0==l[1]&&0==l[2]?t=1:0==l[0]&&0==l[1]&&0==l[3]?t=0:0==l[0]&&0==l[2]&&0==l[3]?t=3:0==l[1]&&0==l[2]&&0==l[3]&&(t=2);else if(2==h&&0==f){var m=Math.floor(2*Math.random());t=0==l[0]&&0==l[1]?0==m?0:1:0==l[0]&&0==l[2]?0==m?0:2:0==l[0]&&0==l[3]?0==m?0:3:0==l[1]&&0==l[2]?0==m?1:2:0==l[1]&&0==l[3]?0==m?1:3:0==m?2:3}else t=4==h&&0==f?m=Math.floor(4*Math.random()):d;0==t?r.setCenter(n.getCenterX(),n.getCenterY()-n.getHeight()/2-u.DEFAULT_EDGE_LENGTH-r.getHeight()/2):1==t?r.setCenter(n.getCenterX()+n.getWidth()/2+u.DEFAULT_EDGE_LENGTH+r.getWidth()/2,n.getCenterY()):2==t?r.setCenter(n.getCenterX(),n.getCenterY()+n.getHeight()/2+u.DEFAULT_EDGE_LENGTH+r.getHeight()/2):r.setCenter(n.getCenterX()-n.getWidth()/2-u.DEFAULT_EDGE_LENGTH-r.getWidth()/2,n.getCenterY())},e.exports=y},function(e,t,n){var r={};r.layoutBase=n(0),r.CoSEConstants=n(1),r.CoSEEdge=n(2),r.CoSEGraph=n(3),r.CoSEGraphManager=n(4),r.CoSELayout=n(6),r.CoSENode=n(5),e.exports=r}])},I6.exports=e(L6()));var e}())),C6.exports);const F6=Zo(B6);function z6(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function U6(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function G6(e,t){let n=0;if(void 0===t)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function V6(e){return e.target.depth}function j6(e){return e.depth}function H6(e,t){return t-1-e.height}function $6(e,t){return e.sourceLinks.length?e.depth:t-1}function Y6(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?U6(e.sourceLinks,V6)-1:0}function q6(e){return function(){return e}}function W6(e,t){return K6(e.source,t.source)||e.index-t.index}function X6(e,t){return K6(e.target,t.target)||e.index-t.index}function K6(e,t){return e.y0-t.y0}function Z6(e){return e.value}function Q6(e){return e.index}function J6(e){return e.nodes}function e7(e){return e.links}function t7(e,t){const n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function n7({nodes:e}){for(const t of e){let e=t.y0,n=e;for(const r of t.sourceLinks)r.y0=e+r.width/2,e+=r.width;for(const r of t.targetLinks)r.y1=n+r.width/2,n+=r.width}}function r7(){let e,t,n,r=0,i=0,o=1,a=1,s=24,l=8,u=Q6,c=$6,h=J6,d=e7,f=6;function p(){const p={nodes:h.apply(null,arguments),links:d.apply(null,arguments)};return function({nodes:e,links:t}){for(const[n,i]of e.entries())i.index=n,i.sourceLinks=[],i.targetLinks=[];const r=new Map(e.map((t,n)=>[u(t,n,e),t]));for(const[n,i]of t.entries()){i.index=n;let{source:e,target:t}=i;"object"!=typeof e&&(e=i.source=t7(r,e)),"object"!=typeof t&&(t=i.target=t7(r,t)),e.sourceLinks.push(i),t.targetLinks.push(i)}if(null!=n)for(const{sourceLinks:i,targetLinks:o}of e)i.sort(n),o.sort(n)}(p),function({nodes:e}){for(const t of e)t.value=void 0===t.fixedValue?Math.max(G6(t.sourceLinks,Z6),G6(t.targetLinks,Z6)):t.fixedValue}(p),function({nodes:e}){const t=e.length;let n=new Set(e),r=new Set,i=0;for(;n.size;){for(const e of n){e.depth=i;for(const{target:t}of e.sourceLinks)r.add(t)}if(++i>t)throw new Error("circular link");n=r,r=new Set}}(p),function({nodes:e}){const t=e.length;let n=new Set(e),r=new Set,i=0;for(;n.size;){for(const e of n){e.height=i;for(const{source:t}of e.targetLinks)r.add(t)}if(++i>t)throw new Error("circular link");n=r,r=new Set}}(p),function(n){const u=function({nodes:e}){const n=z6(e,e=>e.depth)+1,i=(o-r-s)/(n-1),a=new Array(n);for(const t of e){const e=Math.max(0,Math.min(n-1,Math.floor(c.call(null,t,n))));t.layer=e,t.x0=r+e*i,t.x1=t.x0+s,a[e]?a[e].push(t):a[e]=[t]}if(t)for(const r of a)r.sort(t);return a}(n);e=Math.min(l,(a-i)/(z6(u,e=>e.length)-1)),function(t){const n=U6(t,t=>(a-i-(t.length-1)*e)/G6(t,Z6));for(const r of t){let t=i;for(const i of r){i.y0=t,i.y1=t+i.value*n,t=i.y1+e;for(const e of i.sourceLinks)e.width=e.value*n}t=(a-t+e)/(r.length+1);for(let e=0;e<r.length;++e){const n=r[e];n.y0+=t*(e+1),n.y1+=t*(e+1)}w(r)}}(u);for(let e=0;e<f;++e){const t=Math.pow(.99,e),n=Math.max(1-t,(e+1)/f);m(u,t,n),g(u,t,n)}}(p),n7(p),p}function g(e,n,r){for(let i=1,o=e.length;i<o;++i){const o=e[i];for(const e of o){let t=0,r=0;for(const{source:n,value:o}of e.targetLinks){let i=o*(e.layer-n.layer);t+=E(n,e)*i,r+=i}if(!(r>0))continue;let i=(t/r-e.y0)*n;e.y0+=i,e.y1+=i,x(e)}void 0===t&&o.sort(K6),v(o,r)}}function m(e,n,r){for(let i=e.length-2;i>=0;--i){const o=e[i];for(const e of o){let t=0,r=0;for(const{target:n,value:o}of e.sourceLinks){let i=o*(n.layer-e.layer);t+=T(e,n)*i,r+=i}if(!(r>0))continue;let i=(t/r-e.y0)*n;e.y0+=i,e.y1+=i,x(e)}void 0===t&&o.sort(K6),v(o,r)}}function v(t,n){const r=t.length>>1,o=t[r];b(t,o.y0-e,r-1,n),y(t,o.y1+e,r+1,n),b(t,a,t.length-1,n),y(t,i,0,n)}function y(t,n,r,i){for(;r<t.length;++r){const o=t[r],a=(n-o.y0)*i;a>1e-6&&(o.y0+=a,o.y1+=a),n=o.y1+e}}function b(t,n,r,i){for(;r>=0;--r){const o=t[r],a=(o.y1-n)*i;a>1e-6&&(o.y0-=a,o.y1-=a),n=o.y0-e}}function x({sourceLinks:e,targetLinks:t}){if(void 0===n){for(const{source:{sourceLinks:e}}of t)e.sort(X6);for(const{target:{targetLinks:t}}of e)t.sort(W6)}}function w(e){if(void 0===n)for(const{sourceLinks:t,targetLinks:n}of e)t.sort(X6),n.sort(W6)}function E(t,n){let r=t.y0-(t.sourceLinks.length-1)*e/2;for(const{target:i,width:o}of t.sourceLinks){if(i===n)break;r+=o+e}for(const{source:e,width:i}of n.targetLinks){if(e===t)break;r-=i}return r}function T(t,n){let r=n.y0-(n.targetLinks.length-1)*e/2;for(const{source:i,width:o}of n.targetLinks){if(i===t)break;r+=o+e}for(const{target:e,width:i}of t.sourceLinks){if(e===n)break;r-=i}return r}return p.update=function(e){return n7(e),e},p.nodeId=function(e){return arguments.length?(u="function"==typeof e?e:q6(e),p):u},p.nodeAlign=function(e){return arguments.length?(c="function"==typeof e?e:q6(e),p):c},p.nodeSort=function(e){return arguments.length?(t=e,p):t},p.nodeWidth=function(e){return arguments.length?(s=+e,p):s},p.nodePadding=function(t){return arguments.length?(l=e=+t,p):l},p.nodes=function(e){return arguments.length?(h="function"==typeof e?e:q6(e),p):h},p.links=function(e){return arguments.length?(d="function"==typeof e?e:q6(e),p):d},p.linkSort=function(e){return arguments.length?(n=e,p):n},p.size=function(e){return arguments.length?(r=i=0,o=+e[0],a=+e[1],p):[o-r,a-i]},p.extent=function(e){return arguments.length?(r=+e[0][0],o=+e[1][0],i=+e[0][1],a=+e[1][1],p):[[r,i],[o,a]]},p.iterations=function(e){return arguments.length?(f=+e,p):f},p}var i7=Math.PI,o7=2*i7,a7=1e-6,s7=o7-a7;function l7(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function u7(){return new l7}function c7(e){return function(){return e}}function h7(e){return e[0]}function d7(e){return e[1]}l7.prototype=u7.prototype={constructor:l7,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,l=r-t,u=o-e,c=a-t,h=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>a7)if(Math.abs(c*s-l*u)>a7&&i){var d=n-o,f=r-a,p=s*s+l*l,g=d*d+f*f,m=Math.sqrt(p),v=Math.sqrt(h),y=i*Math.tan((i7-Math.acos((p+h-g)/(2*m*v)))/2),b=y/v,x=y/m;Math.abs(b-1)>a7&&(this._+="L"+(e+b*u)+","+(t+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>u*f)+","+(this._x1=e+x*s)+","+(this._y1=t+x*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=e+a,u=t+s,c=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>a7||Math.abs(this._y1-u)>a7)&&(this._+="L"+l+","+u),n&&(h<0&&(h=h%o7+o7),h>s7?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):h>a7&&(this._+="A"+n+","+n+",0,"+ +(h>=i7)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var f7=Array.prototype.slice;function p7(e){return e.source}function g7(e){return e.target}function m7(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,i,r,i)}function v7(){return function(e){var t=p7,n=g7,r=h7,i=d7,o=null;function a(){var a,s=f7.call(arguments),l=t.apply(this,s),u=n.apply(this,s);if(o||(o=a=u7()),e(o,+r.apply(this,(s[0]=l,s)),+i.apply(this,s),+r.apply(this,(s[0]=u,s)),+i.apply(this,s)),a)return o=null,a+""||null}return a.source=function(e){return arguments.length?(t=e,a):t},a.target=function(e){return arguments.length?(n=e,a):n},a.x=function(e){return arguments.length?(r="function"==typeof e?e:c7(+e),a):r},a.y=function(e){return arguments.length?(i="function"==typeof e?e:c7(+e),a):i},a.context=function(e){return arguments.length?(o=null==e?null:e,a):o},a}(m7)}function y7(e){return[e.source.x1,e.y0]}function b7(e){return[e.target.x0,e.y1]}function x7(){return v7().source(y7).target(b7)}var w7,E7={exports:{}},T7={exports:{}},_7={exports:{}};function k7(){return w7||(w7=1,e=_7,function(t,n){e.exports=n()}(0,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=28)}([function(e,t,n){function r(){}r.QUALITY=1,r.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,r.DEFAULT_INCREMENTAL=!1,r.DEFAULT_ANIMATION_ON_LAYOUT=!0,r.DEFAULT_ANIMATION_DURING_LAYOUT=!1,r.DEFAULT_ANIMATION_PERIOD=50,r.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,r.DEFAULT_GRAPH_MARGIN=15,r.NODE_DIMENSIONS_INCLUDE_LABELS=!1,r.SIMPLE_NODE_SIZE=40,r.SIMPLE_NODE_HALF_SIZE=r.SIMPLE_NODE_SIZE/2,r.EMPTY_COMPOUND_NODE_SIZE=40,r.MIN_EDGE_LENGTH=1,r.WORLD_BOUNDARY=1e6,r.INITIAL_WORLD_BOUNDARY=r.WORLD_BOUNDARY/1e3,r.WORLD_CENTER_X=1200,r.WORLD_CENTER_Y=900,e.exports=r},function(e,t,n){var r=n(2),i=n(8),o=n(9);function a(e,t,n){r.call(this,n),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=n,this.bendpoints=[],this.source=e,this.target=t}for(var s in a.prototype=Object.create(r.prototype),r)a[s]=r[s];a.prototype.getSource=function(){return this.source},a.prototype.getTarget=function(){return this.target},a.prototype.isInterGraph=function(){return this.isInterGraph},a.prototype.getLength=function(){return this.length},a.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},a.prototype.getBendpoints=function(){return this.bendpoints},a.prototype.getLca=function(){return this.lca},a.prototype.getSourceInLca=function(){return this.sourceInLca},a.prototype.getTargetInLca=function(){return this.targetInLca},a.prototype.getOtherEnd=function(e){if(this.source===e)return this.target;if(this.target===e)return this.source;throw"Node is not incident with this edge"},a.prototype.getOtherEndInGraph=function(e,t){for(var n=this.getOtherEnd(e),r=t.getGraphManager().getRoot();;){if(n.getOwner()==t)return n;if(n.getOwner()==r)break;n=n.getOwner().getParent()}return null},a.prototype.updateLength=function(){var e=new Array(4);this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),e),this.isOverlapingSourceAndTarget||(this.lengthX=e[0]-e[2],this.lengthY=e[1]-e[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},a.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=a},function(e,t,n){e.exports=function(e){this.vGraphObject=e}},function(e,t,n){var r=n(2),i=n(10),o=n(13),a=n(0),s=n(16),l=n(5);function u(e,t,n,a){null==n&&null==a&&(a=t),r.call(this,a),null!=e.graphManager&&(e=e.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=a,this.edges=[],this.graphManager=e,this.rect=null!=n&&null!=t?new o(t.x,t.y,n.width,n.height):new o}for(var c in u.prototype=Object.create(r.prototype),r)u[c]=r[c];u.prototype.getEdges=function(){return this.edges},u.prototype.getChild=function(){return this.child},u.prototype.getOwner=function(){return this.owner},u.prototype.getWidth=function(){return this.rect.width},u.prototype.setWidth=function(e){this.rect.width=e},u.prototype.getHeight=function(){return this.rect.height},u.prototype.setHeight=function(e){this.rect.height=e},u.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},u.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},u.prototype.getCenter=function(){return new l(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},u.prototype.getLocation=function(){return new l(this.rect.x,this.rect.y)},u.prototype.getRect=function(){return this.rect},u.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},u.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},u.prototype.setRect=function(e,t){this.rect.x=e.x,this.rect.y=e.y,this.rect.width=t.width,this.rect.height=t.height},u.prototype.setCenter=function(e,t){this.rect.x=e-this.rect.width/2,this.rect.y=t-this.rect.height/2},u.prototype.setLocation=function(e,t){this.rect.x=e,this.rect.y=t},u.prototype.moveBy=function(e,t){this.rect.x+=e,this.rect.y+=t},u.prototype.getEdgeListToNode=function(e){var t=[],n=this;return n.edges.forEach(function(r){if(r.target==e){if(r.source!=n)throw"Incorrect edge source!";t.push(r)}}),t},u.prototype.getEdgesBetween=function(e){var t=[],n=this;return n.edges.forEach(function(r){if(r.source!=n&&r.target!=n)throw"Incorrect edge source and/or target";r.target!=e&&r.source!=e||t.push(r)}),t},u.prototype.getNeighborsList=function(){var e=new Set,t=this;return t.edges.forEach(function(n){if(n.source==t)e.add(n.target);else{if(n.target!=t)throw"Incorrect incidency!";e.add(n.source)}}),e},u.prototype.withChildren=function(){var e=new Set;if(e.add(this),null!=this.child)for(var t=this.child.getNodes(),n=0;n<t.length;n++)t[n].withChildren().forEach(function(t){e.add(t)});return e},u.prototype.getNoOfChildren=function(){var e=0;if(null==this.child)e=1;else for(var t=this.child.getNodes(),n=0;n<t.length;n++)e+=t[n].getNoOfChildren();return 0==e&&(e=1),e},u.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},u.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},u.prototype.scatter=function(){var e,t,n=-a.INITIAL_WORLD_BOUNDARY,r=a.INITIAL_WORLD_BOUNDARY;e=a.WORLD_CENTER_X+s.nextDouble()*(r-n)+n;var i=-a.INITIAL_WORLD_BOUNDARY,o=a.INITIAL_WORLD_BOUNDARY;t=a.WORLD_CENTER_Y+s.nextDouble()*(o-i)+i,this.rect.x=e,this.rect.y=t},u.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var e=this.getChild();if(e.updateBounds(!0),this.rect.x=e.getLeft(),this.rect.y=e.getTop(),this.setWidth(e.getRight()-e.getLeft()),this.setHeight(e.getBottom()-e.getTop()),a.NODE_DIMENSIONS_INCLUDE_LABELS){var t=e.getRight()-e.getLeft(),n=e.getBottom()-e.getTop();this.labelWidth&&("left"==this.labelPosHorizontal?(this.rect.x-=this.labelWidth,this.setWidth(t+this.labelWidth)):"center"==this.labelPosHorizontal&&this.labelWidth>t?(this.rect.x-=(this.labelWidth-t)/2,this.setWidth(this.labelWidth)):"right"==this.labelPosHorizontal&&this.setWidth(t+this.labelWidth)),this.labelHeight&&("top"==this.labelPosVertical?(this.rect.y-=this.labelHeight,this.setHeight(n+this.labelHeight)):"center"==this.labelPosVertical&&this.labelHeight>n?(this.rect.y-=(this.labelHeight-n)/2,this.setHeight(this.labelHeight)):"bottom"==this.labelPosVertical&&this.setHeight(n+this.labelHeight))}}},u.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},u.prototype.transform=function(e){var t=this.rect.x;t>a.WORLD_BOUNDARY?t=a.WORLD_BOUNDARY:t<-a.WORLD_BOUNDARY&&(t=-a.WORLD_BOUNDARY);var n=this.rect.y;n>a.WORLD_BOUNDARY?n=a.WORLD_BOUNDARY:n<-a.WORLD_BOUNDARY&&(n=-a.WORLD_BOUNDARY);var r=new l(t,n),i=e.inverseTransformPoint(r);this.setLocation(i.x,i.y)},u.prototype.getLeft=function(){return this.rect.x},u.prototype.getRight=function(){return this.rect.x+this.rect.width},u.prototype.getTop=function(){return this.rect.y},u.prototype.getBottom=function(){return this.rect.y+this.rect.height},u.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=u},function(e,t,n){var r=n(0);function i(){}for(var o in r)i[o]=r[o];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=3*i.MAX_NODE_DISPLACEMENT_INCREMENTAL,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=i},function(e,t,n){function r(e,t){null==e&&null==t?(this.x=0,this.y=0):(this.x=e,this.y=t)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.setX=function(e){this.x=e},r.prototype.setY=function(e){this.y=e},r.prototype.getDifference=function(e){return new DimensionD(this.x-e.x,this.y-e.y)},r.prototype.getCopy=function(){return new r(this.x,this.y)},r.prototype.translate=function(e){return this.x+=e.width,this.y+=e.height,this},e.exports=r},function(e,t,n){var r=n(2),i=n(10),o=n(0),a=n(7),s=n(3),l=n(1),u=n(13),c=n(12),h=n(11);function d(e,t,n){r.call(this,n),this.estimatedSize=i.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=e,null!=t&&t instanceof a?this.graphManager=t:null!=t&&t instanceof Layout&&(this.graphManager=t.graphManager)}for(var f in d.prototype=Object.create(r.prototype),r)d[f]=r[f];d.prototype.getNodes=function(){return this.nodes},d.prototype.getEdges=function(){return this.edges},d.prototype.getGraphManager=function(){return this.graphManager},d.prototype.getParent=function(){return this.parent},d.prototype.getLeft=function(){return this.left},d.prototype.getRight=function(){return this.right},d.prototype.getTop=function(){return this.top},d.prototype.getBottom=function(){return this.bottom},d.prototype.isConnected=function(){return this.isConnected},d.prototype.add=function(e,t,n){if(null==t&&null==n){var r=e;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(r)>-1)throw"Node already in graph!";return r.owner=this,this.getNodes().push(r),r}var i=e;if(!(this.getNodes().indexOf(t)>-1&&this.getNodes().indexOf(n)>-1))throw"Source or target not in graph!";if(t.owner!=n.owner||t.owner!=this)throw"Both owners must be this graph!";return t.owner!=n.owner?null:(i.source=t,i.target=n,i.isInterGraph=!1,this.getEdges().push(i),t.edges.push(i),n!=t&&n.edges.push(i),i)},d.prototype.remove=function(e){var t=e;if(e instanceof s){if(null==t)throw"Node is null!";if(null==t.owner||t.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var n=t.edges.slice(),r=n.length,i=0;i<r;i++)(o=n[i]).isInterGraph?this.graphManager.remove(o):o.source.owner.remove(o);if(-1==(a=this.nodes.indexOf(t)))throw"Node not in owner node list!";this.nodes.splice(a,1)}else if(e instanceof l){var o;if(null==(o=e))throw"Edge is null!";if(null==o.source||null==o.target)throw"Source and/or target is null!";if(null==o.source.owner||null==o.target.owner||o.source.owner!=this||o.target.owner!=this)throw"Source and/or target owner is invalid!";var a,u=o.source.edges.indexOf(o),c=o.target.edges.indexOf(o);if(!(u>-1&&c>-1))throw"Source and/or target doesn't know this edge!";if(o.source.edges.splice(u,1),o.target!=o.source&&o.target.edges.splice(c,1),-1==(a=o.source.owner.getEdges().indexOf(o)))throw"Not in owner's edge list!";o.source.owner.getEdges().splice(a,1)}},d.prototype.updateLeftTop=function(){for(var e,t,n,r=i.MAX_VALUE,o=i.MAX_VALUE,a=this.getNodes(),s=a.length,l=0;l<s;l++){var u=a[l];r>(e=u.getTop())&&(r=e),o>(t=u.getLeft())&&(o=t)}return r==i.MAX_VALUE?null:(n=null!=a[0].getParent().paddingLeft?a[0].getParent().paddingLeft:this.margin,this.left=o-n,this.top=r-n,new c(this.left,this.top))},d.prototype.updateBounds=function(e){for(var t,n,r,o,a,s=i.MAX_VALUE,l=-i.MAX_VALUE,c=i.MAX_VALUE,h=-i.MAX_VALUE,d=this.nodes,f=d.length,p=0;p<f;p++){var g=d[p];e&&null!=g.child&&g.updateBounds(),s>(t=g.getLeft())&&(s=t),l<(n=g.getRight())&&(l=n),c>(r=g.getTop())&&(c=r),h<(o=g.getBottom())&&(h=o)}var m=new u(s,c,l-s,h-c);s==i.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),a=null!=d[0].getParent().paddingLeft?d[0].getParent().paddingLeft:this.margin,this.left=m.x-a,this.right=m.x+m.width+a,this.top=m.y-a,this.bottom=m.y+m.height+a},d.calculateBounds=function(e){for(var t,n,r,o,a=i.MAX_VALUE,s=-i.MAX_VALUE,l=i.MAX_VALUE,c=-i.MAX_VALUE,h=e.length,d=0;d<h;d++){var f=e[d];a>(t=f.getLeft())&&(a=t),s<(n=f.getRight())&&(s=n),l>(r=f.getTop())&&(l=r),c<(o=f.getBottom())&&(c=o)}return new u(a,l,s-a,c-l)},d.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},d.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},d.prototype.calcEstimatedSize=function(){for(var e=0,t=this.nodes,n=t.length,r=0;r<n;r++)e+=t[r].calcEstimatedSize();return this.estimatedSize=0==e?o.EMPTY_COMPOUND_NODE_SIZE:e/Math.sqrt(this.nodes.length),this.estimatedSize},d.prototype.updateConnected=function(){var e=this;if(0!=this.nodes.length){var t,n,r=new h,i=new Set,o=this.nodes[0];for(o.withChildren().forEach(function(e){r.push(e),i.add(e)});0!==r.length;)for(var a=(t=(o=r.shift()).getEdges()).length,s=0;s<a;s++)null==(n=t[s].getOtherEndInGraph(o,this))||i.has(n)||n.withChildren().forEach(function(e){r.push(e),i.add(e)});if(this.isConnected=!1,i.size>=this.nodes.length){var l=0;i.forEach(function(t){t.owner==e&&l++}),l==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},e.exports=d},function(e,t,n){var r,i=n(1);function o(e){r=n(6),this.layout=e,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var e=this.layout.newGraph(),t=this.layout.newNode(null),n=this.add(e,t);return this.setRootGraph(n),this.rootGraph},o.prototype.add=function(e,t,n,r,i){if(null==n&&null==r&&null==i){if(null==e)throw"Graph is null!";if(null==t)throw"Parent node is null!";if(this.graphs.indexOf(e)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(e),null!=e.parent)throw"Already has a parent!";if(null!=t.child)throw"Already has a child!";return e.parent=t,t.child=e,e}i=n,n=e;var o=(r=t).getOwner(),a=i.getOwner();if(null==o||o.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==a||a.getGraphManager()!=this)throw"Target not in this graph mgr!";if(o==a)return n.isInterGraph=!1,o.add(n,r,i);if(n.isInterGraph=!0,n.source=r,n.target=i,this.edges.indexOf(n)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(n),null==n.source||null==n.target)throw"Edge source and/or target is null!";if(-1!=n.source.edges.indexOf(n)||-1!=n.target.edges.indexOf(n))throw"Edge already in source and/or target incidency list!";return n.source.edges.push(n),n.target.edges.push(n),n},o.prototype.remove=function(e){if(e instanceof r){var t=e;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(t!=this.rootGraph&&(null==t.parent||t.parent.graphManager!=this))throw"Invalid parent node!";for(var n,o=[],a=(o=o.concat(t.getEdges())).length,s=0;s<a;s++)n=o[s],t.remove(n);var l,u=[];for(a=(u=u.concat(t.getNodes())).length,s=0;s<a;s++)l=u[s],t.remove(l);t==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(t);this.graphs.splice(c,1),t.parent=null}else if(e instanceof i){if(null==(n=e))throw"Edge is null!";if(!n.isInterGraph)throw"Not an inter-graph edge!";if(null==n.source||null==n.target)throw"Source and/or target is null!";if(-1==n.source.edges.indexOf(n)||-1==n.target.edges.indexOf(n))throw"Source and/or target doesn't know this edge!";if(c=n.source.edges.indexOf(n),n.source.edges.splice(c,1),c=n.target.edges.indexOf(n),n.target.edges.splice(c,1),null==n.source.owner||null==n.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==n.source.owner.getGraphManager().edges.indexOf(n))throw"Not in owner graph manager's edge list!";c=n.source.owner.getGraphManager().edges.indexOf(n),n.source.owner.getGraphManager().edges.splice(c,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(null==this.allNodes){for(var e=[],t=this.getGraphs(),n=t.length,r=0;r<n;r++)e=e.concat(t[r].getNodes());this.allNodes=e}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(null==this.allEdges){var e=[],t=this.getGraphs();t.length;for(var n=0;n<t.length;n++)e=e.concat(t[n].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(e){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=e},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=e,null==e.parent&&(e.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(e,t){if(null==e||null==t)throw"assert failed";if(e==t)return!0;for(var n,r=e.getOwner();null!=(n=r.getParent());){if(n==t)return!0;if(null==(r=n.getOwner()))break}for(r=t.getOwner();null!=(n=r.getParent());){if(n==e)return!0;if(null==(r=n.getOwner()))break}return!1},o.prototype.calcLowestCommonAncestors=function(){for(var e,t,n,r,i,o=this.getAllEdges(),a=o.length,s=0;s<a;s++)if(t=(e=o[s]).source,n=e.target,e.lca=null,e.sourceInLca=t,e.targetInLca=n,t!=n){for(r=t.getOwner();null==e.lca;){for(e.targetInLca=n,i=n.getOwner();null==e.lca;){if(i==r){e.lca=i;break}if(i==this.rootGraph)break;if(null!=e.lca)throw"assert failed";e.targetInLca=i.getParent(),i=e.targetInLca.getOwner()}if(r==this.rootGraph)break;null==e.lca&&(e.sourceInLca=r.getParent(),r=e.sourceInLca.getOwner())}if(null==e.lca)throw"assert failed"}else e.lca=t.getOwner()},o.prototype.calcLowestCommonAncestor=function(e,t){if(e==t)return e.getOwner();for(var n=e.getOwner();null!=n;){for(var r=t.getOwner();null!=r;){if(r==n)return r;r=r.getParent().getOwner()}n=n.getParent().getOwner()}return n},o.prototype.calcInclusionTreeDepths=function(e,t){var n;null==e&&null==t&&(e=this.rootGraph,t=1);for(var r=e.getNodes(),i=r.length,o=0;o<i;o++)(n=r[o]).inclusionTreeDepth=t,null!=n.child&&this.calcInclusionTreeDepths(n.child,t+1)},o.prototype.includesInvalidEdge=function(){for(var e,t=[],n=this.edges.length,r=0;r<n;r++)e=this.edges[r],this.isOneAncestorOfOther(e.source,e.target)&&t.push(e);for(r=0;r<t.length;r++)this.remove(t[r]);return!1},e.exports=o},function(e,t,n){var r=n(12);function i(){}i.calcSeparationAmount=function(e,t,n,r){if(!e.intersects(t))throw"assert failed";var i=new Array(2);this.decideDirectionsForOverlappingNodes(e,t,i),n[0]=Math.min(e.getRight(),t.getRight())-Math.max(e.x,t.x),n[1]=Math.min(e.getBottom(),t.getBottom())-Math.max(e.y,t.y),e.getX()<=t.getX()&&e.getRight()>=t.getRight()?n[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight()):t.getX()<=e.getX()&&t.getRight()>=e.getRight()&&(n[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight())),e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()?n[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()):t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()&&(n[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()));var o=Math.abs((t.getCenterY()-e.getCenterY())/(t.getCenterX()-e.getCenterX()));t.getCenterY()===e.getCenterY()&&t.getCenterX()===e.getCenterX()&&(o=1);var a=o*n[0],s=n[1]/o;n[0]<s?s=n[0]:a=n[1],n[0]=-1*i[0]*(s/2+r),n[1]=-1*i[1]*(a/2+r)},i.decideDirectionsForOverlappingNodes=function(e,t,n){e.getCenterX()<t.getCenterX()?n[0]=-1:n[0]=1,e.getCenterY()<t.getCenterY()?n[1]=-1:n[1]=1},i.getIntersection2=function(e,t,n){var r=e.getCenterX(),i=e.getCenterY(),o=t.getCenterX(),a=t.getCenterY();if(e.intersects(t))return n[0]=r,n[1]=i,n[2]=o,n[3]=a,!0;var s=e.getX(),l=e.getY(),u=e.getRight(),c=e.getX(),h=e.getBottom(),d=e.getRight(),f=e.getWidthHalf(),p=e.getHeightHalf(),g=t.getX(),m=t.getY(),v=t.getRight(),y=t.getX(),b=t.getBottom(),x=t.getRight(),w=t.getWidthHalf(),E=t.getHeightHalf(),T=!1,_=!1;if(r===o){if(i>a)return n[0]=r,n[1]=l,n[2]=o,n[3]=b,!1;if(i<a)return n[0]=r,n[1]=h,n[2]=o,n[3]=m,!1}else if(i===a){if(r>o)return n[0]=s,n[1]=i,n[2]=v,n[3]=a,!1;if(r<o)return n[0]=u,n[1]=i,n[2]=g,n[3]=a,!1}else{var k=e.height/e.width,A=t.height/t.width,S=(a-i)/(o-r),N=void 0,M=void 0,C=void 0,I=void 0,R=void 0,L=void 0;if(-k===S?r>o?(n[0]=c,n[1]=h,T=!0):(n[0]=u,n[1]=l,T=!0):k===S&&(r>o?(n[0]=s,n[1]=l,T=!0):(n[0]=d,n[1]=h,T=!0)),-A===S?o>r?(n[2]=y,n[3]=b,_=!0):(n[2]=v,n[3]=m,_=!0):A===S&&(o>r?(n[2]=g,n[3]=m,_=!0):(n[2]=x,n[3]=b,_=!0)),T&&_)return!1;if(r>o?i>a?(N=this.getCardinalDirection(k,S,4),M=this.getCardinalDirection(A,S,2)):(N=this.getCardinalDirection(-k,S,3),M=this.getCardinalDirection(-A,S,1)):i>a?(N=this.getCardinalDirection(-k,S,1),M=this.getCardinalDirection(-A,S,3)):(N=this.getCardinalDirection(k,S,2),M=this.getCardinalDirection(A,S,4)),!T)switch(N){case 1:I=l,C=r+-p/S,n[0]=C,n[1]=I;break;case 2:C=d,I=i+f*S,n[0]=C,n[1]=I;break;case 3:I=h,C=r+p/S,n[0]=C,n[1]=I;break;case 4:C=c,I=i+-f*S,n[0]=C,n[1]=I}if(!_)switch(M){case 1:L=m,R=o+-E/S,n[2]=R,n[3]=L;break;case 2:R=x,L=a+w*S,n[2]=R,n[3]=L;break;case 3:L=b,R=o+E/S,n[2]=R,n[3]=L;break;case 4:R=y,L=a+-w*S,n[2]=R,n[3]=L}}return!1},i.getCardinalDirection=function(e,t,n){return e>t?n:1+n%4},i.getIntersection=function(e,t,n,i){if(null==i)return this.getIntersection2(e,t,n);var o,a,s,l,u,c,h,d=e.x,f=e.y,p=t.x,g=t.y,m=n.x,v=n.y,y=i.x,b=i.y;return 0===(h=(o=g-f)*(l=m-y)-(a=b-v)*(s=d-p))?null:new r((s*(c=y*v-m*b)-l*(u=p*f-d*g))/h,(a*u-o*c)/h)},i.angleOfVector=function(e,t,n,r){var i=void 0;return e!==n?(i=Math.atan((r-t)/(n-e)),n<e?i+=Math.PI:r<t&&(i+=this.TWO_PI)):i=r<t?this.ONE_AND_HALF_PI:this.HALF_PI,i},i.doIntersect=function(e,t,n,r){var i=e.x,o=e.y,a=t.x,s=t.y,l=n.x,u=n.y,c=r.x,h=r.y,d=(a-i)*(h-u)-(c-l)*(s-o);if(0===d)return!1;var f=((h-u)*(c-i)+(l-c)*(h-o))/d,p=((o-s)*(c-i)+(a-i)*(h-o))/d;return 0<f&&f<1&&0<p&&p<1},i.findCircleLineIntersections=function(e,t,n,r,i,o,a){var s=(n-e)*(n-e)+(r-t)*(r-t),l=2*((e-i)*(n-e)+(t-o)*(r-t)),u=(e-i)*(e-i)+(t-o)*(t-o)-a*a;if(l*l-4*s*u>=0){var c=(-l+Math.sqrt(l*l-4*s*u))/(2*s),h=(-l-Math.sqrt(l*l-4*s*u))/(2*s);return c>=0&&c<=1?[c]:h>=0&&h<=1?[h]:null}return null},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,e.exports=i},function(e,t,n){function r(){}r.sign=function(e){return e>0?1:e<0?-1:0},r.floor=function(e){return e<0?Math.ceil(e):Math.floor(e)},r.ceil=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.exports=r},function(e,t,n){function r(){}r.MAX_VALUE=2147483647,r.MIN_VALUE=-2147483648,e.exports=r},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return{value:e,next:null,prev:null}},o=function(e,t,n,r){return null!==e?e.next=t:r.head=t,null!==n?n.prev=t:r.tail=t,t.prev=e,t.next=n,r.length++,t},a=function(e,t){var n=e.prev,r=e.next;return null!==n?n.next=r:t.head=r,null!==r?r.prev=n:t.tail=n,e.prev=e.next=null,t.length--,e},s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.length=0,this.head=null,this.tail=null,null!=t&&t.forEach(function(e){return n.push(e)})}return r(e,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(e,t){return o(t.prev,i(e),t,this)}},{key:"insertAfter",value:function(e,t){return o(t,i(e),t.next,this)}},{key:"insertNodeBefore",value:function(e,t){return o(t.prev,e,t,this)}},{key:"insertNodeAfter",value:function(e,t){return o(t,e,t.next,this)}},{key:"push",value:function(e){return o(this.tail,i(e),null,this)}},{key:"unshift",value:function(e){return o(null,i(e),this.head,this)}},{key:"remove",value:function(e){return a(e,this)}},{key:"pop",value:function(){return a(this.tail,this).value}},{key:"popNode",value:function(){return a(this.tail,this)}},{key:"shift",value:function(){return a(this.head,this).value}},{key:"shiftNode",value:function(){return a(this.head,this)}},{key:"get_object_at",value:function(e){if(e<=this.length()){for(var t=1,n=this.head;t<e;)n=n.next,t++;return n.value}}},{key:"set_object_at",value:function(e,t){if(e<=this.length()){for(var n=1,r=this.head;n<e;)r=r.next,n++;r.value=t}}}]),e}();e.exports=s},function(e,t,n){function r(e,t,n){this.x=null,this.y=null,null==e&&null==t&&null==n?(this.x=0,this.y=0):"number"==typeof e&&"number"==typeof t&&null==n?(this.x=e,this.y=t):"Point"==e.constructor.name&&null==t&&null==n&&(n=e,this.x=n.x,this.y=n.y)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.getLocation=function(){return new r(this.x,this.y)},r.prototype.setLocation=function(e,t,n){"Point"==e.constructor.name&&null==t&&null==n?(n=e,this.setLocation(n.x,n.y)):"number"==typeof e&&"number"==typeof t&&null==n&&(parseInt(e)==e&&parseInt(t)==t?this.move(e,t):(this.x=Math.floor(e+.5),this.y=Math.floor(t+.5)))},r.prototype.move=function(e,t){this.x=e,this.y=t},r.prototype.translate=function(e,t){this.x+=e,this.y+=t},r.prototype.equals=function(e){if("Point"==e.constructor.name){var t=e;return this.x==t.x&&this.y==t.y}return this==e},r.prototype.toString=function(){return(new r).constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=r},function(e,t,n){function r(e,t,n,r){this.x=0,this.y=0,this.width=0,this.height=0,null!=e&&null!=t&&null!=n&&null!=r&&(this.x=e,this.y=t,this.width=n,this.height=r)}r.prototype.getX=function(){return this.x},r.prototype.setX=function(e){this.x=e},r.prototype.getY=function(){return this.y},r.prototype.setY=function(e){this.y=e},r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(e){this.width=e},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(e){this.height=e},r.prototype.getRight=function(){return this.x+this.width},r.prototype.getBottom=function(){return this.y+this.height},r.prototype.intersects=function(e){return!(this.getRight()<e.x||this.getBottom()<e.y||e.getRight()<this.x||e.getBottom()<this.y)},r.prototype.getCenterX=function(){return this.x+this.width/2},r.prototype.getMinX=function(){return this.getX()},r.prototype.getMaxX=function(){return this.getX()+this.width},r.prototype.getCenterY=function(){return this.y+this.height/2},r.prototype.getMinY=function(){return this.getY()},r.prototype.getMaxY=function(){return this.getY()+this.height},r.prototype.getWidthHalf=function(){return this.width/2},r.prototype.getHeightHalf=function(){return this.height/2},e.exports=r},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){}i.lastID=0,i.createID=function(e){return i.isPrimitive(e)?e:(null!=e.uniqueID||(e.uniqueID=i.getString(),i.lastID++),e.uniqueID)},i.getString=function(e){return null==e&&(e=i.lastID),"Object#"+e},i.isPrimitive=function(e){var t=void 0===e?"undefined":r(e);return null==e||"object"!=t&&"function"!=t},e.exports=i},function(e,t,n){function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=n(0),o=n(7),a=n(3),s=n(1),l=n(6),u=n(5),c=n(17),h=n(29);function d(e){h.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=e&&(this.isRemoteUse=e)}d.RANDOM_SEED=1,d.prototype=Object.create(h.prototype),d.prototype.getGraphManager=function(){return this.graphManager},d.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},d.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},d.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},d.prototype.newGraphManager=function(){var e=new o(this);return this.graphManager=e,e},d.prototype.newGraph=function(e){return new l(null,this.graphManager,e)},d.prototype.newNode=function(e){return new a(this.graphManager,e)},d.prototype.newEdge=function(e){return new s(null,null,e)},d.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},d.prototype.runLayout=function(){var e;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),e=!this.checkLayoutSuccess()&&this.layout(),"during"!==i.ANIMATE&&(e&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,e)},d.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},d.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var e=this.graphManager.getAllEdges(),t=0;t<e.length;t++)e[t];var n=this.graphManager.getRoot().getNodes();for(t=0;t<n.length;t++)n[t];this.update(this.graphManager.getRoot())}},d.prototype.update=function(e){if(null==e)this.update2();else if(e instanceof a){var t=e;if(null!=t.getChild())for(var n=t.getChild().getNodes(),r=0;r<n.length;r++)update(n[r]);null!=t.vGraphObject&&t.vGraphObject.update(t)}else if(e instanceof s){var i=e;null!=i.vGraphObject&&i.vGraphObject.update(i)}else if(e instanceof l){var o=e;null!=o.vGraphObject&&o.vGraphObject.update(o)}},d.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},d.prototype.transform=function(e){if(null==e)this.transform(new u(0,0));else{var t=new c,n=this.graphManager.getRoot().updateLeftTop();if(null!=n){t.setWorldOrgX(e.x),t.setWorldOrgY(e.y),t.setDeviceOrgX(n.x),t.setDeviceOrgY(n.y);for(var r=this.getAllNodes(),i=0;i<r.length;i++)r[i].transform(t)}}},d.prototype.positionNodesRandomly=function(e){if(null==e)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var t,n,r=e.getNodes(),i=0;i<r.length;i++)null==(n=(t=r[i]).getChild())||0==n.getNodes().length?t.scatter():(this.positionNodesRandomly(n),t.updateBounds())},d.prototype.getFlatForest=function(){for(var e=[],t=!0,n=this.graphManager.getRoot().getNodes(),i=!0,o=0;o<n.length;o++)null!=n[o].getChild()&&(i=!1);if(!i)return e;var a=new Set,s=[],l=new Map,u=[];for(u=u.concat(n);u.length>0&&t;){for(s.push(u[0]);s.length>0&&t;){var c=s[0];s.splice(0,1),a.add(c);var h=c.getEdges();for(o=0;o<h.length;o++){var d=h[o].getOtherEnd(c);if(l.get(c)!=d){if(a.has(d)){t=!1;break}s.push(d),l.set(d,c)}}}if(t){var f=[].concat(r(a));for(e.push(f),o=0;o<f.length;o++){var p=f[o],g=u.indexOf(p);g>-1&&u.splice(g,1)}a=new Set,l=new Map}else e=[]}return e},d.prototype.createDummyNodesForBendpoints=function(e){for(var t=[],n=e.source,r=this.graphManager.calcLowestCommonAncestor(e.source,e.target),i=0;i<e.bendpoints.length;i++){var o=this.newNode(null);o.setRect(new Point(0,0),new Dimension(1,1)),r.add(o);var a=this.newEdge(null);this.graphManager.add(a,n,o),t.add(o),n=o}return a=this.newEdge(null),this.graphManager.add(a,n,e.target),this.edgeToDummyNodes.set(e,t),e.isInterGraph()?this.graphManager.remove(e):r.remove(e),t},d.prototype.createBendpointsFromDummyNodes=function(){var e=[];e=e.concat(this.graphManager.getAllEdges()),e=[].concat(r(this.edgeToDummyNodes.keys())).concat(e);for(var t=0;t<e.length;t++){var n=e[t];if(n.bendpoints.length>0){for(var i=this.edgeToDummyNodes.get(n),o=0;o<i.length;o++){var a=i[o],s=new u(a.getCenterX(),a.getCenterY()),l=n.bendpoints.get(o);l.x=s.x,l.y=s.y,a.getOwner().remove(a)}this.graphManager.add(n,n.source,n.target)}}},d.transform=function(e,t,n,r){if(null!=n&&null!=r){var i=t;return e<=50?i-=(t-t/n)/50*(50-e):i+=(t*r-t)/50*(e-50),i}var o,a;return e<=50?(o=9*t/500,a=t/10):(o=9*t/50,a=-8*t),o*e+a},d.findCenterOfTree=function(e){var t=[];t=t.concat(e);var n=[],r=new Map,i=!1,o=null;1!=t.length&&2!=t.length||(i=!0,o=t[0]);for(var a=0;a<t.length;a++){var s=(c=t[a]).getNeighborsList().size;r.set(c,c.getNeighborsList().size),1==s&&n.push(c)}var l=[];for(l=l.concat(n);!i;){var u=[];for(u=u.concat(l),l=[],a=0;a<t.length;a++){var c=t[a],h=t.indexOf(c);h>=0&&t.splice(h,1),c.getNeighborsList().forEach(function(e){if(n.indexOf(e)<0){var t=r.get(e)-1;1==t&&l.push(e),r.set(e,t)}})}n=n.concat(l),1!=t.length&&2!=t.length||(i=!0,o=t[0])}return o},d.prototype.setGraphManager=function(e){this.graphManager=e},e.exports=d},function(e,t,n){function r(){}r.seed=1,r.x=0,r.nextDouble=function(){return r.x=1e4*Math.sin(r.seed++),r.x-Math.floor(r.x)},e.exports=r},function(e,t,n){var r=n(5);function i(e,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(e){this.lworldOrgX=e},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(e){this.lworldOrgY=e},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(e){this.lworldExtX=e},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(e){this.lworldExtY=e},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(e){this.ldeviceOrgX=e},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(e){this.ldeviceOrgY=e},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(e){this.ldeviceExtX=e},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(e){this.ldeviceExtY=e},i.prototype.transformX=function(e){var t=0,n=this.lworldExtX;return 0!=n&&(t=this.ldeviceOrgX+(e-this.lworldOrgX)*this.ldeviceExtX/n),t},i.prototype.transformY=function(e){var t=0,n=this.lworldExtY;return 0!=n&&(t=this.ldeviceOrgY+(e-this.lworldOrgY)*this.ldeviceExtY/n),t},i.prototype.inverseTransformX=function(e){var t=0,n=this.ldeviceExtX;return 0!=n&&(t=this.lworldOrgX+(e-this.ldeviceOrgX)*this.lworldExtX/n),t},i.prototype.inverseTransformY=function(e){var t=0,n=this.ldeviceExtY;return 0!=n&&(t=this.lworldOrgY+(e-this.ldeviceOrgY)*this.lworldExtY/n),t},i.prototype.inverseTransformPoint=function(e){return new r(this.inverseTransformX(e.x),this.inverseTransformY(e.y))},e.exports=i},function(e,t,n){var r=n(15),i=n(4),o=n(0),a=n(8),s=n(9);function l(){r.call(this),this.useSmartIdealEdgeLengthCalculation=i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=i.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=i.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=i.MAX_ITERATIONS}for(var u in l.prototype=Object.create(r.prototype),r)l[u]=r[u];l.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},l.prototype.calcIdealEdgeLengths=function(){for(var e,t,n,r,a,s,l,u=this.getGraphManager().getAllEdges(),c=0;c<u.length;c++)t=(e=u[c]).idealLength,e.isInterGraph&&(r=e.getSource(),a=e.getTarget(),s=e.getSourceInLca().getEstimatedSize(),l=e.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(e.idealLength+=s+l-2*o.SIMPLE_NODE_SIZE),n=e.getLca().getInclusionTreeDepth(),e.idealLength+=t*i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(r.getInclusionTreeDepth()+a.getInclusionTreeDepth()-2*n))},l.prototype.initSpringEmbedder=function(){var e=this.getAllNodes().length;this.incremental?(e>i.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*i.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(e-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-i.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT_INCREMENTAL):(e>i.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(i.COOLING_ADAPTATION_FACTOR,1-(e-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*(1-i.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},l.prototype.calcSpringForces=function(){for(var e,t=this.getAllEdges(),n=0;n<t.length;n++)e=t[n],this.calcSpringForce(e,e.idealLength)},l.prototype.calcRepulsionForces=function(){var e,t,n,r,o,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&a&&this.updateGrid(),o=new Set,e=0;e<l.length;e++)n=l[e],this.calculateRepulsionForceOfANode(n,o,a,s),o.add(n);else for(e=0;e<l.length;e++)for(n=l[e],t=e+1;t<l.length;t++)r=l[t],n.getOwner()==r.getOwner()&&this.calcRepulsionForce(n,r)},l.prototype.calcGravitationalForces=function(){for(var e,t=this.getAllNodesToApplyGravitation(),n=0;n<t.length;n++)e=t[n],this.calcGravitationalForce(e)},l.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].move()},l.prototype.calcSpringForce=function(e,t){var n,r,i,o,a=e.getSource(),s=e.getTarget();if(this.uniformLeafNodeSizes&&null==a.getChild()&&null==s.getChild())e.updateLengthSimple();else if(e.updateLength(),e.isOverlapingSourceAndTarget)return;0!=(n=e.getLength())&&(i=(r=e.edgeElasticity*(n-t))*(e.lengthX/n),o=r*(e.lengthY/n),a.springForceX+=i,a.springForceY+=o,s.springForceX-=i,s.springForceY-=o)},l.prototype.calcRepulsionForce=function(e,t){var n,r,o,l,u,c,h,d=e.getRect(),f=t.getRect(),p=new Array(2),g=new Array(4);if(d.intersects(f)){a.calcSeparationAmount(d,f,p,i.DEFAULT_EDGE_LENGTH/2),c=2*p[0],h=2*p[1];var m=e.noOfChildren*t.noOfChildren/(e.noOfChildren+t.noOfChildren);e.repulsionForceX-=m*c,e.repulsionForceY-=m*h,t.repulsionForceX+=m*c,t.repulsionForceY+=m*h}else this.uniformLeafNodeSizes&&null==e.getChild()&&null==t.getChild()?(n=f.getCenterX()-d.getCenterX(),r=f.getCenterY()-d.getCenterY()):(a.getIntersection(d,f,g),n=g[2]-g[0],r=g[3]-g[1]),Math.abs(n)<i.MIN_REPULSION_DIST&&(n=s.sign(n)*i.MIN_REPULSION_DIST),Math.abs(r)<i.MIN_REPULSION_DIST&&(r=s.sign(r)*i.MIN_REPULSION_DIST),o=n*n+r*r,l=Math.sqrt(o),c=(u=(e.nodeRepulsion/2+t.nodeRepulsion/2)*e.noOfChildren*t.noOfChildren/o)*n/l,h=u*r/l,e.repulsionForceX-=c,e.repulsionForceY-=h,t.repulsionForceX+=c,t.repulsionForceY+=h},l.prototype.calcGravitationalForce=function(e){var t,n,r,i,o,a,s,l;n=((t=e.getOwner()).getRight()+t.getLeft())/2,r=(t.getTop()+t.getBottom())/2,i=e.getCenterX()-n,o=e.getCenterY()-r,a=Math.abs(i)+e.getWidth()/2,s=Math.abs(o)+e.getHeight()/2,e.getOwner()==this.graphManager.getRoot()?(a>(l=t.getEstimatedSize()*this.gravityRangeFactor)||s>l)&&(e.gravitationForceX=-this.gravityConstant*i,e.gravitationForceY=-this.gravityConstant*o):(a>(l=t.getEstimatedSize()*this.compoundGravityRangeFactor)||s>l)&&(e.gravitationForceX=-this.gravityConstant*i*this.compoundGravityConstant,e.gravitationForceY=-this.gravityConstant*o*this.compoundGravityConstant)},l.prototype.isConverged=function(){var e,t=!1;return this.totalIterations>this.maxIterations/3&&(t=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),e=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,e||t},l.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},l.prototype.calcNoOfChildrenForAllNodes=function(){for(var e,t=this.graphManager.getAllNodes(),n=0;n<t.length;n++)(e=t[n]).noOfChildren=e.getNoOfChildren()},l.prototype.calcGrid=function(e){var t,n;t=parseInt(Math.ceil((e.getRight()-e.getLeft())/this.repulsionRange)),n=parseInt(Math.ceil((e.getBottom()-e.getTop())/this.repulsionRange));for(var r=new Array(t),i=0;i<t;i++)r[i]=new Array(n);for(i=0;i<t;i++)for(var o=0;o<n;o++)r[i][o]=new Array;return r},l.prototype.addNodeToGrid=function(e,t,n){var r,i,o,a;r=parseInt(Math.floor((e.getRect().x-t)/this.repulsionRange)),i=parseInt(Math.floor((e.getRect().width+e.getRect().x-t)/this.repulsionRange)),o=parseInt(Math.floor((e.getRect().y-n)/this.repulsionRange)),a=parseInt(Math.floor((e.getRect().height+e.getRect().y-n)/this.repulsionRange));for(var s=r;s<=i;s++)for(var l=o;l<=a;l++)this.grid[s][l].push(e),e.setGridCoordinates(r,i,o,a)},l.prototype.updateGrid=function(){var e,t,n=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),e=0;e<n.length;e++)t=n[e],this.addNodeToGrid(t,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},l.prototype.calculateRepulsionForceOfANode=function(e,t,n,r){if(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&n||r){var o,a=new Set;e.surrounding=new Array;for(var s=this.grid,l=e.startX-1;l<e.finishX+2;l++)for(var u=e.startY-1;u<e.finishY+2;u++)if(!(l<0||u<0||l>=s.length||u>=s[0].length))for(var c=0;c<s[l][u].length;c++)if(o=s[l][u][c],e.getOwner()==o.getOwner()&&e!=o&&!t.has(o)&&!a.has(o)){var h=Math.abs(e.getCenterX()-o.getCenterX())-(e.getWidth()/2+o.getWidth()/2),d=Math.abs(e.getCenterY()-o.getCenterY())-(e.getHeight()/2+o.getHeight()/2);h<=this.repulsionRange&&d<=this.repulsionRange&&a.add(o)}e.surrounding=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a))}for(l=0;l<e.surrounding.length;l++)this.calcRepulsionForce(e,e.surrounding[l])},l.prototype.calcRepulsionRange=function(){return 0},e.exports=l},function(e,t,n){var r=n(1),i=n(4);function o(e,t,n){r.call(this,e,t,n),this.idealLength=i.DEFAULT_EDGE_LENGTH,this.edgeElasticity=i.DEFAULT_SPRING_STRENGTH}for(var a in o.prototype=Object.create(r.prototype),r)o[a]=r[a];e.exports=o},function(e,t,n){var r=n(3),i=n(4);function o(e,t,n,o){r.call(this,e,t,n,o),this.nodeRepulsion=i.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var a in o.prototype=Object.create(r.prototype),r)o[a]=r[a];o.prototype.setGridCoordinates=function(e,t,n,r){this.startX=e,this.finishX=t,this.startY=n,this.finishY=r},e.exports=o},function(e,t,n){function r(e,t){this.width=0,this.height=0,null!==e&&null!==t&&(this.height=t,this.width=e)}r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(e){this.width=e},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(e){this.height=e},e.exports=r},function(e,t,n){var r=n(14);function i(){this.map={},this.keys=[]}i.prototype.put=function(e,t){var n=r.createID(e);this.contains(n)||(this.map[n]=t,this.keys.push(e))},i.prototype.contains=function(e){return r.createID(e),null!=this.map[e]},i.prototype.get=function(e){var t=r.createID(e);return this.map[t]},i.prototype.keySet=function(){return this.keys},e.exports=i},function(e,t,n){var r=n(14);function i(){this.set={}}i.prototype.add=function(e){var t=r.createID(e);this.contains(t)||(this.set[t]=e)},i.prototype.remove=function(e){delete this.set[r.createID(e)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(e){return this.set[r.createID(e)]==e},i.prototype.isEmpty=function(){return 0===this.size()},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(e){for(var t=Object.keys(this.set),n=t.length,r=0;r<n;r++)e.push(this.set[t[r]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(e){for(var t=e.length,n=0;n<t;n++){var r=e[n];this.add(r)}},e.exports=i},function(e,t,n){function r(){}r.multMat=function(e,t){for(var n=[],r=0;r<e.length;r++){n[r]=[];for(var i=0;i<t[0].length;i++){n[r][i]=0;for(var o=0;o<e[0].length;o++)n[r][i]+=e[r][o]*t[o][i]}}return n},r.transpose=function(e){for(var t=[],n=0;n<e[0].length;n++){t[n]=[];for(var r=0;r<e.length;r++)t[n][r]=e[r][n]}return t},r.multCons=function(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=e[r]*t;return n},r.minusOp=function(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=e[r]-t[r];return n},r.dotProduct=function(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n},r.mag=function(e){return Math.sqrt(this.dotProduct(e,e))},r.normalize=function(e){for(var t=[],n=this.mag(e),r=0;r<e.length;r++)t[r]=e[r]/n;return t},r.multGamma=function(e){for(var t=[],n=0,r=0;r<e.length;r++)n+=e[r];n*=-1/e.length;for(var i=0;i<e.length;i++)t[i]=n+e[i];return t},r.multL=function(e,t,n){for(var r=[],i=[],o=[],a=0;a<t[0].length;a++){for(var s=0,l=0;l<t.length;l++)s+=-.5*t[l][a]*e[l];i[a]=s}for(var u=0;u<n.length;u++){for(var c=0,h=0;h<n.length;h++)c+=n[u][h]*i[h];o[u]=c}for(var d=0;d<t.length;d++){for(var f=0,p=0;p<t[0].length;p++)f+=t[d][p]*o[p];r[d]=f}return r},e.exports=r},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null===n&&void 0===n||(this.compareFunction=this._defaultCompareFunction);var r=void 0;r=t instanceof i?t.size():t.length,this._quicksort(t,0,r-1)}return r(e,[{key:"_quicksort",value:function(e,t,n){if(t<n){var r=this._partition(e,t,n);this._quicksort(e,t,r),this._quicksort(e,r+1,n)}}},{key:"_partition",value:function(e,t,n){for(var r=this._get(e,t),i=t,o=n;;){for(;this.compareFunction(r,this._get(e,o));)o--;for(;this.compareFunction(this._get(e,i),r);)i++;if(!(i<o))return o;this._swap(e,i,o),i++,o--}}},{key:"_get",value:function(e,t){return e instanceof i?e.get_object_at(t):e[t]}},{key:"_set",value:function(e,t,n){e instanceof i?e.set_object_at(t,n):e[t]=n}},{key:"_swap",value:function(e,t,n){var r=this._get(e,t);this._set(e,t,this._get(e,n)),this._set(e,n,r)}},{key:"_defaultCompareFunction",value:function(e,t){return t>e}}]),e}();e.exports=o},function(e,t,n){function r(){}r.svd=function(e){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=e.length,this.n=e[0].length;var t=Math.min(this.m,this.n);this.s=function(e){for(var t=[];e-- >0;)t.push(0);return t}(Math.min(this.m+1,this.n)),this.U=function e(t){if(0==t.length)return 0;for(var n=[],r=0;r<t[0];r++)n.push(e(t.slice(1)));return n}([this.m,t]),this.V=function(e){return function e(t){if(0==t.length)return 0;for(var n=[],r=0;r<t[0];r++)n.push(e(t.slice(1)));return n}(e)}([this.n,this.n]);for(var n=function(e){for(var t=[];e-- >0;)t.push(0);return t}(this.n),i=function(e){for(var t=[];e-- >0;)t.push(0);return t}(this.m),o=Math.min(this.m-1,this.n),a=Math.max(0,Math.min(this.n-2,this.m)),s=0;s<Math.max(o,a);s++){if(s<o){this.s[s]=0;for(var l=s;l<this.m;l++)this.s[s]=r.hypot(this.s[s],e[l][s]);if(0!==this.s[s]){e[s][s]<0&&(this.s[s]=-this.s[s]);for(var u=s;u<this.m;u++)e[u][s]/=this.s[s];e[s][s]+=1}this.s[s]=-this.s[s]}for(var c=s+1;c<this.n;c++){if(function(e,t){return e&&t}(s<o,0!==this.s[s])){for(var h=0,d=s;d<this.m;d++)h+=e[d][s]*e[d][c];h=-h/e[s][s];for(var f=s;f<this.m;f++)e[f][c]+=h*e[f][s]}n[c]=e[s][c]}if(function(e,t){return t}(0,s<o))for(var p=s;p<this.m;p++)this.U[p][s]=e[p][s];if(s<a){n[s]=0;for(var g=s+1;g<this.n;g++)n[s]=r.hypot(n[s],n[g]);if(0!==n[s]){n[s+1]<0&&(n[s]=-n[s]);for(var m=s+1;m<this.n;m++)n[m]/=n[s];n[s+1]+=1}if(n[s]=-n[s],function(e,t){return e&&t}(s+1<this.m,0!==n[s])){for(var v=s+1;v<this.m;v++)i[v]=0;for(var y=s+1;y<this.n;y++)for(var b=s+1;b<this.m;b++)i[b]+=n[y]*e[b][y];for(var x=s+1;x<this.n;x++)for(var w=-n[x]/n[s+1],E=s+1;E<this.m;E++)e[E][x]+=w*i[E]}for(var T=s+1;T<this.n;T++)this.V[T][s]=n[T]}}var _=Math.min(this.n,this.m+1);o<this.n&&(this.s[o]=e[o][o]),this.m<_&&(this.s[_-1]=0),a+1<_&&(n[a]=e[a][_-1]),n[_-1]=0;for(var k=o;k<t;k++){for(var A=0;A<this.m;A++)this.U[A][k]=0;this.U[k][k]=1}for(var S=o-1;S>=0;S--)if(0!==this.s[S]){for(var N=S+1;N<t;N++){for(var M=0,C=S;C<this.m;C++)M+=this.U[C][S]*this.U[C][N];M=-M/this.U[S][S];for(var I=S;I<this.m;I++)this.U[I][N]+=M*this.U[I][S]}for(var R=S;R<this.m;R++)this.U[R][S]=-this.U[R][S];this.U[S][S]=1+this.U[S][S];for(var L=0;L<S-1;L++)this.U[L][S]=0}else{for(var O=0;O<this.m;O++)this.U[O][S]=0;this.U[S][S]=1}for(var D=this.n-1;D>=0;D--){if(function(e,t){return e&&t}(D<a,0!==n[D]))for(var P=D+1;P<t;P++){for(var B=0,F=D+1;F<this.n;F++)B+=this.V[F][D]*this.V[F][P];B=-B/this.V[D+1][D];for(var z=D+1;z<this.n;z++)this.V[z][P]+=B*this.V[z][D]}for(var U=0;U<this.n;U++)this.V[U][D]=0;this.V[D][D]=1}for(var G=_-1,V=Math.pow(2,-52),j=Math.pow(2,-966);_>0;){var H=void 0,$=void 0;for(H=_-2;H>=-1&&-1!==H;H--)if(Math.abs(n[H])<=j+V*(Math.abs(this.s[H])+Math.abs(this.s[H+1]))){n[H]=0;break}if(H===_-2)$=4;else{var Y=void 0;for(Y=_-1;Y>=H&&Y!==H;Y--){var q=(Y!==_?Math.abs(n[Y]):0)+(Y!==H+1?Math.abs(n[Y-1]):0);if(Math.abs(this.s[Y])<=j+V*q){this.s[Y]=0;break}}Y===H?$=3:Y===_-1?$=1:($=2,H=Y)}switch(H++,$){case 1:var W=n[_-2];n[_-2]=0;for(var X=_-2;X>=H;X--){var K=r.hypot(this.s[X],W),Z=this.s[X]/K,Q=W/K;this.s[X]=K,X!==H&&(W=-Q*n[X-1],n[X-1]=Z*n[X-1]);for(var J=0;J<this.n;J++)K=Z*this.V[J][X]+Q*this.V[J][_-1],this.V[J][_-1]=-Q*this.V[J][X]+Z*this.V[J][_-1],this.V[J][X]=K}break;case 2:var ee=n[H-1];n[H-1]=0;for(var te=H;te<_;te++){var ne=r.hypot(this.s[te],ee),re=this.s[te]/ne,ie=ee/ne;this.s[te]=ne,ee=-ie*n[te],n[te]=re*n[te];for(var oe=0;oe<this.m;oe++)ne=re*this.U[oe][te]+ie*this.U[oe][H-1],this.U[oe][H-1]=-ie*this.U[oe][te]+re*this.U[oe][H-1],this.U[oe][te]=ne}break;case 3:var ae=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[_-1]),Math.abs(this.s[_-2])),Math.abs(n[_-2])),Math.abs(this.s[H])),Math.abs(n[H])),se=this.s[_-1]/ae,le=this.s[_-2]/ae,ue=n[_-2]/ae,ce=this.s[H]/ae,he=n[H]/ae,de=((le+se)*(le-se)+ue*ue)/2,fe=se*ue*(se*ue),pe=0;(function(e,t){return e||t})(0!==de,0!==fe)&&(pe=Math.sqrt(de*de+fe),de<0&&(pe=-pe),pe=fe/(de+pe));for(var ge=(ce+se)*(ce-se)+pe,me=ce*he,ve=H;ve<_-1;ve++){var ye=r.hypot(ge,me),be=ge/ye,xe=me/ye;ve!==H&&(n[ve-1]=ye),ge=be*this.s[ve]+xe*n[ve],n[ve]=be*n[ve]-xe*this.s[ve],me=xe*this.s[ve+1],this.s[ve+1]=be*this.s[ve+1];for(var we=0;we<this.n;we++)ye=be*this.V[we][ve]+xe*this.V[we][ve+1],this.V[we][ve+1]=-xe*this.V[we][ve]+be*this.V[we][ve+1],this.V[we][ve]=ye;if(be=ge/(ye=r.hypot(ge,me)),xe=me/ye,this.s[ve]=ye,ge=be*n[ve]+xe*this.s[ve+1],this.s[ve+1]=-xe*n[ve]+be*this.s[ve+1],me=xe*n[ve+1],n[ve+1]=be*n[ve+1],ve<this.m-1)for(var Ee=0;Ee<this.m;Ee++)ye=be*this.U[Ee][ve]+xe*this.U[Ee][ve+1],this.U[Ee][ve+1]=-xe*this.U[Ee][ve]+be*this.U[Ee][ve+1],this.U[Ee][ve]=ye}n[_-2]=ge;break;case 4:if(this.s[H]<=0){this.s[H]=this.s[H]<0?-this.s[H]:0;for(var Te=0;Te<=G;Te++)this.V[Te][H]=-this.V[Te][H]}for(;H<G&&!(this.s[H]>=this.s[H+1]);){var _e=this.s[H];if(this.s[H]=this.s[H+1],this.s[H+1]=_e,H<this.n-1)for(var ke=0;ke<this.n;ke++)_e=this.V[ke][H+1],this.V[ke][H+1]=this.V[ke][H],this.V[ke][H]=_e;if(H<this.m-1)for(var Ae=0;Ae<this.m;Ae++)_e=this.U[Ae][H+1],this.U[Ae][H+1]=this.U[Ae][H],this.U[Ae][H]=_e;H++}_--}}return{U:this.U,V:this.V,S:this.s}},r.hypot=function(e,t){var n=void 0;return Math.abs(e)>Math.abs(t)?(n=t/e,n=Math.abs(e)*Math.sqrt(1+n*n)):0!=t?(n=e/t,n=Math.abs(t)*Math.sqrt(1+n*n)):n=0,n},e.exports=r},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sequence1=t,this.sequence2=n,this.match_score=r,this.mismatch_penalty=i,this.gap_penalty=o,this.iMax=t.length+1,this.jMax=n.length+1,this.grid=new Array(this.iMax);for(var a=0;a<this.iMax;a++){this.grid[a]=new Array(this.jMax);for(var s=0;s<this.jMax;s++)this.grid[a][s]=0}this.tracebackGrid=new Array(this.iMax);for(var l=0;l<this.iMax;l++){this.tracebackGrid[l]=new Array(this.jMax);for(var u=0;u<this.jMax;u++)this.tracebackGrid[l][u]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return r(e,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var n=1;n<this.iMax;n++)for(var r=1;r<this.jMax;r++){var i=[this.sequence1[n-1]===this.sequence2[r-1]?this.grid[n-1][r-1]+this.match_score:this.grid[n-1][r-1]+this.mismatch_penalty,this.grid[n-1][r]+this.gap_penalty,this.grid[n][r-1]+this.gap_penalty],o=this.arrayAllMaxIndexes(i);this.grid[n][r]=i[o[0]],this.tracebackGrid[n][r]=[o.includes(0),o.includes(1),o.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var t=e[0],n=this.tracebackGrid[t.pos[0]][t.pos[1]];n[0]&&e.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),n[1]&&e.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),n[2]&&e.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),0===t.pos[0]&&0===t.pos[1]&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),e.shift()}return this.alignments}},{key:"getAllIndexes",value:function(e,t){for(var n=[],r=-1;-1!==(r=e.indexOf(t,r+1));)n.push(r);return n}},{key:"arrayAllMaxIndexes",value:function(e){return this.getAllIndexes(e,Math.max.apply(null,e))}}]),e}();e.exports=i},function(e,t,n){var r=function(){};r.FDLayout=n(18),r.FDLayoutConstants=n(4),r.FDLayoutEdge=n(19),r.FDLayoutNode=n(20),r.DimensionD=n(21),r.HashMap=n(22),r.HashSet=n(23),r.IGeometry=n(8),r.IMath=n(9),r.Integer=n(10),r.Point=n(12),r.PointD=n(5),r.RandomSeed=n(16),r.RectangleD=n(13),r.Transform=n(17),r.UniqueIDGeneretor=n(14),r.Quicksort=n(25),r.LinkedList=n(11),r.LGraphObject=n(2),r.LGraph=n(6),r.LEdge=n(1),r.LGraphManager=n(7),r.LNode=n(3),r.Layout=n(15),r.LayoutConstants=n(0),r.NeedlemanWunsch=n(27),r.Matrix=n(24),r.SVD=n(26),e.exports=r},function(e,t,n){function r(){this.listeners=[]}var i=r.prototype;i.addListener=function(e,t){this.listeners.push({event:e,callback:t})},i.removeListener=function(e,t){for(var n=this.listeners.length;n>=0;n--){var r=this.listeners[n];r.event===e&&r.callback===t&&this.listeners.splice(n,1)}},i.emit=function(e,t){for(var n=0;n<this.listeners.length;n++){var r=this.listeners[n];e===r.event&&r.callback(t)}},e.exports=r}])})),_7.exports;var e}var A7;function S7(){return A7||(A7=1,e=T7,function(t,n){e.exports=n(k7())}(0,function(e){return t={45:(e,t,n)=>{var r={};r.layoutBase=n(551),r.CoSEConstants=n(806),r.CoSEEdge=n(767),r.CoSEGraph=n(880),r.CoSEGraphManager=n(578),r.CoSELayout=n(765),r.CoSENode=n(991),r.ConstraintHandler=n(902),e.exports=r},806:(e,t,n)=>{var r=n(551).FDLayoutConstants;function i(){}for(var o in r)i[o]=r[o];i.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,i.DEFAULT_RADIAL_SEPARATION=r.DEFAULT_EDGE_LENGTH,i.DEFAULT_COMPONENT_SEPERATION=60,i.TILE=!0,i.TILING_PADDING_VERTICAL=10,i.TILING_PADDING_HORIZONTAL=10,i.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,i.ENFORCE_CONSTRAINTS=!0,i.APPLY_LAYOUT=!0,i.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,i.TREE_REDUCTION_ON_INCREMENTAL=!0,i.PURE_INCREMENTAL=i.DEFAULT_INCREMENTAL,e.exports=i},767:(e,t,n)=>{var r=n(551).FDLayoutEdge;function i(e,t,n){r.call(this,e,t,n)}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];e.exports=i},880:(e,t,n)=>{var r=n(551).LGraph;function i(e,t,n){r.call(this,e,t,n)}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];e.exports=i},578:(e,t,n)=>{var r=n(551).LGraphManager;function i(e){r.call(this,e)}for(var o in i.prototype=Object.create(r.prototype),r)i[o]=r[o];e.exports=i},765:(e,t,n)=>{var r=n(551).FDLayout,i=n(578),o=n(880),a=n(991),s=n(767),l=n(806),u=n(902),c=n(551).FDLayoutConstants,h=n(551).LayoutConstants,d=n(551).Point,f=n(551).PointD,p=n(551).DimensionD,g=n(551).Layout,m=n(551).Integer,v=n(551).IGeometry,y=n(551).LGraph,b=n(551).Transform,x=n(551).LinkedList;function w(){r.call(this),this.toBeTiled={},this.constraints={}}for(var E in w.prototype=Object.create(r.prototype),r)w[E]=r[E];w.prototype.newGraphManager=function(){var e=new i(this);return this.graphManager=e,e},w.prototype.newGraph=function(e){return new o(null,this.graphManager,e)},w.prototype.newNode=function(e){return new a(this.graphManager,e)},w.prototype.newEdge=function(e){return new s(null,null,e)},w.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.isSubLayout||(l.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=l.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=l.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=c.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=c.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},w.prototype.initSpringEmbedder=function(){r.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/c.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},w.prototype.layout=function(){return h.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},w.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental)l.TREE_REDUCTION_ON_INCREMENTAL&&(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),t=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter(function(e){return t.has(e)}),this.graphManager.setAllNodesToApplyGravitation(n));else{var e=this.getFlatForest();if(e.length>0)this.positionNodesRadially(e);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter(function(e){return t.has(e)});this.graphManager.setAllNodesToApplyGravitation(n),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(u.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),l.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},w.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%c.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter(function(t){return e.has(t)});this.graphManager.setAllNodesToApplyGravitation(t),this.graphManager.updateBounds(),this.updateGrid(),l.PURE_INCREMENTAL?this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),l.PURE_INCREMENTAL?this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var n=!this.isTreeGrowing&&!this.isGrowthFinished,r=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(n,r),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},w.prototype.getPositionsData=function(){for(var e=this.graphManager.getAllNodes(),t={},n=0;n<e.length;n++){var r=e[n].rect,i=e[n].id;t[i]={id:i,x:r.getCenterX(),y:r.getCenterY(),w:r.width,h:r.height}}return t},w.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var e=!1;if("during"===c.ANIMATE)this.emit("layoutstarted");else{for(;!e;)e=this.tick();this.graphManager.updateBounds()}},w.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].calculateDisplacement();for(Object.keys(this.constraints).length>0&&this.updateDisplacements(),t=0;t<e.length;t++)e[t].move()},w.prototype.initConstraintVariables=function(){var e=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var t=this.graphManager.getAllNodes(),n=0;n<t.length;n++){var r=t[n];this.idToNodeMap.set(r.id,r)}var i=function t(n){for(var r,i=n.getChild().getNodes(),o=0,a=0;a<i.length;a++)null==(r=i[a]).getChild()?e.fixedNodeSet.has(r.id)&&(o+=100):o+=t(r);return o};if(this.constraints.fixedNodeConstraint)for(this.constraints.fixedNodeConstraint.forEach(function(t){e.fixedNodeSet.add(t.nodeId)}),t=this.graphManager.getAllNodes(),n=0;n<t.length;n++)if(null!=(r=t[n]).getChild()){var o=i(r);o>0&&(r.fixedNodeWeight=o)}if(this.constraints.relativePlacementConstraint){var a=new Map,s=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(t){e.fixedNodesOnHorizontal.add(t),e.fixedNodesOnVertical.add(t)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical){var u=this.constraints.alignmentConstraint.vertical;for(n=0;n<u.length;n++)this.dummyToNodeForVerticalAlignment.set("dummy"+n,[]),u[n].forEach(function(t){a.set(t,"dummy"+n),e.dummyToNodeForVerticalAlignment.get("dummy"+n).push(t),e.fixedNodeSet.has(t)&&e.fixedNodesOnHorizontal.add("dummy"+n)})}if(this.constraints.alignmentConstraint.horizontal){var c=this.constraints.alignmentConstraint.horizontal;for(n=0;n<c.length;n++)this.dummyToNodeForHorizontalAlignment.set("dummy"+n,[]),c[n].forEach(function(t){s.set(t,"dummy"+n),e.dummyToNodeForHorizontalAlignment.get("dummy"+n).push(t),e.fixedNodeSet.has(t)&&e.fixedNodesOnVertical.add("dummy"+n)})}}if(l.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(e){var t,n,r;for(r=e.length-1;r>=2*e.length/3;r--)t=Math.floor(Math.random()*(r+1)),n=e[r],e[r]=e[t],e[t]=n;return e},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(t){if(t.left){var n=a.has(t.left)?a.get(t.left):t.left,r=a.has(t.right)?a.get(t.right):t.right;e.nodesInRelativeHorizontal.includes(n)||(e.nodesInRelativeHorizontal.push(n),e.nodeToRelativeConstraintMapHorizontal.set(n,[]),e.dummyToNodeForVerticalAlignment.has(n)?e.nodeToTempPositionMapHorizontal.set(n,e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(n)[0]).getCenterX()):e.nodeToTempPositionMapHorizontal.set(n,e.idToNodeMap.get(n).getCenterX())),e.nodesInRelativeHorizontal.includes(r)||(e.nodesInRelativeHorizontal.push(r),e.nodeToRelativeConstraintMapHorizontal.set(r,[]),e.dummyToNodeForVerticalAlignment.has(r)?e.nodeToTempPositionMapHorizontal.set(r,e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(r)[0]).getCenterX()):e.nodeToTempPositionMapHorizontal.set(r,e.idToNodeMap.get(r).getCenterX())),e.nodeToRelativeConstraintMapHorizontal.get(n).push({right:r,gap:t.gap}),e.nodeToRelativeConstraintMapHorizontal.get(r).push({left:n,gap:t.gap})}else{var i=s.has(t.top)?s.get(t.top):t.top,o=s.has(t.bottom)?s.get(t.bottom):t.bottom;e.nodesInRelativeVertical.includes(i)||(e.nodesInRelativeVertical.push(i),e.nodeToRelativeConstraintMapVertical.set(i,[]),e.dummyToNodeForHorizontalAlignment.has(i)?e.nodeToTempPositionMapVertical.set(i,e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(i)[0]).getCenterY()):e.nodeToTempPositionMapVertical.set(i,e.idToNodeMap.get(i).getCenterY())),e.nodesInRelativeVertical.includes(o)||(e.nodesInRelativeVertical.push(o),e.nodeToRelativeConstraintMapVertical.set(o,[]),e.dummyToNodeForHorizontalAlignment.has(o)?e.nodeToTempPositionMapVertical.set(o,e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(o)[0]).getCenterY()):e.nodeToTempPositionMapVertical.set(o,e.idToNodeMap.get(o).getCenterY())),e.nodeToRelativeConstraintMapVertical.get(i).push({bottom:o,gap:t.gap}),e.nodeToRelativeConstraintMapVertical.get(o).push({top:i,gap:t.gap})}});else{var h=new Map,d=new Map;this.constraints.relativePlacementConstraint.forEach(function(e){if(e.left){var t=a.has(e.left)?a.get(e.left):e.left,n=a.has(e.right)?a.get(e.right):e.right;h.has(t)?h.get(t).push(n):h.set(t,[n]),h.has(n)?h.get(n).push(t):h.set(n,[t])}else{var r=s.has(e.top)?s.get(e.top):e.top,i=s.has(e.bottom)?s.get(e.bottom):e.bottom;d.has(r)?d.get(r).push(i):d.set(r,[i]),d.has(i)?d.get(i).push(r):d.set(i,[r])}});var f=function(e,t){var n=[],r=[],i=new x,o=new Set,a=0;return e.forEach(function(s,l){if(!o.has(l)){n[a]=[],r[a]=!1;var u=l;for(i.push(u),o.add(u),n[a].push(u);0!=i.length;)u=i.shift(),t.has(u)&&(r[a]=!0),e.get(u).forEach(function(e){o.has(e)||(i.push(e),o.add(e),n[a].push(e))});a++}}),{components:n,isFixed:r}},p=f(h,e.fixedNodesOnHorizontal);this.componentsOnHorizontal=p.components,this.fixedComponentsOnHorizontal=p.isFixed;var g=f(d,e.fixedNodesOnVertical);this.componentsOnVertical=g.components,this.fixedComponentsOnVertical=g.isFixed}}},w.prototype.updateDisplacements=function(){var e=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(t){var n=e.idToNodeMap.get(t.nodeId);n.displacementX=0,n.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var t=this.constraints.alignmentConstraint.vertical,n=0;n<t.length;n++){for(var r=0,i=0;i<t[n].length;i++){if(this.fixedNodeSet.has(t[n][i])){r=0;break}r+=this.idToNodeMap.get(t[n][i]).displacementX}var o=r/t[n].length;for(i=0;i<t[n].length;i++)this.idToNodeMap.get(t[n][i]).displacementX=o}if(this.constraints.alignmentConstraint.horizontal){var a=this.constraints.alignmentConstraint.horizontal;for(n=0;n<a.length;n++){var s=0;for(i=0;i<a[n].length;i++){if(this.fixedNodeSet.has(a[n][i])){s=0;break}s+=this.idToNodeMap.get(a[n][i]).displacementY}var u=s/a[n].length;for(i=0;i<a[n].length;i++)this.idToNodeMap.get(a[n][i]).displacementY=u}}}if(this.constraints.relativePlacementConstraint)if(l.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(t){if(!e.fixedNodesOnHorizontal.has(t)){var n=0;n=e.dummyToNodeForVerticalAlignment.has(t)?e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(t)[0]).displacementX:e.idToNodeMap.get(t).displacementX,e.nodeToRelativeConstraintMapHorizontal.get(t).forEach(function(r){var i;r.right?(i=e.nodeToTempPositionMapHorizontal.get(r.right)-e.nodeToTempPositionMapHorizontal.get(t)-n)<r.gap&&(n-=r.gap-i):(i=e.nodeToTempPositionMapHorizontal.get(t)-e.nodeToTempPositionMapHorizontal.get(r.left)+n)<r.gap&&(n+=r.gap-i)}),e.nodeToTempPositionMapHorizontal.set(t,e.nodeToTempPositionMapHorizontal.get(t)+n),e.dummyToNodeForVerticalAlignment.has(t)?e.dummyToNodeForVerticalAlignment.get(t).forEach(function(t){e.idToNodeMap.get(t).displacementX=n}):e.idToNodeMap.get(t).displacementX=n}}),this.nodesInRelativeVertical.forEach(function(t){if(!e.fixedNodesOnHorizontal.has(t)){var n=0;n=e.dummyToNodeForHorizontalAlignment.has(t)?e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(t)[0]).displacementY:e.idToNodeMap.get(t).displacementY,e.nodeToRelativeConstraintMapVertical.get(t).forEach(function(r){var i;r.bottom?(i=e.nodeToTempPositionMapVertical.get(r.bottom)-e.nodeToTempPositionMapVertical.get(t)-n)<r.gap&&(n-=r.gap-i):(i=e.nodeToTempPositionMapVertical.get(t)-e.nodeToTempPositionMapVertical.get(r.top)+n)<r.gap&&(n+=r.gap-i)}),e.nodeToTempPositionMapVertical.set(t,e.nodeToTempPositionMapVertical.get(t)+n),e.dummyToNodeForHorizontalAlignment.has(t)?e.dummyToNodeForHorizontalAlignment.get(t).forEach(function(t){e.idToNodeMap.get(t).displacementY=n}):e.idToNodeMap.get(t).displacementY=n}});else{for(n=0;n<this.componentsOnHorizontal.length;n++){var c=this.componentsOnHorizontal[n];if(this.fixedComponentsOnHorizontal[n])for(i=0;i<c.length;i++)this.dummyToNodeForVerticalAlignment.has(c[i])?this.dummyToNodeForVerticalAlignment.get(c[i]).forEach(function(t){e.idToNodeMap.get(t).displacementX=0}):this.idToNodeMap.get(c[i]).displacementX=0;else{var h=0,d=0;for(i=0;i<c.length;i++)this.dummyToNodeForVerticalAlignment.has(c[i])?(h+=(p=this.dummyToNodeForVerticalAlignment.get(c[i])).length*this.idToNodeMap.get(p[0]).displacementX,d+=p.length):(h+=this.idToNodeMap.get(c[i]).displacementX,d++);var f=h/d;for(i=0;i<c.length;i++)this.dummyToNodeForVerticalAlignment.has(c[i])?this.dummyToNodeForVerticalAlignment.get(c[i]).forEach(function(t){e.idToNodeMap.get(t).displacementX=f}):this.idToNodeMap.get(c[i]).displacementX=f}}for(n=0;n<this.componentsOnVertical.length;n++)if(c=this.componentsOnVertical[n],this.fixedComponentsOnVertical[n])for(i=0;i<c.length;i++)this.dummyToNodeForHorizontalAlignment.has(c[i])?this.dummyToNodeForHorizontalAlignment.get(c[i]).forEach(function(t){e.idToNodeMap.get(t).displacementY=0}):this.idToNodeMap.get(c[i]).displacementY=0;else{for(h=0,d=0,i=0;i<c.length;i++){var p;this.dummyToNodeForHorizontalAlignment.has(c[i])?(h+=(p=this.dummyToNodeForHorizontalAlignment.get(c[i])).length*this.idToNodeMap.get(p[0]).displacementY,d+=p.length):(h+=this.idToNodeMap.get(c[i]).displacementY,d++)}for(f=h/d,i=0;i<c.length;i++)this.dummyToNodeForHorizontalAlignment.has(c[i])?this.dummyToNodeForHorizontalAlignment.get(c[i]).forEach(function(t){e.idToNodeMap.get(t).displacementY=f}):this.idToNodeMap.get(c[i]).displacementY=f}}},w.prototype.calculateNodesToApplyGravitationTo=function(){var e,t,n=[],r=this.graphManager.getGraphs(),i=r.length;for(t=0;t<i;t++)(e=r[t]).updateConnected(),e.isConnected||(n=n.concat(e.getNodes()));return n},w.prototype.createBendpoints=function(){var e=[];e=e.concat(this.graphManager.getAllEdges());var t,n=new Set;for(t=0;t<e.length;t++){var r=e[t];if(!n.has(r)){var i=r.getSource(),o=r.getTarget();if(i==o)r.getBendpoints().push(new f),r.getBendpoints().push(new f),this.createDummyNodesForBendpoints(r),n.add(r);else{var a=[];if(a=(a=a.concat(i.getEdgeListToNode(o))).concat(o.getEdgeListToNode(i)),!n.has(a[0])){var s;if(a.length>1)for(s=0;s<a.length;s++){var l=a[s];l.getBendpoints().push(new f),this.createDummyNodesForBendpoints(l)}a.forEach(function(e){n.add(e)})}}}if(n.size==e.length)break}},w.prototype.positionNodesRadially=function(e){for(var t=new d(0,0),n=Math.ceil(Math.sqrt(e.length)),r=0,i=0,o=0,a=new f(0,0),s=0;s<e.length;s++){s%n==0&&(o=0,i=r,0!=s&&(i+=l.DEFAULT_COMPONENT_SEPERATION),r=0);var u=e[s],c=g.findCenterOfTree(u);t.x=o,t.y=i,(a=w.radialLayout(u,c,t)).y>r&&(r=Math.floor(a.y)),o=Math.floor(a.x+l.DEFAULT_COMPONENT_SEPERATION)}this.transform(new f(h.WORLD_CENTER_X-a.x/2,h.WORLD_CENTER_Y-a.y/2))},w.radialLayout=function(e,t,n){var r=Math.max(this.maxDiagonalInTree(e),l.DEFAULT_RADIAL_SEPARATION);w.branchRadialLayout(t,null,0,359,0,r);var i=y.calculateBounds(e),o=new b;o.setDeviceOrgX(i.getMinX()),o.setDeviceOrgY(i.getMinY()),o.setWorldOrgX(n.x),o.setWorldOrgY(n.y);for(var a=0;a<e.length;a++)e[a].transform(o);var s=new f(i.getMaxX(),i.getMaxY());return o.inverseTransformPoint(s)},w.branchRadialLayout=function(e,t,n,r,i,o){var a=(r-n+1)/2;a<0&&(a+=180);var s=(a+n)%360*v.TWO_PI/360,l=i*Math.cos(s),u=i*Math.sin(s);e.setCenter(l,u);var c=[],h=(c=c.concat(e.getEdges())).length;null!=t&&h--;for(var d,f=0,p=c.length,g=e.getEdgesBetween(t);g.length>1;){var m=g[0];g.splice(0,1);var y=c.indexOf(m);y>=0&&c.splice(y,1),p--,h--}d=null!=t?(c.indexOf(g[0])+1)%p:0;for(var b=Math.abs(r-n)/h,x=d;f!=h;x=++x%p){var E=c[x].getOtherEnd(e);if(E!=t){var T=(n+f*b)%360,_=(T+b)%360;w.branchRadialLayout(E,e,T,_,i+o,o),f++}}},w.maxDiagonalInTree=function(e){for(var t=m.MIN_VALUE,n=0;n<e.length;n++){var r=e[n].getDiagonal();r>t&&(t=r)}return t},w.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},w.prototype.groupZeroDegreeMembers=function(){var e=this,t={};this.memberGroups={},this.idToDummyNode={};for(var n=[],r=this.graphManager.getAllNodes(),i=0;i<r.length;i++){var o=(s=r[i]).getParent();0!==this.getNodeDegreeWithChildren(s)||null!=o.id&&this.getToBeTiled(o)||n.push(s)}for(i=0;i<n.length;i++){var s,l=(s=n[i]).getParent().id;void 0===t[l]&&(t[l]=[]),t[l]=t[l].concat(s)}Object.keys(t).forEach(function(n){if(t[n].length>1){var r="DummyCompound_"+n;e.memberGroups[r]=t[n];var i=t[n][0].getParent(),o=new a(e.graphManager);o.id=r,o.paddingLeft=i.paddingLeft||0,o.paddingRight=i.paddingRight||0,o.paddingBottom=i.paddingBottom||0,o.paddingTop=i.paddingTop||0,e.idToDummyNode[r]=o;var s=e.getGraphManager().add(e.newGraph(),o),l=i.getChild();l.add(o);for(var u=0;u<t[n].length;u++){var c=t[n][u];l.remove(c),s.add(c)}}})},w.prototype.clearCompounds=function(){var e={},t={};this.performDFSOnCompounds();for(var n=0;n<this.compoundOrder.length;n++)t[this.compoundOrder[n].id]=this.compoundOrder[n],e[this.compoundOrder[n].id]=[].concat(this.compoundOrder[n].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[n].getChild()),this.compoundOrder[n].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(e,t)},w.prototype.clearZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(n){var r=e.idToDummyNode[n];if(t[n]=e.tileNodes(e.memberGroups[n],r.paddingLeft+r.paddingRight),r.rect.width=t[n].width,r.rect.height=t[n].height,r.setCenter(t[n].centerX,t[n].centerY),r.labelMarginLeft=0,r.labelMarginTop=0,l.NODE_DIMENSIONS_INCLUDE_LABELS){var i=r.rect.width,o=r.rect.height;r.labelWidth&&("left"==r.labelPosHorizontal?(r.rect.x-=r.labelWidth,r.setWidth(i+r.labelWidth),r.labelMarginLeft=r.labelWidth):"center"==r.labelPosHorizontal&&r.labelWidth>i?(r.rect.x-=(r.labelWidth-i)/2,r.setWidth(r.labelWidth),r.labelMarginLeft=(r.labelWidth-i)/2):"right"==r.labelPosHorizontal&&r.setWidth(i+r.labelWidth)),r.labelHeight&&("top"==r.labelPosVertical?(r.rect.y-=r.labelHeight,r.setHeight(o+r.labelHeight),r.labelMarginTop=r.labelHeight):"center"==r.labelPosVertical&&r.labelHeight>o?(r.rect.y-=(r.labelHeight-o)/2,r.setHeight(r.labelHeight),r.labelMarginTop=(r.labelHeight-o)/2):"bottom"==r.labelPosVertical&&r.setHeight(o+r.labelHeight))}})},w.prototype.repopulateCompounds=function(){for(var e=this.compoundOrder.length-1;e>=0;e--){var t=this.compoundOrder[e],n=t.id,r=t.paddingLeft,i=t.paddingTop,o=t.labelMarginLeft,a=t.labelMarginTop;this.adjustLocations(this.tiledMemberPack[n],t.rect.x,t.rect.y,r,i,o,a)}},w.prototype.repopulateZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack;Object.keys(t).forEach(function(n){var r=e.idToDummyNode[n],i=r.paddingLeft,o=r.paddingTop,a=r.labelMarginLeft,s=r.labelMarginTop;e.adjustLocations(t[n],r.rect.x,r.rect.y,i,o,a,s)})},w.prototype.getToBeTiled=function(e){var t=e.id;if(null!=this.toBeTiled[t])return this.toBeTiled[t];var n=e.getChild();if(null==n)return this.toBeTiled[t]=!1,!1;for(var r=n.getNodes(),i=0;i<r.length;i++){var o=r[i];if(this.getNodeDegree(o)>0)return this.toBeTiled[t]=!1,!1;if(null!=o.getChild()){if(!this.getToBeTiled(o))return this.toBeTiled[t]=!1,!1}else this.toBeTiled[o.id]=!1}return this.toBeTiled[t]=!0,!0},w.prototype.getNodeDegree=function(e){e.id;for(var t=e.getEdges(),n=0,r=0;r<t.length;r++){var i=t[r];i.getSource().id!==i.getTarget().id&&(n+=1)}return n},w.prototype.getNodeDegreeWithChildren=function(e){var t=this.getNodeDegree(e);if(null==e.getChild())return t;for(var n=e.getChild().getNodes(),r=0;r<n.length;r++){var i=n[r];t+=this.getNodeDegreeWithChildren(i)}return t},w.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},w.prototype.fillCompexOrderByDFS=function(e){for(var t=0;t<e.length;t++){var n=e[t];null!=n.getChild()&&this.fillCompexOrderByDFS(n.getChild().getNodes()),this.getToBeTiled(n)&&this.compoundOrder.push(n)}},w.prototype.adjustLocations=function(e,t,n,r,i,o,a){n+=i+a;for(var s=t+=r+o,l=0;l<e.rows.length;l++){var u=e.rows[l];t=s;for(var c=0,h=0;h<u.length;h++){var d=u[h];d.rect.x=t,d.rect.y=n,t+=d.rect.width+e.horizontalPadding,d.rect.height>c&&(c=d.rect.height)}n+=c+e.verticalPadding}},w.prototype.tileCompoundMembers=function(e,t){var n=this;this.tiledMemberPack=[],Object.keys(e).forEach(function(r){var i=t[r];if(n.tiledMemberPack[r]=n.tileNodes(e[r],i.paddingLeft+i.paddingRight),i.rect.width=n.tiledMemberPack[r].width,i.rect.height=n.tiledMemberPack[r].height,i.setCenter(n.tiledMemberPack[r].centerX,n.tiledMemberPack[r].centerY),i.labelMarginLeft=0,i.labelMarginTop=0,l.NODE_DIMENSIONS_INCLUDE_LABELS){var o=i.rect.width,a=i.rect.height;i.labelWidth&&("left"==i.labelPosHorizontal?(i.rect.x-=i.labelWidth,i.setWidth(o+i.labelWidth),i.labelMarginLeft=i.labelWidth):"center"==i.labelPosHorizontal&&i.labelWidth>o?(i.rect.x-=(i.labelWidth-o)/2,i.setWidth(i.labelWidth),i.labelMarginLeft=(i.labelWidth-o)/2):"right"==i.labelPosHorizontal&&i.setWidth(o+i.labelWidth)),i.labelHeight&&("top"==i.labelPosVertical?(i.rect.y-=i.labelHeight,i.setHeight(a+i.labelHeight),i.labelMarginTop=i.labelHeight):"center"==i.labelPosVertical&&i.labelHeight>a?(i.rect.y-=(i.labelHeight-a)/2,i.setHeight(i.labelHeight),i.labelMarginTop=(i.labelHeight-a)/2):"bottom"==i.labelPosVertical&&i.setHeight(a+i.labelHeight))}})},w.prototype.tileNodes=function(e,t){var n=this.tileNodesByFavoringDim(e,t,!0),r=this.tileNodesByFavoringDim(e,t,!1),i=this.getOrgRatio(n);return this.getOrgRatio(r)<i?r:n},w.prototype.getOrgRatio=function(e){var t=e.width/e.height;return t<1&&(t=1/t),t},w.prototype.calcIdealRowWidth=function(e,t){var n=l.TILING_PADDING_VERTICAL,r=l.TILING_PADDING_HORIZONTAL,i=e.length,o=0,a=0,s=0;e.forEach(function(e){o+=e.getWidth(),a+=e.getHeight(),e.getWidth()>s&&(s=e.getWidth())});var u,c=o/i,h=a/i,d=Math.pow(n-r,2)+4*(c+r)*(h+n)*i,f=(r-n+Math.sqrt(d))/(2*(c+r));t?(u=Math.ceil(f))==f&&u++:u=Math.floor(f);var p=u*(c+r)-r;return s>p&&(p=s),p+=2*r},w.prototype.tileNodesByFavoringDim=function(e,t,n){var r=l.TILING_PADDING_VERTICAL,i=l.TILING_PADDING_HORIZONTAL,o=l.TILING_COMPARE_BY,a={rows:[],rowWidth:[],rowHeight:[],width:0,height:t,verticalPadding:r,horizontalPadding:i,centerX:0,centerY:0};o&&(a.idealRowWidth=this.calcIdealRowWidth(e,n));var s=function(e){return e.rect.width*e.rect.height},u=function(e,t){return s(t)-s(e)};e.sort(function(e,t){var n=u;return a.idealRowWidth?(n=o)(e.id,t.id):n(e,t)});for(var c=0,h=0,d=0;d<e.length;d++)c+=(f=e[d]).getCenterX(),h+=f.getCenterY();for(a.centerX=c/e.length,a.centerY=h/e.length,d=0;d<e.length;d++){var f=e[d];if(0==a.rows.length)this.insertNodeToRow(a,f,0,t);else if(this.canAddHorizontal(a,f.rect.width,f.rect.height)){var p=a.rows.length-1;a.idealRowWidth||(p=this.getShortestRowIndex(a)),this.insertNodeToRow(a,f,p,t)}else this.insertNodeToRow(a,f,a.rows.length,t);this.shiftToLastRow(a)}return a},w.prototype.insertNodeToRow=function(e,t,n,r){var i=r;n==e.rows.length&&(e.rows.push([]),e.rowWidth.push(i),e.rowHeight.push(0));var o=e.rowWidth[n]+t.rect.width;e.rows[n].length>0&&(o+=e.horizontalPadding),e.rowWidth[n]=o,e.width<o&&(e.width=o);var a=t.rect.height;n>0&&(a+=e.verticalPadding);var s=0;a>e.rowHeight[n]&&(s=e.rowHeight[n],e.rowHeight[n]=a,s=e.rowHeight[n]-s),e.height+=s,e.rows[n].push(t)},w.prototype.getShortestRowIndex=function(e){for(var t=-1,n=Number.MAX_VALUE,r=0;r<e.rows.length;r++)e.rowWidth[r]<n&&(t=r,n=e.rowWidth[r]);return t},w.prototype.getLongestRowIndex=function(e){for(var t=-1,n=Number.MIN_VALUE,r=0;r<e.rows.length;r++)e.rowWidth[r]>n&&(t=r,n=e.rowWidth[r]);return t},w.prototype.canAddHorizontal=function(e,t,n){if(e.idealRowWidth){var r=e.rows.length-1;return e.rowWidth[r]+t+e.horizontalPadding<=e.idealRowWidth}var i=this.getShortestRowIndex(e);if(i<0)return!0;var o=e.rowWidth[i];if(o+e.horizontalPadding+t<=e.width)return!0;var a,s,l=0;return e.rowHeight[i]<n&&i>0&&(l=n+e.verticalPadding-e.rowHeight[i]),a=e.width-o>=t+e.horizontalPadding?(e.height+l)/(o+t+e.horizontalPadding):(e.height+l)/e.width,l=n+e.verticalPadding,(s=e.width<t?(e.height+l)/t:(e.height+l)/e.width)<1&&(s=1/s),a<1&&(a=1/a),a<s},w.prototype.shiftToLastRow=function(e){var t=this.getLongestRowIndex(e),n=e.rowWidth.length-1,r=e.rows[t],i=r[r.length-1],o=i.width+e.horizontalPadding;if(e.width-e.rowWidth[n]>o&&t!=n){r.splice(-1,1),e.rows[n].push(i),e.rowWidth[t]=e.rowWidth[t]-o,e.rowWidth[n]=e.rowWidth[n]+o,e.width=e.rowWidth[instance.getLongestRowIndex(e)];for(var a=Number.MIN_VALUE,s=0;s<r.length;s++)r[s].height>a&&(a=r[s].height);t>0&&(a+=e.verticalPadding);var l=e.rowHeight[t]+e.rowHeight[n];e.rowHeight[t]=a,e.rowHeight[n]<i.height+e.verticalPadding&&(e.rowHeight[n]=i.height+e.verticalPadding);var u=e.rowHeight[t]+e.rowHeight[n];e.height+=u-l,this.shiftToLastRow(e)}},w.prototype.tilingPreLayout=function(){l.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},w.prototype.tilingPostLayout=function(){l.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},w.prototype.reduceTrees=function(){for(var e,t=[],n=!0;n;){var r=this.graphManager.getAllNodes(),i=[];n=!1;for(var o=0;o<r.length;o++)if(1==(e=r[o]).getEdges().length&&!e.getEdges()[0].isInterGraph&&null==e.getChild()){if(l.PURE_INCREMENTAL){var a=e.getEdges()[0].getOtherEnd(e),s=new p(e.getCenterX()-a.getCenterX(),e.getCenterY()-a.getCenterY());i.push([e,e.getEdges()[0],e.getOwner(),s])}else i.push([e,e.getEdges()[0],e.getOwner()]);n=!0}if(1==n){for(var u=[],c=0;c<i.length;c++)1==i[c][0].getEdges().length&&(u.push(i[c]),i[c][0].getOwner().remove(i[c][0]));t.push(u),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=t},w.prototype.growTree=function(e){for(var t,n=e[e.length-1],r=0;r<n.length;r++)t=n[r],this.findPlaceforPrunedNode(t),t[2].add(t[0]),t[2].add(t[1],t[1].source,t[1].target);e.splice(e.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},w.prototype.findPlaceforPrunedNode=function(e){var t,n,r=e[0];if(n=r==e[1].source?e[1].target:e[1].source,l.PURE_INCREMENTAL)r.setCenter(n.getCenterX()+e[3].getWidth(),n.getCenterY()+e[3].getHeight());else{var i=n.startX,o=n.finishX,a=n.startY,s=n.finishY,u=[0,0,0,0];if(a>0)for(var h=i;h<=o;h++)u[0]+=this.grid[h][a-1].length+this.grid[h][a].length-1;if(o<this.grid.length-1)for(h=a;h<=s;h++)u[1]+=this.grid[o+1][h].length+this.grid[o][h].length-1;if(s<this.grid[0].length-1)for(h=i;h<=o;h++)u[2]+=this.grid[h][s+1].length+this.grid[h][s].length-1;if(i>0)for(h=a;h<=s;h++)u[3]+=this.grid[i-1][h].length+this.grid[i][h].length-1;for(var d,f,p=m.MAX_VALUE,g=0;g<u.length;g++)u[g]<p?(p=u[g],d=1,f=g):u[g]==p&&d++;if(3==d&&0==p)0==u[0]&&0==u[1]&&0==u[2]?t=1:0==u[0]&&0==u[1]&&0==u[3]?t=0:0==u[0]&&0==u[2]&&0==u[3]?t=3:0==u[1]&&0==u[2]&&0==u[3]&&(t=2);else if(2==d&&0==p){var v=Math.floor(2*Math.random());t=0==u[0]&&0==u[1]?0==v?0:1:0==u[0]&&0==u[2]?0==v?0:2:0==u[0]&&0==u[3]?0==v?0:3:0==u[1]&&0==u[2]?0==v?1:2:0==u[1]&&0==u[3]?0==v?1:3:0==v?2:3}else t=4==d&&0==p?v=Math.floor(4*Math.random()):f;0==t?r.setCenter(n.getCenterX(),n.getCenterY()-n.getHeight()/2-c.DEFAULT_EDGE_LENGTH-r.getHeight()/2):1==t?r.setCenter(n.getCenterX()+n.getWidth()/2+c.DEFAULT_EDGE_LENGTH+r.getWidth()/2,n.getCenterY()):2==t?r.setCenter(n.getCenterX(),n.getCenterY()+n.getHeight()/2+c.DEFAULT_EDGE_LENGTH+r.getHeight()/2):r.setCenter(n.getCenterX()-n.getWidth()/2-c.DEFAULT_EDGE_LENGTH-r.getWidth()/2,n.getCenterY())}},e.exports=w},991:(e,t,n)=>{var r=n(551).FDLayoutNode,i=n(551).IMath;function o(e,t,n,i){r.call(this,e,t,n,i)}for(var a in o.prototype=Object.create(r.prototype),r)o[a]=r[a];o.prototype.calculateDisplacement=function(){var e=this.graphManager.getLayout();null!=this.getChild()&&this.fixedNodeWeight?(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},o.prototype.propogateDisplacementToChildren=function(e,t){for(var n,r=this.getChild().getNodes(),i=0;i<r.length;i++)null==(n=r[i]).getChild()?(n.displacementX+=e,n.displacementY+=t):n.propogateDisplacementToChildren(e,t)},o.prototype.move=function(){var e=this.graphManager.getLayout();null!=this.child&&0!=this.child.getNodes().length||(this.moveBy(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},o.prototype.setPred1=function(e){this.pred1=e},o.prototype.getPred1=function(){return pred1},o.prototype.getPred2=function(){return pred2},o.prototype.setNext=function(e){this.next=e},o.prototype.getNext=function(){return next},o.prototype.setProcessed=function(e){this.processed=e},o.prototype.isProcessed=function(){return processed},e.exports=o},902:(e,t,n)=>{function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=n(806),o=n(551).LinkedList,a=n(551).Matrix,s=n(551).SVD;function l(){}l.handleConstraints=function(e){var t={};t.fixedNodeConstraint=e.constraints.fixedNodeConstraint,t.alignmentConstraint=e.constraints.alignmentConstraint,t.relativePlacementConstraint=e.constraints.relativePlacementConstraint;for(var n=new Map,l=new Map,u=[],c=[],h=e.getAllNodes(),d=0,f=0;f<h.length;f++){var p=h[f];null==p.getChild()&&(l.set(p.id,d++),u.push(p.getCenterX()),c.push(p.getCenterY()),n.set(p.id,p))}t.relativePlacementConstraint&&t.relativePlacementConstraint.forEach(function(e){e.gap||0==e.gap||(e.left?e.gap=i.DEFAULT_EDGE_LENGTH+n.get(e.left).getWidth()/2+n.get(e.right).getWidth()/2:e.gap=i.DEFAULT_EDGE_LENGTH+n.get(e.top).getHeight()/2+n.get(e.bottom).getHeight()/2)});var g=function(e){var t=0,n=0;return e.forEach(function(e){t+=u[l.get(e)],n+=c[l.get(e)]}),{x:t/e.size,y:n/e.size}},m=function(e,t,n,i,a){var s=new Map;e.forEach(function(e,t){s.set(t,0)}),e.forEach(function(e,t){e.forEach(function(e){s.set(e.id,s.get(e.id)+1)})});var h=new Map,d=new Map,f=new o;s.forEach(function(e,r){0==e?(f.push(r),n||("horizontal"==t?h.set(r,l.has(r)?u[l.get(r)]:i.get(r)):h.set(r,l.has(r)?c[l.get(r)]:i.get(r)))):h.set(r,Number.NEGATIVE_INFINITY),n&&d.set(r,new Set([r]))}),n&&a.forEach(function(e){var r=[];if(e.forEach(function(e){n.has(e)&&r.push(e)}),r.length>0){var o=0;r.forEach(function(e){"horizontal"==t?(h.set(e,l.has(e)?u[l.get(e)]:i.get(e)),o+=h.get(e)):(h.set(e,l.has(e)?c[l.get(e)]:i.get(e)),o+=h.get(e))}),o/=r.length,e.forEach(function(e){n.has(e)||h.set(e,o)})}else{var a=0;e.forEach(function(e){a+="horizontal"==t?l.has(e)?u[l.get(e)]:i.get(e):l.has(e)?c[l.get(e)]:i.get(e)}),a/=e.length,e.forEach(function(e){h.set(e,a)})}});for(var p=function(){var r=f.shift();e.get(r).forEach(function(e){if(h.get(e.id)<h.get(r)+e.gap)if(n&&n.has(e.id)){var o=void 0;if(o="horizontal"==t?l.has(e.id)?u[l.get(e.id)]:i.get(e.id):l.has(e.id)?c[l.get(e.id)]:i.get(e.id),h.set(e.id,o),o<h.get(r)+e.gap){var a=h.get(r)+e.gap-o;d.get(r).forEach(function(e){h.set(e,h.get(e)-a)})}}else h.set(e.id,h.get(r)+e.gap);s.set(e.id,s.get(e.id)-1),0==s.get(e.id)&&f.push(e.id),n&&d.set(e.id,function(e,t){var n=new Set(e),r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n.add(l)}}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(d.get(r),d.get(e.id)))})};0!=f.length;)p();if(n){var g=new Set;e.forEach(function(e,t){0==e.length&&g.add(t)});var m=[];d.forEach(function(e,t){if(g.has(t)){var i=!1,o=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;n.has(c)&&(i=!0)}}catch(f){a=!0,s=f}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}if(!i){var h=!1,d=void 0;m.forEach(function(t,n){t.has([].concat(r(e))[0])&&(h=!0,d=n)}),h?e.forEach(function(e){m[d].add(e)}):m.push(new Set(e))}}}),m.forEach(function(e,n){var r=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,d=!0,f=!1,p=void 0;try{for(var g,m=e[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value,y=void 0;y="horizontal"==t?l.has(v)?u[l.get(v)]:i.get(v):l.has(v)?c[l.get(v)]:i.get(v);var b=h.get(v);y<r&&(r=y),y>a&&(a=y),b<o&&(o=b),b>s&&(s=b)}}catch(S){f=!0,p=S}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}var x=(r+a)/2-(o+s)/2,w=!0,E=!1,T=void 0;try{for(var _,k=e[Symbol.iterator]();!(w=(_=k.next()).done);w=!0){var A=_.value;h.set(A,h.get(A)+x)}}catch(S){E=!0,T=S}finally{try{!w&&k.return&&k.return()}finally{if(E)throw T}}})}return h},v=function(e){var t=0,n=0,r=0,i=0;if(e.forEach(function(e){e.left?u[l.get(e.left)]-u[l.get(e.right)]>=0?t++:n++:c[l.get(e.top)]-c[l.get(e.bottom)]>=0?r++:i++}),t>n&&r>i)for(var o=0;o<l.size;o++)u[o]=-1*u[o],c[o]=-1*c[o];else if(t>n)for(var a=0;a<l.size;a++)u[a]=-1*u[a];else if(r>i)for(var s=0;s<l.size;s++)c[s]=-1*c[s]},y=function(e){var t=[],n=new o,r=new Set,i=0;return e.forEach(function(o,a){if(!r.has(a)){t[i]=[];var s=a;for(n.push(s),r.add(s),t[i].push(s);0!=n.length;)s=n.shift(),e.get(s).forEach(function(e){r.has(e.id)||(n.push(e.id),r.add(e.id),t[i].push(e.id))});i++}}),t},b=function(e){var t=new Map;return e.forEach(function(e,n){t.set(n,[])}),e.forEach(function(e,n){e.forEach(function(e){t.get(n).push(e),t.get(e.id).push({id:n,gap:e.gap,direction:e.direction})})}),t},x=function(e){var t=new Map;return e.forEach(function(e,n){t.set(n,[])}),e.forEach(function(e,n){e.forEach(function(e){t.get(e.id).push({id:n,gap:e.gap,direction:e.direction})})}),t},w=[],E=[],T=!1,_=!1,k=new Set,A=new Map,S=new Map,N=[];if(t.fixedNodeConstraint&&t.fixedNodeConstraint.forEach(function(e){k.add(e.nodeId)}),t.relativePlacementConstraint&&(t.relativePlacementConstraint.forEach(function(e){e.left?(A.has(e.left)?A.get(e.left).push({id:e.right,gap:e.gap,direction:"horizontal"}):A.set(e.left,[{id:e.right,gap:e.gap,direction:"horizontal"}]),A.has(e.right)||A.set(e.right,[])):(A.has(e.top)?A.get(e.top).push({id:e.bottom,gap:e.gap,direction:"vertical"}):A.set(e.top,[{id:e.bottom,gap:e.gap,direction:"vertical"}]),A.has(e.bottom)||A.set(e.bottom,[]))}),S=b(A),N=y(S)),i.TRANSFORM_ON_CONSTRAINT_HANDLING){if(t.fixedNodeConstraint&&t.fixedNodeConstraint.length>1)t.fixedNodeConstraint.forEach(function(e,t){w[t]=[e.position.x,e.position.y],E[t]=[u[l.get(e.nodeId)],c[l.get(e.nodeId)]]}),T=!0;else if(t.alignmentConstraint)!function(){var e=0;if(t.alignmentConstraint.vertical){for(var n=t.alignmentConstraint.vertical,i=function(t){var i=new Set;n[t].forEach(function(e){i.add(e)});var o=new Set([].concat(r(i)).filter(function(e){return k.has(e)})),a=void 0;a=o.size>0?u[l.get(o.values().next().value)]:g(i).x,n[t].forEach(function(t){w[e]=[a,c[l.get(t)]],E[e]=[u[l.get(t)],c[l.get(t)]],e++})},o=0;o<n.length;o++)i(o);T=!0}if(t.alignmentConstraint.horizontal){for(var a=t.alignmentConstraint.horizontal,s=function(t){var n=new Set;a[t].forEach(function(e){n.add(e)});var i=new Set([].concat(r(n)).filter(function(e){return k.has(e)})),o=void 0;o=i.size>0?u[l.get(i.values().next().value)]:g(n).y,a[t].forEach(function(t){w[e]=[u[l.get(t)],o],E[e]=[u[l.get(t)],c[l.get(t)]],e++})},h=0;h<a.length;h++)s(h);T=!0}t.relativePlacementConstraint&&(_=!0)}();else if(t.relativePlacementConstraint){for(var M=0,C=0,I=0;I<N.length;I++)N[I].length>M&&(M=N[I].length,C=I);if(M<S.size/2)v(t.relativePlacementConstraint),T=!1,_=!1;else{var R=new Map,L=new Map,O=[];N[C].forEach(function(e){A.get(e).forEach(function(t){"horizontal"==t.direction?(R.has(e)?R.get(e).push(t):R.set(e,[t]),R.has(t.id)||R.set(t.id,[]),O.push({left:e,right:t.id})):(L.has(e)?L.get(e).push(t):L.set(e,[t]),L.has(t.id)||L.set(t.id,[]),O.push({top:e,bottom:t.id}))})}),v(O),_=!1;var D=m(R,"horizontal"),P=m(L,"vertical");N[C].forEach(function(e,t){E[t]=[u[l.get(e)],c[l.get(e)]],w[t]=[],D.has(e)?w[t][0]=D.get(e):w[t][0]=u[l.get(e)],P.has(e)?w[t][1]=P.get(e):w[t][1]=c[l.get(e)]}),T=!0}}if(T){for(var B,F=a.transpose(w),z=a.transpose(E),U=0;U<F.length;U++)F[U]=a.multGamma(F[U]),z[U]=a.multGamma(z[U]);var G=a.multMat(F,a.transpose(z)),V=s.svd(G);B=a.multMat(V.V,a.transpose(V.U));for(var j=0;j<l.size;j++){var H=[u[j],c[j]],$=[B[0][0],B[1][0]],Y=[B[0][1],B[1][1]];u[j]=a.dotProduct(H,$),c[j]=a.dotProduct(H,Y)}_&&v(t.relativePlacementConstraint)}}if(i.ENFORCE_CONSTRAINTS){if(t.fixedNodeConstraint&&t.fixedNodeConstraint.length>0){var q={x:0,y:0};t.fixedNodeConstraint.forEach(function(e,t){var n,r,i={x:u[l.get(e.nodeId)],y:c[l.get(e.nodeId)]},o=e.position,a=(r=i,{x:(n=o).x-r.x,y:n.y-r.y});q.x+=a.x,q.y+=a.y}),q.x/=t.fixedNodeConstraint.length,q.y/=t.fixedNodeConstraint.length,u.forEach(function(e,t){u[t]+=q.x}),c.forEach(function(e,t){c[t]+=q.y}),t.fixedNodeConstraint.forEach(function(e){u[l.get(e.nodeId)]=e.position.x,c[l.get(e.nodeId)]=e.position.y})}if(t.alignmentConstraint){if(t.alignmentConstraint.vertical)for(var W=t.alignmentConstraint.vertical,X=function(e){var t=new Set;W[e].forEach(function(e){t.add(e)});var n=new Set([].concat(r(t)).filter(function(e){return k.has(e)})),i=void 0;i=n.size>0?u[l.get(n.values().next().value)]:g(t).x,t.forEach(function(e){k.has(e)||(u[l.get(e)]=i)})},K=0;K<W.length;K++)X(K);if(t.alignmentConstraint.horizontal)for(var Z=t.alignmentConstraint.horizontal,Q=function(e){var t=new Set;Z[e].forEach(function(e){t.add(e)});var n=new Set([].concat(r(t)).filter(function(e){return k.has(e)})),i=void 0;i=n.size>0?c[l.get(n.values().next().value)]:g(t).y,t.forEach(function(e){k.has(e)||(c[l.get(e)]=i)})},J=0;J<Z.length;J++)Q(J)}t.relativePlacementConstraint&&function(){var e=new Map,n=new Map,r=new Map,i=new Map,o=new Map,a=new Map,s=new Set,h=new Set;if(k.forEach(function(e){s.add(e),h.add(e)}),t.alignmentConstraint){if(t.alignmentConstraint.vertical)for(var d=t.alignmentConstraint.vertical,f=function(t){r.set("dummy"+t,[]),d[t].forEach(function(n){e.set(n,"dummy"+t),r.get("dummy"+t).push(n),k.has(n)&&s.add("dummy"+t)}),o.set("dummy"+t,u[l.get(d[t][0])])},p=0;p<d.length;p++)f(p);if(t.alignmentConstraint.horizontal)for(var g=t.alignmentConstraint.horizontal,v=function(e){i.set("dummy"+e,[]),g[e].forEach(function(t){n.set(t,"dummy"+e),i.get("dummy"+e).push(t),k.has(t)&&h.add("dummy"+e)}),a.set("dummy"+e,c[l.get(g[e][0])])},w=0;w<g.length;w++)v(w)}var E=new Map,T=new Map,_=function(t){A.get(t).forEach(function(r){var i=void 0,o=void 0;"horizontal"==r.direction?(i=e.get(t)?e.get(t):t,o=e.get(r.id)?{id:e.get(r.id),gap:r.gap,direction:r.direction}:r,E.has(i)?E.get(i).push(o):E.set(i,[o]),E.has(o.id)||E.set(o.id,[])):(i=n.get(t)?n.get(t):t,o=n.get(r.id)?{id:n.get(r.id),gap:r.gap,direction:r.direction}:r,T.has(i)?T.get(i).push(o):T.set(i,[o]),T.has(o.id)||T.set(o.id,[]))})},S=!0,N=!1,M=void 0;try{for(var C,I=A.keys()[Symbol.iterator]();!(S=(C=I.next()).done);S=!0)_(C.value)}catch(ee){N=!0,M=ee}finally{try{!S&&I.return&&I.return()}finally{if(N)throw M}}var R=b(E),L=b(T),O=y(R),D=y(L),P=x(E),B=x(T),F=[],z=[];O.forEach(function(e,t){F[t]=[],e.forEach(function(e){0==P.get(e).length&&F[t].push(e)})}),D.forEach(function(e,t){z[t]=[],e.forEach(function(e){0==B.get(e).length&&z[t].push(e)})});var U=m(E,"horizontal",s,o,F),G=m(T,"vertical",h,a,z),V=function(e){r.get(e)?r.get(e).forEach(function(t){u[l.get(t)]=U.get(e)}):u[l.get(e)]=U.get(e)},j=!0,H=!1,$=void 0;try{for(var Y,q=U.keys()[Symbol.iterator]();!(j=(Y=q.next()).done);j=!0)V(Y.value)}catch(ee){H=!0,$=ee}finally{try{!j&&q.return&&q.return()}finally{if(H)throw $}}var W=function(e){i.get(e)?i.get(e).forEach(function(t){c[l.get(t)]=G.get(e)}):c[l.get(e)]=G.get(e)},X=!0,K=!1,Z=void 0;try{for(var Q,J=G.keys()[Symbol.iterator]();!(X=(Q=J.next()).done);X=!0)W(Q.value)}catch(ee){K=!0,Z=ee}finally{try{!X&&J.return&&J.return()}finally{if(K)throw Z}}}()}for(var ee=0;ee<h.length;ee++){var te=h[ee];null==te.getChild()&&te.setCenter(u[l.get(te.id)],c[l.get(te.id)])}},e.exports=l},551:t=>{t.exports=e}},n={},function e(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return t[r](o,o.exports,e),o.exports}(45);var t,n})),T7.exports;var e}var N7;var M7,C7=(N7||(N7=1,M7=E7,function(e,t){M7.exports=t(S7())}(0,function(e){return t={658:e=>{e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(function(t){Object.keys(t).forEach(function(n){return e[n]=t[n]})}),e}},548:(e,t,n)=>{var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(140).layoutBase.LinkedList,o={getTopMostNodes:function(e){for(var t={},n=0;n<e.length;n++)t[e[n].id()]=!0;return e.filter(function(e,n){"number"==typeof e&&(e=n);for(var r=e.parent()[0];null!=r;){if(t[r.id()])return!1;r=r.parent()[0]}return!0})},connectComponents:function(e,t,n,r){var o=new i,a=new Set,s=[],l=void 0,u=void 0,c=void 0,h=!1,d=1,f=[],p=[],g=function(){var r=e.collection();p.push(r);var i=n[0],g=e.collection();g.merge(i).merge(i.descendants().intersection(t)),s.push(i),g.forEach(function(e){o.push(e),a.add(e),r.merge(e)});for(var m=function(){i=o.shift();var u=e.collection();i.neighborhood().nodes().forEach(function(e){t.intersection(i.edgesWith(e)).length>0&&u.merge(e)});for(var c=0;c<u.length;c++){var h=u[c];null==(l=n.intersection(h.union(h.ancestors())))||a.has(l[0])||l.union(l.descendants()).forEach(function(e){o.push(e),a.add(e),r.merge(e),n.has(e)&&s.push(e)})}};0!=o.length;)m();if(r.forEach(function(e){t.intersection(e.connectedEdges()).forEach(function(e){r.has(e.source())&&r.has(e.target())&&r.merge(e)})}),s.length==n.length&&(h=!0),!h||h&&d>1){u=s[0],c=u.connectedEdges().length,s.forEach(function(e){e.connectedEdges().length<c&&(c=e.connectedEdges().length,u=e)}),f.push(u.id());var v=e.collection();v.merge(s[0]),s.forEach(function(e){v.merge(e)}),s=[],n=n.difference(v),d++}};do{g()}while(!h);return r&&f.length>0&&r.set("dummy"+(r.size+1),f),p},relocateComponent:function(e,t,n){if(!n.fixedNodeConstraint){var i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;if("draft"==n.quality){var l=!0,u=!1,c=void 0;try{for(var h,d=t.nodeIndexes[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value,p=r(f,2),g=p[0],m=p[1],v=n.cy.getElementById(g);if(v){var y=v.boundingBox(),b=t.xCoords[m]-y.w/2,x=t.xCoords[m]+y.w/2,w=t.yCoords[m]-y.h/2,E=t.yCoords[m]+y.h/2;b<i&&(i=b),x>o&&(o=x),w<a&&(a=w),E>s&&(s=E)}}}catch(S){u=!0,c=S}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}var T=e.x-(o+i)/2,_=e.y-(s+a)/2;t.xCoords=t.xCoords.map(function(e){return e+T}),t.yCoords=t.yCoords.map(function(e){return e+_})}else{Object.keys(t).forEach(function(e){var n=t[e],r=n.getRect().x,l=n.getRect().x+n.getRect().width,u=n.getRect().y,c=n.getRect().y+n.getRect().height;r<i&&(i=r),l>o&&(o=l),u<a&&(a=u),c>s&&(s=c)});var k=e.x-(o+i)/2,A=e.y-(s+a)/2;Object.keys(t).forEach(function(e){var n=t[e];n.setCenter(n.getCenterX()+k,n.getCenterY()+A)})}}},calcBoundingBox:function(e,t,n,r){for(var i=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=void 0,u=void 0,c=void 0,h=void 0,d=e.descendants().not(":parent"),f=d.length,p=0;p<f;p++){var g=d[p];i>(l=t[r.get(g.id())]-g.width()/2)&&(i=l),o<(u=t[r.get(g.id())]+g.width()/2)&&(o=u),a>(c=n[r.get(g.id())]-g.height()/2)&&(a=c),s<(h=n[r.get(g.id())]+g.height()/2)&&(s=h)}var m={};return m.topLeftX=i,m.topLeftY=a,m.width=o-i,m.height=s-a,m},calcParentsWithoutChildren:function(e,t){var n=e.collection();return t.nodes(":parent").forEach(function(e){var t=!1;e.children().forEach(function(e){"none"!=e.css("display")&&(t=!0)}),t||n.merge(e)}),n}};e.exports=o},816:(e,t,n)=>{var r=n(548),i=n(140).CoSELayout,o=n(140).CoSENode,a=n(140).layoutBase.PointD,s=n(140).layoutBase.DimensionD,l=n(140).layoutBase.LayoutConstants,u=n(140).layoutBase.FDLayoutConstants,c=n(140).CoSEConstants;e.exports={coseLayout:function(e,t){var n=e.cy,h=e.eles,d=h.nodes(),f=h.edges(),p=void 0,g=void 0,m=void 0,v={};e.randomize&&(p=t.nodeIndexes,g=t.xCoords,m=t.yCoords);var y=function(e){return"function"==typeof e},b=function(e,t){return y(e)?e(t):e},x=r.calcParentsWithoutChildren(n,h);null!=e.nestingFactor&&(c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.nestingFactor),null!=e.gravity&&(c.DEFAULT_GRAVITY_STRENGTH=u.DEFAULT_GRAVITY_STRENGTH=e.gravity),null!=e.numIter&&(c.MAX_ITERATIONS=u.MAX_ITERATIONS=e.numIter),null!=e.gravityRange&&(c.DEFAULT_GRAVITY_RANGE_FACTOR=u.DEFAULT_GRAVITY_RANGE_FACTOR=e.gravityRange),null!=e.gravityCompound&&(c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=e.gravityCompound),null!=e.gravityRangeCompound&&(c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=e.gravityRangeCompound),null!=e.initialEnergyOnIncremental&&(c.DEFAULT_COOLING_FACTOR_INCREMENTAL=u.DEFAULT_COOLING_FACTOR_INCREMENTAL=e.initialEnergyOnIncremental),null!=e.tilingCompareBy&&(c.TILING_COMPARE_BY=e.tilingCompareBy),"proof"==e.quality?l.QUALITY=2:l.QUALITY=0,c.NODE_DIMENSIONS_INCLUDE_LABELS=u.NODE_DIMENSIONS_INCLUDE_LABELS=l.NODE_DIMENSIONS_INCLUDE_LABELS=e.nodeDimensionsIncludeLabels,c.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=l.DEFAULT_INCREMENTAL=!e.randomize,c.ANIMATE=u.ANIMATE=l.ANIMATE=e.animate,c.TILE=e.tile,c.TILING_PADDING_VERTICAL="function"==typeof e.tilingPaddingVertical?e.tilingPaddingVertical.call():e.tilingPaddingVertical,c.TILING_PADDING_HORIZONTAL="function"==typeof e.tilingPaddingHorizontal?e.tilingPaddingHorizontal.call():e.tilingPaddingHorizontal,c.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=l.DEFAULT_INCREMENTAL=!0,c.PURE_INCREMENTAL=!e.randomize,l.DEFAULT_UNIFORM_LEAF_NODE_SIZES=e.uniformNodeDimensions,"transformed"==e.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,c.ENFORCE_CONSTRAINTS=!1,c.APPLY_LAYOUT=!1),"enforced"==e.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!0,c.APPLY_LAYOUT=!1),"cose"==e.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!1,c.APPLY_LAYOUT=!0),"all"==e.step&&(e.randomize?c.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!0,c.APPLY_LAYOUT=!0),e.fixedNodeConstraint||e.alignmentConstraint||e.relativePlacementConstraint?c.TREE_REDUCTION_ON_INCREMENTAL=!1:c.TREE_REDUCTION_ON_INCREMENTAL=!0;var w,E,T=new i,_=T.newGraphManager();return function e(t,n,i,l){for(var u=n.length,c=0;c<u;c++){var h=n[c],d=null;0==h.intersection(x).length&&(d=h.children());var f=void 0,y=h.layoutDimensions({nodeDimensionsIncludeLabels:l.nodeDimensionsIncludeLabels});if(null!=h.outerWidth()&&null!=h.outerHeight())if(l.randomize)if(h.isParent()){var w=r.calcBoundingBox(h,g,m,p);f=0==h.intersection(x).length?t.add(new o(i.graphManager,new a(w.topLeftX,w.topLeftY),new s(w.width,w.height))):t.add(new o(i.graphManager,new a(w.topLeftX,w.topLeftY),new s(parseFloat(y.w),parseFloat(y.h))))}else f=t.add(new o(i.graphManager,new a(g[p.get(h.id())]-y.w/2,m[p.get(h.id())]-y.h/2),new s(parseFloat(y.w),parseFloat(y.h))));else f=t.add(new o(i.graphManager,new a(h.position("x")-y.w/2,h.position("y")-y.h/2),new s(parseFloat(y.w),parseFloat(y.h))));else f=t.add(new o(this.graphManager));f.id=h.data("id"),f.nodeRepulsion=b(l.nodeRepulsion,h),f.paddingLeft=parseInt(h.css("padding")),f.paddingTop=parseInt(h.css("padding")),f.paddingRight=parseInt(h.css("padding")),f.paddingBottom=parseInt(h.css("padding")),l.nodeDimensionsIncludeLabels&&(f.labelWidth=h.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,f.labelHeight=h.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,f.labelPosVertical=h.css("text-valign"),f.labelPosHorizontal=h.css("text-halign")),v[h.data("id")]=f,isNaN(f.rect.x)&&(f.rect.x=0),isNaN(f.rect.y)&&(f.rect.y=0),null!=d&&d.length>0&&e(i.getGraphManager().add(i.newGraph(),f),d,i,l)}}(_.addRoot(),r.getTopMostNodes(d),T,e),function(t,n,r){for(var i=0,o=0,a=0;a<r.length;a++){var s=r[a],l=v[s.data("source")],h=v[s.data("target")];if(l&&h&&l!==h&&0==l.getEdgesBetween(h).length){var d=n.add(t.newEdge(),l,h);d.id=s.id(),d.idealLength=b(e.idealEdgeLength,s),d.edgeElasticity=b(e.edgeElasticity,s),i+=d.idealLength,o++}}null!=e.idealEdgeLength&&(o>0?c.DEFAULT_EDGE_LENGTH=u.DEFAULT_EDGE_LENGTH=i/o:y(e.idealEdgeLength)?c.DEFAULT_EDGE_LENGTH=u.DEFAULT_EDGE_LENGTH=50:c.DEFAULT_EDGE_LENGTH=u.DEFAULT_EDGE_LENGTH=e.idealEdgeLength,c.MIN_REPULSION_DIST=u.MIN_REPULSION_DIST=u.DEFAULT_EDGE_LENGTH/10,c.DEFAULT_RADIAL_SEPARATION=u.DEFAULT_EDGE_LENGTH)}(T,_,f),w=T,(E=e).fixedNodeConstraint&&(w.constraints.fixedNodeConstraint=E.fixedNodeConstraint),E.alignmentConstraint&&(w.constraints.alignmentConstraint=E.alignmentConstraint),E.relativePlacementConstraint&&(w.constraints.relativePlacementConstraint=E.relativePlacementConstraint),T.runLayout(),v}}},212:(e,t,n)=>{var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(658),o=n(548),a=n(657).spectralLayout,s=n(816).coseLayout,l=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(e){return 4500},idealEdgeLength:function(e){return 50},edgeElasticity:function(e){return.45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=i({},l,t)}return r(e,[{key:"run",value:function(){var e=this.options,t=e.cy,n=e.eles,r=[],i=[],l=void 0,u=[];!e.fixedNodeConstraint||Array.isArray(e.fixedNodeConstraint)&&0!=e.fixedNodeConstraint.length||(e.fixedNodeConstraint=void 0),e.alignmentConstraint&&(!e.alignmentConstraint.vertical||Array.isArray(e.alignmentConstraint.vertical)&&0!=e.alignmentConstraint.vertical.length||(e.alignmentConstraint.vertical=void 0),!e.alignmentConstraint.horizontal||Array.isArray(e.alignmentConstraint.horizontal)&&0!=e.alignmentConstraint.horizontal.length||(e.alignmentConstraint.horizontal=void 0)),!e.relativePlacementConstraint||Array.isArray(e.relativePlacementConstraint)&&0!=e.relativePlacementConstraint.length||(e.relativePlacementConstraint=void 0),(e.fixedNodeConstraint||e.alignmentConstraint||e.relativePlacementConstraint)&&(e.tile=!1,e.packComponents=!1);var c=void 0,h=!1;if(t.layoutUtilities&&e.packComponents&&((c=t.layoutUtilities("get"))||(c=t.layoutUtilities()),h=!0),n.nodes().length>0)if(h){var d=o.getTopMostNodes(e.eles.nodes());if((l=o.connectComponents(t,e.eles,d)).forEach(function(e){var t=e.boundingBox();u.push({x:t.x1+t.w/2,y:t.y1+t.h/2})}),e.randomize&&l.forEach(function(t){e.eles=t,r.push(a(e))}),"default"==e.quality||"proof"==e.quality){var f=t.collection();if(e.tile){var p=0,g={nodeIndexes:new Map,xCoords:[],yCoords:[]},m=[];if(l.forEach(function(e,t){0==e.edges().length&&(e.nodes().forEach(function(t,n){f.merge(e.nodes()[n]),t.isParent()||(g.nodeIndexes.set(e.nodes()[n].id(),p++),g.xCoords.push(e.nodes()[0].position().x),g.yCoords.push(e.nodes()[0].position().y))}),m.push(t))}),f.length>1){var v=f.boundingBox();u.push({x:v.x1+v.w/2,y:v.y1+v.h/2}),l.push(f),r.push(g);for(var y=m.length-1;y>=0;y--)l.splice(m[y],1),r.splice(m[y],1),u.splice(m[y],1)}}l.forEach(function(t,n){e.eles=t,i.push(s(e,r[n])),o.relocateComponent(u[n],i[n],e)})}else l.forEach(function(t,n){o.relocateComponent(u[n],r[n],e)});var b=new Set;if(l.length>1){var x=[],w=n.filter(function(e){return"none"==e.css("display")});l.forEach(function(t,n){var a=void 0;if("draft"==e.quality&&(a=r[n].nodeIndexes),t.nodes().not(w).length>0){var s={edges:[],nodes:[]},l=void 0;t.nodes().not(w).forEach(function(t){if("draft"==e.quality)if(t.isParent()){var u=o.calcBoundingBox(t,r[n].xCoords,r[n].yCoords,a);s.nodes.push({x:u.topLeftX,y:u.topLeftY,width:u.width,height:u.height})}else l=a.get(t.id()),s.nodes.push({x:r[n].xCoords[l]-t.boundingbox().w/2,y:r[n].yCoords[l]-t.boundingbox().h/2,width:t.boundingbox().w,height:t.boundingbox().h});else i[n][t.id()]&&s.nodes.push({x:i[n][t.id()].getLeft(),y:i[n][t.id()].getTop(),width:i[n][t.id()].getWidth(),height:i[n][t.id()].getHeight()})}),t.edges().forEach(function(t){var l=t.source(),u=t.target();if("none"!=l.css("display")&&"none"!=u.css("display"))if("draft"==e.quality){var c=a.get(l.id()),h=a.get(u.id()),d=[],f=[];if(l.isParent()){var p=o.calcBoundingBox(l,r[n].xCoords,r[n].yCoords,a);d.push(p.topLeftX+p.width/2),d.push(p.topLeftY+p.height/2)}else d.push(r[n].xCoords[c]),d.push(r[n].yCoords[c]);if(u.isParent()){var g=o.calcBoundingBox(u,r[n].xCoords,r[n].yCoords,a);f.push(g.topLeftX+g.width/2),f.push(g.topLeftY+g.height/2)}else f.push(r[n].xCoords[h]),f.push(r[n].yCoords[h]);s.edges.push({startX:d[0],startY:d[1],endX:f[0],endY:f[1]})}else i[n][l.id()]&&i[n][u.id()]&&s.edges.push({startX:i[n][l.id()].getCenterX(),startY:i[n][l.id()].getCenterY(),endX:i[n][u.id()].getCenterX(),endY:i[n][u.id()].getCenterY()})}),s.nodes.length>0&&(x.push(s),b.add(n))}});var E=c.packComponents(x,e.randomize).shifts;if("draft"==e.quality)r.forEach(function(e,t){var n=e.xCoords.map(function(e){return e+E[t].dx}),r=e.yCoords.map(function(e){return e+E[t].dy});e.xCoords=n,e.yCoords=r});else{var T=0;b.forEach(function(e){Object.keys(i[e]).forEach(function(t){var n=i[e][t];n.setCenter(n.getCenterX()+E[T].dx,n.getCenterY()+E[T].dy)}),T++})}}}else{var _=e.eles.boundingBox();if(u.push({x:_.x1+_.w/2,y:_.y1+_.h/2}),e.randomize){var k=a(e);r.push(k)}"default"==e.quality||"proof"==e.quality?(i.push(s(e,r[0])),o.relocateComponent(u[0],i[0],e)):o.relocateComponent(u[0],r[0],e)}var A=function(t,n){if("default"==e.quality||"proof"==e.quality){"number"==typeof t&&(t=n);var o=void 0,a=void 0,s=t.data("id");return i.forEach(function(e){s in e&&(o={x:e[s].getRect().getCenterX(),y:e[s].getRect().getCenterY()},a=e[s])}),e.nodeDimensionsIncludeLabels&&(a.labelWidth&&("left"==a.labelPosHorizontal?o.x+=a.labelWidth/2:"right"==a.labelPosHorizontal&&(o.x-=a.labelWidth/2)),a.labelHeight&&("top"==a.labelPosVertical?o.y+=a.labelHeight/2:"bottom"==a.labelPosVertical&&(o.y-=a.labelHeight/2))),null==o&&(o={x:t.position("x"),y:t.position("y")}),{x:o.x,y:o.y}}var l=void 0;return r.forEach(function(e){var n=e.nodeIndexes.get(t.id());null!=n&&(l={x:e.xCoords[n],y:e.yCoords[n]})}),null==l&&(l={x:t.position("x"),y:t.position("y")}),{x:l.x,y:l.y}};if("default"==e.quality||"proof"==e.quality||e.randomize){var S=o.calcParentsWithoutChildren(t,n),N=n.filter(function(e){return"none"==e.css("display")});e.eles=n.not(N),n.nodes().not(":parent").not(N).layoutPositions(this,e,A),S.length>0&&S.forEach(function(e){e.position(A(e))})}}}]),e}();e.exports=u},657:(e,t,n)=>{var r=n(548),i=n(140).layoutBase.Matrix,o=n(140).layoutBase.SVD;e.exports={spectralLayout:function(e){var t=e.cy,n=e.eles,a=n.nodes(),s=n.nodes(":parent"),l=new Map,u=new Map,c=new Map,h=[],d=[],f=[],p=[],g=[],m=[],v=[],y=[],b=void 0,x=1e8,w=1e-9,E=e.piTol,T=e.samplingType,_=e.nodeSeparation,k=void 0,A=function(e,t,n){for(var r=[],i=0,o=0,a=0,s=void 0,l=[],c=0,d=1,f=0;f<b;f++)l[f]=x;for(r[o]=e,l[e]=0;o>=i;){a=r[i++];for(var p=h[a],v=0;v<p.length;v++)l[s=u.get(p[v])]==x&&(l[s]=l[a]+1,r[++o]=s);m[a][t]=l[a]*_}if(n){for(var y=0;y<b;y++)m[y][t]<g[y]&&(g[y]=m[y][t]);for(var w=0;w<b;w++)g[w]>c&&(c=g[w],d=w)}return d};r.connectComponents(t,n,r.getTopMostNodes(a),l),s.forEach(function(e){r.connectComponents(t,n,r.getTopMostNodes(e.descendants().intersection(n)),l)});for(var S=0,N=0;N<a.length;N++)a[N].isParent()||u.set(a[N].id(),S++);var M=!0,C=!1,I=void 0;try{for(var R,L=l.keys()[Symbol.iterator]();!(M=(R=L.next()).done);M=!0){var O=R.value;u.set(O,S++)}}catch(K){C=!0,I=K}finally{try{!M&&L.return&&L.return()}finally{if(C)throw I}}for(var D=0;D<u.size;D++)h[D]=[];s.forEach(function(e){for(var t=e.children().intersection(n);0==t.nodes(":childless").length;)t=t.nodes()[0].children().intersection(n);var r=0,i=t.nodes(":childless")[0].connectedEdges().length;t.nodes(":childless").forEach(function(e,t){e.connectedEdges().length<i&&(i=e.connectedEdges().length,r=t)}),c.set(e.id(),t.nodes(":childless")[r].id())}),a.forEach(function(e){var t=void 0;t=e.isParent()?u.get(c.get(e.id())):u.get(e.id()),e.neighborhood().nodes().forEach(function(r){n.intersection(e.edgesWith(r)).length>0&&(r.isParent()?h[t].push(c.get(r.id())):h[t].push(r.id()))})});var P=function(e){var n=u.get(e),r=void 0;l.get(e).forEach(function(i){r=t.getElementById(i).isParent()?c.get(i):i,h[n].push(r),h[u.get(r)].push(e)})},B=!0,F=!1,z=void 0;try{for(var U,G=l.keys()[Symbol.iterator]();!(B=(U=G.next()).done);B=!0)P(U.value)}catch(K){F=!0,z=K}finally{try{!B&&G.return&&G.return()}finally{if(F)throw z}}var V=void 0;if((b=u.size)>2){k=b<e.sampleSize?b:e.sampleSize;for(var j=0;j<b;j++)m[j]=[];for(var H=0;H<k;H++)y[H]=[];return"draft"==e.quality||"all"==e.step?(function(e){var t=void 0;if(e){t=Math.floor(Math.random()*b);for(var n=0;n<b;n++)g[n]=x;for(var r=0;r<k;r++)p[r]=t,t=A(t,r,e)}else{!function(){for(var e=0,t=0,n=!1;t<k;){e=Math.floor(Math.random()*b),n=!1;for(var r=0;r<t;r++)if(p[r]==e){n=!0;break}n||(p[t]=e,t++)}}();for(var i=0;i<k;i++)A(p[i],i,e)}for(var o=0;o<b;o++)for(var a=0;a<k;a++)m[o][a]*=m[o][a];for(var s=0;s<k;s++)v[s]=[];for(var l=0;l<k;l++)for(var u=0;u<k;u++)v[l][u]=m[p[u]][l]}(T),function(){for(var e=o.svd(v),t=e.S,n=e.U,r=e.V,a=t[0]*t[0]*t[0],s=[],l=0;l<k;l++){s[l]=[];for(var u=0;u<k;u++)s[l][u]=0,l==u&&(s[l][u]=t[l]/(t[l]*t[l]+a/(t[l]*t[l])))}y=i.multMat(i.multMat(r,s),i.transpose(n))}(),function(){for(var e=void 0,t=void 0,n=[],r=[],o=[],a=[],s=0;s<b;s++)n[s]=Math.random(),r[s]=Math.random();n=i.normalize(n),r=i.normalize(r);for(var l=w,u=w,c=void 0;;){for(var h=0;h<b;h++)o[h]=n[h];if(n=i.multGamma(i.multL(i.multGamma(o),m,y)),e=i.dotProduct(o,n),n=i.normalize(n),l=i.dotProduct(o,n),(c=Math.abs(l/u))<=1+E&&c>=1)break;u=l}for(var p=0;p<b;p++)o[p]=n[p];for(u=w;;){for(var g=0;g<b;g++)a[g]=r[g];if(a=i.minusOp(a,i.multCons(o,i.dotProduct(o,a))),r=i.multGamma(i.multL(i.multGamma(a),m,y)),t=i.dotProduct(a,r),r=i.normalize(r),l=i.dotProduct(a,r),(c=Math.abs(l/u))<=1+E&&c>=1)break;u=l}for(var v=0;v<b;v++)a[v]=r[v];d=i.multCons(o,Math.sqrt(Math.abs(e))),f=i.multCons(a,Math.sqrt(Math.abs(t)))}(),V={nodeIndexes:u,xCoords:d,yCoords:f}):(u.forEach(function(e,n){d.push(t.getElementById(n).position("x")),f.push(t.getElementById(n).position("y"))}),V={nodeIndexes:u,xCoords:d,yCoords:f}),V}var $=u.keys(),Y=t.getElementById($.next().value),q=Y.position(),W=Y.outerWidth();if(d.push(q.x),f.push(q.y),2==b){var X=t.getElementById($.next().value).outerWidth();d.push(q.x+W/2+X/2+e.idealEdgeLength),f.push(q.y)}return V={nodeIndexes:u,xCoords:d,yCoords:f}}}},579:(e,t,n)=>{var r=n(212),i=function(e){e&&e("layout","fcose",r)};"undefined"!=typeof cytoscape&&i(cytoscape),e.exports=i},140:t=>{t.exports=e}},n={},function e(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return t[r](o,o.exports,e),o.exports}(579);var t,n})),E7.exports);const I7=Zo(C7);export{SY as $,Yy as A,tb as B,Jy as C,Zy as D,Fw as E,Hd as F,Jw as G,iE as H,rE as I,gT as J,$w as K,Xw as L,mT as M,v_ as N,Gy as O,ek as P,X_ as Q,wk as R,tk as S,NL as T,JO as U,VO as V,Fu as W,oD as X,_H as Y,TH as Z,CY as _,Hu as a,q as a$,xY as a0,yY as a1,vY as a2,fy as a3,mh as a4,gh as a5,im as a6,dp as a7,Ah as a8,Ym as a9,H6 as aA,j6 as aB,py as aC,x7 as aD,zI as aE,I7 as aF,_g as aG,Cg as aH,Vg as aI,ie as aJ,Lr as aK,Tt as aL,wt as aM,Pr as aN,gn as aO,Ye as aP,Xe as aQ,pn as aR,On as aS,ht as aT,Wn as aU,dt as aV,Un as aW,oe as aX,zn as aY,rr as aZ,ct as a_,Bm as aa,Em as ab,Nm as ac,Sm as ad,Am as ae,km as af,_m as ag,Tm as ah,bm as ai,ym as aj,vm as ak,mm as al,lm as am,kh as an,DY as ao,zY as ap,VY as aq,Dy as ar,$g as as,Hy as at,Yg as au,N6 as av,F6 as aw,r7 as ax,$6 as ay,Y6 as az,Uu as b,Tr as b0,we as b1,Fn as b2,Nt as b3,Gn as b4,Or as b5,In as b6,nr as b7,Bn as b8,W as b9,ir as bA,ar as bB,fu as bC,vu as bD,re as bE,xn as bF,We as bG,xr as bH,tt as bI,tr as bJ,bo as bK,Ai as bL,NC as bM,Xo as ba,gr as bb,h as bc,_r as bd,An as be,Rr as bf,Ir as bg,nt as bh,Ko as bi,Kn as bj,Xn as bk,p as bl,Sn as bm,Je as bn,dr as bo,br as bp,fr as bq,pr as br,kt as bs,At as bt,ps as bu,qe as bv,vn as bw,ur as bx,lr as by,Pn as bz,wu as c,ju as d,eh as e,Db as f,Lb as g,Ib as h,$u as i,Nb as j,Sb as k,Vu as l,xx as m,bb as n,Fy as o,Zc as p,fb as q,Bu as r,Ob as s,vb as t,gb as u,ab as v,cb as w,lb as x,rb as y,qy as z};
