import{aK as a,aO as s,aT as e,aV as t,aX as i,aY as v,aP as n,aQ as r,bu as l,a$ as o,b2 as d,b0 as c,aU as b,aW as w,b1 as p,aR as f,bk as h,bb as m,b4 as g,bv as u,bw as $,b5 as x,bm as k}from"../chunks/B6GVoWwO.js";var N=e('<div class="office svelte-bs0w8t"> </div>'),j=e('<div class="result-row svelte-bs0w8t"><div></div> <div><div class="candidate-name svelte-bs0w8t"> </div> <div class="percentage-container svelte-bs0w8t"><div class="percentage svelte-bs0w8t"> </div> <div class="approval svelte-bs0w8t">approval</div></div></div></div>'),M=e('<div class="header svelte-bs0w8t"><div class="watermark svelte-bs0w8t"> </div> <canvas width="120" height="120" class="qr-code svelte-bs0w8t"></canvas> <div class="jurisdiction svelte-bs0w8t"> </div> <!> <div class="election svelte-bs0w8t"> </div></div> <div class="results svelte-bs0w8t"></div>',1),C=e('<div class="content"><p>Election not found</p></div>'),q=e('<div class="card svelte-bs0w8t"><!></div>');function z(e,z){a(z,!0);const E=d(()=>z.data.report);let F=r(void 0);s(()=>{if(!n(F))return;const a=`https://approval.vote/report/${z.data.path}`;l.toCanvas(n(F),a,{width:120,margin:1,color:{dark:"#666666",light:"#ffffff"}})});const K=d(()=>n(E).candidates.map(a=>({name:a.name,percentage:(a.votes/n(E).ballotCount*100).toFixed(1),votes:a.votes,winner:a.winner})).sort((a,s)=>s.votes-a.votes)),O=d(()=>Math.min(180,Math.max(120,630/(n(K).length+2)))),P=d(()=>(630-n(O))/n(K).length),Q=d(()=>Math.min(2.5,Math.max(1,8/n(K).length)));var R=q(),T=o(R),U=a=>{var s=M(),e=b(s),v=o(e),r=o(v);c(v);var l=w(v,2);p(l,a=>f(F,a),()=>n(F));var d=w(l,2),C=o(d,!0);c(d);var q=w(d,2),R=a=>{var s=N(),e=o(s,!0);c(s),g(()=>x(e,n(E).info.officeName)),i(a,s)};t(q,a=>{n(E).info.officeName!==n(E).info.jurisdictionName&&a(R)});var T=w(q,2),U=o(T);c(T),c(e);var V=w(e,2);h(V,21,()=>n(K),k,(a,s)=>{var e=j(),t=o(e);let v;var r=w(t,2);let l;var d=o(r),b=o(d,!0);c(d);var p=w(d,2),f=o(p),h=o(f);c(f),m(2),c(p),c(r),c(e),g(()=>{u(e,`height: ${n(P)??""}px; font-size: ${n(Q)??""}rem;`),v=$(t,1,"background-fill svelte-bs0w8t",null,v,{winner:n(s).winner}),u(t,`width: ${n(s).percentage??""}%`),l=$(r,1,"winner-stats svelte-bs0w8t",null,l,{winner:n(s).winner}),x(b,n(s).name),x(h,`${n(s).percentage??""}%`)}),i(a,e)}),c(V),g(a=>{u(e,`height: ${n(O)??""}px`),x(r,`approval.vote/${z.data.path??""}`),x(C,n(E).info.jurisdictionName),x(U,`${n(E).info.electionName??""} (${a??""})`)},[()=>n(E).info.date.slice(0,4)]),i(a,s)},V=a=>{var s=C();i(a,s)};t(T,a=>{n(E)?.info&&n(K).length>0?a(U):a(V,!1)}),c(R),i(e,R),v()}export{z as component};
