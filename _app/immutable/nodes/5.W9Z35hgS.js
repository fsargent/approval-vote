import{aJ as a,aK as e,aN as s,bs as t,bt as i,bc as v,aS as n,aU as c,aW as l,aX as o,bu as r,aO as d,bv as u,aQ as w,a_ as p,bw as h,a$ as f,aT as j,aV as m,b0 as b,bi as g,b8 as $,b3 as x,bx as k,by as M,b4 as N,bk as C}from"../chunks/By_-QE2-.js";var y=n('<div class="result-row svelte-cjuw81"><div></div> <div><div class="candidate-name svelte-cjuw81"> </div> <div class="percentage-container svelte-cjuw81"><div class="percentage svelte-cjuw81"> </div> <div class="approval svelte-cjuw81">approval</div></div></div></div>'),z=n('<div class="header svelte-cjuw81"><div class="source-info svelte-cjuw81"><div class="watermark svelte-cjuw81">approval.vote</div> <canvas width="48" height="48" class="svelte-cjuw81"></canvas></div> <div class="jurisdiction svelte-cjuw81"> </div> <div class="office svelte-cjuw81"> </div> <div class="election svelte-cjuw81"> </div></div> <div class="results svelte-cjuw81"></div>',1),E=n('<div class="content"><p>Election not found</p></div>'),F=n('<div class="card svelte-cjuw81"><!></div>');function J(n,J){a(J,!1);const K=u(),O=u(),Q=u();let S=e(J,"data",8);const T=S().report;let U=u();s(()=>{const a=`https://approval.vote/report/${S().path}`;r.toCanvas(d(U),a,{width:48,margin:0,color:{dark:"#666666",light:"#ffffff"}})});const V=T.candidates.map(a=>({name:a.name,percentage:(a.votes/T.ballotCount*100).toFixed(1),votes:a.votes,winner:a.winner})).sort((a,e)=>e.votes-a.votes);t(()=>{},()=>{w(K,Math.min(180,Math.max(120,600/(V.length+2))))}),t(()=>d(K),()=>{w(O,(600-d(K))/V.length)}),t(()=>{},()=>{w(Q,Math.min(2.5,Math.max(1,8/V.length)))}),i(),v();var W=F(),X=p(W),_=a=>{var e=z(),s=j(e),t=p(s),i=m(p(t),2);b(i,a=>w(U,a),()=>d(U)),f(t);var v=m(t,2),n=p(v,!0);f(v);var c=m(v,2),o=p(c,!0);f(c);var r=m(c,2),u=p(r);f(r),f(s);var E=m(s,2);g(E,5,()=>V,C,(a,e)=>{var s=y(),t=p(s);let i;var v=m(t,2);let n;var c=p(v),o=p(c,!0);f(c);var r=m(c,2),u=p(r),w=p(u);f(u),$(2),f(r),f(v),f(s),x((a,c)=>{k(s,`height: ${d(O)??""}px; font-size: ${d(Q)??""}rem;`),i=M(t,1,"background-fill svelte-cjuw81",null,i,a),k(t,`width: ${d(e),h(()=>d(e).percentage)??""}%`),n=M(v,1,"winner-stats svelte-cjuw81",null,n,c),N(o,(d(e),h(()=>d(e).name))),N(w,`${d(e),h(()=>d(e).percentage)??""}%`)},[()=>({winner:d(e).winner}),()=>({winner:d(e).winner})]),l(a,s)}),f(E),x(a=>{k(s,`height: ${d(K)??""}px`),N(n,h(()=>T.info.jurisdictionName)),N(o,h(()=>T.info.officeName)),N(u,`${h(()=>T.info.electionName)??""} (${a??""})`)},[()=>h(()=>T.info.date.slice(0,4))]),l(a,e)},q=a=>{var e=E();l(a,e)};c(X,a=>{h(()=>(null==T?void 0:T.info)&&V.length>0)?a(_):a(q,!1)}),f(W),l(n,W),o()}export{J as component};
