import{aK as a,aL as s,aO as e,bv as t,bw as i,be as v,aT as n,aV as l,aX as r,aY as o,bx as d,aP as c,by as b,aR as w,a$ as p,bz as f,b0 as h,aU as m,aW as g,b1 as u,bl as $,ba as x,b4 as N,bA as j,bB as k,b5 as M,bn as C,bC as z}from"../chunks/CvjDjFMO.js";var q=n('<div class="office svelte-bs0w8t"> </div>'),y=n('<div class="result-row svelte-bs0w8t"><div></div> <div><div class="candidate-name svelte-bs0w8t"> </div> <div class="percentage-container svelte-bs0w8t"><div class="percentage svelte-bs0w8t"> </div> <div class="approval svelte-bs0w8t">approval</div></div></div></div>'),A=n('<div class="header svelte-bs0w8t"><div class="watermark svelte-bs0w8t"> </div> <canvas width="120" height="120" class="qr-code svelte-bs0w8t"></canvas> <div class="jurisdiction svelte-bs0w8t"> </div> <!> <div class="election svelte-bs0w8t"> </div></div> <div class="results svelte-bs0w8t"></div>',1),B=n('<div class="content"><p>Election not found</p></div>'),E=n('<div class="card svelte-bs0w8t"><!></div>');function F(n,F){a(F,!1);const K=b(),L=b(),O=b();let P=s(F,"data",8);const R=P().report;let T=b();e(()=>{const a=`https://approval.vote/report/${P().path}`;d.toCanvas(c(T),a,{width:120,margin:1,color:{dark:"#666666",light:"#ffffff"}})});const U=R.candidates.map(a=>({name:a.name,percentage:(a.votes/R.ballotCount*100).toFixed(1),votes:a.votes,winner:a.winner})).sort((a,s)=>s.votes-a.votes);t(()=>{},()=>{w(K,Math.min(180,Math.max(120,600/(U.length+2))))}),t(()=>c(K),()=>{w(L,(600-c(K))/U.length)}),t(()=>{},()=>{w(O,Math.min(2.5,Math.max(1,8/U.length)))}),i(),v();var V=E(),W=p(V),X=a=>{var s=A(),e=m(s),t=p(e),i=p(t);h(t);var v=g(t,2);u(v,a=>w(T,a),()=>c(T));var n=g(v,2),o=p(n,!0);h(n);var d=g(n,2),b=a=>{var s=q(),e=p(s,!0);h(s),N(()=>M(e,f(()=>R.info.officeName))),r(a,s)};l(d,a=>{f(()=>R.info.officeName!==R.info.jurisdictionName)&&a(b)});var B=g(d,2),E=p(B);h(B),h(e);var F=g(e,2);$(F,5,()=>U,C,(a,s)=>{var e=y(),t=p(e);let i;var v=g(t,2);let n;var l=p(v),o=p(l,!0);h(l);var d=g(l,2),b=p(d),w=p(b);h(b),x(2),h(d),h(v),h(e),N(()=>{j(e,`height: ${c(L)??""}px; font-size: ${c(O)??""}rem;`),i=k(t,1,"background-fill svelte-bs0w8t",null,i,{winner:c(s).winner}),j(t,`width: ${c(s),f(()=>c(s).percentage)??""}%`),n=k(v,1,"winner-stats svelte-bs0w8t",null,n,{winner:c(s).winner}),M(o,(c(s),f(()=>c(s).name))),M(w,`${c(s),f(()=>c(s).percentage)??""}%`)}),r(a,e)}),h(F),N(a=>{j(e,`height: ${c(K)??""}px`),M(i,`approval.vote/${z(P()),f(()=>P().path)??""}`),M(o,f(()=>R.info.jurisdictionName)),M(E,`${f(()=>R.info.electionName)??""} (${a??""})`)},[()=>f(()=>R.info.date.slice(0,4))]),r(a,s)},Y=a=>{var s=B();r(a,s)};l(W,a=>{f(()=>R?.info&&U.length>0)?a(X):a(Y,!1)}),h(V),r(n,V),o()}export{F as component};
