import{aJ as a,aK as s,aN as e,bs as t,bt as i,bd as v,aS as n,aU as l,aW as r,aX as o,bu as d,aO as c,bv as b,aQ as w,a_ as p,bw as f,a$ as h,aT as m,aV as g,b0 as u,bj as $,b9 as x,b3 as N,bx as j,by as k,b4 as M,bk as z,bz as C}from"../chunks/CEmGC8a3.js";var q=n('<div class="office svelte-bs0w8t"> </div>'),y=n('<div class="result-row svelte-bs0w8t"><div></div> <div><div class="candidate-name svelte-bs0w8t"> </div> <div class="percentage-container svelte-bs0w8t"><div class="percentage svelte-bs0w8t"> </div> <div class="approval svelte-bs0w8t">approval</div></div></div></div>'),E=n('<div class="header svelte-bs0w8t"><div class="watermark svelte-bs0w8t"> </div> <canvas width="120" height="120" class="qr-code svelte-bs0w8t"></canvas> <div class="jurisdiction svelte-bs0w8t"> </div> <!> <div class="election svelte-bs0w8t"> </div></div> <div class="results svelte-bs0w8t"></div>',1),F=n('<div class="content"><p>Election not found</p></div>'),J=n('<div class="card svelte-bs0w8t"><!></div>');function K(n,K){a(K,!1);const O=b(),Q=b(),S=b();let T=s(K,"data",8);const U=T().report;let V=b();e(()=>{const a=`https://approval.vote/report/${T().path}`;d.toCanvas(c(V),a,{width:120,margin:1,color:{dark:"#666666",light:"#ffffff"}})});const W=U.candidates.map(a=>({name:a.name,percentage:(a.votes/U.ballotCount*100).toFixed(1),votes:a.votes,winner:a.winner})).sort((a,s)=>s.votes-a.votes);t(()=>{},()=>{w(O,Math.min(180,Math.max(120,600/(W.length+2))))}),t(()=>c(O),()=>{w(Q,(600-c(O))/W.length)}),t(()=>{},()=>{w(S,Math.min(2.5,Math.max(1,8/W.length)))}),i(),v();var X=J(),_=p(X),A=a=>{var s=E(),e=m(s),t=p(e),i=p(t);h(t);var v=g(t,2);u(v,a=>w(V,a),()=>c(V));var n=g(v,2),o=p(n,!0);h(n);var d=g(n,2),b=a=>{var s=q(),e=p(s,!0);h(s),N(()=>M(e,f(()=>U.info.officeName))),r(a,s)};l(d,a=>{f(()=>U.info.officeName!==U.info.jurisdictionName)&&a(b)});var F=g(d,2),J=p(F);h(F),h(e);var K=g(e,2);$(K,5,()=>W,z,(a,s)=>{var e=y(),t=p(e);let i;var v=g(t,2);let n;var l=p(v),o=p(l,!0);h(l);var d=g(l,2),b=p(d),w=p(b);h(b),x(2),h(d),h(v),h(e),N((a,l)=>{j(e,`height: ${c(Q)??""}px; font-size: ${c(S)??""}rem;`),i=k(t,1,"background-fill svelte-bs0w8t",null,i,a),j(t,`width: ${c(s),f(()=>c(s).percentage)??""}%`),n=k(v,1,"winner-stats svelte-bs0w8t",null,n,l),M(o,(c(s),f(()=>c(s).name))),M(w,`${c(s),f(()=>c(s).percentage)??""}%`)},[()=>({winner:c(s).winner}),()=>({winner:c(s).winner})]),r(a,e)}),h(K),N(a=>{j(e,`height: ${c(O)??""}px`),M(i,`approval.vote/${C(T()),f(()=>T().path)??""}`),M(o,f(()=>U.info.jurisdictionName)),M(J,`${f(()=>U.info.electionName)??""} (${a??""})`)},[()=>f(()=>U.info.date.slice(0,4))]),r(a,s)},B=a=>{var s=F();r(a,s)};l(_,a=>{f(()=>U?.info&&W.length>0)?a(A):a(B,!1)}),h(X),r(n,X),o()}export{K as component};
