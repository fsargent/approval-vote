import{aK as a,aO as s,aT as e,aV as t,aX as i,aY as v,bu as n,a$ as l,aP as r,b2 as o,b0 as d,aU as c,aW as b,b1 as w,bk as p,bb as f,b4 as h,bv as m,bw as g,b5 as u,bm as $}from"../chunks/B6VyJckD.js";var x=e('<div class="office svelte-bs0w8t"> </div>'),k=e('<div class="result-row svelte-bs0w8t"><div></div> <div><div class="candidate-name svelte-bs0w8t"> </div> <div class="percentage-container svelte-bs0w8t"><div class="percentage svelte-bs0w8t"> </div> <div class="approval svelte-bs0w8t">approval</div></div></div></div>'),N=e('<div class="header svelte-bs0w8t"><div class="watermark svelte-bs0w8t"> </div> <canvas width="120" height="120" class="qr-code svelte-bs0w8t"></canvas> <div class="jurisdiction svelte-bs0w8t"> </div> <!> <div class="election svelte-bs0w8t"> </div></div> <div class="results svelte-bs0w8t"></div>',1),j=e('<div class="content"><p>Election not found</p></div>'),M=e('<div class="card svelte-bs0w8t"><!></div>');function C(e,C){a(C,!0);const q=o(()=>C.data.report);let z;s(()=>{const a=`https://approval.vote/report/${C.data.path}`;n.toCanvas(z,a,{width:120,margin:1,color:{dark:"#666666",light:"#ffffff"}})});const E=o(()=>r(q).candidates.map(a=>({name:a.name,percentage:(a.votes/r(q).ballotCount*100).toFixed(1),votes:a.votes,winner:a.winner})).sort((a,s)=>s.votes-a.votes)),F=o(()=>Math.min(180,Math.max(120,600/(r(E).length+2)))),K=o(()=>(600-r(F))/r(E).length),O=o(()=>Math.min(2.5,Math.max(1,8/r(E).length)));var P=M(),T=l(P),U=a=>{var s=N(),e=c(s),v=l(e),n=l(v);d(v);var o=b(v,2);w(o,a=>z=a,()=>z);var j=b(o,2),M=l(j,!0);d(j);var P=b(j,2),T=a=>{var s=x(),e=l(s,!0);d(s),h(()=>u(e,r(q).info.officeName)),i(a,s)};t(P,a=>{r(q).info.officeName!==r(q).info.jurisdictionName&&a(T)});var U=b(P,2),V=l(U);d(U),d(e);var W=b(e,2);p(W,21,()=>r(E),$,(a,s)=>{var e=k(),t=l(e);let v;var n=b(t,2);let o;var c=l(n),w=l(c,!0);d(c);var p=b(c,2),$=l(p),x=l($);d($),f(2),d(p),d(n),d(e),h(()=>{m(e,`height: ${r(K)??""}px; font-size: ${r(O)??""}rem;`),v=g(t,1,"background-fill svelte-bs0w8t",null,v,{winner:r(s).winner}),m(t,`width: ${r(s).percentage??""}%`),o=g(n,1,"winner-stats svelte-bs0w8t",null,o,{winner:r(s).winner}),u(w,r(s).name),u(x,`${r(s).percentage??""}%`)}),i(a,e)}),d(W),h(a=>{m(e,`height: ${r(F)??""}px`),u(n,`approval.vote/${C.data.path??""}`),u(M,r(q).info.jurisdictionName),u(V,`${r(q).info.electionName??""} (${a??""})`)},[()=>r(q).info.date.slice(0,4)]),i(a,s)},V=a=>{var s=j();i(a,s)};t(T,a=>{r(q)?.info&&r(E).length>0?a(U):a(V,!1)}),d(P),i(e,P),v()}export{C as component};
