import{aJ as t,bz as e,ba as a,bi as r,b3 as o,aW as n,aX as s,a_ as i,bk as l,a$ as v,aV as d,bA as c,aO as p,by as u,bB as g,b4 as m,bC as f,bD as h,aY as b,aT as w,aU as $,b1 as y,aS as C,bx as A,b2 as x,bE as L,b9 as j,b8 as D,b6 as N,bg as P}from"../chunks/C9SkqQJP.js";var T=e('<g><text font-size="90%" text-anchor="end" dominant-baseline="middle"> </text><g><rect class="votes svelte-a7xju3"></rect></g><text font-size="90%" dominant-baseline="middle"> </text></g>'),O=e('<svg width="100%"><g></g></svg>');function M(t,e){if(null===e)return;f(t,{content:e,allowHTML:!0,theme:"light-border",plugins:[h],followCursor:!0})}var F=C('<td class="colLabel approval-col-label svelte-fan315"><div class="svelte-fan315"> </div></td>'),S=C('<td class="entry svelte-fan315"><!></td>'),E=C('<tr><td class="rowLabel svelte-fan315"> <div class="voter-count svelte-fan315"> </div></td><!></tr>'),k=C('<table class="svelte-fan315"><tbody><tr><td></td><td class="colsLabel svelte-fan315">Number of Candidates Approved</td></tr><tr><td class="rowsLabel svelte-fan315"><div class="svelte-fan315">Candidate</div></td><td></td><!></tr><!></tbody></table>');var B=C('<td class="colLabel svelte-1ncug9c"><div class="svelte-1ncug9c"> </div></td>'),I=C('<td class="entry svelte-1ncug9c"><!></td>'),V=C('<tr><td class="rowLabel svelte-1ncug9c"> </td><!></tr>'),z=C('<table class="svelte-1ncug9c"><tbody><tr><td></td><td class="colsLabel svelte-1ncug9c">Also approved</td></tr><tr><td class="rowsLabel svelte-1ncug9c"><div class="svelte-1ncug9c">Approved</div></td><td></td><!></tr><!></tbody></table>');function J(e,u){t(u,!0);const g=y(()=>()=>{var t;if(null==(t=u.votingPatterns)?void 0:t.candidateApprovalDistributions){return u.candidates.map(t=>{var e;const a=null==(e=u.votingPatterns.candidateApprovalDistributions)?void 0:e[t];return{name:t,votes:a?Object.values(a).reduce((t,e)=>t+e,0):0}}).sort((t,e)=>e.votes-t.votes).map(t=>t.name)}return[...u.candidates]}),f=y(()=>()=>({rows:p(g)().map((t,e)=>e),cols:p(g)().map((t,e)=>e),entries:p(g)().map((t,e)=>p(g)().map((a,r)=>{if(e===r)return null;const o=u.coApprovals.find(e=>e.candidateA.toLowerCase()===t.toLowerCase()&&e.candidateB.toLowerCase()===a.toLowerCase());return o?{frac:o.coApprovalRate/100,numerator:o.coApprovalCount,denominator:Math.round(o.coApprovalCount/(o.coApprovalRate/100))}:null}))})),h=y(()=>()=>{let t=0;return p(f)().entries.forEach(e=>{e.forEach(e=>{e&&e.frac>t&&(t=e.frac)})}),t});var b=z(),w=i(b),C=i(w),L=d(i(C));v(C);var j=d(C),D=i(j),N=d(D,2);r(N,17,()=>p(g)(),l,(t,e)=>{var a=B(),r=i(a),s=i(r,!0);v(r),v(a),o(()=>m(s,p(e))),n(t,a)}),v(j);var P=d(j);r(P,17,()=>p(g)(),l,(t,e,a)=>{var s=V(),u=i(s),b=i(u,!0);v(u);var w=d(u);r(w,17,()=>p(g)(),l,(t,r,s)=>{var l=I();const d=y(()=>p(f)().entries[a][s]);var u=i(l),g=t=>{var e=x();o(t=>m(e,`${t??""}%`),[()=>Math.round(1e3*p(d).frac)/10]),n(t,e)},b=t=>{var e=x("—");n(t,e)};$(u,t=>{p(d)?t(g):t(b,!1)}),v(l),c(l,(t,e)=>null==M?void 0:M(t,e),()=>p(d)?function(t,e,a){return`${(100*a.frac).toFixed(1)}% of ${t} voters also approved ${e} (${a.numerator.toLocaleString()} of ${a.denominator.toLocaleString()})`}(p(e),p(r),p(d)):null),o(t=>A(l,t),[()=>{return p(d)?"background: "+(t=p(d).frac,`hsl(99, 41%, ${function(t,e,a){return t*(1-a)+e*a}(97,65,p(h)()>0?t/p(h)():0)}%)`):"";var t}]),n(t,l)}),v(s),o(()=>m(b,p(e))),n(t,s)}),v(w),v(b),o((t,e)=>{a(L,"colspan",t),a(D,"rowspan",e)},[()=>p(g)().length,()=>p(g)().length+1]),n(e,b),s()}var U=C("<a> </a>"),H=C("<strong> </strong>"),Y=C(", and <strong> </strong>",1),_=C(", <strong> </strong>",1),R=C('<div class="row"><div class="leftCol"><h2>Approval Distribution</h2> <p>This shows how many candidates voters approved, both overall and broken down by\n      each candidate\'s supporters. This reveals whether some candidates attracted voters\n      who approved multiple candidates versus those who approved fewer candidates.\n      In approval voting, voters can select as many candidates as they wish.</p></div> <div class="rightCol"><!></div></div> <div class="row"><div class="leftCol"><h2>Co-Approval Matrix</h2> <p>For every pair of candidates, this table shows the fraction of voters who\n      approved one candidate that also approved the other. This reveals voting\n      patterns and candidate coalitions.</p></div> <div class="rightCol"><!></div></div>',1),W=C('<div class="row"><p class="description"></p> <div class="electionHeader"><h1><a>approval.vote</a> // <strong> </strong> </h1></div></div> <div class="row"><div class="leftCol"><p>The <!> was held on <strong> </strong>. <!> <!> <strong> </strong> <!>. <!></p> <p>There were <strong> </strong> ballots, with <strong> </strong> approvals. There was an average of <strong> </strong> approvals per ballot in this race.</p></div> <div class="rightCol"><!></div></div> <!>',1);function X(e,C){t(C,!0),L("candidates",{getCandidate:function(t){return C.report.candidates[t]}});const N=C.report.candidates.map(t=>t.votes).reduce((t,e)=>t+e),P=C.report.candidates.filter(t=>!t.writeIn).length;var B=W(),I=w(B),V=d(i(I),2),z=i(V),X=i(z),q=d(X,2),G=i(q,!0);v(q);var K=d(q);v(z),v(V),v(I);var Q=d(I,2),Z=i(Q),tt=i(Z),et=d(i(tt)),at=t=>{var e=U(),r=i(e);v(e),o(()=>{a(e,"href",C.report.info.website),m(r,`${C.report.info.jurisdictionName??""}\n          ${C.report.info.electionName??""}`)}),n(t,e)},rt=t=>{var e=x();o(()=>m(e,`${C.report.info.jurisdictionName??""} ${C.report.info.electionName??""}`)),n(t,e)};$(et,t=>{C.report.info.website?t(at):t(rt,!1)});var ot=d(et,2),nt=i(ot,!0);v(ot);var st=d(ot,2);r(st,17,()=>{return 1==(t=C.report.candidates).length?[C.report.candidates[0]]:t.filter(t=>!0===t.winner);var t},l,(t,e,a)=>{var r=b(),s=w(r),l=t=>{var a=H(),r=i(a,!0);v(a),o(()=>m(r,p(e).name)),n(t,a)},c=t=>{var r=b(),s=w(r),l=t=>{var a=Y(),r=d(w(a)),s=i(r,!0);v(r),o(()=>m(s,p(e).name)),n(t,a)},c=t=>{var a=_(),r=d(w(a)),s=i(r,!0);v(r),o(()=>m(s,p(e).name)),n(t,a)};$(s,t=>{a==C.report.winners.length-1?t(l):t(c,!1)},!0),n(t,r)};$(s,t=>{0==a?t(l):t(c,!1)}),n(t,r)});var it=d(st,2),lt=t=>{var e=x("was the winner out of");n(t,e)},vt=t=>{var e=x("were the winners out of");n(t,e)};$(it,t=>{1==C.report.winners.length?t(lt):t(vt,!1)});var dt=d(it,2),ct=i(dt,!0);v(dt);var pt=d(dt,2),ut=t=>{var e=x("candidate");n(t,e)},gt=t=>{var e=x("candidates");n(t,e)};$(pt,t=>{1==P?t(ut):t(gt,!1)});var mt=d(pt,2),ft=t=>{var e=x();o(()=>m(e,C.report.info.notes)),n(t,e)};$(mt,t=>{C.report.info.notes&&t(ft)}),v(tt);var ht=d(tt,2),bt=d(i(ht)),wt=i(bt,!0);v(bt);var $t=d(bt,2),yt=i($t,!0);v($t);var Ct=d($t,2),At=i(Ct,!0);v(Ct),D(),v(ht),v(Z);var xt=d(Z,2);!function(e,b){function w(t,e){null!==e&&f(t,{content:e,allowHTML:!0,theme:"light-border",plugins:[h],followCursor:!0})}t(b,!0);const $=[...b.report.candidates].sort((t,e)=>e.votes-t.votes),y=Math.max(...$.map(t=>t.votes)),C=b.report.ballotCount,A=420/y,x=24*$.length;var L=O(),j=i(L);a(j,"transform","translate(130 0)"),r(j,21,()=>$,l,(t,e,r)=>{var s=T();a(s,"transform",`translate(0 ${24*(r+.5)})`);var l=i(s),f=i(l,!0);v(l);var h=d(l);a(h,"transform","translate(5 -8)");var b=i(h);a(b,"height",14),c(b,(t,e)=>null==w?void 0:w(t,e),()=>`<strong>${p(e).name}</strong>\n            received <strong>${p(e).votes.toLocaleString()}</strong> votes, ${(p(e).votes/C*100).toFixed(1)}% of the total ballots cast.</g>`),v(h);var $=d(h),y=i($);v($),v(s),o(t=>{u(s,0,g(!0===p(e).winner?"":"eliminated"),"svelte-a7xju3"),m(f,p(e).name),a(b,"width",A*p(e).votes),a($,"x",10+A*p(e).votes),m(y,`${t??""}%`)},[()=>(p(e).votes/C*100).toFixed(1)]),n(t,s)}),v(j),v(L),o(()=>a(L,"viewBox",`0 0 600 ${x}`)),n(e,L),s()}(i(xt),{get report(){return C.report}}),v(xt),v(Q);var Lt=d(Q,2),jt=e=>{var f=R(),h=w(f),L=d(i(h),2),j=i(L);{let e=y(()=>C.report.candidates.map(t=>t.name));!function(e,f){t(f,!0);const h=y(()=>()=>{var t;return(null==(t=f.votingPatterns)?void 0:t.candidateApprovalDistributions)?f.candidates.map(t=>{var e;const a=null==(e=f.votingPatterns.candidateApprovalDistributions)?void 0:e[t];return{name:t,votes:a?Object.values(a).reduce((t,e)=>t+e,0):0}}).sort((t,e)=>e.votes-t.votes).map(t=>t.name):[...f.candidates]}),C=y(()=>()=>{var t,e;const a=[];if((null==(t=f.votingPatterns)?void 0:t.approvalDistribution)&&(null==(e=f.votingPatterns)?void 0:e.candidateApprovalDistributions)){const t={},e=f.votingPatterns.totalBallots;Object.entries(f.votingPatterns.approvalDistribution).forEach(([a,r])=>{const o=parseInt(a);t[o]={count:r,percentage:r/e*100}}),a.push({candidateName:"All Candidates",isOverall:!0,totalVoters:e,distributions:t});for(const r of p(h)()){const t=f.votingPatterns.candidateApprovalDistributions[r];if(!t)continue;const e=Object.values(t).reduce((t,e)=>t+e,0),o={};Object.entries(t).forEach(([t,a])=>{const r=parseInt(t);o[r]={count:a,percentage:a/e*100}}),a.push({candidateName:r,isOverall:!1,totalVoters:e,distributions:o})}}return a}),L=y(()=>()=>{var t;let e=0;return(null==(t=f.votingPatterns)?void 0:t.approvalDistribution)&&Object.keys(f.votingPatterns.approvalDistribution).forEach(t=>{e=Math.max(e,parseInt(t))}),e});var j=b(),D=w(j),N=t=>{var e=k();const s=y(()=>p(C)()),f=y(()=>p(L)());var h=i(e),b=i(h),w=d(i(b));v(b);var j=d(b),D=i(j),N=d(D,2);r(N,17,()=>Array.from({length:p(f)},(t,e)=>e+1),l,(t,e)=>{var a=F(),r=i(a),s=i(r,!0);v(r),v(a),o(()=>m(s,p(e))),n(t,a)}),v(j);var P=d(j);r(P,17,()=>p(s),l,(t,e)=>{var a=E(),s=i(a),h=i(s),b=d(h),w=i(b);v(b),v(s);var y=d(s);r(y,17,()=>Array.from({length:p(f)},(t,e)=>e+1),l,(t,a)=>{var r=S(),s=i(r),l=t=>{var r=x();o(t=>m(r,`${t??""}%`),[()=>p(e).distributions[p(a)].percentage.toFixed(1)]),n(t,r)},d=t=>{var e=x("—");n(t,e)};$(s,t=>{p(e).distributions[p(a)]?t(l):t(d,!1)}),v(r),c(r,(t,e)=>null==M?void 0:M(t,e),()=>p(e).distributions[p(a)]?function(t,e){const a=t.distributions[e];return a?`${t.candidateName}: ${a.count.toLocaleString()} voters (${a.percentage.toFixed(1)}%) approved exactly ${e} candidate${1!==e?"s":""}`:""}(p(e),p(a)):null),o(()=>A(r,p(e).distributions[p(a)]?`background: hsl(99, 41%, ${97-.8*p(e).distributions[p(a)].percentage}%)`:"")),n(t,r)}),v(a),o(t=>{u(a,1,g(p(e).isOverall?"overall-separator":""),"svelte-fan315"),m(h,`${p(e).candidateName??""} `),m(w,`(${t??""} voters)`)},[()=>p(e).totalVoters.toLocaleString()]),n(t,a)}),v(h),v(e),o(()=>{a(w,"colspan",p(f)+1),a(D,"rowspan",p(s).length+1)}),n(t,e)};$(D,t=>{p(C)().length>0&&t(N)}),n(e,j),s()}(j,{get candidates(){return p(e)},get votingPatterns(){return C.report.votingPatterns}})}v(L),v(h);var D=d(h,2),N=d(i(D),2),P=i(N);{let t=y(()=>C.report.candidates.map(t=>t.name));J(P,{get coApprovals(){return C.report.coApprovals},get candidates(){return p(t)},get votingPatterns(){return C.report.votingPatterns}})}v(N),v(D),n(e,f)};$(Lt,t=>{C.report.coApprovals&&C.report.coApprovals.length>0&&C.report.votingPatterns&&t(jt)}),o((t,e,r,o,n)=>{a(X,"href",t),m(G,C.report.info.jurisdictionName),m(K,` ${C.report.info.officeName??""}`),m(nt,e),m(ct,P),m(wt,r),m(yt,o),m(At,n)},[()=>j("/"),()=>function(t){let e=new Date(t);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][e.getUTCMonth()]} ${e.getUTCDate()}, ${e.getUTCFullYear()}`}(C.report.info.date),()=>C.report.ballotCount.toLocaleString(),()=>N.toLocaleString(),()=>(N/C.report.ballotCount).toFixed(1)]),n(e,B),s()}var q=C('<meta name="twitter:card" content="summary_large_image"/> <meta name="twitter:site" content="@felixsargent"/> <meta name="twitter:creator" content="@felixsargent"/> <meta name="twitter:title"/> <meta name="twitter:description"/> <meta name="twitter:image"/> <meta name="twitter:image:alt" content="Election results visualization showing approval voting outcomes"/> <meta property="og:type" content="article"/> <meta property="og:url"/> <meta property="og:title"/> <meta property="og:description"/> <meta property="og:image"/>',1),G=C('<div class="wide container"><!> <hr/> <div class="row"><p style="font-style: italic;">This report was generated by <a>approval.vote</a> and may be reproduced under <a href="https://creativecommons.org/licenses/by/2.0/">CC-BY</a>. Learn more <a>about approval.vote</a>. <span style="margin-left: 1em;"><a>View card image →</a></span></p></div></div> <a style="display:none;">card</a>',1);function K(e,r){t(r,!0);let l=r.data.report,c=r.data.path;var p=G();N(t=>{var e=q(),r=d(w(e),6),s=d(r,2),i=d(s,2),v=d(i,6),p=d(v,2),u=d(p,2),g=d(u,2);o((t,e,o)=>{P.title=`approval.vote: ${l.info.jurisdictionName??""} / ${l.info.name??""} / ${t??""}`,a(r,"content",`${l.info.jurisdictionName??""} / ${l.info.name??""}`),a(s,"content",`Detailed approval voting election results for ${l.info.jurisdictionName??""} ${l.info.name??""} (${e??""})`),a(i,"content",`https://approval.vote/images/${c??""}.png`),a(v,"content",`https://approval.vote/report/${c??""}`),a(p,"content",`${l.info.jurisdictionName??""} / ${l.info.name??""}`),a(u,"content",`Detailed approval voting election results for ${l.info.jurisdictionName??""} ${l.info.name??""} (${o??""})`),a(g,"content",`https://approval.vote/images/${c??""}.png`)},[()=>l.info.date.slice(0,4),()=>l.info.date.slice(0,4),()=>l.info.date.slice(0,4)]),n(t,e)});var u=w(p),g=i(u);X(g,{get report(){return l}});var m=d(g,4),f=i(m),h=d(i(f)),b=d(h,4),$=d(b,2),y=i($);v($),v(f),v(m),v(u);var C=d(u,2);o((t,e,r,o)=>{a(h,"href",t),a(b,"href",e),a(y,"href",r),a(C,"href",o)},[()=>j("/"),()=>j("/about"),()=>j(`/images/${c}.png`),()=>j(`/card/${c}`)]),n(e,p),s()}export{K as component};
