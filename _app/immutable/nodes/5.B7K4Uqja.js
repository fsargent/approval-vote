import{aJ as a,aK as s,aN as e,bs as t,bt as i,bd as v,aS as n,aU as l,aW as r,aX as o,bu as d,aO as c,bv as b,aQ as w,a_ as p,bw as h,a$ as f,aT as m,aV as g,b0 as u,bj as $,b9 as x,b3 as k,bx as j,by as M,b4 as N,bk as C}from"../chunks/C3yF-ZjL.js";var y=n('<div class="result-row svelte-bs0w8t"><div></div> <div><div class="candidate-name svelte-bs0w8t"> </div> <div class="percentage-container svelte-bs0w8t"><div class="percentage svelte-bs0w8t"> </div> <div class="approval svelte-bs0w8t">approval</div></div></div></div>'),z=n('<div class="header svelte-bs0w8t"><div class="source-info svelte-bs0w8t"><div class="watermark svelte-bs0w8t">approval.vote</div> <canvas width="48" height="48" class="svelte-bs0w8t"></canvas></div> <div class="jurisdiction svelte-bs0w8t"> </div> <div class="office svelte-bs0w8t"> </div> <div class="election svelte-bs0w8t"> </div></div> <div class="results svelte-bs0w8t"></div>',1),E=n('<div class="content"><p>Election not found</p></div>'),F=n('<div class="card svelte-bs0w8t"><!></div>');function J(n,J){a(J,!1);const K=b(),O=b(),Q=b();let S=s(J,"data",8);const T=S().report;let U=b();e(()=>{const a=`https://approval.vote/report/${S().path}`;d.toCanvas(c(U),a,{width:48,margin:0,color:{dark:"#666666",light:"#ffffff"}})});const V=T.candidates.map(a=>({name:a.name,percentage:(a.votes/T.ballotCount*100).toFixed(1),votes:a.votes,winner:a.winner})).sort((a,s)=>s.votes-a.votes);t(()=>{},()=>{w(K,Math.min(180,Math.max(120,600/(V.length+2))))}),t(()=>c(K),()=>{w(O,(600-c(K))/V.length)}),t(()=>{},()=>{w(Q,Math.min(2.5,Math.max(1,8/V.length)))}),i(),v();var W=F(),X=p(W),_=a=>{var s=z(),e=m(s),t=p(e),i=g(p(t),2);u(i,a=>w(U,a),()=>c(U)),f(t);var v=g(t,2),n=p(v,!0);f(v);var l=g(v,2),o=p(l,!0);f(l);var d=g(l,2),b=p(d);f(d),f(e);var E=g(e,2);$(E,5,()=>V,C,(a,s)=>{var e=y(),t=p(e);let i;var v=g(t,2);let n;var l=p(v),o=p(l,!0);f(l);var d=g(l,2),b=p(d),w=p(b);f(b),x(2),f(d),f(v),f(e),k((a,l)=>{j(e,`height: ${c(O)??""}px; font-size: ${c(Q)??""}rem;`),i=M(t,1,"background-fill svelte-bs0w8t",null,i,a),j(t,`width: ${c(s),h(()=>c(s).percentage)??""}%`),n=M(v,1,"winner-stats svelte-bs0w8t",null,n,l),N(o,(c(s),h(()=>c(s).name))),N(w,`${c(s),h(()=>c(s).percentage)??""}%`)},[()=>({winner:c(s).winner}),()=>({winner:c(s).winner})]),r(a,e)}),f(E),k(a=>{j(e,`height: ${c(K)??""}px`),N(n,h(()=>T.info.jurisdictionName)),N(o,h(()=>T.info.officeName)),N(b,`${h(()=>T.info.electionName)??""} (${a??""})`)},[()=>h(()=>T.info.date.slice(0,4))]),r(a,s)},q=a=>{var s=E();r(a,s)};l(X,a=>{h(()=>T?.info&&V.length>0)?a(_):a(q,!1)}),f(W),r(n,W),o()}export{J as component};
