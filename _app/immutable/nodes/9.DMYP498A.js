import"../chunks/Bzak7iHL.js";import"../chunks/CFNB6wrF.js";import{t as D,o as ct,q as pt,ao as Gt,aZ as Kt,A as dt,a9 as Ut,ak as Jt,aI as Yt,aH as Qt,x as vt,V as Zt,v as ei,B as Me,p as ti,a_ as $,a$ as ii,f,d as Xe,a as h,b as oi,g as e,$ as ai,b0 as mt,s as r,c as s,k as q,m as V,r as a,I as d,n as Ce,b1 as si,b2 as T}from"../chunks/PHD3N2Rs.js";import{s as x}from"../chunks/B7QqYUnY.js";import{i as _}from"../chunks/DqrgcXKV.js";import{e as U,i as J}from"../chunks/C4VXQubT.js";import{h as ri}from"../chunks/CixX4u-J.js";import{r as ae,s as fe}from"../chunks/Fn-hJ4_R.js";import{s as Y}from"../chunks/CKAra7_i.js";import{e as k}from"../chunks/M7ipwYIV.js";import{s as H}from"../chunks/sMSkZIxr.js";import{a as Pe,c as ut}from"../chunks/Dv9AiSJp.js";import{i as ni}from"../chunks/COWUNHoK.js";import{b as li}from"../chunks/uKSa1-0K.js";function ht(Te,qe,Q=!1,se=!1,Ie=!1){var re=Te,Z="";D(()=>{var B=Gt;if(Z===(Z=qe()??"")){ct&&pt();return}if(B.nodes_start!==null&&(Kt(B.nodes_start,B.nodes_end),B.nodes_start=B.nodes_end=null),Z!==""){if(ct){dt.data;for(var R=pt(),X=R;R!==null&&(R.nodeType!==Ut||R.data!=="");)X=R,R=Jt(R);if(R===null)throw Yt(),Qt;vt(dt,X),re=Zt(R);return}var b=Z+"";Q?b=`<svg>${b}</svg>`:se&&(b=`<math>${b}</math>`);var o=ei(b);if((Q||se)&&(o=Me(o)),vt(Me(o),o.lastChild),Q||se)for(;Me(o);)re.before(Me(o));else re.before(o)}})}var ci=f('<meta name="description" content="Interactive tool to design and analyze custom voting methods. Mix and match ballot types, tabulation methods, and multi-winner options to create your ideal voting system."/>'),pi=f('<button><div class="option-name svelte-1f2xdbt"> </div> <div class="option-description svelte-1f2xdbt"> </div></button>'),di=f('<button><div class="option-name svelte-1f2xdbt"> </div> <div class="option-description svelte-1f2xdbt"> </div></button>'),vi=f('<div class="sub-options svelte-1f2xdbt"><label class="svelte-1f2xdbt">Score Range: <input type="number" min="-10" max="0" style="width: 60px;" class="svelte-1f2xdbt"/> to <input type="number" min="1" max="10" style="width: 60px;" class="svelte-1f2xdbt"/></label> <label class="svelte-1f2xdbt"><input type="checkbox"/> Allow negative scores</label></div>'),mi=f('<button><div class="option-name svelte-1f2xdbt"> </div> <div class="option-description svelte-1f2xdbt"> </div></button>'),ui=f('<div class="sub-options svelte-1f2xdbt"><label class="svelte-1f2xdbt">Custom maximum: <input type="number" min="1" max="20" style="width: 80px;" class="svelte-1f2xdbt"/> </label></div>'),hi=f('<section class="config-section svelte-1f2xdbt"><h2 class="svelte-1f2xdbt">üî¢ Choice Limitations</h2> <p class="section-description svelte-1f2xdbt">How many candidates can voters select?</p> <div class="option-grid svelte-1f2xdbt"></div> <!></section>'),bi=f('<button><div class="option-name svelte-1f2xdbt"> </div> <div class="option-description svelte-1f2xdbt"> </div></button>'),fi=f('<section class="config-section svelte-1f2xdbt"><h2 class="svelte-1f2xdbt">üî¢ Tabulation Method</h2> <p class="section-description svelte-1f2xdbt">How are votes counted to determine winners?</p> <div class="option-grid svelte-1f2xdbt"></div></section>'),yi=f('<button><div class="option-name svelte-1f2xdbt"> </div> <div class="option-description svelte-1f2xdbt"> </div></button>'),gi=f('<div class="slider-section svelte-1f2xdbt"><label class="svelte-1f2xdbt">Single-winner seats: <strong> </strong> <input type="range" min="0" max="100" step="5" class="proportion-slider svelte-1f2xdbt"/> <div class="slider-labels svelte-1f2xdbt"><span>All List (0%)</span> <span>Mixed (50%)</span> <span>All Districts (100%)</span></div></label></div>'),xi=f('<div class="sub-options svelte-1f2xdbt"><div class="toggle-section svelte-1f2xdbt"><label class="toggle-label svelte-1f2xdbt"><input type="checkbox" class="svelte-1f2xdbt"/> <span class="toggle-text svelte-1f2xdbt">Enable mixed member system</span></label></div> <!></div>'),Si=f('<section class="config-section svelte-1f2xdbt"><h2 class="svelte-1f2xdbt">üó≥Ô∏è Party-Based Method Options</h2> <div class="sub-options svelte-1f2xdbt"><p><strong>List Type:</strong></p> <div class="option-grid svelte-1f2xdbt"></div></div> <!></section>'),wi=f('<span class="proportional-badge svelte-1f2xdbt" title="This is a proportional representation method that ensures fair party/group representation">‚öñÔ∏è</span>'),_i=f('<span class="proportional-badge svelte-1f2xdbt" title="This is a semi-proportional method that provides some fairness but not full proportional representation">‚öñÔ∏è‚ú®</span>'),Mi=f('<div class="info-panel svelte-1f2xdbt">How well the election results reflect the proportion of support for different groups or parties - higher scores mean seats are allocated more fairly based on vote share</div>'),Ci=f('<div class="info-panel svelte-1f2xdbt">How easy it is for voters to understand and use the voting method - considers ballot complexity, cognitive load, and learning curve</div>'),Pi=f('<div class="info-panel svelte-1f2xdbt">How resistant the method is to tactical voting and manipulation - higher scores mean voters can be more honest without being penalized</div>'),Ti=f('<div class="info-panel svelte-1f2xdbt">How well the elected candidates actually represent the preferences and will of the electorate - considers broad support, minority representation, and whether outcomes reflect voter intent</div>'),qi=f('<div class="method-scores svelte-1f2xdbt"><h3 class="svelte-1f2xdbt">System Analysis</h3> <div class="score-grid svelte-1f2xdbt"><div class="score-item svelte-1f2xdbt"><div class="score-bar-container svelte-1f2xdbt"><div class="score-label-container svelte-1f2xdbt"><span class="score-label svelte-1f2xdbt">Proportionality</span> <button type="button" class="info-button svelte-1f2xdbt" aria-label="more info about proportionality">‚ìò</button></div> <div class="score-bar svelte-1f2xdbt"><div class="score-fill svelte-1f2xdbt"></div> <span class="score-value svelte-1f2xdbt"> </span></div></div> <!></div> <div class="score-item svelte-1f2xdbt"><div class="score-bar-container svelte-1f2xdbt"><div class="score-label-container svelte-1f2xdbt"><span class="score-label svelte-1f2xdbt">Voter Simplicity</span> <button type="button" class="info-button svelte-1f2xdbt" aria-label="more info about voter simplicity">‚ìò</button></div> <div class="score-bar svelte-1f2xdbt"><div class="score-fill svelte-1f2xdbt"></div> <span class="score-value svelte-1f2xdbt"> </span></div></div> <!></div> <div class="score-item svelte-1f2xdbt"><div class="score-bar-container svelte-1f2xdbt"><div class="score-label-container svelte-1f2xdbt"><span class="score-label svelte-1f2xdbt">Strategy Resistance</span> <button type="button" class="info-button svelte-1f2xdbt" aria-label="more info about strategy resistance">‚ìò</button></div> <div class="score-bar svelte-1f2xdbt"><div class="score-fill svelte-1f2xdbt"></div> <span class="score-value svelte-1f2xdbt"> </span></div></div> <!></div> <div class="score-item svelte-1f2xdbt"><div class="score-bar-container svelte-1f2xdbt"><div class="score-label-container svelte-1f2xdbt"><span class="score-label svelte-1f2xdbt">Representation Quality</span> <button type="button" class="info-button svelte-1f2xdbt" aria-label="more info about representation quality">‚ìò</button></div> <div class="score-bar svelte-1f2xdbt"><div class="score-fill svelte-1f2xdbt"></div> <span class="score-value svelte-1f2xdbt"> </span></div></div> <!></div></div></div>'),ki=f('<div class="method-summary svelte-1f2xdbt"><!></div>'),Ri=f('<div class="method-critique svelte-1f2xdbt"><h3 class="svelte-1f2xdbt">Detailed Analysis</h3> <!></div>'),Vi=f('<div class="comparison-suggestion svelte-1f2xdbt"><button class="compare-button svelte-1f2xdbt"> </button> <p class="suggestion-description svelte-1f2xdbt"> </p></div>'),Di=f('<div class="comparison-suggestions svelte-1f2xdbt"><h3 class="svelte-1f2xdbt">ü§î Confused about similar methods?</h3> <!></div>'),Wi=f('<!> <div class="method-actions svelte-1f2xdbt"><a class="action-link svelte-1f2xdbt">Learn about voting systems</a> <a href="https://github.com/fsargent/approval-vote/issues" target="_blank" rel="noopener noreferrer" class="action-link github-link svelte-1f2xdbt">Found something wrong? File an issue on GitHub</a></div>',1),Li=f('<span class="current-badge svelte-1f2xdbt">Current</span>'),Ai=f('<div class="compatibility-compact svelte-1f2xdbt"><span class="compatibility-label svelte-1f2xdbt">Voting Machines:</span> <span> </span></div>'),$i=f('<button class="switch-method-button svelte-1f2xdbt">Switch to this method</button>'),Ei=f('<div><div class="card-header svelte-1f2xdbt"><h3 class="svelte-1f2xdbt"> </h3> <!></div> <div class="method-summary-compact svelte-1f2xdbt"><p class="svelte-1f2xdbt"><strong>What it does:</strong> </p></div> <div class="score-comparison svelte-1f2xdbt"><div class="score-row svelte-1f2xdbt"><span class="score-name svelte-1f2xdbt">Proportionality</span> <div class="score-bar-small svelte-1f2xdbt"><div class="score-fill-small svelte-1f2xdbt"></div></div> <span class="score-num svelte-1f2xdbt"> </span></div> <div class="score-row svelte-1f2xdbt"><span class="score-name svelte-1f2xdbt">Simplicity</span> <div class="score-bar-small svelte-1f2xdbt"><div class="score-fill-small svelte-1f2xdbt"></div></div> <span class="score-num svelte-1f2xdbt"> </span></div> <div class="score-row svelte-1f2xdbt"><span class="score-name svelte-1f2xdbt">Strategy Resist.</span> <div class="score-bar-small svelte-1f2xdbt"><div class="score-fill-small svelte-1f2xdbt"></div></div> <span class="score-num svelte-1f2xdbt"> </span></div> <div class="score-row svelte-1f2xdbt"><span class="score-name svelte-1f2xdbt">Representation</span> <div class="score-bar-small svelte-1f2xdbt"><div class="score-fill-small svelte-1f2xdbt"></div></div> <span class="score-num svelte-1f2xdbt"> </span></div></div> <div class="method-details svelte-1f2xdbt"><p class="svelte-1f2xdbt"><strong>Key Trade-offs:</strong> </p></div> <!> <!></div>'),Ni=f('<div class="comparison-overlay svelte-1f2xdbt"><div class="comparison-modal svelte-1f2xdbt"><div class="comparison-header svelte-1f2xdbt"><h2 class="svelte-1f2xdbt">Method Comparison</h2> <button class="close-button svelte-1f2xdbt">√ó</button></div> <div class="comparison-content svelte-1f2xdbt"><div class="comparison-grid svelte-1f2xdbt"></div></div></div></div>'),Oi=f('<div class="container wide-builder"><div class="description"><h1>Voting Method Builder</h1> <p class="subtitle svelte-1f2xdbt">Mix and match components to design your ideal voting system</p></div> <div class="builder-layout svelte-1f2xdbt"><div class="config-panel"><section class="config-section svelte-1f2xdbt"><h2 class="svelte-1f2xdbt">üèõÔ∏è Election Type</h2> <p class="section-description svelte-1f2xdbt">Are you electing one person or multiple people?</p> <div class="option-grid svelte-1f2xdbt"></div></section> <section class="config-section svelte-1f2xdbt"><h2 class="svelte-1f2xdbt">üìù Ballot Type</h2> <p class="section-description svelte-1f2xdbt">How do voters express their preferences?</p> <div class="option-grid svelte-1f2xdbt"></div> <!></section> <!> <!> <!></div> <div class="results-panel svelte-1f2xdbt"><div class="result-card svelte-1f2xdbt"><h2 class="method-name svelte-1f2xdbt"> <!></h2> <!> <!> <!> <!></div></div></div></div> <!>',1);function eo(Te,qe){ti(qe,!1);const Q=V(),se=V(),Ie=V(),re=V(),Z=V(),B=V(),R=V(),X=V(),b=V();let o=V({ballotType:null,limitedChoices:null,customLimit:3,tabulationMethod:null,numberOfSeats:1,hasParties:!0,canVoteForParties:!0,canVoteForCandidates:!0,hasPrimaries:!1,listType:null,mixedMember:!1,singleWinnerProportion:50,allowNegativeVotes:!1,scoreMin:0,scoreMax:5});const bt=[{id:"single",name:"Single Winner",description:"Choose one person for a role (President, Mayor, etc.)"},{id:"multi",name:"Multi Winner",description:"Choose multiple people for a body (Council, Parliament, etc.) or for Top X Primaries"}];function ft(t){return t===1?"single":"multi"}const je=[{id:"choose-x",name:"Choose X",description:"Pick candidates"},{id:"ranking",name:"Ranked",description:"Rank candidates in order of preference"},{id:"score",name:"Score",description:"Give each candidate a numerical score"}],Ge=[{id:"1",name:"Pick 1",description:"Must select exactly 1 (FPTP)"},{id:"custom",name:"Custom limit",description:"Set your own maximum"},{id:"unlimited",name:"As many as you like",description:"No limit on selections (approval voting)"}],E=[{id:"fptp",name:"First Past The Post",shortDescription:"Most votes wins",detailedCritique:"Simple and familiar. Severe vote splitting, spoiler effects, doesn't capture full voter preferences.",ballotType:"choose-x",choiceLimitation:"1",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:5,strategyResistance:0,representation:1},isProportional:!1,isSemiProportional:!1,category:"plurality",ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences."},tabulationCritique:"**FPTP:** Simple but suffers from vote splitting and spoiler effects with multiple candidates.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"approval",name:"Approval Voting",shortDescription:"Approve any number of candidates",detailedCritique:"Simple, eliminates vote splitting, encourages honest voting. No preference intensity.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:5,strategyResistance:5,representation:4},isProportional:!1,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**Most Approvals:** Simple and intuitive, encourages honest voting without strategic downsides.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"limited-voting-single",name:"Limited Voting (Single Winner)",shortDescription:"Pick up to X candidates, most votes wins",detailedCritique:"Voters can select up to a specified number of candidates (less than total candidates). The candidate with the most votes wins. Reduces vote splitting compared to FPTP.",ballotType:"choose-x",choiceLimitation:"custom",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:4,strategyResistance:2,representation:3},isProportional:!1,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-custom":"**Strengths:** Reduces vote splitting compared to FPTP, allows some preference expression. **Weaknesses:** Arbitrary limit may not reflect true preferences, still susceptible to strategic voting."},tabulationCritique:"**Limited Voting (Single Winner):** Allows voters to select multiple candidates but only elects one winner. Can reduce vote splitting when limit is greater than 1.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"irv",name:"IRV (Instant Runoff)",shortDescription:"Eliminate lowest, transfer votes",detailedCritique:"Eliminates some spoiler effects but not all. Can eliminate a candidate who is more popular than the winner.",ballotType:"ranking",choiceLimitation:"any",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!1,description:"Requires new voting machines and ballot software"},scores:{proportionality:0,simplicity:1,strategyResistance:3,representation:4},isProportional:!1,isSemiProportional:!1,category:"ranked",ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**IRV:** Good at eliminating spoiler effects but can eliminate Condorcet winners and has center-squeeze problems.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"borda",name:"Borda Count",shortDescription:"Points based on ranking position",detailedCritique:"Rewards broadly acceptable candidates but highly vulnerable to strategic manipulation and compromise.",ballotType:"ranking",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:1,strategyResistance:2,representation:3},isProportional:!1,isSemiProportional:!1,category:"ranked",ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**Borda:** Rewards broadly acceptable candidates but highly vulnerable to strategic nomination.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"condorcet",name:"Condorcet",shortDescription:"Head-to-head winner if exists",detailedCritique:"Theoretically optimal but can have no winner (Condorcet paradox) requiring complex tie-breaking.",ballotType:"ranking",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:1,strategyResistance:4,representation:4},isProportional:!1,isSemiProportional:!1,category:"ranked",ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**Condorcet:** Elects the candidate who beats all others head-to-head, but may have no winner in some cases.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"highest-total",name:"Highest Total Score",shortDescription:"Sum all scores, highest wins",detailedCritique:"Adds up all scores for each candidate - the candidate with the highest sum wins. Simple. Works best with many candidates and relatively few voters where expressivity helps prevent ties.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!1,description:"Requires new voting machines and ballot software"},scores:{proportionality:0,simplicity:4,strategyResistance:5,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Normalization issues between voters. When Min/Maxed then becomes approval voting","choose-x-custom":"**Strengths:** Reduces vote splitting compared to FPTP, allows some preference expression. **Weaknesses:** Arbitrary limit may not reflect true preferences."},tabulationCritique:"**Highest Total:** Adds up all scores for each candidate - the candidate with the highest sum wins. Simple. Works best with many candidates and relatively few voters where expressivity helps prevent ties.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"star",name:"STAR Voting",shortDescription:"Score then automatic runoff",detailedCritique:"Combines benefits of score voting with runoff security, eliminating strategic concerns. The scoring phase works best with many candidates and relatively few voters, while the runoff provides decisive results.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,votingMachineCompatibility:{existingMachines:!1,description:"Requires new voting machines and ballot software"},scores:{proportionality:0,simplicity:4,strategyResistance:4,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**STAR:** Combines benefits of score voting with runoff security, eliminating strategic concerns. The scoring phase works best with many candidates and relatively few voters, while the runoff provides decisive results.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"block-voting",name:"Block Voting",shortDescription:"Choose one, top candidates win multiple seats",detailedCritique:'Also called "Plurality-at-large". Voters choose one candidate, and the candidates with the most votes win seats. Simple but tends to give all seats to the most popular party or faction.',ballotType:"choose-x",choiceLimitation:"1",minSeats:2,maxSeats:"unlimited",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:5,strategyResistance:0,representation:1},isProportional:!1,isSemiProportional:!1,category:"plurality",ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences."},tabulationCritique:"**Block Voting:** Simple plurality system for multiple seats. Tends to give all seats to the most popular party - very poor minority representation.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"block-approval",name:"Block Approval Voting",shortDescription:"Approve any number, top candidates win multiple seats",detailedCritique:"Simple extension of approval to multiple winners but provides no proportional representation.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:2,maxSeats:"unlimited",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"},scores:{proportionality:0,simplicity:5,strategyResistance:5,representation:2},isProportional:!1,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**Block Approval:** Simple extension of approval voting to multiple seats. Better minority representation than Block Voting.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"limited-voting",name:"Limited Voting",shortDescription:"Voters pick fewer candidates than seats available",detailedCritique:'Also called "Block Voting with limitations." Voters can select up to a specific number of candidates (less than the total seats). Candidates with the most votes win. Provides some minority representation but not fully proportional.',ballotType:"choose-x",choiceLimitation:"custom",minSeats:2,maxSeats:"unlimited",scores:{proportionality:0,simplicity:4,strategyResistance:1,representation:3},isProportional:!1,isSemiProportional:!0,category:"approval",ballotTypeCritique:{"choose-x-custom":"**Strengths:** Reduces vote splitting compared to FPTP, allows some preference expression. **Weaknesses:** Arbitrary limit may not reflect true preferences, still susceptible to strategic voting."},tabulationCritique:"**Limited Voting:** Provides some minority representation but not fully proportional. Strategic nomination is important.",proportionalityDetails:"**Semi-Proportional:** Provides some minority representation but not full proportional representation."},{id:"cumulative-voting",name:"Cumulative Voting",shortDescription:"Voters get points equal to seats and distribute them freely",detailedCritique:"Voters receive a number of points equal to the number of seats and can distribute them among candidates however they choose, including giving multiple points to the same candidate. Semi-proportional system that allows minority representation.",ballotType:"choose-x",choiceLimitation:"custom",minSeats:2,maxSeats:"unlimited",scores:{proportionality:0,simplicity:3,strategyResistance:1,representation:3},isProportional:!1,isSemiProportional:!0,category:"approval",ballotTypeCritique:{"choose-x-custom":"**Strengths:** Reduces vote splitting compared to FPTP, allows some preference expression. **Weaknesses:** Arbitrary limit may not reflect true preferences, still susceptible to strategic voting."},tabulationCritique:"**Cumulative Voting:** Allows voters to distribute points strategically. Semi-proportional system that can provide minority representation with proper strategy.",proportionalityDetails:"**Semi-Proportional:** Provides some minority representation but not full proportional representation."},{id:"sntv",name:"SNTV (Single Non-Transferable Vote)",shortDescription:"Semi-proportional for choose-one ballots",detailedCritique:"Semi-proportional method for choose-one ballots. Requires strategic nomination by parties to achieve proportionality - too many candidates splits the vote, too few wastes votes.",ballotType:"choose-x",choiceLimitation:"1",minSeats:2,maxSeats:"unlimited",scores:{proportionality:3,simplicity:5,strategyResistance:2,representation:3},isProportional:!1,isSemiProportional:!0,category:"approval",ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences."},tabulationCritique:"**SNTV:** Semi-proportional method for choose-one ballots. Requires strategic nomination by parties to achieve proportionality - too many candidates splits the vote, too few wastes votes.",proportionalityDetails:"**Semi-Proportional:** Provides some minority representation but not full proportional representation."},{id:"satisfaction-approval",name:"Satisfaction Approval",shortDescription:"Semi-proportional splits votes equally",detailedCritique:"Semi-proportional system that splits each vote equally between all approved candidates. More proportional than block voting but requires strategic coordination - voters must know how many seats their party deserves and vote for exactly that many candidates. Vulnerable to 'wipeout' if strategy fails.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:2,maxSeats:"unlimited",scores:{proportionality:3,simplicity:5,strategyResistance:3,representation:4},isProportional:!1,isSemiProportional:!0,category:"approval",ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**Satisfaction Approval:** Semi-proportional system that splits each vote equally between all approved candidates. More proportional than block voting but requires strategic coordination - voters must know how many seats their party deserves and vote for exactly that many candidates. Vulnerable to 'wipeout' if strategy fails.",proportionalityDetails:"**Semi-Proportional:** Provides some minority representation but not full proportional representation."},{id:"spav",name:"SPAV (Sequential Proportional Approval)",shortDescription:"Proportional approval using sequential selection",detailedCritique:"Sequential Proportional Approval Voting that encourages diverse representation. Much more practical to implement than the theoretical PAV optimization.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:4,strategyResistance:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**SPAV:** Sequential Proportional Approval Voting that encourages diverse representation. Much more practical to implement than the theoretical PAV optimization.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},{id:"stv",name:"STV (Single Transferable Vote)",shortDescription:"Proportional ranked choice voting",detailedCritique:"Provides proportional representation with ranked ballots, maintaining local representation while ensuring diversity.",ballotType:"ranking",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:1,strategyResistance:3,representation:5},isProportional:!0,isSemiProportional:!1,category:"ranked",ballotTypeCritique:{ranking:"**Strengths:** Captures preference order, eliminates spoiler effect. **Weaknesses:** Can be complex for voters, may have non-monotonic results."},tabulationCritique:"**STV:** Provides proportional representation with ranked ballots, maintaining local representation while ensuring diversity.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},{id:"party-list-pr",name:"Party List PR",shortDescription:"Proportional seats by party vote share",detailedCritique:"Direct proportional representation based on party vote shares.",ballotType:"choose-x",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:4,strategyResistance:4,representation:5},isProportional:!0,isSemiProportional:!1,category:"mixed",hasVariants:!0,variants:{listType:!0},ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences.","choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**Party List PR:** Direct proportional representation based on party vote shares. Simple and effective for achieving proportionality.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability.",listTypeCritique:{closed:"**Closed Lists:** Give parties full control over candidate selection and ordering, which can strengthen party discipline but reduce voter choice.",open:"**Open Lists:** Allow voters to choose specific candidates within parties, increasing voter choice but potentially fragmenting party unity.",flexible:"**Flexible Lists:** Balance party control with voter choice, allowing both party and candidate votes to influence outcomes."},primaryCritique:{withPrimaries:"**Primary Elections:** Increase voter choice and party democracy but can favor extreme candidates, reduce general election competitiveness, and increase campaign costs. May lead to more polarized candidates who appeal to party bases rather than general electorate.",withoutPrimaries:"**No Primaries:** Parties select candidates internally (conventions, appointments, etc.). This gives party leadership more control but may reduce grassroots democracy and voter input in candidate selection."}},{id:"mmp",name:"MMP (Mixed Member Proportional)",shortDescription:"Combines districts with party lists",detailedCritique:"Combines single-winner districts with party lists to ensure proportionality while maintaining local representation.",ballotType:"choose-x",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",requiresParties:!0,scores:{proportionality:5,simplicity:3,strategyResistance:4,representation:5},isProportional:!0,isSemiProportional:!1,category:"mixed",hasVariants:!0,variants:{listType:!0,mixedMember:!0},ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences.","choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**MMP:** Combines single-winner districts with party lists to ensure proportionality while maintaining local representation.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability.",listTypeCritique:{closed:"**Closed Lists:** Give parties full control over candidate selection and ordering, which can strengthen party discipline but reduce voter choice.",open:"**Open Lists:** Allow voters to choose specific candidates within parties, increasing voter choice but potentially fragmenting party unity.",flexible:"**Flexible Lists:** Balance party control with voter choice, allowing both party and candidate votes to influence outcomes."},primaryCritique:{withPrimaries:"**Primary Elections:** Increase voter choice and party democracy but can favor extreme candidates, reduce general election competitiveness, and increase campaign costs. May lead to more polarized candidates who appeal to party bases rather than general electorate.",withoutPrimaries:"**No Primaries:** Parties select candidates internally (conventions, appointments, etc.). This gives party leadership more control but may reduce grassroots democracy and voter input in candidate selection."}},{id:"block-score",name:"Block Score Voting",shortDescription:"Highest total scores win multiple seats",detailedCritique:"Multi-winner extension of score voting where candidates with the highest total scores win seats. Simple but provides no proportional representation.",ballotType:"score",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:0,simplicity:5,strategyResistance:2,representation:2},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Block Score Voting:** Simple extension of score voting to multiple winners. Candidates with highest total scores win seats, but provides no proportional representation.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"equal-shares",name:"Method of Equal Shares",shortDescription:"Equal budget per voter",detailedCritique:"Ensures each voter gets an equal 'budget' of representation. Excellent proportionality and fairness, but complex for voters to understand. The detailed scoring works best with many candidates and relatively few voters.",ballotType:"score",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:3,strategyResistance:4,representation:5},isProportional:!0,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Method of Equal Shares:** Ensures each voter gets an equal 'budget' of representation. Excellent proportionality and fairness, but complex for voters to understand. The detailed scoring works best with many candidates and relatively few voters.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},{id:"pav",name:"PAV (Proportional Approval Voting)",shortDescription:"Optimal approval-based proportional representation",detailedCritique:"The theoretical optimum for proportional representation using approval ballots. Maximizes voter satisfaction but requires complex optimization algorithms that are computationally intensive for large elections.",ballotType:"choose-x",choiceLimitation:"unlimited",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:2,strategyResistance:4,representation:5},isProportional:!0,isSemiProportional:!1,category:"approval",ballotTypeCritique:{"choose-x-unlimited":"**Strengths:** Simple, eliminates vote splitting, encourages honest voting. **Weaknesses:** No preference intensity"},tabulationCritique:"**PAV:** The theoretical optimum for proportional representation using approval ballots. Maximizes voter satisfaction but requires complex optimization algorithms that are computationally intensive for large elections.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},{id:"star-pr",name:"STAR-PR",shortDescription:"Proportional STAR voting",detailedCritique:"Extends STAR voting to multi-winner elections by using proportional allocation. Combines the benefits of score voting expressiveness with proportional representation, but adds complexity to the tabulation process.",ballotType:"score",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:5,simplicity:3,strategyResistance:4,representation:5},isProportional:!0,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**STAR-PR:** Extends STAR voting to multi-winner elections by using proportional allocation. Combines the benefits of score voting expressiveness with proportional representation, but adds complexity to the tabulation process.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},{id:"allocated-score",name:"Allocated Score",shortDescription:"Practical proportional score voting",detailedCritique:"A practical implementation of proportional score voting that allocates candidates based on weighted scores. Simpler than Method of Equal Shares while still achieving good proportionality.",ballotType:"score",choiceLimitation:"any",minSeats:2,maxSeats:"unlimited",scores:{proportionality:4,simplicity:4,strategyResistance:3,representation:4},isProportional:!0,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Allocated Score:** A practical approach to proportional score voting that's easier to implement than Method of Equal Shares while maintaining good proportional outcomes.",proportionalityDetails:"**Proportional Representation:** Ensures fair party representation but may reduce local accountability."},{id:"range-voting",name:"Range Voting",shortDescription:"Pure score voting without runoff",detailedCritique:"Simple score voting where the candidate with the highest total score wins. More expressive than approval voting but vulnerable to strategic exaggeration and normalization issues between voters.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:4,strategyResistance:2,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Range Voting:** Simple score voting where the candidate with the highest total score wins. More expressive than approval voting but vulnerable to strategic exaggeration and normalization issues between voters.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"3-2-1-voting",name:"3-2-1 Voting",shortDescription:"Score 3-2-1, advance top 2, pick winner",detailedCritique:"Voters score candidates as Good (3), OK (2), or Bad (1). The two highest-scoring candidates advance to a runoff based on who is rated higher by more voters. Simple to understand and resistant to tactical voting.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:4,strategyResistance:4,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**3-2-1 Voting:** Simple to understand and resistant to tactical voting. Uses a constrained score range that's easy for voters to grasp.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"majority-judgment",name:"Majority Judgment",shortDescription:"Winner has highest median score",detailedCritique:"Uses the median (middle) score for each candidate rather than totals or averages. Highly resistant to strategic manipulation since extreme scores don't affect the median. Can lead to ties requiring complex tie-breaking rules.",ballotType:"score",choiceLimitation:"any",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:3,strategyResistance:5,representation:4},isProportional:!1,isSemiProportional:!1,category:"score",ballotTypeCritique:{score:"**Strengths:** Expresses preference intensity, highly expressive. **Weaknesses:** Strategic voting concerns, normalization issues between voters."},tabulationCritique:"**Majority Judgment:** Uses the median (middle) score for each candidate rather than totals or averages. This makes it highly resistant to strategic manipulation since extreme scores (very high or very low) don't affect the median. However, it can lead to ties when candidates have the same median, requiring complex tie-breaking rules. The detailed scoring is most valuable when there are many candidates to differentiate.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation."},{id:"top-two-runoff",name:"Top-Two Runoff",shortDescription:"Top 2 candidates advance to runoff election",detailedCritique:"Two-round system where if no candidate gets a majority, the top two candidates compete in a second election. Simple and familiar but can eliminate popular candidates in the first round.",ballotType:"choose-x",choiceLimitation:"1",minSeats:1,maxSeats:1,scores:{proportionality:0,simplicity:4,strategyResistance:1,representation:2},isProportional:!1,isSemiProportional:!1,category:"plurality",ballotTypeCritique:{"choose-x-1":"**Strengths:** Simple and familiar. **Weaknesses:** Severe vote splitting, spoiler effects, doesn't capture full voter preferences."},tabulationCritique:"**Top-Two Runoff:** Ensures the winner has majority support in the final round, but can eliminate popular candidates who don't make the top two.",proportionalityDetails:"**Non-Proportional Multi-Winner:** May lead to sweep victories and poor minority representation.",votingMachineCompatibility:{existingMachines:!0,description:"Compatible with existing voting machines"}}],ke=[{id:"closed",name:"Closed List",description:"Voters vote for parties, party decides candidate order"},{id:"open",name:"Open List",description:"Voters vote for individual candidates within parties"},{id:"flexible",name:"Flexible List",description:"Voters can vote for party or individual candidates"}];let Re=V([]);function Ke(t){return E.filter(i=>!(i.ballotType!==t.ballotType||i.choiceLimitation!=="any"&&i.choiceLimitation!==t.limitedChoices||t.numberOfSeats<i.minSeats||i.maxSeats!=="unlimited"&&t.numberOfSeats>i.maxSeats))}function yt(t){if(!t.ballotType)return"Select a ballot type to begin";if(!t.tabulationMethod){if(t.ballotType==="choose-x"){if(t.limitedChoices==="1")return"First Past The Post";if(t.limitedChoices==="unlimited")return"Approval Voting";if(t.limitedChoices==="custom")return`Limited Voting (${t.customLimit})`}return"Select a tabulation method"}const i=E.find(l=>l.id===t.tabulationMethod);if(!i)return"Unknown Method";let n=i.name;if(t.listType&&["party-list-pr","mmp"].includes(t.tabulationMethod)){const l=ke.find(c=>c.id===t.listType);l&&(n=`${l.name} ${n}`)}if(t.tabulationMethod==="mmp"&&t.mixedMember){const l=t.singleWinnerProportion,c=100-l;n+=` (${l}% districts, ${c}% list)`}return t.limitedChoices==="custom"&&t.customLimit!==3&&(n.includes(`(${t.customLimit})`)||(n+=` (${t.customLimit})`)),n}function gt(t){if(!t.ballotType)return"";let i="";const n=je.find(l=>l.id===t.ballotType);if(n&&(i+=`**Ballot Type:** ${n.description}`,t.ballotType==="score"&&(i+=` (${t.scoreMin} to ${t.scoreMax}`,t.allowNegativeVotes&&(i+=", negative scores allowed"),i+="). Score voting works best with many candidates and relatively few voters, where the expressivity helps prevent ties"),i+=`

`),t.limitedChoices&&t.limitedChoices!=="unlimited")if(t.limitedChoices==="custom")i+=`**Choice Limit:** Maximum of ${t.customLimit} candidate${t.customLimit===1?"":"s"}

`;else{const l=Ge.find(c=>c.id===t.limitedChoices);l&&(i+=`**Choice Limit:** ${l.description}

`)}if(t.tabulationMethod){const l=e(Re).find(v=>v.id===t.tabulationMethod);l&&(i+=`**Tabulation:** ${l.description}

`);const c=E.find(v=>v.id===t.tabulationMethod);if(c&&c.votingMachineCompatibility){const v=c.votingMachineCompatibility.existingMachines?"‚úÖ":"‚ùå";i+=`**Voting Machines:** ${v} ${c.votingMachineCompatibility.description}

`}}if(t.numberOfSeats===1)i+=`**Single-Winner Election:** Electing 1 seat

`;else{i+=`**Multi-Winner Election:** Electing ${t.numberOfSeats} seats

`;let l="**Party Structure:** Election has political parties. ";if(t.canVoteForParties&&t.canVoteForCandidates?l+="Voters can choose both parties and individual candidates.":t.canVoteForParties?l+="Voters choose parties only.":t.canVoteForCandidates&&(l+="Voters choose individual candidates within parties."),t.hasPrimaries?l+=" Parties select candidates through primary elections.":l+=" Parties select candidates through internal processes (conventions, appointments, etc.).",i+=l+`

`,["party-list-pr","mmp"].includes(t.tabulationMethod||"")){if(t.listType){const c=ke.find(v=>v.id===t.listType);c&&(i+=`**List Type:** ${c.description}

`)}if(t.tabulationMethod==="mmp"&&t.mixedMember){const c=t.singleWinnerProportion,v=100-c;i+=`**Mixed System:** ${c}% of seats elected in single-winner districts, ${v}% from party lists to ensure proportionality

`}}}return i.trim()}function xt(t){if(!t.ballotType||!t.tabulationMethod)return"";const i=E.find(l=>l.id===t.tabulationMethod);if(!i)return"";let n="";if(i.ballotTypeCritique){let l=t.ballotType;t.ballotType==="choose-x"&&(l=`choose-x-${t.limitedChoices||"unlimited"}`);const c=i.ballotTypeCritique[l]||i.ballotTypeCritique[t.ballotType]||i.ballotTypeCritique["choose-x-unlimited"];c&&(n+=c+`

`)}if(i.tabulationCritique&&(n+=i.tabulationCritique+`

`),t.numberOfSeats>1&&i.proportionalityDetails){if(n+=i.proportionalityDetails,t.listType&&i.listTypeCritique){const l=i.listTypeCritique[t.listType];l&&(n+=`

`+l)}if(t.tabulationMethod==="mmp"&&t.mixedMember){n+=`

`;const l=t.singleWinnerProportion;l>70?n+="**High District Proportion:** Maintains strong local representation but may reduce proportionality effectiveness.":l<30?n+="**High List Proportion:** Maximizes proportionality but may weaken local representation and accountability.":n+="**Balanced Mixed System:** Good compromise between local representation and proportionality."}if(t.hasParties&&i.primaryCritique){n+=`

`;const l=t.hasPrimaries?"withPrimaries":"withoutPrimaries",c=i.primaryCritique[l];c&&(n+=c)}}return n.trim()}function St(t){const i={proportionality:0,simplicity:0,strategyResistance:0,representation:0};if(!t.ballotType||!t.tabulationMethod)return i;const n=E.find(c=>c.id===t.tabulationMethod);if(!n)return i;const l={...n.scores};return t.numberOfSeats>1&&t.tabulationMethod==="block-approval"&&(l.representation=2),t.limitedChoices==="1"&&t.ballotType==="choose-x"&&(l.strategyResistance=0,l.representation=1),t.numberOfSeats===1&&(l.proportionality=0),l}function wt(t){if(t.numberOfSeats<=1)return!1;const i=E.find(n=>n.id===t.tabulationMethod);return(i==null?void 0:i.isProportional)||!1}function _t(t){if(t.numberOfSeats<=1)return!1;const i=E.find(n=>n.id===t.tabulationMethod);return(i==null?void 0:i.isSemiProportional)||!1}function Mt(t){t==="single"?I("numberOfSeats",1):t==="multi"&&I("numberOfSeats",10)}function I(t,i){if(T(o,e(o)[t]=i),t==="ballotType"&&(T(o,e(o).tabulationMethod=null),i==="choose-x"&&T(o,e(o).limitedChoices="unlimited")),t==="limitedChoices"&&i==="1"&&e(o).ballotType==="choose-x"&&T(o,e(o).tabulationMethod=e(o).numberOfSeats>1?"sntv":"fptp"),t==="ballotType"&&(i==="choose-x"?T(o,e(o).tabulationMethod=e(o).numberOfSeats>1?"spav":"approval"):i==="score"?T(o,e(o).tabulationMethod="highest-total"):i==="ranking"&&T(o,e(o).tabulationMethod=e(o).numberOfSeats>1?"stv":"irv")),t==="numberOfSeats"){const n=i>1;e(o).ballotType==="choose-x"?T(o,e(o).tabulationMethod=n?"spav":"approval"):e(o).ballotType==="ranking"?T(o,e(o).tabulationMethod=n?"stv":"irv"):e(o).ballotType==="score"&&T(o,e(o).tabulationMethod=n?"equal-shares":"highest-total"),n||(T(o,e(o).listType=null),T(o,e(o).mixedMember=!1),T(o,e(o).singleWinnerProportion=50))}}let j=V(null);function ye(t){q(j,e(j)===t?null:t)}function Ue(){q(j,null)}function Ct(t){t.key==="Escape"&&Ue()}let Ve=V(!1),De=V([]);function Pt(t){q(De,E.filter(i=>t.includes(i.id))),q(Ve,!0)}function We(){q(Ve,!1),q(De,[])}function Je(t){if(!E.find(P=>P.id===t.tabulationMethod))return[];const l=Ke(t).map(P=>P.id),c=[],v=P=>P.filter(L=>l.includes(L)),u=v(["equal-shares","star-pr","allocated-score","pav"]);u.includes(t.tabulationMethod||"")&&u.length>1&&c.push({title:"Proportional Score Methods",methods:u,description:"All provide proportional representation with score/approval ballots but use different algorithms"});const m=v(["block-score","equal-shares","star-pr","allocated-score"]);m.includes(t.tabulationMethod||"")&&m.length>1&&c.push({title:"Multi-Winner Score Methods",methods:m,description:"Different approaches to multi-winner elections with score ballots - from simple block voting to complex proportional systems"});const p=v(["highest-total","star","range-voting","3-2-1-voting","majority-judgment"]);p.includes(t.tabulationMethod||"")&&p.length>1&&c.push({title:"Single-Winner Score Methods",methods:p,description:"Different ways to count score ballots - from simple totals to complex runoffs"});const y=v(["fptp","approval","limited-voting-single","top-two-runoff"]);y.includes(t.tabulationMethod||"")&&y.length>1&&c.push({title:"Single-Winner Choose-X Methods",methods:y,description:"Different approaches to single-winner elections with choose-X ballots"});const g=v(["spav","pav","satisfaction-approval"]);g.includes(t.tabulationMethod||"")&&g.length>1&&c.push({title:"Approval-Based Proportional Methods",methods:g,description:"Ways to achieve proportional representation using approval ballots"});const w=v(["fptp","approval","limited-voting-single","top-two-runoff","block-voting","block-approval","limited-voting","cumulative-voting","sntv","satisfaction-approval","spav","pav"]);w.includes(t.tabulationMethod||"")&&w.length>1&&c.push({title:"Choose-X Methods",methods:w,description:"Different ways to count choose-X ballots - from simple plurality to complex proportional systems"});const M=v(["block-voting","block-approval","limited-voting","cumulative-voting","sntv","satisfaction-approval","spav","pav"]);M.includes(t.tabulationMethod||"")&&M.length>1&&c.push({title:"Multi-Winner Choose-X Methods",methods:M,description:"Different approaches to multi-winner elections with choose-X ballots - from simple block voting to proportional systems"});const C=v(["irv","borda","condorcet","stv"]);return C.includes(t.tabulationMethod||"")&&C.length>1&&c.push({title:"Ranked Choice Methods",methods:C,description:"Different algorithms for counting ranked ballots"}),c}$(()=>e(o),()=>{q(Q,ft(e(o).numberOfSeats))}),$(()=>e(o),()=>{q(se,e(o).ballotType==="ranking")}),$(()=>e(o),()=>{q(Ie,e(o).ballotType==="choose-x")}),$(()=>e(o),()=>{q(re,e(o).ballotType==="score")}),$(()=>e(o),()=>{q(Z,e(o).numberOfSeats>1)}),$(()=>e(o),()=>{const t=Ke(e(o));q(Re,t.map(i=>({id:i.id,name:i.name,description:i.shortDescription})))}),$(()=>e(o),()=>{q(B,yt(e(o)))}),$(()=>e(o),()=>{q(R,gt(e(o)))}),$(()=>e(o),()=>{q(X,xt(e(o)))}),$(()=>e(o),()=>{q(b,St(e(o)))}),ii(),ni();var Ye=Oi();ri(t=>{var i=ci();ai.title="Voting Method Builder - Create Your Custom Voting System - approval.vote",h(t,i)}),k("keydown",mt,Ct),k("click",mt,Ue);var Le=Xe(Ye),Qe=r(s(Le),2),Ae=s(Qe),$e=s(Ae),Ze=r(s($e),4);U(Ze,5,()=>bt,J,(t,i)=>{var n=pi();let l;var c=s(n),v=s(c,!0);a(c);var u=r(c,2),m=s(u,!0);a(u),a(n),D(p=>{l=Y(n,1,"option-button svelte-1f2xdbt",null,l,p),x(v,(e(i),d(()=>e(i).name))),x(m,(e(i),d(()=>e(i).description)))},[()=>({selected:e(Q)===e(i).id})]),k("click",n,()=>Mt(e(i).id)),h(t,n)}),a(Ze),a($e);var Ee=r($e,2),Ne=r(s(Ee),4);U(Ne,5,()=>je,J,(t,i)=>{var n=di();let l;var c=s(n),v=s(c,!0);a(c);var u=r(c,2),m=s(u,!0);a(u),a(n),D(p=>{l=Y(n,1,"option-button svelte-1f2xdbt",null,l,p),x(v,(e(i),d(()=>e(i).name))),x(m,(e(i),d(()=>e(i).description)))},[()=>({selected:e(o).ballotType===e(i).id})]),k("click",n,()=>I("ballotType",e(i).id)),h(t,n)}),a(Ne);var Tt=r(Ne,2);{var qt=t=>{var i=vi(),n=s(i),l=r(s(n));ae(l);var c=r(l,2);ae(c),a(n);var v=r(n,2),u=s(v);ae(u),Ce(),a(v),a(i),Pe(l,()=>e(o).scoreMin,m=>T(o,e(o).scoreMin=m)),Pe(c,()=>e(o).scoreMax,m=>T(o,e(o).scoreMax=m)),ut(u,()=>e(o).allowNegativeVotes,m=>T(o,e(o).allowNegativeVotes=m)),h(t,i)};_(Tt,t=>{e(o),d(()=>e(o).ballotType==="score")&&t(qt)})}a(Ee);var et=r(Ee,2);{var kt=t=>{var i=hi(),n=r(s(i),4);U(n,5,()=>Ge,J,(v,u)=>{var m=mi();let p;var y=s(m),g=s(y,!0);a(y);var w=r(y,2),M=s(w,!0);a(w),a(m),D(C=>{p=Y(m,1,"option-button small svelte-1f2xdbt",null,p,C),x(g,(e(u),d(()=>e(u).name))),x(M,(e(u),d(()=>e(u).description)))},[()=>({selected:e(o).limitedChoices===e(u).id})]),k("click",m,()=>I("limitedChoices",e(u).id)),h(v,m)}),a(n);var l=r(n,2);{var c=v=>{var u=ui(),m=s(u),p=r(s(m));ae(p);var y=r(p);a(m),a(u),D(()=>x(y,` candidate${e(o),d(()=>e(o).customLimit===1?"":"s")??""}`)),Pe(p,()=>e(o).customLimit,g=>T(o,e(o).customLimit=g)),h(v,u)};_(l,v=>{e(o),d(()=>e(o).limitedChoices==="custom")&&v(c)})}a(i),h(t,i)};_(et,t=>{e(o),d(()=>e(o).ballotType==="choose-x")&&t(kt)})}var tt=r(et,2);{var Rt=t=>{var i=fi(),n=r(s(i),4);U(n,5,()=>e(Re),J,(l,c)=>{var v=bi();let u;var m=s(v),p=s(m,!0);a(m);var y=r(m,2),g=s(y,!0);a(y),a(v),D(w=>{u=Y(v,1,"option-button svelte-1f2xdbt",null,u,w),x(p,(e(c),d(()=>e(c).name))),x(g,(e(c),d(()=>e(c).description)))},[()=>({selected:e(o).tabulationMethod===e(c).id})]),k("click",v,()=>I("tabulationMethod",e(c).id)),h(l,v)}),a(n),a(i),h(t,i)};_(tt,t=>{e(o),d(()=>e(o).ballotType)&&t(Rt)})}var Vt=r(tt,2);{var Dt=t=>{var i=Si(),n=r(s(i),2),l=r(s(n),2);U(l,5,()=>ke,J,(u,m)=>{var p=yi();let y;var g=s(p),w=s(g,!0);a(g);var M=r(g,2),C=s(M,!0);a(M),a(p),D(P=>{y=Y(p,1,"option-button small svelte-1f2xdbt",null,y,P),x(w,(e(m),d(()=>e(m).name))),x(C,(e(m),d(()=>e(m).description)))},[()=>({selected:e(o).listType===e(m).id})]),k("click",p,()=>I("listType",e(m).id)),h(u,p)}),a(l),a(n);var c=r(n,2);{var v=u=>{var m=xi(),p=s(m),y=s(p),g=s(y);ae(g),Ce(2),a(y),a(p);var w=r(p,2);{var M=C=>{var P=gi(),L=s(P),N=r(s(L)),G=s(N);a(N);var z=r(N,2);ae(z),Ce(2),a(L),a(P),D(()=>x(G,`${e(o),d(()=>e(o).singleWinnerProportion)??""}%`)),Pe(z,()=>e(o).singleWinnerProportion,F=>T(o,e(o).singleWinnerProportion=F)),h(C,P)};_(w,C=>{e(o),d(()=>e(o).mixedMember)&&C(M)})}a(m),ut(g,()=>e(o).mixedMember,C=>T(o,e(o).mixedMember=C)),h(u,m)};_(c,u=>{e(o),d(()=>e(o).tabulationMethod==="mmp")&&u(v)})}a(i),h(t,i)};_(Vt,t=>{e(o),d(()=>e(o).tabulationMethod&&["party-list-pr","mmp"].includes(e(o).tabulationMethod))&&t(Dt)})}a(Ae);var it=r(Ae,2),ot=s(it),Oe=s(ot),at=s(Oe),Wt=r(at);{var Lt=t=>{var i=wi();h(t,i)},At=t=>{var i=si(),n=Xe(i);{var l=c=>{var v=_i();h(c,v)};_(n,c=>{e(o),d(()=>_t(e(o)))&&c(l)},!0)}h(t,i)};_(Wt,t=>{e(o),d(()=>wt(e(o)))?t(Lt):t(At,!1)})}a(Oe);var st=r(Oe,2);{var $t=t=>{var i=qi(),n=r(s(i),2),l=s(n),c=s(l),v=s(c),u=r(s(v),2);a(v);var m=r(v,2),p=s(m),y=r(p,2),g=s(y);a(y),a(m),a(c);var w=r(c,2);{var M=S=>{var O=Mi();h(S,O)};_(w,S=>{e(j)==="proportionality"&&S(M)})}a(l);var C=r(l,2),P=s(C),L=s(P),N=r(s(L),2);a(L);var G=r(L,2),z=s(G),F=r(z,2),ne=s(F);a(F),a(G),a(P);var le=r(P,2);{var Be=S=>{var O=Ci();h(S,O)};_(le,S=>{e(j)==="simplicity"&&S(Be)})}a(C);var ee=r(C,2),ce=s(ee),K=s(ce),pe=r(s(K),2);a(K);var ge=r(K,2),te=s(ge),xe=r(te,2),de=s(xe);a(xe),a(ge),a(ce);var ve=r(ce,2);{var ze=S=>{var O=Pi();h(S,O)};_(ve,S=>{e(j)==="resistance"&&S(ze)})}a(ee);var me=r(ee,2),ue=s(me),ie=s(ue),he=r(s(ie),2);a(ie);var Se=r(ie,2),oe=s(Se),we=r(oe,2),be=s(we);a(we),a(Se),a(ue);var _e=r(ue,2);{var Fe=S=>{var O=Ti();h(S,O)};_(_e,S=>{e(j)==="quality"&&S(Fe)})}a(me),a(n),a(i),D(()=>{fe(p,"data-score",(e(b),d(()=>e(b).proportionality))),H(p,`width: ${e(b),d(()=>e(b).proportionality/5*100)??""}%`),x(g,`${e(b),d(()=>e(b).proportionality)??""}/5`),fe(z,"data-score",(e(b),d(()=>e(b).simplicity))),H(z,`width: ${e(b),d(()=>e(b).simplicity/5*100)??""}%`),x(ne,`${e(b),d(()=>e(b).simplicity)??""}/5`),fe(te,"data-score",(e(b),d(()=>e(b).strategyResistance))),H(te,`width: ${e(b),d(()=>e(b).strategyResistance/5*100)??""}%`),x(de,`${e(b),d(()=>e(b).strategyResistance)??""}/5`),fe(oe,"data-score",(e(b),d(()=>e(b).representation))),H(oe,`width: ${e(b),d(()=>e(b).representation/5*100)??""}%`),x(be,`${e(b),d(()=>e(b).representation)??""}/5`)}),k("click",u,S=>{S.stopPropagation(),ye("proportionality")}),k("click",N,S=>{S.stopPropagation(),ye("simplicity")}),k("click",pe,S=>{S.stopPropagation(),ye("resistance")}),k("click",he,S=>{S.stopPropagation(),ye("quality")}),h(t,i)};_(st,t=>{e(o),d(()=>e(o).ballotType&&e(o).tabulationMethod)&&t($t)})}var rt=r(st,2);{var Et=t=>{var i=ki(),n=s(i);ht(n,()=>(e(R),d(()=>e(R).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n\n/g,"<br><br>")))),a(i),h(t,i)};_(rt,t=>{e(R)&&t(Et)})}var nt=r(rt,2);{var Nt=t=>{var i=Ri(),n=r(s(i),2);ht(n,()=>(e(X),d(()=>e(X).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n\n/g,"<br><br>")))),a(i),h(t,i)};_(nt,t=>{e(X)&&t(Nt)})}var Ot=r(nt,2);{var Bt=t=>{var i=Wi(),n=Xe(i);{var l=u=>{var m=Di(),p=r(s(m),2);U(p,1,()=>(e(o),d(()=>Je(e(o)))),J,(y,g)=>{var w=Vi(),M=s(w),C=s(M);a(M);var P=r(M,2),L=s(P,!0);a(P),a(w),D(()=>{x(C,`Compare ${e(g),d(()=>e(g).title)??""}`),x(L,(e(g),d(()=>e(g).description)))}),k("click",M,()=>Pt(e(g).methods)),h(y,w)}),a(m),h(u,m)};_(n,u=>{e(o),d(()=>e(o).tabulationMethod&&Je(e(o)).length>0)&&u(l)})}var c=r(n,2),v=s(c);Ce(2),a(c),D(()=>fe(v,"href",`${li??""}/about-approval-voting`)),h(t,i)};_(Ot,t=>{e(o),d(()=>e(o).ballotType)&&t(Bt)})}a(ot),a(it),a(Qe),a(Le);var zt=r(Le,2);{var Ft=t=>{var i=Ni(),n=s(i),l=s(n),c=r(s(l),2);a(l);var v=r(l,2),u=s(v);U(u,5,()=>e(De),J,(m,p)=>{var y=Ei();let g;var w=s(y),M=s(w),C=s(M,!0);a(M);var P=r(M,2);{var L=W=>{var A=Li();h(W,A)};_(P,W=>{e(p),e(o),d(()=>e(p).id===e(o).tabulationMethod)&&W(L)})}a(w);var N=r(w,2),G=s(N),z=r(s(G));a(G),a(N);var F=r(N,2),ne=s(F),le=r(s(ne),2),Be=s(le);a(le);var ee=r(le,2),ce=s(ee);a(ee),a(ne);var K=r(ne,2),pe=r(s(K),2),ge=s(pe);a(pe);var te=r(pe,2),xe=s(te);a(te),a(K);var de=r(K,2),ve=r(s(de),2),ze=s(ve);a(ve);var me=r(ve,2),ue=s(me);a(me),a(de);var ie=r(de,2),he=r(s(ie),2),Se=s(he);a(he);var oe=r(he,2),we=s(oe);a(oe),a(ie),a(F);var be=r(F,2),_e=s(be),Fe=r(s(_e));a(_e),a(be);var S=r(be,2);{var O=W=>{var A=Ai(),He=r(s(A),2);let lt;var It=s(He,!0);a(He),a(A),D(jt=>{lt=Y(He,1,"compatibility-value svelte-1f2xdbt",null,lt,jt),x(It,(e(p),d(()=>e(p).votingMachineCompatibility.existingMachines?"Compatible":"Requires New Machines")))},[()=>({compatible:e(p).votingMachineCompatibility.existingMachines,incompatible:!e(p).votingMachineCompatibility.existingMachines})]),h(W,A)};_(S,W=>{e(p),d(()=>e(p).votingMachineCompatibility)&&W(O)})}var Ht=r(S,2);{var Xt=W=>{var A=$i();k("click",A,()=>{I("tabulationMethod",e(p).id),We()}),h(W,A)};_(Ht,W=>{e(p),e(o),d(()=>e(p).id!==e(o).tabulationMethod)&&W(Xt)})}a(y),D((W,A)=>{g=Y(y,1,"comparison-card svelte-1f2xdbt",null,g,W),x(C,(e(p),d(()=>e(p).name))),x(z,` ${e(p),d(()=>e(p).shortDescription)??""}`),H(Be,`width: ${e(p),d(()=>e(p).scores.proportionality/5*100)??""}%`),x(ce,`${e(p),d(()=>e(p).scores.proportionality)??""}/5`),H(ge,`width: ${e(p),d(()=>e(p).scores.simplicity/5*100)??""}%`),x(xe,`${e(p),d(()=>e(p).scores.simplicity)??""}/5`),H(ze,`width: ${e(p),d(()=>e(p).scores.strategyResistance/5*100)??""}%`),x(ue,`${e(p),d(()=>e(p).scores.strategyResistance)??""}/5`),H(Se,`width: ${e(p),d(()=>e(p).scores.representation/5*100)??""}%`),x(we,`${e(p),d(()=>e(p).scores.representation)??""}/5`),x(Fe,` ${A??""}.`)},[()=>({current:e(p).id===e(o).tabulationMethod}),()=>(e(p),d(()=>e(p).detailedCritique.split(".")[0]))]),h(m,y)}),a(u),a(v),a(n),a(i),k("click",c,We),k("click",n,m=>m.stopPropagation()),k("click",i,We),h(t,i)};_(zt,t=>{e(Ve)&&t(Ft)})}D(()=>x(at,`${e(B)??""} `)),h(Te,Ye),oi()}export{eo as component};
